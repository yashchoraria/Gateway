"use strict";var ADe=Object.create;var AT=Object.defineProperty;var kte=Object.getOwnPropertyDescriptor;var PDe=Object.getOwnPropertyNames;var kDe=Object.getPrototypeOf,DDe=Object.prototype.hasOwnProperty;var I=(t,e)=>()=>(t&&(e=t(t=0)),e);var k=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),an=(t,e)=>{for(var r in e)AT(t,r,{get:e[r],enumerable:!0})},Dte=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PDe(e))!DDe.call(t,i)&&i!==r&&AT(t,i,{get:()=>e[i],enumerable:!(n=kte(e,i))||n.enumerable});return t};var W=(t,e,r)=>(r=t!=null?ADe(kDe(t)):{},Dte(e||!t||!t.__esModule?AT(r,"default",{value:t,enumerable:!0}):r,t)),Gi=t=>Dte(AT({},"__esModule",{value:!0}),t),fe=(t,e,r,n)=>{for(var i=n>1?void 0:n?kte(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&AT(e,r,i),i},ie=(t,e)=>(r,n)=>e(r,n,t);var _r=k((ult,Mte)=>{"use strict";var A9=Object.defineProperty,NDe=Object.getOwnPropertyDescriptor,LDe=Object.getOwnPropertyNames,ODe=Object.prototype.hasOwnProperty,MDe=(t,e)=>{for(var r in e)A9(t,r,{get:e[r],enumerable:!0})},FDe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of LDe(e))!ODe.call(t,i)&&i!==r&&A9(t,i,{get:()=>e[i],enumerable:!(n=NDe(e,i))||n.enumerable});return t},UDe=t=>FDe(A9({},"__esModule",{value:!0}),t),Lte={};MDe(Lte,{config:()=>jDe,t:()=>Ote});Mte.exports=UDe(Lte);var BDe=require("fs"),qDe=require("fs/promises");async function HDe(t){if(t.protocol==="file:")return await(0,qDe.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let n=`Unexpected ${e.status} response while trying to read ${t}`;try{n+=`: ${await e.text()}`}catch{}throw new Error(n)}return await e.text()}throw new Error("Unsupported protocol")}function GDe(t){return(0,BDe.readFileSync)(t,"utf8")}var PT;function jDe(t){if("contents"in t){typeof t.contents=="string"?PT=JSON.parse(t.contents):PT=t.contents;return}if("fsPath"in t){let e=GDe(t.fsPath),r=JSON.parse(e);PT=Nte(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{let i=HDe(e).then(o=>{try{let s=JSON.parse(o);PT=Nte(s)?s.contents.bundle:s}catch(s){n(s)}}).catch(o=>{n(o)});r(i)})}}function Ote(...t){let e=t[0],r,n,i;if(typeof e=="string")r=e,n=e,t.splice(0,1),i=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return Ote(a,...s)}else n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=PT?.[r];return o?typeof o=="string"?rA(o,i):o.comment?rA(o.message,i):rA(n,i):rA(n,i)}var zDe=/{([^}]+)}/g;function rA(t,e){return Object.keys(e).length===0?t:t.replace(zDe,(r,n)=>e[n]??r)}function Nte(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var Ute=k(P9=>{var Fte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");P9.encode=function(t){if(0<=t&&t<Fte.length)return Fte[t];throw new TypeError("Must be between 0 and 63: "+t)};P9.decode=function(t){var e=65,r=90,n=97,i=122,o=48,s=57,a=43,c=47,u=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=s?t-o+l:t==a?62:t==c?63:-1}});var N9=k(D9=>{var Bte=Ute(),k9=5,qte=1<<k9,Hte=qte-1,Gte=qte;function VDe(t){return t<0?(-t<<1)+1:(t<<1)+0}function $De(t){var e=(t&1)===1,r=t>>1;return e?-r:r}D9.encode=function(e){var r="",n,i=VDe(e);do n=i&Hte,i>>>=k9,i>0&&(n|=Gte),r+=Bte.encode(n);while(i>0);return r};D9.decode=function(e,r,n){var i=e.length,o=0,s=0,a,c;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=Bte.decode(e.charCodeAt(r++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(c&Gte),c&=Hte,o=o+(c<<s),s+=k9}while(a);n.value=$De(o),n.rest=r}});var Gb=k(vs=>{function WDe(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}vs.getArg=WDe;var jte=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,KDe=/^data:.+\,.+$/;function kT(t){var e=t.match(jte);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}vs.urlParse=kT;function qb(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}vs.urlGenerate=qb;function L9(t){var e=t,r=kT(t);if(r){if(!r.path)return t;e=r.path}for(var n=vs.isAbsolute(e),i=e.split(/\/+/),o,s=0,a=i.length-1;a>=0;a--)o=i[a],o==="."?i.splice(a,1):o===".."?s++:s>0&&(o===""?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,qb(r)):e}vs.normalize=L9;function zte(t,e){t===""&&(t="."),e===""&&(e=".");var r=kT(e),n=kT(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),qb(r);if(r||e.match(KDe))return e;if(n&&!n.host&&!n.path)return n.host=e,qb(n);var i=e.charAt(0)==="/"?e:L9(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,qb(n)):i}vs.join=zte;vs.isAbsolute=function(t){return t.charAt(0)==="/"||jte.test(t)};function YDe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}vs.relative=YDe;var Vte=function(){var t=Object.create(null);return!("__proto__"in t)}();function $te(t){return t}function QDe(t){return Wte(t)?"$"+t:t}vs.toSetString=Vte?$te:QDe;function XDe(t){return Wte(t)?t.slice(1):t}vs.fromSetString=Vte?$te:XDe;function Wte(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function JDe(t,e,r){var n=Hb(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Hb(t.name,e.name)}vs.compareByOriginalPositions=JDe;function ZDe(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Hb(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Hb(t.name,e.name)}vs.compareByGeneratedPositionsDeflated=ZDe;function Hb(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function eNe(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Hb(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Hb(t.name,e.name)}vs.compareByGeneratedPositionsInflated=eNe;function tNe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}vs.parseSourceMapInput=tNe;function rNe(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=kT(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=zte(qb(n),e)}return L9(e)}vs.computeSourceURL=rNe});var F9=k(Kte=>{var O9=Gb(),M9=Object.prototype.hasOwnProperty,F0=typeof Map<"u";function Sp(){this._array=[],this._set=F0?new Map:Object.create(null)}Sp.fromArray=function(e,r){for(var n=new Sp,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n};Sp.prototype.size=function(){return F0?this._set.size:Object.getOwnPropertyNames(this._set).length};Sp.prototype.add=function(e,r){var n=F0?e:O9.toSetString(e),i=F0?this.has(e):M9.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(F0?this._set.set(e,o):this._set[n]=o)};Sp.prototype.has=function(e){if(F0)return this._set.has(e);var r=O9.toSetString(e);return M9.call(this._set,r)};Sp.prototype.indexOf=function(e){if(F0){var r=this._set.get(e);if(r>=0)return r}else{var n=O9.toSetString(e);if(M9.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};Sp.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};Sp.prototype.toArray=function(){return this._array.slice()};Kte.ArraySet=Sp});var Xte=k(Qte=>{var Yte=Gb();function nNe(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||Yte.compareByGeneratedPositionsInflated(t,e)<=0}function nA(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}nA.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};nA.prototype.add=function(e){nNe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};nA.prototype.toArray=function(){return this._sorted||(this._array.sort(Yte.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Qte.MappingList=nA});var U9=k(Jte=>{var DT=N9(),ji=Gb(),iA=F9().ArraySet,iNe=Xte().MappingList;function Rc(t){t||(t={}),this._file=ji.getArg(t,"file",null),this._sourceRoot=ji.getArg(t,"sourceRoot",null),this._skipValidation=ji.getArg(t,"skipValidation",!1),this._sources=new iA,this._names=new iA,this._mappings=new iNe,this._sourcesContents=null}Rc.prototype._version=3;Rc.fromSourceMap=function(e){var r=e.sourceRoot,n=new Rc({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=ji.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=ji.relative(r,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n};Rc.prototype.addMapping=function(e){var r=ji.getArg(e,"generated"),n=ji.getArg(e,"original",null),i=ji.getArg(e,"source",null),o=ji.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})};Rc.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=ji.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[ji.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[ji.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Rc.prototype.applySourceMap=function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=ji.relative(o,i));var s=new iA,a=new iA;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,n!=null&&(c.source=ji.join(n,c.source)),o!=null&&(c.source=ji.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var l=c.source;l!=null&&!s.has(l)&&s.add(l);var d=c.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=s,this._names=a,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(n!=null&&(c=ji.join(n,c)),o!=null&&(c=ji.relative(o,c)),this.setSourceContent(c,u))},this)};Rc.prototype._validateMapping=function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}};Rc.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,i=0,o=0,s=0,a="",c,u,l,d,p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(u=p[f],c="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)c+=";",r++;else if(f>0){if(!ji.compareByGeneratedPositionsInflated(u,p[f-1]))continue;c+=","}c+=DT.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(d=this._sources.indexOf(u.source),c+=DT.encode(d-s),s=d,c+=DT.encode(u.originalLine-1-i),i=u.originalLine-1,c+=DT.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(l=this._names.indexOf(u.name),c+=DT.encode(l-o),o=l)),a+=c}return a};Rc.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=ji.relative(r,n));var i=ji.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};Rc.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Rc.prototype.toString=function(){return JSON.stringify(this.toJSON())};Jte.SourceMapGenerator=Rc});var Zte=k(U0=>{U0.GREATEST_LOWER_BOUND=1;U0.LEAST_UPPER_BOUND=2;function B9(t,e,r,n,i,o){var s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?B9(s,e,r,n,i,o):o==U0.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?B9(t,s,r,n,i,o):o==U0.LEAST_UPPER_BOUND?s:t<0?-1:t}U0.search=function(e,r,n,i){if(r.length===0)return-1;var o=B9(-1,r.length,e,r,n,i||U0.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var tre=k(ere=>{function q9(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function oNe(t,e){return Math.round(t+Math.random()*(e-t))}function H9(t,e,r,n){if(r<n){var i=oNe(r,n),o=r-1;q9(t,i,n);for(var s=t[n],a=r;a<n;a++)e(t[a],s)<=0&&(o+=1,q9(t,o,a));q9(t,o+1,a);var c=o+1;H9(t,e,r,c-1),H9(t,e,c+1,n)}}ere.quickSort=function(t,e){H9(t,e,0,t.length-1)}});var nre=k(oA=>{var tt=Gb(),G9=Zte(),jb=F9().ArraySet,sNe=N9(),NT=tre().quickSort;function Pn(t,e){var r=t;return typeof t=="string"&&(r=tt.parseSourceMapInput(t)),r.sections!=null?new Lu(r,e):new jo(r,e)}Pn.fromSourceMap=function(t,e){return jo.fromSourceMap(t,e)};Pn.prototype._version=3;Pn.prototype.__generatedMappings=null;Object.defineProperty(Pn.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Pn.prototype.__originalMappings=null;Object.defineProperty(Pn.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Pn.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Pn.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Pn.GENERATED_ORDER=1;Pn.ORIGINAL_ORDER=2;Pn.GREATEST_LOWER_BOUND=1;Pn.LEAST_UPPER_BOUND=2;Pn.prototype.eachMapping=function(e,r,n){var i=r||null,o=n||Pn.GENERATED_ORDER,s;switch(o){case Pn.GENERATED_ORDER:s=this._generatedMappings;break;case Pn.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=tt.computeSourceURL(a,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)};Pn.prototype.allGeneratedPositionsFor=function(e){var r=tt.getArg(e,"line"),n={source:tt.getArg(e,"source"),originalLine:r,originalColumn:tt.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",tt.compareByOriginalPositions,G9.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)i.push({line:tt.getArg(s,"generatedLine",null),column:tt.getArg(s,"generatedColumn",null),lastColumn:tt.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var c=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==c;)i.push({line:tt.getArg(s,"generatedLine",null),column:tt.getArg(s,"generatedColumn",null),lastColumn:tt.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i};oA.SourceMapConsumer=Pn;function jo(t,e){var r=t;typeof t=="string"&&(r=tt.parseSourceMapInput(t));var n=tt.getArg(r,"version"),i=tt.getArg(r,"sources"),o=tt.getArg(r,"names",[]),s=tt.getArg(r,"sourceRoot",null),a=tt.getArg(r,"sourcesContent",null),c=tt.getArg(r,"mappings"),u=tt.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=tt.normalize(s)),i=i.map(String).map(tt.normalize).map(function(l){return s&&tt.isAbsolute(s)&&tt.isAbsolute(l)?tt.relative(s,l):l}),this._names=jb.fromArray(o.map(String),!0),this._sources=jb.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(l){return tt.computeSourceURL(s,l,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=c,this._sourceMapURL=e,this.file=u}jo.prototype=Object.create(Pn.prototype);jo.prototype.consumer=Pn;jo.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=tt.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};jo.fromSourceMap=function(e,r){var n=Object.create(jo.prototype),i=n._names=jb.fromArray(e._names.toArray(),!0),o=n._sources=jb.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return tt.computeSourceURL(n.sourceRoot,f,r)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],c=n.__originalMappings=[],u=0,l=s.length;u<l;u++){var d=s[u],p=new rre;p.generatedLine=d.generatedLine,p.generatedColumn=d.generatedColumn,d.source&&(p.source=o.indexOf(d.source),p.originalLine=d.originalLine,p.originalColumn=d.originalColumn,d.name&&(p.name=i.indexOf(d.name)),c.push(p)),a.push(p)}return NT(n.__originalMappings,tt.compareByOriginalPositions),n};jo.prototype._version=3;Object.defineProperty(jo.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function rre(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}jo.prototype._parseMappings=function(e,r){for(var n=1,i=0,o=0,s=0,a=0,c=0,u=e.length,l=0,d={},p={},f=[],m=[],h,g,v,y,b;l<u;)if(e.charAt(l)===";")n++,l++,i=0;else if(e.charAt(l)===",")l++;else{for(h=new rre,h.generatedLine=n,y=l;y<u&&!this._charIsMappingSeparator(e,y);y++);if(g=e.slice(l,y),v=d[g],v)l+=g.length;else{for(v=[];l<y;)sNe.decode(e,l,p),b=p.value,l=p.rest,v.push(b);if(v.length===2)throw new Error("Found a source, but no line and column");if(v.length===3)throw new Error("Found a source and line, but no column");d[g]=v}h.generatedColumn=i+v[0],i=h.generatedColumn,v.length>1&&(h.source=a+v[1],a+=v[1],h.originalLine=o+v[2],o=h.originalLine,h.originalLine+=1,h.originalColumn=s+v[3],s=h.originalColumn,v.length>4&&(h.name=c+v[4],c+=v[4])),m.push(h),typeof h.originalLine=="number"&&f.push(h)}NT(m,tt.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,NT(f,tt.compareByOriginalPositions),this.__originalMappings=f};jo.prototype._findMapping=function(e,r,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return G9.search(e,r,o,s)};jo.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};jo.prototype.originalPositionFor=function(e){var r={generatedLine:tt.getArg(e,"line"),generatedColumn:tt.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",tt.compareByGeneratedPositionsDeflated,tt.getArg(e,"bias",Pn.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=tt.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=tt.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=tt.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:tt.getArg(i,"originalLine",null),column:tt.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};jo.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};jo.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=tt.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=tt.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')};jo.prototype.generatedPositionFor=function(e){var r=tt.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:tt.getArg(e,"line"),originalColumn:tt.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",tt.compareByOriginalPositions,tt.getArg(e,"bias",Pn.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:tt.getArg(o,"generatedLine",null),column:tt.getArg(o,"generatedColumn",null),lastColumn:tt.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};oA.BasicSourceMapConsumer=jo;function Lu(t,e){var r=t;typeof t=="string"&&(r=tt.parseSourceMapInput(t));var n=tt.getArg(r,"version"),i=tt.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new jb,this._names=new jb;var o={line:-1,column:0};this._sections=i.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=tt.getArg(s,"offset"),c=tt.getArg(a,"line"),u=tt.getArg(a,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new Pn(tt.getArg(s,"map"),e)}})}Lu.prototype=Object.create(Pn.prototype);Lu.prototype.constructor=Pn;Lu.prototype._version=3;Object.defineProperty(Lu.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});Lu.prototype.originalPositionFor=function(e){var r={generatedLine:tt.getArg(e,"line"),generatedColumn:tt.getArg(e,"column")},n=G9.search(r,this._sections,function(o,s){var a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Lu.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Lu.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Lu.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(tt.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};Lu.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var a=o[s],c=i.consumer._sources.at(a.source);c=tt.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;a.name&&(u=i.consumer._names.at(a.name),this._names.add(u),u=this._names.indexOf(u));var l={source:c,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:u};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}NT(this.__generatedMappings,tt.compareByGeneratedPositionsDeflated),NT(this.__originalMappings,tt.compareByOriginalPositions)};oA.IndexedSourceMapConsumer=Lu});var ore=k(ire=>{var aNe=U9().SourceMapGenerator,sA=Gb(),cNe=/(\r?\n)/,uNe=10,zb="$$$isSourceNode$$$";function tc(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[zb]=!0,n!=null&&this.add(n)}tc.fromStringWithSourceMap=function(e,r,n){var i=new tc,o=e.split(cNe),s=0,a=function(){var p=m(),f=m()||"";return p+f;function m(){return s<o.length?o[s++]:void 0}},c=1,u=0,l=null;return r.eachMapping(function(p){if(l!==null)if(c<p.generatedLine)d(l,a()),c++,u=0;else{var f=o[s]||"",m=f.substr(0,p.generatedColumn-u);o[s]=f.substr(p.generatedColumn-u),u=p.generatedColumn,d(l,m),l=p;return}for(;c<p.generatedLine;)i.add(a()),c++;if(u<p.generatedColumn){var f=o[s]||"";i.add(f.substr(0,p.generatedColumn)),o[s]=f.substr(p.generatedColumn),u=p.generatedColumn}l=p},this),s<o.length&&(l&&d(l,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(p){var f=r.sourceContentFor(p);f!=null&&(n!=null&&(p=sA.join(n,p)),i.setSourceContent(p,f))}),i;function d(p,f){if(p===null||p.source===void 0)i.add(f);else{var m=n?sA.join(n,p.source):p.source;i.add(new tc(p.originalLine,p.originalColumn,m,f,p.name))}}};tc.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[zb]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};tc.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[zb]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};tc.prototype.walk=function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[zb]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};tc.prototype.join=function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};tc.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[zb]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};tc.prototype.setSourceContent=function(e,r){this.sourceContents[sA.toSetString(e)]=r};tc.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][zb]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(sA.fromSetString(i[r]),this.sourceContents[i[r]])};tc.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};tc.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new aNe(e),i=!1,o=null,s=null,a=null,c=null;return this.walk(function(u,l){r.code+=u,l.source!==null&&l.line!==null&&l.column!==null?((o!==l.source||s!==l.line||a!==l.column||c!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),o=l.source,s=l.line,a=l.column,c=l.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var d=0,p=u.length;d<p;d++)u.charCodeAt(d)===uNe?(r.line++,r.column=0,d+1===p?(o=null,i=!1):i&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(u,l){n.setSourceContent(u,l)}),{code:r.code,map:n}};ire.SourceNode=tc});var sre=k(aA=>{aA.SourceMapGenerator=U9().SourceMapGenerator;aA.SourceMapConsumer=nre().SourceMapConsumer;aA.SourceNode=ore().SourceNode});var cre=k((xlt,are)=>{var lNe=Object.prototype.toString,j9=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function dNe(t){return lNe.call(t).slice(8,-1)==="ArrayBuffer"}function pNe(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return j9?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function fNe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return j9?Buffer.from(t,e):new Buffer(t,e)}function mNe(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return dNe(t)?pNe(t,e,r):typeof t=="string"?fNe(t,e):j9?Buffer.from(t):new Buffer(t)}are.exports=mNe});var gre=k((q0,W9)=>{var hNe=sre().SourceMapConsumer,z9=require("path"),Ll;try{Ll=require("fs"),(!Ll.existsSync||!Ll.readFileSync)&&(Ll=null)}catch{}var gNe=cre();function ure(t,e){return t.require(e)}var lre=!1,dre=!1,V9=!1,LT="auto",B0={},OT={},vNe=/^data:application\/json[^,]+base64,/,hm=[],gm=[];function K9(){return LT==="browser"?!0:LT==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function yNe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function bNe(){return typeof process=="object"&&process!==null?process.version:""}function _Ne(){if(typeof process=="object"&&process!==null)return process.stderr}function xNe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function cA(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}var Y9=cA(hm);hm.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in B0)return B0[t];var e="";try{if(Ll)Ll.existsSync(t)&&(e=Ll.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return B0[t]=e});function $9(t,e){if(!t)return e;var r=z9.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+z9.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+z9.resolve(r.slice(i.length),e)}function SNe(t){var e;if(K9())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=Y9(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,s;s=i.exec(e);)o=s;return o?o[1]:null}var Q9=cA(gm);gm.push(function(t){var e=SNe(t);if(!e)return null;var r;if(vNe.test(e)){var n=e.slice(e.indexOf(",")+1);r=gNe(n,"base64").toString(),e=t}else e=$9(t,e),r=Y9(e);return r?{url:e,map:r}:null});function X9(t){var e=OT[t.source];if(!e){var r=Q9(t.source);r?(e=OT[t.source]={url:r.url,map:new hNe(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var s=e.map.sourcesContent[o];if(s){var a=$9(e.url,i);B0[a]=s}})):e=OT[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=$9(e.url,n.source),n}return t}function fre(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=X9({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+fre(e[2])+")":t}function ENe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor(),c=!(this.isToplevel()||a);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var l=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,l&&o.indexOf("."+l)!=o.length-l.length-1&&(i+=" [as "+l+"]")):i+=u+"."+(l||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,s=!1);return s&&(i+=" ("+e+")"),i}function pre(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=ENe,e}function mre(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=o.test(bNe())?0:62;n===1&&i>s&&!K9()&&!t.isEval()&&(i-=s);var a=X9({source:r,line:n,column:i});e.curPosition=a,t=pre(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=fre(u),t=pre(t),t.getEvalOrigin=function(){return u}),t}function TNe(t,e){V9&&(B0={},OT={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+mre(e[a],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+s.reverse().join("")}function hre(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=B0[r];if(!o&&Ll&&Ll.existsSync(r))try{o=Ll.readFileSync(r,"utf8")}catch{o=""}if(o){var s=o.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return r+":"+n+`
`+s+`
`+new Array(i).join(" ")+"^"}}return null}function CNe(t){var e=hre(t),r=_Ne();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),xNe(1)}function INe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return CNe(arguments[1])}return t.apply(this,arguments)}}var wNe=hm.slice(0),RNe=gm.slice(0);q0.wrapCallSite=mre;q0.getErrorSource=hre;q0.mapSourcePosition=X9;q0.retrieveSourceMap=Q9;q0.install=function(t){if(t=t||{},t.environment&&(LT=t.environment,["node","browser","auto"].indexOf(LT)===-1))throw new Error("environment "+LT+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(hm.length=0),hm.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(gm.length=0),gm.unshift(t.retrieveSourceMap)),t.hookRequire&&!K9()){var e=ure(W9,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,s){return B0[s]=o,OT[s]=void 0,r.call(this,o,s)},e.prototype._compile.__sourceMapSupport=!0)}if(V9||(V9="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),lre||(lre=!0,Error.prepareStackTrace=TNe),!dre){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=ure(W9,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&yNe()&&(dre=!0,INe())}};q0.resetRetrieveHandlers=function(){hm.length=0,gm.length=0,hm=wNe.slice(0),gm=RNe.slice(0),Q9=cA(gm),Y9=cA(hm)}});var rC=k(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.BaseTokensPerName=Bl.BaseTokensPerMessage=Bl.BaseTokensPerCompletion=Bl.ChatRole=void 0;var Ine;(function(t){t.System="system",t.User="user",t.Assistant="assistant"})(Ine||(Bl.ChatRole=Ine={}));Bl.BaseTokensPerCompletion=3;Bl.BaseTokensPerMessage=3;Bl.BaseTokensPerName=1});var Rne=k(()=>{"use strict";function i4e(t,e,...r){return{ctor:t,props:e,children:r.flat()}}function wne(){throw new Error("This should not be invoked!")}wne.isFragment=!0;globalThis.vscpp=i4e;globalThis.vscppf=wne});var L7=k(dP=>{"use strict";Object.defineProperty(dP,"__esModule",{value:!0});dP.PromptElement=void 0;Rne();var N7=class{get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};dP.PromptElement=N7});var B7=k(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.PrioritizedList=bs.TextChunk=bs.AssistantMessage=bs.UserMessage=bs.SystemMessage=bs.BaseChatMessage=bs.isChatMessagePromptElement=void 0;var F7=rC(),U7=L7();function o4e(t){return t instanceof pP||t instanceof fP||t instanceof mP}bs.isChatMessagePromptElement=o4e;var d_=class extends U7.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};bs.BaseChatMessage=d_;var pP=class extends d_{constructor(e){e.role=F7.ChatRole.System,super(e)}};bs.SystemMessage=pP;var fP=class extends d_{constructor(e){e.role=F7.ChatRole.User,super(e)}};bs.UserMessage=fP;var mP=class extends d_{constructor(e){e.role=F7.ChatRole.Assistant,super(e)}};bs.AssistantMessage=mP;var O7=class extends U7.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};bs.TextChunk=O7;var M7=class extends U7.PromptElement{render(){let e=this.props.children;if(e)return vscpp(vscppf,null,e.map((r,n)=>(r.props??(r.props={}),r.props.priority=this.props.descending?this.props.priority-n:this.props.priority-e.length+n,r)))}};bs.PrioritizedList=M7});var Ane=k(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.bytePairEncode=Hl.BinaryMap=Hl.binaryMapKey=void 0;var s4e=(t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,s=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),a=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&s;return o+16777216*a};Hl.binaryMapKey=s4e;var q7=class t{constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,Hl.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,Hl.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let s=new t;s.set(e.subarray(6),r),this.nested.set(n,s)}}};Hl.BinaryMap=q7;var ql=new Int32Array(128),Vs=new Int32Array(128);function a4e(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;ql.length<r*2;)Vs=new Int32Array(Vs.length*2),ql=new Int32Array(ql.length*2);for(let c=0;c<r-1;c++){let u=e.get(t,c,c+2)??2147483647;u<n&&(n=u,i=c),Vs[c]=c,ql[c]=u}Vs[r-1]=r-1,ql[r-1]=2147483647,Vs[r]=r,ql[r]=2147483647;let o=r+1;function s(c,u=0){if(c+u+2<o){let l=e.get(t,Vs[c],Vs[c+u+2]);if(l!==void 0)return l}return 2147483647}for(;n!==2147483647;){ql[Vs[i]]=s(i,1),i>0&&(ql[Vs[i-1]]=s(i-1,1));for(let c=i+1;c<o-1;c++)Vs[c]=Vs[c+1];o--,i=-1,n=2147483647;for(let c=0;c<o-1;c++){let u=ql[Vs[c]];ql[Vs[c]]<n&&(n=u,i=c)}}let a=[];for(let c=0;c<o-1;c++)a.push(e.get(t,Vs[c],Vs[c+1]));return a}Hl.bytePairEncode=a4e});var Pne=k(hP=>{"use strict";Object.defineProperty(hP,"__esModule",{value:!0});hP.makeTextEncoder=void 0;var H7=class{constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},G7=class{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},c4e=()=>typeof Buffer<"u"?new G7:new H7;hP.makeTextEncoder=c4e});var kne=k(gP=>{"use strict";Object.defineProperty(gP,"__esModule",{value:!0});gP.LRUCache=void 0;var j7=class{constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new z7(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};gP.LRUCache=j7;var z7=class{constructor(e,r){this.key=e,this.value=r}}});var $7=k(yP=>{"use strict";Object.defineProperty(yP,"__esModule",{value:!0});yP.TikTokenizer=void 0;var u4e=require("fs"),l4e=require("util"),vP=Ane(),d4e=Pne(),p4e=kne();function f4e(t){let e=new Map;try{let n=u4e.readFileSync(t,"utf-8");return r(n),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let s=new Uint8Array(Buffer.from(o[0],"base64")),a=parseInt(o[1]);if(!isNaN(a))e.set(s,a);else throw new Error(`Can't parse ${o[1]} to integer`)}}}function m4e(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var V7=class{constructor(e,r,n,i=8192){this.textEncoder=(0,d4e.makeTextEncoder)(),this.textDecoder=new l4e.TextDecoder("utf-8"),this.cache=new p4e.LRUCache(i);let o=f4e(e);this.init(o,r,n)}init(e,r,n){this.encoder=new vP.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>m4e(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let s=o?i+o.index:e.length;return[o,s]}encode(e,r){let n=[],i=0;for(;;){let o,s;if([o,s]=this.findNextSpecialToken(e,i,r),s>i&&this.encodeByIndex(e,n,i,s),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,s=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(s);){let a=this.cache.get(o[0]);if(a)for(let c of a)r.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let l=(0,vP.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let d of l)r.push(d);this.cache.set(o[0],l)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,s,a){let c,u=e.substring(n,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let l=c[0],d=this.cache.get(l);if(d)if(s+d.length<=o)s+=d.length,a+=l.length,r.push(...d);else{let p=o-s;s+=p,a+=l.length,r.push(...d.slice(0,p));break}else{let p=this.textEncoder.encode(l),f=this.encoder.get(p,0,p.length);if(f!==void 0)if(this.cache.set(l,[f]),s+1<=o)s++,a+=l.length,r.push(f);else break;else{let m=(0,vP.bytePairEncode)(p,this.encoder,this.textEncoder.length);if(this.cache.set(l,m),s+m.length<=o){s+=m.length,a+=l.length;for(let h of m)r.push(h)}else{let h=o-s;s+=h,a+=l.length;for(let g=0;g<h;g++)r.push(m[g]);break}}}if(s>=o)break}return{tokenCount:s,encodeLength:a}}encodeTrimSuffix(e,r,n){let i=[],o=0,s=0,a=0;for(;;){let u,l;if([u,l]=this.findNextSpecialToken(e,o,n),l>o){let{tokenCount:d,encodeLength:p}=this.encodeTrimSuffixByIndex(e,i,o,l,r,s,a);if(s=d,a=p,s>=r)break}if(u!==null){if(s++,s<=r&&(o=o+this.encodeSpecialToken(i,u),a+=u[0].length,o>=e.length)||s>=r)break}else break}let c=a===e.length?e:e.slice(0,a);return{tokenIds:i,text:c}}encodeTrimPrefix(e,r,n){let i=[],o=0,s=0,a=0,c=new Map;for(c.set(s,a);;){let p,f;if([p,f]=this.findNextSpecialToken(e,o,n),f>o){let m,h=e.substring(o,f);for(this.regex.lastIndex=0;m=this.regex.exec(h);){let g=m[0],v=this.cache.get(g);if(v)s+=v.length,a+=g.length,i.push(...v),c.set(s,a);else{let y=this.textEncoder.encode(g),b=this.encoder.get(y);if(b!==void 0)this.cache.set(g,[b]),s++,a+=g.length,i.push(b),c.set(s,a);else{let x=(0,vP.bytePairEncode)(y,this.encoder,this.textEncoder.length);this.cache.set(g,x),s+=x.length,a+=g.length;for(let S of x)i.push(S);c.set(s,a)}}}}if(p!==null){if(o=o+this.encodeSpecialToken(i,p),s++,a+=p[0].length,c.set(s,a),o>=e.length)break}else break}if(s<=r)return{tokenIds:i,text:e};let u=s-r,l=0,d=0;for(let[p,f]of c)if(p>=u){l=p,d=f;break}if(l>r){let p=this.encode(e,n),f=p.slice(p.length-r);return{tokenIds:f,text:this.decode(f)}}return{tokenIds:i.slice(l),text:e.slice(d)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let s=this.specialTokensDecoder?.get(n);if(s!==void 0){let a=this.textEncoder.encode(s);i=Array.from(a.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};yP.TikTokenizer=V7});var Bne=k($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.createTokenizer=$i.createByEncoderName=$i.createByModelName=$i.getRegexByModel=$i.getRegexByEncoder=$i.getSpecialTokensByModel=$i.getSpecialTokensByEncoder=$i.MODEL_TO_ENCODING=void 0;var bP=require("fs"),W7=require("path"),h4e=$7(),g4e=new Map([["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"]]);$i.MODEL_TO_ENCODING=new Map([["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var K7="<|endoftext|>",Dne="<|fim_prefix|>",Nne="<|fim_middle|>",Lne="<|fim_suffix|>",v4e="<|endofprompt|>",nC="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",One="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+";function Y7(t){let e="";if($i.MODEL_TO_ENCODING.has(t))e=$i.MODEL_TO_ENCODING.get(t);else for(let[r,n]of g4e)if(t.startsWith(r)){e=n;break}return e}async function y4e(t,e){let r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let n=await r.text();bP.writeFileSync(e,n)}function Q7(t){let e=new Map([[K7,50256]]);switch(t){case"cl100k_base":e=new Map([[K7,100257],[Dne,100258],[Nne,100259],[Lne,100260],[v4e,100276]]);break;case"p50k_edit":e=new Map([[K7,50256],[Dne,50281],[Nne,50282],[Lne,50283]]);break;default:break}return e}$i.getSpecialTokensByEncoder=Q7;function b4e(t){let e=Y7(t);return Q7(e)}$i.getSpecialTokensByModel=b4e;function Mne(t){switch(t){case"cl100k_base":return One;default:break}return nC}$i.getRegexByEncoder=Mne;function _4e(t){let e=Y7(t);return Mne(e)}$i.getRegexByModel=_4e;async function x4e(t,e=null){return Fne(Y7(t),e)}$i.createByModelName=x4e;async function Fne(t,e=null){let r,n,i=Q7(t);switch(t){case"cl100k_base":r=One,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=nC,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=nC,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=nC,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=nC,n="https://pythia.blob.core.windows.net/public/encoding/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=W7.basename(n),s=W7.resolve(__dirname,"..","model");bP.existsSync(s)||bP.mkdirSync(s,{recursive:!0});let a=W7.resolve(s,o);return bP.existsSync(a)||(console.log(`Downloading file from ${n}`),await y4e(n,a),console.log(`Saved file to ${a}`)),Une(a,i,r)}$i.createByEncoderName=Fne;function Une(t,e,r,n=8192){return new h4e.TikTokenizer(t,e,r,n)}$i.createTokenizer=Une});var qne=k(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.createTokenizer=Wi.createByEncoderName=Wi.createByModelName=Wi.getSpecialTokensByModel=Wi.getSpecialTokensByEncoder=Wi.getRegexByModel=Wi.getRegexByEncoder=Wi.MODEL_TO_ENCODING=Wi.TikTokenizer=void 0;var S4e=$7();Object.defineProperty(Wi,"TikTokenizer",{enumerable:!0,get:function(){return S4e.TikTokenizer}});var Nm=Bne();Object.defineProperty(Wi,"MODEL_TO_ENCODING",{enumerable:!0,get:function(){return Nm.MODEL_TO_ENCODING}});Object.defineProperty(Wi,"getRegexByEncoder",{enumerable:!0,get:function(){return Nm.getRegexByEncoder}});Object.defineProperty(Wi,"getRegexByModel",{enumerable:!0,get:function(){return Nm.getRegexByModel}});Object.defineProperty(Wi,"getSpecialTokensByEncoder",{enumerable:!0,get:function(){return Nm.getSpecialTokensByEncoder}});Object.defineProperty(Wi,"getSpecialTokensByModel",{enumerable:!0,get:function(){return Nm.getSpecialTokensByModel}});Object.defineProperty(Wi,"createByModelName",{enumerable:!0,get:function(){return Nm.createByModelName}});Object.defineProperty(Wi,"createByEncoderName",{enumerable:!0,get:function(){return Nm.createByEncoderName}});Object.defineProperty(Wi,"createTokenizer",{enumerable:!0,get:function(){return Nm.createTokenizer}})});var Z7=k(xP=>{"use strict";Object.defineProperty(xP,"__esModule",{value:!0});xP.Cl100KBaseTokenizer=void 0;var X7=qne(),E4e=require("path"),_P=rC(),J7=class{constructor(){this.models=["gpt-4","gpt-3.5-turbo","text-embedding-ada-002"],this.baseTokensPerMessage=_P.BaseTokensPerMessage,this.baseTokensPerName=_P.BaseTokensPerName,this.baseTokensPerCompletion=_P.BaseTokensPerCompletion}tokenize(e){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encode(e)}tokenLength(e){return e?this.tokenize(e).length:0}countMessageTokens(e){let r=this.baseTokensPerMessage;for(let[n,i]of Object.entries(e))i&&(r+=this.tokenLength(i),n==="name"&&(r+=this.baseTokensPerName));return r}countCompletionTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r+=_P.BaseTokensPerCompletion,r}initTokenizer(){return(0,X7.createTokenizer)((0,E4e.join)(__dirname,"./cl100k_base.tiktoken"),(0,X7.getSpecialTokensByEncoder)("cl100k_base"),(0,X7.getRegexByEncoder)("cl100k_base"),64e3)}};xP.Cl100KBaseTokenizer=J7});var Hne=k(SP=>{"use strict";Object.defineProperty(SP,"__esModule",{value:!0});SP.coalesce=void 0;function T4e(t){return t.filter(e=>!!e)}SP.coalesce=T4e});var sU=k(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});p_.PromptRenderer=p_.MetadataMap=void 0;var CP=B7(),C4e=Z7(),EP=Hne(),Gne;(function(t){t.empty={get:()=>{}}})(Gne||(p_.MetadataMap=Gne={}));var eU=class{constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._meta=new Map,this._usedContext=[],this._ignoredFiles=[],this._root=new iU(null,0),this._references=[],this._tokenizer=i??new C4e.Cl100KBaseTokenizer}getAllMeta(){let e=this._meta;return{get(r){return e.get(r)}}}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getMeta(e){return this._meta.get(e)}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[c,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor)throw new Error("Invalid ChatMessage child! Child must be a TSX component that extends PromptElement.");let l=this.createElement(u);u.node.setObj(l);let d=u.props.flexGrow??1/0,p=o.get(d);p||(p=[],o.set(d,p)),p.push({order:c,element:u,promptElementInstance:l})}let s=[...o.entries()].sort(([c],[u])=>u-c).map(([c,u])=>u),a=(c,u)=>{let l=u?1:-1;for(let d=c+1;d<s.length;d++)for(let{element:p}of s[d])p.props.flexReserve&&e.consume(l*p.props.flexReserve)};for(let[c,u]of s.entries()){a(c,!0);let l=0;for(let{element:p}of u)l+=(p.props.flex||p.props.flexBasis)??1;let d=u.map(p=>{let f=(p.element.props.flexBasis??1)/l;return{tokenBudget:Math.floor(e.remainingTokenBudget*f),endpoint:e.endpoint}});a(c,!1),await Promise.all(u.map(async({element:p,promptElementInstance:f},m)=>{let h=await f.prepare?.(d[m],n,i);p.node.setState(h)}));for(let[p,{element:f,promptElementInstance:m,order:h}]of u.entries()){let g=d[p],v=m.render(f.node.getState(),g);if(!v)continue;let y=jne(v),b=new IP(g.tokenBudget,this._endpoint),{tokensConsumed:x}=I4e(this._tokenizer,f,m,y);b.consume(x),await this._handlePromptChildren(f,y,b,n,i),e.consume(b.consumed)}}}_prioritize(e,r,n){let i=[],o=[],s=0;for(;s<e.length;){if(!e[s].isImplicitLinebreak){let c=e[s-1]?.isImplicitLinebreak?{index:s,precedingLinebreak:s-1}:{index:s};i.push(c),o[s]=null}s+=1}i.sort((c,u)=>r(e[c.index],e[u.index]));let a=this._endpoint.modelMaxPromptTokens-this._tokenizer.baseTokensPerCompletion;for(;i.length>0;){let c=i.shift(),u=c.index,l=e[u],d=n(l),p;if(c.precedingLinebreak&&(p=e[c.precedingLinebreak],d+=n(p)),d>a)break;o[u]=l,c.precedingLinebreak&&p&&(o[c.precedingLinebreak]=p),a-=d}return{result:(0,EP.coalesce)(o),tokenCount:this._endpoint.modelMaxPromptTokens-a}}async render(e,r){await this._processPromptPieces(new IP(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[]}],e,r);let{result:n,resultChunks:i}=this._root.materialize(),o=new Set,{result:s}=this._prioritize(i,(f,m)=>W0.cmp(f,m),f=>{let m=this._tokenizer.tokenLength(f.text);return o.has(f.message)||(o.add(f.message),m=this._tokenizer.countMessageTokens(f.toChatMessage())),m}),a=new Map;for(let f of(0,EP.coalesce)(s)){let m=a.get(f.message)??[];m[f.childIndex]=f,a.set(f.message,m)}let c=[];for(let f of n){let m=a.get(f);if(m){f.chunks=(0,EP.coalesce)(m);for(let h of m)h&&h.references.length>0&&f.references.push(...h.references);c.push(f)}}let{result:u,tokenCount:l}=this._prioritize(c,(f,m)=>wP.cmp(f,m),f=>this._tokenizer.countMessageTokens(f.toChatMessage())),d=u.map(f=>f?.toChatMessage()),{references:p}=u.reduce((f,m)=>([...this._references,...m.references].forEach(h=>{let g="variableName"in h.anchor;g&&!f.names.has(h.anchor.variableName)?(f.references.push(h),f.names.add(h.anchor.variableName)):g||f.references.push(h)}),f),{references:[],names:new Set});return{messages:d,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:(0,EP.coalesce)(p)}}_handlePromptChildren(e,r,n,i,o){let s=[];for(let a of r){if(a.kind==="literal"){e.node.appendStringChild(a.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(a.kind==="intrinsic"){this._handleIntrinsic(e.node,a.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...a.props},TP(a.children));continue}if(a.ctor===CP.TextChunk){this._handleExtrinsicTextChunk(e.node,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...a.props},TP(a.children));continue}let c=e.node.createChild();s.push({node:c,ctor:a.ctor,props:{priority:e.props.priority,...a.props},children:a.children})}return this._processPromptPieces(n,s,i,o)}_handleIntrinsic(e,r,n,i){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");let i=Object.getPrototypeOf(r.value).constructor;if(this._meta.has(i))throw new Error(`Duplicate metadata ${i.name}!`);this._meta.set(i,r.value)}_handleIntrinsicLineBreak(e,r,n,i){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(!0,i??Number.MAX_SAFE_INTEGER)}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");e.addReferences(r.value),this._references.push(...r.value)}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunk(e,r,n){let i=[],o=[];for(let s of n){if(s.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");s.kind==="literal"&&i.push(s.value),s.kind==="intrinsic"&&(s.name==="br"?i.push(`
`):s.name==="references"?o.push(...s.props.value):this._handleIntrinsic(e,s.name,s.props,TP(s.children)))}e.appendLineBreak(!1),e.appendStringChild(i.join(""),r?.priority??Number.MAX_SAFE_INTEGER,o)}};p_.PromptRenderer=eU;function I4e(t,e,r,n){let i=0;(0,CP.isChatMessagePromptElement)(r)&&(i+=t.baseTokensPerMessage,e.props.name&&(i+=t.baseTokensPerName),e.props.role&&(i+=t.tokenLength(e.props.role)));for(let o of n)o.kind==="literal"&&(i+=t.tokenLength(o.value));return{tokensConsumed:i}}function jne(t){return typeof t>"u"||typeof t=="boolean"?[]:typeof t=="string"||typeof t=="number"?[new nU(String(t))]:w4e(t)?[...TP(t.children)]:typeof t.ctor=="string"?[new tU(t.ctor,t.props,t.children)]:[new rU(t.ctor,t.props,t.children)]}function TP(t){return(t??[]).reduce((e,r)=>(e.push(...jne(r)),e),[])}var tU=class{constructor(e,r,n){this.name=e,this.props=r,this.children=n,this.kind="intrinsic"}},rU=class{constructor(e,r,n){this.ctor=e,this.props=r,this.children=n,this.kind="extrinsic"}},nU=class{constructor(e,r){this.value=e,this.priority=r,this.kind="literal"}},IP=class{constructor(e,r){this.tokenBudget=e,this.endpoint=r,this._consumed=0}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},iU=class t{constructor(e=null,r){this.parent=e,this.childIndex=r,this.kind=0,this._obj=null,this._state=void 0,this._children=[],this._references=[]}setObj(e){this._obj=e}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendStringChild(e,r,n){this._children.push(new oU(this,e,r,n))}appendLineBreak(e=!0,r){this._children.push(new RP(this,e,r))}materialize(){let e=[],r=[];return this._materialize(e,r),{result:e,resultChunks:r}}_materialize(e,r){if(this._obj instanceof CP.BaseChatMessage){if(!this._obj.props.role)throw new Error("Invalid ChatMessage!");let n=[];for(let a of this._children)a.collectLeafs(n);let i=[],o=new wP(this._obj.props.role,this._obj.props.name,this._obj.props.priority,this.childIndex,i),s=r.length;n.forEach((a,c)=>{a.kind===1?i.push(new W0(o,a.text,a.priority,s++,!1,a.references??this._references)):a.isExplicit?i.push(new W0(o,`
`,a.priority,s++)):(i.length>0&&i[i.length-1].text!==`
`||i[c-1]&&i[c-1].text!==`
`)&&i.push(new W0(o,`
`,a.priority,s++,!0))}),r.push(...i),e.push(o)}else for(let n of this._children){if(n.kind===1)throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${n.text}"`);if(n.kind===2)throw new Error("Cannot have a line break node outside a ChatMessage!");n._materialize(e,r)}}collectLeafs(e){if(this._obj instanceof CP.BaseChatMessage)throw new Error("Cannot have a ChatMessage nested inside a ChatMessage!");this._obj?.insertLineBreakBefore&&e.push(new RP(this,!1));for(let r of this._children)r.collectLeafs(e)}addReferences(e){this._references.push(...e)}},W0=class{constructor(e,r,n,i,o=!1,s=[]){this.message=e,this.text=r,this.priority=n,this.childIndex=i,this.isImplicitLinebreak=o,this.references=s}static cmp(e,r){return e.priority!==void 0&&r.priority!==void 0&&e.priority===r.priority?e.message===r.message?e.childIndex-r.childIndex:r.childIndex-e.childIndex:e.priority!==void 0&&r.priority!==void 0&&e.priority!==r.priority?r.priority-e.priority:e.childIndex-r.childIndex}toChatMessage(){return{role:this.message.role,content:this.text,...this.message.name?{name:this.message.name}:{}}}},wP=class{constructor(e,r,n,i,o,s=[]){this.role=e,this.name=r,this.priority=n,this.childIndex=i,this._chunks=o,this.references=s}set chunks(e){this._chunks=e.sort(W0.cmp)}get text(){return this._chunks.reduce((e,r,n)=>((n!==this._chunks.length-1||!r.isImplicitLinebreak)&&(e+=r.text),e),"")}toChatMessage(){return{role:this.role,content:this.text,...this.name?{name:this.name}:{}}}static cmp(e,r){return e.priority!==r.priority?(r.priority||0)-(e.priority||0):r.childIndex-e.childIndex}},oU=class{constructor(e,r,n,i){this.parent=e,this.text=r,this.priority=n,this.references=i,this.kind=1}collectLeafs(e){e.push(this)}},RP=class{constructor(e,r,n){this.parent=e,this.isExplicit=r,this.priority=n,this.kind=2}collectLeafs(e){e.push(this)}};function w4e(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}});var zne=k(f_=>{"use strict";Object.defineProperty(f_,"__esModule",{value:!0});f_.PromptReference=f_.PromptMetadata=void 0;var aU=class{toString(){return Object.getPrototypeOf(this).constructor.name}};f_.PromptMetadata=aU;var cU=class{constructor(e){this.anchor=e}};f_.PromptReference=cU});var $ne=k(Vne=>{"use strict";Object.defineProperty(Vne,"__esModule",{value:!0})});var Kne=k(Wne=>{"use strict";Object.defineProperty(Wne,"__esModule",{value:!0})});var st=k(Pr=>{"use strict";var R4e=Pr&&Pr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uU=Pr&&Pr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&R4e(e,t,r)};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.toVsCodeChatMessages=Pr.renderPrompt=Pr.PromptRenderer=Pr.MetadataMap=Pr.PromptElement=Pr.UserMessage=Pr.TextChunk=Pr.SystemMessage=Pr.PrioritizedList=Pr.AssistantMessage=Pr.Cl100KBaseTokenizer=Pr.ChatRole=void 0;var Yne=rC(),A4e=sU(),P4e=rC();Object.defineProperty(Pr,"ChatRole",{enumerable:!0,get:function(){return P4e.ChatRole}});uU(zne(),Pr);var k4e=Z7();Object.defineProperty(Pr,"Cl100KBaseTokenizer",{enumerable:!0,get:function(){return k4e.Cl100KBaseTokenizer}});uU($ne(),Pr);uU(Kne(),Pr);var iC=B7();Object.defineProperty(Pr,"AssistantMessage",{enumerable:!0,get:function(){return iC.AssistantMessage}});Object.defineProperty(Pr,"PrioritizedList",{enumerable:!0,get:function(){return iC.PrioritizedList}});Object.defineProperty(Pr,"SystemMessage",{enumerable:!0,get:function(){return iC.SystemMessage}});Object.defineProperty(Pr,"TextChunk",{enumerable:!0,get:function(){return iC.TextChunk}});Object.defineProperty(Pr,"UserMessage",{enumerable:!0,get:function(){return iC.UserMessage}});var D4e=L7();Object.defineProperty(Pr,"PromptElement",{enumerable:!0,get:function(){return D4e.PromptElement}});var Qne=sU();Object.defineProperty(Pr,"MetadataMap",{enumerable:!0,get:function(){return Qne.MetadataMap}});Object.defineProperty(Pr,"PromptRenderer",{enumerable:!0,get:function(){return Qne.PromptRenderer}});async function N4e(t,e,r,n,i,o,s="vscode"){let a=new A4e.PromptRenderer(r,t,e,n),{messages:c,tokenCount:u,references:l}=await a.render(i,o),d=a.getAllMeta(),p=a.getUsedContext();return s==="vscode"&&(c=Xne(c)),{messages:c,tokenCount:u,metadatas:d,usedContext:p,references:l}}Pr.renderPrompt=N4e;function Xne(t){let e=require("vscode");return t.map(r=>{switch(r.role){case Yne.ChatRole.Assistant:return e.LanguageModelChatMessage.Assistant(r.content,r.name);case Yne.ChatRole.User:return e.LanguageModelChatMessage.User(r.content,r.name);default:throw new Error(`Converting chat message with role ${r.role} to VS Code chat message is not supported.`)}})}Pr.toVsCodeChatMessages=Xne});var roe=k((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(t,e)=>{throw e},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),readBinary=t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},readAsync=(t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),readAsync=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=t=>document.title=t);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var s=t[e++];if(128&s){var a=63&t[e++];if((224&s)!=192){var c=63&t[e++];if((s=(240&s)==224?(15&s)<<12|a<<6|c:(7&s)<<18|a<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(s);else{var u=s-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++s)),a<=127){if(r>=o)break;e[r++]=a}else if(a<=2047){if(r+1>=o)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=o)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=o)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}return e[r]=0,r-i}function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(t){__ATPRERUN__.unshift(t)}function addOnInit(t){__ATINIT__.unshift(t)}function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}function isFileURI(t){return t.startsWith("file://")}function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var s=i.exports;s=relocateExports(s,1024);var a=getDylinkMetadata(o);a.neededDynlibs&&(dynamicLibraries=a.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(s,"main"),Module.asm=s,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function r(i){e(i.instance,i.module)}function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r}};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}function getDylinkMetadata(t){var e=0,r=0;function n(){for(var v=0,y=1;;){var b=t[e++];if(v+=(127&b)*y,y*=128,!(128&b))break}return v}function i(){var v=n();return UTF8ArrayToString(t,(e+=v)-v,v)}function o(v,y){if(v)throw new Error(y)}var s="dylink.0";if(t instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(t,s);a.length===0&&(s="dylink",a=WebAssembly.Module.customSections(t,s)),o(a.length===0,"need dylink section"),r=(t=new Uint8Array(a[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=n();r=e+c,s=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(s=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var l=n(),d=0;d<l;++d){var p=i();u.neededDynlibs.push(p)}}else for(o(s!=="dylink.0");e<r;){var f=t[e++],m=n();if(f===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(f===2)for(l=n(),d=0;d<l;++d)p=i(),u.neededDynlibs.push(p);else if(f===3)for(var h=n();h--;){var g=i();256&n()&&u.tlsExports.add(g)}else if(f===4)for(h=n();h--;)i(),g=i(),(3&n())==1&&u.weakImports.add(g);else e+=m}return u}function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}function alignMemory(t,e){return Math.ceil(t/e)*e}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(a){if(e.fs&&e.fs.findObject(a)){var c=e.fs.readFile(a,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(a=locateFile(a),e.loadAsync)return new Promise(function(u,l){readAsync(a,d=>u(new Uint8Array(d)),l)});if(!readBinary)throw new Error(a+": file not found, and synchronous loading of external files is not available");return readBinary(a)}function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var a=preloadedWasm[t];return e.loadAsync?Promise.resolve(a):a}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,r)}):loadWebAssemblyModule(i(t),e,r)}function s(a){n.global&&mergeLibSymbols(a,t),n.module=a}return n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(a){return s(a),!0}):(s(o()),!0)}function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((s=65536)-o%s)%s)))return!0}var o,s;return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},doStat:function(t,e,r){try{var n=t(e)}catch(a){if(a&&a.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(a.node)))return-54;throw a}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),s=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=s%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(t){return UTF8ToString(t)},getStreamFromFD:function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e}};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var s=SYSCALLS.getStreamFromFD(t);return FS.llseek(s,o,n),tempI64=[s.position>>>0,(tempDouble=s.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],s.getdents&&o===0&&n===0&&(s.getdents=null),0}catch(a){if(typeof FS>"u"||!(a instanceof FS.ErrnoError))throw a;return a.errno}}function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var s=HEAPU32[e>>2],a=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,s,a,n);if(c<0)return-1;i+=c,n!==void 0&&(n+=c)}return i}function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var s=t.charCodeAt(o);HEAP16[e>>1]=s,e+=2}return HEAP16[e>>1]=0,e-n}function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(s=>{HEAP32[i++]=allocateUTF8OnStack(s)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(s){return handleException(s)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)};var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=(c,u,l)=>e.slice(c,l);else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,n.includedRanges[u]),c+=SIZE_OF_RANGE}let s=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!s)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let a=new Tree(INTERNAL,s,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,a}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let s=0;s<r;s++)i[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let l=0,d=o.length;l<d;l++)e.includes(o[l])&&i.push(l);let s=C._malloc(SIZE_OF_INT*i.length);for(let l=0,d=i.length;l<d;l++)setValue(s+l*SIZE_OF_INT,i[l],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],s,i.length,r.row,r.column,n.row,n.column);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(a);if(a>0){let l=c;for(let d=0;d<a;d++)u[d]=unmarshalNode(this.tree,l),l+=SIZE_OF_NODE}return C._free(c),C._free(s),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let h=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,v=e.substr(g,100).split(`
`)[0],y,b=v.match(QUERY_WORD_REGEX)[0];switch(h){case 2:y=new RangeError(`Bad node name '${b}'`);break;case 3:y=new RangeError(`Bad field name '${b}'`);break;case 4:y=new RangeError(`Bad capture name @${b}`);break;case 5:y=new TypeError(`Bad pattern structure at offset ${g}: '${v}'...`),b="";break;default:y=new SyntaxError(`Bad syntax at offset ${g}: '${v}'...`),b=""}throw y.index=g,y.length=b.length,C._free(n),y}let o=C._ts_query_string_count(i),s=C._ts_query_capture_count(i),a=C._ts_query_pattern_count(i),c=new Array(s),u=new Array(o);for(let h=0;h<s;h++){let g=C._ts_query_capture_name_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");c[h]=UTF8ToString(g,v)}for(let h=0;h<o;h++){let g=C._ts_query_string_value_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");u[h]=UTF8ToString(g,v)}let l=new Array(a),d=new Array(a),p=new Array(a),f=new Array(a),m=new Array(a);for(let h=0;h<a;h++){let g=C._ts_query_predicates_for_pattern(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");f[h]=[],m[h]=[];let y=[],b=g;for(let x=0;x<v;x++){let S=getValue(b,"i32");b+=SIZE_OF_INT;let T=getValue(b,"i32");if(b+=SIZE_OF_INT,S===PREDICATE_STEP_TYPE_CAPTURE)y.push({type:"capture",name:c[T]});else if(S===PREDICATE_STEP_TYPE_STRING)y.push({type:"string",value:u[T]});else if(y.length>0){if(y[0].type!=="string")throw new Error("Predicates must begin with a literal value");let L=y[0].value,M=!0;switch(L){case"not-eq?":M=!1;case"eq?":if(y.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(y.length-1));if(y[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${y[1].value}"`);if(y[2].type==="capture"){let X=y[1].name,D=y[2].name;m[h].push(function(E){let A,F;for(let O of E)O.name===X&&(A=O.node),O.name===D&&(F=O.node);return A===void 0||F===void 0||A.text===F.text===M})}else{let X=y[1].name,D=y[2].value;m[h].push(function(E){for(let A of E)if(A.name===X)return A.node.text===D===M;return!0})}break;case"not-match?":M=!1;case"match?":if(y.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${y.length-1}.`);if(y[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${y[1].value}".`);if(y[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${y[2].value}.`);let j=y[1].name,N=new RegExp(y[2].value);m[h].push(function(X){for(let D of X)if(D.name===j)return N.test(D.node.text)===M;return!0});break;case"set!":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(X=>X.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');l[h]||(l[h]={}),l[h][y[1].value]=y[2]?y[2].value:null;break;case"is?":case"is-not?":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#${L}\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(X=>X.type!=="string"))throw new Error(`Arguments to \`#${L}\` predicate must be a strings.".`);let J=L==="is?"?d:p;J[h]||(J[h]={}),J[h][y[1].value]=y[2]?y[2].value:null;break;default:f[h].push({operator:L,operands:y.slice(1)})}y.length=0}}Object.freeze(l[h]),Object.freeze(d[h]),Object.freeze(p[h])}return C._free(n),new Query(INTERNAL,i,c,m,f,Object.freeze(l),Object.freeze(d),Object.freeze(p))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let a=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${a}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),s=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let a=i[s]();return new Language(INTERNAL,a)})}}class Query{constructor(e,r,n,i,o,s,a,c){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=s,this.assertedProperties=a,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(s);this.exceededMatchLimit=!!c;let l=0,d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=new Array(m);if(d=unmarshalCaptures(this,e.tree,d,h),this.textPredicates[f].every(g=>g(h))){u[l++]={pattern:f,captures:h};let g=this.setProperties[f];g&&(u[p].setProperties=g);let v=this.assertedProperties[f];v&&(u[p].assertedProperties=v);let y=this.refutedProperties[f];y&&(u[p].refutedProperties=y)}}return u.length=l,C._free(a),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let l=[],d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=getValue(d,"i32");if(d+=SIZE_OF_INT,l.length=m,d=unmarshalCaptures(this,e.tree,d,l),this.textPredicates[f].every(g=>g(l))){let g=l[h],v=this.setProperties[f];v&&(g.setProperties=v);let y=this.assertedProperties[f];y&&(g.assertedProperties=y);let b=this.refutedProperties[f];b&&(g.refutedProperties=b),u.push(g)}}return C._free(a),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let s=getValue(r,"i32"),a=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[s],node:a}}return r}function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),s=getValue(e+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,t);return a.id=r,a.startIndex=n,a.startPosition={row:i,column:o},a[0]=s,a}function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var XU=k(nr=>{"use strict";var YU=nr&&nr.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},QU=nr&&nr.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(nr,"__esModule",{value:!0});nr.getShallowFileSize=nr.getShallowDirectorySizeSync=nr.getShallowDirectorySize=nr.confirmDirExists=nr.unlinkAsync=nr.readdirAsync=nr.readFileAsync=nr.writeFileAsync=nr.appendFileAsync=nr.accessAsync=nr.mkdirAsync=nr.lstatAsync=nr.statAsync=void 0;var zu=require("fs"),moe=require("path"),Mp=require("util");nr.statAsync=Mp.promisify(zu.stat);nr.lstatAsync=Mp.promisify(zu.lstat);nr.mkdirAsync=Mp.promisify(zu.mkdir);nr.accessAsync=Mp.promisify(zu.access);nr.appendFileAsync=Mp.promisify(zu.appendFile);nr.writeFileAsync=Mp.promisify(zu.writeFile);nr.readFileAsync=Mp.promisify(zu.readFile);nr.readdirAsync=Mp.promisify(zu.readdir);nr.unlinkAsync=Mp.promisify(zu.unlink);var F3e=function(t){return YU(void 0,void 0,void 0,function(){var e,r,n;return QU(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,nr.lstatAsync(t)];case 1:if(e=i.sent(),!e.isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(r=i.sent(),!(r&&r.code==="ENOENT"))return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,nr.mkdirAsync(t)];case 4:return i.sent(),[3,6];case 5:if(n=i.sent(),n&&n.code!=="EEXIST")throw n;return[3,6];case 6:return[3,7];case 7:return[2]}})})};nr.confirmDirExists=F3e;var U3e=function(t){return YU(void 0,void 0,void 0,function(){var e,r,n,i,o,s;return QU(this,function(a){switch(a.label){case 0:return[4,nr.readdirAsync(t)];case 1:e=a.sent(),r=0,n=0,i=e,a.label=2;case 2:return n<i.length?(o=i[n],[4,nr.statAsync(moe.join(t,o))]):[3,5];case 3:s=a.sent(),s.isFile()&&(r+=s.size),a.label=4;case 4:return n++,[3,2];case 5:return[2,r]}})})};nr.getShallowDirectorySize=U3e;var B3e=function(t){for(var e=zu.readdirSync(t),r=0,n=0;n<e.length;n++)r+=zu.statSync(moe.join(t,e[n])).size;return r};nr.getShallowDirectorySizeSync=B3e;var q3e=function(t){return YU(void 0,void 0,void 0,function(){var e;return QU(this,function(r){switch(r.label){case 0:return[4,nr.statAsync(t)];case 1:return e=r.sent(),e.isFile()?[2,e.size]:[2]}})})};nr.getShallowFileSize=q3e});var voe=k((rv,goe)=>{"use strict";var JU=rv&&rv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},ZU=rv&&rv.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hoe=rv&&rv.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},H3e=require("fs"),G3e=require("os"),tv=require("path"),Kl=XU(),j3e=function(){function t(){var e=this;this.TAG="Logger",this._cleanupTimeOut=60*30*1e3,this._tempDir="",this._logFileName="",this._fileFullPath="",this._backUpNameFormat="",this._logToFile=!1,this._logToConsole=!0;var r=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;r=="file+console"&&(this._logToFile=!0),r=="file"&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var n=process.env.APPLICATIONINSIGHTS_LOGDIR;n?tv.isAbsolute(n)?this._tempDir=n:this._tempDir=tv.join(process.cwd(),n):this._tempDir=tv.join(G3e.tmpdir(),"appInsights-node"),this._fileFullPath=tv.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(t._fileCleanupTimer||(t._fileCleanupTimer=setInterval(function(){e._fileCleanupTask()},this._cleanupTimeOut),t._fileCleanupTimer.unref()))}return t.prototype.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?hoe([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.info.apply(console,i)},t.prototype.warning=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?hoe([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.warn.apply(console,i)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._storeToDisk=function(e){return JU(this,void 0,void 0,function(){var r,n,i,o,s,a;return ZU(this,function(c){switch(c.label){case 0:r=e+`\r
`,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Kl.confirmDirExists(this._tempDir)];case 2:return c.sent(),[3,4];case 3:return n=c.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return c.trys.push([4,6,,11]),[4,Kl.accessAsync(this._fileFullPath,H3e.constants.F_OK)];case 5:return c.sent(),[3,11];case 6:i=c.sent(),c.label=7;case 7:return c.trys.push([7,9,,10]),[4,Kl.appendFileAsync(this._fileFullPath,r)];case 8:return c.sent(),[2];case 9:return o=c.sent(),console.log(this.TAG,"Failed to put log into file: "+(i&&i.message)),[2];case 10:return[3,11];case 11:return c.trys.push([11,17,,18]),[4,Kl.getShallowFileSize(this._fileFullPath)];case 12:return s=c.sent(),s>this.maxSizeBytes?[4,this._createBackupFile(r)]:[3,14];case 13:return c.sent(),[3,16];case 14:return[4,Kl.appendFileAsync(this._fileFullPath,r)];case 15:c.sent(),c.label=16;case 16:return[3,18];case 17:return a=c.sent(),console.log(this.TAG,"Failed to create backup file: "+(a&&a.message)),[3,18];case 18:return[2]}})})},t.prototype._createBackupFile=function(e){return JU(this,void 0,void 0,function(){var r,n,i;return ZU(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),[4,Kl.readFileAsync(this._fileFullPath)];case 1:return r=o.sent(),n=tv.join(this._tempDir,new Date().getTime()+"."+this._logFileName),[4,Kl.writeFileAsync(n,r)];case 2:return o.sent(),[3,5];case 3:return i=o.sent(),console.log("Failed to generate backup log file",i),[3,5];case 4:return Kl.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}})})},t.prototype._fileCleanupTask=function(){return JU(this,void 0,void 0,function(){var e,r,n,i,o,s=this;return ZU(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,Kl.readdirAsync(this._tempDir)];case 1:e=a.sent(),e=e.filter(function(c){return tv.basename(c).indexOf(s._backUpNameFormat)>-1}),e.sort(function(c,u){var l=new Date(parseInt(c.split(s._backUpNameFormat)[0])),d=new Date(parseInt(u.split(s._backUpNameFormat)[0]));if(l<d)return-1;if(l>=d)return 1}),r=e.length,n=0,a.label=2;case 2:return n<r-this.maxHistory?(i=tv.join(this._tempDir,e[n]),[4,Kl.unlinkAsync(i)]):[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return o=a.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}})})},t._fileCleanupTimer=null,t}();goe.exports=j3e});var Nn=k((n_t,boe)=>{"use strict";var yoe=voe(),z3e="APPLICATION_INSIGHTS_ENABLE_DEBUG_LOGS",V3e="APPLICATION_INSIGHTS_DISABLE_WARNING_LOGS",$3e=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.enableDebug&&yoe.getInstance().info(this.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.disableWarnings||yoe.getInstance().warning(this.TAG+e,r)},t.enableDebug=!!process.env[z3e],t.disableWarnings=!!process.env[V3e],t.TAG="ApplicationInsights:",t}();boe.exports=$3e});var Ck=k(Tk=>{"use strict";Object.defineProperty(Tk,"__esModule",{value:!0});Tk.JsonConfig=void 0;var W3e=require("fs"),Ek=require("path"),eB=Nn(),K3e="APPLICATIONINSIGHTS_CONFIGURATION_FILE",Y3e="APPLICATIONINSIGHTS_CONNECTION_STRING",_oe="APPSETTING_",xoe="APPINSIGHTS_INSTRUMENTATIONKEY",Soe="APPINSIGHTS_INSTRUMENTATION_KEY",Q3e="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",X3e="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",J3e="http_proxy",Z3e="https_proxy",eOe="APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL",tOe="APPLICATION_INSIGHTS_NO_STATSBEAT",rOe="APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE",nOe="APPLICATION_INSIGHTS_NO_PATCH_MODULES",iOe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED",oOe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING",sOe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE",aOe="APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED",cOe="APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING",uOe=function(){function t(){this.connectionString=process.env[Y3e],this.instrumentationKey=process.env[xoe]||process.env[_oe+xoe]||process.env[Soe]||process.env[_oe+Soe],!this.connectionString&&this.instrumentationKey&&eB.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env[X3e],this.extendedMetricDisablers=process.env[Q3e],this.proxyHttpUrl=process.env[J3e],this.proxyHttpsUrl=process.env[Z3e],this.noDiagnosticChannel=!!process.env[eOe],this.disableStatsbeat=!!process.env[tOe],this.noHttpAgentKeepAlive=!!process.env[rOe],this.noPatchModules=process.env[nOe]||"",this.enableWebInstrumentation=!!process.env[iOe]||!!process.env[aOe],this.webInstrumentationSrc=process.env[sOe]||"",this.webInstrumentationConnectionString=process.env[oOe]||process.env[cOe]||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._loadJsonFile=function(){var e="",r="{}";if(r)e=r;else{var n="applicationinsights.json",i=Ek.join(__dirname,"../../"),o=Ek.join(i,n),s=process.env[K3e];s&&(Ek.isAbsolute(s)?o=s:o=Ek.join(i,s));try{e=W3e.readFileSync(o,"utf8")}catch(c){eB.warn("Failed to read JSON config file: ",c)}}try{var a=JSON.parse(e);a.disableStatsbeat!=null&&(this.disableStatsbeat=a.disableStatsbeat),a.disableAllExtendedMetrics!=null&&(this.disableAllExtendedMetrics=a.disableStatsbeat),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.noHttpAgentKeepAlive!=null&&(this.noHttpAgentKeepAlive=a.noHttpAgentKeepAlive),a.connectionString!=null&&(this.connectionString=a.connectionString),a.extendedMetricDisablers!=null&&(this.extendedMetricDisablers=a.extendedMetricDisablers),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.proxyHttpUrl!=null&&(this.proxyHttpUrl=a.proxyHttpUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.noPatchModules!=null&&(this.noPatchModules=a.noPatchModules),a.enableAutoWebSnippetInjection!=null&&(this.enableWebInstrumentation=a.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.enableWebInstrumentation!=null&&(this.enableWebInstrumentation=a.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.webSnippetConnectionString!=null&&(this.webInstrumentationConnectionString=a.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConnectionString!=null&&(this.webInstrumentationConnectionString=a.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConfig!=null&&(this.webInstrumentationConfig=a.webInstrumentationConfig),a.webInstrumentationSrc!=null&&(this.webInstrumentationSrc=a.webInstrumentationSrc),a.enableLoggerErrorToTrace!=null&&(this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace),this.endpointUrl=a.endpointUrl,this.maxBatchSize=a.maxBatchSize,this.maxBatchIntervalMs=a.maxBatchIntervalMs,this.disableAppInsights=a.disableAppInsights,this.samplingPercentage=a.samplingPercentage,this.correlationIdRetryIntervalMs=a.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=a.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=a.ignoreLegacyHeaders,this.distributedTracingMode=a.distributedTracingMode,this.enableAutoCollectExternalLoggers=a.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=a.enableAutoCollectConsole,this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace,this.enableAutoCollectExceptions=a.enableAutoCollectExceptions,this.enableAutoCollectPerformance=a.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=a.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=a.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=a.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=a.enableAutoCollectRequests,this.enableAutoCollectDependencies=a.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=a.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=a.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=a.enableUseAsyncHooks,this.enableUseDiskRetryCaching=a.enableUseDiskRetryCaching,this.enableResendInterval=a.enableResendInterval,this.enableMaxBytesOnDisk=a.enableMaxBytesOnDisk,this.enableInternalDebugLogging=a.enableInternalDebugLogging,this.enableInternalWarningLogging=a.enableInternalWarningLogging,this.enableSendLiveMetrics=a.enableSendLiveMetrics,this.quickPulseHost=a.quickPulseHost}catch(c){eB.warn("Invalid JSON config file: ",c)}},t}();Tk.JsonConfig=uOe});var hC=k((o_t,Eoe)=>{var lOe="2.0.0",dOe=Number.MAX_SAFE_INTEGER||9007199254740991,pOe=16,fOe=250,mOe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Eoe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:pOe,MAX_SAFE_BUILD_LENGTH:fOe,MAX_SAFE_INTEGER:dOe,RELEASE_TYPES:mOe,SEMVER_SPEC_VERSION:lOe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var gC=k((s_t,Toe)=>{var hOe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Toe.exports=hOe});var R_=k((Fp,Coe)=>{var{MAX_SAFE_COMPONENT_LENGTH:tB,MAX_SAFE_BUILD_LENGTH:gOe,MAX_LENGTH:vOe}=hC(),yOe=gC();Fp=Coe.exports={};var bOe=Fp.re=[],_Oe=Fp.safeRe=[],rt=Fp.src=[],nt=Fp.t={},xOe=0,rB="[a-zA-Z0-9-]",SOe=[["\\s",1],["\\d",vOe],[rB,gOe]],EOe=t=>{for(let[e,r]of SOe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Wt=(t,e,r)=>{let n=EOe(e),i=xOe++;yOe(t,i,e),nt[t]=i,rt[i]=e,bOe[i]=new RegExp(e,r?"g":void 0),_Oe[i]=new RegExp(n,r?"g":void 0)};Wt("NUMERICIDENTIFIER","0|[1-9]\\d*");Wt("NUMERICIDENTIFIERLOOSE","\\d+");Wt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${rB}*`);Wt("MAINVERSION",`(${rt[nt.NUMERICIDENTIFIER]})\\.(${rt[nt.NUMERICIDENTIFIER]})\\.(${rt[nt.NUMERICIDENTIFIER]})`);Wt("MAINVERSIONLOOSE",`(${rt[nt.NUMERICIDENTIFIERLOOSE]})\\.(${rt[nt.NUMERICIDENTIFIERLOOSE]})\\.(${rt[nt.NUMERICIDENTIFIERLOOSE]})`);Wt("PRERELEASEIDENTIFIER",`(?:${rt[nt.NUMERICIDENTIFIER]}|${rt[nt.NONNUMERICIDENTIFIER]})`);Wt("PRERELEASEIDENTIFIERLOOSE",`(?:${rt[nt.NUMERICIDENTIFIERLOOSE]}|${rt[nt.NONNUMERICIDENTIFIER]})`);Wt("PRERELEASE",`(?:-(${rt[nt.PRERELEASEIDENTIFIER]}(?:\\.${rt[nt.PRERELEASEIDENTIFIER]})*))`);Wt("PRERELEASELOOSE",`(?:-?(${rt[nt.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${rt[nt.PRERELEASEIDENTIFIERLOOSE]})*))`);Wt("BUILDIDENTIFIER",`${rB}+`);Wt("BUILD",`(?:\\+(${rt[nt.BUILDIDENTIFIER]}(?:\\.${rt[nt.BUILDIDENTIFIER]})*))`);Wt("FULLPLAIN",`v?${rt[nt.MAINVERSION]}${rt[nt.PRERELEASE]}?${rt[nt.BUILD]}?`);Wt("FULL",`^${rt[nt.FULLPLAIN]}$`);Wt("LOOSEPLAIN",`[v=\\s]*${rt[nt.MAINVERSIONLOOSE]}${rt[nt.PRERELEASELOOSE]}?${rt[nt.BUILD]}?`);Wt("LOOSE",`^${rt[nt.LOOSEPLAIN]}$`);Wt("GTLT","((?:<|>)?=?)");Wt("XRANGEIDENTIFIERLOOSE",`${rt[nt.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Wt("XRANGEIDENTIFIER",`${rt[nt.NUMERICIDENTIFIER]}|x|X|\\*`);Wt("XRANGEPLAIN",`[v=\\s]*(${rt[nt.XRANGEIDENTIFIER]})(?:\\.(${rt[nt.XRANGEIDENTIFIER]})(?:\\.(${rt[nt.XRANGEIDENTIFIER]})(?:${rt[nt.PRERELEASE]})?${rt[nt.BUILD]}?)?)?`);Wt("XRANGEPLAINLOOSE",`[v=\\s]*(${rt[nt.XRANGEIDENTIFIERLOOSE]})(?:\\.(${rt[nt.XRANGEIDENTIFIERLOOSE]})(?:\\.(${rt[nt.XRANGEIDENTIFIERLOOSE]})(?:${rt[nt.PRERELEASELOOSE]})?${rt[nt.BUILD]}?)?)?`);Wt("XRANGE",`^${rt[nt.GTLT]}\\s*${rt[nt.XRANGEPLAIN]}$`);Wt("XRANGELOOSE",`^${rt[nt.GTLT]}\\s*${rt[nt.XRANGEPLAINLOOSE]}$`);Wt("COERCE",`(^|[^\\d])(\\d{1,${tB}})(?:\\.(\\d{1,${tB}}))?(?:\\.(\\d{1,${tB}}))?(?:$|[^\\d])`);Wt("COERCERTL",rt[nt.COERCE],!0);Wt("LONETILDE","(?:~>?)");Wt("TILDETRIM",`(\\s*)${rt[nt.LONETILDE]}\\s+`,!0);Fp.tildeTrimReplace="$1~";Wt("TILDE",`^${rt[nt.LONETILDE]}${rt[nt.XRANGEPLAIN]}$`);Wt("TILDELOOSE",`^${rt[nt.LONETILDE]}${rt[nt.XRANGEPLAINLOOSE]}$`);Wt("LONECARET","(?:\\^)");Wt("CARETTRIM",`(\\s*)${rt[nt.LONECARET]}\\s+`,!0);Fp.caretTrimReplace="$1^";Wt("CARET",`^${rt[nt.LONECARET]}${rt[nt.XRANGEPLAIN]}$`);Wt("CARETLOOSE",`^${rt[nt.LONECARET]}${rt[nt.XRANGEPLAINLOOSE]}$`);Wt("COMPARATORLOOSE",`^${rt[nt.GTLT]}\\s*(${rt[nt.LOOSEPLAIN]})$|^$`);Wt("COMPARATOR",`^${rt[nt.GTLT]}\\s*(${rt[nt.FULLPLAIN]})$|^$`);Wt("COMPARATORTRIM",`(\\s*)${rt[nt.GTLT]}\\s*(${rt[nt.LOOSEPLAIN]}|${rt[nt.XRANGEPLAIN]})`,!0);Fp.comparatorTrimReplace="$1$2$3";Wt("HYPHENRANGE",`^\\s*(${rt[nt.XRANGEPLAIN]})\\s+-\\s+(${rt[nt.XRANGEPLAIN]})\\s*$`);Wt("HYPHENRANGELOOSE",`^\\s*(${rt[nt.XRANGEPLAINLOOSE]})\\s+-\\s+(${rt[nt.XRANGEPLAINLOOSE]})\\s*$`);Wt("STAR","(<|>)?=?\\s*\\*");Wt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Wt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ik=k((a_t,Ioe)=>{var TOe=Object.freeze({loose:!0}),COe=Object.freeze({}),IOe=t=>t?typeof t!="object"?TOe:t:COe;Ioe.exports=IOe});var nB=k((c_t,Aoe)=>{var woe=/^[0-9]+$/,Roe=(t,e)=>{let r=woe.test(t),n=woe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},wOe=(t,e)=>Roe(e,t);Aoe.exports={compareIdentifiers:Roe,rcompareIdentifiers:wOe}});var xs=k((u_t,Noe)=>{var wk=gC(),{MAX_LENGTH:Poe,MAX_SAFE_INTEGER:Rk}=hC(),{safeRe:koe,t:Doe}=R_(),ROe=Ik(),{compareIdentifiers:A_}=nB(),iB=class t{constructor(e,r){if(r=ROe(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Poe)throw new TypeError(`version is longer than ${Poe} characters`);wk("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?koe[Doe.LOOSE]:koe[Doe.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Rk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Rk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Rk||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Rk)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(wk("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),A_(this.major,e.major)||A_(this.minor,e.minor)||A_(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(wk("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return A_(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(wk("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return A_(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),A_(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Noe.exports=iB});var nv=k((l_t,Ooe)=>{var Loe=xs(),AOe=(t,e,r=!1)=>{if(t instanceof Loe)return t;try{return new Loe(t,e)}catch(n){if(!r)return null;throw n}};Ooe.exports=AOe});var Foe=k((d_t,Moe)=>{var POe=nv(),kOe=(t,e)=>{let r=POe(t,e);return r?r.version:null};Moe.exports=kOe});var Boe=k((p_t,Uoe)=>{var DOe=nv(),NOe=(t,e)=>{let r=DOe(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Uoe.exports=NOe});var Goe=k((f_t,Hoe)=>{var qoe=xs(),LOe=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new qoe(t instanceof qoe?t.version:t,r).inc(e,n,i).version}catch{return null}};Hoe.exports=LOe});var Voe=k((m_t,zoe)=>{var joe=nv(),OOe=(t,e)=>{let r=joe(t,null,!0),n=joe(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,s=o?r:n,a=o?n:r,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};zoe.exports=OOe});var Woe=k((h_t,$oe)=>{var MOe=xs(),FOe=(t,e)=>new MOe(t,e).major;$oe.exports=FOe});var Yoe=k((g_t,Koe)=>{var UOe=xs(),BOe=(t,e)=>new UOe(t,e).minor;Koe.exports=BOe});var Xoe=k((v_t,Qoe)=>{var qOe=xs(),HOe=(t,e)=>new qOe(t,e).patch;Qoe.exports=HOe});var Zoe=k((y_t,Joe)=>{var GOe=nv(),jOe=(t,e)=>{let r=GOe(t,e);return r&&r.prerelease.length?r.prerelease:null};Joe.exports=jOe});var Uc=k((b_t,tse)=>{var ese=xs(),zOe=(t,e,r)=>new ese(t,r).compare(new ese(e,r));tse.exports=zOe});var nse=k((__t,rse)=>{var VOe=Uc(),$Oe=(t,e,r)=>VOe(e,t,r);rse.exports=$Oe});var ose=k((x_t,ise)=>{var WOe=Uc(),KOe=(t,e)=>WOe(t,e,!0);ise.exports=KOe});var Ak=k((S_t,ase)=>{var sse=xs(),YOe=(t,e,r)=>{let n=new sse(t,r),i=new sse(e,r);return n.compare(i)||n.compareBuild(i)};ase.exports=YOe});var use=k((E_t,cse)=>{var QOe=Ak(),XOe=(t,e)=>t.sort((r,n)=>QOe(r,n,e));cse.exports=XOe});var dse=k((T_t,lse)=>{var JOe=Ak(),ZOe=(t,e)=>t.sort((r,n)=>JOe(n,r,e));lse.exports=ZOe});var vC=k((C_t,pse)=>{var e5e=Uc(),t5e=(t,e,r)=>e5e(t,e,r)>0;pse.exports=t5e});var Pk=k((I_t,fse)=>{var r5e=Uc(),n5e=(t,e,r)=>r5e(t,e,r)<0;fse.exports=n5e});var oB=k((w_t,mse)=>{var i5e=Uc(),o5e=(t,e,r)=>i5e(t,e,r)===0;mse.exports=o5e});var sB=k((R_t,hse)=>{var s5e=Uc(),a5e=(t,e,r)=>s5e(t,e,r)!==0;hse.exports=a5e});var kk=k((A_t,gse)=>{var c5e=Uc(),u5e=(t,e,r)=>c5e(t,e,r)>=0;gse.exports=u5e});var Dk=k((P_t,vse)=>{var l5e=Uc(),d5e=(t,e,r)=>l5e(t,e,r)<=0;vse.exports=d5e});var aB=k((k_t,yse)=>{var p5e=oB(),f5e=sB(),m5e=vC(),h5e=kk(),g5e=Pk(),v5e=Dk(),y5e=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return p5e(t,r,n);case"!=":return f5e(t,r,n);case">":return m5e(t,r,n);case">=":return h5e(t,r,n);case"<":return g5e(t,r,n);case"<=":return v5e(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};yse.exports=y5e});var _se=k((D_t,bse)=>{var b5e=xs(),_5e=nv(),{safeRe:Nk,t:Lk}=R_(),x5e=(t,e)=>{if(t instanceof b5e)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(Nk[Lk.COERCE]);else{let n;for(;(n=Nk[Lk.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Nk[Lk.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Nk[Lk.COERCERTL].lastIndex=-1}return r===null?null:_5e(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};bse.exports=x5e});var Sse=k((N_t,xse)=>{"use strict";xse.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Tse=k((L_t,Ese)=>{"use strict";Ese.exports=Fr;Fr.Node=iv;Fr.create=Fr;function Fr(t){var e=this;if(e instanceof Fr||(e=new Fr),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Fr.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Fr.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Fr.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Fr.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)E5e(this,arguments[t]);return this.length};Fr.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)T5e(this,arguments[t]);return this.length};Fr.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Fr.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Fr.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Fr.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Fr.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Fr.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Fr.prototype.map=function(t,e){e=e||this;for(var r=new Fr,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Fr.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Fr,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Fr.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Fr.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Fr.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Fr.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Fr.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Fr;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Fr.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Fr;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Fr.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=S5e(this,i,r[n]);return o};Fr.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function S5e(t,e,r){var n=e===t.head?new iv(r,null,e,t):new iv(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function E5e(t,e){t.tail=new iv(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function T5e(t,e){t.head=new iv(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function iv(t,e,r,n){if(!(this instanceof iv))return new iv(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Sse()(Fr)}catch{}});var Ase=k((O_t,Rse)=>{"use strict";var C5e=Tse(),ov=Symbol("max"),Bp=Symbol("length"),P_=Symbol("lengthCalculator"),bC=Symbol("allowStale"),sv=Symbol("maxAge"),Up=Symbol("dispose"),Cse=Symbol("noDisposeOnSet"),wo=Symbol("lruList"),Vu=Symbol("cache"),wse=Symbol("updateAgeOnGet"),cB=()=>1,lB=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[ov]=e.max||1/0,n=e.length||cB;if(this[P_]=typeof n!="function"?cB:n,this[bC]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[sv]=e.maxAge||0,this[Up]=e.dispose,this[Cse]=e.noDisposeOnSet||!1,this[wse]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[ov]=e||1/0,yC(this)}get max(){return this[ov]}set allowStale(e){this[bC]=!!e}get allowStale(){return this[bC]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[sv]=e,yC(this)}get maxAge(){return this[sv]}set lengthCalculator(e){typeof e!="function"&&(e=cB),e!==this[P_]&&(this[P_]=e,this[Bp]=0,this[wo].forEach(r=>{r.length=this[P_](r.value,r.key),this[Bp]+=r.length})),yC(this)}get lengthCalculator(){return this[P_]}get length(){return this[Bp]}get itemCount(){return this[wo].length}rforEach(e,r){r=r||this;for(let n=this[wo].tail;n!==null;){let i=n.prev;Ise(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[wo].head;n!==null;){let i=n.next;Ise(this,e,n,r),n=i}}keys(){return this[wo].toArray().map(e=>e.key)}values(){return this[wo].toArray().map(e=>e.value)}reset(){this[Up]&&this[wo]&&this[wo].length&&this[wo].forEach(e=>this[Up](e.key,e.value)),this[Vu]=new Map,this[wo]=new C5e,this[Bp]=0}dump(){return this[wo].map(e=>Ok(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[wo]}set(e,r,n){if(n=n||this[sv],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[P_](r,e);if(this[Vu].has(e)){if(o>this[ov])return k_(this,this[Vu].get(e)),!1;let c=this[Vu].get(e).value;return this[Up]&&(this[Cse]||this[Up](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Bp]+=o-c.length,c.length=o,this.get(e),yC(this),!0}let s=new dB(e,r,o,i,n);return s.length>this[ov]?(this[Up]&&this[Up](e,r),!1):(this[Bp]+=s.length,this[wo].unshift(s),this[Vu].set(e,this[wo].head),yC(this),!0)}has(e){if(!this[Vu].has(e))return!1;let r=this[Vu].get(e).value;return!Ok(this,r)}get(e){return uB(this,e,!0)}peek(e){return uB(this,e,!1)}pop(){let e=this[wo].tail;return e?(k_(this,e),e.value):null}del(e){k_(this,this[Vu].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Vu].forEach((e,r)=>uB(this,r,!1))}},uB=(t,e,r)=>{let n=t[Vu].get(e);if(n){let i=n.value;if(Ok(t,i)){if(k_(t,n),!t[bC])return}else r&&(t[wse]&&(n.value.now=Date.now()),t[wo].unshiftNode(n));return i.value}},Ok=(t,e)=>{if(!e||!e.maxAge&&!t[sv])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[sv]&&r>t[sv]},yC=t=>{if(t[Bp]>t[ov])for(let e=t[wo].tail;t[Bp]>t[ov]&&e!==null;){let r=e.prev;k_(t,e),e=r}},k_=(t,e)=>{if(e){let r=e.value;t[Up]&&t[Up](r.key,r.value),t[Bp]-=r.length,t[Vu].delete(r.key),t[wo].removeNode(e)}},dB=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},Ise=(t,e,r,n)=>{let i=r.value;Ok(t,i)&&(k_(t,r),t[bC]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};Rse.exports=lB});var Bc=k((M_t,Nse)=>{var pB=class t{constructor(e,r){if(r=w5e(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof fB)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!kse(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&L5e(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&D5e)|(this.options.loose&&N5e))+":"+e,i=Pse.get(n);if(i)return i;let o=this.options.loose,s=o?Ca[Ks.HYPHENRANGELOOSE]:Ca[Ks.HYPHENRANGE];e=e.replace(s,z5e(this.options.includePrerelease)),Ln("hyphen replace",e),e=e.replace(Ca[Ks.COMPARATORTRIM],A5e),Ln("comparator trim",e),e=e.replace(Ca[Ks.TILDETRIM],P5e),Ln("tilde trim",e),e=e.replace(Ca[Ks.CARETTRIM],k5e),Ln("caret trim",e);let a=e.split(" ").map(d=>O5e(d,this.options)).join(" ").split(/\s+/).map(d=>j5e(d,this.options));o&&(a=a.filter(d=>(Ln("loose invalid filter",d,this.options),!!d.match(Ca[Ks.COMPARATORLOOSE])))),Ln("range list",a);let c=new Map,u=a.map(d=>new fB(d,this.options));for(let d of u){if(kse(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return Pse.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>Dse(n,r)&&e.set.some(i=>Dse(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new R5e(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(V5e(this.set[r],e,this.options))return!0;return!1}};Nse.exports=pB;var I5e=Ase(),Pse=new I5e({max:1e3}),w5e=Ik(),fB=_C(),Ln=gC(),R5e=xs(),{safeRe:Ca,t:Ks,comparatorTrimReplace:A5e,tildeTrimReplace:P5e,caretTrimReplace:k5e}=R_(),{FLAG_INCLUDE_PRERELEASE:D5e,FLAG_LOOSE:N5e}=hC(),kse=t=>t.value==="<0.0.0-0",L5e=t=>t.value==="",Dse=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},O5e=(t,e)=>(Ln("comp",t,e),t=U5e(t,e),Ln("caret",t),t=M5e(t,e),Ln("tildes",t),t=q5e(t,e),Ln("xrange",t),t=G5e(t,e),Ln("stars",t),t),Ys=t=>!t||t.toLowerCase()==="x"||t==="*",M5e=(t,e)=>t.trim().split(/\s+/).map(r=>F5e(r,e)).join(" "),F5e=(t,e)=>{let r=e.loose?Ca[Ks.TILDELOOSE]:Ca[Ks.TILDE];return t.replace(r,(n,i,o,s,a)=>{Ln("tilde",t,n,i,o,s,a);let c;return Ys(i)?c="":Ys(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Ys(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ln("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Ln("tilde return",c),c})},U5e=(t,e)=>t.trim().split(/\s+/).map(r=>B5e(r,e)).join(" "),B5e=(t,e)=>{Ln("caret",t,e);let r=e.loose?Ca[Ks.CARETLOOSE]:Ca[Ks.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{Ln("caret",t,i,o,s,a,c);let u;return Ys(o)?u="":Ys(s)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Ys(a)?o==="0"?u=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(Ln("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Ln("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Ln("caret return",u),u})},q5e=(t,e)=>(Ln("replaceXRanges",t,e),t.split(/\s+/).map(r=>H5e(r,e)).join(" ")),H5e=(t,e)=>{t=t.trim();let r=e.loose?Ca[Ks.XRANGELOOSE]:Ca[Ks.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{Ln("xRange",t,n,i,o,s,a,c);let u=Ys(o),l=u||Ys(s),d=l||Ys(a),p=d;return i==="="&&p&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):l?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Ln("xRange return",n),n})},G5e=(t,e)=>(Ln("replaceStars",t,e),t.trim().replace(Ca[Ks.STAR],"")),j5e=(t,e)=>(Ln("replaceGTE0",t,e),t.trim().replace(Ca[e.includePrerelease?Ks.GTE0PRE:Ks.GTE0],"")),z5e=t=>(e,r,n,i,o,s,a,c,u,l,d,p,f)=>(Ys(n)?r="":Ys(i)?r=`>=${n}.0.0${t?"-0":""}`:Ys(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Ys(u)?c="":Ys(l)?c=`<${+u+1}.0.0-0`:Ys(d)?c=`<${u}.${+l+1}.0-0`:p?c=`<=${u}.${l}.${d}-${p}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),V5e=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ln(t[n].semver),t[n].semver!==fB.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var _C=k((F_t,Bse)=>{var xC=Symbol("SemVer ANY"),gB=class t{static get ANY(){return xC}constructor(e,r){if(r=Lse(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),hB("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===xC?this.value="":this.value=this.operator+this.semver.version,hB("comp",this)}parse(e){let r=this.options.loose?Ose[Mse.COMPARATORLOOSE]:Ose[Mse.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Fse(n[2],this.options.loose):this.semver=xC}toString(){return this.value}test(e){if(hB("Comparator.test",e,this.options.loose),this.semver===xC||e===xC)return!0;if(typeof e=="string")try{e=new Fse(e,this.options)}catch{return!1}return mB(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Use(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Use(this.value,r).test(e.semver):(r=Lse(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||mB(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||mB(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Bse.exports=gB;var Lse=Ik(),{safeRe:Ose,t:Mse}=R_(),mB=aB(),hB=gC(),Fse=xs(),Use=Bc()});var SC=k((U_t,qse)=>{var $5e=Bc(),W5e=(t,e,r)=>{try{e=new $5e(e,r)}catch{return!1}return e.test(t)};qse.exports=W5e});var Gse=k((B_t,Hse)=>{var K5e=Bc(),Y5e=(t,e)=>new K5e(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Hse.exports=Y5e});var zse=k((q_t,jse)=>{var Q5e=xs(),X5e=Bc(),J5e=(t,e,r)=>{let n=null,i=null,o=null;try{o=new X5e(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new Q5e(n,r))}),n};jse.exports=J5e});var $se=k((H_t,Vse)=>{var Z5e=xs(),e6e=Bc(),t6e=(t,e,r)=>{let n=null,i=null,o=null;try{o=new e6e(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new Z5e(n,r))}),n};Vse.exports=t6e});var Yse=k((G_t,Kse)=>{var vB=xs(),r6e=Bc(),Wse=vC(),n6e=(t,e)=>{t=new r6e(t,e);let r=new vB("0.0.0");if(t.test(r)||(r=new vB("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new vB(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||Wse(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||Wse(r,o))&&(r=o)}return r&&t.test(r)?r:null};Kse.exports=n6e});var Xse=k((j_t,Qse)=>{var i6e=Bc(),o6e=(t,e)=>{try{return new i6e(t,e).range||"*"}catch{return null}};Qse.exports=o6e});var Mk=k((z_t,tae)=>{var s6e=xs(),eae=_C(),{ANY:a6e}=eae,c6e=Bc(),u6e=SC(),Jse=vC(),Zse=Pk(),l6e=Dk(),d6e=kk(),p6e=(t,e,r,n)=>{t=new s6e(t,n),e=new c6e(e,n);let i,o,s,a,c;switch(r){case">":i=Jse,o=l6e,s=Zse,a=">",c=">=";break;case"<":i=Zse,o=d6e,s=Jse,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u6e(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,p=null;if(l.forEach(f=>{f.semver===a6e&&(f=new eae(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0};tae.exports=p6e});var nae=k((V_t,rae)=>{var f6e=Mk(),m6e=(t,e,r)=>f6e(t,e,">",r);rae.exports=m6e});var oae=k(($_t,iae)=>{var h6e=Mk(),g6e=(t,e,r)=>h6e(t,e,"<",r);iae.exports=g6e});var cae=k((W_t,aae)=>{var sae=Bc(),v6e=(t,e,r)=>(t=new sae(t,r),e=new sae(e,r),t.intersects(e,r));aae.exports=v6e});var lae=k((K_t,uae)=>{var y6e=SC(),b6e=Uc();uae.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((l,d)=>b6e(l,d,r));for(let l of s)y6e(l,e,r)?(o=l,i||(i=l)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===s[0]?a.push("*"):d?l===s[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var gae=k((Y_t,hae)=>{var dae=Bc(),bB=_C(),{ANY:yB}=bB,EC=SC(),_B=Uc(),_6e=(t,e,r={})=>{if(t===e)return!0;t=new dae(t,r),e=new dae(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=S6e(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},x6e=[new bB(">=0.0.0-0")],pae=[new bB(">=0.0.0")],S6e=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===yB){if(e.length===1&&e[0].semver===yB)return!0;r.includePrerelease?t=x6e:t=pae}if(e.length===1&&e[0].semver===yB){if(r.includePrerelease)return!0;e=pae}let n=new Set,i,o;for(let f of t)f.operator===">"||f.operator===">="?i=fae(i,f,r):f.operator==="<"||f.operator==="<="?o=mae(o,f,r):n.add(f.semver);if(n.size>1)return null;let s;if(i&&o){if(s=_B(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let f of n){if(i&&!EC(f,String(i),r)||o&&!EC(f,String(o),r))return null;for(let m of e)if(!EC(f,String(m),r))return!1;return!0}let a,c,u,l,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",u=u||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=fae(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!EC(i.semver,String(f),r))return!1}if(o){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(c=mae(o,f,r),c===f&&c!==o)return!1}else if(o.operator==="<="&&!EC(o.semver,String(f),r))return!1}if(!f.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&l&&!i&&s!==0||p||d)},fae=(t,e,r)=>{if(!t)return e;let n=_B(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},mae=(t,e,r)=>{if(!t)return e;let n=_B(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};hae.exports=_6e});var _ae=k((Q_t,bae)=>{var xB=R_(),vae=hC(),E6e=xs(),yae=nB(),T6e=nv(),C6e=Foe(),I6e=Boe(),w6e=Goe(),R6e=Voe(),A6e=Woe(),P6e=Yoe(),k6e=Xoe(),D6e=Zoe(),N6e=Uc(),L6e=nse(),O6e=ose(),M6e=Ak(),F6e=use(),U6e=dse(),B6e=vC(),q6e=Pk(),H6e=oB(),G6e=sB(),j6e=kk(),z6e=Dk(),V6e=aB(),$6e=_se(),W6e=_C(),K6e=Bc(),Y6e=SC(),Q6e=Gse(),X6e=zse(),J6e=$se(),Z6e=Yse(),e8e=Xse(),t8e=Mk(),r8e=nae(),n8e=oae(),i8e=cae(),o8e=lae(),s8e=gae();bae.exports={parse:T6e,valid:C6e,clean:I6e,inc:w6e,diff:R6e,major:A6e,minor:P6e,patch:k6e,prerelease:D6e,compare:N6e,rcompare:L6e,compareLoose:O6e,compareBuild:M6e,sort:F6e,rsort:U6e,gt:B6e,lt:q6e,eq:H6e,neq:G6e,gte:j6e,lte:z6e,cmp:V6e,coerce:$6e,Comparator:W6e,Range:K6e,satisfies:Y6e,toComparators:Q6e,maxSatisfying:X6e,minSatisfying:J6e,minVersion:Z6e,validRange:e8e,outside:t8e,gtr:r8e,ltr:n8e,intersects:i8e,simplifyRange:o8e,subset:s8e,SemVer:E6e,re:xB.re,src:xB.src,tokens:xB.t,SEMVER_SPEC_VERSION:vae.SEMVER_SPEC_VERSION,RELEASE_TYPES:vae.RELEASE_TYPES,compareIdentifiers:yae.compareIdentifiers,rcompareIdentifiers:yae.rcompareIdentifiers}});var SB=k(Fk=>{"use strict";Object.defineProperty(Fk,"__esModule",{value:!0});Fk.makePatchingRequire=void 0;var a8e=require("path"),c8e=_ae(),xae=vi(),Eae=require("module"),u8e=Object.keys(process.binding("natives")),Sae=Eae.prototype.require;function l8e(t){var e={};return function(n){var i=Sae.apply(this,arguments);if(t[n]){var o=Eae._resolveFilename(n,this);if(e.hasOwnProperty(o))return e[o];var s=void 0;if(u8e.indexOf(n)<0)try{s=Sae.call(this,a8e.join(n,"package.json")).version}catch{return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var c=i,u=0,l=t[n];u<l.length;u++){var d=l[u];if(c8e.satisfies(s,d.versionSpecifier)&&(c=d.patch(c,o),xae.channel)){var p=d.publisherName||n;xae.channel.addPatchedModule(p,s)}}return e[o]=c}return i}}Fk.makePatchingRequire=l8e});var Tae=k((J_t,d8e)=>{d8e.exports={name:"diagnostic-channel",version:"1.1.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"eslint ./ --fix",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js",debug:"mocha --inspect-brk ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^7.5.3"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",sinon:"1.17.6",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var vi=k(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.channel=qc.ContextPreservingEventEmitter=qc.trueFilter=qc.makePatchingRequire=void 0;var p8e=SB(),f8e=SB();Object.defineProperty(qc,"makePatchingRequire",{enumerable:!0,get:function(){return f8e.makePatchingRequire}});var m8e=function(t){return!0};qc.trueFilter=m8e;var Iae=function(){function t(){this.version=Tae().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n,i){n===void 0&&(n=qc.trueFilter),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n,patchCallback:i});var o=this.checkIfModuleIsAlreadyPatched(e);o&&i&&i(o.name,o.version)},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=qc.trueFilter);var i=this.subscribers[e];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===r&&i[o].filter===n)return i.splice(o,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t.prototype.addPatchedModule=function(e,r){for(var n=0,i=this.modulesPatched;n<i.length;n++){var o=i[n];if(o.name===e)return}this.modulesPatched.push({name:e,version:r});var s=this.subscribers[e];s&&s.forEach(function(a){a.patchCallback&&a.patchCallback(e,r)})},t.prototype.checkIfModuleIsAlreadyPatched=function(e){for(var r=0,n=this.modulesPatched;r<n.length;r++){var i=n[r];if(i.name===e)return i}return null},t}();qc.ContextPreservingEventEmitter=Iae;global.diagnosticsSource||(global.diagnosticsSource=new Iae,Cae=require("module"),Cae.prototype.require=p8e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var Cae;qc.channel=global.diagnosticsSource});var wae,Rae=I(()=>{wae=typeof globalThis=="object"?globalThis:global});var Aae=I(()=>{Rae()});var Pae=I(()=>{Aae()});var qp,EB=I(()=>{qp="1.6.0"});function h8e(t){var e=new Set([t]),r=new Set,n=t.match(kae);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(c){return c===t};function o(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(c){if(e.has(c))return!0;if(r.has(c))return!1;var u=c.match(kae);if(!u)return o(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||i.major!==l.major?o(c):i.major===0?i.minor===l.minor&&i.patch<=l.patch?s(c):o(c):i.minor<=l.minor?s(c):o(c)}}var kae,Dae,Nae=I(()=>{EB();kae=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;Dae=h8e(qp)});function Yl(t,e,r,n){var i;n===void 0&&(n=!1);var o=CC[TC]=(i=CC[TC])!==null&&i!==void 0?i:{version:qp};if(!n&&o[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(s.stack||s.message),!1}if(o.version!==qp){var s=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+qp);return r.error(s.stack||s.message),!1}return o[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+qp+"."),!0}function ac(t){var e,r,n=(e=CC[TC])===null||e===void 0?void 0:e.version;if(!(!n||!Dae(n)))return(r=CC[TC])===null||r===void 0?void 0:r[t]}function Ql(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+qp+".");var r=CC[TC];r&&delete r[t]}var g8e,TC,CC,av=I(()=>{Pae();EB();Nae();g8e=qp.split(".")[0],TC=Symbol.for("opentelemetry.js.api."+g8e),CC=wae});function IC(t,e,r){var n=ac("diag");if(n)return r.unshift(e),n[t].apply(n,y8e([],v8e(r),!1))}var v8e,y8e,Lae,Oae=I(()=>{av();v8e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},y8e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Lae=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return IC("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return IC("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return IC("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return IC("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return IC("verbose",this._namespace,e)},t}()});var _n,Uk=I(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(_n||(_n={}))});function Mae(t,e){t<_n.NONE?t=_n.NONE:t>_n.ALL&&(t=_n.ALL),e=e||{};function r(n,i){var o=e[n];return typeof o=="function"&&t>=i?o.bind(e):function(){}}return{error:r("error",_n.ERROR),warn:r("warn",_n.WARN),info:r("info",_n.INFO),debug:r("debug",_n.DEBUG),verbose:r("verbose",_n.VERBOSE)}}var Fae=I(()=>{Uk()});var b8e,_8e,x8e,Ss,cv=I(()=>{Oae();Fae();Uk();av();b8e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},_8e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},x8e="diag",Ss=function(){function t(){function e(i){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=ac("diag");if(a)return a[i].apply(a,_8e([],b8e(o),!1))}}var r=this,n=function(i,o){var s,a,c;if(o===void 0&&(o={logLevel:_n.INFO}),i===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof o=="number"&&(o={logLevel:o});var l=ac("diag"),d=Mae((a=o.logLevel)!==null&&a!==void 0?a:_n.INFO,i);if(l&&!o.suppressOverrideMessage){var p=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p)}return Yl("diag",d,r,!0)};r.setLogger=n,r.disable=function(){Ql(x8e,r)},r.createComponentLogger=function(i){return new Lae(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}()});var S8e,E8e,Uae,Bae=I(()=>{S8e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},E8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uae=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=S8e(e,2),n=r[0],i=r[1];return[n,i]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=new t(this._entries);try{for(var s=E8e(n),a=s.next();!a.done;a=s.next()){var c=a.value;o._entries.delete(c)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}()});var qae,Hae=I(()=>{qae=Symbol("BaggageEntryMetadata")});function Gae(t){return t===void 0&&(t={}),new Uae(new Map(Object.entries(t)))}function Bk(t){return typeof t!="string"&&(T8e.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:qae,toString:function(){return t}}}var T8e,TB=I(()=>{cv();Bae();Hae();T8e=Ss.instance()});function Xl(t){return Symbol.for(t)}var C8e,qk,wC=I(()=>{C8e=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new t(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),qk=new C8e});var CB,jae,zae=I(()=>{CB=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],jae=function(){function t(){function e(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(console){var s=console[n];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,i)}}}for(var r=0;r<CB.length;r++)this[CB[r].n]=e(CB[r].c)}return t}()});function Vae(){return RB}var D_,I8e,IB,w8e,R8e,A8e,wB,P8e,k8e,D8e,RB,N8e,L8e,O8e,M8e,F8e,U8e,AB=I(()=>{D_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I8e=function(){function t(){}return t.prototype.createHistogram=function(e,r){return L8e},t.prototype.createCounter=function(e,r){return N8e},t.prototype.createUpDownCounter=function(e,r){return O8e},t.prototype.createObservableGauge=function(e,r){return F8e},t.prototype.createObservableCounter=function(e,r){return M8e},t.prototype.createObservableUpDownCounter=function(e,r){return U8e},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),IB=function(){function t(){}return t}(),w8e=function(t){D_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(IB),R8e=function(t){D_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(IB),A8e=function(t){D_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(IB),wB=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),P8e=function(t){D_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(wB),k8e=function(t){D_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(wB),D8e=function(t){D_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(wB),RB=new I8e,N8e=new w8e,L8e=new A8e,O8e=new R8e,M8e=new P8e,F8e=new k8e,U8e=new D8e});var Hk,$ae=I(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(Hk||(Hk={}))});var Gk,jk,PB=I(()=>{Gk={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},jk={set:function(t,e,r){t!=null&&(t[e]=r)}}});var B8e,q8e,Wae,Kae=I(()=>{wC();B8e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},q8e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Wae=function(){function t(){}return t.prototype.active=function(){return qk},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,q8e([n],B8e(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}()});var H8e,G8e,kB,j8e,Km,RC=I(()=>{Kae();av();cv();H8e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},G8e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},kB="context",j8e=new Wae,Km=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Yl(kB,e,Ss.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,G8e([e,r,n],H8e(o),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return ac(kB)||j8e},t.prototype.disable=function(){this._getContextManager().disable(),Ql(kB,Ss.instance())},t}()});var ki,DB=I(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(ki||(ki={}))});var AC,PC,N_,zk=I(()=>{DB();AC="0000000000000000",PC="00000000000000000000000000000000",N_={traceId:PC,spanId:AC,traceFlags:ki.NONE}});var Ym,Vk=I(()=>{zk();Ym=function(){function t(e){e===void 0&&(e=N_),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}()});function $k(t){return t.getValue(NB)||void 0}function Yae(){return $k(Km.getInstance().active())}function kC(t,e){return t.setValue(NB,e)}function Qae(t){return t.deleteValue(NB)}function Xae(t,e){return kC(t,new Ym(e))}function Wk(t){var e;return(e=$k(t))===null||e===void 0?void 0:e.spanContext()}var NB,LB=I(()=>{wC();Vk();RC();NB=Xl("OpenTelemetry Context Key SPAN")});function uv(t){return z8e.test(t)&&t!==PC}function OB(t){return V8e.test(t)&&t!==AC}function Hc(t){return uv(t.traceId)&&OB(t.spanId)}function Jae(t){return new Ym(t)}var z8e,V8e,Kk=I(()=>{zk();Vk();z8e=/^([0-9a-f]{32})$/i,V8e=/^[0-9a-f]{16}$/i});function $8e(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var MB,Yk,FB=I(()=>{RC();LB();Vk();Kk();MB=Km.getInstance(),Yk=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=MB.active());var i=!!r?.root;if(i)return new Ym;var o=n&&Wk(n);return $8e(o)&&Hc(o)?new Ym(o):new Ym},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var c=s??MB.active(),u=this.startSpan(e,o,c),l=kC(c,u);return MB.with(l,a,void 0,u)}},t}()});var W8e,Qk,UB=I(()=>{FB();W8e=new Yk,Qk=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):W8e},t}()});var Zae,ece=I(()=>{FB();Zae=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new Yk},t}()});var K8e,DC,BB=I(()=>{UB();ece();K8e=new Zae,DC=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new Qk(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:K8e},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}()});var Ia,tce=I(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Ia||(Ia={}))});var L_,rce=I(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(L_||(L_={}))});var O_,nce=I(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(O_||(O_={}))});function ice(t){return X8e.test(t)}function oce(t){return J8e.test(t)&&!Z8e.test(t)}var qB,Y8e,Q8e,X8e,J8e,Z8e,sce=I(()=>{qB="[_0-9a-z-*/]",Y8e="[a-z]"+qB+"{0,255}",Q8e="[a-z0-9]"+qB+"{0,240}@[a-z]"+qB+"{0,13}",X8e=new RegExp("^(?:"+Y8e+"|"+Q8e+")$"),J8e=/^[ -~]{0,255}[!-~]$/,Z8e=/,|=/});var ace,eMe,cce,uce,lce,dce=I(()=>{sce();ace=32,eMe=512,cce=",",uce="=",lce=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+uce+e.get(n)),r},[]).join(cce)},t.prototype._parse=function(e){e.length>eMe||(this._internalState=e.split(cce).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(uce);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);ice(s)&&oce(a)&&r.set(s,a)}return r},new Map),this._internalState.size>ace&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,ace))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function pce(t){return new lce(t)}var fce=I(()=>{dce()});var Qs,mce=I(()=>{RC();Qs=Km.getInstance()});var lt,hce=I(()=>{cv();lt=Ss.instance()});var tMe,gce,vce=I(()=>{AB();tMe=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return RB},t}(),gce=new tMe});var HB,yce,bce=I(()=>{vce();av();cv();HB="metrics",yce=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return Yl(HB,e,Ss.instance())},t.prototype.getMeterProvider=function(){return ac(HB)||gce},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){Ql(HB,Ss.instance())},t}()});var GB,_ce=I(()=>{bce();GB=yce.getInstance()});var xce,Sce=I(()=>{xce=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}()});function zB(t){return t.getValue(jB)||void 0}function Ece(){return zB(Km.getInstance().active())}function Tce(t,e){return t.setValue(jB,e)}function Cce(t){return t.deleteValue(jB)}var jB,Ice=I(()=>{RC();wC();jB=Xl("OpenTelemetry Baggage Key")});var VB,rMe,wce,Rce=I(()=>{av();Sce();PB();Ice();TB();cv();VB="propagation",rMe=new xce,wce=function(){function t(){this.createBaggage=Gae,this.getBaggage=zB,this.getActiveBaggage=Ece,this.setBaggage=Tce,this.deleteBaggage=Cce}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return Yl(VB,e,Ss.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=jk),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=Gk),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Ql(VB,Ss.instance())},t.prototype._getGlobalPropagator=function(){return ac(VB)||rMe},t}()});var Hp,Ace=I(()=>{Rce();Hp=wce.getInstance()});var $B,Pce,kce=I(()=>{av();BB();Kk();LB();cv();$B="trace",Pce=function(){function t(){this._proxyTracerProvider=new DC,this.wrapSpanContext=Jae,this.isSpanContextValid=Hc,this.deleteSpan=Qae,this.getSpan=$k,this.getActiveSpan=Yae,this.getSpanContext=Wk,this.setSpan=kC,this.setSpanContext=Xae}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=Yl($B,this._proxyTracerProvider,Ss.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return ac($B)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Ql($B,Ss.instance()),this._proxyTracerProvider=new DC},t}()});var lo,Dce=I(()=>{kce();lo=Pce.getInstance()});var M_={};an(M_,{DiagConsoleLogger:()=>jae,DiagLogLevel:()=>_n,INVALID_SPANID:()=>AC,INVALID_SPAN_CONTEXT:()=>N_,INVALID_TRACEID:()=>PC,ProxyTracer:()=>Qk,ProxyTracerProvider:()=>DC,ROOT_CONTEXT:()=>qk,SamplingDecision:()=>Ia,SpanKind:()=>L_,SpanStatusCode:()=>O_,TraceFlags:()=>ki,ValueType:()=>Hk,baggageEntryMetadataFromString:()=>Bk,context:()=>Qs,createContextKey:()=>Xl,createNoopMeter:()=>Vae,createTraceState:()=>pce,default:()=>nMe,defaultTextMapGetter:()=>Gk,defaultTextMapSetter:()=>jk,diag:()=>lt,isSpanContextValid:()=>Hc,isValidSpanId:()=>OB,isValidTraceId:()=>uv,metrics:()=>GB,propagation:()=>Hp,trace:()=>lo});var nMe,lr=I(()=>{TB();wC();zae();Uk();AB();$ae();PB();UB();BB();tce();rce();nce();DB();fce();Kk();zk();mce();hce();_ce();Ace();Dce();nMe={context:Qs,diag:lt,metrics:GB,propagation:Hp,trace:lo}});function NC(t){return t.setValue(WB,!0)}function iMe(t){return t.deleteValue(WB)}function lv(t){return t.getValue(WB)===!0}var WB,LC=I(()=>{lr();WB=Xl("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var Nce,Xk,F_,Jk,Lce,Oce,Mce,KB=I(()=>{Nce="=",Xk=";",F_=",",Jk="baggage",Lce=180,Oce=4096,Mce=8192});var XB={};an(XB,{getKeyPairs:()=>QB,parseKeyPairsIntoRecord:()=>sMe,parsePairKeyValue:()=>Zk,serializeKeyPairs:()=>YB});function YB(t){return t.reduce(function(e,r){var n=""+e+(e!==""?F_:"")+r;return n.length>Mce?e:n},"")}function QB(t){return t.getAllEntries().map(function(e){var r=oMe(e,2),n=r[0],i=r[1],o=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(o+=Xk+i.metadata.toString()),o})}function Zk(t){var e=t.split(Xk);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(Nce);if(!(n<=0)){var i=decodeURIComponent(r.substring(0,n).trim()),o=decodeURIComponent(r.substring(n+1).trim()),s;return e.length>0&&(s=Bk(e.join(Xk))),{key:i,value:o,metadata:s}}}}}function sMe(t){return typeof t!="string"||t.length===0?{}:t.split(F_).map(function(e){return Zk(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var oMe,JB=I(()=>{lr();KB();oMe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});var ZB,Fce=I(()=>{lr();LC();KB();JB();ZB=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=Hp.getBaggage(e);if(!(!i||lv(e))){var o=QB(i).filter(function(a){return a.length<=Oce}).slice(0,Lce),s=YB(o);s.length>0&&n.set(r,Jk,s)}},t.prototype.extract=function(e,r,n){var i=n.get(r,Jk),o=Array.isArray(i)?i.join(F_):i;if(!o)return e;var s={};if(o.length===0)return e;var a=o.split(F_);return a.forEach(function(c){var u=Zk(c);if(u){var l={value:u.value};u.metadata&&(l.metadata=u.metadata),s[u.key]=l}}),Object.entries(s).length===0?e:Hp.setBaggage(e,Hp.createBaggage(s))},t.prototype.fields=function(){return[Jk]},t}()});var aMe,Uce=I(()=>{aMe=function(){function t(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}return t.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},t}()});function dv(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var i=Bce(Object.entries(t)),o=i.next();!o.done;o=i.next()){var s=cMe(o.value,2),a=s[0],c=s[1];if(!qce(a)){lt.warn("Invalid attribute key: "+a);continue}if(!eD(c)){lt.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(c)?n[a]=c.slice():n[a]=c}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function qce(t){return typeof t=="string"&&t.length>0}function eD(t){return t==null?!0:Array.isArray(t)?uMe(t):Hce(t)}function uMe(t){var e,r,n;try{for(var i=Bce(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(s!=null){if(!n){if(Hce(s)){n=typeof s;continue}return!1}if(typeof s!==n)return!1}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return!0}function Hce(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var Bce,cMe,Gce=I(()=>{lr();Bce=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cMe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});function eq(){return function(t){lt.error(lMe(t))}}function lMe(t){return typeof t=="string"?t:JSON.stringify(dMe(t))}function dMe(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var i=r[n];i&&(e[n]=String(i))}}),r=Object.getPrototypeOf(r);return e}var tq=I(()=>{lr()});function pMe(t){jce=t}function wa(t){try{jce(t)}catch{}}var jce,rq=I(()=>{tq();jce=eq()});var cc,nq=I(()=>{(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(cc||(cc={}))});var zce,Vce=I(()=>{zce=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});function hMe(t){return mMe.indexOf(t)>-1}function vMe(t){return gMe.indexOf(t)>-1}function bMe(t){return yMe.indexOf(t)>-1}function _Me(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function xMe(t,e,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[t]<"u"){var o=Number(r[t]);isNaN(o)||(o<n?e[t]=n:o>i?e[t]=i:e[t]=o)}}function SMe(t,e,r,n){n===void 0&&(n=fMe);var i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(function(o){return o.trim()}))}function TMe(t,e,r){var n=r[t];if(typeof n=="string"){var i=EMe[n.toUpperCase()];i!=null&&(e[t]=i)}}function OC(t){var e={};for(var r in tD){var n=r;switch(n){case"OTEL_LOG_LEVEL":TMe(n,e,t);break;default:if(hMe(n))_Me(n,e,t);else if(vMe(n))xMe(n,e,t);else if(bMe(n))SMe(n,e,t);else{var i=t[n];typeof i<"u"&&i!==null&&(e[n]=String(i))}}}return e}function iq(){return typeof process<"u"&&process&&process.env?OC(process.env):OC(zce)}var fMe,mMe,gMe,yMe,U_,B_,$ce,Wce,tD,EMe,oq=I(()=>{lr();nq();Vce();fMe=",",mMe=["OTEL_SDK_DISABLED"];gMe=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];yMe=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];U_=1/0,B_=128,$ce=128,Wce=128,tD={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:_n.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:U_,OTEL_ATTRIBUTE_COUNT_LIMIT:B_,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:U_,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:B_,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:U_,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:B_,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:$ce,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:Wce,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:cc.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};EMe={ALL:_n.ALL,VERBOSE:_n.VERBOSE,DEBUG:_n.DEBUG,INFO:_n.INFO,WARN:_n.WARN,ERROR:_n.ERROR,NONE:_n.NONE}});function po(){var t=OC(process.env);return Object.assign({HOSTNAME:Kce.hostname()},tD,t)}var Kce,Yce=I(()=>{Kce=W(require("os"));oq()});var CMe,Qce=I(()=>{CMe=typeof globalThis=="object"?globalThis:global});function Xce(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function RMe(t){var e;t.length===16?e=IMe:t.length===32?e=wMe:e=Buffer.alloc(t.length/2);for(var r=0,n=0;n<t.length;n+=2){var i=Xce(t.charCodeAt(n)),o=Xce(t.charCodeAt(n+1));e.writeUInt8(i<<4|o,r++)}return e.toString("base64")}var IMe,wMe,Jce=I(()=>{IMe=Buffer.alloc(8),wMe=Buffer.alloc(16)});function Zce(t){return function(){for(var r=0;r<t/4;r++)rD.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(rD[r]>0);r++)r===t-1&&(rD[t-1]=1);return rD.toString("hex",0,t)}}var AMe,eue,PMe,rD,tue=I(()=>{AMe=8,eue=16,PMe=function(){function t(){this.generateTraceId=Zce(eue),this.generateSpanId=Zce(AMe)}return t}(),rD=Buffer.allocUnsafe(eue)});var rue,Gp,nue=I(()=>{rue=require("perf_hooks"),Gp=rue.performance});var sq,nD=I(()=>{sq="1.17.0"});var jp,kMe,DMe,NMe,LMe,OMe,MMe,FMe,UMe,BMe,qMe,HMe,GMe,jMe,iue=I(()=>{jp={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},kMe={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},DMe={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},NMe={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},LMe={INSERT:"insert",EDIT:"edit",DELETE:"delete"},OMe={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},MMe={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},FMe={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},UMe={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},BMe={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},qMe={QUEUE:"queue",TOPIC:"topic"},HMe={RECEIVE:"receive",PROCESS:"process"},GMe={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},jMe={SENT:"SENT",RECEIVED:"RECEIVED"}});var oue=I(()=>{iue()});var tr,zMe,VMe,$Me,WMe,KMe,aq,sue=I(()=>{tr={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},zMe={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},VMe={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},$Me={EC2:"ec2",FARGATE:"fargate"},WMe={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},KMe={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},aq={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var aue=I(()=>{sue()});var cq={};an(cq,{AwsEcsLaunchtypeValues:()=>$Me,CloudPlatformValues:()=>VMe,CloudProviderValues:()=>zMe,DbCassandraConsistencyLevelValues:()=>DMe,DbSystemValues:()=>kMe,FaasDocumentOperationValues:()=>LMe,FaasInvokedProviderValues:()=>OMe,FaasTriggerValues:()=>NMe,HostArchValues:()=>WMe,HttpFlavorValues:()=>BMe,MessageTypeValues:()=>jMe,MessagingDestinationKindValues:()=>qMe,MessagingOperationValues:()=>HMe,NetHostConnectionSubtypeValues:()=>UMe,NetHostConnectionTypeValues:()=>FMe,NetTransportValues:()=>MMe,OsTypeValues:()=>KMe,RpcGrpcStatusCodeValues:()=>GMe,SemanticAttributes:()=>jp,SemanticResourceAttributes:()=>tr,TelemetrySdkLanguageValues:()=>aq});var $u=I(()=>{oue();aue()});var q_,MC,cue=I(()=>{nD();$u();MC=(q_={},q_[tr.TELEMETRY_SDK_NAME]="opentelemetry",q_[tr.PROCESS_RUNTIME_NAME]="node",q_[tr.TELEMETRY_SDK_LANGUAGE]=aq.NODEJS,q_[tr.TELEMETRY_SDK_VERSION]=sq,q_)});function uq(t){t.unref()}var uue=I(()=>{});var lue=I(()=>{Yce();Qce();Jce();tue();nue();cue();uue()});var lq=I(()=>{lue()});function Jl(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*QMe);return[r,n]}function FC(){var t=Gp.timeOrigin;if(typeof t!="number"){var e=Gp;t=e.timing&&e.timing.fetchStart}return t}function oD(t){var e=Jl(FC()),r=Jl(typeof t=="number"?t:Gp.now());return cD(e,r)}function XMe(t){if(UC(t))return t;if(typeof t=="number")return t<FC()?oD(t):Jl(t);if(t instanceof Date)return Jl(t.getTime());throw TypeError("Invalid input type")}function dq(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=iD),[r,n]}function JMe(t){var e=due,r=""+"0".repeat(e)+t[1]+"Z",n=r.substr(r.length-e-1),i=new Date(t[0]*1e3).toISOString();return i.replace("000Z",n)}function ZMe(t){return t[0]*iD+t[1]}function eFe(t){return t[0]*1e3+t[1]/1e6}function sD(t){return t[0]*1e6+t[1]/1e3}function UC(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function aD(t){return UC(t)||typeof t=="number"||t instanceof Date}function cD(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=iD&&(r[1]-=iD,r[0]+=1),r}var due,YMe,QMe,iD,pue=I(()=>{lq();due=9,YMe=6,QMe=Math.pow(10,YMe),iD=Math.pow(10,due)});var fue=I(()=>{});var Gc,mue=I(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Gc||(Gc={}))});var tFe,pq,hue=I(()=>{lr();tFe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pq=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return t.prototype.inject=function(e,r,n){var i,o;try{for(var s=tFe(this._propagators),a=s.next();!a.done;a=s.next()){var c=a.value;try{c.inject(e,r,n)}catch(u){lt.warn("Failed to inject with "+c.constructor.name+". Err: "+u.message)}}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(i,o){try{return o.extract(i,r,n)}catch(s){lt.warn("Failed to inject with "+o.constructor.name+". Err: "+s.message)}return i},e)},t.prototype.fields=function(){return this._fields.slice()},t}()});function gue(t){return iFe.test(t)}function vue(t){return oFe.test(t)&&!sFe.test(t)}var fq,rFe,nFe,iFe,oFe,sFe,yue=I(()=>{fq="[_0-9a-z-*/]",rFe="[a-z]"+fq+"{0,255}",nFe="[a-z0-9]"+fq+"{0,240}@[a-z]"+fq+"{0,13}",iFe=new RegExp("^(?:"+rFe+"|"+nFe+")$"),oFe=/^[ -~]{0,255}[!-~]$/,sFe=/,|=/});var bue,aFe,_ue,xue,mq,hq=I(()=>{yue();bue=32,aFe=512,_ue=",",xue="=",mq=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+xue+e.get(n)),r},[]).join(_ue)},t.prototype._parse=function(e){e.length>aFe||(this._internalState=e.split(_ue).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(xue);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);gue(s)&&vue(a)&&r.set(s,a)}return r},new Map),this._internalState.size>bue&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,bue))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function Sue(t){var e=fFe.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var uD,lD,cFe,uFe,lFe,dFe,pFe,fFe,gq,Eue=I(()=>{lr();LC();hq();uD="traceparent",lD="tracestate",cFe="00",uFe="(?!ff)[\\da-f]{2}",lFe="(?![0]{32})[\\da-f]{32}",dFe="(?![0]{16})[\\da-f]{16}",pFe="[\\da-f]{2}",fFe=new RegExp("^\\s?("+uFe+")-("+lFe+")-("+dFe+")-("+pFe+")(-.*)?\\s?$");gq=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=lo.getSpanContext(e);if(!(!i||lv(e)||!Hc(i))){var o=cFe+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||ki.NONE).toString(16);n.set(r,uD,o),i.traceState&&n.set(r,lD,i.traceState.serialize())}},t.prototype.extract=function(e,r,n){var i=n.get(r,uD);if(!i)return e;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return e;var s=Sue(o);if(!s)return e;s.isRemote=!0;var a=n.get(r,lD);if(a){var c=Array.isArray(a)?a.join(","):a;s.traceState=new mq(typeof c=="string"?c:void 0)}return lo.setSpanContext(e,s)},t.prototype.fields=function(){return[uD,lD]},t}()});var Tue=I(()=>{});function mFe(t,e){return t.setValue(yq,e)}function hFe(t){return t.deleteValue(yq)}function gFe(t){return t.getValue(yq)}var yq,vq,Cue=I(()=>{lr();yq=Xl("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})(vq||(vq={}))});var dD,bq=I(()=>{lr();dD=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Ia.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var BC,_q=I(()=>{lr();BC=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Ia.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var vFe,Iue=I(()=>{lr();rq();bq();_q();vFe=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(wa(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new BC),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new BC,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new dD,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new BC,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new dD}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=lo.getSpanContext(e);return!a||!Hc(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&ki.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&ki.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var yFe,wue=I(()=>{lr();yFe=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:uv(r)&&this._accumulate(r)<this._upperBound?Ia.RECORD_AND_SAMPLED:Ia.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function CFe(t,e){return function(r){return t(e(r))}}function xq(t){if(!IFe(t)||wFe(t)!==bFe)return!1;var e=TFe(t);if(e===null)return!0;var r=Pue.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Rue.call(r)===EFe}function IFe(t){return t!=null&&typeof t=="object"}function wFe(t){return t==null?t===void 0?xFe:_Fe:pv&&pv in Object(t)?RFe(t):AFe(t)}function RFe(t){var e=Pue.call(t,pv),r=t[pv],n=!1;try{t[pv]=void 0,n=!0}catch{}var i=kue.call(t);return n&&(e?t[pv]=r:delete t[pv]),i}function AFe(t){return kue.call(t)}var bFe,_Fe,xFe,SFe,Rue,EFe,TFe,Aue,Pue,pv,kue,Due=I(()=>{bFe="[object Object]",_Fe="[object Null]",xFe="[object Undefined]",SFe=Function.prototype,Rue=SFe.toString,EFe=Rue.call(Object),TFe=CFe(Object.getPrototypeOf,Object),Aue=Object.prototype,Pue=Aue.hasOwnProperty,pv=Symbol?Symbol.toStringTag:void 0,kue=Aue.toString});function Eq(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=Lue(r,t.shift(),0,n);return r}function Sq(t){return fD(t)?t.slice():t}function Lue(t,e,r,n){r===void 0&&(r=0);var i;if(!(r>PFe)){if(r++,pD(t)||pD(e)||Oue(e))i=Sq(e);else if(fD(t)){if(i=t.slice(),fD(e))for(var o=0,s=e.length;o<s;o++)i.push(Sq(e[o]));else if(qC(e))for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var c=a[o];i[c]=Sq(e[c])}}else if(qC(t))if(qC(e)){if(!kFe(t,e))return e;i=Object.assign({},t);for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var c=a[o],u=e[c];if(pD(u))typeof u>"u"?delete i[c]:i[c]=u;else{var l=i[c],d=u;if(Nue(t,c,n)||Nue(e,c,n))delete i[c];else{if(qC(l)&&qC(d)){var p=n.get(l)||[],f=n.get(d)||[];p.push({obj:t,key:c}),f.push({obj:e,key:c}),n.set(l,p),n.set(d,f)}i[c]=Lue(i[c],u,r,n)}}}}else i=e;return i}}function Nue(t,e,r){for(var n=r.get(t[e])||[],i=0,o=n.length;i<o;i++){var s=n[i];if(s.key===e&&s.obj===t)return!0}return!1}function fD(t){return Array.isArray(t)}function Oue(t){return typeof t=="function"}function qC(t){return!pD(t)&&!fD(t)&&!Oue(t)&&typeof t=="object"}function pD(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function kFe(t,e){return!(!xq(t)||!xq(e))}var PFe,Mue=I(()=>{Due();PFe=20});function NFe(t,e){var r,n=new Promise(function(o,s){r=setTimeout(function(){s(new Fue("Operation timed out."))},e)});return Promise.race([t,n]).then(function(i){return clearTimeout(r),i},function(i){throw clearTimeout(r),i})}var DFe,Fue,Uue=I(()=>{DFe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fue=function(t){DFe(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error)});function Bue(t,e){return typeof e=="string"?t===e:!!t.match(e)}function OFe(t,e){var r,n;if(!e)return!1;try{for(var i=LFe(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(Bue(t,s))return!0}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}var LFe,que=I(()=>{LFe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});function MFe(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var Hue=I(()=>{});var Gue,jue=I(()=>{Gue=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}()});var FFe,UFe,HC,zue=I(()=>{jue();FFe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},UFe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},HC=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new Gue}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,UFe([this._that],FFe(n),!1))).then(function(o){return r._deferred.resolve(o)},function(o){return r._deferred.reject(o)})}catch(o){this._deferred.reject(o)}}return this._deferred.promise},t}()});function Vue(t,e){return new Promise(function(r){Qs.with(NC(Qs.active()),function(){t.export(e,function(n){r(n)})})})}var $ue=I(()=>{lr();LC()});var Wue={};an(Wue,{AlwaysOffSampler:()=>dD,AlwaysOnSampler:()=>BC,AnchoredClock:()=>aMe,BindOnceFuture:()=>HC,CompositePropagator:()=>pq,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>B_,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>U_,DEFAULT_ENVIRONMENT:()=>tD,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>$ce,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>Wce,ExportResultCode:()=>Gc,ParentBasedSampler:()=>vFe,RPCType:()=>vq,RandomIdGenerator:()=>PMe,SDK_INFO:()=>MC,TRACE_PARENT_HEADER:()=>uD,TRACE_STATE_HEADER:()=>lD,TimeoutError:()=>Fue,TraceIdRatioBasedSampler:()=>yFe,TraceState:()=>mq,TracesSamplerValues:()=>cc,VERSION:()=>sq,W3CBaggagePropagator:()=>ZB,W3CTraceContextPropagator:()=>gq,_globalThis:()=>CMe,addHrTimes:()=>cD,baggageUtils:()=>XB,callWithTimeout:()=>NFe,deleteRPCMetadata:()=>hFe,getEnv:()=>po,getEnvWithoutDefaults:()=>iq,getRPCMetadata:()=>gFe,getTimeOrigin:()=>FC,globalErrorHandler:()=>wa,hexToBase64:()=>RMe,hrTime:()=>oD,hrTimeDuration:()=>dq,hrTimeToMicroseconds:()=>sD,hrTimeToMilliseconds:()=>eFe,hrTimeToNanoseconds:()=>ZMe,hrTimeToTimeStamp:()=>JMe,internal:()=>Tq,isAttributeKey:()=>qce,isAttributeValue:()=>eD,isTimeInput:()=>aD,isTimeInputHrTime:()=>UC,isTracingSuppressed:()=>lv,isUrlIgnored:()=>OFe,isWrapped:()=>MFe,loggingErrorHandler:()=>eq,merge:()=>Eq,millisToHrTime:()=>Jl,otperformance:()=>Gp,parseEnvironment:()=>OC,parseTraceParent:()=>Sue,sanitizeAttributes:()=>dv,setGlobalErrorHandler:()=>pMe,setRPCMetadata:()=>mFe,suppressTracing:()=>NC,timeInputToHrTime:()=>XMe,unrefTimer:()=>uq,unsuppressTracing:()=>iMe,urlMatches:()=>Bue});var Tq,Xs=I(()=>{Fce();Uce();Gce();rq();tq();pue();fue();mue();nD();JB();lq();hue();Eue();Tue();Cue();bq();_q();Iue();wue();LC();hq();oq();Mue();nq();Uue();que();Hue();zue();nD();$ue();Tq={_export:Vue}});var Kue,Yue=I(()=>{Kue="exception"});var BFe,qFe,Cq,Iq=I(()=>{lr();Xs();$u();Yue();BFe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qFe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Cq=function(){function t(e,r,n,i,o,s,a,c,u){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:O_.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a;var l=Date.now();this._performanceStartTime=Gp.now(),this._performanceOffset=l-(this._performanceStartTime+FC()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c??l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(lt.warn("Invalid attribute key: "+e),this):eD(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(lt.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var i=BFe(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=qFe(o.value,2),a=s[0],c=s[1];this.setAttribute(a,c)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return lt.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(lt.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),aD(r)&&(aD(n)||(n=r),r=void 0);var i=dv(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){lt.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=dq(this.startTime,this.endTime),this._duration[0]<0&&(lt.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<Gp.now())return oD(e+this._performanceOffset);if(typeof e=="number")return Jl(e);if(e instanceof Date)return Jl(e.getTime());if(UC(e))return e;if(this._startTimeProvided)return Jl(Date.now());var r=Gp.now()-this._performanceStartTime;return cD(this.startTime,Jl(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[jp.EXCEPTION_MESSAGE]=e:e&&(e.code?n[jp.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[jp.EXCEPTION_TYPE]=e.name),e.message&&(n[jp.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[jp.EXCEPTION_STACKTRACE]=e.stack)),n[jp.EXCEPTION_TYPE]||n[jp.EXCEPTION_MESSAGE]?this.addEvent(Kue,n,r):lt.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&lt.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(lt.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?r._truncateToLimitUtil(i,n):i}):e},t}()});var Zl,GC=I(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Zl||(Zl={}))});var fv,mD=I(()=>{GC();fv=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Zl.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var zp,hD=I(()=>{GC();zp=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Zl.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var jC,wq=I(()=>{lr();Xs();mD();hD();jC=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(wa(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new zp),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new zp,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new fv,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new zp,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new fv}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=lo.getSpanContext(e);return!a||!Hc(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&ki.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&ki.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var gD,Rq=I(()=>{lr();GC();gD=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:uv(r)&&this._accumulate(r)<this._upperBound?Zl.RECORD_AND_SAMPLED:Zl.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function vD(){return{sampler:Aq(HFe),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:po().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:po().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:po().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:po().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:po().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:po().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:po().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:po().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Aq(t){switch(t===void 0&&(t=po()),t.OTEL_TRACES_SAMPLER){case cc.AlwaysOn:return new zp;case cc.AlwaysOff:return new fv;case cc.ParentBasedAlwaysOn:return new jC({root:new zp});case cc.ParentBasedAlwaysOff:return new jC({root:new fv});case cc.TraceIdRatio:return new gD(Que(t));case cc.ParentBasedTraceIdRatio:return new jC({root:new gD(Que(t))});default:return lt.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+GFe+'".'),new zp}}function Que(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return lt.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+H_+"."),H_;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(lt.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+H_+"."),H_):e<0||e>1?(lt.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+H_+"."),H_):e}var HFe,GFe,H_,Pq=I(()=>{lr();Xs();mD();hD();wq();Rq();HFe=po(),GFe=cc.AlwaysOn,H_=1});function Xue(t){var e={sampler:Aq()},r=vD(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function Jue(t){var e,r,n,i,o,s,a,c,u,l,d,p,f=Object.assign({},t.spanLimits),m=iq();return f.attributeCountLimit=(s=(o=(i=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:B_,f.attributeValueLengthLimit=(p=(d=(l=(c=(a=t.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&c!==void 0?c:(u=t.generalLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&l!==void 0?l:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:U_,Object.assign({},t,{spanLimits:f})}var kq=I(()=>{Pq();Xs()});var Zue,ele=I(()=>{lr();Xs();Zue=function(){function t(e,r){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=po();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new HC(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(lt.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&ki.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&lt.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(lt.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var i=[],o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),s=0,a=o;s<a;s++)i.push(e._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);Qs.with(NC(Qs.active()),function(){var o=e._finishedSpans.splice(0,e._maxExportBatchSize),s=function(){return e._exporter.export(o,function(c){var u;clearTimeout(i),c.code===Gc.SUCCESS?r():n((u=c.error)!==null&&u!==void 0?u:new Error("BatchSpanProcessor: span export failed"))})},a=o.map(function(c){return c.resource}).filter(function(c){return c.asyncAttributesPending});a.length===0?s():Promise.all(a.map(function(c){var u;return(u=c.waitForAsyncAttributes)===null||u===void 0?void 0:u.call(c)})).then(s,function(c){wa(c),n(c)})})})},t.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){wa(r)})},this._scheduledDelayMillis),uq(this._timer))},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}()});var jFe,Dq,tle=I(()=>{ele();jFe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dq=function(t){jFe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onShutdown=function(){},e}(Zue)});function rle(t){return function(){for(var r=0;r<t/4;r++)yD.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(yD[r]>0);r++)r===t-1&&(yD[t-1]=1);return yD.toString("hex",0,t)}}var zFe,nle,Nq,yD,ile=I(()=>{zFe=8,nle=16,Nq=function(){function t(){this.generateTraceId=rle(nle),this.generateSpanId=rle(zFe)}return t}(),yD=Buffer.allocUnsafe(nle)});var ole=I(()=>{tle();ile()});var bD=I(()=>{ole()});var Lq,sle=I(()=>{lr();Xs();Iq();kq();bD();Lq=function(){function t(e,r,n){this._tracerProvider=n;var i=Xue(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new Nq,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var i,o,s;r===void 0&&(r={}),n===void 0&&(n=Qs.active()),r.root&&(n=lo.deleteSpan(n));var a=lo.getSpan(n);if(lv(n)){lt.debug("Instrumentation suppressed, returning Noop Span");var c=lo.wrapSpanContext(N_);return c}var u=a?.spanContext(),l=this._idGenerator.generateSpanId(),d,p,f;!u||!lo.isSpanContextValid(u)?d=this._idGenerator.generateTraceId():(d=u.traceId,p=u.traceState,f=u.spanId);var m=(i=r.kind)!==null&&i!==void 0?i:L_.INTERNAL,h=((o=r.links)!==null&&o!==void 0?o:[]).map(function(T){return{context:T.context,attributes:dv(T.attributes)}}),g=dv(r.attributes),v=this._sampler.shouldSample(n,d,e,m,g,h);p=(s=v.traceState)!==null&&s!==void 0?s:p;var y=v.decision===Ia.RECORD_AND_SAMPLED?ki.SAMPLED:ki.NONE,b={traceId:d,spanId:l,traceFlags:y,traceState:p};if(v.decision===Ia.NOT_RECORD){lt.debug("Recording is off, propagating context in a non-recording span");var c=lo.wrapSpanContext(b);return c}var x=new Cq(this,n,e,b,m,f,h,r.startTime),S=dv(Object.assign(g,v.attributes));return x.setAttributes(S),x},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var c=s??Qs.active(),u=this.startSpan(e,o,c),l=lo.setSpan(c,u);return Qs.with(l,a,void 0,u)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}()});function ale(){return"unknown_service:"+process.argv0}var cle=I(()=>{});var ule,lle,Oq=I(()=>{ule=function(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}},lle=function(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}});var dle,ple,G_,_D=I(()=>{dle=W(require("child_process")),ple=W(require("util")),G_=ple.promisify(dle.exec)});var fle={};an(fle,{getMachineId:()=>WFe});function WFe(){return VFe(this,void 0,void 0,function(){var t,e,r,n;return $Fe(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,G_('ioreg -rd1 -c "IOPlatformExpertDevice"')];case 1:return t=i.sent(),e=t.stdout.split(`
`).find(function(o){return o.includes("IOPlatformUUID")}),e?(r=e.split('" = "'),r.length===2?[2,r[1].slice(0,-1)]:[3,3]):[2,""];case 2:return n=i.sent(),lt.debug("error reading machine id: "+n),[3,3];case 3:return[2,""]}})})}var VFe,$Fe,mle=I(()=>{_D();lr();VFe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},$Fe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var gle={};an(gle,{getMachineId:()=>XFe});function XFe(){return KFe(this,void 0,void 0,function(){var t,e,r,n,i,o,s,a,c;return YFe(this,function(u){switch(u.label){case 0:t=["/etc/machine-id","/var/lib/dbus/machine-id"],u.label=1;case 1:u.trys.push([1,8,9,10]),e=QFe(t),r=e.next(),u.label=2;case 2:if(r.done)return[3,7];n=r.value,u.label=3;case 3:return u.trys.push([3,5,,6]),[4,hle.promises.readFile(n,{encoding:"utf8"})];case 4:return i=u.sent(),[2,i.trim()];case 5:return o=u.sent(),lt.debug("error reading machine id: "+o),[3,6];case 6:return r=e.next(),[3,2];case 7:return[3,10];case 8:return s=u.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(c=e.return)&&c.call(e)}finally{if(a)throw a.error}return[7];case 10:return[2,""]}})})}var hle,KFe,YFe,QFe,vle=I(()=>{hle=require("fs");lr();KFe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},YFe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},QFe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});var ble={};an(ble,{getMachineId:()=>e9e});function e9e(){return JFe(this,void 0,void 0,function(){var e,t,e,r;return ZFe(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,yle.promises.readFile("/etc/hostid",{encoding:"utf8"})];case 1:return e=n.sent(),[2,e.trim()];case 2:return t=n.sent(),lt.debug("error reading machine id: "+t),[3,3];case 3:return n.trys.push([3,5,,6]),[4,G_("kenv -q smbios.system.uuid")];case 4:return e=n.sent(),[2,e.stdout.trim()];case 5:return r=n.sent(),lt.debug("error reading machine id: "+r),[3,6];case 6:return[2,""]}})})}var yle,JFe,ZFe,_le=I(()=>{yle=require("fs");_D();lr();JFe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},ZFe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var xle={};an(xle,{getMachineId:()=>n9e});function n9e(){return t9e(this,void 0,void 0,function(){var t,e,r,n,i;return r9e(this,function(o){switch(o.label){case 0:t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe",xD.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in xD.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,G_(e+" "+t)];case 2:return r=o.sent(),n=r.stdout.split("REG_SZ"),n.length===2?[2,n[1].trim()]:[3,4];case 3:return i=o.sent(),lt.debug("error reading machine id: "+i),[3,4];case 4:return[2,""]}})})}var xD,t9e,r9e,Sle=I(()=>{xD=W(require("process"));_D();lr();t9e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},r9e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var Ele={};an(Ele,{getMachineId:()=>s9e});function s9e(){return i9e(this,void 0,void 0,function(){return o9e(this,function(t){return lt.debug("could not read machine-id: unsupported platform"),[2,""]})})}var i9e,o9e,Tle=I(()=>{lr();i9e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},o9e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var Cle,mv,Ile=I(()=>{Cle=W(require("process"));switch(Cle.platform){case"darwin":mv=(mle(),Gi(fle)).getMachineId;break;case"linux":mv=(vle(),Gi(gle)).getMachineId;break;case"freebsd":mv=(_le(),Gi(ble)).getMachineId;break;case"win32":mv=(Sle(),Gi(xle)).getMachineId;break;default:mv=(Tle(),Gi(Ele)).getMachineId}});var SD,a9e,wle,Mq=I(()=>{$u();j_();SD=require("os");Oq();Ile();a9e=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[tr.HOST_NAME]=(0,SD.hostname)(),r[tr.HOST_ARCH]=ule((0,SD.arch)()),r);return new Js(n,this._getAsyncAttributes())},t.prototype._getAsyncAttributes=function(){return mv().then(function(e){var r={};return e&&(r[tr.HOST_ID]=e),r})},t}(),wle=new a9e});var c9e,MCt,Rle=I(()=>{Mq();c9e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(wle.detect(e))},t}(),MCt=new c9e});var ED,u9e,Ale,Fq=I(()=>{$u();j_();ED=require("os");Oq();u9e=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[tr.OS_TYPE]=lle((0,ED.platform)()),r[tr.OS_VERSION]=(0,ED.release)(),r);return new Js(n)},t}(),Ale=new u9e});var l9e,jCt,Ple=I(()=>{Fq();l9e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Ale.detect(e))},t}(),jCt=new l9e});var Nle,kle,Dle,d9e,Lle,Uq=I(()=>{lr();$u();j_();Nle=W(require("os")),kle=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Dle=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},d9e=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[tr.PROCESS_PID]=process.pid,r[tr.PROCESS_EXECUTABLE_NAME]=process.title,r[tr.PROCESS_EXECUTABLE_PATH]=process.execPath,r[tr.PROCESS_COMMAND_ARGS]=Dle(Dle([process.argv[0]],kle(process.execArgv),!1),kle(process.argv.slice(1)),!1),r[tr.PROCESS_RUNTIME_VERSION]=process.versions.node,r[tr.PROCESS_RUNTIME_NAME]="nodejs",r[tr.PROCESS_RUNTIME_DESCRIPTION]="Node.js",r);process.argv.length>1&&(n[tr.PROCESS_COMMAND]=process.argv[1]);try{var i=Nle.userInfo();n[tr.PROCESS_OWNER]=i.username}catch(o){lt.debug("error obtaining process owner: "+o)}return new Js(n)},t}(),Lle=new d9e});var p9e,QCt,Ole=I(()=>{Uq();p9e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Lle.detect(e))},t}(),QCt=new p9e});var Mle=I(()=>{cle();Rle();Ple();Mq();Fq();Ole();Uq()});var Bq=I(()=>{Mle()});var Qm,f9e,m9e,h9e,Js,j_=I(()=>{lr();$u();Xs();Bq();Qm=function(){return Qm=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Qm.apply(this,arguments)},f9e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},m9e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},h9e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Js=function(){function t(e,r){var n=this,i;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=r?.then(function(o){return n._attributes=Object.assign({},n._attributes,o),n.asyncAttributesPending=!1,o},function(o){return lt.debug("a resource's async attributes promise rejected: %s",o),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[tr.SERVICE_NAME]=ale(),e[tr.TELEMETRY_SDK_LANGUAGE]=MC[tr.TELEMETRY_SDK_LANGUAGE],e[tr.TELEMETRY_SDK_NAME]=MC[tr.TELEMETRY_SDK_NAME],e[tr.TELEMETRY_SDK_VERSION]=MC[tr.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&lt.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return f9e(this,void 0,void 0,function(){return m9e(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var i=Qm(Qm({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(i);var o=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(s){var a,c=h9e(s,2),u=c[0],l=c[1];return Qm(Qm(Qm(Qm({},r._syncAttributes),u),(a=e._syncAttributes)!==null&&a!==void 0?a:e.attributes),l)});return new t(i,o)},t.EMPTY=new t({}),t}()});var Fle=I(()=>{});var Ule=I(()=>{});var Ble=I(()=>{});var g9e,mIt,qle=I(()=>{TD();g9e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Hle.detect(e))},t}(),mIt=new g9e});var v9e,y9e,b9e,Gle,qq=I(()=>{lr();Xs();$u();j_();v9e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y9e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},b9e=function(){function t(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return t.prototype.detect=function(e){var r={},n=po(),i=n.OTEL_RESOURCE_ATTRIBUTES,o=n.OTEL_SERVICE_NAME;if(i)try{var s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(a){lt.debug("EnvDetector failed: "+a.message)}return o&&(r[tr.SERVICE_NAME]=o),new Js(r)},t.prototype._parseResourceAttributes=function(e){var r,n;if(!e)return{};var i={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var s=v9e(o),a=s.next();!a.done;a=s.next()){var c=a.value,u=c.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length===2){var l=y9e(u,2),d=l[0],p=l[1];if(d=d.trim(),p=p.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(d))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(p))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);i[d]=decodeURIComponent(p)}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},t.prototype._isBaggageOctetString=function(e){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0},t.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},t}(),Gle=new b9e});var _9e,SIt,jle=I(()=>{qq();_9e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Gle.detect(e))},t}(),SIt=new _9e});var Hq,x9e,Hle,zle=I(()=>{$u();TD();lr();Hq=function(){return Hq=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Hq.apply(this,arguments)},x9e=function(){function t(){}return t.prototype.detect=function(e){var r,n=typeof navigator<"u";if(!n)return Js.empty();var i=(r={},r[tr.PROCESS_RUNTIME_NAME]="browser",r[tr.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",r[tr.PROCESS_RUNTIME_VERSION]=navigator.userAgent,r);return this._getResourceAttributes(i,e)},t.prototype._getResourceAttributes=function(e,r){return e[tr.PROCESS_RUNTIME_VERSION]===""?(lt.debug("BrowserDetector failed: Unable to find required browser resources. "),Js.empty()):new Js(Hq({},e))},t}(),Hle=new x9e});var Vle=I(()=>{qle();jle();zle();qq()});var $le=I(()=>{});var TD=I(()=>{j_();Fle();Bq();Ule();Ble();Vle();$le()});var CD,Wle,Kle=I(()=>{Xs();CD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wle=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var i=CD(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.forceFlush())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a){Promise.all(n).then(function(){a()}).catch(function(c){wa(c||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},t.prototype.onStart=function(e,r){var n,i;try{for(var o=CD(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;a.onStart(e,r)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var i=CD(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;s.onEnd(e)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var i=CD(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.shutdown())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a,c){Promise.all(n).then(function(){a()},c)})},t}()});var Gq,jq=I(()=>{Gq=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}()});var Xm,S9e,Yle=I(()=>{lr();Xs();TD();zq();Pq();Kle();jq();bD();kq();(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(Xm||(Xm={}));S9e=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=Eq({},vD(),Jue(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:Js.empty(),this.resource=Js.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new Dq(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new Gq}return t.prototype.getTracer=function(e,r,n){var i=e+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(i)||this._tracers.set(i,new Lq({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return lt.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Wle(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),lo.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&Qs.setGlobalContextManager(e.contextManager),e.propagator&&Hp.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var o,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),o=Xm.timeout},e);n.forceFlush().then(function(){clearTimeout(s),o!==Xm.timeout&&(o=Xm.resolved,i(o))}).catch(function(a){clearTimeout(s),o=Xm.error,i(a)})})});return new Promise(function(n,i){Promise.all(r).then(function(o){var s=o.filter(function(a){return a!==Xm.resolved});s.length>0?i(s):n()}).catch(function(o){return i([o])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(po().OTEL_PROPAGATORS)),n=r.map(function(o){var s=e._getPropagator(o);return s||lt.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),s}),i=n.reduce(function(o,s){return s&&o.push(s),o},[]);if(i.length!==0)return r.length===1?i[0]:new pq({propagators:i})},t.prototype._buildExporterFromEnv=function(){var e=po().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||lt.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new gq}],["baggage",function(){return new ZB}]]),t._registeredExporters=new Map,t}()});var E9e,T9e,Qle=I(()=>{Xs();E9e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T9e=function(){function t(){}return t.prototype.export=function(e,r){return this._sendSpans(e,r)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(e){var r;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:sD(e.startTime),duration:sD(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},t.prototype._sendSpans=function(e,r){var n,i;try{for(var o=E9e(e),s=o.next();!s.done;s=o.next()){var a=s.value;console.dir(this._exportInfo(a),{depth:3})}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(r)return r({code:Gc.SUCCESS})},t}()});var C9e,I9e,w9e,Xle=I(()=>{Xs();C9e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},I9e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},w9e=function(){function t(){this._finishedSpans=[],this._stopped=!1}return t.prototype.export=function(e,r){var n;if(this._stopped)return r({code:Gc.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,I9e([],C9e(e),!1)),setTimeout(function(){return r({code:Gc.SUCCESS})},0)},t.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.reset=function(){this._finishedSpans=[]},t.prototype.getFinishedSpans=function(){return this._finishedSpans},t}()});var Jle=I(()=>{});var R9e,A9e,P9e,Zle=I(()=>{lr();Xs();R9e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},A9e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},P9e=function(){function t(e){this._exporter=e,this._shutdownOnce=new HC(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return R9e(this,void 0,void 0,function(){return A9e(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){var r=this,n,i;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&ki.SAMPLED){var o=function(){return Tq._export(r._exporter,[e]).then(function(a){var c;a.code!==Gc.SUCCESS&&wa((c=a.error)!==null&&c!==void 0?c:new Error("SimpleSpanProcessor: span export failed (status "+a+")"))}).catch(function(a){wa(a)})};if(e.resource.asyncAttributesPending){var s=(i=(n=e.resource).waitForAsyncAttributes)===null||i===void 0?void 0:i.call(n).then(function(){return s!=null&&r._unresolvedExports.delete(s),o()},function(a){return wa(a)});s!=null&&this._unresolvedExports.add(s)}else o()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}()});var ede=I(()=>{});var tde=I(()=>{});var rde=I(()=>{});var nde=I(()=>{});var ide=I(()=>{});var ode={};an(ode,{AlwaysOffSampler:()=>fv,AlwaysOnSampler:()=>zp,BasicTracerProvider:()=>S9e,BatchSpanProcessor:()=>Dq,ConsoleSpanExporter:()=>T9e,ForceFlushState:()=>Xm,InMemorySpanExporter:()=>w9e,NoopSpanProcessor:()=>Gq,ParentBasedSampler:()=>jC,RandomIdGenerator:()=>Nq,SamplingDecision:()=>Zl,SimpleSpanProcessor:()=>P9e,Span:()=>Cq,TraceIdRatioBasedSampler:()=>gD,Tracer:()=>Lq});var zq=I(()=>{sle();Yle();bD();Qle();Xle();Jle();Zle();ede();jq();mD();hD();wq();Rq();GC();Iq();tde();rde();nde();ide()});var ade=k(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.enable=jc.azureCoreTracing=jc.AzureMonitorSymbol=void 0;var Vq=vi();jc.AzureMonitorSymbol="Azure_Monitor_Tracer";var $q="azure-coretracing",sde=!1,k9e=function(t){if(sde)return t;try{var e=(zq(),Gi(ode)),r=(lr(),Gi(M_)),n=new e.BasicTracerProvider,i=n.getTracer("applicationinsights tracer");if(t.setTracer){var o=t.setTracer;t.setTracer=function(u){var l=u.startSpan;u.startSpan=function(d,p,f){var m=l.call(this,d,p,f),h=m.end;return m.end=function(){var g=h.apply(this,arguments);return Vq.channel.publish($q,m),g},m},u[jc.AzureMonitorSymbol]=!0,o.call(this,u)},r.trace.getSpan(r.context.active()),t.setTracer(i)}else{var s=r.trace.setGlobalTracerProvider;r.trace.setGlobalTracerProvider=function(u){var l=u.getTracer;return u.getTracer=function(d,p){var f=l.call(this,d,p);if(!f[jc.AzureMonitorSymbol]){var m=f.startSpan;f.startSpan=function(h,g,v){var y=m.call(this,h,g,v),b=y.end;return y.end=function(){var x=b.apply(this,arguments);return Vq.channel.publish($q,y),x},y},f[jc.AzureMonitorSymbol]=!0}return f},s.call(this,u)},n.register(),r.trace.getSpan(r.context.active());var a=require("@opentelemetry/instrumentation"),c=require("@azure/opentelemetry-instrumentation-azure-sdk");a.registerInstrumentations({instrumentations:[c.createAzureSdkInstrumentation()]})}sde=!0}catch{}return t};jc.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:k9e,publisherName:$q};function D9e(){Vq.channel.registerMonkeyPatch("@azure/core-tracing",jc.azureCoreTracing)}jc.enable=D9e});var ude=k(hv=>{"use strict";Object.defineProperty(hv,"__esModule",{value:!0});hv.enable=hv.bunyan=void 0;var cde=vi(),N9e=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var o=i;o||(o=e.call(this,r,!0)),cde.channel.publish("bunyan",{level:r.level,result:o})}return i},t};hv.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:N9e};function L9e(){cde.channel.registerMonkeyPatch("bunyan",hv.bunyan)}hv.enable=L9e});var dde=k(gv=>{"use strict";Object.defineProperty(gv,"__esModule",{value:!0});gv.enable=gv.console=void 0;var Wq=vi(),lde=require("stream"),O9e=function(t){var e=new lde.Writable,r=new lde.Writable;e.write=function(u){if(!u)return!0;var l=u.toString();return Wq.channel.publish("console",{message:l}),!0},r.write=function(u){if(!u)return!0;var l=u.toString();return Wq.channel.publish("console",{message:l,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(u){var l=t[u];l&&(t[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch{}return l.apply(t,arguments)})},s=0,a=i;s<a.length;s++){var c=a[s];o(c)}return t};gv.console={versionSpecifier:">= 4.0.0",patch:O9e};function M9e(){Wq.channel.registerMonkeyPatch("console",gv.console),require("console")}gv.enable=M9e});var pde=k(vv=>{"use strict";Object.defineProperty(vv,"__esModule",{value:!0});vv.enable=vv.mongoCore=void 0;var Kq=vi(),F9e=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Kq.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Kq.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t};vv.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:F9e};function U9e(){Kq.channel.registerMonkeyPatch("mongodb-core",vv.mongoCore)}vv.enable=U9e});var fde=k(Zs=>{"use strict";var z_=Zs&&Zs.__assign||function(){return z_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},z_.apply(this,arguments)};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.enable=Zs.mongo330=Zs.mongo3=Zs.mongo2=void 0;var Es=vi(),B9e=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return Es.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=z_(z_({},n),{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Es.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):Es.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Es.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):Es.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},q9e=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=Es.channel.bindToContext(function(o){return o()}),r[i.requestId]=z_(z_({},i),{time:new Date}))}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Es.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Es.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t},H9e=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Es.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Es.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t},G9e=function(t){H9e(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=Es.channel.bindToContext(function(o){return o()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Es.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Es.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t};Zs.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:B9e};Zs.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:q9e};Zs.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:G9e};function j9e(){Es.channel.registerMonkeyPatch("mongodb",Zs.mongo2),Es.channel.registerMonkeyPatch("mongodb",Zs.mongo3),Es.channel.registerMonkeyPatch("mongodb",Zs.mongo330)}Zs.enable=j9e});var hde=k(yv=>{"use strict";Object.defineProperty(yv,"__esModule",{value:!0});yv.enable=yv.mysql=void 0;var ID=vi(),mde=require("path"),z9e=function(t,e){var r=function(c,u){return function(l,d){var p=c[l];p&&(c[l]=function(){for(var m=arguments.length-1,h=arguments.length-1;h>=0;--h)if(typeof arguments[h]=="function"){m=h;break}else if(typeof arguments[h]<"u")break;var g=arguments[m],v={result:null,startTime:null,startDate:null};typeof g=="function"&&(d?(v.startTime=process.hrtime(),v.startDate=new Date,arguments[m]=ID.channel.bindToContext(d(v,g))):arguments[m]=ID.channel.bindToContext(g));var y=p.apply(this,arguments);return v.result=y,y})}},n=function(c,u){return r(c.prototype,u+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(mde.dirname(e)+"/lib/Connection");i.forEach(function(c){return n(o,"Connection")(c)}),r(o,"Connection")("createQuery",function(c,u){return function(l){var d=process.hrtime(c.startTime),p=d[0]*1e3+d[1]/1e6|0;ID.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:l,duration:p,time:c.startDate}),u.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(mde.dirname(e)+"/lib/Pool");return s.forEach(function(c){return n(a,"Pool")(c)}),t};yv.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:z9e};function V9e(){ID.channel.registerMonkeyPatch("mysql",yv.mysql)}yv.enable=V9e});var vde=k(bv=>{"use strict";Object.defineProperty(bv,"__esModule",{value:!0});bv.enable=bv.postgresPool1=void 0;var gde=vi();function $9e(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=gde.channel.bindToContext(n)),e.apply(this,arguments)},t}bv.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:$9e};function W9e(){gde.channel.registerMonkeyPatch("pg-pool",bv.postgresPool1)}bv.enable=W9e});var bde=k(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.enable=ed.postgres=ed.postgres6=void 0;var V_=vi(),yde=require("events"),Yq="postgres";function K9e(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),l;function d(p){p&&p[n]&&(p=p[n]);var f=V_.channel.bindToContext(function(m,h){var g=process.hrtime(u);if(c.result=h&&{rowCount:h.rowCount,command:h.command},c.error=m,c.duration=Math.ceil(g[0]*1e3+g[1]/1e6),V_.channel.publish(Yq,c),m){if(p)return p.apply(this,arguments);l&&l instanceof yde.EventEmitter&&l.emit("error",m)}else p&&p.apply(this,arguments)});try{return Object.defineProperty(f,n,{value:p}),f}catch{return p}}try{typeof o=="string"?s instanceof Array?(c.query.preparable={text:o,args:s},a=d(a)):(c.query.text=o,a?a=d(a):s=d(s)):(typeof o.name=="string"?c.query.plan=o.name:o.values instanceof Array?c.query.preparable={text:o.text,args:o.values}:c.query.text=o.text,a?a=d(a):s?s=d(s):o.callback=d(o.callback))}catch{return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,l=r.apply(this,arguments),l},t}function Y9e(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var c=this,u,l,d=!!a,p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f,m=process.hrtime();function h(y){y&&y[n]&&(y=y[n]);var b=V_.channel.bindToContext(function(x,S){var T=process.hrtime(m);if(p.result=S&&{rowCount:S.rowCount,command:S.command},p.error=x,p.duration=Math.ceil(T[0]*1e3+T[1]/1e6),V_.channel.publish(Yq,p),x){if(y)return y.apply(this,arguments);f&&f instanceof yde.EventEmitter&&f.emit("error",x)}else y&&y.apply(this,arguments)});try{return Object.defineProperty(b,n,{value:y}),b}catch{return y}}try{typeof o=="string"?s instanceof Array?(p.query.preparable={text:o,args:s},d=typeof a=="function",a=d?h(a):a):(p.query.text=o,a?(d=typeof a=="function",a=d?h(a):a):(d=typeof s=="function",s=d?h(s):s)):(typeof o.name=="string"?p.query.plan=o.name:o.values instanceof Array?p.query.preparable={text:o.text,args:o.values}:o.cursor?p.query.text=(u=o.cursor)===null||u===void 0?void 0:u.text:p.query.text=o.text,a?(d=typeof a=="function",a=h(a)):s?(d=typeof s=="function",s=d?h(s):s):(d=typeof o.callback=="function",o.callback=d?h(o.callback):o.callback))}catch{return r.apply(this,arguments)}arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3;try{f=r.apply(this,arguments)}catch(y){throw h()(y,void 0),y}if(!d){if(f instanceof Promise)return f.then(function(y){return h()(void 0,y),new c._Promise(function(b,x){b(y)})}).catch(function(y){return h()(y,void 0),new c._Promise(function(b,x){x(y)})});var g=f.text?f.text:"";if(f.cursor&&(g=(l=f.cursor)===null||l===void 0?void 0:l.text),g){var v={command:g,rowCount:0};h()(void 0,v)}}return f},t}ed.postgres6={versionSpecifier:"6.*",patch:K9e};ed.postgres={versionSpecifier:">=7.* <=8.*",patch:Y9e,publisherName:Yq};function Q9e(){V_.channel.registerMonkeyPatch("pg",ed.postgres6),V_.channel.registerMonkeyPatch("pg",ed.postgres)}ed.enable=Q9e});var _de=k(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0});_v.enable=_v.redis=void 0;var Qq=vi(),X9e=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;r.callback=Qq.channel.bindToContext(function(a,c){var u=process.hrtime(o),l=u[0]*1e3+u[1]/1e6|0;Qq.channel.publish("redis",{duration:l,address:i,commandObj:r,err:a,result:c,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};_v.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:X9e};function J9e(){Qq.channel.registerMonkeyPatch("redis",_v.redis)}_v.enable=J9e});var xde=k(Vp=>{"use strict";var wD=Vp&&Vp.__assign||function(){return wD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},wD.apply(this,arguments)};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.enable=Vp.tedious=void 0;var Xq=vi(),Z9e=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return Xq.channel.bindToContext(function(c,u,l){var d=process.hrtime(s);a=wD(wD({},a),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!c&&{rowCount:u,rows:l},query:{text:this.parametersByName.statement.value},error:c,duration:Math.ceil(d[0]*1e3+d[1]/1e6)}),Xq.channel.publish("tedious",a),o.call(this,c,u,l)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};Vp.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:Z9e};function e7e(){Xq.channel.registerMonkeyPatch("tedious",Vp.tedious)}Vp.enable=e7e});var Sde=k(Ra=>{"use strict";var t7e=Ra&&Ra.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r7e=Ra&&Ra.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.enable=Ra.winston2=Ra.winston3=void 0;var RD=vi(),n7e=function(t){var e=t.Logger.prototype.log,r,n=function(i,o,s){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",RD.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),e.apply(this,arguments)},t},i7e=function(t){var e=function(s,a){var c;return s.config.npm.levels[a]!=null?c="npm":s.config.syslog.levels[a]!=null?c="syslog":c="unknown",c},r=function(s){t7e(a,s);function a(c,u){var l=s.call(this,u)||this;return l.winston=c,l}return a.prototype.log=function(c,u){var l=c.message,d=c.level,p=c.meta,f=r7e(c,["message","level","meta"]);d=typeof Symbol.for=="function"?c[Symbol.for("level")]:d,l=c instanceof Error?c:l;var m=e(this.winston,d);p=p||{};for(var h in f)f.hasOwnProperty(h)&&(p[h]=f[h]);RD.channel.publish("winston",{message:l,level:d,levelKind:m,meta:p}),u()},a}(t.Transport);function n(){var s=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(s=arguments[0].levels);var a;for(var c in s)s.hasOwnProperty(c)&&(a=a===void 0||s[c]>s[a]?c:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(a=arguments[0].levels);var c;for(var u in a)a.hasOwnProperty(u)&&(c=c===void 0||a[u]>a[c]?u:c);var l=i.apply(this,arguments);l.add(new r(t,{level:c}));var d=l.configure;return l.configure=function(){d.apply(this,arguments),n.apply(this,arguments)},l};var o=t.configure;return t.configure=function(){o.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};Ra.winston3={versionSpecifier:"3.x",patch:i7e};Ra.winston2={versionSpecifier:"2.x",patch:n7e};function o7e(){RD.channel.registerMonkeyPatch("winston",Ra.winston2),RD.channel.registerMonkeyPatch("winston",Ra.winston3)}Ra.enable=o7e});var Lde=k(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.enable=xn.tedious=xn.pgPool=xn.pg=xn.winston=xn.redis=xn.mysql=xn.mongodb=xn.mongodbCore=xn.console=xn.bunyan=xn.azuresdk=void 0;var Ede=ade();xn.azuresdk=Ede;var Tde=ude();xn.bunyan=Tde;var Cde=dde();xn.console=Cde;var Ide=pde();xn.mongodbCore=Ide;var wde=fde();xn.mongodb=wde;var Rde=hde();xn.mysql=Rde;var Ade=vde();xn.pgPool=Ade;var Pde=bde();xn.pg=Pde;var kde=_de();xn.redis=kde;var Dde=xde();xn.tedious=Dde;var Nde=Sde();xn.winston=Nde;function s7e(){Tde.enable(),Cde.enable(),Ide.enable(),wde.enable(),Rde.enable(),Pde.enable(),Ade.enable(),kde.enable(),Nde.enable(),Ede.enable(),Dde.enable()}xn.enable=s7e});var kD=k(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.registerContextPreservation=Jm.IsInitialized=void 0;var Jq=Nn(),Mde=Ck();Jm.IsInitialized=!Mde.JsonConfig.getInstance().noDiagnosticChannel;var Zq="DiagnosticChannel";if(Jm.IsInitialized){Wu=Lde(),Ode=Mde.JsonConfig.getInstance().noPatchModules,AD=Ode.split(","),eH={bunyan:Wu.bunyan,console:Wu.console,mongodb:Wu.mongodb,mongodbCore:Wu.mongodbCore,mysql:Wu.mysql,redis:Wu.redis,pg:Wu.pg,pgPool:Wu.pgPool,winston:Wu.winston,azuresdk:Wu.azuresdk};for(PD in eH)AD.indexOf(PD)===-1&&(eH[PD].enable(),Jq.info(Zq,"Subscribed to "+PD+" events"));AD.length>0&&Jq.info(Zq,"Some modules will not be patched",AD)}else Jq.info(Zq,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Wu,Ode,AD,eH,PD;function a7e(t){if(Jm.IsInitialized){var e=vi();e.channel.addContextPreservation(t)}}Jm.registerContextPreservation=a7e});var $_=k((qwt,Fde)=>{"use strict";Fde.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Qo=k((nH,Ude)=>{"use strict";var eh=nH&&nH.__assign||function(){return eh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},eh.apply(this,arguments)},c7e=require("http"),tH=require("https"),rH=require("url"),Zm=require("constants"),xv=Nn(),W_=$_(),u7e=Ck(),l7e=function(){function t(){t._addCloseHandler()}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",o=r.split(";"),s=0;s<o.length;s++){var r=o[s];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,o[s].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,c){return String.fromCharCode(a>>c&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return Object.prototype.toString.call(e)==="[object Error]"},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,o=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){xv.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",o=e[n],s=typeof o;if(t.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){xv.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(o)?o:t.extractObject(o);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(c){i=o.constructor.name.toString()+" (Error: "+c.message+")",xv.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));try{if(o.test(new rH.URL(r).hostname))return!1}catch{}}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[W_.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==r)return s[1]}},t.makeRequest=function(e,r,n,i,o,s){o===void 0&&(o=!0),s===void 0&&(s=!0),r&&r.indexOf("//")===0&&(r="https:"+r);var a=new rH.URL(r),c=eh(eh({},n),{host:a.hostname,port:a.port,path:a.pathname}),u=void 0;if(o&&(a.protocol==="https:"&&(u=e.proxyHttpsUrl||void 0),a.protocol==="http:"&&(u=e.proxyHttpUrl||void 0),u)){u.indexOf("//")===0&&(u="http:"+u);try{var l=new rH.URL(u);l.protocol==="https:"?(xv.info("Proxies that use HTTPS are not supported"),u=void 0):c=eh(eh({},c),{host:l.hostname,port:l.port||"80",path:r,headers:eh(eh({},c.headers),{Host:a.hostname})})}catch{xv.warn("Wrong proxy URL provided")}}var d=a.protocol==="https:"&&!u;return s&&(d&&e.httpsAgent!==void 0?c.agent=e.httpsAgent:!d&&e.httpAgent!==void 0?c.agent=e.httpAgent:d&&(c.agent=t._useKeepAlive?t.keepAliveAgent:t.tlsRestrictedAgent)),d?tH.request(c,i):c7e.request(c,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(o){xv.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(W_.requestContextHeader,W_.requestContextSourceKey+"="+e.config.correlationId)},t.dumpObj=function(e){if(e)try{var r=Object.prototype.toString.call(e),n="";return r==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":n=this.stringify(e),r+n}catch{return e.toString()}},t.stringify=function(e){try{return JSON.stringify(e)}catch(r){xv.warn("Failed to serialize payload",r,e)}},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),o=W_.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||r.setHeader(W_.requestContextHeader,n+","+W_.requestContextSourceKey+"="+e.config.correlationId)},t._addCloseHandler=function(){t._listenerAttached||(process.on("exit",function(){t.isNodeExit=!0,t._useKeepAlive=!1}),t._listenerAttached=!0)},t._useKeepAlive=!u7e.JsonConfig.getInstance().noHttpAgentKeepAlive,t._listenerAttached=!1,t.MAX_PROPERTY_LENGTH=8192,t.keepAliveAgent=new tH.Agent({keepAlive:!0,maxSockets:25,secureOptions:Zm.SSL_OP_NO_SSLv2|Zm.SSL_OP_NO_SSLv3|Zm.SSL_OP_NO_TLSv1|Zm.SSL_OP_NO_TLSv1_1}),t.tlsRestrictedAgent=new tH.Agent({secureOptions:Zm.SSL_OP_NO_SSLv2|Zm.SSL_OP_NO_SSLv3|Zm.SSL_OP_NO_TLSv1|Zm.SSL_OP_NO_TLSv1_1}),t.isNodeExit=!1,t}();Ude.exports=l7e});var Sv=k((Hwt,Bde)=>{"use strict";var iH=Qo(),d7e=function(){function t(){}return t.queryCorrelationId=function(e,r){},t.cancelCorrelationIdQuery=function(e,r){},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+iH.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_")break}if(i<=1)return t.generateRootId();for(r=iH.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.HTTP_TIMEOUT=2500,t.requestIdMaxLength=1024,t.currentRootId=iH.randomu32(),t}();Bde.exports=d7e});var DD=k((Gwt,qde)=>{"use strict";var Xo=Qo(),p7e=Sv(),f7e=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=Xo.w3cTraceId(),this.spanId=Xo.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Xo.w3cTraceId(),this.spanId=Xo.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=Xo.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Xo.w3cTraceId(),this.spanId=Xo.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=Xo.w3cTraceId(),this.spanId=Xo.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=Xo.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=Xo.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=Xo.w3cTraceId().substr(0,16),this.traceId=Xo.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var o=p7e.getRootId(r);t.isValidTraceId(o)||(this.legacyRootId=o,o=Xo.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=o,this.spanId=r}else this.traceId=Xo.w3cTraceId(),this.spanId=Xo.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.formatOpenTelemetryTraceFlags=function(e){var r="0"+e.toString(16);return r.substring(r.length-2)},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=Xo.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();qde.exports=f7e});var oH=k((jwt,Hde)=>{"use strict";var m7e=function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),o=!!n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),s=!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return o&&s}else if(r.length==1)return!!e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],c=a.trim();if(c.length!==0){var u=c.split("=");if(u.length!==2||!t.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(c)}}return r},t.strict=!0,t}();Hde.exports=m7e});var $p=k((zwt,Gde)=>{"use strict";var h7e=function(){function t(){}return t}();Gde.exports=h7e});var zde=k((sH,jde)=>{"use strict";var g7e=sH&&sH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v7e=$p(),y7e=function(t){g7e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(v7e);jde.exports=y7e});var aH=k((Vwt,Vde)=>{"use strict";var b7e=function(){function t(){}return t}();Vde.exports=b7e});var Wde=k(($wt,$de)=>{"use strict";var _7e=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();$de.exports=_7e});var Yde=k((cH,Kde)=>{"use strict";var x7e=cH&&cH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S7e=aH(),E7e=function(t){x7e(e,t);function e(){return t.call(this)||this}return e}(S7e);Kde.exports=E7e});var lH=k((Wwt,Qde)=>{"use strict";var uH;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(uH||(uH={}));Qde.exports=uH});var Jde=k((Kwt,Xde)=>{"use strict";var T7e=lH(),C7e=function(){function t(){this.kind=T7e.Measurement}return t}();Xde.exports=C7e});var epe=k((Ywt,Zde)=>{"use strict";var I7e=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();Zde.exports=I7e});var pH=k((dH,tpe)=>{"use strict";var w7e=dH&&dH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R7e=$p(),A7e=function(t){w7e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(R7e);tpe.exports=A7e});var npe=k((fH,rpe)=>{"use strict";var P7e=fH&&fH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k7e=$p(),D7e=function(t){P7e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(k7e);rpe.exports=D7e});var ope=k((Qwt,ipe)=>{"use strict";var N7e=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();ipe.exports=N7e});var ape=k((mH,spe)=>{"use strict";var L7e=mH&&mH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O7e=$p(),M7e=function(t){L7e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(O7e);spe.exports=M7e});var upe=k((hH,cpe)=>{"use strict";var F7e=hH&&hH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U7e=$p(),B7e=function(t){F7e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(U7e);cpe.exports=B7e});var dpe=k((gH,lpe)=>{"use strict";var q7e=gH&&gH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H7e=pH(),G7e=function(t){q7e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(H7e);lpe.exports=G7e});var fpe=k((vH,ppe)=>{"use strict";var j7e=vH&&vH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z7e=$p(),V7e=function(t){j7e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}(z7e);ppe.exports=V7e});var hpe=k((yH,mpe)=>{"use strict";var $7e=yH&&yH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W7e=$p(),K7e=function(t){$7e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(W7e);mpe.exports=K7e});var vpe=k((Xwt,gpe)=>{"use strict";var bH;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(bH||(bH={}));gpe.exports=bH});var bpe=k((Jwt,ype)=>{"use strict";var Y7e=function(){function t(){}return t}();ype.exports=Y7e});var _H=k(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.AvailabilityData=zde();Xi.Base=aH();Xi.ContextTagKeys=Wde();Xi.Data=Yde();Xi.DataPoint=Jde();Xi.DataPointType=lH();Xi.Domain=$p();Xi.Envelope=epe();Xi.EventData=pH();Xi.ExceptionData=npe();Xi.ExceptionDetails=ope();Xi.MessageData=ape();Xi.MetricData=upe();Xi.PageViewData=dpe();Xi.RemoteDependencyData=fpe();Xi.RequestData=hpe();Xi.SeverityLevel=vpe();Xi.StackFrame=bpe()});var _pe=k(K_=>{"use strict";Object.defineProperty(K_,"__esModule",{value:!0});K_.domainSupportsProperties=K_.RemoteDependencyDataConstants=void 0;var Ev=_H(),Q7e=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();K_.RemoteDependencyDataConstants=Q7e;function X7e(t){return"properties"in t||t instanceof Ev.EventData||t instanceof Ev.ExceptionData||t instanceof Ev.MessageData||t instanceof Ev.MetricData||t instanceof Ev.PageViewData||t instanceof Ev.RemoteDependencyData||t instanceof Ev.RequestData}K_.domainSupportsProperties=X7e});var Spe=k(xpe=>{"use strict";Object.defineProperty(xpe,"__esModule",{value:!0})});var Tpe=k(Epe=>{"use strict";Object.defineProperty(Epe,"__esModule",{value:!0})});var Ipe=k(Cpe=>{"use strict";Object.defineProperty(Cpe,"__esModule",{value:!0})});var Rpe=k(wpe=>{"use strict";Object.defineProperty(wpe,"__esModule",{value:!0})});var Ppe=k(Ape=>{"use strict";Object.defineProperty(Ape,"__esModule",{value:!0})});var Dpe=k(kpe=>{"use strict";Object.defineProperty(kpe,"__esModule",{value:!0})});var Lpe=k(Npe=>{"use strict";Object.defineProperty(Npe,"__esModule",{value:!0})});var Mpe=k(Ope=>{"use strict";Object.defineProperty(Ope,"__esModule",{value:!0})});var Upe=k(Fpe=>{"use strict";Object.defineProperty(Fpe,"__esModule",{value:!0})});var qpe=k(Bpe=>{"use strict";Object.defineProperty(Bpe,"__esModule",{value:!0})});var Gpe=k(Hpe=>{"use strict";Object.defineProperty(Hpe,"__esModule",{value:!0})});var zpe=k(jpe=>{"use strict";Object.defineProperty(jpe,"__esModule",{value:!0})});var Vpe=k(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.TelemetryType=Ku.TelemetryTypeString=Ku.baseTypeToTelemetryType=Ku.telemetryTypeToBaseType=void 0;function J7e(t){switch(t){case Jo.Event:return"EventData";case Jo.Exception:return"ExceptionData";case Jo.Trace:return"MessageData";case Jo.Metric:return"MetricData";case Jo.Request:return"RequestData";case Jo.Dependency:return"RemoteDependencyData";case Jo.Availability:return"AvailabilityData";case Jo.PageView:return"PageViewData"}}Ku.telemetryTypeToBaseType=J7e;function Z7e(t){switch(t){case"EventData":return Jo.Event;case"ExceptionData":return Jo.Exception;case"MessageData":return Jo.Trace;case"MetricData":return Jo.Metric;case"RequestData":return Jo.Request;case"RemoteDependencyData":return Jo.Dependency;case"AvailabilityData":return Jo.Availability;case"PageViewData":return Jo.PageView}}Ku.baseTypeToTelemetryType=Z7e;Ku.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var Jo;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})(Jo=Ku.TelemetryType||(Ku.TelemetryType={}))});var $pe=k(fo=>{"use strict";var eUe=fo&&fo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uc=fo&&fo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&eUe(e,t,r)};Object.defineProperty(fo,"__esModule",{value:!0});uc(Spe(),fo);uc(Tpe(),fo);uc(Ipe(),fo);uc(Rpe(),fo);uc(Ppe(),fo);uc(Dpe(),fo);uc(Lpe(),fo);uc(Mpe(),fo);uc(Upe(),fo);uc(qpe(),fo);uc(Gpe(),fo);uc(zpe(),fo);uc(Vpe(),fo)});var Kpe=k(Wpe=>{"use strict";Object.defineProperty(Wpe,"__esModule",{value:!0})});var Qpe=k(Ype=>{"use strict";Object.defineProperty(Ype,"__esModule",{value:!0})});var Jpe=k(Xpe=>{"use strict";Object.defineProperty(Xpe,"__esModule",{value:!0})});var efe=k(Zpe=>{"use strict";Object.defineProperty(Zpe,"__esModule",{value:!0})});var rfe=k(tfe=>{"use strict";Object.defineProperty(tfe,"__esModule",{value:!0})});var ife=k(nfe=>{"use strict";Object.defineProperty(nfe,"__esModule",{value:!0})});var sfe=k(ofe=>{"use strict";Object.defineProperty(ofe,"__esModule",{value:!0})});var cfe=k(afe=>{"use strict";Object.defineProperty(afe,"__esModule",{value:!0})});var ufe=k(Aa=>{"use strict";var tUe=Aa&&Aa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),th=Aa&&Aa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&tUe(e,t,r)};Object.defineProperty(Aa,"__esModule",{value:!0});th(Kpe(),Aa);th(Qpe(),Aa);th(Jpe(),Aa);th(efe(),Aa);th(rfe(),Aa);th(ife(),Aa);th(sfe(),Aa);th(cfe(),Aa)});var Ts=k(td=>{"use strict";var rUe=td&&td.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ND=td&&td.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rUe(e,t,r)};Object.defineProperty(td,"__esModule",{value:!0});ND(_pe(),td);ND(_H(),td);ND($pe(),td);ND(ufe(),td)});var xH=k((CRt,lfe)=>{"use strict";var nUe=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var o in r)i[o]=r[o]&&r[o].toString&&r[o].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();lfe.exports=nUe});var ti=k(Oe=>{"use strict";var Yu;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=Oe.WEB_INSTRUMENTATION_DEFAULT_SOURCE=Oe.TIME_SINCE_ENQUEUED=Oe.ENQUEUED_TIME=Oe.MessageBusDestination=Oe.MicrosoftEventHub=Oe.AzNamespace=Oe.HttpRequestCookieNames=Oe.StatsbeatNetworkCategory=Oe.StatsbeatFeatureType=Oe.StatsbeatInstrumentation=Oe.StatsbeatFeature=Oe.StatsbeatCounter=Oe.StatsbeatAttach=Oe.StatsbeatResourceProvider=Oe.StatsbeatTelemetryName=Oe.HeartBeatMetricName=Oe.DependencyTypeName=Oe.TelemetryTypeStringToQuickPulseDocumentType=Oe.TelemetryTypeStringToQuickPulseType=Oe.QuickPulseType=Oe.QuickPulseDocumentType=Oe.PerformanceToQuickPulseCounter=Oe.MetricId=Oe.PerformanceCounter=Oe.QuickPulseCounter=Oe.DEFAULT_LIVEMETRICS_HOST=Oe.DEFAULT_LIVEMETRICS_ENDPOINT=Oe.DEFAULT_BREEZE_ENDPOINT=Oe.APPLICATION_INSIGHTS_SDK_VERSION=void 0;Oe.APPLICATION_INSIGHTS_SDK_VERSION="2.9.1";Oe.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";Oe.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";Oe.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var Cs;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(Cs=Oe.QuickPulseCounter||(Oe.QuickPulseCounter={}));var LD;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(LD=Oe.PerformanceCounter||(Oe.PerformanceCounter={}));var iUe;(function(t){t.REQUESTS_DURATION="requests/duration",t.DEPENDENCIES_DURATION="dependencies/duration",t.EXCEPTIONS_COUNT="exceptions/count",t.TRACES_COUNT="traces/count"})(iUe=Oe.MetricId||(Oe.MetricId={}));Oe.PerformanceToQuickPulseCounter=(Yu={},Yu[LD.PROCESSOR_TIME]=Cs.PROCESSOR_TIME,Yu[LD.REQUEST_RATE]=Cs.REQUEST_RATE,Yu[LD.REQUEST_DURATION]=Cs.REQUEST_DURATION,Yu[Cs.COMMITTED_BYTES]=Cs.COMMITTED_BYTES,Yu[Cs.REQUEST_FAILURE_RATE]=Cs.REQUEST_FAILURE_RATE,Yu[Cs.DEPENDENCY_RATE]=Cs.DEPENDENCY_RATE,Yu[Cs.DEPENDENCY_FAILURE_RATE]=Cs.DEPENDENCY_FAILURE_RATE,Yu[Cs.DEPENDENCY_DURATION]=Cs.DEPENDENCY_DURATION,Yu[Cs.EXCEPTION_RATE]=Cs.EXCEPTION_RATE,Yu);Oe.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};Oe.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};Oe.TelemetryTypeStringToQuickPulseType={EventData:Oe.QuickPulseType.Event,ExceptionData:Oe.QuickPulseType.Exception,MessageData:Oe.QuickPulseType.Trace,MetricData:Oe.QuickPulseType.Metric,RequestData:Oe.QuickPulseType.Request,RemoteDependencyData:Oe.QuickPulseType.Dependency,AvailabilityData:Oe.QuickPulseType.Availability,PageViewData:Oe.QuickPulseType.PageView};Oe.TelemetryTypeStringToQuickPulseDocumentType={EventData:Oe.QuickPulseDocumentType.Event,ExceptionData:Oe.QuickPulseDocumentType.Exception,MessageData:Oe.QuickPulseDocumentType.Trace,MetricData:Oe.QuickPulseDocumentType.Metric,RequestData:Oe.QuickPulseDocumentType.Request,RemoteDependencyData:Oe.QuickPulseDocumentType.Dependency,AvailabilityData:Oe.QuickPulseDocumentType.Availability,PageViewData:Oe.QuickPulseDocumentType.PageView};Oe.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};Oe.HeartBeatMetricName="HeartbeatState";Oe.StatsbeatTelemetryName="Statsbeat";Oe.StatsbeatResourceProvider={appsvc:"appsvc",aks:"aks",functions:"functions",vm:"vm",unknown:"unknown"};Oe.StatsbeatAttach={codeless:"codeless",sdk:"sdk"};Oe.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"};var oUe;(function(t){t[t.NONE=0]="NONE",t[t.DISK_RETRY=1]="DISK_RETRY",t[t.AAD_HANDLING=2]="AAD_HANDLING",t[t.WEB_SNIPPET=4]="WEB_SNIPPET"})(oUe=Oe.StatsbeatFeature||(Oe.StatsbeatFeature={}));var sUe;(function(t){t[t.NONE=0]="NONE",t[t.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",t[t.MONGODB=2]="MONGODB",t[t.MYSQL=4]="MYSQL",t[t.REDIS=8]="REDIS",t[t.POSTGRES=16]="POSTGRES",t[t.BUNYAN=32]="BUNYAN",t[t.WINSTON=64]="WINSTON",t[t.CONSOLE=128]="CONSOLE"})(sUe=Oe.StatsbeatInstrumentation||(Oe.StatsbeatInstrumentation={}));var aUe;(function(t){t[t.Feature=0]="Feature",t[t.Instrumentation=1]="Instrumentation"})(aUe=Oe.StatsbeatFeatureType||(Oe.StatsbeatFeatureType={}));var cUe;(function(t){t[t.Breeze=0]="Breeze",t[t.Quickpulse=1]="Quickpulse"})(cUe=Oe.StatsbeatNetworkCategory||(Oe.StatsbeatNetworkCategory={}));var uUe;(function(t){t.SESSION="ai_session",t.USER="ai_user",t.AUTH_USER="ai_authUser"})(uUe=Oe.HttpRequestCookieNames||(Oe.HttpRequestCookieNames={}));Oe.AzNamespace="az.namespace";Oe.MicrosoftEventHub="Microsoft.EventHub";Oe.MessageBusDestination="message_bus.destination";Oe.ENQUEUED_TIME="enqueuedTime";Oe.TIME_SINCE_ENQUEUED="timeSinceEnqueued";Oe.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";Oe.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"});var CH=k((TH,dfe)=>{"use strict";var lUe=TH&&TH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OD=require("url"),dUe=Ts(),SH=Qo(),lc=$_(),pUe=xH(),rh=Sv(),fUe=oH(),EH=DD(),mUe=Nn(),MD=ti(),hUe=function(t){lUe(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n=this.method;try{n+=" "+new OD.URL(this.url).pathname}catch{}var i={id:this.requestId,name:n,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?i.time=r.time:this.startTime&&(i.time=new Date(this.startTime)),r){for(var o in r)i[o]||(i[o]=r[o]);if(r.properties)for(var o in r.properties)i.properties[o]=r.properties[o]}return i},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId(MD.HttpRequestCookieNames.SESSION),n[e.keys.userId]=r[e.keys.userId]||this._getId(MD.HttpRequestCookieNames.USER),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId(MD.HttpRequestCookieNames.AUTH_USER),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){if(r[e.keys.operationName])return r[e.keys.operationName];var n="";try{n=new OD.URL(this.url).pathname}catch{}var i=this.method;return n&&(i+=" "+n),i},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",o=i+"://"+r.headers.host+"/",s="",a="";try{var c=new OD.URL(r.url,o);s=c.pathname,a=c.search}catch{}var u=OD.format({protocol:i,host:r.headers.host,pathname:s,search:a});return u},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=r.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"";if(r===MD.HttpRequestCookieNames.AUTH_USER)try{n=decodeURI(n)}catch(o){n="",mUe.warn("Could not decode the auth cookie with error: ",SH.dumpObj(o))}var i=e.parseId(SH.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=SH.getCorrelationContextTarget(r,lc.requestContextSourceKey),r.headers){var i=r.headers[lc.traceStateHeader]?r.headers[lc.traceStateHeader].toString():null,o=r.headers[lc.traceparentHeader]?r.headers[lc.traceparentHeader].toString():null,s=r.headers[lc.requestIdHeader]?r.headers[lc.requestIdHeader].toString():null,a=r.headers[lc.parentIdHeader]?r.headers[lc.parentIdHeader].toString():null,c=r.headers[lc.rootIdHeader]?r.headers[lc.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[lc.correlationContextHeader]?r.headers[lc.correlationContextHeader].toString():null,rh.w3cEnabled&&(o||i)?(this.traceparent=new EH(o?o.toString():null),this.tracestate=o&&i&&new fUe(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?rh.w3cEnabled?(this.traceparent=new EH(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=rh.generateRequestId(this.parentId),this.operationId=rh.getRootId(this.requestId)):rh.w3cEnabled?(this.traceparent=new EH,this.traceparent.parentId=a,this.traceparent.legacyRootId=c||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=rh.generateRequestId(c||this.parentId),this.correlationContextHeader=null,this.operationId=rh.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=rh.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new dUe.ContextTagKeys,e}(pUe);dfe.exports=hUe});var Rfe=k((Ft,wfe)=>{Ft=wfe.exports=vr;var en;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?en=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:en=function(){};Ft.SEMVER_SPEC_VERSION="2.0.0";var zC=256,FD=Number.MAX_SAFE_INTEGER||9007199254740991,IH=16,gUe=zC-6,VC=Ft.re=[],Sn=Ft.safeRe=[],Te=Ft.src=[],dr=0,kH="[a-zA-Z0-9-]",wH=[["\\s",1],["\\d",zC],[kH,gUe]];function jD(t){for(var e=0;e<wH.length;e++){var r=wH[e][0],n=wH[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var Y_=dr++;Te[Y_]="0|[1-9]\\d*";var Q_=dr++;Te[Q_]="\\d+";var DH=dr++;Te[DH]="\\d*[a-zA-Z-]"+kH+"*";var ffe=dr++;Te[ffe]="("+Te[Y_]+")\\.("+Te[Y_]+")\\.("+Te[Y_]+")";var mfe=dr++;Te[mfe]="("+Te[Q_]+")\\.("+Te[Q_]+")\\.("+Te[Q_]+")";var RH=dr++;Te[RH]="(?:"+Te[Y_]+"|"+Te[DH]+")";var AH=dr++;Te[AH]="(?:"+Te[Q_]+"|"+Te[DH]+")";var NH=dr++;Te[NH]="(?:-("+Te[RH]+"(?:\\."+Te[RH]+")*))";var LH=dr++;Te[LH]="(?:-?("+Te[AH]+"(?:\\."+Te[AH]+")*))";var PH=dr++;Te[PH]=kH+"+";var WC=dr++;Te[WC]="(?:\\+("+Te[PH]+"(?:\\."+Te[PH]+")*))";var OH=dr++,hfe="v?"+Te[ffe]+Te[NH]+"?"+Te[WC]+"?";Te[OH]="^"+hfe+"$";var MH="[v=\\s]*"+Te[mfe]+Te[LH]+"?"+Te[WC]+"?",FH=dr++;Te[FH]="^"+MH+"$";var tx=dr++;Te[tx]="((?:<|>)?=?)";var UD=dr++;Te[UD]=Te[Q_]+"|x|X|\\*";var BD=dr++;Te[BD]=Te[Y_]+"|x|X|\\*";var Tv=dr++;Te[Tv]="[v=\\s]*("+Te[BD]+")(?:\\.("+Te[BD]+")(?:\\.("+Te[BD]+")(?:"+Te[NH]+")?"+Te[WC]+"?)?)?";var J_=dr++;Te[J_]="[v=\\s]*("+Te[UD]+")(?:\\.("+Te[UD]+")(?:\\.("+Te[UD]+")(?:"+Te[LH]+")?"+Te[WC]+"?)?)?";var gfe=dr++;Te[gfe]="^"+Te[tx]+"\\s*"+Te[Tv]+"$";var vfe=dr++;Te[vfe]="^"+Te[tx]+"\\s*"+Te[J_]+"$";var yfe=dr++;Te[yfe]="(?:^|[^\\d])(\\d{1,"+IH+"})(?:\\.(\\d{1,"+IH+"}))?(?:\\.(\\d{1,"+IH+"}))?(?:$|[^\\d])";var zD=dr++;Te[zD]="(?:~>?)";var Z_=dr++;Te[Z_]="(\\s*)"+Te[zD]+"\\s+";VC[Z_]=new RegExp(Te[Z_],"g");Sn[Z_]=new RegExp(jD(Te[Z_]),"g");var vUe="$1~",bfe=dr++;Te[bfe]="^"+Te[zD]+Te[Tv]+"$";var _fe=dr++;Te[_fe]="^"+Te[zD]+Te[J_]+"$";var VD=dr++;Te[VD]="(?:\\^)";var ex=dr++;Te[ex]="(\\s*)"+Te[VD]+"\\s+";VC[ex]=new RegExp(Te[ex],"g");Sn[ex]=new RegExp(jD(Te[ex]),"g");var yUe="$1^",xfe=dr++;Te[xfe]="^"+Te[VD]+Te[Tv]+"$";var Sfe=dr++;Te[Sfe]="^"+Te[VD]+Te[J_]+"$";var UH=dr++;Te[UH]="^"+Te[tx]+"\\s*("+MH+")$|^$";var BH=dr++;Te[BH]="^"+Te[tx]+"\\s*("+hfe+")$|^$";var Cv=dr++;Te[Cv]="(\\s*)"+Te[tx]+"\\s*("+MH+"|"+Te[Tv]+")";VC[Cv]=new RegExp(Te[Cv],"g");Sn[Cv]=new RegExp(jD(Te[Cv]),"g");var bUe="$1$2$3",Efe=dr++;Te[Efe]="^\\s*("+Te[Tv]+")\\s+-\\s+("+Te[Tv]+")\\s*$";var Tfe=dr++;Te[Tfe]="^\\s*("+Te[J_]+")\\s+-\\s+("+Te[J_]+")\\s*$";var Cfe=dr++;Te[Cfe]="(<|>)?=?\\s*\\*";for(rd=0;rd<dr;rd++)en(rd,Te[rd]),VC[rd]||(VC[rd]=new RegExp(Te[rd]),Sn[rd]=new RegExp(jD(Te[rd])));var rd;Ft.parse=Iv;function Iv(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof vr)return t;if(typeof t!="string"||t.length>zC)return null;var r=e.loose?Sn[FH]:Sn[OH];if(!r.test(t))return null;try{return new vr(t,e)}catch{return null}}Ft.valid=_Ue;function _Ue(t,e){var r=Iv(t,e);return r?r.version:null}Ft.clean=xUe;function xUe(t,e){var r=Iv(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Ft.SemVer=vr;function vr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof vr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>zC)throw new TypeError("version is longer than "+zC+" characters");if(!(this instanceof vr))return new vr(t,e);en("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?Sn[FH]:Sn[OH]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>FD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>FD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>FD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<FD)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}vr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};vr.prototype.toString=function(){return this.version};vr.prototype.compare=function(t){return en("SemVer.compare",this.version,this.options,t),t instanceof vr||(t=new vr(t,this.options)),this.compareMain(t)||this.comparePre(t)};vr.prototype.compareMain=function(t){return t instanceof vr||(t=new vr(t,this.options)),X_(this.major,t.major)||X_(this.minor,t.minor)||X_(this.patch,t.patch)};vr.prototype.comparePre=function(t){if(t instanceof vr||(t=new vr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(en("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return X_(r,n)}while(++e)};vr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Ft.inc=SUe;function SUe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new vr(t,r).inc(e,n).version}catch{return null}}Ft.diff=EUe;function EUe(t,e){if(qH(t,e))return null;var r=Iv(t),n=Iv(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Ft.compareIdentifiers=X_;var pfe=/^[0-9]+$/;function X_(t,e){var r=pfe.test(t),n=pfe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Ft.rcompareIdentifiers=TUe;function TUe(t,e){return X_(e,t)}Ft.major=CUe;function CUe(t,e){return new vr(t,e).major}Ft.minor=IUe;function IUe(t,e){return new vr(t,e).minor}Ft.patch=wUe;function wUe(t,e){return new vr(t,e).patch}Ft.compare=Wp;function Wp(t,e,r){return new vr(t,r).compare(new vr(e,r))}Ft.compareLoose=RUe;function RUe(t,e){return Wp(t,e,!0)}Ft.rcompare=AUe;function AUe(t,e,r){return Wp(e,t,r)}Ft.sort=PUe;function PUe(t,e){return t.sort(function(r,n){return Ft.compare(r,n,e)})}Ft.rsort=kUe;function kUe(t,e){return t.sort(function(r,n){return Ft.rcompare(r,n,e)})}Ft.gt=$C;function $C(t,e,r){return Wp(t,e,r)>0}Ft.lt=qD;function qD(t,e,r){return Wp(t,e,r)<0}Ft.eq=qH;function qH(t,e,r){return Wp(t,e,r)===0}Ft.neq=Ife;function Ife(t,e,r){return Wp(t,e,r)!==0}Ft.gte=HH;function HH(t,e,r){return Wp(t,e,r)>=0}Ft.lte=GH;function GH(t,e,r){return Wp(t,e,r)<=0}Ft.cmp=HD;function HD(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return qH(t,r,n);case"!=":return Ife(t,r,n);case">":return $C(t,r,n);case">=":return HH(t,r,n);case"<":return qD(t,r,n);case"<=":return GH(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Ft.Comparator=zc;function zc(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof zc){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof zc))return new zc(t,e);t=t.trim().split(/\s+/).join(" "),en("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===KC?this.value="":this.value=this.operator+this.semver.version,en("comp",this)}var KC={};zc.prototype.parse=function(t){var e=this.options.loose?Sn[UH]:Sn[BH],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new vr(r[2],this.options.loose):this.semver=KC};zc.prototype.toString=function(){return this.value};zc.prototype.test=function(t){return en("Comparator.test",t,this.options.loose),this.semver===KC?!0:(typeof t=="string"&&(t=new vr(t,this.options)),HD(t,this.operator,this.semver,this.options))};zc.prototype.intersects=function(t,e){if(!(t instanceof zc))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new ri(t.value,e),GD(this.value,r,e);if(t.operator==="")return r=new ri(this.value,e),GD(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=HD(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=HD(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};Ft.Range=ri;function ri(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ri)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new ri(t.raw,e);if(t instanceof zc)return new ri(t.value,e);if(!(this instanceof ri))return new ri(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}ri.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};ri.prototype.toString=function(){return this.range};ri.prototype.parseRange=function(t){var e=this.options.loose,r=e?Sn[Tfe]:Sn[Efe];t=t.replace(r,HUe),en("hyphen replace",t),t=t.replace(Sn[Cv],bUe),en("comparator trim",t,Sn[Cv]),t=t.replace(Sn[Z_],vUe),t=t.replace(Sn[ex],yUe);var n=e?Sn[UH]:Sn[BH],i=t.split(" ").map(function(o){return NUe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new zc(o,this.options)},this),i};ri.prototype.intersects=function(t,e){if(!(t instanceof ri))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Ft.toComparators=DUe;function DUe(t,e){return new ri(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function NUe(t,e){return en("comp",t,e),t=MUe(t,e),en("caret",t),t=LUe(t,e),en("tildes",t),t=UUe(t,e),en("xrange",t),t=qUe(t,e),en("stars",t),t}function ea(t){return!t||t.toLowerCase()==="x"||t==="*"}function LUe(t,e){return t.trim().split(/\s+/).map(function(r){return OUe(r,e)}).join(" ")}function OUe(t,e){var r=e.loose?Sn[_fe]:Sn[bfe];return t.replace(r,function(n,i,o,s,a){en("tilde",t,n,i,o,s,a);var c;return ea(i)?c="":ea(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ea(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(en("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",en("tilde return",c),c})}function MUe(t,e){return t.trim().split(/\s+/).map(function(r){return FUe(r,e)}).join(" ")}function FUe(t,e){en("caret",t,e);var r=e.loose?Sn[Sfe]:Sn[xfe];return t.replace(r,function(n,i,o,s,a){en("caret",t,n,i,o,s,a);var c;return ea(i)?c="":ea(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ea(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(en("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(en("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),en("caret return",c),c})}function UUe(t,e){return en("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return BUe(r,e)}).join(" ")}function BUe(t,e){t=t.trim();var r=e.loose?Sn[vfe]:Sn[gfe];return t.replace(r,function(n,i,o,s,a,c){en("xRange",t,n,i,o,s,a,c);var u=ea(o),l=u||ea(s),d=l||ea(a),p=d;return i==="="&&p&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),en("xRange return",n),n})}function qUe(t,e){return en("replaceStars",t,e),t.trim().replace(Sn[Cfe],"")}function HUe(t,e,r,n,i,o,s,a,c,u,l,d,p){return ea(r)?e="":ea(n)?e=">="+r+".0.0":ea(i)?e=">="+r+"."+n+".0":e=">="+e,ea(c)?a="":ea(u)?a="<"+(+c+1)+".0.0":ea(l)?a="<"+c+"."+(+u+1)+".0":d?a="<="+c+"."+u+"."+l+"-"+d:a="<="+a,(e+" "+a).trim()}ri.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new vr(t,this.options));for(var e=0;e<this.set.length;e++)if(GUe(this.set[e],t,this.options))return!0;return!1};function GUe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(en(t[n].semver),t[n].semver!==KC&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Ft.satisfies=GD;function GD(t,e,r){try{e=new ri(e,r)}catch{return!1}return e.test(t)}Ft.maxSatisfying=jUe;function jUe(t,e,r){var n=null,i=null;try{var o=new ri(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new vr(n,r))}),n}Ft.minSatisfying=zUe;function zUe(t,e,r){var n=null,i=null;try{var o=new ri(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new vr(n,r))}),n}Ft.minVersion=VUe;function VUe(t,e){t=new ri(t,e);var r=new vr("0.0.0");if(t.test(r)||(r=new vr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new vr(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||$C(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Ft.validRange=$Ue;function $Ue(t,e){try{return new ri(t,e).range||"*"}catch{return null}}Ft.ltr=WUe;function WUe(t,e,r){return jH(t,e,"<",r)}Ft.gtr=KUe;function KUe(t,e,r){return jH(t,e,">",r)}Ft.outside=jH;function jH(t,e,r,n){t=new vr(t,n),e=new ri(e,n);var i,o,s,a,c;switch(r){case">":i=$C,o=GH,s=qD,a=">",c=">=";break;case"<":i=qD,o=HH,s=$C,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(GD(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],d=null,p=null;if(l.forEach(function(f){f.semver===KC&&(f=new zc(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0}Ft.prerelease=YUe;function YUe(t,e){var r=Iv(t,e);return r&&r.prerelease.length?r.prerelease:null}Ft.intersects=QUe;function QUe(t,e,r){return t=new ri(t,r),e=new ri(e,r),t.intersects(e)}Ft.coerce=XUe;function XUe(t){if(t instanceof vr)return t;if(typeof t!="string")return null;var e=t.match(Sn[yfe]);return e==null?null:Iv(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var $D=k((wRt,kfe)=>{"use strict";function zH(t){return typeof t=="function"}var ta=console.error.bind(console);function YC(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function QC(t){t&&t.logger&&(zH(t.logger)?ta=t.logger:ta("new logger isn't a function, not replacing"))}function Afe(t,e,r){if(!t||!t[e]){ta("no original function "+e+" to wrap");return}if(!r){ta("no wrapper function"),ta(new Error().stack);return}if(!zH(t[e])||!zH(r)){ta("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return YC(i,"__original",n),YC(i,"__unwrap",function(){t[e]===i&&YC(t,e,n)}),YC(i,"__wrapped",!0),YC(t,e,i),i}function JUe(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{ta("must provide one or more modules to patch"),ta(new Error().stack);return}if(!(e&&Array.isArray(e))){ta("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){Afe(n,i,r)})})}function Pfe(t,e){if(!t||!t[e]){ta("no function to unwrap."),ta(new Error().stack);return}if(!t[e].__unwrap)ta("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function ZUe(t,e){if(t)Array.isArray(t)||(t=[t]);else{ta("must provide one or more modules to patch"),ta(new Error().stack);return}if(!(e&&Array.isArray(e))){ta("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){Pfe(r,n)})})}QC.wrap=Afe;QC.massWrap=JUe;QC.unwrap=Pfe;QC.massUnwrap=ZUe;kfe.exports=QC});var YD=k((RRt,Ofe)=>{"use strict";var Nfe=$D(),rx=Nfe.wrap,WD=Nfe.unwrap,Kp="wrap@before";function KD(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function eBe(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],o=t[Kp];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function Lfe(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function tBe(t,e,r){var n=Lfe(t,e),i=n.filter(function(o){return r.indexOf(o)===-1});i.length>0&&eBe(t,i)}function Dfe(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}Ofe.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(c,u){var l=Lfe(this,c).slice();try{var d=s.call(this,c,u);return tBe(this,c,l),d}finally{this.on.__wrapped||rx(this,"on",i),this.addListener.__wrapped||rx(this,"addListener",i)}}}function o(s){return function(c){if(!this._events||!this._events[c])return s.apply(this,arguments);var u=this._events[c];function l(d){return function(){this._events[c]=u;try{return d.apply(this,arguments)}finally{u=this._events[c],this._events[c]=Dfe(u,n)}}}rx(this,"removeListener",l);try{return this._events[c]=Dfe(u,n),s.apply(this,arguments)}finally{WD(this,"removeListener"),this._events[c]=u}}}e[Kp]?typeof e[Kp]=="function"?KD(e,Kp,[e[Kp],r]):Array.isArray(e[Kp])&&e[Kp].push(r):KD(e,Kp,r),e.__wrapped||(rx(e,"addListener",i),rx(e,"on",i),rx(e,"emit",o),KD(e,"__unwrap",function(){WD(e,"addListener"),WD(e,"on"),WD(e,"emit"),delete e[Kp],delete e.__wrapped}),KD(e,"__wrapped",!0))}});var Bfe=k((ARt,Ufe)=>{"use strict";var jr=require("util"),Yp=require("assert"),rBe=YD(),On=require("async_hooks"),XC="cls@contexts",JC="error@context",ni=process.env.DEBUG_CLS_HOOKED,Gr=-1;Ufe.exports={getNamespace:Mfe,createNamespace:nBe,destroyNamespace:Ffe,reset:iBe,ERROR_SYMBOL:JC};function Vc(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Vc.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,ni){let n=" ".repeat(this._indent<0?0:this._indent);zn(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+Gr+" active:"+jr.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Vc.prototype.get=function(e){if(!this.active){if(ni){let r=On.currentId(),n=On.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);zn(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${Gr} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(ni){let r=On.executionAsyncId(),n=On.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);zn(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+Gr+" active:"+jr.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),zn(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${Gr} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${jr.inspect(this.active)}`)}return this.active[e]};Vc.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=Gr,ni){let r=On.executionAsyncId(),n=On.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);zn(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${Gr} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${jr.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Vc.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(ni){let n=On.triggerAsyncId(),i=On.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);zn(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${Gr} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${jr.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[JC]=r),n}finally{if(ni){let n=On.triggerAsyncId(),i=On.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);zn(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${Gr} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${jr.inspect(r)}`)}this.exit(r)}};Vc.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Vc.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return ni&&zn("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+Gr+" len:"+this._set.length+" "+jr.inspect(r)),n.then(i=>(ni&&zn("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+Gr+" len:"+this._set.length+" "+jr.inspect(r)),this.exit(r),i)).catch(i=>{throw i[JC]=r,ni&&zn("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+Gr+" len:"+this._set.length+" "+jr.inspect(r)),this.exit(r),i})};Vc.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[JC]=r),o}finally{n.exit(r)}}};Vc.prototype.enter=function(e){if(Yp.ok(e,"context must be provided for entering"),ni){let r=On.executionAsyncId(),n=On.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);zn(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${Gr} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${jr.inspect(e)}`)}this._set.push(this.active),this.active=e};Vc.prototype.exit=function(e){if(Yp.ok(e,"context must be provided for exiting"),ni){let n=On.executionAsyncId(),i=On.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);zn(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${Gr} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${jr.inspect(e)}`)}if(this.active===e){Yp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(ni&&zn("??ERROR?? context exiting but not entered - ignoring: "+jr.inspect(e)),Yp.ok(r>=0,`context not currently entered; can't exit. 
`+jr.inspect(this)+`
`+jr.inspect(e))):(Yp.ok(r,"can't remove top context"),this._set.splice(r,1))};Vc.prototype.bindEmitter=function(e){Yp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[XC]||(s[XC]=Object.create(null)),s[XC][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[XC]))return s;let a=s,c=s[XC];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}rBe(e,i,o)};Vc.prototype.fromException=function(e){return e[JC]};function Mfe(t){return process.namespaces[t]}function nBe(t){Yp.ok(t,"namespace must be given a name."),ni&&zn(`NS-CREATING NAMESPACE (${t})`);let e=new Vc(t);return e.id=Gr,On.createHook({init(n,i,o,s){if(Gr=On.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),ni){let a=" ".repeat(e._indent<0?0:e._indent);zn(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${Gr} triggerId:${o} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Gr===0){let a=On.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),ni){let u=" ".repeat(e._indent<0?0:e._indent);zn(`${u}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${Gr} triggerId:${a} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(ni){let u=" ".repeat(e._indent<0?0:e._indent);zn(`${u}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${Gr} triggerId:${a} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(ni&&i==="PROMISE"){zn(jr.inspect(s,{showHidden:!0}));let a=s.parentId,c=" ".repeat(e._indent<0?0:e._indent);zn(`${c}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${Gr} triggerId:${o} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){Gr=On.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Gr),i){if(ni){let o=On.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);zn(`${s}BEFORE (${t}) asyncId:${n} currentUid:${Gr} triggerId:${o} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${jr.inspect(i)}`),e._indent+=2}e.enter(i)}else if(ni){let o=On.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);zn(`${s}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Gr} triggerId:${o} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${jr.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){Gr=On.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Gr),i){if(ni){let o=On.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);zn(`${s}AFTER (${t}) asyncId:${n} currentUid:${Gr} triggerId:${o} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${jr.inspect(i)}`)}e.exit(i)}else if(ni){let o=On.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);zn(`${s}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Gr} triggerId:${o} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${jr.inspect(i)}`)}},destroy(n){if(Gr=On.executionAsyncId(),ni){let i=On.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);zn(`${o}DESTROY (${t}) currentUid:${Gr} asyncId:${n} triggerId:${i} active:${jr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${jr.inspect(e._contexts.get(Gr))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function Ffe(t){let e=Mfe(t);Yp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Yp.ok(e.id,"don't assign to process.namespaces directly! "+jr.inspect(e)),process.namespaces[t]=null}function iBe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Ffe(t)}),process.namespaces=Object.create(null)}process.namespaces={};function zn(...t){ni&&process._rawDebug(`${jr.format(...t)}`)}});var Hfe=k((PRt,qfe)=>{"use strict";function oBe(){}qfe.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let c=0;c<arguments.length;c++)i[c]=arguments[c];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new oBe,a=--r.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let c=!0;try{o.apply(this,arguments),c=!1}finally{c&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(s,a,!0),e.destroy.call(null,a)})}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var jfe=k((kRt,Gfe)=>{"use strict";function sBe(){}Gfe.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=c;function o(u,l,d,p){return typeof u!="function"?p?s(d):a(d):function(){e.pre.call(l,d);try{return u.apply(this,arguments)}finally{e.post.call(l,d,!1),e.destroy.call(null,d)}}}function s(u){return function(d){return e.destroy.call(null,u),d}}function a(u){return function(d){throw e.destroy.call(null,u),d}}function c(u,l){if(!r.enabled)return i.call(this,u,l);let d=new sBe,p=--r.counter;return e.init.call(d,p,0,null,null),i.call(this,o(u,d,p,!0),o(l,d,p,!1))}}});var Vfe=k((DRt,zfe)=>{"use strict";var dc=require("timers");function aBe(){}function cBe(){}function uBe(){}var lBe=new Map,dBe=new Map,pBe=new Map,VH=null,$H=!1;zfe.exports=function(){WH(this._hooks,this._state,"setTimeout","clearTimeout",aBe,lBe,!0),WH(this._hooks,this._state,"setInterval","clearInterval",cBe,dBe,!1),WH(this._hooks,this._state,"setImmediate","clearImmediate",uBe,pBe,!0),global.setTimeout=dc.setTimeout,global.setInterval=dc.setInterval,global.setImmediate=dc.setImmediate,global.clearTimeout=dc.clearTimeout,global.clearInterval=dc.clearInterval,global.clearImmediate=dc.clearImmediate};function WH(t,e,r,n,i,o,s){let a=dc[r],c=dc[n];dc[r]=function(){if(!e.enabled)return a.apply(dc,arguments);let u=new Array(arguments.length);for(let m=0;m<arguments.length;m++)u[m]=arguments[m];let l=u[0];if(typeof l!="function")throw new TypeError('"callback" argument must be a function');let d=new i,p=--e.counter,f;return t.init.call(d,p,0,null,null),u[0]=function(){VH=f,t.pre.call(d,p);let m=!0;try{l.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(d,p,!0),o.delete(f),t.destroy.call(null,p)})}t.post.call(d,p,!1),VH=null,(s||$H)&&($H=!1,o.delete(f),t.destroy.call(null,p))},f=a.apply(dc,u),o.set(f,p),f},dc[n]=function(u){if(VH===u&&u!==null)$H=!0;else if(o.has(u)){let l=o.get(u);o.delete(u),t.destroy.call(null,l)}c.apply(dc,arguments)}}});var Kfe=k((NRt,Wfe)=>{"use strict";var eI=process.binding("async_wrap"),fBe=eI.Providers.TIMERWRAP,$fe={nextTick:Hfe(),promise:jfe(),timers:Vfe()},ZC=new Set;function mBe(){this.enabled=!1,this.counter=0}function KH(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,o,s,a){if(o===fBe){ZC.add(i);return}for(let c of t)c(i,this,o,s,a)},this.pre=function(i){if(!ZC.has(i))for(let o of e)o(i,this)},this.post=function(i,o){if(!ZC.has(i))for(let s of r)s(i,this,o)},this.destroy=function(i){if(ZC.has(i)){ZC.delete(i);return}for(let o of n)o(i)}}KH.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function QD(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}KH.prototype.remove=function(t){t.init&&QD(this.initFns,t.init),t.pre&&QD(this.preFns,t.pre),t.post&&QD(this.postFns,t.post),t.destroy&&QD(this.destroyFns,t.destroy)};function tI(){this._state=new mBe,this._hooks=new KH,this.version=require("./package.json").version,this.providers=eI.Providers;for(let t of Object.keys($fe))$fe[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),eI.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}Wfe.exports=tI;tI.prototype.addHooks=function(t){this._hooks.add(t)};tI.prototype.removeHooks=function(t){this._hooks.remove(t)};tI.prototype.enable=function(){this._state.enabled=!0,eI.enable()};tI.prototype.disable=function(){this._state.enabled=!1,eI.disable()}});var Qfe=k((LRt,Yfe)=>{function hBe(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}Yfe.exports=function(e,r){var n=[];n.push(hBe(e));for(var i=0;i<r.length;i++){var o=r[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch{s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var eme=k((ORt,Zfe)=>{var XD=Qfe();function Jfe(){this.extend=new rI,this.filter=new rI,this.format=new nI,this.version=require("./package.json").version}var QH=!1;Jfe.prototype.callSite=function t(e){e||(e={}),QH=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return QH=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var nh=new Jfe;function rI(){this._modifiers=[]}rI.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};rI.prototype.attach=function(t){this._modifiers.push(t)};rI.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function nI(){this._formater=XD,this._previous=void 0}nI.prototype.replace=function(t){t?this._formater=t:this.restore()};nI.prototype.restore=function(){this._formater=XD,this._previous=void 0};nI.prototype._backup=function(){this._previous=this._formater};nI.prototype._roolback=function(){this._previous===XD?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&nh.format.replace(Error.prepareStackTrace);var YH=!1;function Xfe(t,e){if(QH)return e;if(YH)return XD(t,e);var r=e.concat();r=nh.extend._modify(t,r),r=nh.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),YH=!0;var n=nh.format._formater(t,r);return YH=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return Xfe},set:function(t){t===Xfe?nh.format._roolback():(nh.format._backup(),nh.format.replace(t))}});function gBe(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:gBe,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});Zfe.exports=nh});var JH=k((MRt,XH)=>{if(global._stackChain)if(global._stackChain.version===require("./package.json").version)XH.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else XH.exports=global._stackChain=eme()});var tme=k((FRt,ZH)=>{"use strict";var vBe=Kfe();if(global._asyncHook)if(global._asyncHook.version===require("./package.json").version)ZH.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else JH().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),ZH.exports=global._asyncHook=new vBe});var ame=k((URt,sme)=>{"use strict";var Ni=require("util"),Qp=require("assert"),yBe=YD(),nx=tme(),iI="cls@contexts",oI="error@context",nme=[];for(let t in nx.providers)nme[nx.providers[t]]=t;var yi=process.env.DEBUG_CLS_HOOKED,Ji=-1;sme.exports={getNamespace:ime,createNamespace:bBe,destroyNamespace:ome,reset:_Be,ERROR_SYMBOL:oI};function $c(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}$c.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return yi&&Di("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+Ji+" active:"+Ni.inspect(this.active,!0)),this.active[e]=r,r};$c.prototype.get=function(e){if(!this.active){yi&&Di("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+Ji+" active:"+Ni.inspect(this.active,!0));return}return yi&&Di("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+Ji+" active:"+Ni.inspect(this.active,!0)),this.active[e]};$c.prototype.createContext=function(){yi&&Di("   CREATING Context: "+this.name+" uid:"+Ji+" len:"+this._set.length+"  active:"+Ni.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=Ji,yi&&Di("   CREATED Context: "+this.name+" uid:"+Ji+" len:"+this._set.length+"  context:"+Ni.inspect(e,!0,2,!0)),e};$c.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return yi&&Di(" BEFORE RUN: "+this.name+" uid:"+Ji+" len:"+this._set.length+" "+Ni.inspect(r)),e(r),r}catch(n){throw n&&(n[oI]=r),n}finally{yi&&Di(" AFTER RUN: "+this.name+" uid:"+Ji+" len:"+this._set.length+" "+Ni.inspect(r)),this.exit(r)}};$c.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};$c.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return yi&&Di(" BEFORE runPromise: "+this.name+" uid:"+Ji+" len:"+this._set.length+" "+Ni.inspect(r)),n.then(i=>(yi&&Di(" AFTER runPromise: "+this.name+" uid:"+Ji+" len:"+this._set.length+" "+Ni.inspect(r)),this.exit(r),i)).catch(i=>{throw i[oI]=r,yi&&Di(" AFTER runPromise: "+this.name+" uid:"+Ji+" len:"+this._set.length+" "+Ni.inspect(r)),this.exit(r),i})};$c.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[oI]=r),o}finally{n.exit(r)}}};$c.prototype.enter=function(e){Qp.ok(e,"context must be provided for entering"),yi&&Di("  ENTER "+this.name+" uid:"+Ji+" len:"+this._set.length+" context: "+Ni.inspect(e)),this._set.push(this.active),this.active=e};$c.prototype.exit=function(e){if(Qp.ok(e,"context must be provided for exiting"),yi&&Di("  EXIT "+this.name+" uid:"+Ji+" len:"+this._set.length+" context: "+Ni.inspect(e)),this.active===e){Qp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(yi&&Di("??ERROR?? context exiting but not entered - ignoring: "+Ni.inspect(e)),Qp.ok(r>=0,`context not currently entered; can't exit. 
`+Ni.inspect(this)+`
`+Ni.inspect(e))):(Qp.ok(r,"can't remove top context"),this._set.splice(r,1))};$c.prototype.bindEmitter=function(e){Qp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[iI]||(s[iI]=Object.create(null)),s[iI][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[iI]))return s;let a=s,c=s[iI];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}yBe(e,i,o)};$c.prototype.fromException=function(e){return e[oI]};function ime(t){return process.namespaces[t]}function bBe(t){Qp.ok(t,"namespace must be given a name."),yi&&Di("CREATING NAMESPACE "+t);let e=new $c(t);return e.id=Ji,nx.addHooks({init(r,n,i,o,s){Ji=r,o?(e._contexts.set(r,e._contexts.get(o)),yi&&Di("PARENTID: "+t+" uid:"+r+" parent:"+o+" provider:"+i)):e._contexts.set(Ji,e.active),yi&&Di("INIT "+t+" uid:"+r+" parent:"+o+" provider:"+nme[i]+" active:"+Ni.inspect(e.active,!0))},pre(r,n){Ji=r;let i=e._contexts.get(r);i?(yi&&Di(" PRE "+t+" uid:"+r+" handle:"+JD(n)+" context:"+Ni.inspect(i)),e.enter(i)):yi&&Di(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+JD(n))},post(r,n){Ji=r;let i=e._contexts.get(r);i?(yi&&Di(" POST "+t+" uid:"+r+" handle:"+JD(n)+" context:"+Ni.inspect(i)),e.exit(i)):yi&&Di(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+JD(n))},destroy(r){Ji=r,yi&&Di("DESTROY "+t+" uid:"+r+" context:"+Ni.inspect(e._contexts.get(Ji))+" active:"+Ni.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function ome(t){let e=ime(t);Qp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Qp.ok(e.id,"don't assign to process.namespaces directly! "+Ni.inspect(e)),process.namespaces[t]=null}function _Be(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){ome(t)}),process.namespaces=Object.create(null)}process.namespaces={};nx._state&&!nx._state.enabled&&nx.enable();function Di(t){process.env.DEBUG&&process._rawDebug(t)}function JD(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(yi){eG=JH();for(rme in eG.filter._modifiers)eG.filter.deattach(rme)}var eG,rme});var cme=k((BRt,tG)=>{"use strict";var xBe=Rfe();process&&xBe.gte(process.versions.node,"8.0.0")?tG.exports=Bfe():tG.exports=ame()});var Cme=k((Ut,Tme)=>{Ut=Tme.exports=yr;var tn;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?tn=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:tn=function(){};Ut.SEMVER_SPEC_VERSION="2.0.0";var sI=256,ZD=Number.MAX_SAFE_INTEGER||9007199254740991,rG=16,SBe=sI-6,aI=Ut.re=[],En=Ut.safeRe=[],Ce=Ut.src=[],pr=0,aG="[a-zA-Z0-9-]",nG=[["\\s",1],["\\d",sI],[aG,SBe]];function oN(t){for(var e=0;e<nG.length;e++){var r=nG[e][0],n=nG[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var ix=pr++;Ce[ix]="0|[1-9]\\d*";var ox=pr++;Ce[ox]="\\d+";var cG=pr++;Ce[cG]="\\d*[a-zA-Z-]"+aG+"*";var lme=pr++;Ce[lme]="("+Ce[ix]+")\\.("+Ce[ix]+")\\.("+Ce[ix]+")";var dme=pr++;Ce[dme]="("+Ce[ox]+")\\.("+Ce[ox]+")\\.("+Ce[ox]+")";var iG=pr++;Ce[iG]="(?:"+Ce[ix]+"|"+Ce[cG]+")";var oG=pr++;Ce[oG]="(?:"+Ce[ox]+"|"+Ce[cG]+")";var uG=pr++;Ce[uG]="(?:-("+Ce[iG]+"(?:\\."+Ce[iG]+")*))";var lG=pr++;Ce[lG]="(?:-?("+Ce[oG]+"(?:\\."+Ce[oG]+")*))";var sG=pr++;Ce[sG]=aG+"+";var uI=pr++;Ce[uI]="(?:\\+("+Ce[sG]+"(?:\\."+Ce[sG]+")*))";var dG=pr++,pme="v?"+Ce[lme]+Ce[uG]+"?"+Ce[uI]+"?";Ce[dG]="^"+pme+"$";var pG="[v=\\s]*"+Ce[dme]+Ce[lG]+"?"+Ce[uI]+"?",fG=pr++;Ce[fG]="^"+pG+"$";var lx=pr++;Ce[lx]="((?:<|>)?=?)";var eN=pr++;Ce[eN]=Ce[ox]+"|x|X|\\*";var tN=pr++;Ce[tN]=Ce[ix]+"|x|X|\\*";var wv=pr++;Ce[wv]="[v=\\s]*("+Ce[tN]+")(?:\\.("+Ce[tN]+")(?:\\.("+Ce[tN]+")(?:"+Ce[uG]+")?"+Ce[uI]+"?)?)?";var ax=pr++;Ce[ax]="[v=\\s]*("+Ce[eN]+")(?:\\.("+Ce[eN]+")(?:\\.("+Ce[eN]+")(?:"+Ce[lG]+")?"+Ce[uI]+"?)?)?";var fme=pr++;Ce[fme]="^"+Ce[lx]+"\\s*"+Ce[wv]+"$";var mme=pr++;Ce[mme]="^"+Ce[lx]+"\\s*"+Ce[ax]+"$";var hme=pr++;Ce[hme]="(?:^|[^\\d])(\\d{1,"+rG+"})(?:\\.(\\d{1,"+rG+"}))?(?:\\.(\\d{1,"+rG+"}))?(?:$|[^\\d])";var sN=pr++;Ce[sN]="(?:~>?)";var cx=pr++;Ce[cx]="(\\s*)"+Ce[sN]+"\\s+";aI[cx]=new RegExp(Ce[cx],"g");En[cx]=new RegExp(oN(Ce[cx]),"g");var EBe="$1~",gme=pr++;Ce[gme]="^"+Ce[sN]+Ce[wv]+"$";var vme=pr++;Ce[vme]="^"+Ce[sN]+Ce[ax]+"$";var aN=pr++;Ce[aN]="(?:\\^)";var ux=pr++;Ce[ux]="(\\s*)"+Ce[aN]+"\\s+";aI[ux]=new RegExp(Ce[ux],"g");En[ux]=new RegExp(oN(Ce[ux]),"g");var TBe="$1^",yme=pr++;Ce[yme]="^"+Ce[aN]+Ce[wv]+"$";var bme=pr++;Ce[bme]="^"+Ce[aN]+Ce[ax]+"$";var mG=pr++;Ce[mG]="^"+Ce[lx]+"\\s*("+pG+")$|^$";var hG=pr++;Ce[hG]="^"+Ce[lx]+"\\s*("+pme+")$|^$";var Rv=pr++;Ce[Rv]="(\\s*)"+Ce[lx]+"\\s*("+pG+"|"+Ce[wv]+")";aI[Rv]=new RegExp(Ce[Rv],"g");En[Rv]=new RegExp(oN(Ce[Rv]),"g");var CBe="$1$2$3",_me=pr++;Ce[_me]="^\\s*("+Ce[wv]+")\\s+-\\s+("+Ce[wv]+")\\s*$";var xme=pr++;Ce[xme]="^\\s*("+Ce[ax]+")\\s+-\\s+("+Ce[ax]+")\\s*$";var Sme=pr++;Ce[Sme]="(<|>)?=?\\s*\\*";for(nd=0;nd<pr;nd++)tn(nd,Ce[nd]),aI[nd]||(aI[nd]=new RegExp(Ce[nd]),En[nd]=new RegExp(oN(Ce[nd])));var nd;Ut.parse=Av;function Av(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof yr)return t;if(typeof t!="string"||t.length>sI)return null;var r=e.loose?En[fG]:En[dG];if(!r.test(t))return null;try{return new yr(t,e)}catch{return null}}Ut.valid=IBe;function IBe(t,e){var r=Av(t,e);return r?r.version:null}Ut.clean=wBe;function wBe(t,e){var r=Av(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Ut.SemVer=yr;function yr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof yr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>sI)throw new TypeError("version is longer than "+sI+" characters");if(!(this instanceof yr))return new yr(t,e);tn("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?En[fG]:En[dG]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ZD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ZD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ZD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<ZD)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}yr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};yr.prototype.toString=function(){return this.version};yr.prototype.compare=function(t){return tn("SemVer.compare",this.version,this.options,t),t instanceof yr||(t=new yr(t,this.options)),this.compareMain(t)||this.comparePre(t)};yr.prototype.compareMain=function(t){return t instanceof yr||(t=new yr(t,this.options)),sx(this.major,t.major)||sx(this.minor,t.minor)||sx(this.patch,t.patch)};yr.prototype.comparePre=function(t){if(t instanceof yr||(t=new yr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(tn("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return sx(r,n)}while(++e)};yr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Ut.inc=RBe;function RBe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new yr(t,r).inc(e,n).version}catch{return null}}Ut.diff=ABe;function ABe(t,e){if(gG(t,e))return null;var r=Av(t),n=Av(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Ut.compareIdentifiers=sx;var ume=/^[0-9]+$/;function sx(t,e){var r=ume.test(t),n=ume.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Ut.rcompareIdentifiers=PBe;function PBe(t,e){return sx(e,t)}Ut.major=kBe;function kBe(t,e){return new yr(t,e).major}Ut.minor=DBe;function DBe(t,e){return new yr(t,e).minor}Ut.patch=NBe;function NBe(t,e){return new yr(t,e).patch}Ut.compare=Xp;function Xp(t,e,r){return new yr(t,r).compare(new yr(e,r))}Ut.compareLoose=LBe;function LBe(t,e){return Xp(t,e,!0)}Ut.rcompare=OBe;function OBe(t,e,r){return Xp(e,t,r)}Ut.sort=MBe;function MBe(t,e){return t.sort(function(r,n){return Ut.compare(r,n,e)})}Ut.rsort=FBe;function FBe(t,e){return t.sort(function(r,n){return Ut.rcompare(r,n,e)})}Ut.gt=cI;function cI(t,e,r){return Xp(t,e,r)>0}Ut.lt=rN;function rN(t,e,r){return Xp(t,e,r)<0}Ut.eq=gG;function gG(t,e,r){return Xp(t,e,r)===0}Ut.neq=Eme;function Eme(t,e,r){return Xp(t,e,r)!==0}Ut.gte=vG;function vG(t,e,r){return Xp(t,e,r)>=0}Ut.lte=yG;function yG(t,e,r){return Xp(t,e,r)<=0}Ut.cmp=nN;function nN(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return gG(t,r,n);case"!=":return Eme(t,r,n);case">":return cI(t,r,n);case">=":return vG(t,r,n);case"<":return rN(t,r,n);case"<=":return yG(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Ut.Comparator=Wc;function Wc(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Wc){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Wc))return new Wc(t,e);t=t.trim().split(/\s+/).join(" "),tn("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===lI?this.value="":this.value=this.operator+this.semver.version,tn("comp",this)}var lI={};Wc.prototype.parse=function(t){var e=this.options.loose?En[mG]:En[hG],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new yr(r[2],this.options.loose):this.semver=lI};Wc.prototype.toString=function(){return this.value};Wc.prototype.test=function(t){return tn("Comparator.test",t,this.options.loose),this.semver===lI?!0:(typeof t=="string"&&(t=new yr(t,this.options)),nN(t,this.operator,this.semver,this.options))};Wc.prototype.intersects=function(t,e){if(!(t instanceof Wc))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new ii(t.value,e),iN(this.value,r,e);if(t.operator==="")return r=new ii(this.value,e),iN(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=nN(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=nN(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};Ut.Range=ii;function ii(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ii)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new ii(t.raw,e);if(t instanceof Wc)return new ii(t.value,e);if(!(this instanceof ii))return new ii(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}ii.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};ii.prototype.toString=function(){return this.range};ii.prototype.parseRange=function(t){var e=this.options.loose,r=e?En[xme]:En[_me];t=t.replace(r,WBe),tn("hyphen replace",t),t=t.replace(En[Rv],CBe),tn("comparator trim",t,En[Rv]),t=t.replace(En[cx],EBe),t=t.replace(En[ux],TBe);var n=e?En[mG]:En[hG],i=t.split(" ").map(function(o){return BBe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Wc(o,this.options)},this),i};ii.prototype.intersects=function(t,e){if(!(t instanceof ii))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Ut.toComparators=UBe;function UBe(t,e){return new ii(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function BBe(t,e){return tn("comp",t,e),t=GBe(t,e),tn("caret",t),t=qBe(t,e),tn("tildes",t),t=zBe(t,e),tn("xrange",t),t=$Be(t,e),tn("stars",t),t}function ra(t){return!t||t.toLowerCase()==="x"||t==="*"}function qBe(t,e){return t.trim().split(/\s+/).map(function(r){return HBe(r,e)}).join(" ")}function HBe(t,e){var r=e.loose?En[vme]:En[gme];return t.replace(r,function(n,i,o,s,a){tn("tilde",t,n,i,o,s,a);var c;return ra(i)?c="":ra(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ra(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(tn("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",tn("tilde return",c),c})}function GBe(t,e){return t.trim().split(/\s+/).map(function(r){return jBe(r,e)}).join(" ")}function jBe(t,e){tn("caret",t,e);var r=e.loose?En[bme]:En[yme];return t.replace(r,function(n,i,o,s,a){tn("caret",t,n,i,o,s,a);var c;return ra(i)?c="":ra(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ra(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(tn("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(tn("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),tn("caret return",c),c})}function zBe(t,e){return tn("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return VBe(r,e)}).join(" ")}function VBe(t,e){t=t.trim();var r=e.loose?En[mme]:En[fme];return t.replace(r,function(n,i,o,s,a,c){tn("xRange",t,n,i,o,s,a,c);var u=ra(o),l=u||ra(s),d=l||ra(a),p=d;return i==="="&&p&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),tn("xRange return",n),n})}function $Be(t,e){return tn("replaceStars",t,e),t.trim().replace(En[Sme],"")}function WBe(t,e,r,n,i,o,s,a,c,u,l,d,p){return ra(r)?e="":ra(n)?e=">="+r+".0.0":ra(i)?e=">="+r+"."+n+".0":e=">="+e,ra(c)?a="":ra(u)?a="<"+(+c+1)+".0.0":ra(l)?a="<"+c+"."+(+u+1)+".0":d?a="<="+c+"."+u+"."+l+"-"+d:a="<="+a,(e+" "+a).trim()}ii.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new yr(t,this.options));for(var e=0;e<this.set.length;e++)if(KBe(this.set[e],t,this.options))return!0;return!1};function KBe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(tn(t[n].semver),t[n].semver!==lI&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Ut.satisfies=iN;function iN(t,e,r){try{e=new ii(e,r)}catch{return!1}return e.test(t)}Ut.maxSatisfying=YBe;function YBe(t,e,r){var n=null,i=null;try{var o=new ii(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new yr(n,r))}),n}Ut.minSatisfying=QBe;function QBe(t,e,r){var n=null,i=null;try{var o=new ii(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new yr(n,r))}),n}Ut.minVersion=XBe;function XBe(t,e){t=new ii(t,e);var r=new yr("0.0.0");if(t.test(r)||(r=new yr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new yr(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||cI(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Ut.validRange=JBe;function JBe(t,e){try{return new ii(t,e).range||"*"}catch{return null}}Ut.ltr=ZBe;function ZBe(t,e,r){return bG(t,e,"<",r)}Ut.gtr=eqe;function eqe(t,e,r){return bG(t,e,">",r)}Ut.outside=bG;function bG(t,e,r,n){t=new yr(t,n),e=new ii(e,n);var i,o,s,a,c;switch(r){case">":i=cI,o=yG,s=rN,a=">",c=">=";break;case"<":i=rN,o=vG,s=cI,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(iN(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],d=null,p=null;if(l.forEach(function(f){f.semver===lI&&(f=new Wc(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0}Ut.prerelease=tqe;function tqe(t,e){var r=Av(t,e);return r&&r.prerelease.length?r.prerelease:null}Ut.intersects=rqe;function rqe(t,e,r){return t=new ii(t,r),e=new ii(e,r),t.intersects(e)}Ut.coerce=nqe;function nqe(t){if(t instanceof yr)return t;if(typeof t!="string")return null;var e=t.match(En[hme]);return e==null?null:Av(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var Rme=k((qRt,wme)=>{var iqe=$D().wrap,xG=1,SG=2,EG=4,uN=8,mn=[],oqe=0,Is=!1,ih=[],dx,TG;function CG(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var o=0;o<r;o++)i[o]=t[o];if(n===0)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(t[o].uid===e[s].uid){a=!1;break}a&&i.push(e[s])}return i}process._fatalException?(cN=!1,dx=function(e){var r=mn.length;if(cN||r===0)return!1;var n=!1;cN=!0;for(var i=0;i<r;++i){var o=mn[i];if(o.flags&uN){var s=px&&px[o.uid];n=o.error(s,e)||n}}return cN=!1,ih.length>0&&(mn=ih.pop()),px=void 0,n&&!Is},TG=function(e,r,n){var i=[];Is=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&xG)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return Is=!1,function(){px=i,ih.push(mn),mn=CG(r,mn),Is=!0;for(var c=0;c<n;++c)(r[c].flags&SG)>0&&r[c].before(this,i[r[c].uid]);Is=!1;var u=e.apply(this,arguments);for(Is=!0,c=0;c<n;++c)(r[c].flags&EG)>0&&r[c].after(this,i[r[c].uid]);return Is=!1,mn=ih.pop(),px=void 0,u}},iqe(process,"_fatalException",function(t){return function(r){return dx(r)||t(r)}})):(_G=!1,dx=function(e){if(_G)throw e;for(var r=!1,n=mn.length,i=0;i<n;++i){var o=mn[i];o.flags&uN&&(r=o.error(null,e)||r)}if(!r&&Is)throw e},TG=function(e,r,n){var i=[];Is=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&xG)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return Is=!1,function(){var c=!1,u=!1;ih.push(mn),mn=CG(r,mn),Is=!0;for(var l=0;l<n;++l)(r[l].flags&SG)>0&&r[l].before(this,i[r[l].uid]);Is=!1;var d;try{d=e.apply(this,arguments)}catch(p){c=!0;for(var l=0;l<n;++l)if(mn[l].flags&uN)try{u=mn[l].error(i[r[l].uid],p)||u}catch(m){throw _G=!0,m}if(!u)throw process.removeListener("uncaughtException",dx),process._originalNextTick(function(){process.addListener("uncaughtException",dx)}),p}finally{if(!c||u){for(Is=!0,l=0;l<n;++l)(r[l].flags&EG)>0&&r[l].after(this,i[r[l].uid]);Is=!1}mn=ih.pop()}return d}},process.addListener("uncaughtException",dx));var cN,px,_G;function sqe(t,e,r){Is=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return Is=!1,function(){ih.push(mn),mn=CG(e,mn);var o=t.apply(this,arguments);return mn=ih.pop(),o}}function aqe(t){var e=mn.length;if(e===0)return t;for(var r=mn.slice(),n=0;n<e;++n)if(r[n].flags>0)return TG(t,r,e);return sqe(t,r,e)}function id(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=xG),typeof t.before=="function"&&(this.before=t.before,this.flags|=SG),typeof t.after=="function"&&(this.after=t.after,this.flags|=EG),typeof t.error=="function"&&(this.error=t.error,this.flags|=uN),this.uid=++oqe,this.data=e===void 0?null:e}id.prototype.create=void 0;id.prototype.before=void 0;id.prototype.after=void 0;id.prototype.error=void 0;id.prototype.data=void 0;id.prototype.uid=0;id.prototype.flags=0;function Ime(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof id?t:new id(t,e)}function cqe(t,e){var r;t instanceof id?r=t:r=Ime(t,e);for(var n=!1,i=0;i<mn.length;i++)if(r===mn[i]){n=!0;break}return n||mn.push(r),r}function uqe(t){for(var e=0;e<mn.length;e++)if(t===mn[e]){mn.splice(e,1);break}}process.createAsyncListener=Ime;process.addAsyncListener=cqe;process.removeAsyncListener=uqe;wme.exports=aqe});var Pme=k((GRt,Ame)=>{"use strict";Ame.exports=(t,e)=>class extends t{constructor(n){var i,o;super(a);var s=this;try{n.apply(i,o)}catch(c){o[1](c)}return s;function a(c,u){i=this,o=[l,d];function l(p){return e(s,!1),c(p)}function d(p){return e(s,!1),u(p)}}}}});var Fme=k(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var Lme=$D(),dN=Cme(),Pa=Lme.wrap,oh=Lme.massWrap,oi=Rme(),lqe=require("util"),dqe=dN.gte(process.version,"6.0.0"),RG=dN.gte(process.version,"7.0.0"),pqe=dN.gte(process.version,"8.0.0"),fqe=dN.gte(process.version,"11.0.0"),od=require("net");RG&&!od._normalizeArgs?od._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:yqe(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!RG&&!od._normalizeConnectArgs&&(od._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in od.Server.prototype?Pa(od.Server.prototype,"_setUpListenHandle",kme):Pa(od.Server.prototype,"_listen2",kme);function kme(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=oi(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=oi(this._handle.onconnection))}}}function Ome(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=oi(e._originalOnread)}}Pa(od.Socket.prototype,"connect",function(t){return function(){var e;pqe&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=RG?od._normalizeArgs(arguments):od._normalizeConnectArgs(arguments),e[1]&&(e[1]=oi(e[1]));var r=t.apply(this,e);return Ome(this),r}});var mqe=require("http");Pa(mqe.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=oi(function(n){return Ome(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var IG=require("child_process");function Dme(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=oi(e._handle.onread),Pa(e._handle,"close",pN))}),t._handle&&(t._handle.onexit=oi(t._handle.onexit))}IG.ChildProcess?Pa(IG.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return Dme(this),e}}):oh(IG,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return Dme(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var kG=[];process._nextDomainTick&&kG.push("_nextDomainTick");process._tickDomainCallback&&kG.push("_tickDomainCallback");oh(process,kG,sd);Pa(process,"nextTick",pN);var DG=["setTimeout","setInterval"];global.setImmediate&&DG.push("setImmediate");var Mme=require("timers"),hqe=global.setTimeout===Mme.setTimeout;oh(Mme,DG,pN);hqe&&oh(global,DG,pN);var AG=require("dns");oh(AG,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],sd);AG.resolveNaptr&&Pa(AG,"resolveNaptr",sd);var kv=require("fs");oh(kv,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],sd);kv.lchown&&Pa(kv,"lchown",sd);kv.lchmod&&Pa(kv,"lchmod",sd);kv.ftruncate&&Pa(kv,"ftruncate",sd);var dI;try{dI=require("zlib")}catch{}dI&&dI.Deflate&&dI.Deflate.prototype&&(Pv=Object.getPrototypeOf(dI.Deflate.prototype),Pv._transform?Pa(Pv,"_transform",sd):Pv.write&&Pv.flush&&Pv.end&&oh(Pv,["write","flush","end"],sd));var Pv,PG;try{PG=require("crypto")}catch{}PG&&(wG=["pbkdf2","randomBytes"],fqe||wG.push("pseudoRandomBytes"),oh(PG,wG,sd));var wG,lN=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";lN&&(Nme=process.addAsyncListener({create:function(){lN=!1}}),global.Promise.resolve(!0).then(function(){lN=!1}),process.removeAsyncListener(Nme));var Nme;lN&&gqe();function gqe(){var t=global.Promise;function e(s){if(!(this instanceof e))return t(s);if(typeof s!="function")return new t(s);var a,c,u=new t(l);u.__proto__=e.prototype;try{s.apply(a,c)}catch(d){c[1](d)}return u;function l(d,p){a=this,c=[f,m];function f(h){return n(u,!1),d(h)}function m(h){return n(u,!1),p(h)}}}if(lqe.inherits(e,t),Pa(t.prototype,"then",o),t.prototype.chain&&Pa(t.prototype,"chain",o),dqe)global.Promise=Pme()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof t[s]=="function"&&(e[s]=t[s])}),global.Promise=e}function n(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=oi(i))}function i(s,a,c,u){var l;try{return l=a.call(s,c),{returnVal:l,error:!1}}catch(d){return{errorVal:d,error:!0}}finally{l instanceof t?u.__asl_wrapper=function(){var p=l.__asl_wrapper||i;return p.apply(this,arguments)}:n(u,!0)}}function o(s){return function(){var c=this,u=s.apply(c,Array.prototype.map.call(arguments,l));return u.__asl_wrapper=function(p,f,m,h){return c.__asl_wrapper?(c.__asl_wrapper(p,function(){},null,u),u.__asl_wrapper(p,f,m,h)):i(p,f,m,h)},u;function l(d){return typeof d!="function"?d:oi(function(p){var f=(c.__asl_wrapper||i)(this,d,p,u);if(f.error)throw f.errorVal;return f.returnVal})}}}}function sd(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=oi(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=oi(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=oi(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=oi(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof o=="function"&&(o=oi(o)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof s=="function"&&(s=oi(s)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=oi(a)),t.call(this,r,n,i,o,s,a))};default:return e}}function pN(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=oi(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=oi(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=oi(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=oi(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=oi(r)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=oi(r)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=oi(r)),t.call(this,r,n,i,o,s,a))};default:return e}}function vqe(t){return(t=Number(t))>=0?t:!1}function yqe(t){return typeof t=="string"&&vqe(t)===!1}});var Gme=k((VRt,Hme)=>{"use strict";var Jp=require("assert"),bqe=YD(),pI="cls@contexts",NG="error@context";process.addAsyncListener||Fme();function Qu(t){this.name=t,this.active=null,this._set=[],this.id=null}Qu.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};Qu.prototype.get=function(t){if(this.active)return this.active[t]};Qu.prototype.createContext=function(){return Object.create(this.active)};Qu.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[NG]=e),r}finally{this.exit(e)}};Qu.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};Qu.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[NG]=e),n}finally{r.exit(e)}}};Qu.prototype.enter=function(t){Jp.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};Qu.prototype.exit=function(t){if(Jp.ok(t,"context must be provided for exiting"),this.active===t){Jp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);Jp.ok(e>=0,"context not currently entered; can't exit"),Jp.ok(e,"can't remove top context"),this._set.splice(e,1)};Qu.prototype.bindEmitter=function(t){Jp.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(o){o&&(o[pI]||(o[pI]=Object.create(null)),o[pI][r]={namespace:e,context:e.active})}function i(o){if(!(o&&o[pI]))return o;var s=o,a=o[pI];return Object.keys(a).forEach(function(c){var u=a[c];s=u.namespace.bind(s,u.context)}),s}bqe(t,n,i)};Qu.prototype.fromException=function(t){return t[NG]};function Ume(t){return process.namespaces[t]}function _qe(t){Jp.ok(t,"namespace must be given a name!");var e=new Qu(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function Bme(t){var e=Ume(t);Jp.ok(e,"can't delete nonexistent namespace!"),Jp.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function qme(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Bme(t)}),process.namespaces=Object.create(null)}process.namespaces||qme();Hme.exports={getNamespace:Ume,createNamespace:_qe,destroyNamespace:Bme,reset:qme}});var sh=k(mN=>{"use strict";Object.defineProperty(mN,"__esModule",{value:!0});mN.CorrelationContextManager=void 0;var fx=Nn(),xqe=kD(),Dv=DD(),LG=oH(),jme=CH(),fN=Qo(),Sqe=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,o,s){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:o,tracestate:s},customProperties:new Eqe(i)}:null},t.spanToContextObject=function(e,r,n){var i=new Dv;return i.traceId=e.traceId,i.spanId=e.spanId,i.traceFlag=Dv.formatOpenTelemetryTraceFlags(e.traceFlags)||Dv.DEFAULT_TRACE_FLAG,i.parentId=r,t.generateContextObject(i.traceId,i.parentId,n,null,i)},t.runWithContext=function(e,r){var n;if(t.enabled)try{return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))()}catch(i){fx.warn("Error binding to session context",fN.dumpObj(i))}return r()},t.wrapEmitter=function(e){if(t.enabled)try{t.session.bindEmitter(e)}catch(r){fx.warn("Error binding to session context",fN.dumpObj(r))}},t.wrapCallback=function(e,r){var n;if(t.enabled)try{return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0)}catch(i){fx.warn("Error binding to session context",fN.dumpObj(i))}return e},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=cme():this.cls=Gme()),t.session=this.cls.createNamespace("AI-CLS-Session"),xqe.registerContextPreservation(function(r){try{return t.session.bind(r)}catch(n){fx.warn("Error binding to session context",fN.dumpObj(n))}})),this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,i=e&&e.spanContext?e:null,o=e&&e.traceId?e:null,s=e&&e.headers;if(i)return this.spanToContextObject(i.spanContext(),i.parentSpanId,i.name);if(o)return this.spanToContextObject(o,"|"+o.traceId+"."+o.spanId+".",typeof r=="string"?r:"");var a=typeof r=="string"?r:"";if(n){var c=null,u=null;if(a=n.attributes.OperationName||a,r){var l=r;l.headers&&(l.headers.traceparent?c=new Dv(l.headers.traceparent):l.headers["request-id"]&&(c=new Dv(null,l.headers["request-id"])),l.headers.tracestate&&(u=new LG(l.headers.tracestate)))}c||(c=new Dv(n.traceParent||n.traceparent)),u||(u=new LG(n.traceState||n.tracestate));var d=void 0;if(typeof r=="object"){var p=new jme(r);d=p.getCorrelationContextHeader(),a=p.getOperationName({})}var f=t.generateContextObject(c.traceId,c.parentId,a,d,c,u);return f}if(s){var c=new Dv(s.traceparent?s.traceparent.toString():null),u=new LG(s.tracestate?s.tracestate.toString():null),p=new jme(e),f=t.generateContextObject(c.traceId,c.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),c,u);return f}return fx.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();mN.CorrelationContextManager=Sqe;var Eqe=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){fx.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var zme=k(mx=>{"use strict";Object.defineProperty(mx,"__esModule",{value:!0});mx.dispose=mx.enable=void 0;var hN=Ts(),Tqe=ti(),gN=vi(),ah=[],OG=function(t){var e=t.data.message;ah.forEach(function(r){e instanceof Error&&!r.config.enableLoggerErrorToTrace?r.trackException({exception:e}):e instanceof Error?r.trackTrace({message:e.toString(),severity:t.data.stderr?hN.SeverityLevel.Error:hN.SeverityLevel.Information}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?hN.SeverityLevel.Warning:hN.SeverityLevel.Information}))})};function Cqe(t,e){if(t){var r=ah.find(function(n){return n==e});if(r)return;ah.length===0&&gN.channel.subscribe("console",OG,gN.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(Tqe.StatsbeatInstrumentation.CONSOLE)}),ah.push(e)}else ah=ah.filter(function(n){return n!=e}),ah.length===0&&gN.channel.unsubscribe("console",OG)}mx.enable=Cqe;function Iqe(){gN.channel.unsubscribe("console",OG),ah=[]}mx.dispose=Iqe});var Vme=k(gx=>{"use strict";Object.defineProperty(gx,"__esModule",{value:!0});gx.dispose=gx.enable=void 0;var hx=Ts(),wqe=ti(),vN=vi(),ch=[],Rqe={10:hx.SeverityLevel.Verbose,20:hx.SeverityLevel.Verbose,30:hx.SeverityLevel.Information,40:hx.SeverityLevel.Warning,50:hx.SeverityLevel.Error,60:hx.SeverityLevel.Critical},MG=function(t){var e=t.data.result,r=Rqe[t.data.level];ch.forEach(function(n){try{var i=JSON.parse(e);if(i.err){var o=new Error(i.err.message);if(o.name=i.err.name,o.stack=i.err.stack,n.config.enableLoggerErrorToTrace){n.trackTrace({message:e,severity:r});return}n.trackException({exception:o});return}}catch{}n.trackTrace({message:e,severity:r})})};function Aqe(t,e){if(t){var r=ch.find(function(n){return n==e});if(r)return;ch.length===0&&vN.channel.subscribe("bunyan",MG,vN.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(wqe.StatsbeatInstrumentation.BUNYAN)}),ch.push(e)}else ch=ch.filter(function(n){return n!=e}),ch.length===0&&vN.channel.unsubscribe("bunyan",MG)}gx.enable=Aqe;function Pqe(){vN.channel.unsubscribe("bunyan",MG),ch=[]}gx.dispose=Pqe});var $me=k(vx=>{"use strict";Object.defineProperty(vx,"__esModule",{value:!0});vx.dispose=vx.enable=void 0;var kqe=ti(),Zo=Ts(),yN=vi(),uh=[],Dqe={syslog:function(t){var e={emerg:Zo.SeverityLevel.Critical,alert:Zo.SeverityLevel.Critical,crit:Zo.SeverityLevel.Critical,error:Zo.SeverityLevel.Error,warning:Zo.SeverityLevel.Warning,notice:Zo.SeverityLevel.Information,info:Zo.SeverityLevel.Information,debug:Zo.SeverityLevel.Verbose};return e[t]===void 0?Zo.SeverityLevel.Information:e[t]},npm:function(t){var e={error:Zo.SeverityLevel.Error,warn:Zo.SeverityLevel.Warning,info:Zo.SeverityLevel.Information,verbose:Zo.SeverityLevel.Verbose,debug:Zo.SeverityLevel.Verbose,silly:Zo.SeverityLevel.Verbose};return e[t]===void 0?Zo.SeverityLevel.Information:e[t]},unknown:function(t){return Zo.SeverityLevel.Information}},FG=function(t){var e=t.data.message,r=Dqe[t.data.levelKind](t.data.level);uh.forEach(function(n){e instanceof Error&&!n.config.enableLoggerErrorToTrace?n.trackException({exception:e,properties:t.data.meta}):e instanceof Error?n.trackTrace({message:e.toString(),severity:r,properties:t.data.meta}):n.trackTrace({message:e,severity:r,properties:t.data.meta})})};function Nqe(t,e){if(t){var r=uh.find(function(n){return n==e});if(r)return;uh.length===0&&yN.channel.subscribe("winston",FG,yN.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(kqe.StatsbeatInstrumentation.WINSTON)}),uh.push(e)}else uh=uh.filter(function(n){return n!=e}),uh.length===0&&yN.channel.unsubscribe("winston",FG)}vx.enable=Nqe;function Lqe(){yN.channel.unsubscribe("winston",FG),uh=[]}vx.dispose=Lqe});var Kme=k((QRt,Wme)=>{"use strict";var Oqe=kD(),Mqe=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){Oqe.IsInitialized&&(zme().enable(e&&r,this._client),Vme().enable(e,this._client),$me().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();Wme.exports=Mqe});var Qme=k((XRt,Yme)=>{"use strict";var Fqe=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(i,o,s){s===void 0&&(s=new Error(t._FALLBACK_ERROR_MESSAGE));var a={exception:s};a.contextObjects={},a.contextObjects.Error=s,r._client.trackException(a),r._client.flush({isAppCrashing:!0}),i&&o&&process.listeners(o).length===1&&(console.error(s),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();Yme.exports=Fqe});var _N=k((JRt,Xme)=>{"use strict";var bN=require("os"),Kc=ti(),Uqe=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=bN.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=bN.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],l="% cpu("+a+") ",d=c.model,p=c.speed,f=c.times,m=u.times,h=f.user-m.user||0;r+=h;var g=f.sys-m.sys||0;n+=g;var v=f.nice-m.nice||0;i+=v;var y=f.idle-m.idle||0;o+=y;var b=f.irq-m.irq||0;s+=b}var x=void 0;if(typeof process.cpuUsage=="function"){var S=process.cpuUsage(),T=process.hrtime(),L=S.user-this._lastAppCpuUsage.user+(S.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var M=(T[0]-this._lastHrtime[0])*1e6+(T[1]-this._lastHrtime[1])/1e3||0;x=100*L/(M*e.length)}this._lastAppCpuUsage=S,this._lastHrtime=T}var j=r+n+i+o+s||1;this._client.trackMetric({name:Kc.PerformanceCounter.PROCESSOR_TIME,value:(j-o)/j*100}),this._client.trackMetric({name:Kc.PerformanceCounter.PROCESS_TIME,value:x||r/j*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=bN.freemem(),r=process.memoryUsage().rss,n=bN.totalmem()-e;this._client.trackMetric({name:Kc.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:Kc.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Kc.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:Kc.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Kc.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Kc.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:Kc.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:Kc.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Kc.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,o=i/1e3;if(i>0){var s=n/o;this._client.trackMetric({name:Kc.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();Xme.exports=Uqe});var Jme=k(xN=>{"use strict";Object.defineProperty(xN,"__esModule",{value:!0});xN.AggregatedMetricCounter=void 0;var Bqe=function(){function t(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();xN.AggregatedMetricCounter=Bqe});var Zme=k(SN=>{"use strict";Object.defineProperty(SN,"__esModule",{value:!0});SN.PreaggregatedMetricPropertyNames=void 0;SN.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var BG=k((UG,ehe)=>{"use strict";var TN=UG&&UG.__assign||function(){return TN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},TN.apply(this,arguments)},EN=ti(),qqe=Jme(),Hqe=Zme(),Gqe=function(){function t(e,r){r===void 0&&(r=6e4),t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,t._dependencyCountersCollection=[],t._requestCountersCollection=[],t._exceptionCountersCollection=[],t._traceCountersCollection=[],this._client=e,this._collectionInterval=r}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countException=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._exceptionCountersCollection);r.totalCount++}},t.countTrace=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._traceCountersCollection);r.totalCount++}},t.countRequest=function(e,r){if(t.isEnabled()){var n,i=t._getAggregatedCounter(r,this._requestCountersCollection);if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;i.intervalExecutionTime+=n,i.totalCount++}},t.countDependency=function(e,r){if(t.isEnabled()){var n=t._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof e=="string")i=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")i=e;else return;n.intervalExecutionTime+=i,n.totalCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},t._getAggregatedCounter=function(e,r){for(var n=!1,i=0;i<r.length;i++){if(e===r[i].dimensions)return r[i];if(Object.keys(e).length===Object.keys(r[i].dimensions).length){for(var o in e)if(e[o]!=r[i].dimensions[o]){n=!0;break}if(!n)return r[i];n=!1}}var s=new qqe.AggregatedMetricCounter(e);return r.push(s),s},t.prototype._trackRequestMetrics=function(){for(var e=0;e<t._requestCountersCollection.length;e++){var r=t._requestCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:EN.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackDependencyMetrics=function(){for(var e=0;e<t._dependencyCountersCollection.length;e++){var r=t._dependencyCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:EN.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackExceptionMetrics=function(){for(var e=0;e<t._exceptionCountersCollection.length;e++){var r=t._exceptionCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:EN.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackTraceMetrics=function(){for(var e=0;e<t._traceCountersCollection.length;e++){var r=t._traceCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:EN.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackPreAggregatedMetric=function(e){var r={};for(var n in e.dimensions)r[Hqe.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];r=TN(TN({},r),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();ehe.exports=Gqe});var yx=k((t2t,the)=>{"use strict";var Zp=require("os"),jqe=require("fs"),zqe=require("path"),Vqe=Ts(),$qe=ti(),Wqe=Nn(),Kqe=function(){function t(e){this.keys=new Vqe.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){try{if(e=e||zqe.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";var r=JSON.parse(jqe.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}this.tags[this.keys.applicationVersion]=t.appVersion[e]}catch(n){Wqe.info("Failed to read app version: ",n)}},t.prototype._loadDeviceContext=function(){var e=Zp&&Zp.hostname(),r=t.DefaultRoleName;process.env.WEBSITE_SITE_NAME&&(r=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e=process.env.WEBSITE_INSTANCE_ID),this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=e,this.tags[this.keys.deviceOSVersion]=Zp&&Zp.type()+" "+Zp.release(),this.tags[this.keys.cloudRole]=r,this.tags["ai.device.osArchitecture"]=Zp&&Zp.arch(),this.tags["ai.device.osPlatform"]=Zp&&Zp.platform()},t.prototype._loadInternalContext=function(){t.sdkVersion=$qe.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();the.exports=Kqe});var ihe=k((r2t,nhe)=>{"use strict";var Yqe=require("crypto"),rhe=require("os"),Qqe=ti(),Xqe=yx(),Jqe=function(){function t(e){this._collectionInterval=9e5,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return r.trackHeartBeat(r._client.config,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n={},i=Xqe.sdkVersion;n.sdkVersion=i,n.osType=rhe.type(),n.osVersion=rhe.release(),this._uniqueProcessId||(this._uniqueProcessId=Yqe.randomBytes(16).toString("hex")),n.processSessionId=this._uniqueProcessId,process.env.WEBSITE_SITE_NAME&&(n.appSrv_SiteName=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_HOME_STAMPNAME&&(n.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME),process.env.WEBSITE_HOSTNAME&&(n.appSrv_wsHost=process.env.WEBSITE_HOSTNAME),process.env.WEBSITE_OWNER_NAME&&(n.appSrv_wsOwner=process.env.WEBSITE_OWNER_NAME),process.env.WEBSITE_RESOURCE_GROUP&&(n.appSrv_ResourceGroup=process.env.WEBSITE_RESOURCE_GROUP),process.env.WEBSITE_SLOT_NAME&&(n.appSrv_SlotName=process.env.WEBSITE_SLOT_NAME),this._client.trackMetric({name:Qqe.HeartBeatMetricName,value:0,properties:n}),r()},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();nhe.exports=Jqe});var ohe=k(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.isContentTypeHeaderHtml=Bt.insertSnippetByIndex=Bt.getContentEncodingFromHeaders=Bt.isSupportedContentEncoding=Bt.findBufferEncodingType=Bt.isBufferType=Bt.getBrotliDecompressSync=Bt.getBrotliDecompressAsync=Bt.getBrotliCompressSync=Bt.getBrotliCompressAsync=Bt.inflateAsync=Bt.deflateAsync=Bt.gunzipAsync=Bt.gzipAsync=Bt.isBrotliSupperted=Bt.bufferEncodingTypes=Bt.contentEncodingMethod=void 0;var IN=require("zlib"),bx=require("util"),CN;(function(t){t.GZIP="gzip",t.DEFLATE="deflate",t.BR="br"})(CN=Bt.contentEncodingMethod||(Bt.contentEncodingMethod={}));Bt.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var Zqe=function(){var t=process.versions.node.split(".")[0];return parseInt(t)>=10};Bt.isBrotliSupperted=Zqe;Bt.gzipAsync=bx.promisify(IN.gzip);Bt.gunzipAsync=bx.promisify(IN.gunzip);Bt.deflateAsync=bx.promisify(IN.deflate);Bt.inflateAsync=bx.promisify(IN.inflate);var eHe=function(t){var e=Bt.isBrotliSupperted();return e&&typeof t.brotliCompress=="function"?bx.promisify(t.brotliCompress):null};Bt.getBrotliCompressAsync=eHe;var tHe=function(t){var e=Bt.isBrotliSupperted();return e&&typeof t.brotliCompressSync=="function"?t.brotliCompressSync:null};Bt.getBrotliCompressSync=tHe;var rHe=function(t){var e=Bt.isBrotliSupperted();return e&&typeof t.brotliDecompress=="function"?bx.promisify(t.brotliDecompress):null};Bt.getBrotliDecompressAsync=rHe;var nHe=function(t){var e=Bt.isBrotliSupperted();return e&&typeof t.brotliDecompressSync=="function"?t.brotliDecompressSync:null};Bt.getBrotliDecompressSync=nHe;var iHe=function(t,e){var r=e||"utf8",n=!1;if(Buffer.isEncoding(r)){var i=Buffer.from(t.toString(r),r);n=i.toJSON().data.toString()===t.toJSON().data.toString()}return n};Bt.isBufferType=iHe;var oHe=function(t){var e=null;for(var r in Bt.bufferEncodingTypes){var n=Bt.bufferEncodingTypes[r];if(Buffer.isEncoding(n)&&Bt.isBufferType(t,n)){e=n;break}}return e};Bt.findBufferEncodingType=oHe;var sHe=function(t){var e=null;switch(t){case"gzip":e=CN.GZIP;break;case"br":e=CN.BR;break;case"deflate":e=CN.DEFLATE;break;default:}return e};Bt.isSupportedContentEncoding=sHe;var aHe=function(t){var e=[],r=t.getHeader("Content-Encoding");if(!r)return null;if(typeof r=="string"){var n=Bt.isSupportedContentEncoding(r);n&&e.push(n)}return e};Bt.getContentEncodingFromHeaders=aHe;var cHe=function(t,e,r){if(t<0)return null;var n=null,i=e.substring(0,t),o=e.substring(t);return n=i+'<script type="text/javascript">'+r+"</script>"+o,n};Bt.insertSnippetByIndex=cHe;var uHe=function(t){var e=!1,r=t.getHeader("Content-Type");return r&&(typeof r=="string"?e=r.indexOf("html")>=0:e=r.toString().indexOf("html")>=0),e};Bt.isContentTypeHeaderHtml=uHe});var she=k(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.getResourceProvider=Ro.getOsPrefix=Ro.isFunctionApp=Ro.isWebApp=Ro.isLinux=Ro.isWindows=void 0;var lHe=function(){return process.platform==="win32"};Ro.isWindows=lHe;var dHe=function(){return process.platform==="linux"};Ro.isLinux=dHe;var pHe=function(){return!!process.env.WEBSITE_SITE_NAME};Ro.isWebApp=pHe;var fHe=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME};Ro.isFunctionApp=fHe;var mHe=function(){return Ro.isWindows()?"w":Ro.isLinux()?"l":"u"};Ro.getOsPrefix=mHe;var hHe=function(){return Ro.isWebApp()?"a":Ro.isFunctionApp()?"f":"u"};Ro.getResourceProvider=hHe});var qG=k((o2t,che)=>{"use strict";var ahe=ti(),gHe=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(o,s){var a=s.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var c=a[0].toLowerCase(),u=a[1];o[c]=u}return o},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||ahe.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||ahe.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t.isIkeyValid=function(e){if(!e||e=="")return!1;var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();che.exports=gHe});var uhe={};an(uhe,{webSnippet:()=>vHe});var vHe,lhe=I(()=>{vHe=`!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r
// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
cfg: { // Application Insights Configuration\r
    instrumentationKey: "INSTRUMENTATION_KEY"\r
}});`});var ghe=k((s2t,hhe)=>{"use strict";var dhe=require("http"),phe=require("https"),_x=require("zlib"),ad=Nn(),Yc=ohe(),fhe=she(),fI=ti(),mhe=qG(),yHe=(lhe(),Gi(uhe)),bHe=function(){function t(e){var r;if(this._isIkeyValid=!0,t.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");t.INSTANCE=this,t._aiUrl=fI.WEB_INSTRUMENTATION_DEFAULT_SOURCE,t._aiDeprecatedUrl=fI.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var n=this._getWebSnippetIkey((r=e.config)===null||r===void 0?void 0:r.webInstrumentationConnectionString);this._webInstrumentationIkey=n||e.config.instrumentationKey,this._clientWebInstrumentationConfig=e.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=e.config.webInstrumentationSrc,this._statsbeat=e.getStatsbeat()}return t.prototype.enable=function(e,r){this._isEnabled=e,this._webInstrumentationIkey=this._getWebSnippetIkey(r)||this._webInstrumentationIkey,t._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(fI.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(fI.StatsbeatFeature.WEB_SNIPPET)},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._getWebSnippetIkey=function(e){var r=null;try{var n=mhe.parse(e),i=n.instrumentationkey||"";mhe.isIkeyValid(i)?(this._isIkeyValid=!0,r=i):(this._isIkeyValid=!1,ad.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(o){ad.info("get web snippet ikey error: "+o)}return r},t.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),r=fhe.getOsPrefix(),n=fhe.getResourceProvider(),i=this._webInstrumentationIkey+`",\r
`+e+` disableIkeyDeprecationMessage: true,\r
 sdkExtension: "`+n+r+"d_n_",o=yHe.webSnippet.replace("INSTRUMENTATION_KEY",i);return this._clientWebInstrumentationSrc?o.replace(fI.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):o},t.prototype._getClientWebInstrumentationConfigStr=function(e){var r="";try{e!=null&&e.length>0&&e.forEach(function(n){var i=n.name;if(i!==void 0){var o=n.value,s="";switch(typeof o){case"function":break;case"object":break;case"string":s=" "+i+': "'+o+`",\r
`,r+=s;break;default:s=" "+i+": "+o+`,\r
`,r+=s;break}}})}catch{this._isEnabled=!1,ad.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return r},t.prototype._initialize=function(){this._isInitialized=!0;var e=dhe.createServer,r=phe.createServer,n=this._isEnabled;dhe.createServer=function(i){var o=i;return o&&(i=function(s,a){var c=a.write,u=s.method=="GET";a.write=function(p,f,m){try{if(n&&u){var h=Yc.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(y){ad.warn("Inject snippet error: "+y)}return c.apply(a,arguments)};var l=a.end;return a.end=function(p,f,m){if(n&&u)try{if(n&&u){var h=Yc.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(y){ad.warn("Inject snipet error: "+y)}return l.apply(a,arguments)},o(s,a)}),e(i)},phe.createServer=function(i,o){var s=o;if(s)return o=function(a,c){var u=a.method=="GET",l=c.write,d=c.end;return c.write=function(f,m,h){try{if(n&&u){var g=Yc.getContentEncodingFromHeaders(c),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(c,f)&&(arguments[0]=this.InjectWebSnippet(c,f,void 0,v));else if(g.length){var y=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,y)}}}catch(b){ad.warn("Inject snippet error: "+b)}return l.apply(c,arguments)},c.end=function(f,m,h){try{if(n&&u){var g=Yc.getContentEncodingFromHeaders(c),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(c,f)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,void 0,v));else if(g.length){var y=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,y)}}}catch(b){ad.warn("Inject snippet error: "+b)}return d.apply(c,arguments)},s(a,c)},r(i,o)}},t.prototype.ValidateInjection=function(e,r){try{if(!e||!r||e.statusCode!=200)return!1;var n=Yc.isContentTypeHeaderHtml(e);if(!n)return!1;var i=r.slice().toString();if(i.indexOf("<head>")>=0&&i.indexOf("</head>")>=0&&i.indexOf(t._aiUrl)<0&&i.indexOf(t._aiDeprecatedUrl)<0)return!0}catch(o){ad.info("validate injections error: "+o)}return!1},t.prototype.InjectWebSnippet=function(e,r,n,i){try{var o=!!n;if(o)e.removeHeader("Content-Length"),r=this._getInjectedCompressBuffer(e,r,n),e.setHeader("Content-Length",r.length);else{var s=r.toString(),a=s.indexOf("</head>");if(a<0)return r;var c=Yc.insertSnippetByIndex(a,s,t._snippet);if(typeof r=="string")e.removeHeader("Content-Length"),r=c,e.setHeader("Content-Length",Buffer.byteLength(r));else if(Buffer.isBuffer(r)){var u=i||"utf8",l=Yc.isBufferType(r,u);if(l){e.removeHeader("Content-Length");var d=Buffer.from(c).toString(u);r=Buffer.from(d,u),e.setHeader("Content-Length",r.length)}}}}catch(p){ad.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+p)}return r},t.prototype._getInjectedCompressBuffer=function(e,r,n){try{switch(n){case Yc.contentEncodingMethod.GZIP:var i=_x.gunzipSync(r);if(this.ValidateInjection(e,i)){var o=this.InjectWebSnippet(e,i);r=_x.gzipSync(o)}break;case Yc.contentEncodingMethod.DEFLATE:var s=_x.inflateSync(r);if(this.ValidateInjection(e,s)){var a=this.InjectWebSnippet(e,s);r=_x.deflateSync(a)}break;case Yc.contentEncodingMethod.BR:var c=Yc.getBrotliDecompressSync(_x),u=Yc.getBrotliCompressSync(_x);if(c&&u){var l=c(r);if(this.ValidateInjection(e,l)){var d=this.InjectWebSnippet(e,l);r=u(d)}break}}}catch(p){ad.info("get web injection compress buffer error: "+p)}return r},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();hhe.exports=bHe});var yhe=k((GG,vhe)=>{"use strict";var _He=GG&&GG.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qc=require("url"),HG=Ts(),xHe=Qo(),SHe=$_(),EHe=xH(),THe=Sv(),CHe=function(t){_He(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=xHe.getCorrelationContextTarget(r,SHe.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=this.method.toUpperCase(),o=HG.RemoteDependencyDataConstants.TYPE_HTTP,s="";try{var a=new Qc.URL(this.url);a.search=void 0,a.hash=void 0,i+=" "+a.pathname,s=a.hostname,a.port&&(s+=":"+a.port)}catch{}this.correlationId?(o=HG.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==THe.correlationIdPrefix&&(s+=" | "+this.correlationId)):o=HG.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:n,name:i,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:s};if(r&&r.time?c.time=r.time:this.startTime&&(c.time=new Date(this.startTime)),r){for(var u in r)c[u]||(c[u]=r[u]);if(r.properties)for(var u in r.properties)c.properties[u]=r.properties[u]}return c},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)try{r=new Qc.URL(r)}catch{}else try{var i=new Qc.URL("http://"+r);i.port==="443"?r=new Qc.URL("https://"+r):r=new Qc.URL("http://"+r)}catch{}else{if(r&&typeof Qc.URL=="function"&&r instanceof Qc.URL)return Qc.format(r);var o=r;r={},o&&Object.keys(o).forEach(function(c){r[c]=o[c]})}if(r.path&&r.host)try{var s=new Qc.URL(r.path,"http://"+r.host+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.path&&r.hostname&&!r.host)try{var s=new Qc.URL(r.path,"http://"+r.hostname+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.host&&r.port)try{var a=new Qc.URL("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}catch{}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",Qc.format(r)},e}(EHe);vhe.exports=CHe});var bhe=k(xx=>{"use strict";var wN=xx&&xx.__assign||function(){return wN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},wN.apply(this,arguments)};Object.defineProperty(xx,"__esModule",{value:!0});xx.parseEventHubSpan=void 0;var jG=(lr(),Gi(M_)),IHe=(Xs(),Gi(Wue)),wHe=($u(),Gi(cq)),mI=ti(),RHe=function(t){var e=0,r=0,n=IHe.hrTimeToMilliseconds(t.startTime);return t.links.forEach(function(i){var o=i.attributes,s=o?.[mI.ENQUEUED_TIME];s&&(e+=1,r+=n-(parseFloat(s.toString())||0))}),Math.max(r/(e||1),0)},AHe=function(t,e){var r,n=t.attributes[mI.AzNamespace],i=(t.attributes[wHe.SemanticAttributes.NET_PEER_NAME]||t.attributes["peer.address"]||"unknown").replace(/\/$/g,""),o=t.attributes[mI.MessageBusDestination]||"unknown";switch(t.kind){case jG.SpanKind.CLIENT:e.dependencyTypeName=n,e.target=i+"/"+o;break;case jG.SpanKind.PRODUCER:e.dependencyTypeName=mI.DependencyTypeName.QueueMessage+" | "+n,e.target=i+"/"+o;break;case jG.SpanKind.CONSUMER:e.source=i+"/"+o,e.measurements=wN(wN({},e.measurements),(r={},r[mI.TIME_SINCE_ENQUEUED]=RHe(t),r));break;default:}};xx.parseEventHubSpan=AHe});var She=k(RN=>{"use strict";Object.defineProperty(RN,"__esModule",{value:!0});RN.spanToTelemetryContract=void 0;var _he=require("url"),Xu=(lr(),Gi(M_)),Kt=($u(),Gi(cq)),ef=ti(),PHe=bhe(),kHe=Qo();function DHe(t){for(var e={},r=0,n=Object.keys(t.attributes);r<n.length;r++){var i=n[r];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(e[i]=t.attributes[i])}var o=t.links.map(function(s){return{operation_Id:s.context.traceId,id:s.context.spanId}});return o.length>0&&(e["_MS.links"]=kHe.stringify(o)),e}function NHe(t){return t===Kt.DbSystemValues.DB2||t===Kt.DbSystemValues.DERBY||t===Kt.DbSystemValues.MARIADB||t===Kt.DbSystemValues.MSSQL||t===Kt.DbSystemValues.ORACLE||t===Kt.DbSystemValues.SQLITE||t===Kt.DbSystemValues.OTHER_SQL||t===Kt.DbSystemValues.HSQLDB||t===Kt.DbSystemValues.H2}function xhe(t){var e=t.attributes[Kt.SemanticAttributes.HTTP_METHOD];if(e){var r=t.attributes[Kt.SemanticAttributes.HTTP_URL];if(r)return String(r);var n=t.attributes[Kt.SemanticAttributes.HTTP_SCHEME],i=t.attributes[Kt.SemanticAttributes.HTTP_TARGET];if(n&&i){var o=t.attributes[Kt.SemanticAttributes.HTTP_HOST];if(o)return n+"://"+o+i;var s=t.attributes[Kt.SemanticAttributes.NET_PEER_PORT];if(s){var a=t.attributes[Kt.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+i;var c=t.attributes[Kt.SemanticAttributes.NET_PEER_IP];if(c)return n+"://"+c+":"+s+i}}}return""}function zG(t){var e=t.attributes[Kt.SemanticAttributes.PEER_SERVICE],r=t.attributes[Kt.SemanticAttributes.HTTP_HOST],n=t.attributes[Kt.SemanticAttributes.HTTP_URL],i=t.attributes[Kt.SemanticAttributes.NET_PEER_NAME],o=t.attributes[Kt.SemanticAttributes.NET_PEER_IP];return e?String(e):r?String(r):n?String(n):i?String(i):o?String(o):""}function LHe(t){var e={name:t.name,success:t.status.code!=Xu.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};t.kind===Xu.SpanKind.PRODUCER&&(e.dependencyTypeName=ef.DependencyTypeName.QueueMessage),t.kind===Xu.SpanKind.INTERNAL&&t.parentSpanId&&(e.dependencyTypeName=ef.DependencyTypeName.InProc);var r=t.attributes[Kt.SemanticAttributes.HTTP_METHOD],n=t.attributes[Kt.SemanticAttributes.DB_SYSTEM],i=t.attributes[Kt.SemanticAttributes.RPC_SYSTEM];if(r){e.dependencyTypeName=ef.DependencyTypeName.Http;var o=t.attributes[Kt.SemanticAttributes.HTTP_URL];if(o){var s="";try{var a=new _he.URL(String(o));s=a.pathname}catch{}e.name=r+" "+s}e.data=xhe(t);var c=t.attributes[Kt.SemanticAttributes.HTTP_STATUS_CODE];c&&(e.resultCode=String(c));var u=zG(t);if(u){try{var l=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),d=l.exec(u);if(d!=null){var p=d[1],f=d[3];(p=="https"&&f==":443"||p=="http"&&f==":80")&&(u=d[1]+d[2]+d[4])}}catch{}e.target=""+u}}else if(n){String(n)===Kt.DbSystemValues.MYSQL?e.dependencyTypeName="mysql":String(n)===Kt.DbSystemValues.POSTGRESQL?e.dependencyTypeName="postgresql":String(n)===Kt.DbSystemValues.MONGODB?e.dependencyTypeName="mongodb":String(n)===Kt.DbSystemValues.REDIS?e.dependencyTypeName="redis":NHe(String(n))?e.dependencyTypeName="SQL":e.dependencyTypeName=String(n);var m=t.attributes[Kt.SemanticAttributes.DB_STATEMENT],h=t.attributes[Kt.SemanticAttributes.DB_OPERATION];m?e.data=String(m):h&&(e.data=String(h));var u=zG(t),g=t.attributes[Kt.SemanticAttributes.DB_NAME];u?e.target=g?u+"|"+g:""+u:e.target=g?""+g:""+n}else if(i){e.dependencyTypeName=ef.DependencyTypeName.Grpc;var v=t.attributes[Kt.SemanticAttributes.RPC_GRPC_STATUS_CODE];v&&(e.resultCode=String(v));var u=zG(t);u?e.target=""+u:i&&(e.target=String(i))}return e}function OHe(t){var e={name:t.name,success:t.status.code!=Xu.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},r=t.attributes[Kt.SemanticAttributes.HTTP_METHOD],n=t.attributes[Kt.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(r){if(t.kind==Xu.SpanKind.SERVER){var i=t.attributes[Kt.SemanticAttributes.HTTP_ROUTE],o=t.attributes[Kt.SemanticAttributes.HTTP_URL];if(i)e.name=r+" "+i;else if(o)try{var s=new _he.URL(String(o));e.name=r+" "+s.pathname}catch{}}e.url=xhe(t);var a=t.attributes[Kt.SemanticAttributes.HTTP_STATUS_CODE];a&&(e.resultCode=String(a))}else n&&(e.resultCode=String(n));return e}function MHe(t){var e;switch(t.kind){case Xu.SpanKind.CLIENT:case Xu.SpanKind.PRODUCER:case Xu.SpanKind.INTERNAL:e=LHe(t);break;case Xu.SpanKind.SERVER:case Xu.SpanKind.CONSUMER:e=OHe(t);break}var r=t.spanContext?t.spanContext():t.context(),n=""+r.spanId,i=Math.round(t.duration[0]*1e3+t.duration[1]/1e6);return e.id=n,e.duration=i,e.properties=DHe(t),t.attributes[ef.AzNamespace]&&(t.kind===Xu.SpanKind.INTERNAL&&(e.dependencyTypeName=ef.DependencyTypeName.InProc+" | "+t.attributes[ef.AzNamespace]),t.attributes[ef.AzNamespace]===ef.MicrosoftEventHub&&PHe.parseEventHubSpan(t,e)),e}RN.spanToTelemetryContract=MHe});var The=k(dh=>{"use strict";var Sx=dh&&dh.__assign||function(){return Sx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Sx.apply(this,arguments)};Object.defineProperty(dh,"__esModule",{value:!0});dh.AsyncScopeManager=dh.OpenTelemetryScopeManagerWrapper=void 0;var lh=sh(),FHe=require("events"),Ehe=function(){function t(){}return t.prototype.active=function(){var e=this,r=lh.CorrelationContextManager.getCurrentContext();return Sx(Sx({},r),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,i=e.name,o=t._spanToContext(e,n,i);return lh.CorrelationContextManager.runWithContext(o,r)()},t.prototype.bind=function(e){return typeof e=="function"?lh.CorrelationContextManager.wrapCallback(e):(e instanceof FHe.EventEmitter&&lh.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return lh.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return lh.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var i=e.spanContext?e.spanContext():e.context(),o=Sx(Sx({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),s=r?"|"+i.traceId+"."+r+".":i.traceId,a=lh.CorrelationContextManager.getCurrentContext();a&&(o.traceId=a.operation.id,r||(s=a.operation.parentId));var c=lh.CorrelationContextManager.spanToContextObject(o,s,n);return c},t}();dh.OpenTelemetryScopeManagerWrapper=Ehe;dh.AsyncScopeManager=new Ehe});var Che=k(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.enable=ph.subscriber=void 0;var hI=(lr(),Gi(M_)),UHe=ti(),VG=vi(),BHe=She(),qHe=The(),Nv=[],HHe=function(t){try{var e=t.data,r=BHe.spanToTelemetryContract(e);qHe.AsyncScopeManager.with(e,function(){Nv.forEach(function(n){e.kind===hI.SpanKind.SERVER||e.kind===hI.SpanKind.CONSUMER?n.trackRequest(r):(e.kind===hI.SpanKind.CLIENT||e.kind===hI.SpanKind.INTERNAL||e.kind===hI.SpanKind.PRODUCER)&&n.trackDependency(r)})})}catch{}};ph.subscriber=HHe;function GHe(t,e){if(t){var r=Nv.find(function(n){return n==e});if(r)return;Nv.length===0&&VG.channel.subscribe("azure-coretracing",ph.subscriber,VG.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(UHe.StatsbeatInstrumentation.AZURE_CORE_TRACING)}),Nv.push(e)}else Nv=Nv.filter(function(n){return n!=e}),Nv.length===0&&VG.channel.unsubscribe("azure-coretracing",ph.subscriber)}ph.enable=GHe});var Ihe=k(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.enable=fh.subscriber=void 0;var jHe=ti(),$G=vi(),Lv=[],zHe=function(t){t.data.event.commandName!=="ismaster"&&Lv.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};fh.subscriber=zHe;function VHe(t,e){if(t){var r=Lv.find(function(n){return n==e});if(r)return;Lv.length===0&&$G.channel.subscribe("mongodb",fh.subscriber,$G.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(jHe.StatsbeatInstrumentation.MONGODB)}),Lv.push(e)}else Lv=Lv.filter(function(n){return n!=e}),Lv.length===0&&$G.channel.unsubscribe("mongodb",fh.subscriber)}fh.enable=VHe});var whe=k(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.enable=mh.subscriber=void 0;var $He=ti(),WG=vi(),Ov=[],WHe=function(t){Ov.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,o=r._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};mh.subscriber=WHe;function KHe(t,e){if(t){var r=Ov.find(function(n){return n==e});if(r)return;Ov.length===0&&WG.channel.subscribe("mysql",mh.subscriber,WG.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation($He.StatsbeatInstrumentation.MYSQL)}),Ov.push(e)}else Ov=Ov.filter(function(n){return n!=e}),Ov.length===0&&WG.channel.unsubscribe("mysql",mh.subscriber)}mh.enable=KHe});var Rhe=k(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.enable=hh.subscriber=void 0;var YHe=ti(),KG=vi(),Mv=[],QHe=function(t){Mv.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};hh.subscriber=QHe;function XHe(t,e){if(t){var r=Mv.find(function(n){return n==e});if(r)return;Mv.length===0&&KG.channel.subscribe("redis",hh.subscriber,KG.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(YHe.StatsbeatInstrumentation.REDIS)}),Mv.push(e)}else Mv=Mv.filter(function(n){return n!=e}),Mv.length===0&&KG.channel.unsubscribe("redis",hh.subscriber)}hh.enable=XHe});var Ahe=k(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.enable=gh.subscriber=void 0;var JHe=ti(),YG=vi(),Fv=[],ZHe=function(t){Fv.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,o=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:o,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};gh.subscriber=ZHe;function eGe(t,e){if(t){var r=Fv.find(function(n){return n==e});if(r)return;Fv.length===0&&YG.channel.subscribe("postgres",gh.subscriber,YG.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(JHe.StatsbeatInstrumentation.POSTGRES)}),Fv.push(e)}else Fv=Fv.filter(function(n){return n!=e}),Fv.length===0&&YG.channel.unsubscribe("postgres",gh.subscriber)}gh.enable=eGe});var Cx=k((XG,Phe)=>{"use strict";var AN=XG&&XG.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},Ex=require("http"),Tx=require("https"),PN=Nn(),QG=Qo(),vh=$_(),tGe=yhe(),gI=sh(),kN=DD(),rGe=kD(),vI=Sv(),nGe=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),rGe.IsInitialized&&(Che().enable(e,this._client),Ihe().enable(e,this._client),whe().enable(e,this._client),Rhe().enable(e,this._client),Ahe().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=Ex.request,n=Tx.request,i=function(o,s){try{var a=!s[t.disableCollectionRequestOption]&&!o[t.alreadyAutoCollectedFlag],c=null;if(s.headers&&(c=s.headers["User-Agent"]||s.headers["user-agent"],c&&c.toString().indexOf("azsdk-js")!==-1&&(a=!1)),o&&s&&a&&(gI.CorrelationContextManager.wrapEmitter(o),e._isEnabled))if(o[t.alreadyAutoCollectedFlag]=!0,gI.CorrelationContextManager.getCurrentContext())t.trackRequest(e._client,{options:s,request:o});else{var u=null;if(vI.w3cEnabled){var l=new kN;u=l.traceId}else{var d=vI.generateRequestId(null);u=vI.getRootId(d)}var p=gI.CorrelationContextManager.generateContextObject(u);gI.CorrelationContextManager.runWithContext(p,function(){t.trackRequest(e._client,{options:s,request:o})})}}catch(f){PN.warn("Failed to generate dependency telemetry.",QG.dumpObj(f))}};Ex.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=r.call.apply(r,AN([Ex,o],s));return i(c,o),c},Tx.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=n.call.apply(n,AN([Tx,o],s));return i(c,o),c},Ex.get=function(o){for(var s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(s=Ex.request).call.apply(s,AN([Ex,o],a));return u.end(),u},Tx.get=function(o){for(var s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(s=Tx.request).call.apply(s,AN([Tx,o],a));return u.end(),u}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){PN.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new tGe(r.options,r.request),i=gI.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&kN.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(vI.w3cEnabled){var a=new kN;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(QG.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var c=r.request.getHeader(vh.requestContextHeader);try{QG.safeIncludeCorrelationHeader(e,r.request,c)}catch(d){PN.warn("Request-Context header could not be set. Correlation of requests may be lost",d)}if(i&&i.operation)try{if(r.request.setHeader(vh.requestIdHeader,o),e.config.ignoreLegacyHeaders||(r.request.setHeader(vh.parentIdHeader,i.operation.id),r.request.setHeader(vh.rootIdHeader,o)),s||i.operation.traceparent)r.request.setHeader(vh.traceparentHeader,s||i.operation.traceparent.toString());else if(vI.w3cEnabled){var a=new kN().toString();r.request.setHeader(vh.traceparentHeader,a)}if(i.operation.tracestate){var u=i.operation.tracestate.toString();u&&r.request.setHeader(vh.traceStateHeader,u)}var l=i.customProperties.serializeToHeader();l&&r.request.setHeader(vh.correlationContextHeader,l)}catch(d){PN.warn("Correlation headers could not be set. Correlation of requests may be lost.",d)}}r.request.on&&(r.request.on("response",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onResponse(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects["http.ClientResponse"]=d,e.trackDependency(p)}}),r.request.on("error",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onError(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects.Error=d,e.trackDependency(p)}}),r.request.on("abort",function(){if(!r.isProcessed){r.isProcessed=!0,n.onError(new Error("The request has been aborted and the network socket has closed."));var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,e.trackDependency(d)}}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();Phe.exports=nGe});var ZG=k((h2t,Ohe)=>{"use strict";var khe=require("http"),Dhe=require("https"),Nhe=Nn(),Lhe=Qo(),iGe=$_(),JG=CH(),tf=sh(),oGe=_N(),sGe=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||oGe.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?tf.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&tf.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return tf.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._registerRequest=function(e,r,n){var i=this,o=new JG(e),s=this._generateCorrelationContext(o);tf.CorrelationContextManager.runWithContext(s,function(){i._isEnabled&&(e[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(i._client,{request:e,response:r},o)),typeof n=="function"&&n(e,r)})},t.prototype._initialize=function(){if(this._isInitialized=!0,!t.HANDLER_READY){t.HANDLER_READY=!0;var e=function(o){if(o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(s,a){tf.CorrelationContextManager.wrapEmitter(s),tf.CorrelationContextManager.wrapEmitter(a);var c=s&&!s[t.alreadyAutoCollectedFlag];s&&c&&t.INSTANCE?t.INSTANCE._registerRequest(s,a,o):o(s,a)}}},r=function(o){var s=o.addListener.bind(o);o.addListener=function(a,c){switch(a){case"request":case"checkContinue":return s(a,e(c));default:return s(a,c)}},o.on=o.addListener},n=khe.createServer;khe.createServer=function(o,s){if(s&&typeof s=="function"){var a=n(o,e(s));return r(a),a}else{var a=n(e(o));return r(a),a}};var i=Dhe.createServer;Dhe.createServer=function(o,s){var a=i(o,e(s));return r(a),a}}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){Nhe.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1,t.addResponseCorrelationIdHeader(e,r.response);var n=tf.CorrelationContextManager.getCurrentContext(),i=new JG(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){Nhe.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1;var i=tf.CorrelationContextManager.getCurrentContext(),o=n||new JG(r.request,i&&i.operation.parentId);Lhe.canIncludeCorrelationHeader(e,o.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=o.getOperationId(e.context.tags)||i.operation.id,i.operation.name=o.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,o,r,null,null)}),r.request.on&&r.request.on("error",function(s){t.endRequest(e,o,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";t.endRequest(e,o,r,null,s)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(iGe.requestContextHeader);Lhe.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,o){if(!n.isProcessed){n.isProcessed=!0,o?r.onError(o,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];var c=r.getLegacyRootId();c&&(s.properties.ai_legacyRootId=c),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(s)}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,tf.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.HANDLER_READY=!1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();Ohe.exports=sGe});var Uhe=k((tj,Fhe)=>{"use strict";var Xc=tj&&tj.__assign||function(){return Xc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xc.apply(this,arguments)},ej=require("os"),Uv=Ts(),Mhe=ti(),aGe=Qo(),cGe=Nn(),uGe=aGe.w3cTraceId(),lGe=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var o=ej&&typeof ej.hostname=="function"&&ej.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,c={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:uGe,MachineName:o,Instance:s,RoleName:a};return c},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case Uv.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case Uv.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case Uv.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case Uv.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case Uv.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=Xc(Xc({},r),{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=Xc(Xc({},r),{Message:e.data.baseData.message,SeverityLevel:Uv.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",o="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(c){i+=c.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),o=n[0].message,s=n[0].typeName);var a=Xc(Xc({},r),{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Xc(Xc({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Xc(Xc({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,o;e.data.baseType?(n=Mhe.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=Mhe.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):cGe.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],o=t.aggregateProperties(e);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:o};return s},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s={key:i,value:o};r.push(s)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};r.push(s)}return r},t.keys=new Uv.ContextTagKeys,t}();Fhe.exports=lGe});var qhe=k((g2t,Bhe)=>{"use strict";var dGe=function(){return(Date.now()+621355968e5)*1e4};Bhe.exports={getTransmissionTime:dGe}});var zhe=k((yI,jhe)=>{"use strict";var Hhe=yI&&yI.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Ghe=yI&&yI.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},pGe=require("https"),fGe=Cx(),rj=Nn(),mGe=qhe(),nj=Qo(),hGe=require("url"),Jc={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect-v2",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},gGe=function(){function t(e,r){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=r}return t.prototype.ping=function(e,r,n){var i=[{name:Jc.streamId,value:e.StreamId},{name:Jc.machineName,value:e.MachineName},{name:Jc.roleName,value:e.RoleName},{name:Jc.instanceName,value:e.Instance},{name:Jc.invariantVersion,value:e.InvariantVersion.toString()}];this._submitData(e,r,n,"ping",i)},t.prototype.post=function(e,r,n){return Hhe(this,void 0,void 0,function(){return Ghe(this,function(i){switch(i.label){case 0:return[4,this._submitData([e],r,n,"post")];case 1:return i.sent(),[2]}})})},t.prototype._submitData=function(e,r,n,i,o){return Hhe(this,void 0,void 0,function(){var s,a,c,u,l,d,p,f,m=this;return Ghe(this,function(h){switch(h.label){case 0:if(s=nj.stringify(e),a=(p={},p[fGe.disableCollectionRequestOption]=!0,p.host=r&&r.length>0?r:this._config.quickPulseHost,p.method=Jc.method,p.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,p.headers=(f={Expect:"100-continue"},f[Jc.time]=mGe.getTransmissionTime(),f["Content-Type"]="application/json",f["Content-Length"]=Buffer.byteLength(s),f),p),o&&o.length>0&&o.forEach(function(g){return a.headers[g.name]=g.value}),i!=="post")return[3,4];if(c=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!c)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,c.addAuthorizationHeader(a)];case 2:return h.sent(),[3,4];case 3:return u=h.sent(),l="Failed to get AAD bearer token for the Application. Error:",rj.info(t.TAG,l,u),[2];case 4:return this._config.httpsAgent?a.agent=this._config.httpsAgent:a.agent=nj.tlsRestrictedAgent,d=pGe.request(a,function(g){if(g.statusCode==200){var v=g.headers[Jc.subscribed]==="true",y=null;try{y=g.headers[Jc.endpointRedirect]?new hGe.URL(g.headers[Jc.endpointRedirect].toString()).host:null}catch(x){m._onError("Failed to parse redirect header from QuickPulse: "+nj.dumpObj(x))}var b=g.headers[Jc.pollingIntervalHint]?parseInt(g.headers[Jc.pollingIntervalHint].toString()):null;m._consecutiveErrors=0,n(v,g,y,b)}else m._onError("StatusCode:"+g.statusCode+" StatusMessage:"+g.statusMessage),n()}),d.on("error",function(g){m._onError(g),n()}),d.write(s),d.end(),[2]}})})},t.prototype._onError=function(e){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",rj.warn(t.TAG,r,e)):rj.info(t.TAG,r,e)},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();jhe.exports=gGe});var Yhe=k((bI,Khe)=>{"use strict";var Vhe=bI&&bI.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},$he=bI&&bI.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Whe=Nn(),ij=Uhe(),vGe=zhe(),yGe=ti(),bGe=yx(),_Ge=function(){function t(e,r,n){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=r||new bGe,this._sender=new vGe(this.config,n),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){if(this._isCollectingData){var r=ij.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)}},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=yGe.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=ij.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){return Vhe(this,void 0,void 0,function(){var e,r,n,i,o=this;return $he(this,function(s){switch(s.label){case 0:return e=Object.keys(this._metrics).map(function(a){return o._metrics[a]}),r=ij.createQuickPulseEnvelope(e,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:t.PING_INTERVAL,i=this._isCollectingData?t.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},t.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},t.prototype._post=function(e){return Vhe(this,void 0,void 0,function(){return $he(this,function(r){switch(r.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},t.prototype._quickPulseDone=function(e,r,n,i){e!=null?(this._isCollectingData!==e&&(Whe.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,Whe.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();Khe.exports=_Ge});var Qhe=k(Ix=>{"use strict";var DN=Ix&&Ix.__assign||function(){return DN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},DN.apply(this,arguments)};Object.defineProperty(Ix,"__esModule",{value:!0});Ix.AutoCollectNativePerformance=void 0;var _I=yx(),xGe=Nn(),SGe=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),t._metricsAvailable==null&&e&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");t._emitter=new o,t._metricsAvailable=!0,xGe.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e,r){var n=r.disableAllExtendedMetrics,i=r.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++){var u=c[a];s[u]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:DN(DN({},e),s)}:{isEnabled:e,disabledMetrics:s}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){var e;if(!this._disabledMetrics.gc){var r=t._emitter.getGCData();for(var n in r){var i=r[n].metrics,o=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+_I.sdkVersion,e)})}}},t.prototype._trackEventLoop=function(){var e;if(!this._disabledMetrics.loop){var r=t._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",o=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:o,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+_I.sdkVersion,e)})}}},t.prototype._trackHeapUsage=function(){var e,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+_I.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+_I.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+_I.sdkVersion,n)})}},t}();Ix.AutoCollectNativePerformance=SGe});var Zhe=k(yh=>{"use strict";var Xhe=yh&&yh.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Jhe=yh&&yh.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(yh,"__esModule",{value:!0});yh.AzureFunctionsHook=void 0;var NN=Nn(),oj=sh(),EGe=function(){function t(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=require("@azure/functions-core"),this._addPreInvocationHook(),this._addPostInvocationHook()}catch{NN.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return t.prototype._getFuncModelHelper=function(){if(this._cachedModelHelper===void 0){var e=this._functionsCoreModule.getProgrammingModel();e.name==="@azure/functions"&&(e.version.startsWith("3.")?this._cachedModelHelper=new TGe:e.version.startsWith("4.")&&(this._cachedModelHelper=new CGe)),this._cachedModelHelper||(this._cachedModelHelper=null,NN.warn('AzureFunctionsHook does not support model "'+e.name+'" version "'+e.version+'"'))}return this._cachedModelHelper},t.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},t.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},t.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",function(r){return Xhe(e,void 0,void 0,function(){var n,i,o,s;return Jhe(this,function(a){try{n=this._getFuncModelHelper(),n&&(i=r.invocationContext,o=oj.CorrelationContextManager.startOperation(i),o&&(o.customProperties.setProperty("InvocationId",i.invocationId),s=i.traceContext,s.attributes&&(o.customProperties.setProperty("ProcessId",s.attributes.ProcessId),o.customProperties.setProperty("LogLevel",s.attributes.LogLevel),o.customProperties.setProperty("Category",s.attributes.Category),o.customProperties.setProperty("HostInstanceId",s.attributes.HostInstanceId),o.customProperties.setProperty("AzFuncLiveLogsSessionId",s.attributes["#AzFuncLiveLogsSessionId"])),r.functionCallback=oj.CorrelationContextManager.wrapCallback(r.functionCallback,o),n.isHttpTrigger(r)&&this._autoGenerateIncomingRequests&&(r.hookData.appInsightsExtractedContext=o,r.hookData.appInsightsStartTime=Date.now())))}catch(c){return NN.warn("Failed to propagate context in Azure Functions",c),[2]}return[2]})})}))},t.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",function(r){return Xhe(e,void 0,void 0,function(){var n,i,o,s,a=this;return Jhe(this,function(c){try{n=this._getFuncModelHelper(),n&&this._autoGenerateIncomingRequests&&n.isHttpTrigger(r)&&(i=r.inputs[0],i&&(o=r.hookData.appInsightsStartTime||Date.now(),s=r.hookData.appInsightsExtractedContext,s?oj.CorrelationContextManager.runWithContext(s,function(){a._createIncomingRequestTelemetry(i,r,o,s.operation.parentId)}):this._createIncomingRequestTelemetry(i,r,o,null)))}catch(u){NN.warn("Error creating automatic incoming request in Azure Functions",u)}return[2]})})}))},t.prototype._createIncomingRequestTelemetry=function(e,r,n,i){var o=this._getFuncModelHelper().getStatusCodes(r),s=200;if(o)for(var a=0,c=o;a<c.length;a++){var u=c[a];if(typeof u=="number"&&Number.isInteger(u)){s=u;break}else if(typeof u=="string"){var l=parseInt(u);if(!isNaN(l)){s=l;break}}}else s=void 0;this._client.trackRequest({name:e.method+" "+e.url,resultCode:s,success:typeof s=="number"?0<s&&s<400:void 0,url:e.url,time:new Date(n),duration:Date.now()-n,id:i}),this._client.flush()},t.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},t}();yh.AzureFunctionsHook=EGe;var TGe=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=this._getInvocationContext(e),n,i=r.bindingDefinitions.find(function(o){return o.direction==="out"&&o.type.toLowerCase()==="http"});return i?.name==="$return"?n=e.result:i&&r.bindings&&r.bindings[i.name]!==void 0?n=r.bindings[i.name]:n=r.res,n?[n.statusCode,n.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return!!r.bindingDefinitions.find(function(n){var i;return((i=n.type)===null||i===void 0?void 0:i.toLowerCase())==="httptrigger"})},t}(),CGe=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=e.result;return r?[r.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return r.options.trigger.type.toLowerCase()==="httptrigger"},t}()});var sj=k((b2t,rge)=>{"use strict";var IGe=Sv(),ege=qG(),wGe=Nn(),tge=ti(),RGe=require("url"),AGe=Ck(),PGe=function(){function t(e){this._endpointBase=tge.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var r=this._connectionString,n=ege.parse(e),i=ege.parse(r),o=!n.instrumentationkey&&Object.keys(n).length>0?null:e,s=this._instrumentationKey;this.instrumentationKey=n.instrumentationkey||o||i.instrumentationkey||s;var a=""+(this.endpointUrl||n.ingestionendpoint||i.ingestionendpoint||this._endpointBase);a.endsWith("/")&&(a=a.slice(0,-1)),this.endpointUrl=a+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||30*1e3,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=n.ingestionendpoint||i.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||n.liveendpoint||i.liveendpoint||process.env[t.ENV_quickPulseHost]||tge.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new RGe.URL(this.quickPulseHost).host),this.aadAudience=n.aadaudience||i.aadaudience}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=IGe.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(e){t._validateInstrumentationKey(e)||wGe.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),t.prototype._mergeConfig=function(){var e=AGe.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableLoggerErrorToTrace=e.enableLoggerErrorToTrace,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t}();rge.exports=PGe});function LN(){return aj.create()}var nge,aj,cj=I(()=>{nge=new Set(["Deserialize","Serialize","Retry","Sign"]),aj=class t{constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!nge.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!nge.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,s)=>a=>s.sendRequest(a,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(m){return{name:m,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),o=n("None"),s=n("Deserialize"),a=n("Retry"),c=n("Sign"),u=[i,o,s,a,c];function l(m){return m==="Retry"?a:m==="Serialize"?i:m==="Deserialize"?s:m==="Sign"?c:o}for(let m of this._policies){let h=m.policy,g=m.options,v=h.name;if(r.has(v))throw new Error("Duplicate policy names not allowed in pipeline");let y={policy:h,dependsOn:new Set,dependants:new Set};g.afterPhase&&(y.afterPhase=l(g.afterPhase),y.afterPhase.hasAfterPolicies=!0),r.set(v,y),l(g.phase).policies.add(y)}for(let m of this._policies){let{policy:h,options:g}=m,v=h.name,y=r.get(v);if(!y)throw new Error(`Missing node for policy ${v}`);if(g.afterPolicies)for(let b of g.afterPolicies){let x=r.get(b);x&&(y.dependsOn.add(x),x.dependants.add(y))}if(g.beforePolicies)for(let b of g.beforePolicies){let x=r.get(b);x&&(x.dependsOn.add(y),y.dependants.add(x))}}function d(m){m.hasRun=!0;for(let h of m.policies)if(!(h.afterPhase&&(!h.afterPhase.hasRun||h.afterPhase.policies.size))&&h.dependsOn.size===0){e.push(h.policy);for(let g of h.dependants)g.dependsOn.delete(h);r.delete(h.policy.name),m.policies.delete(h)}}function p(){for(let m of u){if(d(m),m.policies.size>0&&m!==o){o.hasRun||d(o);return}m.hasAfterPolicies&&d(o)}}let f=0;for(;r.size>0;){f++;let m=e.length;if(p(),e.length<=m&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}});function sge(t,...e){process.stderr.write(`${oge.default.format(t,...e)}${ige.EOL}`)}var ige,oge,age=I(()=>{ige=require("os"),oge=W(require("util"))});function dj(t){uge=t,uj=[],lj=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?lj.push(new RegExp(`^${n.substr(1)}$`)):uj.push(new RegExp(`^${n}$`));for(let n of ON)n.enabled=pj(n.namespace)}function pj(t){if(t.endsWith("*"))return!0;for(let e of lj)if(e.test(t))return!1;for(let e of uj)if(e.test(t))return!0;return!1}function kGe(){let t=uge||"";return dj(""),t}function dge(t){let e=Object.assign(r,{enabled:pj(t),destroy:DGe,log:lge.log,namespace:t,extend:NGe});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return ON.push(e),e}function DGe(){let t=ON.indexOf(this);return t>=0?(ON.splice(t,1),!0):!1}function NGe(t){let e=dge(`${this.namespace}:${t}`);return e.log=this.log,e}var cge,uge,uj,lj,ON,lge,wx,pge=I(()=>{age();cge=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,uj=[],lj=[],ON=[];cge&&dj(cge);lge=Object.assign(t=>dge(t),{enable:dj,enabled:pj,disable:kGe,log:sge});wx=lge});function LGe(t){if(t&&!vge(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${hj.join(",")}`);fj=t;let e=[];for(let r of mge)gge(r)&&e.push(r.namespace);wx.enable(e.join(","))}function UN(t){let e=mj.extend(t);return hge(mj,e),{error:FN(e,"error"),warning:FN(e,"warning"),info:FN(e,"info"),verbose:FN(e,"verbose")}}function hge(t,e){e.log=(...r)=>{t.log(...r)}}function FN(t,e){let r=Object.assign(t.extend(e),{level:e});if(hge(t,r),gge(r)){let n=wx.disable();wx.enable(n+","+r.namespace)}return mge.add(r),r}function gge(t){return!!(fj&&fge[t.level]<=fge[fj])}function vge(t){return hj.includes(t)}var mge,MN,fj,mj,hj,fge,gj=I(()=>{pge();mge=new Set,MN=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,mj=wx("azure");mj.log=(...t)=>{wx.log(...t)};hj=["verbose","info","warning","error"];MN&&(vge(MN)?LGe(MN):console.error(`AZURE_LOG_LEVEL set to unknown log level '${MN}'; logging is not enabled. Acceptable values: ${hj.join(", ")}.`));fge={verbose:400,info:300,warning:200,error:100}});var es,Rx=I(()=>{gj();es=UN("core-rest-pipeline")});var vj,BN,yge=I(()=>{BN=typeof process<"u"&&!!process.version&&!!(!((vj=process.versions)===null||vj===void 0)&&vj.node)});function yj(t){if(t.aborted)return;t.onabort&&t.onabort.call(t);let e=Ax.get(t);e&&e.slice().forEach(r=>{r.call(t,{type:"abort"})}),qN.set(t,!0)}var Ax,qN,xI,bge=I(()=>{Ax=new WeakMap,qN=new WeakMap,xI=class t{constructor(){this.onabort=null,Ax.set(this,[]),qN.set(this,!1)}get aborted(){if(!qN.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return qN.get(this)}static get none(){return new t}addEventListener(e,r){if(!Ax.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");Ax.get(this).push(r)}removeEventListener(e,r){if(!Ax.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");let n=Ax.get(this),i=n.indexOf(r);i>-1&&n.splice(i,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}});var cd,SI,_ge=I(()=>{bge();cd=class extends Error{constructor(e){super(e),this.name="AbortError"}},SI=class{constructor(e){if(this._signal=new xI,!!e){Array.isArray(e)||(e=arguments);for(let r of e)r.aborted?this.abort():r.addEventListener("abort",()=>{this.abort()})}}get signal(){return this._signal}abort(){yj(this._signal)}static timeout(e){let r=new xI,n=setTimeout(yj,e,r);return typeof n.unref=="function"&&n.unref(),r}}});var HN=I(()=>{_ge()});function bj(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var xge=I(()=>{});function EI(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}var _j=I(()=>{});function Px(t){if(EI(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}function kx(t){if(Px(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}var Sge=I(()=>{_j()});var Dx=I(()=>{yge();xge();_j();Sge()});var xj,OGe,MGe,Nx,Sj=I(()=>{Dx();xj="REDACTED",OGe=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],MGe=["api-version"],Nx=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=OGe.concat(e),r=MGe.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||EI(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=xj;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=xj;return r}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,xj);return r.toString()}}});function GN(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:es.info,n=new Nx({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Ej,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let s=await o(i);return r(`Response status code: ${s.status}`),r(`Headers: ${n.sanitize(s.headers)}`),s}}}var Ej,Tj=I(()=>{Rx();Sj();Ej="logPolicy"});function jN(t={}){let{maxRetries:e=20}=t;return{name:Cj,async sendRequest(r,n){let i=await n(r);return Tge(n,i,e)}}}async function Tge(t,e,r,n=0){let{request:i,status:o,headers:s}=e,a=s.get("location");if(a&&(o===300||o===301&&Ege.includes(i.method)||o===302&&Ege.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let c=new URL(a,i.url);i.url=c.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return Tge(t,u,r,n+1)}return e}var Cj,Ege,Ij=I(()=>{Cj="redirectPolicy",Ege=["GET","HEAD"]});function Cge(){return"User-Agent"}function Ige(t){t.set("Node",process.version),t.set("OS",`(${Lx.arch()}-${Lx.type()}-${Lx.release()})`)}var Lx,wge=I(()=>{Lx=W(require("os"))});var zN,wj=I(()=>{zN="1.10.1"});function FGe(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}function Rge(){return Cge()}function VN(t){let e=new Map;e.set("core-rest-pipeline",zN),Ige(e);let r=FGe(e);return t?`${t} ${r}`:r}var Rj=I(()=>{wge();wj()});function $N(t={}){let e=VN(t.userAgentPrefix);return{name:Aj,async sendRequest(r,n){return r.headers.has(Age)||r.headers.set(Age,e),n(r)}}}var Age,Aj,Pj=I(()=>{Rj();Age=Rge(),Aj="userAgentPolicy"});function WN(){return{name:kj,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}var kj,Dj=I(()=>{kj="decompressResponsePolicy"});function KN(t,e,r){return new Promise((n,i)=>{let o,s,a=()=>i(new cd(r?.abortErrorMsg?r?.abortErrorMsg:UGe)),c=()=>{r?.abortSignal&&s&&r.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),c(),a()),r?.abortSignal&&r.abortSignal.aborted)return a();o=setTimeout(()=>{c(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",s)})}function Pge(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}var UGe,YN=I(()=>{HN();UGe="The operation was aborted."});function kge(t){if(t&&[429,503].includes(t.status))try{for(let i of BGe){let o=Pge(t,i);if(o===0||o)return o*(i===Nj?1e3:1)}let e=t.headers.get(Nj);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function Dge(t){return Number.isFinite(kge(t))}function QN(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=kge(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}var Nj,BGe,XN=I(()=>{YN();Nj="Retry-After",BGe=["retry-after-ms","x-ms-retry-after-ms",Nj]});function Ox(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:qGe,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:HGe,o=n;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:a,responseError:c}){let u=jGe(c),l=u&&t.ignoreSystemErrors,d=GGe(a),p=d&&t.ignoreHttpStatusCodes;if(a&&(Dge(a)||!d)||p||l)return{skipStrategy:!0};if(c&&!u&&!d)return{errorToThrow:c};let m=o*Math.pow(2,s),h=Math.min(i,m);return o=h/2+bj(0,h/2),{retryAfterInMs:o}}}}function GGe(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function jGe(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT":!1}var qGe,HGe,JN=I(()=>{Dx();XN();qGe=1e3,HGe=1e3*64});function ud(t,e={maxRetries:3}){let r=e.logger||Nge;return{name:zGe,async sendRequest(n,i){var o,s;let a,c,u=-1;e:for(;;){u+=1,a=void 0,c=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),a=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(l){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),c=l,!l||c.name!=="RestError")throw l;a=c.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new cd;if(u>=((s=e.maxRetries)!==null&&s!==void 0?s:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let l of t){let d=l.logger||Nge;d.info(`Retry ${u}: Processing retry strategy ${l.name}.`);let p=l.retry({retryCount:u,response:a,responseError:c});if(p.skipStrategy){d.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:f,retryAfterInMs:m,redirectTo:h}=p;if(f)throw d.error(`Retry ${u}: Retry strategy ${l.name} throws error:`,f),f;if(m||m===0){d.info(`Retry ${u}: Retry strategy ${l.name} retries after ${m}`),await KN(m,void 0,{abortSignal:n.abortSignal});continue e}if(h){d.info(`Retry ${u}: Retry strategy ${l.name} redirects to ${h}`),n.url=h;continue e}}if(c)throw r.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return r.info("None of the retry strategies could work with the received response. Returning it."),a}}}}var Nge,zGe,Mx=I(()=>{YN();gj();HN();Nge=UN("core-rest-pipeline retryPolicy"),zGe="retryPolicy"});function ZN(t={}){var e;return{name:VGe,sendRequest:ud([QN(),Ox(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var VGe,Lj=I(()=>{JN();XN();Mx();VGe="defaultRetryPolicy"});var Mge=k((yAt,Oge)=>{var Lge=require("stream").Stream,$Ge=require("util");Oge.exports=Ju;function Ju(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}$Ge.inherits(Ju,Lge);Ju.create=function(t,e){var r=new this;e=e||{};for(var n in e)r[n]=e[n];r.source=t;var i=t.emit;return t.emit=function(){return r._handleEmit(arguments),i.apply(t,arguments)},t.on("error",function(){}),r.pauseStream&&t.pause(),r};Object.defineProperty(Ju.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});Ju.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};Ju.prototype.resume=function(){this._released||this.release(),this.source.resume()};Ju.prototype.pause=function(){this.source.pause()};Ju.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this)),this._bufferedEvents=[]};Ju.prototype.pipe=function(){var t=Lge.prototype.pipe.apply(this,arguments);return this.resume(),t};Ju.prototype._handleEmit=function(t){if(this._released){this.emit.apply(this,t);return}t[0]==="data"&&(this.dataSize+=t[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(t)};Ju.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}}});var qge=k((bAt,Bge)=>{var WGe=require("util"),Uge=require("stream").Stream,Fge=Mge();Bge.exports=bi;function bi(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}WGe.inherits(bi,Uge);bi.create=function(t){var e=new this;t=t||{};for(var r in t)e[r]=t[r];return e};bi.isStreamLike=function(t){return typeof t!="function"&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"&&!Buffer.isBuffer(t)};bi.prototype.append=function(t){var e=bi.isStreamLike(t);if(e){if(!(t instanceof Fge)){var r=Fge.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=r}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this};bi.prototype.pipe=function(t,e){return Uge.prototype.pipe.call(this,t,e),this.resume(),t};bi.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};bi.prototype._realGetNext=function(){var t=this._streams.shift();if(typeof t>"u"){this.end();return}if(typeof t!="function"){this._pipeNext(t);return}var e=t;e(function(r){var n=bi.isStreamLike(r);n&&(r.on("data",this._checkDataSize.bind(this)),this._handleErrors(r)),this._pipeNext(r)}.bind(this))};bi.prototype._pipeNext=function(t){this._currentStream=t;var e=bi.isStreamLike(t);if(e){t.on("end",this._getNext.bind(this)),t.pipe(this,{end:!1});return}var r=t;this.write(r),this._getNext()};bi.prototype._handleErrors=function(t){var e=this;t.on("error",function(r){e._emitError(r)})};bi.prototype.write=function(t){this.emit("data",t)};bi.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};bi.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};bi.prototype.end=function(){this._reset(),this.emit("end")};bi.prototype.destroy=function(){this._reset(),this.emit("close")};bi.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};bi.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}};bi.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};bi.prototype._emitError=function(t){this._reset(),this.emit("error",t)}});var Hge=k((_At,KGe)=>{KGe.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var jge=k((xAt,Gge)=>{Gge.exports=Hge()});var $ge=k(ka=>{"use strict";var eL=jge(),YGe=require("path").extname,zge=/^\s*([^;\s]*)(?:;|\s|$)/,QGe=/^text\//i;ka.charset=Vge;ka.charsets={lookup:Vge};ka.contentType=XGe;ka.extension=JGe;ka.extensions=Object.create(null);ka.lookup=ZGe;ka.types=Object.create(null);eje(ka.extensions,ka.types);function Vge(t){if(!t||typeof t!="string")return!1;var e=zge.exec(t),r=e&&eL[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&QGe.test(e[1])?"UTF-8":!1}function XGe(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?ka.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=ka.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function JGe(t){if(!t||typeof t!="string")return!1;var e=zge.exec(t),r=e&&ka.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function ZGe(t){if(!t||typeof t!="string")return!1;var e=YGe("x."+t).toLowerCase().substr(1);return e&&ka.types[e]||!1}function eje(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(eL).forEach(function(i){var o=eL[i],s=o.extensions;if(!(!s||!s.length)){t[i]=s;for(var a=0;a<s.length;a++){var c=s[a];if(e[c]){var u=r.indexOf(eL[e[c]].source),l=r.indexOf(o.source);if(e[c]!=="application/octet-stream"&&(u>l||u===l&&e[c].substr(0,12)==="application/"))continue}e[c]=i}}})}});var Kge=k((EAt,Wge)=>{Wge.exports=tje;function tje(t){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(t):setTimeout(t,0)}});var Oj=k((TAt,Qge)=>{var Yge=Kge();Qge.exports=rje;function rje(t){var e=!1;return Yge(function(){e=!0}),function(n,i){e?t(n,i):Yge(function(){t(n,i)})}}});var Mj=k((CAt,Xge)=>{Xge.exports=nje;function nje(t){Object.keys(t.jobs).forEach(ije.bind(t)),t.jobs={}}function ije(t){typeof this.jobs[t]=="function"&&this.jobs[t]()}});var Fj=k((IAt,Zge)=>{var Jge=Oj(),oje=Mj();Zge.exports=sje;function sje(t,e,r,n){var i=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[i]=aje(e,i,t[i],function(o,s){i in r.jobs&&(delete r.jobs[i],o?oje(r):r.results[i]=s,n(o,r.results))})}function aje(t,e,r,n){var i;return t.length==2?i=t(r,Jge(n)):i=t(r,e,Jge(n)),i}});var Uj=k((wAt,e0e)=>{e0e.exports=cje;function cje(t,e){var r=!Array.isArray(t),n={index:0,keyedList:r||e?Object.keys(t):null,jobs:{},results:r?{}:[],size:r?Object.keys(t).length:t.length};return e&&n.keyedList.sort(r?e:function(i,o){return e(t[i],t[o])}),n}});var Bj=k((RAt,t0e)=>{var uje=Mj(),lje=Oj();t0e.exports=dje;function dje(t){Object.keys(this.jobs).length&&(this.index=this.size,uje(this),lje(t)(null,this.results))}});var n0e=k((AAt,r0e)=>{var pje=Fj(),fje=Uj(),mje=Bj();r0e.exports=hje;function hje(t,e,r){for(var n=fje(t);n.index<(n.keyedList||t).length;)pje(t,e,n,function(i,o){if(i){r(i,o);return}if(Object.keys(n.jobs).length===0){r(null,n.results);return}}),n.index++;return mje.bind(n,r)}});var qj=k((PAt,tL)=>{var i0e=Fj(),gje=Uj(),vje=Bj();tL.exports=yje;tL.exports.ascending=o0e;tL.exports.descending=bje;function yje(t,e,r,n){var i=gje(t,r);return i0e(t,e,i,function o(s,a){if(s){n(s,a);return}if(i.index++,i.index<(i.keyedList||t).length){i0e(t,e,i,o);return}n(null,i.results)}),vje.bind(i,n)}function o0e(t,e){return t<e?-1:t>e?1:0}function bje(t,e){return-1*o0e(t,e)}});var a0e=k((kAt,s0e)=>{var _je=qj();s0e.exports=xje;function xje(t,e,r){return _je(t,e,null,r)}});var u0e=k((DAt,c0e)=>{c0e.exports={parallel:n0e(),serial:a0e(),serialOrdered:qj()}});var d0e=k((NAt,l0e)=>{l0e.exports=function(t,e){return Object.keys(e).forEach(function(r){t[r]=t[r]||e[r]}),t}});var m0e=k((LAt,f0e)=>{var zj=qge(),p0e=require("util"),Hj=require("path"),Sje=require("http"),Eje=require("https"),Tje=require("url").parse,Cje=require("fs"),Ije=require("stream").Stream,Gj=$ge(),wje=u0e(),jj=d0e();f0e.exports=kr;p0e.inherits(kr,zj);function kr(t){if(!(this instanceof kr))return new kr(t);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],zj.call(this),t=t||{};for(var e in t)this[e]=t[e]}kr.LINE_BREAK=`\r
`;kr.DEFAULT_CONTENT_TYPE="application/octet-stream";kr.prototype.append=function(t,e,r){r=r||{},typeof r=="string"&&(r={filename:r});var n=zj.prototype.append.bind(this);if(typeof e=="number"&&(e=""+e),p0e.isArray(e)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(t,e,r),o=this._multiPartFooter();n(i),n(e),n(o),this._trackLength(i,e,r)};kr.prototype._trackLength=function(t,e,r){var n=0;r.knownLength!=null?n+=+r.knownLength:Buffer.isBuffer(e)?n=e.length:typeof e=="string"&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(t)+kr.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&e.hasOwnProperty("httpVersion"))&&!(e instanceof Ije))&&(r.knownLength||this._valuesToMeasure.push(e))};kr.prototype._lengthRetriever=function(t,e){t.hasOwnProperty("fd")?t.end!=null&&t.end!=1/0&&t.start!=null?e(null,t.end+1-(t.start?t.start:0)):Cje.stat(t.path,function(r,n){var i;if(r){e(r);return}i=n.size-(t.start?t.start:0),e(null,i)}):t.hasOwnProperty("httpVersion")?e(null,+t.headers["content-length"]):t.hasOwnProperty("httpModule")?(t.on("response",function(r){t.pause(),e(null,+r.headers["content-length"])}),t.resume()):e("Unknown stream")};kr.prototype._multiPartHeader=function(t,e,r){if(typeof r.header=="string")return r.header;var n=this._getContentDisposition(e,r),i=this._getContentType(e,r),o="",s={"Content-Disposition":["form-data",'name="'+t+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof r.header=="object"&&jj(s,r.header);var a;for(var c in s)s.hasOwnProperty(c)&&(a=s[c],a!=null&&(Array.isArray(a)||(a=[a]),a.length&&(o+=c+": "+a.join("; ")+kr.LINE_BREAK)));return"--"+this.getBoundary()+kr.LINE_BREAK+o+kr.LINE_BREAK};kr.prototype._getContentDisposition=function(t,e){var r,n;return typeof e.filepath=="string"?r=Hj.normalize(e.filepath).replace(/\\/g,"/"):e.filename||t.name||t.path?r=Hj.basename(e.filename||t.name||t.path):t.readable&&t.hasOwnProperty("httpVersion")&&(r=Hj.basename(t.client._httpMessage.path||"")),r&&(n='filename="'+r+'"'),n};kr.prototype._getContentType=function(t,e){var r=e.contentType;return!r&&t.name&&(r=Gj.lookup(t.name)),!r&&t.path&&(r=Gj.lookup(t.path)),!r&&t.readable&&t.hasOwnProperty("httpVersion")&&(r=t.headers["content-type"]),!r&&(e.filepath||e.filename)&&(r=Gj.lookup(e.filepath||e.filename)),!r&&typeof t=="object"&&(r=kr.DEFAULT_CONTENT_TYPE),r};kr.prototype._multiPartFooter=function(){return function(t){var e=kr.LINE_BREAK,r=this._streams.length===0;r&&(e+=this._lastBoundary()),t(e)}.bind(this)};kr.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+kr.LINE_BREAK};kr.prototype.getHeaders=function(t){var e,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in t)t.hasOwnProperty(e)&&(r[e.toLowerCase()]=t[e]);return r};kr.prototype.setBoundary=function(t){this._boundary=t};kr.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};kr.prototype.getBuffer=function(){for(var t=new Buffer.alloc(0),e=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)typeof this._streams[r]!="function"&&(Buffer.isBuffer(this._streams[r])?t=Buffer.concat([t,this._streams[r]]):t=Buffer.concat([t,Buffer.from(this._streams[r])]),(typeof this._streams[r]!="string"||this._streams[r].substring(2,e.length+2)!==e)&&(t=Buffer.concat([t,Buffer.from(kr.LINE_BREAK)])));return Buffer.concat([t,Buffer.from(this._lastBoundary())])};kr.prototype._generateBoundary=function(){for(var t="--------------------------",e=0;e<24;e++)t+=Math.floor(Math.random()*10).toString(16);this._boundary=t};kr.prototype.getLengthSync=function(){var t=this._overheadLength+this._valueLength;return this._streams.length&&(t+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),t};kr.prototype.hasKnownLength=function(){var t=!0;return this._valuesToMeasure.length&&(t=!1),t};kr.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(t.bind(this,null,e));return}wje.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){if(r){t(r);return}n.forEach(function(i){e+=i}),t(null,e)})};kr.prototype.submit=function(t,e){var r,n,i={method:"post"};return typeof t=="string"?(t=Tje(t),n=jj({port:t.port,path:t.pathname,host:t.hostname,protocol:t.protocol},i)):(n=jj(t,i),n.port||(n.port=n.protocol=="https:"?443:80)),n.headers=this.getHeaders(t.headers),n.protocol=="https:"?r=Eje.request(n):r=Sje.request(n),this.getLength(function(o,s){if(o&&o!=="Unknown stream"){this._error(o);return}if(s&&r.setHeader("Content-Length",s),this.pipe(r),e){var a,c=function(u,l){return r.removeListener("error",c),r.removeListener("response",a),e.call(this,u,l)};a=c.bind(this,null),r.on("error",c),r.on("response",a)}}.bind(this)),r};kr.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};kr.prototype.toString=function(){return"[object FormData]"}});function rL(){return{name:Vj,async sendRequest(t,e){if(t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?(t.body=Rje(t.formData),t.formData=void 0):await Aje(t.formData,t)}return e(t)}}}function Rje(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}async function Aje(t,e){let r=new h0e.default;for(let i of Object.keys(t)){let o=t[i];if(Array.isArray(o))for(let s of o)r.append(i,s);else r.append(i,o)}e.body=r,e.formData=void 0;let n=e.headers.get("Content-Type");n&&n.indexOf("multipart/form-data")!==-1&&e.headers.set("Content-Type",`multipart/form-data; boundary=${r.getBoundary()}`);try{let i=await new Promise((o,s)=>{r.getLength((a,c)=>{a?s(a):o(c)})});e.headers.set("Content-Length",i)}catch{}}var h0e,Vj,$j=I(()=>{h0e=W(m0e()),Vj="formDataPolicy"});var v0e=k((MAt,g0e)=>{var Fx=1e3,Ux=Fx*60,Bx=Ux*60,Bv=Bx*24,Pje=Bv*7,kje=Bv*365.25;g0e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Dje(t);if(r==="number"&&isFinite(t))return e.long?Lje(t):Nje(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Dje(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*kje;case"weeks":case"week":case"w":return r*Pje;case"days":case"day":case"d":return r*Bv;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Bx;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ux;case"seconds":case"second":case"secs":case"sec":case"s":return r*Fx;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Nje(t){var e=Math.abs(t);return e>=Bv?Math.round(t/Bv)+"d":e>=Bx?Math.round(t/Bx)+"h":e>=Ux?Math.round(t/Ux)+"m":e>=Fx?Math.round(t/Fx)+"s":t+"ms"}function Lje(t){var e=Math.abs(t);return e>=Bv?nL(t,e,Bv,"day"):e>=Bx?nL(t,e,Bx,"hour"):e>=Ux?nL(t,e,Ux,"minute"):e>=Fx?nL(t,e,Fx,"second"):t+" ms"}function nL(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Wj=k((FAt,y0e)=>{function Oje(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=v0e(),r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,m;function h(...g){if(!h.enabled)return;let v=h,y=Number(new Date),b=y-(d||y);v.diff=b,v.prev=d,v.curr=y,d=y,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let x=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(T,L)=>{if(T==="%%")return"%";x++;let M=r.formatters[L];if(typeof M=="function"){let j=g[x];T=M.call(v,j),g.splice(x,1),x--}return T}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return h.namespace=l,h.useColors=r.useColors(),h.color=r.selectColor(l),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,m=r.enabled(l)),m),set:g=>{p=g}}),typeof r.init=="function"&&r.init(h),h}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d,p=(typeof l=="string"?l:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(l=p[d].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(l))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}y0e.exports=Oje});var b0e=k((pc,iL)=>{pc.formatArgs=Fje;pc.save=Uje;pc.load=Bje;pc.useColors=Mje;pc.storage=qje();pc.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();pc.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Mje(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Fje(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+iL.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}pc.log=console.debug||console.log||(()=>{});function Uje(t){try{t?pc.storage.setItem("debug",t):pc.storage.removeItem("debug")}catch{}}function Bje(){let t;try{t=pc.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function qje(){try{return localStorage}catch{}}iL.exports=Wj()(pc);var{formatters:Hje}=iL.exports;Hje.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var x0e=k((UAt,_0e)=>{"use strict";_0e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var T0e=k((BAt,E0e)=>{"use strict";var Gje=require("os"),S0e=require("tty"),Zc=x0e(),{env:Ao}=process,bh;Zc("no-color")||Zc("no-colors")||Zc("color=false")||Zc("color=never")?bh=0:(Zc("color")||Zc("colors")||Zc("color=true")||Zc("color=always"))&&(bh=1);"FORCE_COLOR"in Ao&&(Ao.FORCE_COLOR==="true"?bh=1:Ao.FORCE_COLOR==="false"?bh=0:bh=Ao.FORCE_COLOR.length===0?1:Math.min(parseInt(Ao.FORCE_COLOR,10),3));function Kj(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Yj(t,e){if(bh===0)return 0;if(Zc("color=16m")||Zc("color=full")||Zc("color=truecolor"))return 3;if(Zc("color=256"))return 2;if(t&&!e&&bh===void 0)return 0;let r=bh||0;if(Ao.TERM==="dumb")return r;if(process.platform==="win32"){let n=Gje.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Ao)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Ao)||Ao.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Ao)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ao.TEAMCITY_VERSION)?1:0;if(Ao.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ao){let n=parseInt((Ao.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ao.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ao.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ao.TERM)||"COLORTERM"in Ao?1:r}function jje(t){let e=Yj(t,t&&t.isTTY);return Kj(e)}E0e.exports={supportsColor:jje,stdout:Kj(Yj(!0,S0e.isatty(1))),stderr:Kj(Yj(!0,S0e.isatty(2)))}});var I0e=k((ts,sL)=>{var zje=require("tty"),oL=require("util");ts.init=Xje;ts.log=Kje;ts.formatArgs=$je;ts.save=Yje;ts.load=Qje;ts.useColors=Vje;ts.destroy=oL.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ts.colors=[6,2,3,4,5,1];try{let t=T0e();t&&(t.stderr||t).level>=2&&(ts.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ts.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Vje(){return"colors"in ts.inspectOpts?!!ts.inspectOpts.colors:zje.isatty(process.stderr.fd)}function $je(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+sL.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Wje()+e+" "+t[0]}function Wje(){return ts.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Kje(...t){return process.stderr.write(oL.format(...t)+`
`)}function Yje(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Qje(){return process.env.DEBUG}function Xje(t){t.inspectOpts={};let e=Object.keys(ts.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=ts.inspectOpts[e[r]]}sL.exports=Wj()(ts);var{formatters:C0e}=sL.exports;C0e.o=function(t){return this.inspectOpts.colors=this.useColors,oL.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};C0e.O=function(t){return this.inspectOpts.colors=this.useColors,oL.inspect(t,this.inspectOpts)}});var Zu=k((qAt,Qj)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Qj.exports=b0e():Qj.exports=I0e()});var w0e=k(Xj=>{"use strict";Object.defineProperty(Xj,"__esModule",{value:!0});function Jje(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(o,s)=>{o?i(o):n(s)})})}}Xj.default=Jje});var ez=k((Zj,A0e)=>{"use strict";var R0e=Zj&&Zj.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Zje=require("events"),eze=R0e(Zu()),tze=R0e(w0e()),CI=eze.default("agent-base");function rze(t){return!!t&&typeof t.addRequest=="function"}function Jj(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function aL(t,e){return new aL.Agent(t,e)}(function(t){class e extends Zje.EventEmitter{constructor(n,i){super();let o=i;typeof n=="function"?this.callback=n:n&&(o=n),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:Jj()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:Jj()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=Jj()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,a=null,c=o.timeout||this.timeout,u=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},l=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${c}ms`);f.code="ETIMEOUT",u(f)},d=f=>{s||(a!==null&&(clearTimeout(a),a=null),u(f))},p=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),rze(f)){CI("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),n.onSocket(f);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);u(m)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(CI("Converting legacy callback function to promise"),this.promisifiedCallback=tze.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(a=setTimeout(l,c)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{CI("Resolving socket for %o request: %o",o.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,o)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(n,i){CI("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){CI("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(aL||(aL={}));A0e.exports=aL});var P0e=k(wI=>{"use strict";var nze=wI&&wI.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wI,"__esModule",{value:!0});var ize=nze(Zu()),II=ize.default("https-proxy-agent:parse-proxy-response");function oze(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let d=t.read();d?l(d):t.once("readable",o)}function s(){t.removeListener("end",c),t.removeListener("error",u),t.removeListener("close",a),t.removeListener("readable",o)}function a(d){II("onclose had error %o",d)}function c(){II("onend")}function u(d){s(),II("onerror %o",d),r(d)}function l(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){II("have not received end of HTTP headers yet..."),o();return}let m=p.toString("ascii",0,p.indexOf(`\r
`)),h=+m.split(" ")[1];II("got proxy server response: %o",m),e({statusCode:h,buffered:p})}t.on("error",u),t.on("close",a),t.on("end",c),o()})}wI.default=oze});var N0e=k(qv=>{"use strict";var sze=qv&&qv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},qx=qv&&qv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qv,"__esModule",{value:!0});var k0e=qx(require("net")),D0e=qx(require("tls")),aze=qx(require("url")),cze=qx(require("assert")),uze=qx(Zu()),lze=ez(),dze=qx(P0e()),RI=uze.default("https-proxy-agent:agent"),tz=class extends lze.Agent{constructor(e){let r;if(typeof e=="string"?r=aze.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");RI("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||mze(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return sze(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o;i?(RI("Creating `tls.Socket`: %o",n),o=D0e.default.connect(n)):(RI("Creating `net.Socket`: %o",n),o=k0e.default.connect(n));let s=Object.assign({},n.headers),c=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:u,port:l,secureEndpoint:d}=r;fze(l,d)||(u+=`:${l}`),s.Host=u,s.Connection="close";for(let g of Object.keys(s))c+=`${g}: ${s[g]}\r
`;let p=dze.default(o);o.write(`${c}\r
`);let{statusCode:f,buffered:m}=yield p;if(f===200){if(e.once("socket",pze),r.secureEndpoint){RI("Upgrading socket connection to TLS");let g=r.servername||r.host;return D0e.default.connect(Object.assign(Object.assign({},hze(r,"host","hostname","path","port")),{socket:o,servername:g}))}return o}o.destroy();let h=new k0e.default.Socket({writable:!1});return h.readable=!0,e.once("socket",g=>{RI("replaying proxy buffer for failed request"),cze.default(g.listenerCount("data")>0),g.push(m),g.push(null)}),h})}};qv.default=tz;function pze(t){t.resume()}function fze(t,e){return!!(!e&&t===80||e&&t===443)}function mze(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function hze(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var O0e=k((iz,L0e)=>{"use strict";var gze=iz&&iz.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},rz=gze(N0e());function nz(t){return new rz.default(t)}(function(t){t.HttpsProxyAgent=rz.default,t.prototype=rz.default.prototype})(nz||(nz={}));L0e.exports=nz});var M0e=k(oz=>{"use strict";Object.defineProperty(oz,"__esModule",{value:!0});function vze(t,e,{signal:r}={}){return new Promise((n,i)=>{function o(){r?.removeEventListener("abort",o),t.removeListener(e,s),t.removeListener("error",a)}function s(...c){o(),n(c)}function a(c){o(),i(c)}r?.addEventListener("abort",o),t.on(e,s),t.on("error",a)})}oz.default=vze});var F0e=k(Hv=>{"use strict";var yze=Hv&&Hv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},AI=Hv&&Hv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hv,"__esModule",{value:!0});var bze=AI(require("net")),_ze=AI(require("tls")),sz=AI(require("url")),xze=AI(Zu()),Sze=AI(M0e()),Eze=ez(),_h=(0,xze.default)("http-proxy-agent");function Tze(t){return typeof t=="string"?/^https:?$/i.test(t):!1}var az=class extends Eze.Agent{constructor(e){let r;if(typeof e=="string"?r=sz.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");_h("Creating new HttpProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||Tze(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return yze(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o=sz.default.parse(e.path);o.protocol||(o.protocol="http:"),o.hostname||(o.hostname=r.hostname||r.host||null),o.port==null&&typeof r.port&&(o.port=String(r.port)),o.port==="80"&&(o.port=""),e.path=sz.default.format(o),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`);let s;if(i?(_h("Creating `tls.Socket`: %o",n),s=_ze.default.connect(n)):(_h("Creating `net.Socket`: %o",n),s=bze.default.connect(n)),e._header){let a,c;_h("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(_h("Patching connection write() output buffer with updated header"),a=e.output[0],c=a.indexOf(`\r
\r
`)+4,e.output[0]=e._header+a.substring(c),_h("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(_h("Patching connection write() output buffer with updated header"),a=e.outputData[0].data,c=a.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+a.substring(c),_h("Output buffer: %o",e.outputData[0].data))}return yield(0,Sze.default)(s,"connect"),s})}};Hv.default=az});var B0e=k((lz,U0e)=>{"use strict";var Cze=lz&&lz.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},cz=Cze(F0e());function uz(t){return new cz.default(t)}(function(t){t.HttpProxyAgent=cz.default,t.prototype=cz.default.prototype})(uz||(uz={}));U0e.exports=uz});function cL(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}function kze(){if(!process)return;let t=cL(Ize),e=cL(Rze),r=cL(wze);return t||e||r}function Dze(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}function Nze(){let t=cL(Aze);return z0e=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function pz(t){if(!t&&(t=kze(),!t))return;let e=new URL(t);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function H0e(t,{headers:e,tlsSettings:r}){let n;try{n=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}r&&es.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let i={hostname:n.hostname,port:t.port,protocol:n.protocol,headers:e.toJSON()};return t.username&&t.password?i.auth=`${t.username}:${t.password}`:t.username&&(i.auth=`${t.username}`),i}function Lze(t,e){if(t.agent)return;let n=new URL(t.url).protocol!=="https:",i=t.proxySettings;if(i)if(n){if(!e.httpProxyAgent){let o=H0e(i,t);e.httpProxyAgent=new j0e.HttpProxyAgent(o)}t.agent=e.httpProxyAgent}else{if(!e.httpsProxyAgent){let o=H0e(i,t);e.httpsProxyAgent=new G0e.HttpsProxyAgent(o)}t.agent=e.httpsProxyAgent}}function uL(t=pz(),e){z0e||q0e.push(...Nze());let r={};return{name:dz,async sendRequest(n,i){var o;return!n.proxySettings&&!Dze(n.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:q0e,e?.customNoProxyList?void 0:Pze)&&(n.proxySettings=t),n.proxySettings&&Lze(n,r),i(n)}}}var G0e,j0e,Ize,wze,Rze,Aze,dz,q0e,z0e,Pze,fz=I(()=>{G0e=W(O0e()),j0e=W(B0e());Rx();Ize="HTTPS_PROXY",wze="HTTP_PROXY",Rze="ALL_PROXY",Aze="NO_PROXY",dz="proxyPolicy",q0e=[],z0e=!1,Pze=new Map});function lL(t="x-ms-client-request-id"){return{name:mz,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}var mz,hz=I(()=>{mz="setClientRequestIdPolicy"});function dL(t){return{name:gz,sendRequest:async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e))}}var gz,vz=I(()=>{gz="tlsPolicy"});function V0e(t={}){let e=new yz(t.parentContext);return t.span&&(e=e.setValue(Hx.span,t.span)),t.namespace&&(e=e.setValue(Hx.namespace,t.namespace)),e}var Hx,yz,bz=I(()=>{Hx={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};yz=class t{constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}}});function Oze(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function Mze(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:Oze(),tracingContext:V0e({parentContext:e.tracingContext})}),withContext(t,e,...r){return e(...r)}}}function PI(){return _z||(_z=Mze()),_z}var _z,$0e=I(()=>{bz()});function xz(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,l,d){var p;let f=PI().startSpan(u,Object.assign(Object.assign({},d),{packageName:r,packageVersion:n,tracingContext:(p=l?.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),m=f.tracingContext,h=f.span;m.getValue(Hx.namespace)||(m=m.setValue(Hx.namespace,e)),h.setAttribute("az.namespace",m.getValue(Hx.namespace));let g=Object.assign({},l,{tracingOptions:Object.assign(Object.assign({},l?.tracingOptions),{tracingContext:m})});return{span:h,updatedOptions:g}}async function o(u,l,d,p){let{span:f,updatedOptions:m}=i(u,l,p);try{let h=await s(m.tracingOptions.tracingContext,()=>Promise.resolve(d(m,f)));return f.setStatus({status:"success"}),h}catch(h){throw f.setStatus({status:"error",error:h}),h}finally{f.end()}}function s(u,l,...d){return PI().withContext(u,l,...d)}function a(u){return PI().parseTraceparentHeader(u)}function c(u){return PI().createRequestHeaders(u)}return{startSpan:i,withSpan:o,withContext:s,parseTraceparentHeader:a,createRequestHeaders:c}}var W0e=I(()=>{$0e();bz()});var K0e=I(()=>{W0e()});var Y0e,Q0e,X0e=I(()=>{Y0e=require("util"),Q0e=Y0e.inspect.custom});function pL(t){return t instanceof fc?!0:Px(t)&&t.name==="RestError"}var Fze,fc,fL=I(()=>{Dx();X0e();Sj();Fze=new Nx,fc=class t extends Error{constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,this.request=r.request,this.response=r.response,Object.setPrototypeOf(this,t.prototype)}[Q0e](){return`RestError: ${this.message} 
 ${Fze.sanitize(this)}`}};fc.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";fc.PARSE_ERROR="PARSE_ERROR"});function mL(t={}){let e=VN(t.userAgentPrefix),r=Uze();return{name:Sz,async sendRequest(n,i){var o,s;if(!r||!(!((o=n.tracingOptions)===null||o===void 0)&&o.tracingContext))return i(n);let{span:a,tracingContext:c}=(s=Bze(r,n,e))!==null&&s!==void 0?s:{};if(!a||!c)return i(n);try{let u=await r.withContext(c,i,n);return Hze(a,u),u}catch(u){throw qze(a,u),u}}}}function Uze(){try{return xz({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:zN})}catch(t){es.warning(`Error when creating the TracingClient: ${kx(t)}`);return}}function Bze(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":e.method,"http.url":e.url,requestId:e.requestId}});if(!n.isRecording()){n.end();return}r&&n.setAttribute("http.user_agent",r);let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[s,a]of Object.entries(o))e.headers.set(s,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){es.warning(`Skipping creating a tracing span due to an error: ${kx(n)}`);return}}function qze(t,e){try{t.setStatus({status:"error",error:Px(e)?e:void 0}),pL(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){es.warning(`Skipping tracing span processing due to an error: ${kx(r)}`)}}function Hze(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),t.setStatus({status:"success"}),t.end()}catch(r){es.warning(`Skipping tracing span processing due to an error: ${kx(r)}`)}}var Sz,Ez=I(()=>{K0e();wj();Rj();Rx();Dx();fL();Sz="tracingPolicy"});function J0e(t){let e=LN();return BN&&(t.tlsOptions&&e.addPolicy(dL(t.tlsOptions)),e.addPolicy(uL(t.proxyOptions)),e.addPolicy(WN())),e.addPolicy(rL()),e.addPolicy($N(t.userAgentOptions)),e.addPolicy(lL()),e.addPolicy(ZN(t.retryOptions),{phase:"Retry"}),e.addPolicy(mL(t.userAgentOptions),{afterPhase:"Retry"}),BN&&e.addPolicy(jN(t.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(GN(t.loggingOptions),{afterPhase:"Sign"}),e}var Z0e=I(()=>{Tj();cj();Ij();Pj();Dj();Lj();$j();Dx();fz();hz();vz();Ez()});function hL(t){return t.toLowerCase()}function*Gze(t){for(let e of t.values())yield[e.name,e.value]}function Gx(t){return new Tz(t)}var Tz,gL=I(()=>{Tz=class{constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(hL(e),{name:e,value:String(r)})}get(e){var r;return(r=this._headersMap.get(hL(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(hL(e))}delete(e){this._headersMap.delete(hL(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return Gze(this._headersMap)}}});function kI(t){return t&&typeof t.pipe=="function"}function eve(t){return new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}function rve(t){return t&&typeof t.byteLength=="number"}function zze(t){let e=Gx();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}function Vze(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=yL.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=yL.createInflate();return t.pipe(n),n}return t}function $ze(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new fc(`Error reading response as text: ${i.message}`,{code:fc.PARSE_ERROR}))})})}function Wze(t){return t?Buffer.isBuffer(t)?t.length:kI(t)?null:rve(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}function nve(){return new Cz}var jx,zx,yL,tve,jze,vL,Cz,ive=I(()=>{jx=W(require("http")),zx=W(require("https")),yL=W(require("zlib")),tve=require("stream");HN();gL();fL();Rx();jze={};vL=class extends tve.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}},Cz=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new SI,s;if(e.abortSignal){if(e.abortSignal.aborted)throw new cd("The operation was aborted.");s=d=>{d.type==="abort"&&o.abort()},e.abortSignal.addEventListener("abort",s)}e.timeout>0&&setTimeout(()=>{o.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),c=a?.includes("gzip")||a?.includes("deflate"),u=typeof e.body=="function"?e.body():e.body;if(u&&!e.headers.has("Content-Length")){let d=Wze(u);d!==null&&e.headers.set("Content-Length",d)}let l;try{if(u&&e.onUploadProgress){let g=e.onUploadProgress,v=new vL(g);v.on("error",y=>{es.error("Error in upload progress",y)}),kI(u)?u.pipe(v):v.end(u),u=v}let d=await this.makeRequest(e,o,u),p=zze(d),m={status:(r=d.statusCode)!==null&&r!==void 0?r:0,headers:p,request:e};if(e.method==="HEAD")return d.resume(),m;l=c?Vze(d,p):d;let h=e.onDownloadProgress;if(h){let g=new vL(h);g.on("error",v=>{es.error("Error in download progress",v)}),l.pipe(g),l=g}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(m.status)?m.readableStreamBody=l:m.bodyAsText=await $ze(l),m}finally{if(e.abortSignal&&s){let d=Promise.resolve();kI(u)&&(d=eve(u));let p=Promise.resolve();kI(l)&&(p=eve(l)),Promise.all([d,p]).then(()=>{var f;s&&((f=e.abortSignal)===null||f===void 0||f.removeEventListener("abort",s))}).catch(f=>{es.warning("Error when cleaning up abortListener on httpRequest",f)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),s=o.protocol!=="https:";if(s&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,s),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((u,l)=>{let d=s?jx.request(c,u):zx.request(c,u);d.once("error",p=>{var f;l(new fc(p.message,{code:(f=p.code)!==null&&f!==void 0?f:fc.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let p=new cd("The operation was aborted.");d.destroy(p),l(p)}),n&&kI(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):rve(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(es.error("Unrecognized body type",n),l(new fc("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?jx.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new jx.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return zx.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:jze,s=this.cachedHttpsAgents.get(o);return s&&s.options.keepAlive===!i||(es.info("No cached TLS Agent exist, creating a new Agent"),s=new zx.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,s)),s}}}});function ove(){return nve()}var sve=I(()=>{ive()});function Iz(){return bL>_L.length-16&&(ave.default.randomFillSync(_L),bL=0),_L.slice(bL,bL+=16)}var ave,_L,bL,cve=I(()=>{ave=W(require("crypto")),_L=new Uint8Array(256),bL=_L.length});var uve,lve=I(()=>{uve=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Kze(t){return typeof t=="string"&&uve.test(t)}var dve,pve=I(()=>{lve();dve=Kze});function Yze(t,e=0){let r=(rs[t[e+0]]+rs[t[e+1]]+rs[t[e+2]]+rs[t[e+3]]+"-"+rs[t[e+4]]+rs[t[e+5]]+"-"+rs[t[e+6]]+rs[t[e+7]]+"-"+rs[t[e+8]]+rs[t[e+9]]+"-"+rs[t[e+10]]+rs[t[e+11]]+rs[t[e+12]]+rs[t[e+13]]+rs[t[e+14]]+rs[t[e+15]]).toLowerCase();if(!dve(r))throw TypeError("Stringified UUID is invalid");return r}var rs,fve,mve=I(()=>{pve();rs=[];for(let t=0;t<256;++t)rs.push((t+256).toString(16).substr(1));fve=Yze});function Qze(t,e,r){t=t||{};let n=t.random||(t.rng||Iz)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return fve(n)}var wz,hve=I(()=>{cve();mve();wz=Qze});var gve=I(()=>{hve()});function vve(){return wz()}var yve=I(()=>{gve()});function bve(t){return new Rz(t)}var Rz,_ve=I(()=>{gL();yve();Rz=class{constructor(e){var r,n,i,o,s,a,c;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:Gx(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(s=e.withCredentials)!==null&&s!==void 0?s:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||vve(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}}});function Sve(t={}){var e;return ud([Ox(Object.assign(Object.assign({},t),{ignoreSystemErrors:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3})}var xve,Eve=I(()=>{JN();Mx();xve="exponentialRetryPolicy"});function Tve(t={}){var e;return{name:Az,sendRequest:ud([Ox(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var Az,Cve=I(()=>{JN();Mx();Az="systemErrorRetryPolicy"});function Ive(t={}){var e;return{name:Pz,sendRequest:ud([QN()],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var Pz,wve=I(()=>{XN();Mx();Pz="throttlingRetryPolicy"});async function Jze(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}let i=await n();for(;i===null;)await KN(e),i=await n();return i}function Rve(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},Xze),e),s={get isRefreshing(){return r!==null},get shouldRefresh(){var c;return!s.isRefreshing&&((c=n?.expiresOnTimestamp)!==null&&c!==void 0?c:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(c,u){var l;return s.isRefreshing||(r=Jze(()=>t.getToken(c,u),o.retryIntervalInMs,(l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:Date.now()).then(p=>(r=null,n=p,i=u.tenantId,n)).catch(p=>{throw r=null,n=null,i=void 0,p})),r}return async(c,u)=>i!==u.tenantId||!!u.claims||s.mustRefresh?a(c,u):(s.shouldRefresh&&a(c,u),n)}var Xze,Ave=I(()=>{YN();Xze={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2}});async function Zze(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}function eVe(t){let e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function Pve(t){var e;let{credential:r,scopes:n,challengeCallbacks:i}=t,o=t.logger||es,s=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:Zze,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=r?Rve(r):()=>Promise.resolve(null);return{name:kz,async sendRequest(c,u){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await s.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:c,getAccessToken:a,logger:o});let l,d;try{l=await u(c)}catch(p){d=p,l=p.response}if(s.authorizeRequestOnChallenge&&l?.status===401&&eVe(l)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:c,response:l,getAccessToken:a,logger:o}))return u(c);if(d)throw d;return l}}}var kz,kve=I(()=>{Ave();Rx();kz="bearerTokenAuthenticationPolicy"});function Dve(){return{name:Dz,async sendRequest(t,e){if(typeof t.body=="string"&&t.body.startsWith("[")){let r=JSON.parse(t.body);Array.isArray(r)&&(t.body=r.map(n=>JSON.stringify(n)+`
`).join(""))}return e(t)}}}var Dz,Nve=I(()=>{Dz="ndJsonPolicy"});var Lve={};an(Lve,{RestError:()=>fc,bearerTokenAuthenticationPolicy:()=>Pve,bearerTokenAuthenticationPolicyName:()=>kz,createDefaultHttpClient:()=>ove,createEmptyPipeline:()=>LN,createHttpHeaders:()=>Gx,createPipelineFromOptions:()=>J0e,createPipelineRequest:()=>bve,decompressResponsePolicy:()=>WN,decompressResponsePolicyName:()=>kj,defaultRetryPolicy:()=>ZN,exponentialRetryPolicy:()=>Sve,exponentialRetryPolicyName:()=>xve,formDataPolicy:()=>rL,formDataPolicyName:()=>Vj,getDefaultProxySettings:()=>pz,isRestError:()=>pL,logPolicy:()=>GN,logPolicyName:()=>Ej,ndJsonPolicy:()=>Dve,ndJsonPolicyName:()=>Dz,proxyPolicy:()=>uL,proxyPolicyName:()=>dz,redirectPolicy:()=>jN,redirectPolicyName:()=>Cj,retryPolicy:()=>ud,setClientRequestIdPolicy:()=>lL,setClientRequestIdPolicyName:()=>mz,systemErrorRetryPolicy:()=>Tve,systemErrorRetryPolicyName:()=>Az,throttlingRetryPolicy:()=>Ive,throttlingRetryPolicyName:()=>Pz,tlsPolicy:()=>dL,tlsPolicyName:()=>gz,tracingPolicy:()=>mL,tracingPolicyName:()=>Sz,userAgentPolicy:()=>$N,userAgentPolicyName:()=>Aj});var Ove=I(()=>{cj();Z0e();sve();gL();_ve();fL();Dj();Eve();hz();Tj();fz();Ij();Cve();wve();Mx();Ez();Lj();Pj();vz();$j();kve();Nve()});var Uve=k((DI,Fve)=>{"use strict";var tVe=DI&&DI.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},rVe=DI&&DI.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Mve=(Ove(),Gi(Lve)),nVe="https://monitor.azure.com//.default";function iVe(t){return null}var oVe=function(){function t(e,r){var n=r?[r]:[nVe];this._azureTokenPolicy=Mve.bearerTokenAuthenticationPolicy({credential:e,scopes:n})}return t.prototype.addAuthorizationHeader=function(e){return tVe(this,void 0,void 0,function(){var r,n;return rVe(this,function(i){switch(i.label){case 0:return r="authorization",n=Mve.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,iVe)];case 1:return i.sent(),e.headers[r]=n.headers.get(r),[2]}})})},t}();Fve.exports=oVe});var qve=k((Mkt,Bve)=>{"use strict";var sVe=Nn(),aVe=Qo(),cVe=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){sVe.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(e),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;n||(e||aVe.isNodeExit?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t}();Bve.exports=cVe});var Hve=k(xL=>{"use strict";Object.defineProperty(xL,"__esModule",{value:!0});xL.azureRoleEnvironmentTelemetryProcessor=void 0;function uVe(t,e){}xL.azureRoleEnvironmentTelemetryProcessor=uVe});var zve=k(Vx=>{"use strict";Object.defineProperty(Vx,"__esModule",{value:!0});Vx.getSamplingHashCode=Vx.samplingTelemetryProcessor=void 0;var Gve=Ts();function lVe(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&Gve.TelemetryType.Metric===Gve.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=jve(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}Vx.samplingTelemetryProcessor=lVe;function jve(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}Vx.getSamplingHashCode=jve});var Vve=k(SL=>{"use strict";Object.defineProperty(SL,"__esModule",{value:!0});SL.performanceMetricsTelemetryProcessor=void 0;var Nz=_N(),Lz=Ts();function dVe(t,e){switch(e&&e.addDocument(t),t.data.baseType){case Lz.TelemetryTypeString.Exception:Nz.countException();break;case Lz.TelemetryTypeString.Request:var r=t.data.baseData;Nz.countRequest(r.duration,r.success);break;case Lz.TelemetryTypeString.Dependency:var n=t.data.baseData;Nz.countDependency(n.duration,n.success);break}return!0}SL.performanceMetricsTelemetryProcessor=dVe});var $ve=k($x=>{"use strict";var ld=$x&&$x.__assign||function(){return ld=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ld.apply(this,arguments)};Object.defineProperty($x,"__esModule",{value:!0});$x.preAggregatedMetricsTelemetryProcessor=void 0;var pVe=Ts(),NI=BG(),EL=Ts();function fVe(t,e){if(NI.isEnabled())switch(t.data.baseType){case EL.TelemetryTypeString.Exception:var r=t.data.baseData;r.properties=ld(ld({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole]};NI.countException(n);break;case EL.TelemetryTypeString.Trace:var i=t.data.baseData;i.properties=ld(ld({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var o={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],traceSeverityLevel:pVe.SeverityLevel[i.severity]};NI.countTrace(o);break;case EL.TelemetryTypeString.Request:var s=t.data.baseData;s.properties=ld(ld({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var a={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};NI.countRequest(s.duration,a);break;case EL.TelemetryTypeString.Dependency:var c=t.data.baseData;c.properties=ld(ld({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var u={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],dependencySuccess:c.success,dependencyType:c.type,dependencyTarget:c.target,dependencyResultCode:c.resultCode};NI.countDependency(c.duration,u);break}return!0}$x.preAggregatedMetricsTelemetryProcessor=fVe});var Wve=k(dd=>{"use strict";var mVe=dd&&dd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TL=dd&&dd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mVe(e,t,r)};Object.defineProperty(dd,"__esModule",{value:!0});TL(Hve(),dd);TL(zve(),dd);TL(Vve(),dd);TL($ve(),dd)});var Oz=k((Gkt,Qve)=>{"use strict";var Nt=Ts(),Da=Qo(),Kve=sh(),hVe=Nn(),gVe=function(){function t(){}return t.createEnvelope=function(e,r,n,i,o){var s=null;switch(r){case Nt.TelemetryType.Trace:s=t.createTraceData(e);break;case Nt.TelemetryType.Dependency:s=t.createDependencyData(e);break;case Nt.TelemetryType.Event:s=t.createEventData(e);break;case Nt.TelemetryType.Exception:s=t.createExceptionData(e);break;case Nt.TelemetryType.Request:s=t.createRequestData(e);break;case Nt.TelemetryType.Metric:s=t.createMetricData(e);break;case Nt.TelemetryType.Availability:s=t.createAvailabilityData(e);break;case Nt.TelemetryType.PageView:s=t.createPageViewData(e);break}if(s&&s.baseData&&Nt.domainSupportsProperties(s.baseData)){if(n)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);t.addAzureFunctionsCorrelationProperties(s.baseData.properties),s.baseData.properties&&(s.baseData.properties=Da.validateStringMap(s.baseData.properties))}var c=o&&o.instrumentationKey||"",u=new Nt.Envelope;return u.data=s,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),u.tags=this.getTags(i,e.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=o?o.samplingPercentage:100,r===Nt.TelemetryType.Metric&&(u.sampleRate=100),u},t.addAzureFunctionsCorrelationProperties=function(e){var r=Kve.CorrelationContextManager.getCurrentContext();if(r&&r.customProperties&&r.customProperties.getProperty instanceof Function){e=e||{};var n=r.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),n=r.customProperties.getProperty("ProcessId"),n&&(e.ProcessId=n),n=r.customProperties.getProperty("LogLevel"),n&&(e.LogLevel=n),n=r.customProperties.getProperty("Category"),n&&(e.Category=n),n=r.customProperties.getProperty("HostInstanceId"),n&&(e.HostInstanceId=n),n=r.customProperties.getProperty("AzFuncLiveLogsSessionId"),n&&(e.AzFuncLiveLogsSessionId=n)}},t.truncateProperties=function(e){if(e.properties)try{for(var r={},n=Object.keys(e.properties),i=Object.values(e.properties),o=0;o<n.length;o++)n[o].length<=150&&(Da.isDate(i[o])||(i[o]==null&&(i[o]=""),typeof i[o]=="object"&&(i[o]=Da.stringify(i[o])),r[n[o]]=String(i[o]).substring(0,8192)),r[n[o]]=i[o]);return r}catch(s){hVe.warn("Failed to properly truncate telemetry properties: ",s)}},t.createTraceData=function(e){var r,n=new Nt.MessageData;n.message=(r=e.message)===null||r===void 0?void 0:r.substring(0,32768),n.properties=this.truncateProperties(e),isNaN(e.severity)?n.severityLevel=Nt.SeverityLevel.Information:n.severityLevel=e.severity;var i=new Nt.Data;return i.baseType=Nt.telemetryTypeToBaseType(Nt.TelemetryType.Trace),i.baseData=n,i},t.createDependencyData=function(e){var r,n,i,o=new Nt.RemoteDependencyData;o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.data=(n=e.data)===null||n===void 0?void 0:n.substring(0,8192),o.target=(i=e.target)===null||i===void 0?void 0:i.substring(0,1024),o.duration=Da.msToTimeSpan(e.duration),o.success=e.success,o.type=e.dependencyTypeName,o.properties=this.truncateProperties(e),o.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?o.id=e.id:o.id=Da.w3cTraceId();var s=new Nt.Data;return s.baseType=Nt.telemetryTypeToBaseType(Nt.TelemetryType.Dependency),s.baseData=o,s},t.createEventData=function(e){var r,n=new Nt.EventData;n.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,512),n.properties=this.truncateProperties(e),n.measurements=e.measurements;var i=new Nt.Data;return i.baseType=Nt.telemetryTypeToBaseType(Nt.TelemetryType.Event),i.baseData=n,i},t.createExceptionData=function(e){var r,n,i=new Nt.ExceptionData;i.properties=this.truncateProperties(e),isNaN(e.severity)?i.severityLevel=Nt.SeverityLevel.Error:i.severityLevel=e.severity,i.measurements=e.measurements,i.exceptions=[];var o=e.exception.stack,s=new Nt.ExceptionDetails;s.message=(r=e.exception.message)===null||r===void 0?void 0:r.substring(0,32768),s.typeName=(n=e.exception.name)===null||n===void 0?void 0:n.substring(0,1024),s.parsedStack=this.parseStack(o),s.hasFullStack=Da.isArray(s.parsedStack)&&s.parsedStack.length>0,i.exceptions.push(s);var a=new Nt.Data;return a.baseType=Nt.telemetryTypeToBaseType(Nt.TelemetryType.Exception),a.baseData=i,a},t.createRequestData=function(e){var r,n,i,o,s=new Nt.RequestData;e.id?s.id=e.id:s.id=Da.w3cTraceId(),s.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),s.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),s.source=(i=e.source)===null||i===void 0?void 0:i.substring(0,1024),s.duration=Da.msToTimeSpan(e.duration),s.responseCode=(o=e.resultCode?e.resultCode.toString():"0")===null||o===void 0?void 0:o.substring(0,1024),s.success=e.success,s.properties=this.truncateProperties(e),s.measurements=e.measurements;var a=new Nt.Data;return a.baseType=Nt.telemetryTypeToBaseType(Nt.TelemetryType.Request),a.baseData=s,a},t.createMetricData=function(e){var r,n=new Nt.MetricData;n.metrics=[];var i=new Nt.DataPoint;i.count=isNaN(e.count)?1:e.count,i.kind=Nt.DataPointType.Aggregation,i.max=isNaN(e.max)?e.value:e.max,i.min=isNaN(e.min)?e.value:e.min,i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.stdDev=isNaN(e.stdDev)?0:e.stdDev,i.value=e.value,i.ns=e.namespace,n.metrics.push(i),n.properties=this.truncateProperties(e);var o=new Nt.Data;return o.baseType=Nt.telemetryTypeToBaseType(Nt.TelemetryType.Metric),o.baseData=n,o},t.createAvailabilityData=function(e){var r,n,i=new Nt.AvailabilityData;e.id?i.id=e.id:i.id=Da.w3cTraceId(),i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=Da.msToTimeSpan(e.duration),i.success=e.success,i.runLocation=e.runLocation,i.message=(n=e.message)===null||n===void 0?void 0:n.substring(0,8192),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new Nt.Data;return o.baseType=Nt.telemetryTypeToBaseType(Nt.TelemetryType.Availability),o.baseData=i,o},t.createPageViewData=function(e){var r,n,i=new Nt.PageViewData;i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=Da.msToTimeSpan(e.duration),i.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new Nt.Data;return o.baseType=Nt.telemetryTypeToBaseType(Nt.TelemetryType.PageView),o.baseData=i,o},t.getTags=function(e,r){var n=Kve.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var o in e.tags)i[o]=e.tags[o];if(r)for(var o in r)i[o]=r[o];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(Yve.regex.test(a)){var c=new Yve(n[s],i++);o+=c.sizeInBytes,r.push(c)}}var u=32*1024;if(o>u)for(var l=0,d=r.length-1,p=0,f=l,m=d;l<d;){var h=r[l].sizeInBytes,g=r[d].sizeInBytes;if(p+=h+g,p>u){var v=m-f+1;r.splice(f,v);break}f=l,m=d,l++,d--}}return r},t}(),Yve=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=Da.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=Da.trim(n[2])||this.method,this.fileName=Da.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t}();Qve.exports=gVe});var Xve=k(xh=>{"use strict";var vVe=xh&&xh.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},yVe=xh&&xh.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(xh,"__esModule",{value:!0});xh.FileAccessControl=void 0;var bVe=require("fs"),_Ve=require("os"),Wx=require("child_process"),xVe=Nn(),SVe=function(){function t(){}return t.checkFileProtection=function(){if(!t.OS_PROVIDES_FILE_PROTECTION&&!t.OS_FILE_PROTECTION_CHECKED)if(t.OS_FILE_PROTECTION_CHECKED=!0,t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=bVe.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||xVe.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0},t.applyACLRules=function(e){return vVe(this,void 0,void 0,function(){var r,n;return yVe(this,function(i){switch(i.label){case 0:if(!t.USE_ICACLS)return[3,7];if(t.ACLED_DIRECTORIES[e]!==void 0)return[3,6];t.ACLED_DIRECTORIES[e]=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return r=i.sent(),[4,this._runICACLS(this._getACLArguments(e,r))];case 3:return i.sent(),t.ACLED_DIRECTORIES[e]=!0,[3,5];case 4:throw n=i.sent(),t.ACLED_DIRECTORIES[e]=!1,n;case 5:return[3,7];case 6:if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)");i.label=7;case 7:return[2]}})})},t.applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t._runICACLS=function(e){return new Promise(function(r,n){var i=Wx.spawn(t.ICACLS_PATH,e,{windowsHide:!0});i.on("error",function(o){return n(o)}),i.on("close",function(o,s){o===0?r():n(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+o+")"))})})},t._runICACLSSync=function(e){if(Wx.spawnSync){var r=Wx.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t._getACLIdentity=function(){return new Promise(function(e,r){t.ACL_IDENTITY&&e(t.ACL_IDENTITY);var n=Wx.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),i="";n.stdout.on("data",function(o){return i+=o}),n.on("error",function(o){return r(o)}),n.on("close",function(o,s){t.ACL_IDENTITY=i&&i.trim(),o===0?e(t.ACL_IDENTITY):r(new Error("Getting ACL identity did not succeed (PS returned code "+o+")"))})})},t._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(Wx.spawnSync){var e=Wx.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.TAG="FileAccessControl",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.OS_FILE_PROTECTION_CHECKED=!1,t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=_Ve.type()==="Windows_NT",t}();xh.FileAccessControl=SVe});var Fz=k((OI,Zve)=>{"use strict";var CL=OI&&OI.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},IL=OI&&OI.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Mz=require("fs"),EVe=require("os"),Gv=require("path"),TVe=require("zlib"),Sh=ti(),CVe=Cx(),rf=XU(),Na=Qo(),IVe=require("url"),Jve=Nn(),LI=Xve(),wVe=439,RVe=402,AVe=[200,206,402,408,429,439,500],PVe=function(){function t(e,r,n,i,o,s,a){this._redirectedHost=null,this._config=e,this._onSuccess=n,this._onError=i,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=r,this._fileCleanupTimer=null,this._tempDir=Gv.join(EVe.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=s||!1,this._shutdownStatsbeat=a,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return t.prototype.setDiskRetryMode=function(e,r,n){var i=this;e&&LI.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=LI.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!LI.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(Sh.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},t.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(Sh.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},t.prototype.send=function(e,r){return CL(this,void 0,void 0,function(){var n,i,o,s,a,c,u,l,d=this;return IL(this,function(p){switch(p.label){case 0:if(!e)return[3,5];if(n=this._redirectedHost||this._config.endpointUrl,i=new IVe.URL(n).hostname,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!s)return[3,4];this._statsbeat&&this._statsbeat.addFeature(Sh.StatsbeatFeature.AAD_HANDLING),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,s.addAuthorizationHeader(o)];case 2:return p.sent(),[3,4];case 3:return a=p.sent(),c="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(c+="This batch of telemetry items will be retried. ",this._storeToDisk(e)),c+="Error:"+a.toString(),this._logWarn(c),typeof r=="function"&&r(c),[2];case 4:u="",e.forEach(function(f){var m=Na.stringify(f);typeof m=="string"&&(u+=m+`
`)}),u.length>0&&(u=u.substring(0,u.length-1)),l=Buffer.from?Buffer.from(u):new Buffer(u),TVe.gzip(l,function(f,m){var h=m;f?(d._logWarn(Na.dumpObj(f)),h=l,o.headers["Content-Length"]=l.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=m.length.toString()),d._logInfo(Na.dumpObj(o)),o[CVe.disableCollectionRequestOption]=!0;var g=+new Date,v=function(b){b.setEncoding("utf-8");var x="";b.on("data",function(S){x+=S}),b.on("end",function(){var S=+new Date,T=S-g;if(d._numConsecutiveFailures=0,d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&(AVe.includes(b.statusCode)?d._statsbeatHasReachedIngestionAtLeastOnce=!0:d._statsbeatFailedToIngest()),d._statsbeat&&(b.statusCode==RVe||b.statusCode==wVe?d._statsbeat.countThrottle(Sh.StatsbeatNetworkCategory.Breeze,i,b.statusCode):d._statsbeat.countRequest(Sh.StatsbeatNetworkCategory.Breeze,i,T,b.statusCode===200,b.statusCode)),d._enableDiskRetryMode){if(b.statusCode===200)d._resendTimer||(d._resendTimer=setTimeout(function(){d._resendTimer=null,d._sendFirstFileOnDisk()},d._resendInterval),d._resendTimer.unref());else if(d._isRetriable(b.statusCode))try{d._statsbeat&&d._statsbeat.countRetry(Sh.StatsbeatNetworkCategory.Breeze,i,b.statusCode);var L=JSON.parse(x),M=[];L.errors&&(L.errors.forEach(function(J){(J.statusCode==429||J.statusCode==500||J.statusCode==503)&&M.push(e[J.index])}),M.length>0&&d._storeToDisk(M))}catch{d._storeToDisk(e)}}if(b.statusCode===307||b.statusCode===308)if(d._numConsecutiveRedirects++,d._numConsecutiveRedirects<10){var j=b.headers.location?b.headers.location.toString():null;j&&(d._redirectedHost=j,d.send(e,r))}else{var N={name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."};d._statsbeat&&d._statsbeat.countException(Sh.StatsbeatNetworkCategory.Breeze,i,N),typeof r=="function"&&r("Error sending telemetry because of circular redirects.")}else d._numConsecutiveRedirects=0,typeof r=="function"&&r(x),d._logInfo(x),typeof d._onSuccess=="function"&&d._onSuccess(x)})},y=Na.makeRequest(d._config,n,o,v);y.setTimeout(t.HTTP_TIMEOUT,function(){d._requestTimedOut=!0,y.abort()}),y.on("error",function(b){if(d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&d._statsbeatFailedToIngest(),d._numConsecutiveFailures++,d._statsbeat&&d._statsbeat.countException(Sh.StatsbeatNetworkCategory.Breeze,i,b),!d._enableDiskRetryMode||d._numConsecutiveFailures>0&&d._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var x="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";d._enableDiskRetryMode&&(x="Ingestion endpoint could not be reached "+d._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),d._logWarn(x,Na.dumpObj(b))}else{var x="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";d._logInfo(x,Na.dumpObj(b))}d._onErrorHelper(b),typeof r=="function"&&(b?(d._requestTimedOut&&(b.name="telemetry timeout",b.message="telemetry request timed out"),r(Na.dumpObj(b))):r("Error sending telemetry")),d._enableDiskRetryMode&&d._storeToDisk(e)}),y.write(h),y.end()}),p.label=5;case 5:return[2]}})})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(Na.stringify(e))},t.prototype._isRetriable=function(e){return e===206||e===401||e===403||e===408||e===429||e===500||e===502||e===503||e===504},t.prototype._logInfo=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||Jve.info(t.TAG,e,r)},t.prototype._logWarn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||Jve.warn(t.TAG,e,r)},t.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},t.prototype._storeToDisk=function(e){return CL(this,void 0,void 0,function(){var r,n,i,o,s,a,c;return IL(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,rf.confirmDirExists(this._tempDir)];case 1:return u.sent(),[3,3];case 2:return r=u.sent(),this._logWarn("Failed to create folder to put telemetry: "+Na.dumpObj(r)),this._onErrorHelper(r),[2];case 3:return u.trys.push([3,5,,6]),[4,LI.FileAccessControl.applyACLRules(this._tempDir)];case 4:return u.sent(),[3,6];case 5:return n=u.sent(),this._logWarn("Failed to apply file access control to folder: "+Na.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return u.trys.push([6,8,,9]),[4,rf.getShallowDirectorySize(this._tempDir)];case 7:return i=u.sent(),i>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+i),[2]):[3,9];case 8:return o=u.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+Na.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return u.trys.push([9,11,,12]),s=new Date().getTime()+".ai.json",a=Gv.join(this._tempDir,s),this._logInfo("saving data to disk at: "+a),[4,rf.writeFileAsync(a,Na.stringify(e),{mode:384})];case 10:return u.sent(),[3,12];case 11:return c=u.sent(),this._logWarn("Failed to persist telemetry to disk: "+Na.dumpObj(c)),this._onErrorHelper(c),[2];case 12:return[2]}})})},t.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),Mz.existsSync(this._tempDir)||Mz.mkdirSync(this._tempDir),LI.FileAccessControl.applyACLRulesSync(this._tempDir);var r=rf.getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=Gv.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+i),Mz.writeFileSync(i,e,{mode:384})}catch(o){this._logWarn("Error while saving data to disk: "+Na.dumpObj(o)),this._onErrorHelper(o)}},t.prototype._sendFirstFileOnDisk=function(){return CL(this,void 0,void 0,function(){var e,r,n,i,o,s;return IL(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,rf.readdirAsync(this._tempDir)];case 1:return e=a.sent(),e=e.filter(function(c){return Gv.basename(c).indexOf(".ai.json")>-1}),e.length>0?(r=e[0],n=Gv.join(this._tempDir,r),[4,rf.readFileAsync(n)]):[3,5];case 2:return i=a.sent(),[4,rf.unlinkAsync(n)];case 3:return a.sent(),o=JSON.parse(i.toString()),[4,this.send(o)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return s=a.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.prototype._fileCleanupTask=function(){return CL(this,void 0,void 0,function(){var e,r,n,i,o,s,a=this;return IL(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),[4,rf.readdirAsync(this._tempDir)];case 1:if(e=c.sent(),e=e.filter(function(u){return Gv.basename(u).indexOf(".ai.json")>-1}),!(e.length>0))return[3,5];r=0,c.label=2;case 2:return r<e.length?(n=new Date(parseInt(e[r].split(".ai.json")[0])),i=new Date(+new Date-t.FILE_RETEMPTION_PERIOD)>n,i?(o=Gv.join(this._tempDir,e[r]),[4,rf.unlinkAsync(o).catch(function(u){a._onErrorHelper(u)})]):[3,4]):[3,5];case 3:c.sent(),c.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return s=c.sent(),s.code!="ENOENT"&&this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.TAG="Sender",t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1024*1024,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.CLEANUP_TIMEOUT=60*60*1e3,t.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,t.TEMPDIR_PREFIX="appInsights-node",t.HTTP_TIMEOUT=2e4,t}();Zve.exports=PVe});var tye=k(wL=>{"use strict";Object.defineProperty(wL,"__esModule",{value:!0});wL.AzureVirtualMachine=void 0;var eye=Nn(),kVe=Qo(),DVe=Cx(),NVe="http://169.254.169.254/metadata/instance/compute",LVe="api-version=2017-12-01",OVe="format=json",MVe="UNREACH",FVe=function(){function t(){}return t.getAzureComputeMetadata=function(e,r){var n,i=this,o={},s=NVe+"?"+LVe+"&"+OVe,a=(n={method:"GET"},n[DVe.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),c=kVe.makeRequest(e,s,a,function(u){if(u.statusCode===200){o.isVM=!0;var l="";u.on("data",function(d){l+=d}),u.on("end",function(){try{var d=JSON.parse(l);o.id=d.vmId||"",o.subscriptionId=d.subscriptionId||"",o.osType=d.osType||""}catch(p){eye.info(t.TAG,p)}r(o)})}else r(o)},!1,!1);c&&(setTimeout(function(){i._requestTimedOut=!0,c.abort()},t.HTTP_TIMEOUT),c.on("error",function(u){i._requestTimedOut&&u&&(u.name="telemetry timeout",u.message="telemetry request timed out"),u&&u.message&&u.message.indexOf(MVe)>-1?o.isVM=!1:eye.info(t.TAG,u),r(o)}),c.end())},t.HTTP_TIMEOUT=2500,t.TAG="AzureVirtualMachine",t}();wL.AzureVirtualMachine=FVe});var rye=k(RL=>{"use strict";Object.defineProperty(RL,"__esModule",{value:!0});RL.NetworkStatsbeat=void 0;var UVe=function(){function t(e,r){this.endpoint=e,this.host=r,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return t}();RL.NetworkStatsbeat=UVe});var aye=k((jv,sye)=>{"use strict";var pd=jv&&jv.__assign||function(){return pd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pd.apply(this,arguments)},Uz=jv&&jv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Bz=jv&&jv.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},BVe=require("os"),qVe=Oz(),nye=Nn(),HVe=Fz(),Mn=ti(),GVe=Ts(),jVe=tye(),zVe=sj(),iye=yx(),VVe=rye(),oye=Qo(),$Ve="node",WVe=function(){function t(e,r){this._attach=Mn.StatsbeatAttach.sdk,this._feature=Mn.StatsbeatFeature.NONE,this._instrumentation=Mn.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=r||new iye;var n=this._getConnectionString(e);this._statsbeatConfig=new zVe(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new HVe(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),e?(this._handle||(this._handle=setInterval(function(){r.trackShortIntervalStatsbeats()},t.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval(function(){r.trackLongIntervalStatsbeats()},t.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.setCodelessAttach=function(){this._attach=Mn.StatsbeatAttach.codeless},t.prototype.addFeature=function(e){this._feature|=e},t.prototype.removeFeature=function(e){this._feature&=~e},t.prototype.addInstrumentation=function(e){this._instrumentation|=e},t.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},t.prototype.countRequest=function(e,r,n,i,o){if(this.isEnabled()){var s=this._getNetworkStatsbeatCounter(e,r);if(s.totalRequestCount++,s.intervalRequestExecutionTime+=n,i===!1){if(!o)return;var a=s.totalFailedRequestCount.find(function(c){return o===c.statusCode});a?a.count++:s.totalFailedRequestCount.push({statusCode:o,count:1})}else s.totalSuccesfulRequestCount++}},t.prototype.countException=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.exceptionCount.find(function(s){return n.name===s.exceptionType});o?o.count++:i.exceptionCount.push({exceptionType:n.name,count:1})}},t.prototype.countThrottle=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.throttleCount.find(function(s){return n===s.statusCode});o?o.count++:i.throttleCount.push({statusCode:n,count:1})}},t.prototype.countRetry=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.retryCount.find(function(s){return n===s.statusCode});o?o.count++:i.retryCount.push({statusCode:n,count:1})}},t.prototype.trackShortIntervalStatsbeats=function(){return Uz(this,void 0,void 0,function(){var e,r;return Bz(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return n.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(e),this._trackRequestsCount(e),[4,this._sendStatsbeats()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),nye.info(t.TAG,"Failed to send Statsbeat metrics: "+oye.dumpObj(r)),[3,4];case 4:return[2]}})})},t.prototype.trackLongIntervalStatsbeats=function(){return Uz(this,void 0,void 0,function(){var e,r,n,i,o;return Bz(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return s.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},r=Object.assign({rpId:this._resourceIdentifier},e),this._statbeatMetrics.push({name:Mn.StatsbeatCounter.ATTACH,value:1,properties:r}),this._instrumentation!=Mn.StatsbeatInstrumentation.NONE&&(n=Object.assign({feature:this._instrumentation,type:Mn.StatsbeatFeatureType.Instrumentation},e),this._statbeatMetrics.push({name:Mn.StatsbeatCounter.FEATURE,value:1,properties:n})),this._feature!=Mn.StatsbeatFeature.NONE&&(i=Object.assign({feature:this._feature,type:Mn.StatsbeatFeatureType.Feature},e),this._statbeatMetrics.push({name:Mn.StatsbeatCounter.FEATURE,value:1,properties:i})),[4,this._sendStatsbeats()];case 2:return s.sent(),[3,4];case 3:return o=s.sent(),nye.info(t.TAG,"Failed to send Statsbeat metrics: "+oye.dumpObj(o)),[3,4];case 4:return[2]}})})},t.prototype._getNetworkStatsbeatCounter=function(e,r){for(var n=this._getShortHost(r),i=0;i<this._networkStatsbeatCollection.length;i++)if(e===this._networkStatsbeatCollection[i].endpoint&&n===this._networkStatsbeatCollection[i].host)return this._networkStatsbeatCollection[i];var o=new VVe.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(o),o},t.prototype._trackRequestDuration=function(e){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r];n.time=+new Date;var i=n.totalRequestCount-n.lastRequestCount||0,o=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,s=o>0&&o/i||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,i>0){var a=Object.assign({endpoint:this._networkStatsbeatCollection[r].endpoint,host:this._networkStatsbeatCollection[r].host},e);this._statbeatMetrics.push({name:Mn.StatsbeatCounter.REQUEST_DURATION,value:s,properties:a})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},t.prototype._getShortHost=function(e){var r=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/),i=n.exec(e);i!=null&&i.length>1&&(r=i[1]),r=r.replace(".in.applicationinsights.azure.com","")}catch{}return r},t.prototype._trackRequestsCount=function(e){for(var r=this,n=function(a){o=i._networkStatsbeatCollection[a];var c=Object.assign({endpoint:o.endpoint,host:o.host},e);o.totalSuccesfulRequestCount>0&&(i._statbeatMetrics.push({name:Mn.StatsbeatCounter.REQUEST_SUCCESS,value:o.totalSuccesfulRequestCount,properties:c}),o.totalSuccesfulRequestCount=0),o.totalFailedRequestCount.length>0&&(o.totalFailedRequestCount.forEach(function(u){c=Object.assign(pd(pd({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:Mn.StatsbeatCounter.REQUEST_FAILURE,value:u.count,properties:c})}),o.totalFailedRequestCount=[]),o.retryCount.length>0&&(o.retryCount.forEach(function(u){c=Object.assign(pd(pd({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:Mn.StatsbeatCounter.RETRY_COUNT,value:u.count,properties:c})}),o.retryCount=[]),o.throttleCount.length>0&&(o.throttleCount.forEach(function(u){c=Object.assign(pd(pd({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:Mn.StatsbeatCounter.THROTTLE_COUNT,value:u.count,properties:c})}),o.throttleCount=[]),o.exceptionCount.length>0&&(o.exceptionCount.forEach(function(u){c=Object.assign(pd(pd({},c),{exceptionType:u.exceptionType})),r._statbeatMetrics.push({name:Mn.StatsbeatCounter.EXCEPTION_COUNT,value:u.count,properties:c})}),o.exceptionCount=[])},i=this,o,s=0;s<this._networkStatsbeatCollection.length;s++)n(s)},t.prototype._sendStatsbeats=function(){return Uz(this,void 0,void 0,function(){var e,r,n,i;return Bz(this,function(o){switch(o.label){case 0:for(e=[],r=0;r<this._statbeatMetrics.length;r++)n={name:this._statbeatMetrics[r].name,value:this._statbeatMetrics[r].value,properties:this._statbeatMetrics[r].properties},i=qVe.createEnvelope(n,GVe.TelemetryType.Metric,null,this._context,this._statsbeatConfig),i.name=Mn.StatsbeatTelemetryName,e.push(i);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:return o.sent(),[2]}})})},t.prototype._getCustomProperties=function(){this._language=$Ve,this._cikey=this._config.instrumentationKey,this._sdkVersion=iye.sdkVersion,this._os=BVe.type(),this._runtimeVersion=process.version},t.prototype._getResourceProvider=function(){var e=this;return new Promise(function(r,n){var i=!1;e._resourceProvider=Mn.StatsbeatResourceProvider.unknown,e._resourceIdentifier=Mn.StatsbeatResourceProvider.unknown,process.env.AKS_ARM_NAMESPACE_ID?(e._resourceProvider=Mn.StatsbeatResourceProvider.aks,e._resourceIdentifier=process.env.AKS_ARM_NAMESPACE_ID):process.env.WEBSITE_SITE_NAME?(e._resourceProvider=Mn.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=Mn.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(e._isVM===void 0||e._isVM==!0?(i=!0,jVe.AzureVirtualMachine.getAzureComputeMetadata(e._config,function(o){e._isVM=o.isVM,e._isVM&&(e._resourceProvider=Mn.StatsbeatResourceProvider.vm,e._resourceIdentifier=o.id+"/"+o.subscriptionId,o.osType&&(e._os=o.osType)),r()})):e._resourceProvider=Mn.StatsbeatResourceProvider.unknown),i||r()})},t.prototype._shutdownStatsbeat=function(){this.enable(!1)},t.prototype._getConnectionString=function(e){for(var r=e.endpointUrl,n=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],i=0;i<n.length;i++)if(r.indexOf(n[i])>-1)return t.EU_CONNECTION_STRING;return t.NON_EU_CONNECTION_STRING},t.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",t.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",t.STATS_COLLECTION_SHORT_INTERVAL=9e5,t.STATS_COLLECTION_LONG_INTERVAL=864e5,t.TAG="Statsbeat",t}();sye.exports=WVe});var lye=k(($kt,uye)=>{"use strict";var KVe=require("url"),YVe=sj(),QVe=Uve(),XVe=yx(),nf=Ts(),JVe=qve(),qz=Wve(),cye=sh(),ZVe=aye(),e$e=Fz(),Hz=Qo(),AL=Nn(),t$e=Oz(),r$e=function(){function t(e){this._telemetryProcessors=[];var r=new YVe(e);if(this.config=r,!this.config.instrumentationKey||this.config.instrumentationKey=="")throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new XVe,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new ZVe(this.config,this.context),this._statsbeat.enable(!0));var n=new e$e(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new JVe(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,nf.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,nf.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,nf.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,nf.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!Hz.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,nf.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,nf.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,nf.TelemetryType.Request)},t.prototype.trackDependency=function(e){if(e&&!e.target&&e.data)try{e.target=new KVe.URL(e.data).host}catch(r){e.target=null,AL.warn(t.TAG,"The URL object is failed to create.",r)}this.track(e,nf.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&nf.telemetryTypeToBaseType(r)){var n=t$e.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&qz.samplingTelemetryProcessor(n,{correlationContext:cye.CorrelationContextManager.getCurrentContext()}),qz.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(qz.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else AL.warn(t.TAG,"track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){},t.prototype.getAuthorizationHandler=function(e){return e&&e.aadTokenCredential?(this.authorizationHandler||(AL.info(t.TAG,"Adding authorization handler"),this.authorizationHandler=new QVe(e.aadTokenCredential,e.aadAudience)),this.authorizationHandler):null},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=cye.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,AL.warn(t.TAG,"One of telemetry processors failed, telemetry item will be sent.",a,e)}return n&&(e&&e.tags&&(e.tags=Hz.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=Hz.validateStringMap(e.data.baseData.properties))),n},t.prototype.getStatsbeat=function(){return this._statsbeat},t.TAG="TelemetryClient",t}();uye.exports=r$e});var fye=k((Gz,pye)=>{"use strict";var n$e=Gz&&Gz.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i$e=lye(),dye=ZG(),o$e=Cx(),PL=Nn(),s$e=function(t){n$e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?dye.trackRequestSync(this,r):PL.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&PL.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?dye.trackRequest(this,r):PL.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?o$e.trackRequest(this,r):PL.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(i$e);pye.exports=s$e});var hye=k(mye=>{"use strict";Object.defineProperty(mye,"__esModule",{value:!0})});var _ye=k(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.dispose=re.Configuration=re.wrapWithCorrelationContext=re.startOperation=re.getCorrelationContext=re.start=re.setup=re.liveMetricsClient=re.defaultClient=re.DistributedTracingModes=void 0;var jz=sh(),a$e=Kme(),c$e=Qme(),zz=_N(),u$e=BG(),l$e=ihe(),d$e=ghe(),p$e=Cx(),f$e=ZG(),gye=Sv(),MI=Nn(),vye=Yhe(),Vz=Qhe(),m$e=Zhe();re.TelemetryClient=fye();re.Contracts=Ts();re.azureFunctionsTypes=hye();var yye;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(yye=re.DistributedTracingModes||(re.DistributedTracingModes={}));var FI,UI,BI,qI,HI,Kx,Yx,zv,GI,jI,mc=!1,kL;function h$e(t){return re.defaultClient?MI.info("The default client is already setup"):(re.defaultClient=new re.TelemetryClient(t),FI=new a$e(re.defaultClient),UI=new c$e(re.defaultClient),BI=new zz(re.defaultClient),qI=new u$e(re.defaultClient),HI=new l$e(re.defaultClient),Kx=new d$e(re.defaultClient),zv=new f$e(re.defaultClient),GI=new p$e(re.defaultClient),Yx||(Yx=new Vz.AutoCollectNativePerformance(re.defaultClient)),jI=new m$e.AzureFunctionsHook(re.defaultClient)),$z}re.setup=h$e;function g$e(){re.defaultClient&&(re.defaultClient.config.enableAutoCollectExternalLoggers==null&&(re.defaultClient.config.enableAutoCollectExternalLoggers=!0),re.defaultClient.config.enableAutoCollectConsole==null&&(re.defaultClient.config.enableAutoCollectConsole=!1),re.defaultClient.config.enableAutoCollectExceptions==null&&(re.defaultClient.config.enableAutoCollectExceptions=!0),re.defaultClient.config.enableAutoCollectPerformance==null&&(re.defaultClient.config.enableAutoCollectPerformance=!0),re.defaultClient.config.enableAutoCollectPreAggregatedMetrics==null&&(re.defaultClient.config.enableAutoCollectPreAggregatedMetrics=!0),re.defaultClient.config.enableAutoCollectHeartbeat==null&&(re.defaultClient.config.enableAutoCollectHeartbeat=!0),re.defaultClient.config.enableAutoCollectRequests==null&&(re.defaultClient.config.enableAutoCollectRequests=!0),re.defaultClient.config.enableAutoCollectDependencies==null&&(re.defaultClient.config.enableAutoCollectDependencies=!0),re.defaultClient.config.enableUseDiskRetryCaching==null&&(re.defaultClient.config.enableUseDiskRetryCaching=!0),re.defaultClient.config.enableAutoDependencyCorrelation==null&&(re.defaultClient.config.enableAutoDependencyCorrelation=!0),re.defaultClient.config.enableSendLiveMetrics==null&&(re.defaultClient.config.enableSendLiveMetrics=!1),re.defaultClient.config.enableAutoCollectExtendedMetrics==null&&(re.defaultClient.config.enableAutoCollectExtendedMetrics=!0),re.defaultClient.config.enableWebInstrumentation==null&&(re.defaultClient.config.enableWebInstrumentation=!1),re.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions==null&&(re.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=!1))}function bye(){if(re.defaultClient){mc=!0,g$e(),FI.enable(re.defaultClient.config.enableAutoCollectExternalLoggers,re.defaultClient.config.enableAutoCollectConsole),UI.enable(re.defaultClient.config.enableAutoCollectExceptions),BI.enable(re.defaultClient.config.enableAutoCollectPerformance),qI.enable(re.defaultClient.config.enableAutoCollectPreAggregatedMetrics),HI.enable(re.defaultClient.config.enableAutoCollectHeartbeat),zv.useAutoCorrelation(re.defaultClient.config.enableAutoDependencyCorrelation,re.defaultClient.config.enableUseAsyncHooks),zv.enable(re.defaultClient.config.enableAutoCollectRequests),GI.enable(re.defaultClient.config.enableAutoCollectDependencies),Kx.enable(re.defaultClient.config.enableWebInstrumentation,re.defaultClient.config.webInstrumentationConnectionString),re.defaultClient.config.enableSendLiveMetrics&&(re.liveMetricsClient||(re.liveMetricsClient=new vye(re.defaultClient.config,re.defaultClient.context,re.defaultClient.getAuthorizationHandler),kL=new zz(re.liveMetricsClient,1e3,!0),re.liveMetricsClient.addCollector(kL),re.defaultClient.quickPulseClient=re.liveMetricsClient),re.liveMetricsClient.enable(re.defaultClient.config.enableSendLiveMetrics)),jI.enable(re.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions);var t=Vz.AutoCollectNativePerformance.parseEnabled(re.defaultClient.config.enableAutoCollectExtendedMetrics,re.defaultClient.config);Yx.enable(re.defaultClient.config.enableAutoCollectExtendedMetrics,t.disabledMetrics),re.defaultClient&&re.defaultClient.channel&&re.defaultClient.channel.setUseDiskRetryCaching(re.defaultClient.config.enableUseDiskRetryCaching,re.defaultClient.config.enableResendInterval,re.defaultClient.config.enableMaxBytesOnDisk)}else MI.warn("Start cannot be called before setup");return $z}re.start=bye;function v$e(){return jz.CorrelationContextManager.getCurrentContext()}re.getCorrelationContext=v$e;function y$e(t,e){return jz.CorrelationContextManager.startOperation(t,e)}re.startOperation=y$e;function b$e(t,e){return jz.CorrelationContextManager.wrapCallback(t,e)}re.wrapWithCorrelationContext=b$e;var $z=function(){function t(){}return t.setDistributedTracingMode=function(e){return gye.w3cEnabled=e===yye.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),re.defaultClient&&(re.defaultClient.config.enableAutoCollectExternalLoggers=e,re.defaultClient.config.enableAutoCollectConsole=r,mc&&FI.enable(e,r)),t},t.setAutoCollectExceptions=function(e){return re.defaultClient&&(re.defaultClient.config.enableAutoCollectExceptions=e,mc&&UI.enable(e)),t},t.setAutoCollectPerformance=function(e,r){if(r===void 0&&(r=!0),re.defaultClient){re.defaultClient.config.enableAutoCollectPerformance=e;var n=Vz.AutoCollectNativePerformance.parseEnabled(r,re.defaultClient.config);re.defaultClient.config.enableAutoCollectExtendedMetrics=n.isEnabled,mc&&(BI.enable(e),Yx.enable(re.defaultClient.config.enableAutoCollectExtendedMetrics,n.disabledMetrics))}return t},t.setAutoCollectPreAggregatedMetrics=function(e){return re.defaultClient&&(re.defaultClient.config.enableAutoCollectPreAggregatedMetrics=e,mc&&qI.enable(e)),t},t.setAutoCollectHeartbeat=function(e){return re.defaultClient&&(re.defaultClient.config.enableAutoCollectHeartbeat=e,mc&&HI.enable(e)),t},t.enableAutoWebSnippetInjection=function(e,r){return re.defaultClient&&(re.defaultClient.config.enableWebInstrumentation=e,re.defaultClient.config.webInstrumentationConnectionString=r,mc&&Kx.enable(re.defaultClient.config.enableAutoWebSnippetInjection,re.defaultClient.config.webSnippetConnectionString)),t},t.enableWebInstrumentation=function(e,r){return re.defaultClient&&(re.defaultClient.config.enableWebInstrumentation=e,re.defaultClient.config.webInstrumentationConnectionString=r,mc&&Kx.enable(re.defaultClient.config.enableWebInstrumentation,re.defaultClient.config.webInstrumentationConnectionString)),t},t.setAutoCollectRequests=function(e){return re.defaultClient&&(re.defaultClient.config.enableAutoCollectRequests=e,mc&&zv.enable(e)),t},t.setAutoCollectDependencies=function(e){return re.defaultClient&&(re.defaultClient.config.enableAutoCollectDependencies=e,mc&&GI.enable(e)),t},t.setAutoDependencyCorrelation=function(e,r){return re.defaultClient&&(re.defaultClient.config.enableAutoDependencyCorrelation=e,re.defaultClient.config.enableUseAsyncHooks=r,mc&&zv.useAutoCorrelation(e,r)),t},t.setUseDiskRetryCaching=function(e,r,n){return re.defaultClient&&(re.defaultClient.config.enableUseDiskRetryCaching=e,re.defaultClient.config.enableResendInterval=r,re.defaultClient.config.enableMaxBytesOnDisk=n,re.defaultClient.channel&&re.defaultClient.channel.setUseDiskRetryCaching(re.defaultClient.config.enableUseDiskRetryCaching,re.defaultClient.config.enableResendInterval,re.defaultClient.config.enableMaxBytesOnDisk)),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),MI.enableDebug=e,MI.disableWarnings=!r,t},t.setAutoCollectIncomingRequestAzureFunctions=function(e){return re.defaultClient&&(re.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=e,mc&&jI.enable(e)),t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),re.defaultClient?(!re.liveMetricsClient&&e?(re.liveMetricsClient=new vye(re.defaultClient.config,re.defaultClient.context,re.defaultClient.getAuthorizationHandler),kL=new zz(re.liveMetricsClient,1e3,!0),re.liveMetricsClient.addCollector(kL),re.defaultClient.quickPulseClient=re.liveMetricsClient):re.liveMetricsClient&&re.liveMetricsClient.enable(e),re.defaultClient.config.enableSendLiveMetrics=e,t):(MI.warn("Live metrics client cannot be setup without the default client"),t)},t.start=bye,t}();re.Configuration=$z;function _$e(){gye.w3cEnabled=!0,re.defaultClient=null,mc=!1,FI&&FI.dispose(),UI&&UI.dispose(),BI&&BI.dispose(),qI&&qI.dispose(),HI&&HI.dispose(),Kx&&Kx.dispose(),Yx&&Yx.dispose(),zv&&zv.dispose(),GI&&GI.dispose(),re.liveMetricsClient&&(re.liveMetricsClient.enable(!1),re.liveMetricsClient=void 0),jI&&jI.dispose()}re.dispose=_$e});var Xz=k(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.TargetPopulation=Th.Filters=Th.VSCodeFilterProvider=void 0;var NL=require("vscode"),Qz=class t{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case fd.ApplicationVersion:return t.trimVersionSuffix(NL.version);case fd.Build:return NL.env.appName;case fd.ClientId:return NL.env.machineId;case fd.ExtensionName:return this.extensionName;case fd.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case fd.Language:return NL.env.language;case fd.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(fd);for(let n of r)e.set(n,this.getFilterValue(n));return e}};Th.VSCodeFilterProvider=Qz;var fd;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(fd||(Th.Filters=fd={}));var Eye;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(Eye||(Th.TargetPopulation=Eye={}))});var Tye=k(LL=>{"use strict";Object.defineProperty(LL,"__esModule",{value:!0});LL.BaseFeatureProvider=void 0;var Jz=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};LL.BaseFeatureProvider=Jz});var Cye=k(OL=>{"use strict";Object.defineProperty(OL,"__esModule",{value:!0});OL.FilteredFeatureProvider=void 0;var E$e=Tye(),Zz=class extends E$e.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};OL.FilteredFeatureProvider=Zz});var Iye=k(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.TasApiFeatureProvider=Ch.TASAPI_FETCHERROR_EVENTNAME=void 0;var T$e=Cye();Ch.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var eV="ErrorType",tV=class extends T$e.FilteredFeatureProvider{constructor(e,r,n){super(r,n),this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n;try{n=await this.httpClient.get({headers:r})}catch(a){let c=a,u=new Map;c.responseReceived&&!c.responseOk?u.set(eV,"ServerError"):c.responseReceived===!1?u.set(eV,"NoResponse"):u.set(eV,"GenericError"),this.telemetry.postEvent(Ch.TASAPI_FETCHERROR_EVENTNAME,u)}if(!n)throw Error(Ch.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let u=c+(a.Parameters[c]?"":"cf");s.includes(u)||s.push(u)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};Ch.TasApiFeatureProvider=tV});var wye=k(Xx=>{"use strict";Object.defineProperty(Xx,"__esModule",{value:!0});Xx.HttpClient=Xx.FetchError=void 0;var Qx=class extends Error{constructor(e,r,n){super(e),this.responseReceived=r,this.responseOk=n}};Xx.FetchError=Qx;var rV=class{constructor(e){this.endpoint=e}async get(e){let r=await fetch(this.endpoint,{method:"GET",headers:e?.headers});if(!r)throw new Qx("No response received",!1);if(!r.ok)throw new Qx("Response not ok",!0,!1);let n=await r.json();if(!n)throw new Qx("No data received",!1);return{data:n}}};Xx.HttpClient=rV});var Rye=k(ML=>{"use strict";Object.defineProperty(ML,"__esModule",{value:!0});ML.MemoryKeyValueStorage=void 0;var nV=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};ML.MemoryKeyValueStorage=nV});var Aye=k(FL=>{"use strict";Object.defineProperty(FL,"__esModule",{value:!0});FL.ExperimentationServiceBase=void 0;var C$e=Rye(),iV=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,r,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new C$e.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async n=>await n.getFeatures()));let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`);let n=this.features.configs.find(i=>i.Id===e);return n?.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};FL.ExperimentationServiceBase=iV});var Pye=k(UL=>{"use strict";Object.defineProperty(UL,"__esModule",{value:!0});UL.PollingService=void 0;var oV=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};UL.PollingService=oV});var kye=k(BL=>{"use strict";Object.defineProperty(BL,"__esModule",{value:!0});BL.ExperimentationServiceAutoPolling=void 0;var I$e=Aye(),w$e=Pye(),sV=class extends I$e.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a){if(super(e,i,o,s,a),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new w$e.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};BL.ExperimentationServiceAutoPolling=sV});var Dye=k(HL=>{"use strict";Object.defineProperty(HL,"__esModule",{value:!0});HL.ExperimentationService=void 0;var R$e=Iye(),A$e=wye(),P$e=kye(),qL=class extends P$e.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new R$e.TasApiFeatureProvider(new A$e.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};HL.ExperimentationService=qL;qL.REFRESH_RATE_IN_MINUTES=30});var Nye=k(GL=>{"use strict";Object.defineProperty(GL,"__esModule",{value:!0});GL.ExperimentationService=void 0;var k$e=Dye();Object.defineProperty(GL,"ExperimentationService",{enumerable:!0,get:function(){return k$e.ExperimentationService}})});var Lye=k(jL=>{"use strict";Object.defineProperty(jL,"__esModule",{value:!0});jL.MementoKeyValueStorage=void 0;var aV=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};jL.MementoKeyValueStorage=aV});var Oye=k(uV=>{"use strict";Object.defineProperty(uV,"__esModule",{value:!0});var cV=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};uV.default=cV});var Fye=k(Jx=>{"use strict";Object.defineProperty(Jx,"__esModule",{value:!0});Jx.getExperimentationServiceAsync=Jx.getExperimentationService=void 0;var D$e=Xz(),N$e=Nye(),lV=require("vscode"),L$e=Lye(),O$e=Oye(),M$e="https://default.exp-tas.com/vscode/ab",F$e="query-expfeature",U$e="abexp.assignmentcontext",B$e="VSCode.ABExp.FeatureData",q$e=1e3*60*30;function Mye(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=lV.workspace.getConfiguration("telemetry");if(!(lV.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):lV.env.isTelemetryEnabled))return new O$e.default;let u=[new D$e.VSCodeFilterProvider(t,e,r),...o],l=new L$e.MementoKeyValueStorage(i);return new N$e.ExperimentationService({filterProviders:u,telemetry:n,storageKey:B$e,keyValueStorage:l,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:U$e,telemetryEventName:F$e,endpoint:M$e,refetchInterval:q$e})}Jx.getExperimentationService=Mye;async function H$e(t,e,r,n,i,...o){let s=Mye(t,e,r,n,i,...o);return await s.initializePromise,s}Jx.getExperimentationServiceAsync=H$e});var Bye=k(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.TargetPopulation=Ih.getExperimentationServiceAsync=Ih.getExperimentationService=void 0;var Uye=Fye();Object.defineProperty(Ih,"getExperimentationService",{enumerable:!0,get:function(){return Uye.getExperimentationService}});Object.defineProperty(Ih,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return Uye.getExperimentationServiceAsync}});var G$e=Xz();Object.defineProperty(Ih,"TargetPopulation",{enumerable:!0,get:function(){return G$e.TargetPopulation}})});var Hye=k($L=>{"use strict";Object.defineProperty($L,"__esModule",{value:!0});$L.BaseTelemetryReporter=void 0;var dV=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let o of Object.keys(i??{})){let s=i[o];typeof o=="string"&&s!==void 0&&(i[o]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};$L.BaseTelemetryReporter=dV});var Gye=k(WL=>{"use strict";Object.defineProperty(WL,"__esModule",{value:!0});WL.BaseTelemetrySender=void 0;var of;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(of||(of={}));var pV=class{constructor(e,r){this._instantiationStatus=of.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==of.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==of.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};if(r){let i=r.properties||r;r.properties={...i,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===of.NOT_INSTANTIATED&&(this._instantiationStatus=of.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=of.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=of.INSTANTIATED}))}};WL.BaseTelemetrySender=pV});var mV=k(KL=>{"use strict";Object.defineProperty(KL,"__esModule",{value:!0});KL.TelemetryUtil=void 0;var fV=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.4"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};KL.TelemetryUtil=fV});var Zx,sf,md,el,e1,$I,hV=I(()=>{Zx="function",sf="object",md="undefined",el="prototype",e1=Object,$I=e1[el]});var Li,_i,t1,wh,af,eu,WI,cf,KI,YI,jye,tu,QI,rn,r1,xi,n1,gV,hc,vV,yV,uf,La,Zt=I(()=>{Li=void 0,_i=null,t1="",wh="function",af="object",eu="prototype",WI="__proto__",cf="undefined",KI="constructor",YI="Symbol",jye="_polyfill",tu="length",QI="name",rn="call",r1="toString",xi=Object,n1=xi[eu],gV=String,hc=gV[eu],vV=Math,yV=Array,uf=yV[eu],La=uf.slice});function ws(t,e){try{return{v:t.apply(this,e)}}catch(r){return{e:r}}}var i1=I(()=>{});function zye(t,e){var r=ws(t);return r.e?e:r.v}var Vye=I(()=>{i1()});function YL(t){return function(e){return typeof e===t}}function $ye(t){var e="[object "+t+"]";return function(r){return!!(r&&XI(r)===e)}}function XI(t){return n1.toString.call(t)}function QL(t,e){return typeof t===e}function Rt(t){return typeof t===cf||t===cf}function xe(t){return t===_i||Rt(t)}function _V(t){return t===_i||!XL(t)}function XL(t){return!!t||t!==Li}function xV(t){return!bV&&(bV=["string","number","boolean",cf,"symbol","bigint"]),t!==af&&bV.indexOf(t)!==-1}function Tn(t){return!t&&xe(t)?!1:!!t&&typeof t===af}function Ah(t){return!!(t&&t.then&&dt(t.then))}function JL(t){return!t||!ru(t)}function ru(t){return!(!t||zye(function(){return!(t&&0+t)},!t))}var bV,Lt,dt,Ye,o1,Rs,tl,Rh,gc=I(()=>{Zt();Vye();Lt=YL("string"),dt=YL(wh);Ye=yV.isArray,o1=$ye("Date"),Rs=YL("number"),tl=YL("boolean"),Rh=$ye("Error")});var Vv,ZL=I(()=>{Zt();Vv=xi.getOwnPropertyDescriptor});function Oi(t,e){return!!t&&n1.hasOwnProperty[rn](t,e)}var e4=I(()=>{Zt()});function Wye(t,e){return Oi(t,e)||!!Vv(t,e)}var Oa,t4=I(()=>{Zt();ZL();e4();Oa=xi.hasOwn||Wye});function $e(t,e,r){if(t&&Tn(t)){for(var n in t)if(Oa(t,n)&&e[rn](r||t,n,t[n])===-1)break}}var Ph=I(()=>{gc();Zt();t4()});function SV(t,e,r,n){var i={};return $e(t,function(o,s){i[o]=e?s:o,i[s]=r?s:o}),n(i)}var Kye=I(()=>{Ph()});function si(t){throw new Error(t)}function Vn(t){throw new TypeError(t)}var kh=I(()=>{});function Yye(t){var e=[];return $e(t,function(r,n){e.push([r,n])}),e}function Qye(t){var e=[];return $e(t,function(r,n){e.push(n)}),e}var Xye=I(()=>{Ph()});function Jye(t){return t}function z$e(t){return t[WI]||_i}function na(t){return EV&&$e(t,function(e,r){(Ye(r)||Tn(r))&&EV(r)}),hd(t)}var EV,$v,mo,hd,r4,s1,V$e,nNt,a1=I(()=>{Zt();gc();Ph();Xye();EV=xi.freeze;$v=xi.assign,mo=xi.keys;hd=EV||Jye,r4=xi.seal||Jye,s1=xi.getPrototypeOf||z$e,V$e=xi.entries||Yye,nNt=xi.values||Qye});function TV(t){return SV(t,1,0,na)}function CV(t){return SV(t,0,0,na)}function Zye(t){var e={};return $e(t,function(r,n){e[r]=n[1],e[n[0]]=n[1]}),na(e)}function IV(t){return Zye(t)}var wV=I(()=>{Kye();Ph();a1()});var n4,RV=I(()=>{wV();n4=CV({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12})});var Fn,Wv=I(()=>{Zt();Fn=gV});function PV(){var t;return typeof globalThis!==cf&&(t=globalThis),!t&&typeof self!==cf&&(t=self),!t&&typeof window!==cf&&(t=window),!t&&typeof global!==cf&&(t=global),t}function i4(){if(!AV){var t=ws(PV).v||{};AV=t[ebe]=t[ebe]||{}}return AV}var ebe,AV,o4=I(()=>{i1();Zt();ebe="__tsUtils$gblCfg"});function Ge(t,e){var r=t1,n=n1[r1][rn](t);n===$$e&&(t={stack:Fn(t.stack),message:Fn(t.message),name:Fn(t.name)});try{r=JSON.stringify(t,_i,e?typeof e=="number"?e:4:Li),r=r&&r.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: ")||Fn(t)}catch(i){r=" - "+Ge(i,e)}return n+": "+r}var $$e,Dh=I(()=>{Zt();Wv();$$e="[object Error]"});function rl(t,e,r){var n=e&&e[t];return function(i){var o=i&&i[t]||n;if(o||r){var s=arguments;return(o||r).apply(i,o?La[rn](s,1):s)}Vn('"'+Fn(t)+'" not defined for '+Ge(i))}}function tbe(t){return function(e){return e[t]}}var nu,iu=I(()=>{Dh();kh();Wv();Zt();nu=rl});var CNt,rbe,nbe=I(()=>{Zt();CNt=vV.min,rbe=vV.max});var kV,ibe=I(()=>{Zt();iu();kV=nu("slice",hc)});function obe(t,e,r){return xe(t)&&Vn("'polyStrSubstr called with invalid "+Ge(t)),r<0?t1:(e=e||0,e<0&&(e=rbe(e+t[tu],0)),Rt(r)?kV(t,e):kV(t,e,e+r))}function Nh(t,e){return Si(t,0,e)}var Si,nl,s4=I(()=>{gc();Dh();kh();Zt();iu();nbe();ibe();Si=nu("substring",hc),nl=rl("substr",hc,obe)});function W$e(){if(!DV){var t=i4();DV=t.gblSym=t.gblSym||{k:{},s:{}}}return DV}function c4(t){var e={description:Fn(t),toString:function(){return YI+"("+t+")"}};return e[jye]=!0,e}function abe(t){var e=W$e();if(!Oa(e.k,t)){var r=c4(t),n=mo(e.s).length;r[sbe]=function(){return n+"_"+r[r1]()},e.k[t]=r,e.s[r[sbe]()]=Fn(t)}return e.k[t]}function cbe(t){!a4&&(a4={});var e,r=n4[t];return r&&(e=a4[r]=a4[r]||c4(YI+"."+r)),e}var sbe,DV,a4,ube=I(()=>{RV();Zt();t4();Wv();o4();a1();sbe="_urid"});function lbe(t){var e={};if(e[u4.c]=!0,e[u4.e]=!0,t.l){e.get=function(){return t.l.v};var r=Vv(t.l,"v");r&&r.set&&(e.set=function(n){t.l.v=n})}return $e(t,function(n,i){e[u4[n]]=Rt(i)?e[u4[n]]:i}),e}function l4(t,e,r,n,i,o){var s={e:o,c:i};return r&&(s.g=r),n&&(s.s=n),Ei(t,e,lbe(s))}function Ur(t,e,r){return Ei(t,e,lbe(r))}var u4,Ei,K$e,Kv=I(()=>{Zt();gc();Ph();ZL();u4={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};Ei=xi.defineProperty,K$e=xi.defineProperties});function il(){Ti=i4()}function ol(t){var e={};return!Ti&&il(),e.b=Ti.lzy,Ei(e,"v",{configurable:!0,get:function(){var r=t();return Ti.lzy||Ei(e,"v",{value:r}),e.b=Ti.lzy,r}}),e}var Ti,Yv=I(()=>{o4();Kv()});function c1(t,e){return ol(function(){var r=ws(t);return r.e?e:r.v})}var NV=I(()=>{Yv();i1()});function JI(t){return Ei({toJSON:function(){return t}},"v",{value:t})}var LV=I(()=>{Kv()});function ew(t,e){var r;return function(){return!Ti&&il(),(!r||Ti.lzy)&&(r=JI(ws(t,e).v)),r.v}}function lf(t){return ol(function(){return ws(Yr,[t]).v||Li})}function As(t){return!Ti&&il(),(!ZI||t===!1||Ti.lzy)&&(ZI=JI(ws(PV).v||_i)),ZI.v}function Yr(t,e){var r=!ZI||e===!1?As(e):ZI.v;return r&&r[t]?r[t]:t===dbe?ci():_i}function Lh(){return!!ai()}function Oh(){return!!ci()}function u1(){return!!Zi()}function d4(){return!!tw()}var dbe,ZI,ai,ci,Zi,tw,OV,rw=I(()=>{Zt();o4();Yv();LV();i1();dbe="window";ai=ew(Yr,["document"]);ci=ew(Yr,[dbe]);Zi=ew(Yr,["navigator"]);tw=ew(Yr,["history"]),OV=ew(function(){return!!ws(function(){return process&&(process.versions||{}).node}).v})});function p4(){(!Ps||!Ps.b)&&(Ps=lf(YI),MV=c1(function(){return Ps.v?Ps.v.for:Li},Li),Y$e=c1(function(){return Ps.v?Ps.v.keyFor:Li},Li))}function FV(){return!!pbe()}function pbe(){return!Ti&&il(),(!Ps||Ti.lzy)&&p4(),Ps.v}function Qv(t,e){var r=n4[t];return!Ti&&il(),(!Ps||Ti.lzy)&&p4(),Ps.v?Ps.v[r||t]:e?Li:cbe(t)}function Xv(t,e){return!Ti&&il(),(!Ps||Ti.lzy)&&p4(),Ps.v?Ps.v(t):e?_i:c4(t)}function nw(t){return!Ti&&il(),(!MV||!Ps||Ti.lzy)&&p4(),(MV.v||abe)(t)}var Ps,MV,Y$e,f4=I(()=>{Zt();ube();RV();Yv();NV();rw()});function iw(t){return!!t&&dt(t.next)}function fbe(t){return!_V(t)&&dt(t[Qv(3)])}var UV=I(()=>{f4();gc()});function mbe(t,e,r){if(t&&(iw(t)||(!m4&&(m4=JI(Qv(3))),t=t[m4.v]?t[m4.v]():null),iw(t))){var n=void 0,i=void 0;try{for(var o=0;!(i=t.next()).done&&e[rn](r||t,i.value,o,t)!==-1;)o++}catch(s){n={e:s},t.throw&&(i=null,t.throw(n))}finally{try{i&&!i.done&&t.return&&t.return(i)}finally{if(n)throw n.e}}}}var m4,hbe=I(()=>{LV();Zt();f4();UV()});function df(t,e,r){return t.apply(e,r)}var h4=I(()=>{});function ou(t,e){return!Rt(e)&&t&&(Ye(e)?df(t.push,t,e):iw(e)||fbe(e)?mbe(e,function(r){t.push(r)}):t.push(e)),t}var gbe=I(()=>{gc();UV();hbe();h4()});function he(t,e,r){if(t)for(var n=t[tu]>>>0,i=0;i<n&&!(i in t&&e[rn](r||t,t[i],i,t)===-1);i++);}var g4=I(()=>{Zt()});var Er,BV=I(()=>{Zt();iu();Er=nu("indexOf",uf)});var gd,vbe=I(()=>{Zt();iu();gd=nu("map",uf)});function Mh(t,e,r){return(t&&t.slice||La).apply(t,La[rn](arguments,1))}var ybe=I(()=>{Zt()});function bbe(t,e,r){return Er(t,e,r)!==-1}var _be=I(()=>{BV()});var v4,xbe=I(()=>{Zt();iu();_be();v4=rl("includes",uf,bbe)});var l1,Sbe=I(()=>{Zt();iu();l1=nu("reduce",uf)});function Q$e(t){if(!t)return{};var e=typeof t;e!==af&&e!==wh&&Vn("Prototype must be an Object or function: "+Ge(t));function r(){}return r[eu]=t,new r}var su,qV=I(()=>{Zt();Dh();kh();su=xi.create||Q$e});function GV(t,e){var r=xi.setPrototypeOf||function(n,i){!HV&&(HV=ol(function(){var o;return o={},o[WI]=[],o instanceof Array})),HV.v?n[WI]=i:$e(i,function(o,s){return n[o]=s})};return r(t,e)}var HV,Ebe=I(()=>{Yv();Zt();Ph()});function X$e(t,e,r){ws(Ur,[e,QI,{v:t,c:!0,e:!1}]),e=GV(e,r);function n(){this.constructor=e,ws(Ur,[this,QI,{v:t,c:!0,e:!1}])}return e[eu]=r===_i?su(r):(n[eu]=r[eu],new n),e}function Tbe(t,e){e&&(t[QI]=e)}function jV(t,e,r){var n=r||Error,i=n[eu][QI],o=Error.captureStackTrace;return X$e(t,function(){var s=this,a=arguments;try{ws(Tbe,[n,t]);var c=df(n,s,La[rn](a))||s;if(c!==s){var u=s1(s);u!==s1(c)&&GV(c,u)}return o&&o(c,s[KI]),e&&e(c,a),c}finally{ws(Tbe,[n,i])}},n)}var Cbe=I(()=>{h4();Zt();qV();Kv();a1();Ebe();i1()});function ui(){return(Date.now||Ibe)()}function Ibe(){return new Date().getTime()}var zV=I(()=>{});function J$e(t){return function(r){return xe(r)&&Vn("strTrim called ["+Ge(r)+"]"),r&&r.replace&&(r=r.replace(t,t1)),r}}var wbe,Rbe=I(()=>{gc();Dh();kh();Zt();wbe=J$e(/^\s+|(?=\s)\s+$/g)});var Dr,Abe=I(()=>{Zt();iu();Rbe();Dr=rl("trim",hc,wbe)});function ho(t){if(!t||typeof t!==af)return!1;WV||(WV=Oh()?ci():!0);var e=!1;if(t!==WV){$V||(VV=Function[eu][r1],$V=VV[rn](xi));try{var r=s1(t);e=!r,e||(Oi(r,KI)&&(r=r[KI]),e=r&&typeof r===wh&&VV[rn](r)===$V)}catch{}}return e}var VV,$V,WV,KV=I(()=>{rw();Zt();e4();a1()});function Z$e(t){return t.value&&Lbe(t),!0}function eWe(t,e,r,n){var i;return he(t,function(o){if(o.k===e)return i=o,-1}),i||(i={k:e,v:e},t.push(i),n(i)),i.v}function YV(t,e,r,n){var i=r.handler,o=r.path?n?r.path.concat(n):r.path:[],s={handler:r.handler,src:r.src,path:o},a=typeof e,c=!1,u=!1;e&&a===af?c=ho(e):u=e===_i||xV(a);var l={type:a,isPrim:u,isPlain:c,value:e,result:e,path:o,origin:r.src,copy:function(d,p){return YV(t,d,p?s:r,p)},copyTo:function(d,p){return kbe(t,d,p,s)}};return l.isPrim?i&&i[rn](r,l)?l.result:e:eWe(t,e,o,function(d){Ur(l,"result",{g:function(){return d.v},s:function(m){d.v=m}});for(var p=0,f=i;!(f||(p<Pbe.length?Pbe[p++]:Z$e))[rn](r,l);)f=_i})}function kbe(t,e,r,n){if(!xe(r))for(var i in r)e[i]=YV(t,r[i],n,i);return e}function Dbe(t,e,r){var n={handler:r,src:e,path:[]};return kbe([],t,e,n)}function Nbe(t,e){var r={handler:e,src:t};return YV([],t,r)}function tWe(t){var e=t.value;if(Ye(e)){var r=t.result=[];return r.length=e.length,t.copyTo(r,e),!0}return!1}function rWe(t){var e=t.value;return o1(e)?(t.result=new Date(e.getTime()),!0):!1}function nWe(t){return t.type===wh}function Lbe(t){var e=t.value;if(e&&t.isPlain){var r=t.result={};return t.copyTo(r,e),!0}return!1}var Pbe,Obe=I(()=>{g4();gc();Zt();Kv();KV();Pbe=[tWe,Lbe,nWe,rWe]});function iWe(t,e){return he(e,function(r){Dbe(t,r)}),t}function y4(t,e,r,n,i,o,s){return iWe(Nbe(t)||{},La[rn](arguments))}var Mbe=I(()=>{g4();Zt();Obe()});var d1,Fbe=I(()=>{Zt();iu();d1=tbe(tu)});function pf(){return!Ti&&il(),(!b4||!b4.b&&Ti.lzy)&&(b4=lf("performance")),b4.v}function p1(){var t=pf();return t&&t.now?t.now():ui()}var b4,Ube=I(()=>{zV();rw();Yv()});function oWe(t,e,r){Lt(t)||Vn("'"+Ge(t)+"' is not a string");var n=Lt(e)?e:Fn(e),i=!Rt(r)&&r<t[tu]?r:t[tu];return Si(t,i-n[tu],i)===n}var Fh,Bbe=I(()=>{gc();Dh();kh();Zt();iu();Wv();s4();Fh=rl("endsWith",hc,oWe)});var ia,qbe=I(()=>{Zt();iu();ia=nu("indexOf",hc)});function sWe(t,e,r){Lt(t)||Vn("'"+Ge(t)+"' is not a string");var n=Lt(e)?e:Fn(e),i=r>0?r:0;return Si(t,i,i+n[tu])===n}var Jv,Hbe=I(()=>{gc();Dh();kh();Zt();iu();Wv();s4();Jv=rl("startsWith",hc,sWe)});function Gbe(t,e,r){var n=!0,i=t?e(_i):_i,o;function s(){return n=!1,i&&i[XV]&&i[XV](),o}function a(){i&&r(i),i=_i}function c(){return i=e(i),n||s(),o}function u(l){!l&&i&&a(),l&&!i&&c()}return o={cancel:a,refresh:c},o[JV]=function(){return i&&i[JV]?i[JV]():n},o[QV]=function(){return n=!0,i&&i[QV]&&i[QV](),o},o[XV]=s,o=Ei(o,aWe,{get:function(){return!!i},set:u}),{h:o,dn:function(){i=_i}}}var QV,XV,JV,aWe,jbe=I(()=>{Zt();Kv();QV="ref",XV="unref",JV="hasRef",aWe="enabled"});function ZV(t,e,r){var n=Ye(e),i=n?e.length:0,o=(i>0?e[0]:n?Li:e)||setTimeout,s=(i>1?e[1]:Li)||clearTimeout,a=r[0];r[0]=function(){c.dn(),df(a,Li,La[rn](arguments))};var c=Gbe(t,function(u){if(u){if(u.refresh)return u.refresh(),u;df(s,Li,[u])}return df(o,Li,r)},function(u){df(s,Li,[u])});return c.h}function Ma(t,e){return ZV(!0,Li,La[rn](arguments))}function e$(t,e,r){return ZV(!0,t,La[rn](arguments,1))}function t$(t,e){return ZV(!1,Li,La[rn](arguments))}var zbe=I(()=>{h4();gc();Zt();jbe()});var gt=I(()=>{gbe();g4();xbe();BV();vbe();Sbe();ybe();gc();Cbe();zV();Dh();wV();rw();Mbe();Yv();Fbe();Ube();NV();kh();qV();Kv();Ph();ZL();t4();e4();KV();a1();Bbe();qbe();Hbe();s4();Wv();Abe();f4();zbe()});function Fa(t,e){typeof e!==Zx&&e!==null&&Vn("Class extends value "+String(e)+" is not a constructor or null"),r$(t,e);function r(){this.constructor=t}t[el]=e===null?su(e):(r[el]=e[el],new r)}function _4(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}var NOt,LOt,Vbe,lWe,au,r$,$be=I(()=>{gt();hV();NOt=(As()||{}).Symbol,LOt=(As()||{}).Reflect,Vbe="hasOwnProperty",lWe=function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)$I[Vbe].call(e,i)&&(t[i]=e[i])}return t},au=$v||lWe,r$=function(t,e){return r$=e1.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n[Vbe](i)&&(r[i]=n[i])},r$(t,e)}});var Wbe=I(()=>{});var Ua=I(()=>{hV();$be();Wbe();gt()});function T4(t){return t&&(t===l$[ff]||t===Array[ff])}function d$(t){return T4(t)||t===Function[ff]}function Zv(t){var e;if(t){if(sw)return sw(t);var r=t[u$]||t[ff]||(t[C4]?t[C4][ff]:null);e=t[S4]||r,Oi(t,S4)||(delete t[n$],e=t[S4]=t[n$]||t[S4],t[n$]=r)}return e}function R4(t,e){var r=[];if(Qbe)r=Qbe(t);else for(var n in t)typeof n=="string"&&Oi(t,n)&&r.push(n);if(r&&r.length>0)for(var i=0;i<r.length;i++)e(r[i])}function p$(t,e,r){return e!==C4&&typeof t[e]===I4&&(r||Oi(t,e))&&e!==u$&&e!==ff}function A4(t){Vn("DynamicProto: "+t)}function pWe(t){var e=su(null);return R4(t,function(r){!e[r]&&p$(t,r,!1)&&(e[r]=t[r])}),e}function f$(t,e){for(var r=t.length-1;r>=0;r--)if(t[r]===e)return!0;return!1}function fWe(t,e,r,n){function i(c,u,l){var d=u[l];if(d[o$]&&n){var p=c[w4]||{};p[ow]!==!1&&(d=(p[u[f1]]||{})[l]||d)}return function(){return d.apply(c,arguments)}}var o=su(null);R4(r,function(c){o[c]=i(e,r,c)});for(var s=Zv(t),a=[];s&&!d$(s)&&!f$(a,s);)R4(s,function(c){!o[c]&&p$(s,c,!sw)&&(o[c]=i(e,s,c))}),a.push(s),s=Zv(s);return o}function mWe(t,e,r,n){var i=null;if(t&&Oi(r,f1)){var o=t[w4]||su(null);if(i=(o[r[f1]]||su(null))[e],i||A4("Missing ["+e+"] "+I4),!i[s$]&&o[ow]!==!1){for(var s=!Oi(t,e),a=Zv(t),c=[];s&&a&&!d$(a)&&!f$(c,a);){var u=a[e];if(u){s=u===n;break}c.push(a),a=Zv(a)}try{s&&(t[e]=i),i[s$]=1}catch{o[ow]=!1}}}return i}function hWe(t,e,r){var n=e[t];return n===r&&(n=Zv(e)[t]),typeof n!==I4&&A4("["+t+"] is not a "+I4),n}function gWe(t,e,r,n,i){function o(c,u){var l=function(){var d=mWe(this,u,c,l)||hWe(u,c,l);return d.apply(this,arguments)};return l[o$]=1,l}if(!T4(t)){var s=r[w4]=r[w4]||su(null);if(!T4(s)){var a=s[e]=s[e]||su(null);s[ow]!==!1&&(s[ow]=!!i),T4(a)||R4(r,function(c){p$(r,c,!1)&&r[c]!==n[c]&&(a[c]=r[c],delete r[c],(!Oi(t,c)||t[c]&&!t[c][o$])&&(t[c]=o(t,c)))})}}}function vWe(t,e){if(sw){for(var r=[],n=Zv(e);n&&!d$(n)&&!f$(r,n);){if(n===t)return!0;r.push(n),n=Zv(n)}return!1}return!0}function i$(t,e){return Oi(t,ff)?t.name||e||Kbe:((t||{})[C4]||{}).name||e||Kbe}function er(t,e,r,n){Oi(t,ff)||A4("theClass is an invalid class definition.");var i=t[ff];vWe(i,e)||A4("["+i$(t)+"] not in hierarchy of ["+i$(e)+"]");var o=null;Oi(i,f1)?o=i[f1]:(o=dWe+i$(t,"_")+"$"+c$.n,c$.n++,i[f1]=o);var s=er[Jbe],a=!!s[E4];a&&n&&n[E4]!==void 0&&(a=!!n[E4]);var c=pWe(e),u=fWe(i,e,c,a);r(e,u);var l=!!sw&&!!s[a$];l&&n&&(l=!!n[a$]),gWe(i,o,e,c,l!==!1)}var x4,C4,ff,I4,w4,o$,f1,dWe,s$,ow,Jbe,Kbe,u$,S4,Ybe,n$,E4,a$,l$,sw,Qbe,Xbe,c$,Po=I(()=>{gt();C4="constructor",ff="prototype",I4="function",w4="_dynInstFuncs",o$="_isDynProxy",f1="_dynClass",dWe="_dynCls$",s$="_dynInstChk",ow=s$,Jbe="_dfOpts",Kbe="_unknown_",u$="__proto__",S4="_dyn"+u$,Ybe="__dynProto$Gbl",n$="_dynInstProto",E4="useBaseInst",a$="setInstFuncs",l$=Object,sw=l$.getPrototypeOf,Qbe=l$.getOwnPropertyNames,Xbe=As(),c$=Xbe[Ybe]||(Xbe[Ybe]={o:(x4={},x4[a$]=!0,x4[E4]=!0,x4),n:1e3});er[Jbe]=c$.o});var m$,Zbe=I(()=>{"use strict";m$=100});var eo,h$,P4=I(()=>{gt();eo=TV,h$=IV});var sl,yWe,e_e=I(()=>{P4();sl=eo({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),yWe=eo({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var Ba,Uh,it,ey,ty,m1,mf,al,cu,cn,Bh,rr,vd,k4,ry,hf,yd,qa,qh,g$,ks,Hh,go,D4,h1,g1,v1,Gh,v$,Ha,aw,ny,N4,bd,vc,y1,_d,cl,Ga,jh,iy,yc,zh,L4,cw,uu,O4,ul,y$,ja,uw,oy,b$,_$,x$,lw,Vh,sy,ll,M4,b1,S$,F4,ay,E$,_1,x1,$h,hn=I(()=>{Ba="toLowerCase",Uh="blkVal",it="length",ey="rdOnly",ty="notify",m1="warnToConsole",mf="throwInternal",al="setDf",cu="watch",cn="logger",Bh="apply",rr="push",vd="splice",k4="hdlr",ry="cancel",hf="initialize",yd="identifier",qa="isInitialized",qh="getPlugin",g$="pollInternalLogs",ks="name",Hh="time",go="processNext",D4="getProcessTelContext",h1="getNotifyMgr",g1="addNotificationListener",v1="removeNotificationListener",Gh="enabled",v$="stopPollingInternalLogs",Ha="unload",aw="onComplete",ny="version",N4="loggingLevelConsole",bd="createNew",vc="teardown",y1="messageId",_d="message",cl="isAsync",Ga="diagLog",jh="_doTeardown",iy="update",yc="getNext",zh="setNextPlugin",L4="protocol",cw="userAgent",uu="split",O4="nodeType",ul="replace",y$="logInternalMessage",ja="type",uw="handler",oy="status",b$="itemsReceived",_$="getResponseHeader",x$="getAllResponseHeaders",lw="isChildEvt",Vh="data",sy="getCtx",ll="setCtx",M4="complete",b1="urlString",S$="sendPOST",F4="headers",ay="timeout",E$="setRequestHeader",_1="traceId",x1="spanId",$h="traceFlags"});function t_e(t,e){T$||(T$=jV("AggregationError",function(n,i){i[it]>1&&(n.errors=i[1])}));var r=t||"One or more errors occurred.";throw he(e,function(n,i){r+=`
`.concat(i," > ").concat(Ge(n))}),new T$(r,e||[])}var T$,r_e=I(()=>{gt();hn()});function Wh(t,e){return U4(t,function(r){return e?e({value:r,rejected:!1}):r},function(r){return e?e({rejected:!0,reason:r}):r})}function U4(t,e,r,n){var i=t;return Ah(t)?(e||r)&&(i=t.then(e,r)):e&&(i=e(t)),n&&n_e(i,n),i}function n_e(t,e){var r=t;return e&&(Ah(t)?t.finally?r=t.finally(e):r=t.then(function(n){return e(),n},function(n){throw e(),n}):e()),r}var C$=I(()=>{gt()});function i_e(t,e,r,n){I$=I$||{toString:function(){return"[[PromiseState]]"}},w$=w$||{toString:function(){return"[[PromiseResult]]"}},R$=R$||{toString:function(){return"[[PromiseIsHandled]]"}},Ei(t,I$,{get:e}),Ei(t,w$,{get:r}),Ei(t,R$,{get:n})}var I$,w$,R$,A$,o_e=I(()=>{gt();A$=!1});var B4,P$=I(()=>{B4=["pending","resolving","resolved","rejected"]});function a_e(t,e,r,n){var i=ai();!q4&&(q4=c1(function(){var c;return i&&i.createEvent&&(c=i.createEvent("Event")),!!c&&c.initEvent},null));var o=q4.v?i.createEvent("Event"):n?new Event(e):{};if(r&&r(o),q4.v&&o.initEvent(e,!1,!0),o&&t[s_e])t[s_e](o);else{var s=t["on"+e];if(s)s(o);else{var a=Yr("console");a&&(a.error||a.log)(e,Ge(o))}}}var s_e,q4,c_e=I(()=>{gt();s_e="dispatchEvent"});var S1,k$=I(()=>{S1="Promise"});function u_e(t){return dt(t)?t.toString():Ge(t)}function d_e(t,e,r){var n=Mh(arguments,3),i=0,o=!1,s,a=[],c=_We++,u=dw.length>0?dw[dw.length-1]:void 0,l=!1,d=null,p;!D$&&(D$=lf(S1+"RejectionEvent"));var f=function(S,T){try{dw.push(c),l=!0,d&&d.cancel(),d=null;var L=t(function(M,j){a.push(function(){try{var N=i===2?S:T,J=Rt(N)?s:dt(N)?N(s):N;Ah(J)?J.then(M,j):N?M(J):i===3?j(J):M(J)}catch(X){j(X)}}),o&&v()},n);return L}finally{dw.pop()}},m=function(S){return f(void 0,S)},h=function(S){var T=S,L=S;return dt(S)&&(T=function(M){return S&&S(),M},L=function(M){throw S&&S(),M}),f(T,L)},g=function(){return B4[i]},v=function(){if(a.length>0){var S=a.slice();a=[],l=!0,e(S),d&&d.cancel(),d=null}},y=function(S,T){return function(L){if(i===T){if(S===2&&Ah(L)){i=1,L.then(y(2,1),y(3,1));return}i=S,o=!0,s=L,v(),!l&&S===3&&!d&&(d=Ma(b,xWe))}}},b=function(){if(!l)if(OV())process.emit(l_e,s,p);else{var S=ci()||As();a_e(S,bWe,function(T){return Ur(T,"promise",{g:function(){return p}}),T.reason=s,T},!!D$.v)}};p={then:f,catch:m,finally:h},Ei(p,"state",{get:g}),A$&&i_e(p,g,function(){return XI(s)},function(){return l}),FV()&&(p[Qv(11)]="IPromise");var x=function(){return"IPromise"+(A$?"["+c+(Rt(u)?"":":"+u)+"]":"")+" "+g()+(o?" - "+u_e(s):"")};return p.toString=x,function(){dt(r)||Vn(S1+": executor is not a function - "+u_e(r));var T=y(3,0);try{r.call(p,y(2,0),T)}catch(L){T(L)}}(),p}function E1(t){return function(e){var r=Mh(arguments,1);return t(function(n,i){try{var o=[],s=1;he(e,function(a,c){a&&(s++,U4(a,function(u){o[c]=u,--s===0&&n(o)},i))}),s--,s===0&&n(o)}catch(a){i(a)}},r)}}function T1(t){return function(e){var r=Mh(arguments,1);return Ah(e)?e:t(function(n){n(e)},r)}}function C1(t){return function(e){var r=Mh(arguments,1);return t(function(n,i){i(e)},r)}}var l_e,bWe,dw,_We,xWe,D$,H4=I(()=>{gt();C$();o_e();P$();c_e();k$();l_e="unhandledRejection",bWe=l_e.toLowerCase(),dw=[],_We=0,xWe=10});function p_e(t){var e=Rs(t)?t:0;return function(r){Ma(function(){SWe(r)},e)}}var SWe,f_e=I(()=>{gt();SWe=function(t){he(t,function(e){try{e()}catch{}})}});function I1(t,e){return d_e(I1,p_e(e),t,e)}var D5t,N5t,L5t,m_e=I(()=>{H4();f_e();D5t=E1(I1),N5t=T1(I1),L5t=C1(I1)});function pw(t,e){!N$&&(N$=lf(S1));var r=N$.v;if(!r)return I1(t);dt(t)||Vn(S1+": executor is not a function - "+Ge(t));var n=0;function i(){return B4[n]}var o=new r(function(s,a){function c(l){n=2,s(l)}function u(l){n=3,a(l)}t(c,u)});return Ei(o,"state",{get:i}),o}var N$,H5t,G5t,j5t,h_e=I(()=>{m_e();H4();P$();gt();k$();H5t=E1(pw),G5t=T1(pw),j5t=C1(pw)});function oa(t,e){return!L$&&(L$=ol(function(){return pw})),L$.v.call(this,t,e)}var L$,O$,EWe,TWe,g_e=I(()=>{gt();H4();h_e();O$=E1(oa),EWe=T1(oa),TWe=C1(oa)});var w1=I(()=>{C$();g_e()});var bc,At,Kh,li,G4,fw,gf,cy,za,uy,R1,Yh,A1,xd,j4,z4,V4,P1,$4,W4,v_e,to=I(()=>{bc=void 0,At="",Kh="channels",li="core",G4="createPerfMgr",fw="disabled",gf="extensionConfig",cy="extensions",za="processTelemetry",uy="priority",R1="eventsSent",Yh="eventsDiscarded",A1="eventsSendRequest",xd="perfEvent",j4="offlineEventsStored",z4="offlineBatchSent",V4="offlineBatchDrop",P1="getPerfMgr",$4="domain",W4="path",v_e="Not dynamic - "});function CWe(t,e){return function(){var r=arguments,n=F$(e);if(n){var i=n.listener;i&&i[t]&&i[t][Bh](i,r)}}}function IWe(){var t=Yr("Microsoft");return t&&(Y4=t.ApplicationInsights),Y4}function F$(t){var e=Y4;return!e&&t.disableDbgExt!==!0&&(e=Y4||IWe()),e?e.ChromeDbgExt:null}function y_e(t){if(!K4){K4={};for(var e=0;e<M$[it];e++)K4[M$[e]]=CWe(M$[e],t)}return K4}var M$,Y4,K4,U$=I(()=>{gt();hn();to();M$=[R1,Yh,A1,xd],Y4=null});function S_e(t,e){var r=!1;if(t){try{if(r=e in t,!r){var n=t[el];n&&(r=e in n)}}catch{}if(!r)try{var i=new t;r=!Rt(i[e])}catch{}}return r}function z$(t){x_e=t}function ly(t){if(t&&x_e){var e=Yr("__mockLocation");if(e)return e}return typeof location===sf&&location?location:Yr(RWe)}function mw(){return typeof console!==md?console:Yr(AWe)}function Sd(){return!!(typeof JSON===sf&&JSON||Yr(b_e)!==null)}function ns(){return Sd()?JSON||Yr(b_e):null}function hw(){return Yr(PWe)}function gw(){return Yr(kWe)}function Qh(){var t=Zi();return t&&t.product?t.product===DWe:!1}function Xh(){var t=Zi();if(t&&(t[cw]!==q$||B$===null)){q$=t[cw];var e=(q$||At)[Ba]();B$=Mi(e,G$)||Mi(e,j$)}return B$}function vw(t){if(t===void 0&&(t=null),!t){var e=Zi()||{};t=e?(e.userAgent||At)[Ba]():At}var r=(t||At)[Ba]();if(Mi(r,G$)){var n=ai()||{};return Math.max(parseInt(r[uu](G$)[1]),n[wWe]||0)}else if(Mi(r,j$)){var i=parseInt(r[uu](j$)[1]);if(i)return i+4}return null}function Va(t){return(H$===null||t===!1)&&(H$=u1()&&!!Zi().sendBeacon),H$}function vf(t){var e=!1;try{e=!!Yr("fetch");var r=Yr("Request");e&&t&&r&&(e=S_e(r,"keepalive"))}catch{}return e}function yw(){return k1===null&&(k1=typeof XDomainRequest!==md,k1&&D1()&&(k1=k1&&!S_e(Yr(__e),"withCredentials"))),k1}function D1(){var t=!1;try{var e=Yr(__e);t=!!e}catch{}return t}function E_e(t,e){if(t)for(var r=0;r<t[it];r++){var n=t[r];if(n[ks]&&n[ks]===e)return n}return{}}function V$(t){var e=ai();return e&&t?E_e(e.querySelectorAll("meta"),t).content:null}function $$(t){var e,r=pf();if(r){var n=r.getEntriesByType("navigation")||[];e=E_e((n[it]>0?n[0]:{}).serverTiming,t).description}return e}var wWe,RWe,AWe,b_e,PWe,kWe,DWe,G$,j$,__e,B$,q$,x_e,k1,H$,Jh=I(()=>{"use strict";Ua();gt();hn();Ed();to();wWe="documentMode",RWe="location",AWe="console",b_e="JSON",PWe="crypto",kWe="msCrypto",DWe="ReactNative",G$="msie",j$="trident/",__e="XMLHttpRequest",B$=null,q$=null,x_e=!1,k1=null,H$=null});function T_e(t){return t?'"'+t[ul](/\"/g,At)+'"':At}function W$(t,e){var r=mw();if(r){var n="log";r[t]&&(n=t),dt(r[n])&&r[n](e)}}function dl(t,e){return(t||{})[cn]||new Zh(e)}function K$(t){return t||new Zh}function Ne(t,e,r,n,i,o){o===void 0&&(o=!1),K$(t)[mf](e,r,n,i,o)}function sa(t,e){K$(t)[m1](e)}function Y$(t,e,r){K$(t)[y$](e,r)}var N1,C_e,NWe,LWe,OWe,MWe,FWe,dy,Zh,pl=I(()=>{"use strict";Po();gt();eg();hn();U$();Jh();to();C_e="warnToConsole",NWe="AI (Internal): ",LWe="AI: ",OWe="AITR_",MWe={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},FWe=(N1={},N1[0]=null,N1[1]="errorToConsole",N1[2]=C_e,N1[3]="debugToConsole",N1);dy=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[y1]=e,o[_d]=(n?LWe:NWe)+e;var s=At;Sd()&&(s=ns().stringify(i));var a=(r?" message:"+T_e(r):At)+(i?" props:"+T_e(s):At);o[_d]+=a}return t.dataType="MessageData",t}();Zh=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a,c;er(t,this,function(u){c=d(e||{}),u.consoleLoggingLevel=function(){return i},u[mf]=function(m,h,g,v,y){y===void 0&&(y=!1);var b=new dy(h,g,y,v);if(a)throw Ge(b);var x=FWe[m]||C_e;if(Rt(b[_d]))f("throw"+(m===1?"Critical":"Warning"),b);else{if(y){var S=+b[y1];!n[S]&&i>=m&&(u[x](b[_d]),n[S]=!0)}else i>=m&&u[x](b[_d]);l(m,b)}},u.debugToConsole=function(m){W$("debug",m),f("warning",m)},u[m1]=function(m){W$("warn",m),f("warning",m)},u.errorToConsole=function(m){W$("error",m),f("error",m)},u.resetInternalMessageCount=function(){r=0,n={}},u[y$]=l,u[Ha]=function(m){c&&c.rm(),c=null};function l(m,h){if(!p()){var g=!0,v=OWe+h[y1];if(n[v]?g=!1:n[v]=!0,g&&(m<=o&&(u.queue[rr](h),r++,f(m===1?"error":"warn",h)),r===s)){var y="Internal events throttle limit per PageView reached for this app.",b=new dy(23,y,!1);u.queue[rr](b),m===1?u.errorToConsole(y):u[m1](y)}}}function d(m){return ro($n(m,MWe,u).cfg,function(h){var g=h.cfg;i=g[N4],o=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function p(){return r>=s}function f(m,h){var g=F$(e||{});g&&g[Ga]&&g[Ga](m,h)}})}return t.__ieDyn=1,t}()});function Td(t){return!xe(t)}function py(t){var e=t;return e&&Lt(e)&&(e=e[ul](BWe,function(r,n){return n.toUpperCase()}),e=e[ul](qWe,"_"),e=e[ul](HWe,function(r,n){return"_"+n})),e}function Mi(t,e){return t&&e?ia(t,e)!==-1:!1}function _c(t){return t&&t.toISOString()||""}function Cn(t){return Rh(t)?t[ks]:At}function lu(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function bw(t,e,r){var n;return t?(n=t[e],!n&&xe(n)&&(n=Rt(r)?{}:r,t[e]=n)):n=Rt(r)?{}:r,n}function w_e(t,e){var r=null,n=null;return dt(t)?r=t:n=t,function(){var i=arguments;if(r&&(n=r()),n)return n[e][Bh](n,i)}}function Q$(t,e,r){if(t&&e&&Tn(t)&&Tn(e)){var n=function(o){if(Lt(o)){var s=e[o];dt(s)?(!r||r(o,!0,e,t))&&(t[o]=w_e(e,o)):(!r||r(o,!1,e,t))&&(Oa(t,o)&&delete t[o],Ur(t,o,{g:function(){return e[o]},s:function(a){e[o]=a}}))}};for(var i in e)n(i)}return t}function yf(t,e,r,n,i){t&&e&&r&&(i!==!1||Rt(t[e]))&&(t[e]=w_e(r,n))}function xc(t,e,r,n){return t&&e&&Tn(t)&&Ye(r)&&he(r,function(i){Lt(i)&&yf(t,i,e,i,n)}),t}function X$(t){return function(){function e(){var r=this;t&&$e(t,function(n,i){r[n]=i})}return e}()}function du(t){return t&&$v&&(t=e1($v({},t))),t}function Q4(t,e,r,n,i,o){var s=arguments,a=s[0]||{},c=s[it],u=!1,l=1;for(c>0&&tl(a)&&(u=a,a=s[l]||{},l++),Tn(a)||(a={});l<c;l++){var d=s[l],p=Ye(d),f=Tn(d);for(var m in d){var h=p&&m in d||f&&Oa(d,m);if(h){var g=d[m],v=void 0;if(u&&g&&((v=Ye(g))||ho(g))){var y=a[m];v?Ye(y)||(y=[]):ho(y)||(y={}),g=Q4(u,y,g)}g!==void 0&&(a[m]=g)}}}return a}function fl(t){try{return t.responseText}catch{}return null}function fy(t,e){return t?"XDomainRequest,Response:"+fl(t)||"":e}function bf(t,e){return t?"XMLHttpRequest,Status:"+t[oy]+",Response:"+fl(t)||t.response||"":e}function _f(t,e){return e&&(Rs(e)?t=[e].concat(t):Ye(e)&&(t=e.concat(t))),t}function my(t,e){try{if(t&&t!==""){var r=ns().parse(t);if(r&&r[b$]&&r[b$]>=r.itemsAccepted&&r.itemsReceived-r.itemsAccepted===r.errors[it])return r}}catch(n){Ne(e,1,43,"Cannot parse the response. "+Cn(n),{response:t})}return null}function J$(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(c,u,l){try{c[u]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,GWe,n),r&&s(a,I_e,r),a.open(t,e,!i),r&&s(a,I_e,r),!i&&o&&s(a,jWe,o),a}function X4(t){var e={};if(Lt(t)){var r=Dr(t)[uu](/[\r\n]+/);he(r,function(n){if(n){var i=n.indexOf(": ");if(i!==-1){var o=Dr(n.substring(0,i))[Ba](),s=Dr(n.substring(i+1));e[o]=s}else e[Dr(n)]=1}})}return e}function L1(t,e,r){if(!t[r]&&e&&e[_$]){var n=e[_$](r);n&&(t[r]=Dr(n))}return t}function xf(t,e){var r={};return t[x$]?r=X4(t[x$]()):e&&(r=L1(r,t,$We),r=L1(r,t,zWe),r=L1(r,t,VWe)),r}var UWe,BWe,qWe,HWe,T6t,GWe,I_e,jWe,zWe,VWe,$We,Ed=I(()=>{Ua();gt();hn();pl();Jh();to();UWe="getPrototypeOf",BWe=/-([a-z])/g,qWe=/([^\w\d_$])/g,HWe=/^(\d+[\w\d_$])/,T6t=Object[UWe];GWe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",I_e="withCredentials",jWe="timeout";zWe="kill-duration",VWe="kill-duration-seconds",$We="time-delta-millis"});function WWe(t){t<0&&(t>>>=0),_w=A_e+t&tg,xw=P_e-t&tg,k_e=!0}function KWe(){try{var t=ui()&2147483647;WWe((Math.random()*R_e^t)+t)}catch{}}function Sw(t){return t>0?Math.floor(Sf()/tg*(t+1))>>>0:0}function Sf(t){var e=0,r=hw()||gw();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&tg),e===0&&Xh()&&(k_e||KWe(),e=D_e()&tg),e===0&&(e=Math.floor(R_e*Math.random()|0)),t||(e>>>=0),e}function D_e(t){xw=36969*(xw&65535)+(xw>>16)&tg,_w=18e3*(_w&65535)+(_w>>16)&tg;var e=(xw<<16)+(_w&65535)>>>0&tg|0;return t||(e>>>=0),e}function Ew(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=Sf()>>>0,n=0,i=At;i[it]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(Sf()<<2&4294967295|r&3)>>>0,n=0);return i}var R_e,tg,A_e,P_e,k_e,_w,xw,J4=I(()=>{gt();hn();Jh();to();R_e=4294967296,tg=4294967295,A_e=123456789,P_e=987654321,k_e=!1,_w=A_e,xw=P_e});function L_e(t){return t[O4]===1||t[O4]===9||!+t[O4]}function XWe(t,e){var r=e[t.id];if(!r){r={};try{L_e(e)&&Ur(e,t.id,{e:!1,v:r})}catch{}}return r}function is(t,e){return e===void 0&&(e=!1),py(t+QWe+++(e?"."+N_e:At)+YWe)}function Z4(t){var e={id:is("_aiData-"+(t||At)+"."+N_e),accept:function(r){return L_e(r)},get:function(r,n,i,o){var s=r[e.id];return s?s[py(n)]:(o&&(s=XWe(e,r),s[py(n)]=i),i)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return e}var N_e,YWe,QWe,O1=I(()=>{gt();hn();Ed();to();J4();N_e="3.0.5",YWe="."+Ew(6),QWe=0});function e3(t){return t&&Tn(t)&&(t.isVal||t.fb||Oa(t,"v")||Oa(t,"mrg")||Oa(t,"ref")||t.set)}function O_e(t,e,r){var n,i=r.dfVal||XL;if(e&&r.fb){var o=r.fb;Ye(o)||(o=[o]);for(var s=0;s<o[it];s++){var a=o[s],c=e[a];if(i(c)?n=c:t&&(c=t.cfg[a],i(c)&&(n=c),t.set(t.cfg,Fn(a),c)),i(n))break}}return!i(n)&&i(r.v)&&(n=r.v),n}function Z$(t,e,r){var n=r;if(r&&e3(r)&&(n=O_e(t,e,r)),n){e3(n)&&(n=Z$(t,e,n));var i;Ye(n)?(i=[],i[it]=n[it]):ho(n)&&(i={}),i&&($e(n,function(o,s){s&&e3(s)&&(s=Z$(t,e,s)),i[o]=s}),n=i)}return n}function Tw(t,e,r,n){var i,o,s,a=n,c,u,l,d;e3(a)?(i=a.isVal,o=a.set,l=a[ey],d=a[Uh],c=a.mrg,u=a.ref,!u&&Rt(u)&&(u=!!c),s=O_e(t,e,a)):s=n,d&&t[Uh](e,r);var p,f=!0,m=e[r];(m||!xe(m))&&(p=m,f=!1,i&&p!==s&&!i(p)&&(p=s,f=!0),o&&(p=o(p,s,e),f=p===s)),f?s?p=Z$(t,e,s):p=s:(ho(p)||Ye(s))&&c&&s&&(ho(s)||Ye(s))&&$e(s,function(h,g){Tw(t,p,h,g)}),t.set(e,r,p),u&&t.ref(e,r),l&&t[ey](e,r)}var eW=I(()=>{gt();hn()});function tW(t){if(t){var e;if(Ye(t)?(e=[],e[it]=t[it]):ho(t)&&(e={}),e)return $e(t,function(r,n){e[r]=tW(n)}),e}return t}function Cw(t){if(t){var e=t[Cd]||t;if(e.cfg&&(e.cfg===t||e.cfg[Cd]===e))return e}return null}function Iw(t){if(t&&(ho(t)||Ye(t)))try{t[M_e]=!0}catch{}return t}function rW(t){if(t)try{t[F_e]=!0}catch{}return t}function t3(t,e,r){var n=!1;return r&&!t[e.blkVal]&&(n=r[F_e],!n&&!r[M_e]&&(n=ho(r)||Ye(r))),n}function r3(t){Vn("InvalidAccess:"+t)}var Cd,M_e,F_e,n3=I(()=>{gt();hn();Cd=nw("[[ai_dynCfg_1]]"),M_e=nw("[[ai_blkDynCfg_1]]"),F_e=nw("[[ai_frcDynCfg_1]]")});function ZWe(t,e,r){Ye(e)&&he(JWe,function(n){var i=e[n];e[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i[Bh](this,o);return ww(t,e,r,"Patching"),a}})}function i3(t,e){var r=Vv(t,e);return r&&r.get}function eKe(t,e,r,n){var i={n:r,h:[],trk:function(u){u&&u.fn&&(Er(i.h,u)===-1&&i.h[rr](u),t.trk(u,i))},clr:function(u){var l=Er(i.h,u);l!==-1&&i.h[vd](l,1)}},o=!0,s=!1;function a(){o&&(s=s||t3(a,t,n),n&&!n[Cd]&&s&&(n=ww(t,n,r,"Converting")),o=!1);var u=t.act;return u&&i.trk(u),n}a[t.prop]={chng:function(){t.add(i)}};function c(u){if(n!==u){a[t.ro]&&!t.upd&&r3("["+r+"] is read-only:"+Ge(e)),o&&(s=s||t3(a,t,n),o=!1);var l=s&&a[t.rf];if(s)if(l){$e(n,function(p){n[p]=u?u[p]:bc});try{$e(u,function(p,f){Rw(t,n,p,f)}),u=n}catch(p){M1((t.hdlr||{})[cn],r,"Assigning",p),s=!1}}else n&&n[Cd]&&$e(n,function(p){var f=i3(n,p);if(f){var m=f[t.prop];m&&m.chng()}});if(u!==n){var d=u&&t3(a,t,u);!l&&d&&(u=ww(t,u,r,"Converting")),n=u,s=d}t.add(i)}}Ur(e,i.n,{g:a,s:c})}function Rw(t,e,r,n){if(e){var i=i3(e,r),o=i&&!!i[t.prop];o?e[r]=n:eKe(t,e,r,n)}return e}function o3(t,e,r,n){if(e){var i=i3(e,r),o=i&&!!i[t.prop],s=n&&n[0],a=n&&n[1],c=n&&n[2];if(!o){if(c)try{Iw(e)}catch(u){M1((t.hdlr||{})[cn],r,"Blocking",u)}try{Rw(t,e,r,e[r]),i=i3(e,r)}catch(u){M1((t.hdlr||{})[cn],r,"State",u)}}s&&(i[t.rf]=s),a&&(i[t.ro]=a),c&&(i[t.blkVal]=!0)}return e}function ww(t,e,r,n){try{$e(e,function(i,o){Rw(t,e,i,o)}),e[Cd]||(Ei(e,Cd,{get:function(){return t[k4]}}),ZWe(t,e,r))}catch(i){M1((t.hdlr||{})[cn],r,n,i)}return e}var JWe,M1,U_e=I(()=>{gt();to();hn();n3();JWe=["push","pop","shift","unshift","splice"],M1=function(t,e,r,n){t&&t[mf](3,108,"".concat(r," [").concat(e,"] failed - ")+Ge(n))}});function B_e(t){var e,r=Xv(Aw+"get"+t.uid+Pw),n=Xv(Aw+"ro"+t.uid+Pw),i=Xv(Aw+"rf"+t.uid+Pw),o=Xv(Aw+"blkVal"+t.uid+Pw),s=Xv(Aw+"dtl"+t.uid+Pw),a=null,c=null,u;function l(m,h){var g=u.act;try{u.act=m,m&&m[s]&&(he(m[s],function(y){y.clr(m)}),m[s]=[]),h({cfg:t.cfg,set:t.set.bind(t),setDf:t[al].bind(t),ref:t.ref.bind(t),rdOnly:t[ey].bind(t)})}catch(y){var v=t[cn];throw v&&v[mf](1,107,Ge(y)),y}finally{u.act=g||null}}function d(){if(a){var m=a;a=null,c&&c[ry](),c=null;var h=[];if(he(m,function(g){if(g&&(g[s]&&(he(g[s],function(v){v.clr(g)}),g[s]=null),g.fn))try{l(g,g.fn)}catch(v){h[rr](v)}}),a)try{d()}catch(g){h[rr](g)}h[it]>0&&t_e("Watcher error(s): ",h)}}function p(m){if(m&&m.h[it]>0){a||(a=[]),c||(c=Ma(function(){c=null,d()},0));for(var h=0;h<m.h[it];h++){var g=m.h[h];g&&Er(a,g)===-1&&a[rr](g)}}}function f(m,h){if(m){var g=m[s]=m[s]||[];Er(g,h)===-1&&g[rr](h)}}return u=(e={prop:r,ro:n,rf:i},e[Uh]=o,e[k4]=t,e.add=p,e[ty]=d,e.use=l,e.trk=f,e),u}var Aw,Pw,q_e=I(()=>{gt();r_e();hn();Aw="[[ai_",Pw="]]"});function tKe(t,e){var r={fn:e,rm:function(){r.fn=null,t=null,e=null}};return t.use(r,e),r}function rKe(t,e,r){var n,i=Cw(e);if(i)return i;var o=is("dyncfg",!0),s=e&&r!==!1?e:tW(e),a;function c(){a[ty]()}function u(v,y,b){try{v=Rw(a,v,y,b)}catch(x){M1(t,y,"Setting value",x)}return v[y]}function l(v){return tKe(a,v)}function d(v,y){a.use(null,function(b){var x=a.upd;try{Rt(y)||(a.upd=y),v(b)}finally{a.upd=x}})}function p(v,y){var b;return o3(a,v,y,(b={},b[0]=!0,b))[y]}function f(v,y){var b;return o3(a,v,y,(b={},b[1]=!0,b))[y]}function m(v,y){var b;return o3(a,v,y,(b={},b[2]=!0,b))[y]}function h(v,y){return y&&$e(y,function(b,x){Tw(g,v,b,x)}),v}var g=(n={uid:null,cfg:s},n[cn]=t,n[ty]=c,n.set=u,n[al]=h,n[cu]=l,n.ref=p,n[ey]=f,n[Uh]=m,n._block=d,n);return Ur(g,"uid",{c:!1,e:!1,w:!1,v:o}),a=B_e(g),ww(a,s,"config","Creating"),g}function nKe(t,e){t?(t[m1](e),t[mf](2,108,e)):r3(e)}function $n(t,e,r,n){var i=rKe(r,t||{},n);return e&&i[al](i.cfg,e),i}function ro(t,e,r){var n=t[Cd]||t;return n.cfg&&(n.cfg===t||n.cfg[Cd]===n)?n[cu](e):(nKe(r,v_e+Ge(t)),$n(t,null,r)[cu](e))}var eg=I(()=>{gt();O1();to();hn();eW();U_e();q_e();n3()});function Ef(t,e){if(t&&t[Ha])return t[Ha](e)}function s3(t,e,r){var n;return r||(n=oa(function(i){r=i})),t&&d1(t)>0?Wh(Ef(t[0],e),function(){s3(Mh(t,1),e,r)}):r(),n}var nW=I(()=>{w1();gt();hn()});var H_e,iW,oW=I(()=>{H_e=500,iW="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function iKe(t,e,r){return!t&&xe(t)?e:tl(t)?t:Fn(t)[Ba]()==="true"}function sW(t){return{mrg:!0,v:t}}function F1(t,e,r){return{fb:r,isVal:t,v:e}}function pu(t,e){return{fb:e,set:iKe,v:!!t}}var aW=I(()=>{gt();hn()});function fW(){!Id&&(Id=ol(function(){return ai()}))}function sKe(t,e){var r=Tf[rg]||u3[rg];return r||(r=Tf[rg]=Tf(t,e),u3[rg]=r),r}function c3(t){return t?t.isEnabled():!0}function X_e(t,e){return e&&t&&Ye(t.ignoreCookies)?Er(t.ignoreCookies,e)!==-1:!1}function aKe(t,e){return e&&t&&Ye(t.blockedCookies)&&Er(t.blockedCookies,e)!==-1?!0:X_e(t,e)}function W_e(t,e){var r=e[Gh];if(xe(r)){var n=void 0;Rt(t[z_e])||(n=!t[z_e]),Rt(t[dW])||(n=!t[dW]),r=n}return r}function mW(t,e){var r;if(t)r=t.getCookieMgr();else if(e){var n=e.cookieCfg;n&&n[rg]?r=n[rg]:r=Tf(e)}return r||(r=sKe(e,(t||{})[cn])),r}function Tf(t,e){var r,n,i,o,s,a,c,u,l;t=$n(t||u3,null,e).cfg,s=ro(t,function(p){p[al](p.cfg,oKe),n=p.ref(p.cfg,"cookieCfg"),i=n[W4]||"/",o=n[$4],a=W_e(t,n)!==!1,c=n.getCookie||cKe,u=n.setCookie||Q_e,l=n.delCookie||Q_e},e);var d=(r={isEnabled:function(){var p=W_e(t,n)!==!1&&a&&U1(e),f=u3[rg];return p&&f&&d!==f&&(p=c3(f)),p},setEnabled:function(p){a=p!==!1,n[Gh]=p},set:function(p,f,m,h,g){var v=!1;if(c3(d)&&!aKe(n,p)){var y={},b=Dr(f||At),x=ia(b,";");if(x!==-1&&(b=Dr(Nh(f,x)),y=J_e(Si(f,x+1))),lu(y,$4,h||o,ru,Rt),!xe(m)){var S=Xh();if(Rt(y[uW])){var T=ui(),L=T+m*1e3;if(L>0){var M=new Date;M.setTime(L),lu(y,uW,K_e(M,S?G_e:j_e)||K_e(M,S?G_e:j_e)||At,ru)}}S||lu(y,"max-age",At+m,null,Rt)}var j=ly();j&&j[L4]==="https:"&&(lu(y,"secure",null,null,Rt),lW===null&&(lW=!l3((Zi()||{})[cw])),lW&&lu(y,"SameSite","None",null,Rt)),lu(y,W4,g||i,null,Rt),u(p,Y_e(b,y)),v=!0}return v},get:function(p){var f=At;return c3(d)&&!X_e(n,p)&&(f=c(p)),f},del:function(p,f){var m=!1;return c3(d)&&(m=d.purge(p,f)),m},purge:function(p,f){var m,h=!1;if(U1(e)){var g=(m={},m[W4]=f||"/",m[uW]="Thu, 01 Jan 1970 00:00:01 GMT",m);Xh()||(g["max-age"]="0"),l(p,Y_e(At,g)),h=!0}return h}},r[Ha]=function(p){s&&s.rm(),s=null},r);return d[rg]=d,d}function U1(t){if(a3===null){a3=!1,!Id&&fW();try{var e=Id.v||{};a3=e[pW]!==void 0}catch(r){Ne(t,2,68,"Cannot access document.cookie - "+Cn(r),{exception:Ge(r)})}}return a3}function J_e(t){var e={};if(t&&t[it]){var r=Dr(t)[uu](";");he(r,function(n){if(n=Dr(n||At),n){var i=ia(n,"=");i===-1?e[n]=null:e[Dr(Nh(n,i))]=Dr(Si(n,i+1))}})}return e}function K_e(t,e){return dt(t[e])?t[e]():null}function Y_e(t,e){var r=t||At;return $e(e,function(n,i){r+="; "+n+(xe(i)?At:"="+i)}),r}function cKe(t){var e=At;if(!Id&&fW(),Id.v){var r=Id.v[pW]||At;V_e!==r&&($_e=J_e(r),V_e=r),e=Dr($_e[t]||At)}return e}function Q_e(t,e){!Id&&fW(),Id.v&&(Id.v[pW]=t+"="+e)}function l3(t){return Lt(t)?!!(Mi(t,"CPU iPhone OS 12")||Mi(t,"iPad; CPU OS 12")||Mi(t,"Macintosh; Intel Mac OS X 10_14")&&Mi(t,"Version/")&&Mi(t,"Safari")||Mi(t,"Macintosh; Intel Mac OS X 10_14")&&Fh(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Mi(t,"Chrome/5")||Mi(t,"Chrome/6")||Mi(t,"UnrealEngine")&&!Mi(t,"Chrome")||Mi(t,"UCBrowser/12")||Mi(t,"UCBrowser/11")):!1}var cW,hy,G_e,j_e,pW,uW,z_e,dW,rg,a3,lW,V_e,Id,$_e,u3,oKe,hW=I(()=>{gt();aW();eg();hn();pl();Jh();Ed();to();G_e="toGMTString",j_e="toUTCString",pW="cookie",uW="expires",z_e="isCookieUseDisabled",dW="disableCookiesUsage",rg="_ckMgr",a3=null,lW=null,V_e=null,$_e={},u3={},oKe=(cW={cookieCfg:sW((hy={},hy[$4]={fb:"cookieDomain",dfVal:Td},hy.path={fb:"cookiePath",dfVal:Td},hy.enabled=bc,hy.ignoreCookies=bc,hy.blockedCookies=bc,hy)),cookieDomain:bc,cookiePath:bc},cW[dW]=bc,cW)});function ng(t,e,r,n){he(t,function(i){if(i&&i[e])if(r)Ma(function(){return n(i)},0);else try{n(i)}catch{}})}var uKe,kw,gW=I(()=>{Po();w1();gt();eg();hn();to();uKe={perfEvtsSendAll:!1};kw=function(){function t(e){this.listeners=[];var r,n,i=[],o=$n(e,uKe);n=o[cu](function(s){r=!!s.cfg.perfEvtsSendAll}),er(t,this,function(s){Ur(s,"listeners",{g:function(){return i}}),s[g1]=function(a){i[rr](a)},s[v1]=function(a){for(var c=Er(i,a);c>-1;)i[vd](c,1),c=Er(i,a)},s[R1]=function(a){ng(i,R1,!0,function(c){c[R1](a)})},s[Yh]=function(a,c){ng(i,Yh,!0,function(u){u[Yh](a,c)})},s[A1]=function(a,c){ng(i,A1,c,function(u){u[A1](a,c)})},s[xd]=function(a){a&&(r||!a[lw]())&&ng(i,xd,!1,function(c){a[cl]?Ma(function(){return c[xd](a)},0):c[xd](a)})},s[j4]=function(a){a&&a[it]&&ng(i,j4,!0,function(c){c[j4](a)})},s[z4]=function(a){a&&a[Vh]&&ng(i,z4,!0,function(c){c[z4](a)})},s[V4]=function(a,c){if(a>0){var u=c||0;ng(i,V4,!0,function(l){l[V4](a,u)})}},s[Ha]=function(a){var c=function(){n&&n.rm(),n=null,i=[]},u;if(ng(i,"unload",!1,function(l){var d=l[Ha](a);d&&(u||(u=[]),u[rr](d))}),u)return oa(function(l){return Wh(O$(u),function(){c(),l()})});c()}})}return t.__ieDyn=1,t}()});function Ci(t,e,r,n,i){if(t){var o=t;if(o[P1]&&(o=o[P1]()),o){var s=void 0,a=o[sy](vW);try{if(s=o.create(e(),n,i),s){if(a&&s[ll]&&(s[ll](gy[yW],a),a[sy]&&a[ll])){var c=a[sy](gy[Dw]);c||(c=[],a[ll](gy[Dw],c)),c[rr](s)}return o[ll](vW,s),r(s)}}catch(u){s&&s[ll]&&s[ll]("exception",u)}finally{s&&o.fire(s),o[ll](vW,a)}}}return r()}function bW(){return lKe}var B1,yW,Dw,lKe,gy,Nw,vW,d3=I(()=>{Po();gt();hn();to();B1="ctx",yW="ParentContextKey",Dw="ChildrenContextKey",lKe=null,gy=function(){function t(e,r,n){var i=this;if(i.start=ui(),i[ks]=e,i[cl]=n,i[lw]=function(){return!1},dt(r)){var o;Ur(i,"payload",{g:function(){return!o&&dt(r)&&(o=r(),r=null),o}})}i[sy]=function(s){return s?s===t[yW]||s===t[Dw]?i[s]:(i[B1]||{})[s]:null},i[ll]=function(s,a){if(s)if(s===t[yW])i[s]||(i[lw]=function(){return!0}),i[s]=a;else if(s===t[Dw])i[s]=a;else{var c=i[B1]=i[B1]||{};c[s]=a}},i[M4]=function(){var s=0,a=i[sy](t[Dw]);if(Ye(a))for(var c=0;c<a[it];c++){var u=a[c];u&&(s+=u[Hh])}i[Hh]=ui()-i.start,i.exTime=i[Hh]-s,i[M4]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),Nw=function(){function t(e){this.ctx={},er(t,this,function(r){r.create=function(n,i,o){return new gy(n,i,o)},r.fire=function(n){n&&(n[M4](),e&&dt(e[xd])&&e[xd](n))},r[ll]=function(n,i){if(n){var o=r[B1]=r[B1]||{};o[n]=i}},r[sy]=function(n){return(r[B1]||{})[n]}})}return t.__ieDyn=1,t}(),vW="CoreUtils.doPerf"});function Lw(){var t=vy();return Si(t,0,8)+"-"+Si(t,8,12)+"-"+Si(t,12,16)+"-"+Si(t,16,20)+"-"+Si(t,20)}function vy(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=At,r,n=0;n<4;n++)r=Sf(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(Sf()&3)|0];return nl(e,0,8)+nl(e,9,4)+"4"+nl(e,13,3)+i+nl(e,16,3)+nl(e,19,12)}var _W=I(()=>{"use strict";gt();to();J4()});function Cf(t,e,r){return t&&t[it]===e&&t!==r?!!t.match(/^[\da-f]*$/i):!1}function exe(t,e,r){return Cf(t,e)?t:r}function txe(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[it]<2;)e="0"+e;return e}function Ow(t,e,r,n){var i;return i={},i[ny]=Cf(n,2,SW)?n:xW,i[_1]=wd(t)?t:vy(),i[x1]=Rd(e)?e:Nh(vy(),16),i.traceFlags=r>=0&&r<=255?r:1,i}function yy(t,e){var r;if(!t||(Ye(t)&&(t=t[0]||""),!t||!Lt(t)||t[it]>8192))return null;if(t.indexOf(",")!==-1){var n=t[uu](",");t=n[e>0&&n[it]>e?e:0]}var i=dKe.exec(Dr(t));return!i||i[1]===SW||i[2]===p3||i[3]===f3?null:(r={version:(i[1]||At)[Ba](),traceId:(i[2]||At)[Ba](),spanId:(i[3]||At)[Ba]()},r[$h]=parseInt(i[4],16),r)}function wd(t){return Cf(t,32,p3)}function Rd(t){return Cf(t,16,f3)}function q1(t){return!(!t||!Cf(t[ny],2,SW)||!Cf(t[_1],32,p3)||!Cf(t[x1],16,f3)||!Cf(txe(t[$h]),2))}function Mw(t){return q1(t)?(t[$h]&Z_e)===Z_e:!1}function Fw(t){if(t){var e=txe(t[$h]);Cf(e,2)||(e="01");var r=t[ny]||xW;return r!=="00"&&r!=="ff"&&(r=xW),"".concat(r.toLowerCase(),"-").concat(exe(t.traceId,32,p3).toLowerCase(),"-").concat(exe(t.spanId,16,f3).toLowerCase(),"-").concat(e.toLowerCase())}return""}function Uw(t){var e="traceparent",r=yy(V$(e),t);return r||(r=yy($$(e),t)),r}var dKe,xW,SW,p3,f3,Z_e,EW=I(()=>{gt();hn();_W();Jh();to();dKe=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,xW="00",SW="ff",p3="00000000000000000000000000000000",f3="0000000000000000",Z_e=1});function If(t){return pKe.get(t,"state",{},!0)}function TW(t,e){for(var r=[],n=null,i=t[yc](),o;i;){var s=i[qh]();if(s){n&&n[zh]&&s[za]&&n[zh](s),o=If(s);var a=!!o[qa];s[qa]&&(a=s[qa]()),a||r[rr](s),n=s,i=i[yc]()}}he(r,function(c){var u=t[li]();c[hf](t.getCfg(),u,e,t[yc]()),o=If(c),!c[li]&&!o[li]&&(o[li]=u),o[qa]=!0,delete o[vc]})}function m3(t){return t.sort(function(e,r){var n=0;if(r){var i=r[za];e[za]?n=i?e[uy]-r[uy]:1:i&&(n=-1)}else n=e?1:-1;return n})}function rxe(t){var e={};return{getName:function(){return e[ks]},setName:function(r){t&&t.setName(r),e[ks]=r},getTraceId:function(){return e[_1]},setTraceId:function(r){t&&t.setTraceId(r),wd(r)&&(e[_1]=r)},getSpanId:function(){return e[x1]},setSpanId:function(r){t&&t.setSpanId(r),Rd(r)&&(e[x1]=r)},getTraceFlags:function(){return e[$h]},setTraceFlags:function(r){t&&t.setTraceFlags(r),e[$h]=r}}}var pKe,CW=I(()=>{"use strict";gt();hn();O1();to();EW();pKe=Z4("plugin")});function mKe(t,e,r){for(;t;){if(t[qh]()===r)return t;t=t[yc]()}return ig([r],e.config||{},e)}function IW(t,e,r,n){var i=null,o=[];e||(e=$n({},null,r[cn])),n!==null&&(i=n?mKe(t,r,n):t);var s={_next:c,ctx:{core:function(){return r},diagLog:function(){return dl(r,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:l,getConfig:d,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(f){i=f},iterate:p,onComplete:a}};function a(f,m){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];f&&o[rr]({func:f,self:Rt(m)?s.ctx:m,args:h})}function c(){var f=i;if(i=f?f[yc]():null,!f){var m=o;m&&m[it]>0&&(he(m,function(h){try{h.func.call(h.self,h.args)}catch(g){Ne(r[cn],2,73,"Unexpected Exception during onComplete - "+Ge(g))}}),o=[])}return f}function u(f,m){var h=null,g=e.cfg;if(g&&f){var v=g[gf];!v&&m&&(v={}),g[gf]=v,v=e.ref(g,gf),v&&(h=v[f],!h&&m&&(h={}),v[f]=h,h=e.ref(v,f))}return h}function l(f,m){var h=u(f,!0);return m&&$e(m,function(g,v){if(xe(h[g])){var y=e.cfg[g];(y||!xe(y))&&(h[g]=y)}Tw(e,h,g,v)}),e[al](h,m)}function d(f,m,h){h===void 0&&(h=!1);var g,v=u(f,!1),y=e.cfg;return v&&(v[m]||!xe(v[m]))?g=v[m]:(y[m]||!xe(y[m]))&&(g=y[m]),g||!xe(g)?g:h}function p(f){for(var m;m=s._next();){var h=m[qh]();h&&f(h)}}return s}function aa(t,e,r,n){var i=$n(e),o=IW(t,i,r,n),s=o.ctx;function a(u){var l=o._next();return l&&l[za](u,s),!l}function c(u,l){return u===void 0&&(u=null),Ye(u)&&(u=ig(u,i.cfg,r,l)),aa(u||s[yc](),i.cfg,r,l)}return s[go]=a,s[bd]=c,s}function H1(t,e,r){var n=$n(e.config),i=IW(t,n,e,r),o=i.ctx;function s(c){var u=i._next();return u&&u[Ha](o,c),!u}function a(c,u){return c===void 0&&(c=null),Ye(c)&&(c=ig(c,n.cfg,e,u)),H1(c||o[yc](),e,u)}return o[go]=s,o[bd]=a,o}function Bw(t,e,r){var n=$n(e.config),i=IW(t,n,e,r),o=i.ctx;function s(c){return o.iterate(function(u){dt(u[iy])&&u[iy](o,c)})}function a(c,u){return c===void 0&&(c=null),Ye(c)&&(c=ig(c,n.cfg,e,u)),Bw(c||o[yc](),e,u)}return o[go]=s,o[bd]=a,o}function ig(t,e,r,n){var i=null,o=!n;if(Ye(t)&&t[it]>0){var s=null;he(t,function(a){if(!o&&n===a&&(o=!0),o&&a&&dt(a[za])){var c=hKe(a,e,r);i||(i=c),s&&s._setNext(c),s=c}})}return n&&!i?ig([n],e,r):i}function hKe(t,e,r){var n=null,i=dt(t[za]),o=dt(t[zh]),s;t?s=t[yd]+"-"+t[uy]+"-"+oxe++:s="Unknown-0-"+oxe++;var a={getPlugin:function(){return t},getNext:function(){return n},processTelemetry:l,unload:d,update:p,_id:s,_setNext:function(f){n=f}};function c(){var f;return t&&dt(t[ixe])&&(f=t[ixe]()),f||(f=aa(a,e,r)),f}function u(f,m,h,g,v){var y=!1,b=t?t[yd]:fKe,x=f[nxe];return x||(x=f[nxe]={}),f.setNext(n),t&&Ci(f[li](),function(){return b+":"+h},function(){x[s]=!0;try{var S=n?n._id:At;S&&(x[S]=!1),y=m(f)}catch(L){var T=n?x[n._id]:!0;T&&(y=!0),(!n||!T)&&Ne(f[Ga](),1,73,"Plugin ["+b+"] failed during "+h+" - "+Ge(L)+", run flags: "+Ge(x))}},g,v),y}function l(f,m){m=m||c();function h(g){if(!t||!i)return!1;var v=If(t);return v[vc]||v[fw]?!1:(o&&t[zh](n),t[za](f,g),!0)}u(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[go](f)}function d(f,m){function h(){var g=!1;if(t){var v=If(t),y=t[li]||v[li];t&&(!y||y===f.core())&&!v[vc]&&(v[li]=null,v[vc]=!0,v[qa]=!1,t[vc]&&t[vc](f,m)===!0&&(g=!0))}return g}u(f,h,"unload",function(){},m[cl])||f[go](m)}function p(f,m){function h(){var g=!1;if(t){var v=If(t),y=t[li]||v[li];t&&(!y||y===f.core())&&!v[vc]&&t[iy]&&t[iy](f,m)===!0&&(g=!0)}return g}u(f,h,"update",function(){},!1)||f[go](m)}return hd(a)}var fKe,nxe,ixe,oxe,wW,h3=I(()=>{"use strict";gt();eW();eg();hn();pl();Ed();to();d3();CW();fKe="TelemetryPluginChain",nxe="_hasRun",ixe="_getTelCtx",oxe=0;wW=function(){function t(e,r,n,i){var o=this,s=aa(e,r,n,i);xc(o,s,mo(s))}return t}()});function by(){var t=[];function e(n){n&&t[rr](n)}function r(n,i){he(t,function(o){try{o(n,i)}catch(s){Ne(n[Ga](),2,73,"Unexpected error calling unload handler - "+Ge(s))}}),t=[]}return{add:e,run:r}}var g3=I(()=>{gt();hn();pl()});function v3(){var t=[];function e(n){var i=t;t=[],he(i,function(o){try{(o.rm||o.remove).call(o)}catch(s){Ne(n,2,73,"Unloading:"+Ge(s))}})}function r(n){n&&ou(t,n)}return{run:e,add:r}}var RW=I(()=>{gt();pl()});var AW,og,gKe,wf,PW=I(()=>{"use strict";Po();gt();eg();hn();pl();Ed();to();h3();g3();RW();og="getPlugin",gKe=(AW={},AW[gf]={isVal:Td,v:{}},AW),wf=function(){function t(){var e=this,r,n,i,o,s;u(),er(t,e,function(l){l[hf]=function(d,p,f,m){c(d,p,m),r=!0},l[vc]=function(d,p){var f,m=l[li];if(!m||d&&m!==d[li]())return;var h,g=!1,v=d||H1(null,m,i&&i[og]?i[og]():i),y=p||(f={reason:0},f[cl]=!1,f);function b(){g||(g=!0,o.run(v,p),s.run(v[Ga]()),h===!0&&v[go](y),u())}return!l[jh]||l[jh](v,y,b)!==!0?b():h=!0,h},l[iy]=function(d,p){var f=l[li];if(!f||d&&f!==d[li]())return;var m,h=!1,g=d||Bw(null,f,i&&i[og]?i[og]():i),v=p||{reason:0};function y(){h||(h=!0,c(g.getCfg(),g.core(),g[yc]()))}return!l._doUpdate||l._doUpdate(g,v,y)!==!0?y():m=!0,m},yf(l,"_addUnloadCb",function(){return o},"add"),yf(l,"_addHook",function(){return s},"add"),Ur(l,"_unloadHooks",{g:function(){return s}})}),e[Ga]=function(l){return a(l)[Ga]()},e[qa]=function(){return r},e.setInitialized=function(l){r=l},e[zh]=function(l){i=l},e[go]=function(l,d){d?d[go](l):i&&dt(i[za])&&i[za](l,null)},e._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var p=n||aa(null,{},e[li]);i&&i[og]?d=p[bd](null,i[og]):d=p[bd](null,i)}return d}function c(l,d,p){$n(l,gKe,dl(d)),!p&&d&&(p=d[D4]()[yc]());var f=i;i&&i[og]&&(f=i[og]()),e[li]=d,n=aa(p,l,d,f)}function u(){r=!1,e[li]=null,n=null,i=null,s=v3(),o=by()}}return t.__ieDyn=1,t}()});function vKe(t,e,r){var n={id:e,fn:r};ou(t,n);var i={remove:function(){he(t,function(o,s){if(o.id===n.id)return t[vd](s,1),-1})}};return i}function yKe(t,e,r){for(var n=!1,i=t[it],o=0;o<i;++o){var s=t[o];if(s)try{if(s.fn[Bh](null,[e])===!1){n=!0;break}}catch(a){Ne(r,2,64,"Telemetry initializer failed: "+Cn(a),{exception:Ge(a)},!0)}}return!n}var sxe,axe=I(()=>{Ua();Po();gt();hn();PW();pl();Ed();to();sxe=function(t){Fa(e,t);function e(){var r=t.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,i;o(),er(e,r,function(s,a){s.addTelemetryInitializer=function(c){return vKe(i,n++,c)},s[za]=function(c,u){yKe(i,c,u?u[Ga]():s[Ga]())&&s[go](c,u)},s[jh]=function(){o()}});function o(){n=0,i=[]}return r}return e.__ieDyn=1,e}(wf)});function xKe(t,e){return new Nw(e)}function SKe(t,e,r){var n,i=[],o=[],s={};return he(r,function(a){(xe(a)||xe(a[hf]))&&si(dxe);var c=a[uy],u=a[yd];a&&c&&(xe(s[c])?s[c]=u:sa(t,"Two extensions have same priority #"+c+" - "+s[c]+", "+u)),!c||c<e?i[rr](a):o[rr](a)}),n={},n[li]=i,n[Kh]=o,n}function uxe(t,e){var r=!1;return he(e,function(n){if(n===t)return r=!0,-1}),r}function DW(t,e,r,n){r&&$e(r,function(i,o){n&&ho(o)&&ho(e[i])&&DW(t,e[i],o,n),n&&ho(o)&&ho(e[i])?DW(t,e[i],o,n):t.set(e,i,o)})}function lxe(t,e){var r=null,n=-1;return he(t,function(i,o){if(i.w===e)return r=i,n=o,-1}),{i:n,l:r}}function EKe(t,e){var r=lxe(t,e).l;return r||(r={w:e,rm:function(){var n=lxe(t,e);n.i!==-1&&t[vd](n.i,1)}},t[rr](r)),r}function TKe(t,e,r){he(e,function(n){var i=ro(t,n.w,r);delete n.w,n.rm=function(){i.rm()}})}var sg,dxe,bKe,cxe,_Ke,kW,Rf,pxe=I(()=>{"use strict";Ua();Po();w1();gt();eg();hn();nW();oW();hW();O1();U$();pl();Ed();to();gW();d3();h3();CW();axe();g3();RW();dxe="Plugins must provide initialize method",bKe="_notificationManager",cxe="SDK is still unloading...",_Ke="SDK is not initialized",kW=na((sg={cookieCfg:{}},sg[cy]={rdOnly:!0,ref:!0,v:[]},sg[Kh]={rdOnly:!0,ref:!0,v:[]},sg[gf]={ref:!0,v:{}},sg[G4]=bc,sg.loggingLevelConsole=0,sg.diagnosticLogInterval=bc,sg));Rf=function(){function t(){var e,r,n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,y,b,x,S,T,L,M,j,N,J,X;er(t,this,function(D){F(),D._getDbgPlgTargets=function(){return[L]},D[qa]=function(){return r},D[hf]=function(U,ae,le,Ie){f&&si(cxe),D[qa]()&&si("Core cannot be initialized more than once"),e=$n(U,kW,le||D[cn],!1),U=e.cfg,Qe(e[cu](function(_t){S=_t.cfg.instrumentationKey;var Jr=_t.ref(_t.cfg,gf);$e(Jr,function(An){_t.ref(Jr,An)}),xe(S)&&si("Please provide instrumentation key")})),o=Ie,ft(),ze(),D[cn]=le;var be=U[cy];if(l=[],l[rr].apply(l,_4(_4([],ae,!1),be,!1)),d=U[Kh],Z(null),(!p||p[it]===0)&&si("No "+Kh+" available"),d&&d[it]>1){var et=D[qh]("TeeChannelController");(!et||!et.plugin)&&Ne(n,1,28,"TeeChannel required")}TKe(U,T,n),T=null,r=!0,D.releaseQueue(),D[g$]()},D.getChannels=function(){var U=[];return p&&he(p,function(ae){U[rr](ae)}),hd(U)},D.track=function(U){Ci(D[P1](),function(){return"AppInsightsCore:track"},function(){U===null&&(me(U),si("Invalid telemetry item")),!U[ks]&&xe(U[ks])&&(me(U),si("telemetry name required")),U.iKey=U.iKey||S,U[Hh]=U[Hh]||_c(new Date),U.ver=U.ver||"4.0",!f&&D[qa]()?O()[go](U):i[rr](U)},function(){return{item:U}},!U.sync)},D[D4]=O,D[h1]=function(){return o||(o=new kw(e.cfg),D[bKe]=o),o},D[g1]=function(U){D[h1]()[g1](U)},D[v1]=function(U){o&&o[v1](U)},D.getCookieMgr=function(){return c||(c=Tf(e.cfg,D[cn])),c},D.setCookieMgr=function(U){c!==U&&(Ef(c,!1),c=U)},D[P1]=function(){return!s&&!a&&Qe(e[cu](function(U){if(U.cfg.enablePerfMgr){var ae=U.cfg[G4];dt(ae)&&(a=ae(D,D[h1]()))}})),s||a||bW()},D.setPerfMgr=function(U){s=U},D.eventCnt=function(){return i[it]},D.releaseQueue=function(){if(r&&i[it]>0){var U=i;i=[],he(U,function(ae){O()[go](ae)})}},D[g$]=function(U){return h=U||null,X=!1,N&&N[ry](),E(!0)};function E(U){if((!N||!N[Gh])&&!X){var ae=U||n&&n.queue[it]>0;ae&&(J||(J=!0,Qe(e[cu](function(le){var Ie=le.cfg.diagnosticLogInterval;(!Ie||!(Ie>0))&&(Ie=1e4);var be=!1;N&&(be=N[Gh],N[ry]()),N=t$(He,Ie),N.unref(),N[Gh]=be}))),N[Gh]=!0)}return N}D[v$]=function(){X=!0,N&&N[ry](),He()},xc(D,function(){return m},["addTelemetryInitializer"]),D[Ha]=function(U,ae,le){var Ie;U===void 0&&(U=!0),r||si(_Ke),f&&si(cxe);var be=(Ie={reason:50},Ie[cl]=U,Ie.flushComplete=!1,Ie),et;U&&!ae&&(et=oa(function(An){ae=An}));var _t=H1(z(),D);_t[aw](function(){y.run(D[cn]),s3([c,o,n],U,function(){F(),ae&&ae(be)})},D);function Jr(An){be.flushComplete=An,f=!0,v.run(_t,be),D[v$](),_t[go](be)}return He(),ee(U,Jr,6,le)||Jr(!1),et},D[qh]=$,D.addPlugin=function(U,ae,le,Ie){if(!U){Ie&&Ie(!1),mr(dxe);return}var be=$(U[yd]);if(be&&!ae){Ie&&Ie(!1),mr("Plugin ["+U[yd]+"] is already loaded!");return}var et={reason:16};function _t(pi){l[rr](U),et.added=[U],Z(et),Ie&&Ie(!0)}if(be){var Jr=[be.plugin],An={reason:2,isAsync:!!le};se(Jr,An,function(pi){pi?(et.removed=Jr,et.reason|=32,_t(!0)):Ie&&Ie(!1)})}else _t(!1)},D.updateCfg=function(U,ae){ae===void 0&&(ae=!0);var le;if(D[qa]()){le={reason:1,cfg:e.cfg,oldCfg:y4({},e.cfg),newConfig:y4({},U),merge:ae},U=le.newConfig;var Ie=e.cfg;U[cy]=Ie[cy],U[Kh]=Ie[Kh]}e._block(function(be){var et=be.cfg;DW(be,et,U,ae),ae||$e(et,function(_t){Oa(U,_t)||be.set(et,_t,bc)}),be[al](et,kW)},!0),e[ty](),le&&Ct(le)},D.evtNamespace=function(){return g},D.flush=ee,D.getTraceCtx=function(U){return x||(x=rxe()),x},D.setTraceCtx=function(U){x=U||null},D.addUnloadHook=Qe,yf(D,"addUnloadCb",function(){return v},"add"),D.onCfgChange=function(U){var ae;return r?ae=ro(e.cfg,U,D[cn]):ae=EKe(T,U),{rm:function(){ae.rm()}}},D.getWParam=function(){return Lh()||e.cfg.enableWParam?0:-1};function A(){var U={};M=[];var ae=function(le){le&&he(le,function(Ie){if(Ie[yd]&&Ie[ny]&&!U[Ie.identifier]){var be=Ie[yd]+"="+Ie[ny];M[rr](be),U[Ie.identifier]=Ie}})};ae(p),d&&he(d,function(le){ae(le)}),ae(l)}function F(){r=!1,e=$n({},kW,D[cn]),e.cfg[N4]=1,Ur(D,"config",{g:function(){return e.cfg},s:function(ae){D.updateCfg(ae,!1)}}),Ur(D,"pluginVersionStringArr",{g:function(){return M||A(),M}}),Ur(D,"pluginVersionString",{g:function(){return j||(M||A(),j=M.join(";")),j||At}}),Ur(D,"logger",{g:function(){return n||(n=new Zh(e.cfg),e[cn]=n),n},s:function(ae){e[cn]=ae,n!==ae&&(Ef(n,!1),n=ae)}}),D[cn]=new Zh(e.cfg),L=[];var U=D.config[cy]||[];U.splice(0,U[it]),ou(U,L),m=new sxe,i=[],Ef(o,!1),o=null,s=null,a=null,Ef(c,!1),c=null,u=null,l=[],d=null,p=null,f=!1,h=null,g=is("AIBaseCore",!0),v=by(),x=null,S=null,y=v3(),T=[],j=null,M=null,X=!1}function O(){var U=aa(z(),e.cfg,D);return U[aw](E),U}function Z(U){var ae=SKe(D[cn],H_e,l);u=null,j=null,M=null,p=(d||[])[0]||[],p=m3(ou(p,ae[Kh]));var le=ou(m3(ae[li]),p);L=hd(le);var Ie=D.config[cy]||[];Ie.splice(0,Ie[it]),ou(Ie,L);var be=O();p&&p[it]>0&&TW(be[bd](p),le),TW(be,le),U&&Ct(U)}function $(U){var ae=null,le=null,Ie=[];return he(L,function(be){if(be[yd]===U&&be!==m)return le=be,-1;be.getChannel&&Ie[rr](be)}),!le&&Ie[it]>0&&he(Ie,function(be){if(le=be.getChannel(U),!le)return-1}),le&&(ae={plugin:le,setEnabled:function(be){If(le)[fw]=!be},isEnabled:function(){var be=If(le);return!be[vc]&&!be[fw]},remove:function(be,et){var _t;be===void 0&&(be=!0);var Jr=[le],An=(_t={reason:1},_t[cl]=be,_t);se(Jr,An,function(pi){pi&&Z({reason:32,removed:Jr}),et&&et(pi)})}}),ae}function z(){if(!u){var U=(L||[]).slice();Er(U,m)===-1&&U[rr](m),u=ig(m3(U),e.cfg,D)}return u}function se(U,ae,le){if(U&&U[it]>0){var Ie=ig(U,e.cfg,D),be=H1(Ie,D);be[aw](function(){var et=!1,_t=[];he(l,function(An,pi){uxe(An,U)?et=!0:_t[rr](An)}),l=_t,j=null,M=null;var Jr=[];d&&(he(d,function(An,pi){var js=[];he(An,function(_p){uxe(_p,U)?et=!0:js[rr](_p)}),Jr[rr](js)}),d=Jr),le&&le(et),E()}),be[go](ae)}else le(!1)}function He(){if(n&&n.queue){var U=n.queue.slice(0);n.queue[it]=0,he(U,function(ae){var le,Ie=(le={},le[ks]=h||"InternalMessageId: "+ae[y1],le.iKey=S,le[Hh]=_c(new Date),le.baseType=dy.dataType,le.baseData={message:ae[_d]},le);D.track(Ie)})}}function ee(U,ae,le,Ie){var be=1,et=!1,_t=null;Ie=Ie||5e3;function Jr(){be--,et&&be===0&&(_t&&_t[ry](),_t=null,ae&&ae(et),ae=null)}if(p&&p[it]>0){var An=O()[bd](p);An.iterate(function(pi){if(pi.flush){be++;var js=!1;pi.flush(U,function(){js=!0,Jr()},le)||js||(U&&_t==null?_t=Ma(function(){_t=null,Jr()},Ie):Jr())}})}return et=!0,Jr(),!0}function ft(){!o&&D[h1](),Qe(e[cu](function(U){var ae=U.cfg.disableDbgExt;ae===!0&&b&&(o[v1](b),b=null),o&&!b&&ae!==!0&&(b=y_e(U.cfg),o[g1](b))}))}function ze(){Qe(e[cu](function(U){var ae=U.cfg.enablePerfMgr;!ae&&a&&(a=null),ae&&bw(U.cfg,G4,xKe)}))}function Ct(U){var ae=Bw(z(),D);ae[aw](E),(!D._updateHook||D._updateHook(ae,U)!==!0)&&ae[go](U)}function mr(U){var ae=D[cn];ae?(Ne(ae,2,73,U),E()):si(U)}function me(U){var ae=D[h1]();ae&&ae[Yh]([U],2)}function Qe(U){y.add(U)}})}return t.__ieDyn=1,t}()});var Ad,CKe,fxe,NW,_y,mxe=I(()=>{Po();w1();gt();hn();oW();pl();Jh();Ed();Ad="",CKe="NoResponseBody",fxe="&"+CKe+"=true",NW="POST",_y=function(){function t(){var e=0,r,n,i,o,s,a,c,u,l,d,p,f,m;er(t,this,function(h,g){var v=!0;X(),h[hf]=function(D,E){i=E,n&&Ne(i,1,28,"Sender is already initialized"),h.SetConfig(D),n=!0},h._getDbgPlgTargets=function(){return[n,o,a,r]},h.SetConfig=function(D){try{if(s=D.senderOnCompleteCallBack||{},a=!!D.disableCredentials,o=!!D.isOneDs,r=!!D.enableSendPromise,u=!!D.disableXhr,l=!!D.disableBeacon,d=!!D.disableBeaconSync,m=D.timeWrapper,f=!!D.addNoResponse,p=!!D.disableFetchKeepAlive,c={sendPOST:j},o||(v=!1),a){var E=ly();E&&E.protocol&&E.protocol[Ba]()==="file:"&&(v=!1)}return!0}catch{}return!1},h.getSyncFetchPayload=function(){return e},h.getSenderInst=function(D,E){return D&&D[it]?S(D,E):null},h.getFallbackInst=function(){return c},h[jh]=function(D,E){X()};function y(D,E){T(E,200,{},D)}function b(D,E){Ne(i,2,26,"Failed to send telemetry.",{message:D}),T(E,400,{})}function x(D){b("No endpoint url is provided for the batch",D)}function S(D,E){for(var A,F=0,O=null,Z=0;O==null&&Z<D[it];)F=D[Z],!u&&F===1?yw()?O=J:D1()&&(O=j):F===2&&vf(E)&&(!E||!p)?O=N:F===3&&Va()&&(E?!d:!l)&&(O=M),Z++;return O?(A={_transport:F,_isSync:E},A[S$]=O,A):null}function T(D,E,A,F){try{D&&D(E,A,F)}catch{}}function L(D,E){var A=Zi(),F=D[b1];if(!F)return x(E),!0;F=D[b1]+(f?fxe:Ad);var O=D[Vh],Z=o?O:new Blob([O],{type:"text/plain;charset=UTF-8"}),$=A.sendBeacon(F,Z);return $}function M(D,E,A){var F=D[Vh];try{if(F)if(L(D,E))y(Ad,E);else{var O=s&&s.beaconOnRetry;O&&dt(O)?O(D,E,L):(c&&c[S$](D,E,!0),Ne(i,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Z){o&&sa(i,"Failed to send telemetry using sendBeacon API. Ex:"+Ge(Z)),T(E,o?0:400,{},Ad)}}function j(D,E,A){var F,O,Z,$=D[F4]||{};!A&&r&&(F=oa(function(ee,ft){O=ee,Z=ft})),o&&A&&D.disableXhrSync&&(A=!1);var z=D[b1];if(!z){x(E),O&&O(!1);return}var se=J$(NW,z,v,!0,A,D[ay]);se[E$]("Content-type","application/json"),he(mo($),function(ee){se[E$](ee,$[ee])}),se.onreadystatechange=function(){o||(He(se),se.readyState===4&&O&&O(!0))},se.onload=function(){o&&He(se)};function He(ee){var ft=s&&s.xhrOnComplete,ze=ft&&dt(ft);if(ze)ft(ee,E,D);else{var Ct=fl(ee);T(E,ee[oy],xf(ee,o),Ct)}}return se.onerror=function(ee){T(E,o?se[oy]:400,xf(se,o),o?Ad:bf(se)),Z&&Z(ee)},se.ontimeout=function(){T(E,o?se[oy]:500,xf(se,o),o?Ad:bf(se)),O&&O(!1)},se.send(D[Vh]),F}function N(D,E,A){var F,O=D[b1],Z=D[Vh],$=o?Z:new Blob([Z],{type:"application/json"}),z,se,He,ee=new Headers,ft=Z[it],ze=!1,Ct=!1,mr=D[F4]||{},me=(F={method:NW,body:$},F[iW]=!0,F);D.headers&&mo(D.headers)[it]>0&&(he(mo(mr),function(le){ee.append(le,mr[le])}),me[F4]=ee),v&&o&&(me.credentials="include"),A&&(me.keepalive=!0,e+=ft,o?D._sendReason===2&&(ze=!0,f&&(O+=fxe)):ze=!0);var Qe=new Request(O,me);try{Qe[iW]=!0}catch{}if(!A&&r&&(z=oa(function(le,Ie){se=le,He=Ie})),!O){x(E),se&&se(!1);return}function U(le){T(E,o?0:400,{},o?Ad:le)}function ae(le,Ie,be){var et=le[oy],_t=s.fetchOnComplete;_t&&dt(_t)?_t(le,E,be||Ad,Ie):T(E,et,{},be||Ad)}try{Wh(fetch(o?O:Qe,o?me:null),function(le){if(A&&(e-=ft,ft=0),!Ct)if(Ct=!0,le.rejected)U(le.reason&&le.reason[_d]),He&&He(le.reason);else{var Ie=le.value;try{!o&&!Ie.ok?(U(Ie.statusText),se&&se(!1)):o&&!Ie.body?(ae(Ie,null,Ad),se&&se(!0)):Wh(Ie.text(),function(be){ae(Ie,D,be.value),se&&se(!0)})}catch(be){U(Ge(be)),He&&He(be)}}})}catch(le){Ct||(U(Ge(le)),He&&He(le))}return ze&&!Ct&&(Ct=!0,T(E,200,{}),se&&se(!0)),o&&!Ct&&D[ay]>0&&m&&m.set(function(){Ct||(Ct=!0,T(E,500,{}),se&&se(!0))},D[ay]),z}function J(D,E,A){var F=ci(),O=new XDomainRequest,Z=D[Vh];O.onload=function(){var ee=fl(O),ft=s&&s.xdrOnComplete;ft&&dt(ft)?ft(O,E,D):T(E,200,{},ee)},O.onerror=function(){T(E,400,{},o?Ad:fy(O))},O.ontimeout=function(){T(E,500,{})},O.onprogress=function(){};var $=F&&F.location&&F.location[L4]||"",z=D[b1];if(!z){x(E);return}if(!o&&z.lastIndexOf($,0)!==0){var se="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Ne(i,2,40,". "+se),b(se,E);return}var He=o?z:z[ul](/^(https?:)/,"");O.open(NW,He),D[ay]&&(O[ay]=D[ay]),O.send(Z),o&&A?m&&m.set(function(){O.send(Z)},0):O.send(Z)}function X(){e=0,n=!1,r=!1,i=null,o=null,s=null,a=null,c=null,u=!1,l=!1,d=!1,p=!1,f=!1,m=null}})}return t.__ieDyn=1,t}()});function bxe(t){return t&&t[ul]?t[ul](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,At):t}function _3(t,e){var r;if(e){var n=At;Ye(e)?(n=At,he(e,function(o){o=bxe(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=bxe(e),n&&(n[0]!=="."&&(n="."+n),t=(t||At)+n)}var i=AKe.exec(t||At)||[];return r={},r[ja]=i[1],r.ns=(i[2]||At).replace(IKe,".").replace(wKe,At)[uu](".").sort().join("."),r}function LW(t,e,r){var n=[],i=Hw.get(t,y3,{},!1),o=_3(e,r);return $e(i,function(s,a){he(a,function(c){var u;(!o[ja]||o[ja]===c.evtName[ja])&&(!o.ns||o.ns===o.ns)&&n[rr]((u={},u[ks]=c.evtName[ja]+(c.evtName.ns?"."+c.evtName.ns:At),u.handler=c[uw],u))})}),n}function wxe(t,e,r){r===void 0&&(r=!0);var n=Hw.get(t,y3,{},r),i=n[e];return i||(i=n[e]=[]),i}function Rxe(t,e,r,n){t&&e&&e[ja]&&(t[yxe]?t[yxe](e[ja],r,n):t[vxe]&&t[vxe](xxe+e[ja],r))}function PKe(t,e,r,n){var i=!1;return t&&e&&e[ja]&&r&&(t[gxe]?(t[gxe](e[ja],r,n),i=!0):t[hxe]&&(t[hxe](xxe+e[ja],r),i=!0)),i}function _xe(t,e,r,n){for(var i=e[it];i--;){var o=e[i];o&&(!r.ns||r.ns===o.evtName.ns)&&(!n||n(o))&&(Rxe(t,o.evtName,o[uw],o.capture),e[vd](i,1))}}function kKe(t,e,r){if(e[ja])_xe(t,wxe(t,e[ja]),e,r);else{var n=Hw.get(t,y3,{});$e(n,function(i,o){_xe(t,o,e,r)}),mo(n)[it]===0&&Hw.kill(t,y3)}}function Sc(t,e){var r;return e?(Ye(e)?r=[t].concat(e):r=[t,e],r=_3("xx",r).ns[uu](".")):r=t,r}function Pd(t,e,r,n,i){var o;i===void 0&&(i=!1);var s=!1;if(t)try{var a=_3(e,n);if(s=PKe(t,a,r,i),s&&Hw.accept(t)){var c=(o={guid:RKe++,evtName:a},o[uw]=r,o.capture=i,o);wxe(t,a.type)[rr](c)}}catch{}return s}function Af(t,e,r,n,i){if(i===void 0&&(i=!1),t)try{var o=_3(e,n),s=!1;kKe(t,o,function(a){return o.ns&&!r||a[uw]===r?(s=!0,!0):!1}),s||Rxe(t,o,r,i)}catch{}}function OW(t,e,r,n){return n===void 0&&(n=!1),Pd(t,e,r,null,n)}function MW(t,e,r,n){n===void 0&&(n=!1),Af(t,e,r,null,n)}function x3(t,e,r){var n=!1,i=ci();i&&(n=Pd(i,t,e,r),n=Pd(i.body,t,e,r)||n);var o=ai();return o&&(n=Pd(o,t,e,r)||n),n}function S3(t,e,r){var n=ci();n&&(Af(n,t,e,r),Af(n.body,t,e,r));var i=ai();i&&Af(i,t,e,r)}function G1(t,e,r,n){var i=!1;return e&&t&&t[it]>0&&he(t,function(o){o&&(!r||Er(r,o)===-1)&&(i=x3(o,e,n)||i)}),i}function E3(t,e,r,n){var i=!1;return e&&t&&Ye(t)&&(i=G1(t,e,r,n),!i&&r&&r[it]>0&&(i=G1(t,e,null,n))),i}function ag(t,e,r){t&&Ye(t)&&he(t,function(n){n&&S3(n,e,r)})}function Gw(t,e,r){return E3([Txe,Exe,b3],t,e,r)}function jw(t,e){ag([Txe,Exe,b3],t,e)}function j1(t,e,r){function n(s){var a=ai();t&&a&&a.visibilityState==="hidden"&&t(s)}var i=Sc(Cxe,r),o=G1([b3],t,e,i);return(!e||Er(e,qw)===-1)&&(o=G1([qw],n,e,i)||o),!o&&e&&(o=j1(t,null,r)),o}function zw(t,e){var r=Sc(Cxe,e);ag([b3],t,r),ag([qw],null,r)}function z1(t,e,r){function n(s){var a=ai();t&&a&&a.visibilityState==="visible"&&t(s)}var i=Sc(Ixe,r),o=G1([Sxe],t,e,i);return o=G1([qw],n,e,i)||o,!o&&e&&(o=z1(t,null,r)),o}function Vw(t,e){var r=Sc(Ixe,e);ag([Sxe],t,r),ag([qw],null,r)}var xxe,hxe,gxe,vxe,yxe,y3,qw,b3,Sxe,Exe,Txe,Cxe,Ixe,IKe,wKe,RKe,Hw,AKe,Axe=I(()=>{gt();hn();O1();to();xxe="on",hxe="attachEvent",gxe="addEventListener",vxe="detachEvent",yxe="removeEventListener",y3="events",qw="visibilitychange",b3="pagehide",Sxe="pageshow",Exe="unload",Txe="beforeunload",Cxe=is("aiEvtPageHide"),Ixe=is("aiEvtPageShow"),IKe=/\.[\.]+/g,wKe=/[\.]+$/,RKe=1,Hw=Z4("events"),AKe=/^([^.]*)(?:\.(.+)|)/});var FW,Pxe=I(()=>{P4();FW=eo({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var zr=I(()=>{Zbe();e_e();pxe();PW();J4();_W();nW();Ed();mxe();gt();P4();Axe();Jh();Ua();gW();d3();pl();h3();Pxe();hW();O1();g3();EW();eg();n3();aW()});var kd,kxe,UW,T3,C3=I(()=>{kd="",kxe="https://browser.events.data.microsoft.com/OneCollector/1.0/",UW="version",T3="properties"});var BW,qW,V1,Dd,HW,Wn,xy,Pf,I3,w3,R3,A3,$w,P3=I(()=>{BW="initialize",qW="logger",V1="indexOf",Dd="timings",HW="pollInternalLogs",Wn="value",xy="kind",Pf="length",I3="processTelemetryStart",w3="handleField",R3="rmSanitizer",A3="rmFieldSanitizer",$w="canHandle"});function ko(t){return!(t===kd||xe(t))}function k3(t){if(t){var e=ia(t,"-");if(e>-1)return Nh(t,e)}return kd}function Mxe(){return GW===null&&(GW=!Rt(Uint8Array)&&!MKe()&&!Qh()),GW}function D3(t){return!!(t&&Rs(t)&&t>=1&&t<=4)}function N3(t,e,r){if(!e&&!ko(e)||typeof t!="string")return null;var n=typeof e;if(n==="string"||n==="number"||n==="boolean"||Ye(e))e={value:e};else if(n==="object"&&!Nxe.call(e,"value"))e={value:r?JSON.stringify(e):e};else if(xe(e[Wn])||e[Wn]===kd||!Lt(e[Wn])&&!Rs(e[Wn])&&!tl(e[Wn])&&!Ye(e[Wn]))return null;if(Ye(e[Wn])&&!zW(e[Wn]))return null;if(!xe(e[xy])){if(Ye(e[Wn])||!Ww(e[xy]))return null;e[Wn]=e[Wn].toString()}return e}function W1(t,e,r){var n=-1;if(!Rt(t))if(e>0&&(e===32?n=8192:e<=13&&(n=e<<5)),OKe(r))n===-1&&(n=0),n|=r;else{var i=LKe[Nd(t)]||-1;n!==-1&&i!==-1?n|=i:i===6&&(n=i)}return n}function Fxe(t,e,r){r===void 0&&(r=!0);var n;return t&&(n=t.get(e),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||kd}function Uxe(t){t===void 0&&(t="D");var e=Lw();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,kd)),e}function Sy(t,e,r,n,i){var o={},s=!1,a=0,c=arguments[Pf],u=arguments;for(tl(u[0])&&(s=u[0],a++);a<c;a++){var t=u[a];$e(t,function(d,p){s&&p&&Tn(p)?Ye(p)?(o[d]=o[d]||[],he(p,function(f,m){f&&Tn(f)?o[d][m]=Sy(!0,o[d][m],f):o[d][m]=f})):o[d]=Sy(!0,o[d],p):o[d]=p})}return o}function Ww(t){return t===0||t>0&&t<=13||t===32}function OKe(t){return t>=0&&t<=9}function MKe(){var t=Zi();if(!Rt(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[V1]("safari")>=0||e[V1]("firefox")>=0)&&e[V1]("chrome")<0)return!0}return!1}function zW(t){return t[Pf]>0}function Kw(t,e){var r=t;r[Dd]=r[Dd]||{},r[Dd][I3]=r[Dd][I3]||{},r[Dd][I3][e]=$a()}function Nd(t){var e=0;if(t!=null){var r=typeof t;r==="string"?e=1:r==="number"?e=2:r==="boolean"?e=3:r===sf&&(e=4,Ye(t)?(e=4096,t[Pf]>0&&(e|=Nd(t[0]))):Nxe.call(t,"value")&&(e=8192|Nd(t[Wn])))}return e}function L3(){return!!Yr("chrome")}function Bxe(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(c,u,l){try{c[u]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,DKe,n),r&&s(a,Dxe,r),a.open(t,e,!i),r&&s(a,Dxe,r),!i&&o&&s(a,NKe,o),a}function cg(t){return t>0}var kf,jW,$1,Nxe,DKe,Dxe,NKe,LKe,GW,Lxe,Oxe,$a,O3=I(()=>{zr();Ua();gt();C3();P3();jW="4.1.1",$1="1DS-Web-JS-"+jW,Nxe=$I.hasOwnProperty,DKe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Dxe="withCredentials",NKe="timeout",LKe=(kf={},kf[0]=0,kf[2]=6,kf[1]=1,kf[3]=7,kf[4098]=6,kf[4097]=1,kf[4099]=7,kf),GW=null,Lxe=Lh(),Oxe=Oh();$a=p1});function UKe(t){return t&&(!t.getProperty||!t.setProperty)&&si("Invalid property storage override passed."),!0}var FKe,qxe,Hxe=I(()=>{Ua();Po();zr();gt();C3();O3();P3();FKe=na({endpointUrl:kxe,propertyStorageOverride:{isVal:UKe}});qxe=function(t){Fa(e,t);function e(){var r=t.call(this)||this;return er(e,r,function(n,i){n[BW]=function(o,s,a,c){Ci(n,function(){return"AppInsightsCore.initialize"},function(){try{i[BW]($n(o,FKe,a||n[qW],!1).cfg,s,a,c)}catch(d){var u=n[qW],l=Ge(d);l[V1]("channels")!==-1&&(l+=`
 - Channels must be provided through config.channels only!`),Ne(u,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}},function(){return{config:o,extensions:s,logger:a,notificationManager:c}})},n.track=function(o){Ci(n,function(){return"AppInsightsCore.track"},function(){var s=o;if(s){s[Dd]=s[Dd]||{},s[Dd].trackStart=$a(),D3(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=$1;var c=s.baseData=s.baseData||{};c[T3]=c[T3]||{};var u=c[T3];u[UW]=u[UW]||n.pluginVersionString||kd}i.track(s)},function(){return{item:o}},!o.sync)},n[HW]=function(o){return i[HW](o||"InternalLog")}}),r}return e.__ieDyn=1,e}(Rf)});var Gxe,jxe,zxe,Vxe,$xe,Wxe=I(()=>{zr();Gxe=eo({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),jxe=eo({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),zxe=eo({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),Vxe=eo({Normal:1,Critical:2}),$xe=eo({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});var Kxe,Yxe=I(()=>{zr();gt();C3();O3();P3();Kxe=function(){function t(e){var r=this,n={},i=[],o=[];e&&o.push(e);function s(l,d){var p,f=n[l];if(f&&(p=f[d]),!p&&p!==null){if(Lt(l)&&Lt(d))if(o[Pf]>0){for(var m=0;m<o[Pf];m++)if(o[m][w3](l,d)){p={canHandle:!0,fieldHandler:o[m]};break}}else i[Pf]===0&&(p={canHandle:!0});if(!p&&p!==null){p=null;for(var m=0;m<i[Pf];m++)if(i[m][w3](l,d)){p={canHandle:!0,handler:i[m],fieldHandler:null};break}}f||(f=n[l]={}),f[d]=p}return p}r.clearCache=function(){n={}},r.addSanitizer=function(l){l&&(v4(i,l)||i.push(l),n={})},r.addFieldSanitizer=function(l){l&&(v4(o,l)||o.push(l),n={})},r[R3]=function(l){if(l){var d=Er(i,l);d!==-1&&(i.splice(d,1),n={}),he(i,function(p){p&&p[R3]&&p[R3](l)})}},r[A3]=function(l){if(l){var d=Er(o,l);d!==-1&&(o.splice(d,1),n={}),he(i,function(p){p&&p[A3]&&p[A3](l)})}},r.isEmpty=function(){return d1(i)+d1(o)===0},r[w3]=function(l,d){var p=s(l,d);return p?p[$w]:!1},r[Wn]=function(l,d,p,f){var m=s(l,d);if(m&&m[$w]){if(!m||!m[$w])return null;if(m.handler)return m.handler[Wn](l,d,p,f);if(!Lt(d)||xe(p)||p===kd)return null;var h=null,g=Nd(p);if((g&8192)===8192){var v=g&-8193;if(h=p,!ko(h[Wn])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=c(l,d,p):g===4&&(h=c(l,d,f?JSON.stringify(p):p));if(h)return a(m,l,d,g,h,f)}return null},r.property=function(l,d,p,f){var m=s(l,d);if(!m||!m[$w]||!Lt(d)||xe(p)||!ko(p[Wn]))return null;var h=Nd(p[Wn]);return h===0?null:a(m,l,d,h,p,f)};function a(l,d,p,f,m,h){if(l.handler)return l.handler.property(d,p,m,h);if(!xe(m[xy])){if((f&4096)===4096||!Ww(m[xy]))return null;m[Wn]=m[Wn].toString()}return u(l.fieldHandler,d,p,f,m)}function c(l,d,p){return ko(p)?{value:p}:null}function u(l,d,p,f,m){if(m&&l){var h=l.getSanitizer(d,p,f,m[xy],m.propertyType);if(h)if(f===4){var g={},v=m[Wn];$e(v,function(b,x){var S=d+"."+p;if(ko(x)){var T=c(S,b,x);T=u(l,S,b,Nd(x),T),T&&(g[b]=T[Wn])}}),m[Wn]=g}else{var y={path:d,name:p,type:f,prop:m,sanitizer:r};m=h.call(r,y)}}return m}}return t.getFieldType=Nd,t}()});var Qxe={};an(Qxe,{AppInsightsCore:()=>qxe,BaseTelemetryPlugin:()=>wf,DiagnosticLogger:()=>Zh,EventLatency:()=>jxe,EventPersistence:()=>Vxe,EventPropertyType:()=>zxe,EventsDiscardedReason:()=>sl,FullVersionString:()=>$1,InternalAppInsightsCore:()=>Rf,LoggingSeverity:()=>FW,MinChannelPriorty:()=>m$,NotificationManager:()=>kw,PerfEvent:()=>gy,PerfManager:()=>Nw,ProcessTelemetryContext:()=>wW,SenderPostManager:()=>_y,TraceLevel:()=>$xe,Undefined:()=>md,ValueKind:()=>Gxe,ValueSanitizer:()=>Kxe,Version:()=>jW,_InternalLogMessage:()=>dy,__getRegisteredEvents:()=>LW,_appendHeader:()=>L1,_getAllResponseHeaders:()=>xf,_logInternalMessage:()=>Y$,_throwInternal:()=>Ne,_warnToConsole:()=>sa,addEventHandler:()=>x3,addEventListeners:()=>E3,addPageHideEventListener:()=>j1,addPageShowEventListener:()=>z1,addPageUnloadEventListener:()=>Gw,areCookiesSupported:()=>U1,arrForEach:()=>he,arrIndexOf:()=>Er,arrMap:()=>gd,arrReduce:()=>l1,attachEvent:()=>OW,blockDynamicConversion:()=>Iw,convertAllHeadersToMap:()=>X4,cookieAvailable:()=>U1,createCookieMgr:()=>Tf,createDynamicConfig:()=>$n,createEnumStyle:()=>eo,createGuid:()=>Uxe,createProcessTelemetryContext:()=>aa,createTraceParent:()=>Ow,createUniqueNamespace:()=>is,createUnloadHandlerContainer:()=>by,dateNow:()=>ui,detachEvent:()=>MW,disallowsSameSiteNone:()=>l3,doPerf:()=>Ci,dumpObj:()=>Ge,eventOff:()=>Af,eventOn:()=>Pd,extend:()=>Sy,findW3cTraceParent:()=>Uw,forceDynamicConversion:()=>rW,formatErrorMessageXdr:()=>fy,formatErrorMessageXhr:()=>bf,formatTraceParent:()=>Fw,generateW3CId:()=>vy,getCommonSchemaMetaData:()=>W1,getConsole:()=>mw,getCookieValue:()=>Fxe,getCrypto:()=>hw,getDocument:()=>ai,getDynamicConfigHandler:()=>Cw,getExceptionName:()=>Cn,getFieldValueType:()=>Nd,getGlobal:()=>As,getGlobalInst:()=>Yr,getHistory:()=>tw,getIEVersion:()=>vw,getISOString:()=>_c,getJSON:()=>ns,getLocation:()=>ly,getMsCrypto:()=>gw,getNavigator:()=>Zi,getPerformance:()=>pf,getResponseText:()=>fl,getSetValue:()=>bw,getTenantId:()=>k3,getTime:()=>$a,getWindow:()=>ci,hasDocument:()=>Lh,hasHistory:()=>d4,hasJSON:()=>Sd,hasNavigator:()=>u1,hasOwnProperty:()=>Oi,hasWindow:()=>Oh,isArray:()=>Ye,isArrayValid:()=>zW,isBeaconsSupported:()=>Va,isBoolean:()=>tl,isChromium:()=>L3,isDate:()=>o1,isDocumentObjectAvailable:()=>Lxe,isError:()=>Rh,isFetchSupported:()=>vf,isFunction:()=>dt,isGreaterThanZero:()=>cg,isIE:()=>Xh,isLatency:()=>D3,isNotTruthy:()=>JL,isNullOrUndefined:()=>xe,isNumber:()=>Rs,isObject:()=>Tn,isReactNative:()=>Qh,isSampledFlag:()=>Mw,isString:()=>Lt,isTruthy:()=>ru,isTypeof:()=>QL,isUint8ArrayAvailable:()=>Mxe,isUndefined:()=>Rt,isValidSpanId:()=>Rd,isValidTraceId:()=>wd,isValidTraceParent:()=>q1,isValueAssigned:()=>ko,isValueKind:()=>Ww,isWindowObjectAvailable:()=>Oxe,isXhrSupported:()=>D1,mergeEvtNamespace:()=>Sc,newGuid:()=>Lw,newId:()=>Ew,normalizeJsName:()=>py,objDefineAccessors:()=>l4,objForEachKey:()=>$e,objFreeze:()=>hd,objKeys:()=>mo,objSeal:()=>r4,onConfigChange:()=>ro,openXhr:()=>Bxe,optimizeObject:()=>du,parseResponse:()=>my,parseTraceParent:()=>yy,perfNow:()=>p1,prependTransports:()=>_f,proxyAssign:()=>Q$,proxyFunctionAs:()=>yf,proxyFunctions:()=>xc,random32:()=>Sf,randomValue:()=>Sw,removeEventHandler:()=>S3,removeEventListeners:()=>ag,removePageHideEventListener:()=>zw,removePageShowEventListener:()=>Vw,removePageUnloadEventListener:()=>jw,safeGetCookieMgr:()=>mW,safeGetLogger:()=>dl,sanitizeProperty:()=>N3,setEnableEnvMocks:()=>z$,setProcessTelemetryTimings:()=>Kw,setValue:()=>lu,strContains:()=>Mi,strEndsWith:()=>Fh,strFunction:()=>Zx,strObject:()=>sf,strPrototype:()=>el,strStartsWith:()=>Jv,strTrim:()=>Dr,strUndefined:()=>md,throwError:()=>si,toISOString:()=>_c,useXDomainRequest:()=>yw});var Ey=I(()=>{Hxe();Wxe();Yxe();zr();O3()});var Ty,M3,F3,VW=I(()=>{Ty="REAL_TIME",M3="NEAR_REAL_TIME",F3="BEST_EFFORT"});var ml,U3,Xxe,$W,Jxe,Zxe,e1e,WW,KW,B3,t1e,r1e,n1e,q3,YW,H3,G3,j3,Yw,QW,XW,i1e,K1,JW,z3,Qw=I(()=>{ml="",U3="drop",Xxe="send",$W="requeue",Jxe="rspFail",Zxe="oth",e1e="no-cache, no-store",WW="application/x-json-stream",KW="cache-control",B3="content-type",t1e="kill-tokens",r1e="kill-duration",n1e="time-delta-millis",q3="client-version",YW="client-id",H3="time-delta-to-apply-millis",G3="upload-time",j3="apikey",Yw="AuthMsaDeviceTicket",QW="WebAuthToken",XW="AuthXToken",i1e="NoResponseBody",K1="msfpc",JW="trace",z3="user"});var Xw,V3,$3,W3,Jw,Vt,Ld,fu,Fi,Od,Do,Md,Cy,K3,ug,Y3,Iy,Q3,X3,o1e,ZW,eK,s1e,a1e,J3,tK,rK,c1e,u1e,nK,iK,l1e,Z3,eO,oK,wy,Y1,sK,Ds,Wa,Zw,eR,Q1,tO,tR,d1e,rO,nO,X1,aK,rR,iO,oO,J1,sO,aO,cO,nR,p1e,f1e,cK,uK,m1e,h1e,g1e,uO,iR,lg,Ry,Z1=I(()=>{Xw="allowRequestSending",V3="firstRequestSent",$3="shouldAddClockSkewHeaders",W3="getClockSkewHeaderValue",Jw="setClockSkew",Vt="length",Ld="concat",fu="iKey",Fi="count",Od="events",Do="push",Md="split",Cy="splice",K3="toLowerCase",ug="hdrs",Y3="useHdrs",Iy="initialize",Q3="setTimeoutOverride",X3="clearTimeoutOverride",o1e="payloadPreprocessor",ZW="overrideEndpointUrl",eK="avoidOptions",s1e="disableEventTimings",a1e="stringifyObjects",J3="enableCompoundKey",tK="disableXhrSync",rK="disableFetchKeepAlive",c1e="addNoResponse",u1e="excludeCsMetaData",nK="useSendBeacon",iK="alwaysUseXhrOverride",l1e="unloadTransports",Z3="serializeOfflineEvt",eO="getOfflineRequestDetails",oK="createPayload",wy="headers",Y1="_thePayload",sK="urlString",Ds="batches",Wa="sendType",Zw="addHeader",eR="canSendRequest",Q1="sendQueuedRequests",tO="isCompletelyIdle",tR="setUnloading",d1e="isTenantKilled",rO="sendSynchronousBatch",nO="_transport",X1="getWParam",aK="isBeacon",rR="timings",iO="isTeardown",oO="isSync",J1="data",sO="_sendReason",aO="setKillSwitchTenants",cO="_backOffTransmission",nR="identifier",p1e="disableOptimizeObj",f1e="ignoreMc1Ms0CookieProcessing",cK="eventsLimitInMem",uK="autoFlushEventsLimit",m1e="disableAutoBatchFlushLimit",h1e="overrideInstrumentationKey",g1e="disableTelemetry",uO="baseData",iR="sendAttempt",lg="latency",Ry="sync"});function y1e(t){var e=(t.ext||{}).intweb;return e&&ko(e[K1])?e[K1]:null}function v1e(t){for(var e=null,r=0;e===null&&r<t[Vt];r++)e=y1e(t[r]);return e}var eS,lK=I(()=>{Ey();Qw();Z1();eS=function(){function t(e,r){var n=r?[][Ld](r):[],i=this,o=v1e(n);i[fu]=function(){return e},i.Msfpc=function(){return o||ml},i[Fi]=function(){return n[Vt]},i[Od]=function(){return n},i.addEvent=function(s){return s?(n[Do](s),o||(o=y1e(s)),!0):!1},i[Md]=function(s,a){var c;if(s<n[Vt]){var u=n[Vt]-s;xe(a)||(u=a<u?a:u),c=n[Cy](s,u),o=v1e(n)}return new t(e,c)}}return t.create=function(e,r){return new t(e,r)},t}()});var b1e,_1e=I(()=>{Po();Z1();b1e=function(){function t(){var e=!0,r=!0,n=!0,i="use-collector-delta",o=!1;er(t,this,function(s){s[Xw]=function(){return e},s[V3]=function(){n&&(n=!1,o||(e=!1))},s[$3]=function(){return r},s[W3]=function(){return i},s[Jw]=function(a){o||(a?(i=a,r=!0,o=!0):r=!1,e=!0)}})}return t.__ieDyn=1,t}()});var BKe,x1e,S1e=I(()=>{Po();Ey();Z1();BKe=1e3,x1e=function(){function t(){var e={};function r(n){var i=[];return n&&he(n,function(o){i[Do](Dr(o))}),i}er(t,this,function(n){n[aO]=function(i,o){if(i&&o)try{var s=r(i[Md](","));if(o==="this-request-only")return s;for(var a=parseInt(o,10)*BKe,c=0;c<s[Vt];++c)e[s[c]]=ui()+a}catch{return[]}return[]},n[d1e]=function(i){var o=e,s=Dr(i);return o[s]!==void 0&&o[s]>ui()?!0:(delete o[s],!1)}})}return t.__ieDyn=1,t}()});function T1e(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function lO(t){var e=0,r=E1e*qKe,n=E1e*HKe,i=Math.floor(Math.random()*(n-r))+r;return e=Math.pow(2,t)*i,Math.min(e,GKe)}var qKe,HKe,E1e,GKe,dK=I(()=>{qKe=.8,HKe=1.2,E1e=3e3,GKe=6e5});function WKe(t,e,r,n,i){if(i&&e){var o=t(i.value,i.kind,i.propertyType);if(o>-1){var s=e[C1e];s||(s=e[C1e]={f:{}});var a=s[dO];if(a||(a=s[dO]={}),r)for(var c=0;c<r.length;c++){var u=r[c];a[u]||(a[u]={f:{}});var l=a[u][dO];l||(l=a[u][dO]={}),a=l}a=a[n]={},Ye(i.value)?a.a={t:o}:a.t=o}}}var jKe,zKe,I1e,w1e,VKe,C1e,dO,$Ke,R1e,A1e=I(()=>{Po();Ey();lK();Qw();gt();jKe=20,zKe=3984588,I1e=65e3,w1e=2e6,VKe=Math.min(w1e,I1e),C1e="metadata",dO="f",$Ke=/\./,R1e=function(){function t(e,r,n,i,o,s){var a="data",c="baseData",u="ext",l=!!i,d=!0,p=r,f={},m=!!s,h=o||W1;er(t,this,function(g){g.createPayload=function(b,x,S,T,L,M){return{apiKeys:[],payloadBlob:ml,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:b,isTeardown:x,isSync:S,isBeacon:T,sendType:M,sendReason:L}},g.appendPayload=function(b,x,S){var T=b&&x&&!b.overflow;return T&&Ci(e,function(){return"Serializer:appendPayload"},function(){for(var L=x.events(),M=b.payloadBlob,j=b.numEvents,N=!1,J=[],X=[],D=b.isBeacon,E=D?I1e:zKe,A=D?VKe:w1e,F=0,O=0;F<L.length;){var Z=L[F];if(Z){if(j>=S){b.overflow=x.split(F);break}var $=g.getEventBlob(Z);if($&&$.length<=A){var z=$.length,se=M.length;if(se+z>E){b.overflow=x.split(F);break}M&&(M+=`
`),M+=$,O++,O>jKe&&(nl(M,0,1),O=0),N=!0,j++}else $?J.push(Z):X.push(Z),L.splice(F,1),F--}F++}if(J.length>0&&b.sizeExceed.push(eS.create(x.iKey(),J)),X.length>0&&b.failedEvts.push(eS.create(x.iKey(),X)),N){b.batches.push(x),b.payloadBlob=M,b.numEvents=j;var He=x.iKey();Er(b.apiKeys,He)===-1&&b.apiKeys.push(He)}},function(){return{payload:b,theBatch:{iKey:x.iKey(),evts:x.events()},max:S}}),T},g.getEventBlob=function(b){try{return Ci(e,function(){return"Serializer.getEventBlob"},function(){var x={};x.name=b.name,x.time=b.time,x.ver=b.ver,x.iKey="o:"+k3(b.iKey);var S={},T;m||(T=function(N,J,X){WKe(h,S,N,J,X)});var L=b[u];L&&(x[u]=S,$e(L,function(N,J){var X=S[N]={};y(J,X,"ext."+N,!0,null,null,!0)}));var M=x[a]={};M.baseType=b.baseType;var j=M[c]={};return y(b.baseData,j,c,!1,[c],T,d),y(b.data,M,a,!1,[],T,d),JSON.stringify(x)},function(){return{item:b}})}catch{return null}};function v(b,x){var S=f[b];return S===void 0&&(b.length>=7&&(S=Jv(b,"ext.metadata")||Jv(b,"ext.web")),f[b]=S),S}function y(b,x,S,T,L,M,j){$e(b,function(N,J){var X=null;if(J||ko(J)){var D=S,E=N,A=L,F=x;if(l&&!T&&$Ke.test(N)){var O=N.split("."),Z=O.length;if(Z>1){A&&(A=A.slice());for(var $=0;$<Z-1;$++){var z=O[$];F=F[z]=F[z]||{},D+="."+z,A&&A.push(z)}E=O[Z-1]}}var se=T&&v(D,E);if(!se&&p&&p.handleField(D,E)?X=p.value(D,E,J,n):X=N3(E,J,n),X){var He=X.value;if(F[E]=He,M&&M(A,E,X),j&&typeof He=="object"&&!Ye(He)){var ee=A;ee&&(ee=ee.slice(),ee.push(E)),y(J,He,D+"."+E,T,ee,M,j)}}}})}})}return t.__ieDyn=1,t}()});function tS(t,e){return{set:function(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e$([t,e],r,n,i)}}}var pK=I(()=>{gt()});function Py(t,e,r){mK[t]=e,r!==!1&&(hK[e]=t)}function P1e(t,e){var r=!1;if(t&&e){var n=mo(t);if(n&&n[Vt]>0)for(var i=e[K3](),o=0;o<n[Vt];o++){var s=n[o];if(s&&Oi(e,s)&&s[K3]()===i){r=!0;break}}}return r}function rS(t,e,r,n){e&&r&&r[Vt]>0&&(n&&mK[e]?(t[ug][mK[e]]=r,t[Y3]=!0):t.url+="&"+e+"="+r)}function XKe(t,e,r){for(var n=0;n<t[Vt];n++)if(t[n].name===e){t[n].value=r;return}t[Do]({name:e,value:r})}function JKe(t,e){for(var r=0;r<t[Vt];r++)if(t[r].name===e){t[Cy](r,1);return}}var Ay,fK,KKe,YKe,QKe,mK,hK,k1e,D1e=I(()=>{Po();Ey();gt();_1e();Qw();S1e();dK();A1e();pK();Z1();fK="sendAttempt",KKe="&"+i1e+"=true",YKe="?cors=true&"+B3[K3]()+"="+WW,QKe=(Ay={},Ay[1]=$W,Ay[100]=$W,Ay[200]="sent",Ay[8004]=U3,Ay[8003]=U3,Ay),mK={},hK={};Py(Yw,Yw,!1);Py(q3,q3);Py(YW,"Client-Id");Py(j3,j3);Py(H3,H3);Py(G3,G3);Py(XW,XW);k1e=function(){function t(e,r,n,i){var o,s,a,c,u=!1,l,d,p,f,m,h,g,v,y,b,x,S,T,L,M,j,N,J,X,D,E,A,F,O,Z,$,z;er(t,this,function(se){Ct();var He=!0;se[Iy]=function(Y,we,Fe){O||(m=we,S=we.getCookieMgr(),d=Fe,p=d.diagLog(),ou(D,ro(Y,function(at){var H,ne=at.cfg,pe=at.cfg.extensionConfig[Fe.identifier];Z=tS(pe[Q3],pe[X3]),ko(ne.anonCookieName)?XKe(g,"anoncknm",ne.anonCookieName):JKe(g,"anoncknm"),E=pe[o1e],A=pe.payloadListener;var _e=pe.httpXHROverride,q=pe[ZW]?pe[ZW]:ne.endpointUrl;o=q+YKe,L=Rt(pe[eK])?!0:!pe[eK],x=!pe[s1e];var Q=pe.valueSanitizer,ce=pe[a1e],Se=!!ne[J3];Rt(pe[J3])||(Se=!!pe[J3]),M=pe.xhrTimeout,j=!!pe[tK],N=!!pe[rK],X=pe[c1e]!==!1,$=!!pe[u1e],we.getPlugin("LocalStorage")&&(N=!0),u=!Qh(),b=new R1e(m,Q,ce,Se,W1,$),xe(pe[nK])||(u=!!pe[nK]);var We=ft();z?z.SetConfig(We):(z=new _y,z[Iy](We,p));var Pe=_e,cr=pe[iK]?_e:null,br=pe[iK]?_e:null,Hi=[3,2];if(!_e){h=!1;var ec=[];Qh()?(ec=[2,1],Hi=[2,1,3]):ec=[1,2,3],ec=_f(ec,pe.transports),_e=ee(ec,!1),_e||sa(p,"No available transport to send events"),Pe=ee(ec,!0)}cr||(Hi=_f(Hi,pe[l1e]),cr=ee(Hi,!0)),J=!h&&(u&&Va()||!N&&vf(!0)),f=(H={},H[0]=_e,H[1]=Pe||ee([1,2,3],!0),H[2]=cr||Pe||ee([1],!0),H[3]=br||ee([2,3],!0)||Pe||ee([1],!0),H)})),O=!0)},se.addResponseHandler=function(Y){return F[Do](Y),{rm:function(){var we=F.indexOf(Y);we>=0&&F[Cy](we,1)}}},se[Z3]=function(Y){try{if(b)return b.getEventBlob(Y)}catch{}return ml},se[eO]=function(){try{var Y=b&&b[oK](0,!1,!1,!1,1,0);return An(Y,L)}catch{}return null};function ee(Y,we){try{return z&&z.getSenderInst(Y,we)}catch{}return null}se._getDbgPlgTargets=function(){return[f[0],s,b,f]};function ft(){try{var Y={xdrOnComplete:ze,fetchOnComplete:mr,xhrOnComplete:me,beaconOnRetry:U},we={enableSendPromise:!1,isOneDs:!0,disableCredentials:!He,disableXhr:!1,disableBeacon:!u,disableBeaconSync:!u,disableFetchKeepAlive:N,timeWrapper:Z,addNoResponse:X,senderOnCompleteCallBack:Y};return we}catch{}return null}function ze(Y,we,Fe){var at=fl(Y);Qe(we,200,{},at),Nl(at)}function Ct(){var Y;o=null,s=new x1e,a=!1,c=new b1e,u=!1,l=0,d=null,p=null,f=null,m=null,h=!0,g=[],v={},y=[],b=null,x=!1,S=null,T=!1,L=!1,M=Y,j=Y,N=Y,J=Y,X=Y,D=[],E=Y,A=Y,F=[],O=!1,Z=tS(),$=!1,z=null}function mr(Y,we,Fe,at){var H=function(_e,q,Q){Qe(we,_e,q,Q),Nl(Q)},ne={},pe=Y[wy];pe&&pe.forEach(function(_e,q){ne[q]=_e}),H(Y.status,ne,Fe||ml)}function me(Y,we,Fe){var at=fl(Y);Qe(we,Y.status,xf(Y,!0),at),Nl(at)}function Qe(Y,we,Fe,at){try{Y(we,Fe,at)}catch(H){Ne(p,2,518,Ge(H))}}function U(Y,we,Fe){var at=Y,H=200,ne=at[Y1],pe=Y[sK]+(X?KKe:ml);try{var _e=Zi();if(ne){var q=!!m.getPlugin("LocalStorage"),Q=[],ce=[];he(ne[Ds],function(Se){if(Q&&Se&&Se[Fi]()>0)for(var We=Se[Od](),Pe=0;Pe<We[Vt];Pe++)if(_e.sendBeacon(pe,b.getEventBlob(We[Pe])))ce[Do](Se[Pe]);else{Q[Do](Se[Md](Pe));break}else Q[Do](Se[Md](0))}),ce[Vt]>0&&(ne.sentEvts=ce),q||ya(Q,8003,ne[Wa],!0)}else H=0}catch(Se){sa(p,"Failed to send telemetry using sendBeacon API. Ex:"+Ge(Se)),H=0}finally{Qe(we,H,{},ml)}}function ae(Y){return Y===2||Y===3}function le(Y){return T&&ae(Y)&&(Y=2),Y}se[Zw]=function(Y,we){v[Y]=we},se.removeHeader=function(Y){delete v[Y]},se[eR]=function(){return Ie()&&c[Xw]()},se[Q1]=function(Y,we){Rt(Y)&&(Y=0),T&&(Y=le(Y),we=2),et(y,Y,0)&&Jr(be(),0,!1,Y,we||0)},se[tO]=function(){return!a&&l===0&&y[Vt]===0},se[tR]=function(Y){T=Y},se.addBatch=function(Y){if(Y&&Y[Fi]()>0){if(s.isTenantKilled(Y[fu]()))return!1;y[Do](Y)}return!0},se.teardown=function(){y[Vt]>0&&Jr(be(),0,!0,2,2),he(D,function(Y){Y&&Y.rm&&Y.rm()}),D=[]},se.pause=function(){a=!0},se.resume=function(){a=!1,se[Q1](0,4)},se[rO]=function(Y,we,Fe){Y&&Y[Fi]()>0&&(xe(we)&&(we=1),T&&(we=le(we),Fe=2),Jr([Y],0,!1,we,Fe||0))};function Ie(){return!a&&l<r}function be(){var Y=y;return y=[],Y}function et(Y,we,Fe){var at=!1;return Y&&Y[Vt]>0&&!a&&f[we]&&b&&(at=we!==0||Ie()&&(Fe>0||c[Xw]())),at}function _t(Y){var we={};return Y&&he(Y,function(Fe,at){we[at]={iKey:Fe[fu](),evts:Fe[Od]()}}),we}function Jr(Y,we,Fe,at,H){if(!(!Y||Y[Vt]===0)){if(a){ya(Y,1,at);return}at=le(at);try{var ne=Y,pe=at!==0;Ci(m,function(){return"HttpManager:_sendBatches"},function(_e){_e&&(Y=Y.slice(0));for(var q=[],Q=null,ce=$a(),Se=f[at]||(pe?f[1]:f[0]),We=Se&&Se[nO],Pe=J&&(T||ae(at)||We===3||Se._isSync&&We===2);et(Y,at,we);){var cr=Y.shift();cr&&cr[Fi]()>0&&(s.isTenantKilled(cr[fu]())?q[Do](cr):(Q=Q||b[oK](we,Fe,pe,Pe,H,at),b.appendPayload(Q,cr,e)?Q.overflow!==null&&(Y=[Q.overflow][Ld](Y),Q.overflow=null,js(Q,ce,$a(),H),ce=$a(),Q=null):(js(Q,ce,$a(),H),ce=$a(),Y=[cr][Ld](Y),Q=null)))}Q&&js(Q,ce,$a(),H),Y[Vt]>0&&(y=Y[Ld](y)),ya(q,8004,at)},function(){return{batches:_t(ne),retryCount:we,isTeardown:Fe,isSynchronous:pe,sendReason:H,useSendBeacon:ae(at),sendType:at}},!pe)}catch(_e){Ne(p,2,48,"Unexpected Exception sending batch: "+Ge(_e))}}}function An(Y,we){var Fe={url:o,hdrs:{},useHdrs:!1};we?(Fe[ug]=Sy(Fe[ug],v),Fe.useHdrs=mo(Fe.hdrs)[Vt]>0):$e(v,function(_e,q){hK[_e]?rS(Fe,hK[_e],q,!1):(Fe[ug][_e]=q,Fe[Y3]=!0)}),rS(Fe,YW,"NO_AUTH",we),rS(Fe,q3,$1,we);var at=ml;he(Y.apiKeys,function(_e){at[Vt]>0&&(at+=","),at+=_e}),rS(Fe,j3,at,we),rS(Fe,G3,ui().toString(),we);var H=RT(Y);if(ko(H)&&(Fe.url+="&ext.intweb.msfpc="+H),c[$3]()&&rS(Fe,H3,c[W3](),we),m[X1]){var ne=m[X1]();ne>=0&&(Fe.url+="&w="+ne)}for(var pe=0;pe<g[Vt];pe++)Fe.url+="&"+g[pe].name+"="+g[pe].value;return Fe}function pi(Y,we,Fe){Y[we]=Y[we]||{},Y[we][d.identifier]=Fe}function js(Y,we,Fe,at){if(Y&&Y.payloadBlob&&Y.payloadBlob[Vt]>0){var H=!!E,ne=f[Y.sendType];!ae(Y[Wa])&&Y[aK]&&Y.sendReason===2&&(ne=f[2]||f[3]||ne);var pe=L;(Y.isBeacon||ne[nO]===3)&&(pe=!1);var _e=An(Y,pe);pe=pe||_e[Y3];var q=$a();Ci(m,function(){return"HttpManager:_doPayloadSend"},function(){for(var Q=0;Q<Y.batches[Vt];Q++)for(var ce=Y[Ds][Q],Se=ce[Od](),We=0;We<Se[Vt];We++){var Pe=Se[We];if(x){var cr=Pe[rR]=Pe[rR]||{};pi(cr,"sendEventStart",q),pi(cr,"serializationStart",we),pi(cr,"serializationCompleted",Fe)}Pe[fK]>0?Pe[fK]++:Pe[fK]=1}ya(Y[Ds],1e3+(at||0),Y[Wa],!0);var br={data:Y.payloadBlob,urlString:_e.url,headers:_e[ug],_thePayload:Y,_sendReason:at,timeout:M,disableXhrSync:j,disableFetchKeepAlive:N};pe&&(P1e(br[wy],KW)||(br[wy][KW]=e1e),P1e(br[wy],B3)||(br[wy][B3]=WW));var Hi=null;ne&&(Hi=function(ec){c[V3]();var fm=function(mm,O0){Ub(mm,O0,Y,at)},zs=Y[iO]||Y[oO];try{ne.sendPOST(ec,fm,zs),A&&A(br,ec,zs,Y[aK])}catch(mm){sa(p,"Unexpected exception sending payload. Ex:"+Ge(mm)),Qe(fm,0,{})}}),Ci(m,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Hi)if(Y[Wa]===0&&l++,H&&!Y.isBeacon&&ne[nO]!==3){var ec={data:br[J1],urlString:br[sK],headers:Sy({},br[wy]),timeout:br.timeout,disableXhrSync:br[tK],disableFetchKeepAlive:br[rK]},fm=!1;Ci(m,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{E(ec,function(zs){fm=!0,!h&&!zs[Y1]&&(zs[Y1]=zs[Y1]||br[Y1],zs[sO]=zs[sO]||br[sO]),Hi(zs)},Y.isSync||Y[iO])}catch{fm||Hi(br)}})}else Hi(br)})},function(){return{thePayload:Y,serializationStart:we,serializationCompleted:Fe,sendReason:at}},Y[oO])}Y.sizeExceed&&Y.sizeExceed[Vt]>0&&ya(Y.sizeExceed,8003,Y[Wa]),Y.failedEvts&&Y.failedEvts[Vt]>0&&ya(Y.failedEvts,8002,Y[Wa])}function _p(Y,we){x&&he(Y,function(Fe){var at=Fe[rR]=Fe[rR]||{};pi(at,"sendEventCompleted",we)})}function Ub(Y,we,Fe,at){var H=9e3,ne=null,pe=!1,_e=!1;try{var q=!0;if(typeof Y!==md){if(we){c[Jw](we[n1e]);var Q=we[r1e]||we["kill-duration-seconds"];he(s[aO](we[t1e],Q),function(Se){he(Fe[Ds],function(We){if(We[fu]()===Se){ne=ne||[];var Pe=We[Md](0);Fe.numEvents-=Pe[Fi](),ne[Do](Pe)}})})}if(Y==200||Y==204){H=200;return}(!T1e(Y)||Fe.numEvents<=0)&&(q=!1),H=9e3+Y%1e3}if(q){H=100;var ce=Fe.retryCnt;Fe[Wa]===0&&(ce<n?(pe=!0,xp(function(){Fe[Wa]===0&&l--,Jr(Fe[Ds],ce+1,Fe[iO],T?2:Fe[Wa],5)},T,lO(ce))):(_e=!0,T&&(H=8001)))}}finally{pe||(c[Jw](),L0(Fe,H,at,_e)),ya(ne,8004,Fe[Wa])}}function L0(Y,we,Fe,at){try{at&&d[cO]();var H=Y[Ds];we===200&&(H=Y.sentEvts||Y[Ds],!at&&!Y[oO]&&d._clearBackOff(),Bb(H)),ya(H,we,Y[Wa],!0)}finally{Y[Wa]===0&&(l--,Fe!==5&&se.sendQueuedRequests(Y[Wa],Fe))}}function Bb(Y){if(x){var we=$a();he(Y,function(Fe){Fe&&Fe[Fi]()>0&&_p(Fe[Od](),we)})}}function xp(Y,we,Fe){we?Y():Z.set(Y,Fe)}function RT(Y){for(var we=0;we<Y.batches[Vt];we++){var Fe=Y[Ds][we].Msfpc();if(Fe)return encodeURIComponent(Fe)}return ml}function Nl(Y){var we=F;try{for(var Fe=0;Fe<we[Vt];Fe++)try{we[Fe](Y)}catch(H){Ne(p,1,519,"Response handler failed: "+H)}if(Y){var at=JSON.parse(Y);ko(at.webResult)&&ko(at.webResult[K1])&&S.set("MSFPC",at.webResult[K1],365*86400)}}catch{}}function ya(Y,we,Fe,at){if(Y&&Y[Vt]>0&&i){var H=i[pm(we)];if(H){var ne=Fe!==0;Ci(m,function(){return"HttpManager:_sendBatchesNotification"},function(){xp(function(){try{H.call(i,Y,we,ne,Fe)}catch(pe){Ne(p,1,74,"send request notification failed: "+pe)}},at||ne,0)},function(){return{batches:_t(Y),reason:we,isSync:ne,sendSync:at,sendType:Fe}},!ne)}}}function pm(Y){var we=QKe[Y];return ko(we)||(we=Zxe,Y>=9e3&&Y<=9999?we=Jxe:Y>=8e3&&Y<=8999?we=U3:Y>=1e3&&Y<=1999&&(we=Xxe)),we}})}return t.__ieDyn=1,t}()});function iYe(t){return t&&t.sendPOST}var ZKe,N1e,eYe,M1e,F1e,tYe,L1e,rYe,gK,ky,O1e,vo,nYe,U1e,B1e=I(()=>{Ua();Po();Ey();w1();gt();VW();lK();D1e();Qw();dK();pK();Z1();ZKe=.25,N1e=500,eYe=20,M1e=6,F1e=2,tYe=4,L1e=2,rYe=1,gK=1e4,ky="eventsDiscarded",O1e="",vo=void 0,nYe=na({eventsLimitInMem:{isVal:cg,v:gK},immediateEventLimit:{isVal:cg,v:500},autoFlushEventsLimit:{isVal:cg,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:iYe,v:vo},overrideInstrumentationKey:vo,overrideEndpointUrl:vo,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:vo,clearTimeoutOverride:vo,payloadPreprocessor:vo,payloadListener:vo,disableEventTimings:vo,valueSanitizer:vo,stringifyObjects:vo,enableCompoundKey:vo,disableOptimizeObj:!1,transports:vo,unloadTransports:vo,useSendBeacon:vo,disableFetchKeepAlive:vo,avoidOptions:!1,xhrTimeout:vo,disableXhrSync:vo,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Rs,v:M1e},maxUnloadEventRetryAttempts:{isVal:Rs,v:F1e},addNoResponse:vo,excludeCsMetaData:vo});U1e=function(t){Fa(e,t);function e(){var r=t.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="4.1.1";var n,i=!1,o=[],s,a=!1,c=0,u,l=0,d,p={},f=Ty,m,h,g,v,y,b,x,S,T,L,M,j,N,J,X,D,E,A,F,O,Z,$;return er(e,r,function(z,se){Ie(),z._getDbgPlgTargets=function(){return[y,n]},z[Iy]=function(q,Q,ce){Ci(Q,function(){return"PostChannel:initialize"},function(){se[Iy](q,Q,ce),F=Q.getNotifyMgr();try{X=Sc(is(z[nR]),Q.evtNamespace&&Q.evtNamespace()),z._addHook(ro(q,function(Se){var We=Se.cfg,Pe=aa(null,We,Q);n=Pe.getExtCfg(z[nR],nYe),D=tS(n[Q3],n[X3]),M=!n[p1e]&&L3(),E=n[f1e],ee(Q),d=n[cK],u=n.immediateEventLimit,x=n[uK],N=n.maxEventRetryAttempts,J=n.maxUnloadEventRetryAttempts,A=n[m1e],_e(),Z=n[h1e],$=!!n[g1e],O&&He();var cr=We.disablePageUnloadEvents||[];O=Gw(Ct,cr,X),O=j1(Ct,cr,X)||O,O=z1(mr,We.disablePageShowEvents,X)||O})),y[Iy](q,z.core,z)}catch(Se){throw z.setInitialized(!1),Se}},function(){return{theConfig:q,core:Q,extensions:ce}})},z.processTelemetry=function(q,Q){Kw(q,z[nR]),Q=Q||z._getTelCtx(Q);var ce=q;!$&&!i&&(Z&&(ce[fu]=Z),Qe(ce,!0),j?_t(2,2):le()),z.processNext(ce,Q)},z.getOfflineSupport=function(){try{var q=y&&y[eO]();if(q)return{getUrl:function(){return q.url},serialize:ze,batch:ft,shouldProcess:function(Q){return!$},createPayload:function(Q){return{urlString:q.url,headers:q[ug],data:Q}}}}catch{}return null},z._doTeardown=function(q,Q){_t(2,2),i=!0,y.teardown(),He(),Ie()};function He(){jw(null,X),zw(null,X),Vw(null,X)}function ee(q){var Q=q[X1];q[X1]=function(){var ce=0;return E&&(ce=ce|2),ce|Q.call(q)}}function ft(q){var Q=O1e;return q&&q[Vt]&&he(q,function(ce){Q&&(Q+=`
`),Q+=ce}),Q}function ze(q){var Q=O1e;try{me(q),Q=y[Z3](q)}catch{}return Q}function Ct(q){var Q=q||ci().event;Q.type!=="beforeunload"&&(j=!0,y[tR](j)),_t(2,2)}function mr(q){j=!1,y[tR](j)}function me(q){q.ext&&q.ext[JW]&&delete q.ext[JW],q.ext&&q.ext[z3]&&q.ext[z3].id&&delete q.ext[z3].id,M&&(q.ext=du(q.ext),q[uO]&&(q[uO]=du(q[uO])),q[J1]&&(q[J1]=du(q[J1])))}function Qe(q,Q){if(q[iR]||(q[iR]=0),q[lg]||(q[lg]=1),me(q),q[Ry]){if(g||a)q[lg]=3,q[Ry]=!1;else if(y){M&&(q=du(q)),y[rO](eS.create(q[fu],[q]),q[Ry]===!0?1:q[Ry],3);return}}var ce=q[lg],Se=l,We=d;ce===4&&(Se=c,We=u);var Pe=!1;if(Se<We)Pe=!js(q,Q);else{var cr=1,br=eYe;ce===4&&(cr=4,br=1),Pe=!0,_p(q[fu],q[lg],cr,br)&&(Pe=!js(q,Q))}Pe&&Y(ky,[q],sl.QueueFull)}z.setEventQueueLimits=function(q,Q){n[cK]=d=cg(q)?q:gK,n[uK]=x=cg(Q)?Q:0,_e();var ce=l>q;if(!ce&&S>0)for(var Se=1;!ce&&Se<=3;Se++){var We=b[Se];We&&We[Ds]&&he(We[Ds],function(Pe){Pe&&Pe[Fi]()>=S&&(ce=!0)})}pi(!0,ce)},z.pause=function(){et(),a=!0,y.pause()},z.resume=function(){a=!1,y.resume(),le()},z._loadTransmitProfiles=function(q){RT(),$e(q,function(Q,ce){var Se=ce[Vt];if(Se>=2){var We=Se>2?ce[2]:0;if(ce[Cy](0,Se-2),ce[1]<0&&(ce[0]=-1),ce[1]>0&&ce[0]>0){var Pe=ce[0]/ce[1];ce[0]=Math.ceil(Pe)*ce[1]}We>=0&&ce[1]>=0&&We>ce[1]&&(We=ce[1]),ce[Do](We),p[Q]=ce}})},z.flush=function(q,Q,ce){q===void 0&&(q=!0);var Se;if(!a)if(ce=ce||1,q)Q||(Se=oa(function(Pe){Q=Pe})),s==null?(et(),L0(1,0,ce),s=be(function(){s=null,Bb(Q,ce)},0)):o[Do](Q);else{var We=et();U(1,1,ce),Q&&Q(),We&&le()}return Se},z.setMsaAuthTicket=function(q){y[Zw](Yw,q)},z.setAuthPluginHeader=function(q){y[Zw](QW,q)},z.removeAuthPluginHeader=function(){y.removeHeader(QW)},z.hasEvents=ae,z._setTransmitProfile=function(q){f!==q&&p[q]!==void 0&&(et(),f=q,le())},xc(z,function(){return y},["addResponseHandler"]);function U(q,Q,ce){var Se=L0(q,Q,ce);return y[Q1](Q,ce),Se}function ae(){return l>0}function le(){if(T>=0&&L0(T,0,L)&&y[Q1](0,L),c>0&&!h&&!a){var q=p[f][2];q>=0&&(h=be(function(){h=null,U(4,0,1),le()},q))}var Q=p[f][1];!m&&!s&&Q>=0&&!a&&(ae()?m=be(function(){m=null,U(v===0?3:1,0,1),v++,v%=2,le()},Q):v=0)}z[cO]=function(){g<tYe&&(g++,et(),le())},z._clearBackOff=function(){g&&(g=0,et(),le())};function Ie(){n=null,i=!1,o=[],s=null,a=!1,c=0,u=500,l=0,d=gK,p={},f=Ty,m=null,h=null,g=0,v=0,b={},x=0,O=!1,S=0,T=-1,L=null,M=!0,j=!1,N=M1e,J=F1e,X=null,Z=null,$=!1,D=tS(),y=new k1e(N1e,L1e,rYe,{requeue:ya,send:Fe,sent:at,drop:H,rspFail:ne,oth:pe}),Nl(),Jr(),_e()}function be(q,Q){Q===0&&g&&(Q=1);var ce=1e3;return g&&(ce=lO(g-1)),D.set(q,Q*ce)}function et(){return m!==null?(m.cancel(),m=null,v=0,!0):!1}function _t(q,Q){et(),s&&(s.cancel(),s=null),a||U(1,q,Q)}function Jr(){b[4]={batches:[],iKeyMap:{}},b[3]={batches:[],iKeyMap:{}},b[2]={batches:[],iKeyMap:{}},b[1]={batches:[],iKeyMap:{}}}function An(q,Q,ce){var Se=b[Q];Se||(Q=1,Se=b[Q]);var We=Se.iKeyMap[q];return!We&&ce&&(We=eS.create(q),Se.batches[Do](We),Se.iKeyMap[q]=We),We}function pi(q,Q){y[eR]()&&!g&&(x>0&&l>x&&(Q=!0),Q&&s==null&&z.flush(q,function(){},20))}function js(q,Q){M&&(q=du(q));var ce=q[lg],Se=An(q[fu],ce,!0);return Se.addEvent(q)?(ce!==4?(l++,Q&&q[iR]===0&&pi(!q.sync,S>0&&Se[Fi]()>=S)):c++,!0):!1}function _p(q,Q,ce,Se){for(;ce<=Q;){var We=An(q,Q,!0);if(We&&We[Fi]()>0){var Pe=We[Md](0,Se),cr=Pe[Fi]();if(cr>0)return ce===4?c-=cr:l-=cr,we(ky,[Pe],sl.QueueFull),!0}ce++}return Ub(),!1}function Ub(){for(var q=0,Q=0,ce=function(We){var Pe=b[We];Pe&&Pe[Ds]&&he(Pe[Ds],function(cr){We===4?q+=cr[Fi]():Q+=cr[Fi]()})},Se=1;Se<=4;Se++)ce(Se);l=Q,c=q}function L0(q,Q,ce){var Se=!1,We=Q===0;return!We||y[eR]()?Ci(z.core,function(){return"PostChannel._queueBatches"},function(){for(var Pe=[],cr=4;cr>=q;){var br=b[cr];br&&br.batches&&br.batches[Vt]>0&&(he(br[Ds],function(Hi){y.addBatch(Hi)?Se=Se||Hi&&Hi[Fi]()>0:Pe=Pe[Ld](Hi[Od]()),cr===4?c-=Hi[Fi]():l-=Hi[Fi]()}),br[Ds]=[],br.iKeyMap={}),cr--}Pe[Vt]>0&&Y(ky,Pe,sl.KillSwitch),Se&&T>=q&&(T=-1,L=0)},function(){return{latency:q,sendType:Q,sendReason:ce}},!We):(T=T>=0?Math.min(T,q):q,L=Math.max(L,ce)),Se}function Bb(q,Q){U(1,0,Q),Ub(),xp(function(){q&&q(),o[Vt]>0?s=be(function(){s=null,Bb(o.shift(),Q)},0):(s=null,le())})}function xp(q){y[tO]()?q():s=be(function(){s=null,xp(q)},ZKe)}function RT(){et(),Nl(),f=Ty,le()}function Nl(){p={},p[Ty]=[2,1,0],p[M3]=[6,3,0],p[F3]=[18,9,0]}function ya(q,Q){var ce=[],Se=N;j&&(Se=J),he(q,function(We){We&&We[Fi]()>0&&he(We[Od](),function(Pe){Pe&&(Pe[Ry]&&(Pe[lg]=4,Pe[Ry]=!1),Pe[iR]<Se?(Kw(Pe,z[nR]),Qe(Pe,!1)):ce[Do](Pe))})}),ce[Vt]>0&&Y(ky,ce,sl.NonRetryableStatus),j&&_t(2,2)}function pm(q,Q){var ce=F||{},Se=ce[q];if(Se)try{Se.apply(ce,Q)}catch(We){Ne(z.diagLog(),1,74,q+" notification failed: "+We)}}function Y(q,Q){for(var ce=[],Se=2;Se<arguments.length;Se++)ce[Se-2]=arguments[Se];Q&&Q[Vt]>0&&pm(q,[Q][Ld](ce))}function we(q,Q){for(var ce=[],Se=2;Se<arguments.length;Se++)ce[Se-2]=arguments[Se];Q&&Q[Vt]>0&&he(Q,function(We){We&&We[Fi]()>0&&pm(q,[We.events()][Ld](ce))})}function Fe(q,Q,ce){q&&q[Vt]>0&&pm("eventsSendRequest",[Q>=1e3&&Q<=1999?Q-1e3:0,ce!==!0])}function at(q,Q){we("eventsSent",q,Q),le()}function H(q,Q){we(ky,q,Q>=8e3&&Q<=8999?Q-8e3:sl.Unknown)}function ne(q){we(ky,q,sl.NonRetryableStatus),le()}function pe(q,Q){we(ky,q,sl.Unknown),le()}function _e(){A?S=0:S=Math.max(N1e*(L1e+1),d/6)}}),r}return e.__ieDyn=1,e}(wf)});var q1e={};an(q1e,{BE_PROFILE:()=>F3,NRT_PROFILE:()=>M3,PostChannel:()=>U1e,RT_PROFILE:()=>Ty});var H1e=I(()=>{VW();B1e()});var j1e=k(Fd=>{"use strict";var oYe=Fd&&Fd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sYe=Fd&&Fd.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),G1e=Fd&&Fd.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oYe(e,t,r);return sYe(e,t),e};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.oneDataSystemClientFactory=void 0;var aYe=async(t,e,r)=>{let n=await Promise.resolve().then(()=>G1e((Ey(),Gi(Qxe)))),i=await Promise.resolve().then(()=>G1e((H1e(),Gi(q1e)))),o=new n.AppInsightsCore,s=new i.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){a.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:r};a.extensionConfig[s.identifier]=l}let u=e.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(a,[]),o.addTelemetryInitializer(l=>{l.ext=l.ext??{},l.ext.web=l.ext.web??{},l.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',u&&(l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),o},cYe=async(t,e,r)=>{let n=await aYe(t,e,r);return{logEvent:(s,a)=>{try{n?.track({name:s,baseData:{name:s,properties:a?.properties,measurements:a?.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!n){a();return}n.flush(!0,u=>{if(!u){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!n){a();return}n.unload(!1,()=>{a(),n=void 0},1e3)})}};Fd.oneDataSystemClientFactory=cYe});var z1e,nS,iS,oR,dg,Ud,yo,pO,mu=I(()=>{z1e="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",nS="sampleRate",iS="ProcessLegacy",oR="http.method",dg="https://dc.services.visualstudio.com",Ud="/v2/track",yo="not_specified",pO="iKey"});var Dy,vK=I(()=>{zr();Dy=h$({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Df,Pt,Bd,pg,Nf,Lf,fO,no,hl,fg,mO,hO,gO,yK,vO,yO,Ny,oS,bK,sR,Ly,hu,os,Ns,Oy,qd,My,bO,_O,_K,Fy,mg,aR,cR,Uy,sS,By,xK,bo=I(()=>{Df="split",Pt="length",Bd="toLowerCase",pg="ingestionendpoint",Nf="toString",Lf="push",fO="removeItem",no="name",hl="message",fg="count",mO="preTriggerDate",hO="disabled",gO="interval",yK="daysOfMonth",vO="date",yO="getUTCDate",Ny="stringify",oS="pathname",bK="correlationHeaderExcludePatterns",sR="extensionConfig",Ly="exceptions",hu="parsedStack",os="properties",Ns="measurements",Oy="sizeInBytes",qd="typeName",My="severityLevel",bO="problemGroup",_O="isManual",_K="CreateFromInterface",Fy="assembly",mg="fileName",aR="hasFullStack",cR="level",Uy="method",sS="line",By="duration",xK="receivedResponse"});function xO(t,e,r){var n=e[Pt],i=SK(t,e);if(i[Pt]!==n){for(var o=0,s=i;r[s]!==void 0;)o++,s=Si(i,0,147)+EK(o);i=s}return i}function SK(t,e){var r;return e&&(e=Dr(Fn(e)),e[Pt]>150&&(r=Si(e,0,150),Ne(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),r||e}function nn(t,e,r){r===void 0&&(r=1024);var n;return e&&(r=r||1024,e=Dr(Fn(e)),e[Pt]>r&&(n=Si(e,0,r),Ne(t,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:e},!0))),n||e}function hg(t,e){return TO(t,e,2048,66)}function aS(t,e){var r;return e&&e[Pt]>32768&&(r=Si(e,0,32768),Ne(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),r||e}function SO(t,e){var r;if(e){var n=""+e;n[Pt]>32768&&(r=Si(n,0,32768),Ne(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return r||e}function Ls(t,e){if(e){var r={};$e(e,function(n,i){if(Tn(i)&&Sd())try{i=ns()[Ny](i)}catch(o){Ne(t,2,49,"custom property is not valid",{exception:o},!0)}i=nn(t,i,8192),n=xO(t,n,r),r[n]=i}),e=r}return e}function Os(t,e){if(e){var r={};$e(e,function(n,i){n=xO(t,n,r),r[n]=i}),e=r}return e}function EO(t,e){return e&&TO(t,e,128,69)[Nf]()}function TO(t,e,r,n){var i;return e&&(e=Dr(Fn(e)),e[Pt]>r&&(i=Si(e,0,r),Ne(t,2,n,"input is too long, it has been truncated to "+r+" characters.",{data:e},!0))),i||e}function EK(t){var e="00"+t;return nl(e,e[Pt]-3)}var gu=I(()=>{zr();gt();bo()});function qy(t){var e=$1e,r=uYe,n=r[e];return V1e.createElement?r[e]||(n=r[e]=V1e.createElement("a")):n={host:TK(t,!0)},n.href=t,e++,e>=r[Pt]&&(e=0),$1e=e,n}function W1e(t){var e,r=qy(t);return r&&(e=r.href),e}function K1e(t){var e,r=qy(t);return r&&(e=r[oS]),e}function Y1e(t,e){return t?t.toUpperCase()+" "+e:e}function TK(t,e){var r=uR(t,e)||"";if(r){var n=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[Pt]>3&&Lt(n[2])&&n[2][Pt]>0)return n[2]+(n[3]||"")}return r}function uR(t,e){var r=null;if(t){var n=t.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[Pt]>2&&Lt(n[2])&&n[2][Pt]>0&&(r=n[2]||"",e&&n[Pt]>2)){var i=(n[1]||"")[Bd](),o=n[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),r+=o}}return r}var V1e,$1e,uYe,CK=I(()=>{zr();bo();V1e=ai()||{},$1e=0,uYe=[null,null,null,null,null]});function lR(t){return Er(lYe,t[Bd]())!==-1}function Q1e(t){IK=t}function X1e(){return IK}function J1e(t,e,r){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t[bK]){for(var n=0;n<t.correlationHeaderExcludePatterns[Pt];n++)if(t[bK][n].test(e))return!1}var i=qy(e).host[Bd]();if(i&&(ia(i,":443")!==-1||ia(i,":80")!==-1)&&(i=(uR(e,!0)||"")[Bd]()),(!t||!t.enableCorsCorrelation)&&i&&i!==r)return!1;var o=t&&t.correlationHeaderDomains;if(o){var s;if(he(o,function(u){var l=new RegExp(u.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||l.test(i)}),!s)return!1}var a=t&&t.correlationHeaderExcludedDomains;if(!a||a[Pt]===0)return!0;for(var n=0;n<a[Pt];n++){var c=new RegExp(a[n].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(c.test(i))return!1}return i&&i[Pt]>0}function Z1e(t){if(t){var e=wK(t,Dy[1]);if(e&&e!==IK)return e}}function wK(t,e){if(t)for(var r=t[Df](","),n=0;n<r[Pt];++n){var i=r[n][Df]("=");if(i[Pt]===2&&i[0]===e)return i[1]}}function eSe(t,e,r,n){var i,o=n,s=n;if(e&&e[Pt]>0){var a=qy(e);if(i=a.host,!o)if(a[oS]!=null){var c=a.pathname[Pt]===0?"/":a[oS];c.charAt(0)!=="/"&&(c="/"+c),s=a[oS],o=nn(t,r?r+" "+c:c)}else o=nn(t,e)}else i=n,o=n;return{target:i,name:o,data:s}}function tSe(){var t=pf();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return ui()}function rSe(t,e){var r=null;return t!==0&&e!==0&&!xe(t)&&!xe(e)&&(r=e-t),r}function nSe(t,e){var r=t||{};return{getName:function(){return r[no]},setName:function(n){e&&e.setName(n),r[no]=n},getTraceId:function(){return r.traceID},setTraceId:function(n){e&&e.setTraceId(n),wd(n)&&(r.traceID=n)},getSpanId:function(){return r.parentID},setSpanId:function(n){e&&e.setSpanId(n),Rd(n)&&(r.parentID=n)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(n){e&&e.setTraceFlags(n),r.traceFlags=n}}}var lYe,IK,RK=I(()=>{zr();gt();mu();vK();gu();CK();bo();lYe=[dg+Ud,"https://breeze.aimon.applicationinsights.io"+Ud,"https://dc-int.services.visualstudio.com"+Ud],IK="cid-v1:"});var cS,iSe,oSe,AK=I(()=>{zr();cS=eo({LocalStorage:0,SessionStorage:1}),iSe=eo({AI:0,AI_AND_W3C:1,W3C:2}),oSe=eo({Normal:1,Critical:2})});function PK(){return uS()?CO(cS.LocalStorage):null}function CO(t){try{if(xe(As()))return null;var e=new Date()[Nf](),r=Yr(t===cS.LocalStorage?"localStorage":"sessionStorage"),n=sSe+e;r.setItem(n,e);var i=r.getItem(n)!==e;if(r[fO](n),!i)return r}catch{}return null}function kK(){return Hy()?CO(cS.SessionStorage):null}function aSe(){gg=!1,vg=!1}function IO(t){sSe=t||""}function cSe(){gg=uS(!0),vg=Hy(!0)}function uS(t){return(t||gg===void 0)&&(gg=!!CO(cS.LocalStorage)),gg}function wO(t,e){var r=PK();if(r!==null)try{return r.getItem(e)}catch(n){gg=!1,Ne(t,2,1,"Browser failed read of local storage. "+Cn(n),{exception:Ge(n)})}return null}function RO(t,e,r){var n=PK();if(n!==null)try{return n.setItem(e,r),!0}catch(i){gg=!1,Ne(t,2,3,"Browser failed write to local storage. "+Cn(i),{exception:Ge(i)})}return!1}function uSe(t,e){var r=PK();if(r!==null)try{return r[fO](e),!0}catch(n){gg=!1,Ne(t,2,5,"Browser failed removal of local storage item. "+Cn(n),{exception:Ge(n)})}return!1}function Hy(t){return(t||vg===void 0)&&(vg=!!CO(cS.SessionStorage)),vg}function lSe(){var t=[];return Hy()&&$e(Yr("sessionStorage"),function(e){t[Lf](e)}),t}function AO(t,e){var r=kK();if(r!==null)try{return r.getItem(e)}catch(n){vg=!1,Ne(t,2,2,"Browser failed read of session storage. "+Cn(n),{exception:Ge(n)})}return null}function PO(t,e,r){var n=kK();if(n!==null)try{return n.setItem(e,r),!0}catch(i){vg=!1,Ne(t,2,4,"Browser failed write to session storage. "+Cn(i),{exception:Ge(i)})}return!1}function dSe(t,e){var r=kK();if(r!==null)try{return r[fO](e),!0}catch(n){vg=!1,Ne(t,2,6,"Browser failed removal of session storage item. "+Cn(n),{exception:Ge(n)})}return!1}var gg,vg,sSe,DK=I(()=>{zr();AK();bo();gg=void 0,vg=void 0,sSe=""});var dYe,pSe,fSe=I(()=>{zr();gt();DK();bo();dYe="appInsightsThrottle",pSe=function(){function t(e,r){var n=this,i,o,s,a,c,u,l,d=!1,p=!1;m(),n._getDbgPlgTargets=function(){return[l]},n.getConfig=function(){return s},n.canThrottle=function(E){var A=J(E),F=h(E);return y(F,i,A)},n.isTriggered=function(E){return X(E)},n.isReady=function(){return d},n.flush=function(E){try{var A=D(E);if(A&&A[Pt]>0){var F=A.slice(0);return l[E]=[],he(F,function(O){f(O.msgID,O[hl],O.severity,!1)}),!0}}catch{}return!1},n.flushAll=function(){try{if(l){var E=!0;return $e(l,function(A){var F=n.flush(parseInt(A));E=E&&F}),E}}catch{}return!1},n.onReadyState=function(E,A){return A===void 0&&(A=!0),d=xe(E)?!0:E,d&&A?n.flushAll():null},n.sendMessage=function(E,A,F){return f(E,A,F,!0)};function f(E,A,F,O){if(d){var Z=N(E);if(!Z)return;var $=h(E),z=J(E),se=y($,i,z),He=!1,ee=0,ft=X(E);try{se&&!ft?(ee=Math.min($.limit.maxSendNumber,z[fg]+1),z[fg]=0,He=!0,c[E]=!0,z[mO]=new Date):(c[E]=se,z[fg]+=1);var ze=b(E);L(o,ze,z);for(var Ct=0;Ct<ee;Ct++)j(E,o,A,F)}catch{}return{isThrottled:He,throttleNum:ee}}else if(O){var mr=D(E);mr[Lf]({msgID:E,message:A,severity:F})}return null}function m(){o=dl(e),c={},a={},l={},s={},g(109),u=Td(r)?r:"",e.addUnloadHook(ro(e.config,function(E){var A=E.cfg;i=uS();var F=A.throttleMgrCfg||{};$e(F,function(O,Z){g(parseInt(O),Z)})}))}function h(E){return s[E]||s[109]}function g(E,A){var F,O;try{var Z=A||{},$={};$[hO]=!!Z[hO];var z=Z[gO]||{};p=z?.daysOfMonth&&z?.daysOfMonth[Pt]>0,$[gO]=v(z);var se={samplingRate:((F=Z.limit)===null||F===void 0?void 0:F.samplingRate)||100,maxSendNumber:((O=Z.limit)===null||O===void 0?void 0:O.maxSendNumber)||1};$.limit=se,s[E]=$}catch{}}function v(E){E=E||{};var A=E?.monthInterval,F=E?.dayInterval;return xe(A)&&xe(F)&&(E.monthInterval=3,p||(E[yK]=[28],p=!0)),E={monthInterval:E?.monthInterval,dayInterval:E?.dayInterval,daysOfMonth:E?.daysOfMonth},E}function y(E,A,F){if(E&&!E[hO]&&A&&Td(F)){var O=T(),Z=F[vO],$=E[gO],z=1;if($?.monthInterval){var se=(O.getUTCFullYear()-Z.getUTCFullYear())*12+O.getUTCMonth()-Z.getUTCMonth();z=M($.monthInterval,0,se)}var He=1;if(p)He=Er($[yK],O[yO]());else if($?.dayInterval){var ee=Math.floor((O.getTime()-Z.getTime())/864e5);He=M($.dayInterval,0,ee)}return z>=0&&He>=0}return!1}function b(E,A){var F=Td(A)?A:"";return E?dYe+F+"-"+E:null}function x(E){try{if(E){var A=new Date;return E.getUTCFullYear()===A.getUTCFullYear()&&E.getUTCMonth()===A.getUTCMonth()&&E[yO]()===A[yO]()}}catch{}return!1}function S(E,A,F){try{var O={date:T(),count:0};if(E){var Z=JSON.parse(E),$={date:T(Z[vO])||O[vO],count:Z[fg]||O[fg],preTriggerDate:Z.preTriggerDate?T(Z[mO]):void 0};return $}else return L(A,F,O),O}catch{}return null}function T(E){try{if(E){var A=new Date(E);if(!isNaN(A.getDate()))return A}else return new Date}catch{}return null}function L(E,A,F){try{return RO(E,A,Dr(JSON[Ny](F)))}catch{}return!1}function M(E,A,F){return E<=0?1:F>=A&&(F-A)%E==0?Math.floor((F-A)/E)+1:-1}function j(E,A,F,O){Ne(A,O||1,E,F)}function N(E){try{var A=h(E);return Sw(1e6)<=A.limit.samplingRate}catch{}return!1}function J(E){try{var A=a[E];if(!A){var F=b(E,u);A=S(wO(o,F),o,F),a[E]=A}return a[E]}catch{}return null}function X(E){var A=c[E];if(xe(A)){A=!1;var F=J(E);F&&(A=x(F[mO])),c[E]=A}return c[E]}function D(E){return l=l||{},xe(l[E])&&(l[E]=[]),l[E]}}return t}()});function dR(t){if(!t)return{};var e=t[Df](pYe),r=l1(e,function(i,o){var s=o[Df](fYe);if(s[Pt]===2){var a=s[0][Bd](),c=s[1];i[a]=c}return i},{});if(mo(r)[Pt]>0){if(r.endpointsuffix){var n=r.location?r.location+".":"";r[pg]=r[pg]||"https://"+n+"dc."+r.endpointsuffix}r[pg]=r[pg]||dg,Fh(r[pg],"/")&&(r[pg]=r[pg].slice(0,-1))}return r}var pYe,fYe,mSe,hSe=I(()=>{zr();mu();bo();pYe=";",fYe="=";mSe={parse:dR}});var kO,gSe=I(()=>{zr();mu();bo();gu();kO=function(){function t(e,r,n){var i=this,o=this;o.ver=1,o.sampleRate=100,o.tags={},o[no]=nn(e,n)||yo,o.data=r,o.time=_c(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return i.sampleRate===100?4:1},tags:1,data:1}}return t}()});var Hd,vSe=I(()=>{mu();bo();gu();Hd=function(){function t(e,r,n,i){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var o=this;o.ver=2,o[no]=nn(e,r)||yo,o[os]=Ls(e,n),o[Ns]=Os(e,i)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}()});function MK(t,e){var r=t;return r&&!Lt(r)&&(JSON&&JSON[Ny]?(r=JSON[Ny](t),e&&(!r||r==="{}")&&(dt(t[Nf])?r=t[Nf]():r=""+t)):r=""+t+" - (Missing JSON.stringify)"),r||""}function SSe(t,e){var r=t;return t&&(r&&!Lt(r)&&(r=t[OK]||t[xSe]||r),r&&!Lt(r)&&(r=MK(r,!0)),t.filename&&(r=r+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&ia(r||"",e)===-1&&(r=e+": "+r),r||""}function hYe(t){try{if(Tn(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function gYe(t){try{if(Tn(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function bSe(t){return t&&t.src&&Lt(t.src)&&t.obj&&Ye(t.obj)}function Gy(t){var e=t||"";Lt(e)||(Lt(e[Ka])?e=e[Ka]:e=""+e);var r=e[Df](`
`);return{src:e,obj:r}}function vYe(t){for(var e=[],r=t[Df](`
`),n=0;n<r[Pt];n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),e[Lf](i)}return{src:t,obj:e}}function ESe(t){var e=null;if(t)try{if(t[Ka])e=Gy(t[Ka]);else if(t[lS]&&t[lS][Ka])e=Gy(t[lS][Ka]);else if(t.exception&&t.exception[Ka])e=Gy(t.exception[Ka]);else if(bSe(t))e=t;else if(bSe(t[LK]))e=t[LK];else if(ci()&&ci().opera&&t[OK])e=vYe(t[hl]);else if(t.reason&&t.reason[Ka])e=Gy(t.reason[Ka]);else if(Lt(t))e=Gy(t);else{var r=t[OK]||t[xSe]||"";Lt(t[ySe])&&(r&&(r+=`
`),r+=" from "+t[ySe]),r&&(e=Gy(r))}}catch(n){e=Gy(n)}return e||{src:"",obj:null}}function yYe(t){var e="";return t&&(t.obj?he(t.obj,function(r){e+=r+`
`}):e=t.src||""),e}function bYe(t){var e,r=t.obj;if(r&&r[Pt]>0){e=[];var n=0,i=0;he(r,function(m){var h=m[Nf]();if(FK.regex.test(h)){var g=new FK(h,n++);i+=g[Oy],e[Lf](g)}});var o=32*1024;if(i>o)for(var s=0,a=e[Pt]-1,c=0,u=s,l=a;s<a;){var d=e[s][Oy],p=e[a][Oy];if(c+=d+p,c>o){var f=l-u+1;e.splice(u,f);break}u=s,l=a,s++,a--}}return e}function DO(t){var e="";if(t&&(e=t.typeName||t[no]||"",!e))try{var r=/function (.{1,200})\(/,n=r.exec(t.constructor[Nf]());e=n&&n[Pt]>1?n[1]:""}catch{}return e}function NK(t){if(t)try{if(!Lt(t)){var e=DO(t),r=MK(t,!1);return(!r||r==="{}")&&(t[lS]&&(t=t[lS],e=DO(t)),r=MK(t,!0)),ia(r,e)!==0&&e!=="String"?e+":"+r:r}}catch{}return""+(t||"")}var mYe,lS,Ka,LK,ySe,OK,xSe,yg,_Se,FK,TSe=I(()=>{Ua();zr();gt();mu();bo();gu();mYe="<no_method>",lS="error",Ka="stack",LK="stackDetails",ySe="errorSrc",OK="message",xSe="description";yg=function(){function t(e,r,n,i,o,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,gYe(r)?(a[Ly]=r[Ly]||[],a[os]=r[os],a[Ns]=r[Ns],r[My]&&(a[My]=r[My]),r.id&&(a.id=r.id,r[os].id=r.id),r[bO]&&(a[bO]=r[bO]),xe(r[_O])||(a[_O]=r[_O])):(n||(n={}),s&&(n.id=s),a[Ly]=[new _Se(e,r,n)],a[os]=Ls(e,n),a[Ns]=Os(e,i),o&&(a[My]=o),s&&(a.id=s))}return t.CreateAutoException=function(e,r,n,i,o,s,a,c){var u,l=DO(o||s||e);return u={},u[hl]=SSe(e,l),u.url=r,u.lineNumber=n,u.columnNumber=i,u.error=NK(o||s||e),u.evt=NK(s||e),u[qd]=l,u.stackDetails=ESe(a||o||s),u.errorSrc=c,u},t.CreateFromInterface=function(e,r,n,i){var o=r[Ly]&&gd(r[Ly],function(a){return _Se[_K](e,a)}),s=new t(e,au(au({},r),{exceptions:o}),n,i);return s},t.prototype.toInterface=function(){var e,r=this,n=r.exceptions,i=r.properties,o=r.measurements,s=r.severityLevel,a=r.problemGroup,c=r.id,u=r.isManual,l=n instanceof Array&&gd(n,function(d){return d.toInterface()})||void 0;return e={ver:"4.0"},e[Ly]=l,e.severityLevel=s,e.properties=i,e.measurements=o,e.problemGroup=a,e.id=c,e.isManual=u,e},t.CreateSimpleException=function(e,r,n,i,o,s){var a;return{exceptions:[(a={},a[aR]=!0,a.message=e,a.stack=o,a.typeName=r,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=NK,t}(),_Se=function(){function t(e,r,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var i=this;if(hYe(r))i[qd]=r[qd],i[hl]=r[hl],i[Ka]=r[Ka],i[hu]=r[hu]||[],i[aR]=r[aR];else{var o=r,s=o&&o.evt;Rh(o)||(o=o[lS]||s||o),i[qd]=nn(e,DO(o))||yo,i[hl]=aS(e,SSe(r||o,i[qd]))||yo;var a=r[LK]||ESe(r);i[hu]=bYe(a),Ye(i[hu])&&gd(i[hu],function(c){c[Fy]=nn(e,c[Fy]),c[mg]=nn(e,c[mg])}),i[Ka]=SO(e,yYe(a)),i.hasFullStack=Ye(i.parsedStack)&&i.parsedStack[Pt]>0,n&&(n[qd]=n[qd]||i[qd])}}return t.prototype.toInterface=function(){var e,r=this,n=r[hu]instanceof Array&&gd(r[hu],function(o){return o.toInterface()}),i=(e={id:r.id,outerId:r.outerId,typeName:r[qd],message:r[hl],hasFullStack:r[aR],stack:r[Ka]},e[hu]=n||void 0,e);return i},t.CreateFromInterface=function(e,r){var n=r[hu]instanceof Array&&gd(r[hu],function(o){return FK[_K](o)})||r[hu],i=new t(e,au(au({},r),{parsedStack:n}));return i},t}(),FK=function(){function t(e,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[Oy]=0,typeof e=="string"){var i=e;n[cR]=r,n[Uy]=mYe,n[Fy]=Dr(i),n[mg]="",n[sS]=0;var o=i.match(t.regex);o&&o[Pt]>=5&&(n[Uy]=Dr(o[2])||n[Uy],n[mg]=Dr(o[4]),n[sS]=parseInt(o[5])||0)}else n[cR]=e[cR],n[Uy]=e[Uy],n[Fy]=e[Fy],n[mg]=e[mg],n[sS]=e[sS],n[Oy]=0;n.sizeInBytes+=n.method[Pt],n.sizeInBytes+=n.fileName[Pt],n.sizeInBytes+=n.assembly[Pt],n[Oy]+=t.baseSize,n.sizeInBytes+=n.level.toString()[Pt],n.sizeInBytes+=n.line.toString()[Pt]}return t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){var e=this;return{level:e[cR],method:e[Uy],assembly:e[Fy],fileName:e[mg],line:e[sS]}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}()});var CSe,ISe=I(()=>{CSe=function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t}()});var Gd,wSe=I(()=>{mu();bo();ISe();gu();Gd=function(){function t(e,r,n,i,o,s,a,c,u){this.aiDataContract={ver:1,metrics:1,properties:0};var l=this;l.ver=2;var d=new CSe;d[fg]=i>0?i:void 0,d.max=isNaN(s)||s===null?void 0:s,d.min=isNaN(o)||o===null?void 0:o,d[no]=nn(e,r)||yo,d.value=n,d.stdDev=isNaN(a)||a===null?void 0:a,l.metrics=[d],l[os]=Ls(e,c),l[Ns]=Os(e,u)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}()});function RSe(t,e){return e===void 0&&(e=!1),t==null?e:t.toString()[Bd]()==="true"}function dS(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=pR+t%1e3,r=pR+Math.floor(t/1e3)%60,n=pR+Math.floor(t/(1e3*60))%60,i=pR+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e[Pt]===1?"00"+e:e[Pt]===2?"0"+e:e,r=r[Pt]<2?"0"+r:r,n=n[Pt]<2?"0"+n:n,i=i[Pt]<2?"0"+i:i,(o>0?o+".":pR)+i+":"+n+":"+r+"."+e}function ASe(t,e){var r=null;return he(t,function(n){if(n.identifier===e)return r=n,-1}),r}function PSe(t,e,r,n,i){return!i&&Lt(t)&&(t==="Script error."||t==="Script error")}var pR,NO=I(()=>{zr();bo();pR=""});var bg,kSe=I(()=>{mu();NO();bo();gu();bg=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=EO(e,a),c.url=hg(e,n),c[no]=nn(e,r)||yo,isNaN(i)||(c[By]=dS(i)),c[os]=Ls(e,o),c[Ns]=Os(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}()});var _g,DSe=I(()=>{NO();RK();bo();gu();_g=function(){function t(e,r,n,i,o,s,a,c,u,l,d,p){u===void 0&&(u="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var f=this;f.ver=2,f.id=r,f[By]=dS(o),f.success=s,f.resultCode=a+"",f.type=nn(e,u);var m=eSe(e,n,c,i);f.data=hg(e,i)||m.data,f.target=nn(e,m.target),l&&(f.target="".concat(f.target," | ").concat(l)),f[no]=nn(e,m[no]),f[os]=Ls(e,d),f[Ns]=Os(e,p)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}()});var xg,NSe=I(()=>{mu();bo();gu();xg=function(){function t(e,r,n,i,o){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,r=r||yo,s[hl]=aS(e,r),s[os]=Ls(e,i),s[Ns]=Os(e,o),n&&(s[My]=n)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}()});var Sg,LSe=I(()=>{mu();bo();gu();Sg=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=hg(e,n),c[no]=nn(e,r)||yo,c[os]=Ls(e,o),c[Ns]=Os(e,s),a&&(c.domProcessing=a.domProcessing,c[By]=a[By],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c[xK]=a[xK],c.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}()});var jd,OSe=I(()=>{jd=function(){function t(e,r){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=r}return t}()});var LO,MSe=I(()=>{zr();LO=eo({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});var FSe,USe=I(()=>{zr();bo();FSe=function(){function t(){}return t.getConfig=function(e,r,n,i){i===void 0&&(i=!1);var o;return n&&e[sR]&&e[sR][n]&&!xe(e[sR][n][r])?o=e[sR][n][r]:o=e[r],xe(o)?i:o},t}()});function Tg(t){var e="ai."+t+".";return function(r){return e+r}}var fR,_o,OO,pS,UK,Eg,jy,mR,fS,BK=I(()=>{Ua();zr();fR=Tg("application"),_o=Tg("device"),OO=Tg("location"),pS=Tg("operation"),UK=Tg("session"),Eg=Tg("user"),jy=Tg("cloud"),mR=Tg("internal"),fS=function(t){Fa(e,t);function e(){return t.call(this)||this}return e}(X$({applicationVersion:fR("ver"),applicationBuild:fR("build"),applicationTypeId:fR("typeId"),applicationId:fR("applicationId"),applicationLayer:fR("layer"),deviceId:_o("id"),deviceIp:_o("ip"),deviceLanguage:_o("language"),deviceLocale:_o("locale"),deviceModel:_o("model"),deviceFriendlyName:_o("friendlyName"),deviceNetwork:_o("network"),deviceNetworkName:_o("networkName"),deviceOEMName:_o("oemName"),deviceOS:_o("os"),deviceOSVersion:_o("osVersion"),deviceRoleInstance:_o("roleInstance"),deviceRoleName:_o("roleName"),deviceScreenResolution:_o("screenResolution"),deviceType:_o("type"),deviceMachineName:_o("machineName"),deviceVMName:_o("vmName"),deviceBrowser:_o("browser"),deviceBrowserVersion:_o("browserVersion"),locationIp:OO("ip"),locationCountry:OO("country"),locationProvince:OO("province"),locationCity:OO("city"),operationId:pS("id"),operationName:pS("name"),operationParentId:pS("parentId"),operationRootId:pS("rootId"),operationSyntheticSource:pS("syntheticSource"),operationCorrelationVector:pS("correlationVector"),sessionId:UK("id"),sessionIsFirst:UK("isFirst"),sessionIsNew:UK("isNew"),userAccountAcquisitionDate:Eg("accountAcquisitionDate"),userAccountId:Eg("accountId"),userAgent:Eg("userAgent"),userId:Eg("id"),userStoreRegion:Eg("storeRegion"),userAuthUserId:Eg("authUserId"),userAnonymousUserAcquisitionDate:Eg("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Eg("authUserAcquisitionDate"),cloudName:jy("name"),cloudRole:jy("role"),cloudRoleVer:jy("roleVer"),cloudRoleInstance:jy("roleInstance"),cloudEnvironment:jy("environment"),cloudLocation:jy("location"),cloudDeploymentUnit:jy("deploymentUnit"),internalNodeName:mR("nodeName"),internalSdkVersion:mR("sdkVersion"),internalAgentVersion:mR("agentVersion"),internalSnippet:mR("snippet"),internalSdkSrc:mR("sdkSrc")}))});function qK(t,e,r,n,i,o){var s;r=nn(n,r)||yo,(xe(t)||xe(e)||xe(r))&&si("Input doesn't contain all required fields");var a="";t[pO]&&(a=t[pO],delete t[pO]);var c=(s={},s[no]=r,s.time=_c(new Date),s.iKey=a,s.ext=o||{},s.tags=[],s.data={},s.baseType=e,s.baseData=t,s);return xe(i)||$e(i,function(u,l){c.data[u]=l}),c}var BSe,qSe=I(()=>{zr();mu();gu();bo();BSe=function(){function t(){}return t.create=qK,t}()});var HSe,io,GSe=I(()=>{BK();HSe={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},io=new fS});function jSe(t){var e=null;if(dt(Event))e=new Event(t);else{var r=ai();r&&r.createEvent&&(e=r.createEvent("Event"),e.initEvent(t,!0,!0))}return e}var zSe=I(()=>{zr()});function VSe(t,e){Af(t,null,null,e)}function MO(t){var e=ai(),r=Zi(),n=!1,i=[],o=1;r&&!xe(r.onLine)&&!r.onLine&&(o=2);var s=0,a=p(),c=Sc(is("OfflineListener"),t);try{if(l(ci())&&(n=!0),e){var u=e.body||e;u.ononline&&l(u)&&(n=!0)}}catch{n=!1}function l(b){var x=!1;return b&&(x=Pd(b,"online",h,c),x&&Pd(b,"offline",g,c)),x}function d(){return a}function p(){return!(s===2||o===2)}function f(){var b=p();a!==b&&(a=b,he(i,function(x){var S={isOnline:a,rState:o,uState:s};try{x(S)}catch{}}))}function m(b){s=b,f()}function h(){o=1,f()}function g(){o=2,f()}function v(){var b=ci();if(b&&n){if(VSe(b,c),e){var x=e.body||e;Rt(x.ononline)||VSe(x,c)}n=!1}}function y(b){return i[Lf](b),{rm:function(){var x=i.indexOf(b);if(x>-1)return i.splice(x,1)}}}return{isOnline:d,isListening:function(){return n},unload:v,addListener:y,setOnlineState:m}}var $Se=I(()=>{zr();bo()});var WSe={};an(WSe,{AnalyticsPluginIdentifier:()=>xYe,BreezeChannelIdentifier:()=>HK,ConfigurationManager:()=>FSe,ConnectionStringParser:()=>mSe,ContextTagKeys:()=>fS,CtxTagKeys:()=>io,DEFAULT_BREEZE_ENDPOINT:()=>dg,DEFAULT_BREEZE_PATH:()=>Ud,Data:()=>jd,DisabledPropertyName:()=>z1e,DistributedTracingModes:()=>iSe,Envelope:()=>kO,Event:()=>Hd,EventPersistence:()=>oSe,Exception:()=>yg,Extensions:()=>HSe,HttpMethod:()=>oR,Metric:()=>Gd,PageView:()=>bg,PageViewPerformance:()=>Sg,ProcessLegacy:()=>iS,PropertiesPluginIdentifier:()=>_Ye,RemoteDependencyData:()=>_g,RequestHeaders:()=>Dy,SampleRate:()=>nS,SeverityLevel:()=>LO,TelemetryItemCreator:()=>BSe,ThrottleMgr:()=>pSe,Trace:()=>xg,correlationIdCanIncludeCorrelationHeader:()=>J1e,correlationIdGetCorrelationContext:()=>Z1e,correlationIdGetCorrelationContextValue:()=>wK,correlationIdGetPrefix:()=>X1e,correlationIdSetPrefix:()=>Q1e,createDistributedTraceContextFromTrace:()=>nSe,createDomEvent:()=>jSe,createOfflineListener:()=>MO,createTelemetryItem:()=>qK,createTraceParent:()=>Ow,dataSanitizeException:()=>SO,dataSanitizeId:()=>EO,dataSanitizeInput:()=>TO,dataSanitizeKey:()=>SK,dataSanitizeKeyAndAddUniqueness:()=>xO,dataSanitizeMeasurements:()=>Os,dataSanitizeMessage:()=>aS,dataSanitizeProperties:()=>Ls,dataSanitizeString:()=>nn,dataSanitizeUrl:()=>hg,dateTimeUtilsDuration:()=>rSe,dateTimeUtilsNow:()=>tSe,dsPadNumber:()=>EK,findW3cTraceParent:()=>Uw,formatTraceParent:()=>Fw,getExtensionByName:()=>ASe,isBeaconApiSupported:()=>Va,isCrossOriginError:()=>PSe,isInternalApplicationInsightsEndpoint:()=>lR,isSampledFlag:()=>Mw,isValidSpanId:()=>Rd,isValidTraceId:()=>wd,isValidTraceParent:()=>q1,msToTimeSpan:()=>dS,parseConnectionString:()=>dR,parseTraceParent:()=>yy,strNotSpecified:()=>yo,stringToBoolOrDefault:()=>RSe,urlGetAbsoluteUrl:()=>W1e,urlGetCompleteUrl:()=>Y1e,urlGetPathName:()=>K1e,urlParseFullHost:()=>uR,urlParseHost:()=>TK,urlParseUrl:()=>qy,utlCanUseLocalStorage:()=>uS,utlCanUseSessionStorage:()=>Hy,utlDisableStorage:()=>aSe,utlEnableStorage:()=>cSe,utlGetLocalStorage:()=>wO,utlGetSessionStorage:()=>AO,utlGetSessionStorageKeys:()=>lSe,utlRemoveSessionStorage:()=>dSe,utlRemoveStorage:()=>uSe,utlSetLocalStorage:()=>RO,utlSetSessionStorage:()=>PO,utlSetStoragePrefix:()=>IO});var _Ye,HK,xYe,Of=I(()=>{RK();fSe();hSe();vK();mu();gSe();vSe();TSe();wSe();kSe();DSe();NSe();LSe();OSe();MSe();USe();BK();gu();qSe();GSe();AK();NO();zr();zSe();DK();CK();$Se();_Ye="AppInsightsPropertiesPlugin",HK="AppInsightsChannelPlugin",xYe="ApplicationInsightsAnalytics"});var Cg,KSe=I(()=>{Cg="duration"});var oo,FO,ss,zd,zy,jt,Ig,wg,vu,Rg,Mf,mS,Ff,Uf,UO,Bf,hR,Ag,gR,hS,Vy,vR,BO,qf,gS,vS,as,qO,yS,HO,GK,GO,jO,jK,zO,zK,Hf,VK,$K,WK,KK,yR,YK,QK,XK,bS,Pg,VO,bR,$O,YSe,WO,KO,_S,JK,YO,QSe,kg=I(()=>{oo="tags",FO="deviceType",ss="data",zd="name",zy="traceID",jt="length",Ig="stringify",wg="measurements",vu="dataType",Rg="envelopeType",Mf="toString",mS="_get",Ff="enqueue",Uf="count",UO="eventsLimitInMem",Bf="push",hR="emitLineDelimitedJson",Ag="clear",gR="createNew",hS="markAsSent",Vy="clearSent",vR="bufferOverride",BO="BUFFER_KEY",qf="SENT_BUFFER_KEY",gS="MAX_BUFFER_SIZE",vS="triggerSend",as="diagLog",qO="initialize",yS="_sender",HO="customHeaders",GK="maxBatchSizeInBytes",GO="onunloadDisableBeacon",jO="isBeaconApiDisabled",jK="alwaysUseXhrOverride",zO="disableXhr",zK="enableSessionStorageBuffer",Hf="_buffer",VK="onunloadDisableFetch",$K="disableSendBeaconSplit",WK="instrumentationKey",KK="enableSendPromise",yR="getSenderInst",YK="unloadTransports",QK="convertUndefined",XK="maxBatchInterval",bS="serialize",Pg="_onError",VO="_onPartialSuccess",bR="_onSuccess",$O="itemsAccepted",YSe="itemsReceived",WO="oriPayload",KO="baseType",_S="sampleRate",JK="eventsSendRequest",YO="getSamplingScore",QSe="getHashCodeScore"});function so(t,e,r){return lu(t,e,r,ru)}function SYe(t,e,r){var n=r[oo]=r[oo]||{},i=e.ext=e.ext||{},o=e[oo]=e[oo]||[],s=i.user;s&&(so(n,io.userAuthUserId,s.authId),so(n,io.userId,s.id||s.localId));var a=i.app;a&&so(n,io.sessionId,a.sesId);var c=i.device;c&&(so(n,io.deviceId,c.id||c.localId),so(n,io[FO],c.deviceClass),so(n,io.deviceIp,c.ip),so(n,io.deviceModel,c.model),so(n,io[FO],c[FO]));var u=e.ext.web;if(u){so(n,io.deviceLanguage,u.browserLang),so(n,io.deviceBrowserVersion,u.browserVer),so(n,io.deviceBrowser,u.browser);var l=r[ss]=r[ss]||{},d=l[Kn]=l[Kn]||{},p=d[No]=d[No]||{};so(p,"domain",u.domain),so(p,"isManual",u.isManual?XSe:null),so(p,"screenRes",u.screenRes),so(p,"userConsent",u.userConsent?XSe:null)}var f=i.os;f&&so(n,io.deviceOS,f[zd]);var m=i.trace;m&&(so(n,io.operationParentId,m.parentID),so(n,io.operationName,nn(t,m[zd])),so(n,io.operationId,m[zy]));for(var h={},g=o[jt]-1;g>=0;g--){var v=o[g];$e(v,function(b,x){h[b]=x}),o.splice(g,1)}$e(o,function(b,x){h[b]=x});var y=au(au({},n),h);y[io.internalSdkVersion]||(y[io.internalSdkVersion]=nn(t,"javascript:".concat(EYe.Version),64)),r[oo]=du(y)}function Dg(t,e,r){xe(t)||$e(t,function(n,i){Rs(i)?r[n]=i:Lt(i)?e[n]=i:Sd()&&(e[n]=ns()[Ig](i))})}function $y(t,e){xe(t)||$e(t,function(r,n){t[r]=n||e})}function Wy(t,e,r,n){var i=new kO(t,n,e);so(i,"sampleRate",r[nS]),(r[Kn]||{}).startTime&&(i.time=_c(r[Kn].startTime)),i.iKey=r.iKey;var o=r.iKey.replace(/-/g,"");return i[zd]=i[zd].replace("{0}",o),SYe(t,r,i),r[oo]=r[oo]||[],du(i)}function Ky(t,e){xe(e[Kn])&&Ne(t,1,46,"telemetryItem.baseData cannot be null.")}function JSe(t,e,r){Ky(t,e);var n=e[Kn][wg]||{},i=e[Kn][No]||{};Dg(e[ss],i,n),xe(r)||$y(i,r);var o=e[Kn];if(xe(o))return sa(t,"Invalid input for dependency data"),null;var s=o[No]&&o[No][oR]?o[No][oR]:"GET",a=new _g(t,o.id,o.target,o[zd],o[Cg],o.success,o.responseCode,s,o.type,o.correlationContext,i,n),c=new jd(_g[vu],a);return Wy(t,_g[Rg],e,c)}function eY(t,e,r){Ky(t,e);var n={},i={};e[ZK]!==Hd[vu]&&(n.baseTypeSource=e[ZK]),e[ZK]===Hd[vu]?(n=e[Kn][No]||{},i=e[Kn][wg]||{}):e[Kn]&&Dg(e[Kn],n,i),Dg(e[ss],n,i),xe(r)||$y(n,r);var o=e[Kn][zd],s=new Hd(t,o,n,i),a=new jd(Hd[vu],s);return Wy(t,Hd[Rg],e,a)}function ZSe(t,e,r){Ky(t,e);var n=e[Kn][wg]||{},i=e[Kn][No]||{};Dg(e[ss],i,n),xe(r)||$y(i,r);var o=e[Kn],s=yg.CreateFromInterface(t,o,i,n),a=new jd(yg[vu],s);return Wy(t,yg[Rg],e,a)}function eEe(t,e,r){Ky(t,e);var n=e[Kn],i=n[No]||{},o=n[wg]||{};Dg(e[ss],i,o),xe(r)||$y(i,r);var s=new Gd(t,n[zd],n.average,n.sampleCount,n.min,n.max,n.stdDev,i,o),a=new jd(Gd[vu],s);return Wy(t,Gd[Rg],e,a)}function tEe(t,e,r){Ky(t,e);var n,i=e[Kn];!xe(i)&&!xe(i[No])&&!xe(i[No][Cg])?(n=i[No][Cg],delete i[No][Cg]):!xe(e[ss])&&!xe(e[ss][Cg])&&(n=e[ss][Cg],delete e[ss][Cg]);var o=e[Kn],s;((e.ext||{}).trace||{})[zy]&&(s=e.ext.trace[zy]);var a=o.id||s,c=o[zd],u=o.uri,l=o[No]||{},d=o[wg]||{};if(xe(o.refUri)||(l.refUri=o.refUri),xe(o.pageType)||(l.pageType=o.pageType),xe(o.isLoggedIn)||(l.isLoggedIn=o.isLoggedIn[Mf]()),!xe(o[No])){var p=o[No];$e(p,function(h,g){l[h]=g})}Dg(e[ss],l,d),xe(r)||$y(l,r);var f=new bg(t,c,u,n,l,d,a),m=new jd(bg[vu],f);return Wy(t,bg[Rg],e,m)}function rEe(t,e,r){Ky(t,e);var n=e[Kn],i=n[zd],o=n.uri||n.url,s=n[No]||{},a=n[wg]||{};Dg(e[ss],s,a),xe(r)||$y(s,r);var c=new Sg(t,i,o,void 0,s,a,n),u=new jd(Sg[vu],c);return Wy(t,Sg[Rg],e,u)}function nEe(t,e,r){Ky(t,e);var n=e[Kn].message,i=e[Kn].severityLevel,o=e[Kn][No]||{},s=e[Kn][wg]||{};Dg(e[ss],o,s),xe(r)||$y(o,r);var a=new xg(t,n,i,o,s),c=new jd(xg[vu],a);return Wy(t,xg[Rg],e,c)}var ZK,Kn,No,XSe,EYe,iEe=I(()=>{Ua();Of();zr();KSe();kg();ZK="baseType",Kn="baseData",No="properties",XSe="true";EYe={Version:"3.1.1"}});var oEe,QO,tY,sEe=I(()=>{Ua();Po();Of();zr();kg();oEe=function(){function t(e,r){var n=[],i=!1;this[mS]=function(){return n},this._set=function(o){return n=o,n},er(t,this,function(o){o[Ff]=function(s){if(o[Uf]()>=r[UO]){i||(Ne(e,2,105,"Maximum in-memory buffer size reached: "+o[Uf](),!0),i=!0);return}n[Bf](s)},o[Uf]=function(){return n[jt]},o.size=function(){for(var s=n[jt],a=0;a<n[jt];a++)s+=n[a][jt];return r[hR]||(s+=2),s},o[Ag]=function(){n=[],i=!1},o.getItems=function(){return n.slice(0)},o.batchPayloads=function(s){if(s&&s[jt]>0){var a=r[hR]?s.join(`
`):"["+s.join(",")+"]";return a}return null},o[gR]=function(s,a,c){var u=n.slice(0);s=s||e,a=a||{};var l=c?new tY(s,a):new QO(s,a);return he(u,function(d){l[Ff](d)}),l}})}return t.__ieDyn=1,t}(),QO=function(t){Fa(e,t);function e(r,n){var i=t.call(this,r,n)||this;return er(e,i,function(o,s){o[hS]=function(a){s[Ag]()},o[Vy]=function(a){}}),i}return e.__ieDyn=1,e}(oEe),tY=function(t){Fa(e,t);function e(r,n){var i=t.call(this,r,n)||this,o=!1,s=n?.namePrefix,a=n[vR]||{getItem:AO,setItem:PO},c=a.getItem,u=a.setItem;return er(e,i,function(l,d){var p=g(e[BO]),f=g(e[qf]),m=l._set(p.concat(f));m[jt]>e[gS]&&(m[jt]=e[gS]),v(e[qf],[]),v(e[BO],m),l[Ff]=function(y){if(l[Uf]()>=e[gS]){o||(Ne(r,2,67,"Maximum buffer size reached: "+l[Uf](),!0),o=!0);return}d[Ff](y),v(e.BUFFER_KEY,l[mS]())},l[Ag]=function(){d[Ag](),v(e.BUFFER_KEY,l[mS]()),v(e[qf],[]),o=!1},l[hS]=function(y){v(e[BO],l._set(h(y,l[mS]())));var b=g(e[qf]);b instanceof Array&&y instanceof Array&&(b=b.concat(y),b[jt]>e[gS]&&(Ne(r,1,67,"Sent buffer reached its maximum size: "+b[jt],!0),b[jt]=e[gS]),v(e[qf],b))},l[Vy]=function(y){var b=g(e[qf]);b=h(y,b),v(e[qf],b)},l[gR]=function(y,b,x){x=!!x;var S=l[mS]().slice(0),T=g(e[qf]).slice(0);y=y||r,b=b||{},l[Ag]();var L=x?new e(y,b):new QO(y,b);return he(S,function(M){L[Ff](M)}),x&&L[hS](T),L};function h(y,b){var x=[];return he(b,function(S){!dt(S)&&Er(y,S)===-1&&x[Bf](S)}),x}function g(y){var b=y;try{b=s?s+"_"+b:b;var x=c(r,b);if(x){var S=ns().parse(x);if(Lt(S)&&(S=ns().parse(S)),S&&Ye(S))return S}}catch(T){Ne(r,1,42," storage key: "+b+", "+Cn(T),{exception:Ge(T)})}return[]}function v(y,b){var x=y;try{x=s?s+"_"+x:x;var S=JSON[Ig](b);u(r,x,S)}catch(T){u(r,x,JSON[Ig]([])),Ne(r,2,41," storage key: "+x+", "+Cn(T)+". Buffer cleared",{exception:Ge(T)})}}}),i}return e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(oEe)});var aEe,cEe=I(()=>{Po();zr();kg();aEe=function(){function t(e){er(t,this,function(r){r[bS]=function(s){var a=n(s,"root");try{return ns()[Ig](a)}catch(c){Ne(e,1,48,c&&dt(c[Mf])?c[Mf]():"Error serializing object",null,!0)}};function n(s,a){var c="__aiCircularRefCheck",u={};if(!s)return Ne(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),u;if(s[c])return Ne(e,2,50,"Circular reference detected while serializing object",{name:a},!0),u;if(!s.aiDataContract){if(a==="measurements")u=o(s,"number",a);else if(a==="properties")u=o(s,"string",a);else if(a==="tags")u=o(s,"string",a);else if(Ye(s))u=i(s,a);else{Ne(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{ns()[Ig](s),u=s}catch(l){Ne(e,1,48,l&&dt(l[Mf])?l[Mf]():"Error serializing object",null,!0)}}return u}return s[c]=!0,$e(s.aiDataContract,function(l,d){var p=dt(d)?d()&1:d&1,f=dt(d)?d()&4:d&4,m=d&2,h=s[l]!==void 0,g=Tn(s[l])&&s[l]!==null;if(p&&!h&&!m)Ne(e,1,24,"Missing required field specification. The field is required but not present on source",{field:l,name:a});else if(!f){var v=void 0;g?m?v=i(s[l],l):v=n(s[l],l):v=s[l],v!==void 0&&(u[l]=v)}}),delete s[c],u}function i(s,a){var c;if(s)if(!Ye(s))Ne(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var u=0;u<s[jt];u++){var l=s[u],d=n(l,a+"["+u+"]");c[Bf](d)}}return c}function o(s,a,c){var u;return s&&(u={},$e(s,function(l,d){if(a==="string")d===void 0?u[l]="undefined":d===null?u[l]="null":d[Mf]?u[l]=d[Mf]():u[l]="invalid field: toString() is not defined.";else if(a==="number")if(d===void 0)u[l]="undefined";else if(d===null)u[l]="null";else{var p=parseFloat(d);u[l]=p}else u[l]="invalid field: "+c+" is of unknown type.",Ne(e,1,u[l],null,!0)})),u}})}return t.__ieDyn=1,t}()});var TYe,uEe,lEe=I(()=>{kg();TYe=8,uEe=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var r=this.getHashCode(e)/t.INT_MAX_VALUE;return r*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[jt]<TYe;)e=e.concat(e);for(var r=5381,n=0;n<e[jt];++n)r=(r<<5)+r+e.charCodeAt(n),r=r&r;return Math.abs(r)},t.INT_MAX_VALUE=2147483647,t}()});var dEe,pEe=I(()=>{Of();kg();lEe();dEe=function(){function t(){var e=this,r=new uEe,n=new fS;e[YO]=function(i){var o=0;return i[oo]&&i[oo][n.userId]?o=r.getHashCodeScore(i[oo][n.userId]):i.ext&&i.ext.user&&i.ext.user.id?o=r[QSe](i.ext.user.id):i[oo]&&i[oo][n.operationId]?o=r.getHashCodeScore(i[oo][n.operationId]):i.ext&&i.ext.telemetryTrace&&i.ext.telemetryTrace[zy]?o=r.getHashCodeScore(i.ext.telemetryTrace[zy]):o=Math.random()*100,o}}return t}()});var fEe,mEe=I(()=>{Of();zr();kg();pEe();fEe=function(){function t(e,r){this.INT_MAX_VALUE=2147483647;var n=r||dl(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[_S]=e,this.samplingScoreGenerator=new dEe}return t.prototype.isSampledIn=function(e){var r=this[_S],n=!1;return r==null||r>=100||e.baseType===Gd[vu]?!0:(n=this.samplingScoreGenerator[YO](e)<r,n)},t}()});function gEe(t){try{return t.responseText}catch{}return null}function IYe(t){return t&&t.sendPOST}function wYe(t){return!isNaN(t)&&t>0&&t<=100}var Yn,Gf,Vd,hEe,CYe,vEe,RYe,_R,yEe=I(()=>{Ua();Po();Of();zr();gt();iEe();sEe();cEe();mEe();kg();Vd=void 0,hEe="",CYe=65e3;vEe=na((Yn={endpointUrl:F1(ru,dg+Ud)},Yn[hR]=pu(),Yn[XK]=15e3,Yn[GK]=102400,Yn.disableTelemetry=pu(),Yn[zK]=pu(!0),Yn.isRetryDisabled=pu(),Yn[jO]=pu(!0),Yn[$K]=pu(!0),Yn[zO]=pu(),Yn[VK]=pu(),Yn[GO]=pu(),Yn[WK]=Vd,Yn.namePrefix=Vd,Yn.samplingPercentage=F1(wYe,100),Yn[HO]=Vd,Yn[QK]=Vd,Yn[UO]=1e4,Yn[vR]=!1,Yn.httpXHROverride={isVal:IYe,v:Vd},Yn[jK]=pu(),Yn.transports=Vd,Yn.retryCodes=Vd,Yn));RYe=(Gf={},Gf[Hd.dataType]=eY,Gf[xg.dataType]=nEe,Gf[bg.dataType]=tEe,Gf[Sg.dataType]=rEe,Gf[yg.dataType]=ZSe,Gf[Gd.dataType]=eEe,Gf[_g.dataType]=JSe,Gf),_R=function(t){Fa(e,t);function e(){var r=t.call(this)||this;r.priority=1001,r.identifier=HK;var n,i,o,s,a,c,u,l,d=0,p,f,m,h,g,v,y,b,x,S,T,L,M,j,N,J,X,D,E,A,F,O,Z,$,z,se,He;return er(e,r,function(ee,ft){at(),ee.pause=function(){ya(),s=!0},ee.resume=function(){s&&(s=!1,i=null,pi(),Nl())},ee.flush=function(H,ne,pe){if(H===void 0&&(H=!0),!s){ya();try{return ee[vS](H,null,pe||1)}catch(_e){Ne(ee[as](),1,22,"flush failed, telemetry will not be collected: "+Cn(_e),{exception:Ge(_e)})}}},ee.onunloadFlush=function(){if(!s)if(y||A)try{return ee[vS](!0,Ub,2)}catch(H){Ne(ee[as](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Cn(H),{exception:Ge(H)})}else ee.flush(!1)},ee.addHeader=function(H,ne){l[H]=ne},ee[qO]=function(H,ne,pe,_e){ee.isInitialized()&&Ne(ee[as](),1,28,"Sender is already initialized"),ft[qO](H,ne,pe,_e);var q=ee.identifier;c=new aEe(ne.logger),n=0,i=null,o=0,ee[yS]=null,u=0;var Q=ee[as]();m=Sc(is("Sender"),ne.evtNamespace&&ne.evtNamespace()),f=MO(m),ee._addHook(ro(H,function(ce){var Se=ce.cfg;Se.storagePrefix&&IO(Se.storagePrefix);var We=aa(null,Se,ne),Pe=We.getExtCfg(q,vEe);Ur(ee,"_senderConfig",{g:function(){return Pe}}),g!==Pe.endpointUrl&&(h=g=Pe.endpointUrl),S&&S!==Pe[HO]&&he(S,function(Go){delete l[Go.header]}),v=Pe[GK],y=(Pe[GO]===!1||Pe[jO]===!1)&&Va(),b=Pe[GO]===!1&&Va(),x=Pe[jO]===!1&&Va(),A=Pe[jK],F=!!Pe[zO],He=Pe.retryCodes;var cr=Pe[vR],br=!!Pe[zK]&&(!!cr||Hy()),Hi=Pe.namePrefix,ec=br!==J||br&&D!==Hi||br&&X!==cr;if(ee[Hf]){if(ec)try{ee._buffer=ee._buffer[gR](Q,Pe,br)}catch(Go){Ne(ee[as](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Cn(Go),{exception:Ge(Go)})}pi()}else ee[Hf]=br?new tY(Q,Pe):new QO(Q,Pe);D=Hi,J=br,X=cr,O=!Pe[VK]&&vf(!0),z=!!Pe[$K],ee._sample=new fEe(Pe.samplingPercentage,Q),L=Pe[WK],Fe(L,Se)||Ne(Q,1,100,"Invalid Instrumentation key "+L),S=Pe[HO],!lR(h)&&S&&S[jt]>0?he(S,function(Go){r.addHeader(Go.header,Go.value)}):S=null,E=Pe[KK];var fm=Ct();se?se.SetConfig(fm):(se=new _y,se[qO](fm,Q));var zs=Pe.httpXHROverride,mm=null,O0=null,RDe=_f([3,1,2],Pe.transports);mm=se&&se[yR](RDe,!1);var w9=se&&se.getFallbackInst();Z=function(Go,M0){return _t(w9,Go,M0)},$=function(Go,M0){return _t(w9,Go,M0,!1)},mm=A?zs:mm||zs||w9,ee[yS]=function(Go,M0){return _t(mm,Go,M0)},O&&(p=Bb);var R9=_f([3,1],Pe[YK]);O||(R9=R9.filter(function(Go){return Go!==2})),O0=se&&se[yR](R9,!0),O0=A?zs:O0||zs,(A||Pe[YK]||!p)&&O0&&(p=function(Go,M0){return _t(O0,Go,M0)}),p||(p=Z),T=Pe.disableTelemetry,M=Pe[QK]||Vd,j=Pe.isRetryDisabled,N=Pe[XK]}))},ee.processTelemetry=function(H,ne){ne=ee._getTelCtx(ne);var pe=ne[as]();try{var _e=Qe(H,pe);if(!_e)return;var q=U(H,pe);if(!q)return;var Q=c[bS](q),ce=ee[Hf];pi(Q),ce[Ff](Q),Nl()}catch(Se){Ne(pe,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Cn(Se),{exception:Ge(Se)})}ee.processNext(H,ne)},ee.isCompletelyIdle=function(){return!s&&d===0&&ee._buffer[Uf]()===0},ee._xhrReadyStateChange=function(H,ne,pe){return mr(H,ne,pe)},ee[vS]=function(H,ne,pe){H===void 0&&(H=!0);var _e;if(!s)try{var q=ee[Hf];if(T)q[Ag]();else{if(q[Uf]()>0){var Q=q.getItems();we(pe||0,H),ne?_e=ne.call(ee,Q,H):_e=ee[yS](Q,H)}o=+new Date}ya()}catch(Se){var ce=vw();(!ce||ce>9)&&Ne(ee[as](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Cn(Se),{exception:Ge(Se)})}return _e},ee.getOfflineSupport=function(){var H;return H={getUrl:function(){return h},createPayload:Ie},H[bS]=ae,H.batch=le,H.shouldProcess=function(ne){return!!Qe(ne)},H},ee._doTeardown=function(H,ne){ee.onunloadFlush(),Ef(f,!1),at()},ee[Pg]=function(H,ne,pe){Ne(ee[as](),2,26,"Failed to send telemetry.",{message:ne}),ee._buffer&&ee._buffer[Vy](H)},ee[VO]=function(H,ne){for(var pe=[],_e=[],q=ne.errors.reverse(),Q=0,ce=q;Q<ce.length;Q++){var Se=ce[Q],We=H.splice(Se.index,1)[0];pm(Se.statusCode)?_e[Bf](We):pe[Bf](We)}H[jt]>0&&ee[bR](H,ne[$O]),pe[jt]>0&&ee[Pg](pe,bf(null,["partial success",ne[$O],"of",ne.itemsReceived].join(" "))),_e[jt]>0&&(xp(_e),Ne(ee[as](),2,40,"Partial success. Delivered: "+H[jt]+", Failed: "+pe[jt]+". Will retry to send "+_e[jt]+" our of "+ne[YSe]+" items"))},ee[bR]=function(H,ne){ee._buffer&&ee._buffer[Vy](H)},ee._xdrOnLoad=function(H,ne){return ze(H,ne)};function ze(H,ne){var pe=gEe(H);if(H&&(pe+""=="200"||pe===""))n=0,ee[bR](ne,0);else{var _e=my(pe);_e&&_e.itemsReceived&&_e.itemsReceived>_e[$O]&&!j?ee[VO](ne,_e):ee[Pg](ne,fy(H))}}function Ct(){var H;try{var ne={xdrOnComplete:function(_e,q,Q){var ce=me(Q);if(ce)return ze(_e,ce)},fetchOnComplete:function(_e,q,Q,ce){var Se=me(ce);if(Se)return js(_e.status,Se,_e.url,Se[jt],_e.statusText,Q||"")},xhrOnComplete:function(_e,q,Q){var ce=me(Q);if(ce)return mr(_e,ce,ce[jt])},beaconOnRetry:function(_e,q,Q){return L0(_e,q,Q)}},pe=(H={},H[KK]=E,H.isOneDs=!1,H.disableCredentials=!1,H[zO]=F,H.disableBeacon=!x,H.disableBeaconSync=!b,H.senderOnCompleteCallBack=ne,H);return pe}catch{}return null}function mr(H,ne,pe){H.readyState===4&&js(H.status,ne,H.responseURL,pe,bf(H),gEe(H)||H.response)}function me(H){try{if(H){var ne=H,pe=ne[WO];return pe&&pe[jt]?pe:null}}catch{}return null}function Qe(H,ne){if(T)return!1;if(!H)return ne&&Ne(ne,1,7,"Cannot send empty telemetry"),!1;if(H.baseData&&!H[KO])return ne&&Ne(ne,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(H[KO]||(H[KO]="EventData"),!ee[yS])return ne&&Ne(ne,1,28,"Sender was not initialized"),!1;if(be(H))H[nS]=ee._sample[_S];else return ne&&Ne(ne,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ee._sample[_S]}),!1;return!0}function U(H,ne){var pe=H.iKey||L,_e=e.constructEnvelope(H,pe,ne,M);if(!_e){Ne(ne,1,47,"Unable to create an AppInsights envelope");return}var q=!1;if(H[oo]&&H[oo][iS]&&(he(H[oo][iS],function(Q){try{Q&&Q(_e)===!1&&(q=!0,sa(ne,"Telemetry processor check returns false"))}catch(ce){Ne(ne,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Cn(ce),{exception:Ge(ce)},!0)}}),delete H[oo][iS]),!q)return _e}function ae(H){var ne=hEe,pe=ee[as]();try{var _e=Qe(H,pe),q=null;_e&&(q=U(H,pe)),q&&(ne=c[bS](q))}catch{}return ne}function le(H){var ne=hEe;return H&&H[jt]&&(ne="["+H.join(",")+"]"),ne}function Ie(H){var ne,pe=An();return ne={urlString:h},ne[ss]=H,ne.headers=pe,ne}function be(H){return ee._sample.isSampledIn(H)}function et(H,ne,pe,_e){ne===200&&H?ee._onSuccess(H,H[jt]):_e&&ee[Pg](H,_e)}function _t(H,ne,pe,_e){_e===void 0&&(_e=!0);var q=function(Se,We,Pe){return et(ne,Se,We,Pe)},Q=Jr(ne),ce=H&&H.sendPOST;return ce&&Q?(_e&&ee._buffer[hS](ne),ce(Q,q,!pe)):null}function Jr(H){var ne;if(Ye(H)&&H[jt]>0){var pe=ee[Hf].batchPayloads(H),_e=An(),q=(ne={},ne[ss]=pe,ne.urlString=h,ne.headers=_e,ne.disableXhrSync=F,ne.disableFetchKeepAlive=!O,ne[WO]=H,ne);return q}return null}function An(){try{var H=l||{};return lR(h)&&(H[Dy[6]]=Dy[7]),H}catch{}return null}function pi(H){var ne=H?H[jt]:0;return ee[Hf].size()+ne>v?((!f||f.isOnline())&&ee[vS](!0,null,10),!0):!1}function js(H,ne,pe,_e,q,Q){var ce=null;if(ee._appId||(ce=my(Q),ce&&ce.appId&&(ee._appId=ce.appId)),(H<200||H>=300)&&H!==0){if((H===301||H===307||H===308)&&!_p(pe)){ee[Pg](ne,q);return}!j&&pm(H)?(xp(ne),Ne(ee[as](),2,40,". Response code "+H+". Will retry to send "+ne[jt]+" items.")):ee[Pg](ne,q)}else if(f&&!f.isOnline()){if(!j){var Se=10;xp(ne,Se),Ne(ee[as](),2,40,". Offline - Response Code: ".concat(H,". Offline status: ").concat(!f.isOnline(),". Will retry to send ").concat(ne.length," items."))}}else _p(pe),H===206?(ce||(ce=my(Q)),ce&&!j?ee[VO](ne,ce):ee[Pg](ne,q)):(n=0,ee[bR](ne,_e))}function _p(H){return u>=10?!1:!xe(H)&&H!==""&&H!==h?(h=H,++u,!0):!1}function Ub(H,ne){if(p)p(H,!1);else{var pe=se&&se[yR]([3],!0);return _t(pe,H,ne)}}function L0(H,ne,pe){var _e=H,q=_e&&_e[WO];if(z)$&&$(q,!0),Ne(ee[as](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Q=[],ce=0;ce<q[jt];ce++){var Se=q[ce],We=[Se],Pe=Jr(We);pe(Pe,ne)?ee._onSuccess(We,We[jt]):Q[Bf](Se)}Q[jt]>0&&($&&$(Q,!0),Ne(ee[as](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Bb(H,ne){var pe=null;if(Ye(H)){for(var _e=H[jt],q=0;q<H[jt];q++)_e+=H[q][jt];var Q=se.getSyncFetchPayload();Q+_e<=CYe?pe=2:Va()?pe=3:(pe=1,Ne(ee[as](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var ce=se&&se[yR]([pe],!0);return _t(ce,H,ne)}return null}function xp(H,ne){if(ne===void 0&&(ne=1),!(!H||H[jt]===0)){var pe=ee[Hf];pe[Vy](H),n++;for(var _e=0,q=H;_e<q.length;_e++){var Q=q[_e];pe[Ff](Q)}RT(ne),Nl()}}function RT(H){var ne=10,pe;if(n<=1)pe=ne;else{var _e=(Math.pow(2,n)-1)/2,q=Math.floor(Math.random()*_e*ne)+1;q=H*q,pe=Math.max(Math.min(q,3600),ne)}var Q=ui()+pe*1e3;i=Q}function Nl(){if(!a&&!s){var H=i?Math.max(0,i-ui()):0,ne=Math.max(N,H);a=Ma(function(){a=null,ee[vS](!0,null,1)},ne)}}function ya(){a&&a.cancel(),a=null,i=null}function pm(H){return xe(He)?H===401||H===408||H===429||H===500||H===502||H===503||H===504:He[jt]&&He.indexOf(H)>-1}function Y(){var H="getNotifyMgr";return ee.core[H]?ee.core[H]():ee.core._notificationManager}function we(H,ne){var pe=Y();if(pe&&pe[JK])try{pe[JK](H,ne)}catch(_e){Ne(ee[as](),1,74,"send request notification failed: "+Cn(_e),{exception:Ge(_e)})}}function Fe(H,ne){var pe=ne.disableInstrumentationKeyValidation,_e=xe(pe)?!1:pe;if(_e)return!0;var q="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Q=new RegExp(q);return Q.test(H)}function at(){ee[yS]=null,ee[Hf]=null,ee._appId=null,ee._sample=null,l={},f=null,n=0,i=null,o=null,s=!1,a=null,c=null,u=0,d=0,p=null,m=null,h=null,g=null,v=0,y=!1,S=null,T=!1,L=null,M=Vd,j=!1,J=null,D=Vd,F=!1,O=!1,z=!1,Z=null,$=null,se=null,Ur(ee,"_senderConfig",{g:function(){return Q4({},vEe)}})}}),r}return e.constructEnvelope=function(r,n,i,o){var s;n!==r.iKey&&!xe(n)?s=au(au({},r),{iKey:n}):s=r;var a=RYe[s.baseType]||eY;return a(i,s,o)},e}(wf)});var rY=I(()=>{yEe()});var XO,JO,ZO,xR,bEe=I(()=>{XO="instrumentationKey",JO="connectionString",ZO="endpointUrl",xR="userOverrideEndpointUrl"});var _Ee={};an(_Ee,{AppInsightsCore:()=>Rf,ApplicationInsights:()=>kYe,Sender:()=>_R,SeverityLevel:()=>LO,arrForEach:()=>he,isNullOrUndefined:()=>xe,proxyFunctions:()=>xc,throwError:()=>si});function PYe(t){return t&&t>0}var AYe,kYe,xEe=I(()=>{Po();rY();Of();zr();gt();bEe();zr();Of();rY();AYe={diagnosticLogInterval:F1(PYe,1e4)};kYe=function(){function t(e){var r=new Rf,n;(xe(e)||xe(e[XO])&&xe(e[JO]))&&si("Invalid input configuration"),er(t,this,function(o){Ur(o,"config",{g:function(){return n}}),s(),o.initialize=s,o.track=i,xc(o,r,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"]);function s(){var a=$n(e||{},AYe);n=a.cfg,r.addUnloadHook(ro(a,function(){if(n[JO]){var c=dR(n[JO]),u=c.ingestionendpoint;n[ZO]=n[xR]?n[xR]:u+Ud,n[XO]=c.instrumentationkey||n[XO]}n[ZO]=n[xR]?n[xR]:n[ZO]})),r.initialize(n,[new _R])}});function i(o){o&&(o.baseData=o.baseData||{},o.baseType=o.baseType||"EventData"),r.track(o)}}return t.__ieDyn=1,t}()});var SEe=k($d=>{"use strict";var DYe=$d&&$d.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NYe=$d&&$d.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LYe=$d&&$d.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&DYe(e,t,r);return NYe(e,t),e};Object.defineProperty($d,"__esModule",{value:!0});$d.appInsightsClientFactory=void 0;var OYe=(Of(),Gi(WSe)),MYe=mV(),FYe=async(t,e,r)=>{let n;try{let o=await Promise.resolve().then(()=>LYe((xEe(),Gi(_Ee)))),s={};if(e){let a={alwaysUseXhrOverride:!0,httpXHROverride:e};s[OYe.BreezeChannelIdentifier]=a}n=new o.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:s})}catch(o){return Promise.reject(o)}return{logEvent:(o,s)=>{let a={...s?.properties,...s?.measurements};r?.length&&MYe.TelemetryUtil.applyReplacements(a,r),n?.track({name:o,data:a,baseType:"EventData",baseData:{name:o,properties:s?.properties,measurements:s?.measurements}})},flush:async()=>{n?.flush(!1)},dispose:async()=>new Promise(s=>{n?.unload(!0,()=>{s(),n=void 0},1e3)})}};$d.appInsightsClientFactory=FYe});var IEe=k(jf=>{"use strict";var UYe=jf&&jf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BYe=jf&&jf.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oY=jf&&jf.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&UYe(e,t,r);return BYe(e,t),e};Object.defineProperty(jf,"__esModule",{value:!0});var nY=oY(require("os")),EEe=oY(require("vscode")),qYe=oY(require("https")),HYe=Hye(),GYe=Gye(),TEe=mV(),jYe=j1e(),zYe=SEe();function CEe(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=qYe.request(e.urlString,n,o=>{o.on("data",function(s){r(o.statusCode??200,o.headers,s.toString())}),o.on("error",function(){r(0,{})})});i.write(e.data,o=>{o&&r(0,{})}),i.end()}catch{r(0,{})}}}}var iY=class extends HYe.BaseTelemetryReporter{constructor(e,r){let n=s=>(0,zYe.appInsightsClientFactory)(s,CEe(),r);TEe.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=s=>(0,jYe.oneDataSystemClientFactory)(s,EEe,CEe()));let i={release:nY.release(),platform:nY.platform(),architecture:nY.arch()},o=new GYe.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(o,EEe,{additionalCommonProperties:TEe.TelemetryUtil.getAdditionalCommonProperties(i)})}};jf.default=iY});var JTe=k(jg=>{"use strict";var QXe=jg&&jg.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(jg,"__esModule",{value:!0});jg.isBinaryFileSync=jg.isBinaryFile=void 0;var Gg=require("fs"),SQ=require("util"),XXe=SQ.promisify(Gg.stat),JXe=SQ.promisify(Gg.open),ZXe=SQ.promisify(Gg.close),wR=512,xQ=class{constructor(e,r){this.fileBuffer=e,this.size=r,this.offset=0,this.error=!1}hasError(){return this.error}nextByte(){return this.offset===this.size||this.hasError()?(this.error=!0,255):this.fileBuffer[this.offset++]}next(e){let r=new Array;for(let n=0;n<e;n++)r[n]=this.nextByte();return r}};function _Q(t){let e=0,r=0;for(;!t.hasError();){let n=t.nextByte();if(r=r|(n&127)<<7*e,!(n&128))break;e++}return r}function eJe(t){switch(_Q(t)&7){case 0:return _Q(t),!0;case 1:return t.next(8),!0;case 2:let n=_Q(t);return t.next(n),!0;case 5:return t.next(4),!0}return!1}function tJe(t,e){let r=new xQ(t,e),n=0;for(;;){if(!eJe(r)&&!r.hasError())return!1;if(r.hasError())break;n++}return n>0}function rJe(t,e){return QXe(this,void 0,void 0,function*(){if(QTe(t)){let r=yield XXe(t);XTe(r);let n=yield JXe(t,"r"),i=Buffer.alloc(wR);return new Promise((o,s)=>{Gg.read(n,i,0,wR,0,(a,c,u)=>{ZXe(n),a?s(a):o(P5(i,c))})})}else return e===void 0&&(e=t.length),P5(t,e)})}jg.isBinaryFile=rJe;function nJe(t,e){if(QTe(t)){let r=Gg.statSync(t);XTe(r);let n=Gg.openSync(t,"r"),i=Buffer.alloc(wR),o=Gg.readSync(n,i,0,wR,0);return Gg.closeSync(n),P5(i,o)}else return e===void 0&&(e=t.length),P5(t,e)}jg.isBinaryFileSync=nJe;function P5(t,e){if(e===0)return!1;let r=0,n=Math.min(e,wR);if(e>=3&&t[0]===239&&t[1]===187&&t[2]===191||e>=4&&t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255||e>=4&&t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0||e>=4&&t[0]===132&&t[1]===49&&t[2]===149&&t[3]===51)return!1;if(n>=5&&t.slice(0,5).toString()==="%PDF-")return!0;if(e>=2&&t[0]===254&&t[1]===255||e>=2&&t[0]===255&&t[1]===254)return!1;for(let i=0;i<n;i++){if(t[i]===0)return!0;if((t[i]<7||t[i]>14)&&(t[i]<32||t[i]>127)){if(t[i]>193&&t[i]<224&&i+1<n){if(i++,t[i]>127&&t[i]<192)continue}else if(t[i]>223&&t[i]<240&&i+2<n&&(i++,t[i]>127&&t[i]<192&&t[i+1]>127&&t[i+1]<192)){i++;continue}if(r++,i>=32&&r*100/n>10)return!0}}return!!(r*100/n>10||r>1&&tJe(t,n))}function QTe(t){return typeof t=="string"}function XTe(t){if(!t.isFile())throw new Error("Path provided was not a file!")}});var PR=k((l$t,aCe)=>{"use strict";var Xd="\\\\/",nCe=`[^${Xd}]`,Wf="\\.",fJe="\\+",mJe="\\?",N5="\\/",hJe="(?=.)",iCe="[^/]",AQ=`(?:${N5}|$)`,oCe=`(?:^|${N5})`,PQ=`${Wf}{1,2}${AQ}`,gJe=`(?!${Wf})`,vJe=`(?!${oCe}${PQ})`,yJe=`(?!${Wf}{0,1}${AQ})`,bJe=`(?!${PQ})`,_Je=`[^.${N5}]`,xJe=`${iCe}*?`,SJe="/",sCe={DOT_LITERAL:Wf,PLUS_LITERAL:fJe,QMARK_LITERAL:mJe,SLASH_LITERAL:N5,ONE_CHAR:hJe,QMARK:iCe,END_ANCHOR:AQ,DOTS_SLASH:PQ,NO_DOT:gJe,NO_DOTS:vJe,NO_DOT_SLASH:yJe,NO_DOTS_SLASH:bJe,QMARK_NO_DOT:_Je,STAR:xJe,START_ANCHOR:oCe,SEP:SJe},EJe={...sCe,SLASH_LITERAL:`[${Xd}]`,QMARK:nCe,STAR:`${nCe}*?`,DOTS_SLASH:`${Wf}{1,2}(?:[${Xd}]|$)`,NO_DOT:`(?!${Wf})`,NO_DOTS:`(?!(?:^|[${Xd}])${Wf}{1,2}(?:[${Xd}]|$))`,NO_DOT_SLASH:`(?!${Wf}{0,1}(?:[${Xd}]|$))`,NO_DOTS_SLASH:`(?!${Wf}{1,2}(?:[${Xd}]|$))`,QMARK_NO_DOT:`[^.${Xd}]`,START_ANCHOR:`(?:^|[${Xd}])`,END_ANCHOR:`(?:[${Xd}]|$)`,SEP:"\\"},TJe={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};aCe.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:TJe,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?EJe:sCe}}});var L5=k(Qa=>{"use strict";var{REGEX_BACKSLASH:CJe,REGEX_REMOVE_BACKSLASH:IJe,REGEX_SPECIAL_CHARS:wJe,REGEX_SPECIAL_CHARS_GLOBAL:RJe}=PR();Qa.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);Qa.hasRegexChars=t=>wJe.test(t);Qa.isRegexChar=t=>t.length===1&&Qa.hasRegexChars(t);Qa.escapeRegex=t=>t.replace(RJe,"\\$1");Qa.toPosixSlashes=t=>t.replace(CJe,"/");Qa.removeBackslashes=t=>t.replace(IJe,e=>e==="\\"?"":e);Qa.supportsLookbehinds=()=>{if(typeof process<"u"){let t=process.version.slice(1).split(".").map(Number);if(t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10)return!0}return!1};Qa.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?Qa.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};Qa.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};Qa.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o};Qa.basename=(t,{windows:e}={})=>{let r=t.split(e?/[\\/]/:"/"),n=r[r.length-1];return n===""?r[r.length-2]:n}});var hCe=k((p$t,mCe)=>{"use strict";var cCe=L5(),{CHAR_ASTERISK:kQ,CHAR_AT:AJe,CHAR_BACKWARD_SLASH:kR,CHAR_COMMA:PJe,CHAR_DOT:DQ,CHAR_EXCLAMATION_MARK:NQ,CHAR_FORWARD_SLASH:fCe,CHAR_LEFT_CURLY_BRACE:LQ,CHAR_LEFT_PARENTHESES:OQ,CHAR_LEFT_SQUARE_BRACKET:kJe,CHAR_PLUS:DJe,CHAR_QUESTION_MARK:uCe,CHAR_RIGHT_CURLY_BRACE:NJe,CHAR_RIGHT_PARENTHESES:lCe,CHAR_RIGHT_SQUARE_BRACKET:LJe}=PR(),dCe=t=>t===fCe||t===kR,pCe=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},OJe=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],c=t,u=-1,l=0,d=0,p=!1,f=!1,m=!1,h=!1,g=!1,v=!1,y=!1,b=!1,x=!1,S=!1,T=0,L,M,j={value:"",depth:0,isGlob:!1},N=()=>u>=n,J=()=>c.charCodeAt(u+1),X=()=>(L=M,c.charCodeAt(++u));for(;u<n;){M=X();let O;if(M===kR){y=j.backslashes=!0,M=X(),M===LQ&&(v=!0);continue}if(v===!0||M===LQ){for(T++;N()!==!0&&(M=X());){if(M===kR){y=j.backslashes=!0,X();continue}if(M===LQ){T++;continue}if(v!==!0&&M===DQ&&(M=X())===DQ){if(p=j.isBrace=!0,m=j.isGlob=!0,S=!0,i===!0)continue;break}if(v!==!0&&M===PJe){if(p=j.isBrace=!0,m=j.isGlob=!0,S=!0,i===!0)continue;break}if(M===NJe&&(T--,T===0)){v=!1,p=j.isBrace=!0,S=!0;break}}if(i===!0)continue;break}if(M===fCe){if(o.push(u),s.push(j),j={value:"",depth:0,isGlob:!1},S===!0)continue;if(L===DQ&&u===l+1){l+=2;continue}d=u+1;continue}if(r.noext!==!0&&(M===DJe||M===AJe||M===kQ||M===uCe||M===NQ)===!0&&J()===OQ){if(m=j.isGlob=!0,h=j.isExtglob=!0,S=!0,M===NQ&&u===l&&(x=!0),i===!0){for(;N()!==!0&&(M=X());){if(M===kR){y=j.backslashes=!0,M=X();continue}if(M===lCe){m=j.isGlob=!0,S=!0;break}}continue}break}if(M===kQ){if(L===kQ&&(g=j.isGlobstar=!0),m=j.isGlob=!0,S=!0,i===!0)continue;break}if(M===uCe){if(m=j.isGlob=!0,S=!0,i===!0)continue;break}if(M===kJe){for(;N()!==!0&&(O=X());){if(O===kR){y=j.backslashes=!0,X();continue}if(O===LJe){f=j.isBracket=!0,m=j.isGlob=!0,S=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&M===NQ&&u===l){b=j.negated=!0,l++;continue}if(r.noparen!==!0&&M===OQ){if(m=j.isGlob=!0,i===!0){for(;N()!==!0&&(M=X());){if(M===OQ){y=j.backslashes=!0,M=X();continue}if(M===lCe){S=!0;break}}continue}break}if(m===!0){if(S=!0,i===!0)continue;break}}r.noext===!0&&(h=!1,m=!1);let D=c,E="",A="";l>0&&(E=c.slice(0,l),c=c.slice(l),d-=l),D&&m===!0&&d>0?(D=c.slice(0,d),A=c.slice(d)):m===!0?(D="",A=c):D=c,D&&D!==""&&D!=="/"&&D!==c&&dCe(D.charCodeAt(D.length-1))&&(D=D.slice(0,-1)),r.unescape===!0&&(A&&(A=cCe.removeBackslashes(A)),D&&y===!0&&(D=cCe.removeBackslashes(D)));let F={prefix:E,input:t,start:l,base:D,glob:A,isBrace:p,isBracket:f,isGlob:m,isExtglob:h,isGlobstar:g,negated:b,negatedExtglob:x};if(r.tokens===!0&&(F.maxDepth=0,dCe(M)||s.push(j),F.tokens=s),r.parts===!0||r.tokens===!0){let O;for(let Z=0;Z<o.length;Z++){let $=O?O+1:l,z=o[Z],se=t.slice($,z);r.tokens&&(Z===0&&l!==0?(s[Z].isPrefix=!0,s[Z].value=E):s[Z].value=se,pCe(s[Z]),F.maxDepth+=s[Z].depth),(Z!==0||se!=="")&&a.push(se),O=z}if(O&&O+1<t.length){let Z=t.slice(O+1);a.push(Z),r.tokens&&(s[s.length-1].value=Z,pCe(s[s.length-1]),F.maxDepth+=s[s.length-1].depth)}F.slashes=o,F.parts=a}return F};mCe.exports=OJe});var yCe=k((f$t,vCe)=>{"use strict";var O5=PR(),bl=L5(),{MAX_LENGTH:M5,POSIX_REGEX_SOURCE:MJe,REGEX_NON_SPECIAL_CHARS:FJe,REGEX_SPECIAL_CHARS_BACKREF:UJe,REPLACEMENTS:gCe}=O5,BJe=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>bl.escapeRegex(i)).join("..")}return r},NS=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,MQ=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=gCe[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(M5,r.maxLength):M5,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",c=O5.globChars(r.windows),u=O5.extglobChars(c),{DOT_LITERAL:l,PLUS_LITERAL:d,SLASH_LITERAL:p,ONE_CHAR:f,DOTS_SLASH:m,NO_DOT:h,NO_DOT_SLASH:g,NO_DOTS_SLASH:v,QMARK:y,QMARK_NO_DOT:b,STAR:x,START_ANCHOR:S}=c,T=me=>`(${a}(?:(?!${S}${me.dot?m:l}).)*?)`,L=r.dot?"":h,M=r.dot?y:b,j=r.bash===!0?T(r):x;r.capture&&(j=`(${j})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let N={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=bl.removePrefix(t,N),i=t.length;let J=[],X=[],D=[],E=o,A,F=()=>N.index===i-1,O=N.peek=(me=1)=>t[N.index+me],Z=N.advance=()=>t[++N.index]||"",$=()=>t.slice(N.index+1),z=(me="",Qe=0)=>{N.consumed+=me,N.index+=Qe},se=me=>{N.output+=me.output!=null?me.output:me.value,z(me.value)},He=()=>{let me=1;for(;O()==="!"&&(O(2)!=="("||O(3)==="?");)Z(),N.start++,me++;return me%2===0?!1:(N.negated=!0,N.start++,!0)},ee=me=>{N[me]++,D.push(me)},ft=me=>{N[me]--,D.pop()},ze=me=>{if(E.type==="globstar"){let Qe=N.braces>0&&(me.type==="comma"||me.type==="brace"),U=me.extglob===!0||J.length&&(me.type==="pipe"||me.type==="paren");me.type!=="slash"&&me.type!=="paren"&&!Qe&&!U&&(N.output=N.output.slice(0,-E.output.length),E.type="star",E.value="*",E.output=j,N.output+=E.output)}if(J.length&&me.type!=="paren"&&(J[J.length-1].inner+=me.value),(me.value||me.output)&&se(me),E&&E.type==="text"&&me.type==="text"){E.value+=me.value,E.output=(E.output||"")+me.value;return}me.prev=E,s.push(me),E=me},Ct=(me,Qe)=>{let U={...u[Qe],conditions:1,inner:""};U.prev=E,U.parens=N.parens,U.output=N.output;let ae=(r.capture?"(":"")+U.open;ee("parens"),ze({type:me,value:Qe,output:N.output?"":f}),ze({type:"paren",extglob:!0,value:Z(),output:ae}),J.push(U)},mr=me=>{let Qe=me.close+(r.capture?")":""),U;if(me.type==="negate"){let ae=j;if(me.inner&&me.inner.length>1&&me.inner.includes("/")&&(ae=T(r)),(ae!==j||F()||/^\)+$/.test($()))&&(Qe=me.close=`)$))${ae}`),me.inner.includes("*")&&(U=$())&&/^\.[^\\/.]+$/.test(U)){let le=MQ(U,{...e,fastpaths:!1}).output;Qe=me.close=`)${le})${ae})`}me.prev.type==="bos"&&(N.negatedExtglob=!0)}ze({type:"paren",extglob:!0,value:A,output:Qe}),ft("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let me=!1,Qe=t.replace(UJe,(U,ae,le,Ie,be,et)=>Ie==="\\"?(me=!0,U):Ie==="?"?ae?ae+Ie+(be?y.repeat(be.length):""):et===0?M+(be?y.repeat(be.length):""):y.repeat(le.length):Ie==="."?l.repeat(le.length):Ie==="*"?ae?ae+Ie+(be?j:""):j:ae?U:`\\${U}`);return me===!0&&(r.unescape===!0?Qe=Qe.replace(/\\/g,""):Qe=Qe.replace(/\\+/g,U=>U.length%2===0?"\\\\":U?"\\":"")),Qe===t&&r.contains===!0?(N.output=t,N):(N.output=bl.wrapOutput(Qe,N,e),N)}for(;!F();){if(A=Z(),A==="\0")continue;if(A==="\\"){let U=O();if(U==="/"&&r.bash!==!0||U==="."||U===";")continue;if(!U){A+="\\",ze({type:"text",value:A});continue}let ae=/^\\+/.exec($()),le=0;if(ae&&ae[0].length>2&&(le=ae[0].length,N.index+=le,le%2!==0&&(A+="\\")),r.unescape===!0?A=Z():A+=Z(),N.brackets===0){ze({type:"text",value:A});continue}}if(N.brackets>0&&(A!=="]"||E.value==="["||E.value==="[^")){if(r.posix!==!1&&A===":"){let U=E.value.slice(1);if(U.includes("[")&&(E.posix=!0,U.includes(":"))){let ae=E.value.lastIndexOf("["),le=E.value.slice(0,ae),Ie=E.value.slice(ae+2),be=MJe[Ie];if(be){E.value=le+be,N.backtrack=!0,Z(),!o.output&&s.indexOf(E)===1&&(o.output=f);continue}}}(A==="["&&O()!==":"||A==="-"&&O()==="]")&&(A=`\\${A}`),A==="]"&&(E.value==="["||E.value==="[^")&&(A=`\\${A}`),r.posix===!0&&A==="!"&&E.value==="["&&(A="^"),E.value+=A,se({value:A});continue}if(N.quotes===1&&A!=='"'){A=bl.escapeRegex(A),E.value+=A,se({value:A});continue}if(A==='"'){N.quotes=N.quotes===1?0:1,r.keepQuotes===!0&&ze({type:"text",value:A});continue}if(A==="("){ee("parens"),ze({type:"paren",value:A});continue}if(A===")"){if(N.parens===0&&r.strictBrackets===!0)throw new SyntaxError(NS("opening","("));let U=J[J.length-1];if(U&&N.parens===U.parens+1){mr(J.pop());continue}ze({type:"paren",value:A,output:N.parens?")":"\\)"}),ft("parens");continue}if(A==="["){if(r.nobracket===!0||!$().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(NS("closing","]"));A=`\\${A}`}else ee("brackets");ze({type:"bracket",value:A});continue}if(A==="]"){if(r.nobracket===!0||E&&E.type==="bracket"&&E.value.length===1){ze({type:"text",value:A,output:`\\${A}`});continue}if(N.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(NS("opening","["));ze({type:"text",value:A,output:`\\${A}`});continue}ft("brackets");let U=E.value.slice(1);if(E.posix!==!0&&U[0]==="^"&&!U.includes("/")&&(A=`/${A}`),E.value+=A,se({value:A}),r.literalBrackets===!1||bl.hasRegexChars(U))continue;let ae=bl.escapeRegex(E.value);if(N.output=N.output.slice(0,-E.value.length),r.literalBrackets===!0){N.output+=ae,E.value=ae;continue}E.value=`(${a}${ae}|${E.value})`,N.output+=E.value;continue}if(A==="{"&&r.nobrace!==!0){ee("braces");let U={type:"brace",value:A,output:"(",outputIndex:N.output.length,tokensIndex:N.tokens.length};X.push(U),ze(U);continue}if(A==="}"){let U=X[X.length-1];if(r.nobrace===!0||!U){ze({type:"text",value:A,output:A});continue}let ae=")";if(U.dots===!0){let le=s.slice(),Ie=[];for(let be=le.length-1;be>=0&&(s.pop(),le[be].type!=="brace");be--)le[be].type!=="dots"&&Ie.unshift(le[be].value);ae=BJe(Ie,r),N.backtrack=!0}if(U.comma!==!0&&U.dots!==!0){let le=N.output.slice(0,U.outputIndex),Ie=N.tokens.slice(U.tokensIndex);U.value=U.output="\\{",A=ae="\\}",N.output=le;for(let be of Ie)N.output+=be.output||be.value}ze({type:"brace",value:A,output:ae}),ft("braces"),X.pop();continue}if(A==="|"){J.length>0&&J[J.length-1].conditions++,ze({type:"text",value:A});continue}if(A===","){let U=A,ae=X[X.length-1];ae&&D[D.length-1]==="braces"&&(ae.comma=!0,U="|"),ze({type:"comma",value:A,output:U});continue}if(A==="/"){if(E.type==="dot"&&N.index===N.start+1){N.start=N.index+1,N.consumed="",N.output="",s.pop(),E=o;continue}ze({type:"slash",value:A,output:p});continue}if(A==="."){if(N.braces>0&&E.type==="dot"){E.value==="."&&(E.output=l);let U=X[X.length-1];E.type="dots",E.output+=A,E.value+=A,U.dots=!0;continue}if(N.braces+N.parens===0&&E.type!=="bos"&&E.type!=="slash"){ze({type:"text",value:A,output:l});continue}ze({type:"dot",value:A,output:l});continue}if(A==="?"){if(!(E&&E.value==="(")&&r.noextglob!==!0&&O()==="("&&O(2)!=="?"){Ct("qmark",A);continue}if(E&&E.type==="paren"){let ae=O(),le=A;if(ae==="<"&&!bl.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(E.value==="("&&!/[!=<:]/.test(ae)||ae==="<"&&!/<([!=]|\w+>)/.test($()))&&(le=`\\${A}`),ze({type:"text",value:A,output:le});continue}if(r.dot!==!0&&(E.type==="slash"||E.type==="bos")){ze({type:"qmark",value:A,output:b});continue}ze({type:"qmark",value:A,output:y});continue}if(A==="!"){if(r.noextglob!==!0&&O()==="("&&(O(2)!=="?"||!/[!=<:]/.test(O(3)))){Ct("negate",A);continue}if(r.nonegate!==!0&&N.index===0){He();continue}}if(A==="+"){if(r.noextglob!==!0&&O()==="("&&O(2)!=="?"){Ct("plus",A);continue}if(E&&E.value==="("||r.regex===!1){ze({type:"plus",value:A,output:d});continue}if(E&&(E.type==="bracket"||E.type==="paren"||E.type==="brace")||N.parens>0){ze({type:"plus",value:A});continue}ze({type:"plus",value:d});continue}if(A==="@"){if(r.noextglob!==!0&&O()==="("&&O(2)!=="?"){ze({type:"at",extglob:!0,value:A,output:""});continue}ze({type:"text",value:A});continue}if(A!=="*"){(A==="$"||A==="^")&&(A=`\\${A}`);let U=FJe.exec($());U&&(A+=U[0],N.index+=U[0].length),ze({type:"text",value:A});continue}if(E&&(E.type==="globstar"||E.star===!0)){E.type="star",E.star=!0,E.value+=A,E.output=j,N.backtrack=!0,N.globstar=!0,z(A);continue}let me=$();if(r.noextglob!==!0&&/^\([^?]/.test(me)){Ct("star",A);continue}if(E.type==="star"){if(r.noglobstar===!0){z(A);continue}let U=E.prev,ae=U.prev,le=U.type==="slash"||U.type==="bos",Ie=ae&&(ae.type==="star"||ae.type==="globstar");if(r.bash===!0&&(!le||me[0]&&me[0]!=="/")){ze({type:"star",value:A,output:""});continue}let be=N.braces>0&&(U.type==="comma"||U.type==="brace"),et=J.length&&(U.type==="pipe"||U.type==="paren");if(!le&&U.type!=="paren"&&!be&&!et){ze({type:"star",value:A,output:""});continue}for(;me.slice(0,3)==="/**";){let _t=t[N.index+4];if(_t&&_t!=="/")break;me=me.slice(3),z("/**",3)}if(U.type==="bos"&&F()){E.type="globstar",E.value+=A,E.output=T(r),N.output=E.output,N.globstar=!0,z(A);continue}if(U.type==="slash"&&U.prev.type!=="bos"&&!Ie&&F()){N.output=N.output.slice(0,-(U.output+E.output).length),U.output=`(?:${U.output}`,E.type="globstar",E.output=T(r)+(r.strictSlashes?")":"|$)"),E.value+=A,N.globstar=!0,N.output+=U.output+E.output,z(A);continue}if(U.type==="slash"&&U.prev.type!=="bos"&&me[0]==="/"){let _t=me[1]!==void 0?"|$":"";N.output=N.output.slice(0,-(U.output+E.output).length),U.output=`(?:${U.output}`,E.type="globstar",E.output=`${T(r)}${p}|${p}${_t})`,E.value+=A,N.output+=U.output+E.output,N.globstar=!0,z(A+Z()),ze({type:"slash",value:"/",output:""});continue}if(U.type==="bos"&&me[0]==="/"){E.type="globstar",E.value+=A,E.output=`(?:^|${p}|${T(r)}${p})`,N.output=E.output,N.globstar=!0,z(A+Z()),ze({type:"slash",value:"/",output:""});continue}N.output=N.output.slice(0,-E.output.length),E.type="globstar",E.output=T(r),E.value+=A,N.output+=E.output,N.globstar=!0,z(A);continue}let Qe={type:"star",value:A,output:j};if(r.bash===!0){Qe.output=".*?",(E.type==="bos"||E.type==="slash")&&(Qe.output=L+Qe.output),ze(Qe);continue}if(E&&(E.type==="bracket"||E.type==="paren")&&r.regex===!0){Qe.output=A,ze(Qe);continue}(N.index===N.start||E.type==="slash"||E.type==="dot")&&(E.type==="dot"?(N.output+=g,E.output+=g):r.dot===!0?(N.output+=v,E.output+=v):(N.output+=L,E.output+=L),O()!=="*"&&(N.output+=f,E.output+=f)),ze(Qe)}for(;N.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(NS("closing","]"));N.output=bl.escapeLast(N.output,"["),ft("brackets")}for(;N.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(NS("closing",")"));N.output=bl.escapeLast(N.output,"("),ft("parens")}for(;N.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(NS("closing","}"));N.output=bl.escapeLast(N.output,"{"),ft("braces")}if(r.strictSlashes!==!0&&(E.type==="star"||E.type==="bracket")&&ze({type:"maybe_slash",value:"",output:`${p}?`}),N.backtrack===!0){N.output="";for(let me of N.tokens)N.output+=me.output!=null?me.output:me.value,me.suffix&&(N.output+=me.suffix)}return N};MQ.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(M5,r.maxLength):M5,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=gCe[t]||t;let{DOT_LITERAL:o,SLASH_LITERAL:s,ONE_CHAR:a,DOTS_SLASH:c,NO_DOT:u,NO_DOTS:l,NO_DOTS_SLASH:d,STAR:p,START_ANCHOR:f}=O5.globChars(r.windows),m=r.dot?l:u,h=r.dot?d:u,g=r.capture?"":"?:",v={negated:!1,prefix:""},y=r.bash===!0?".*?":p;r.capture&&(y=`(${y})`);let b=L=>L.noglobstar===!0?y:`(${g}(?:(?!${f}${L.dot?c:o}).)*?)`,x=L=>{switch(L){case"*":return`${m}${a}${y}`;case".*":return`${o}${a}${y}`;case"*.*":return`${m}${y}${o}${a}${y}`;case"*/*":return`${m}${y}${s}${a}${h}${y}`;case"**":return m+b(r);case"**/*":return`(?:${m}${b(r)}${s})?${h}${a}${y}`;case"**/*.*":return`(?:${m}${b(r)}${s})?${h}${y}${o}${a}${y}`;case"**/.*":return`(?:${m}${b(r)}${s})?${o}${a}${y}`;default:{let M=/^(.*?)\.(\w+)$/.exec(L);if(!M)return;let j=x(M[1]);return j?j+o+M[2]:void 0}}},S=bl.removePrefix(t,v),T=x(S);return T&&r.strictSlashes!==!0&&(T+=`${s}?`),T};vCe.exports=MQ});var xCe=k((m$t,_Ce)=>{"use strict";var qJe=hCe(),FQ=yCe(),bCe=L5(),HJe=PR(),GJe=t=>t&&typeof t=="object"&&!Array.isArray(t),Ui=(t,e,r=!1)=>{if(Array.isArray(t)){let l=t.map(p=>Ui(p,e,r));return p=>{for(let f of l){let m=f(p);if(m)return m}return!1}}let n=GJe(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=i.windows,s=n?Ui.compileRe(t,e):Ui.makeRe(t,e,!1,!0),a=s.state;delete s.state;let c=()=>!1;if(i.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};c=Ui(i.ignore,l,r)}let u=(l,d=!1)=>{let{isMatch:p,match:f,output:m}=Ui.test(l,s,e,{glob:t,posix:o}),h={glob:t,state:a,regex:s,posix:o,input:l,output:m,match:f,isMatch:p};return typeof i.onResult=="function"&&i.onResult(h),p===!1?(h.isMatch=!1,d?h:!1):c(l)?(typeof i.onIgnore=="function"&&i.onIgnore(h),h.isMatch=!1,d?h:!1):(typeof i.onMatch=="function"&&i.onMatch(h),d?h:!0)};return r&&(u.state=a),u};Ui.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?bCe.toPosixSlashes:null),a=t===n,c=a&&s?s(t):t;return a===!1&&(c=s?s(t):t,a=c===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=Ui.matchBase(t,e,r,i):a=e.exec(c)),{isMatch:!!a,match:a,output:c}};Ui.matchBase=(t,e,r)=>(e instanceof RegExp?e:Ui.makeRe(e,r)).test(bCe.basename(t));Ui.isMatch=(t,e,r)=>Ui(e,r)(t);Ui.parse=(t,e)=>Array.isArray(t)?t.map(r=>Ui.parse(r,e)):FQ(t,{...e,fastpaths:!1});Ui.scan=(t,e)=>qJe(t,e);Ui.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let c=Ui.toRegex(a,e);return n===!0&&(c.state=t),c};Ui.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=FQ.fastpaths(t,e)),i.output||(i=FQ(t,e)),Ui.compileRe(i,e,r,n)};Ui.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};Ui.constants=HJe;_Ce.exports=Ui});var SCe=k((h$t,Jd)=>{"use strict";var jJe=require("os"),Kf=xCe(),zJe=jJe.platform()==="win32";function VJe(t,e,r=!1){return e&&(e.windows===null||e.windows===void 0)&&(e={...e,windows:zJe}),Kf(t,e,r)}Jd.exports=VJe;Jd.exports.test=Kf.test;Jd.exports.matchBase=Kf.matchBase;Jd.exports.isMatch=Kf.isMatch;Jd.exports.parse=Kf.parse;Jd.exports.scan=Kf.scan;Jd.exports.compileRe=Kf.compileRe;Jd.exports.toRegex=Kf.toRegex;Jd.exports.makeRe=Kf.makeRe});var UIe=k((Ysr,FIe)=>{function AIe(t){return Array.isArray(t)?t:[t]}var NIe="",PIe=" ",wX="\\",KZe=/^\s+$/,YZe=/(?:[^\\]|^)\\$/,QZe=/^\\!/,XZe=/^\\#/,JZe=/\r?\n/g,ZZe=/^\.*\/|^\.+$/,RX="/",LIe="node-ignore";typeof Symbol<"u"&&(LIe=Symbol.for("node-ignore"));var kIe=LIe,eet=(t,e,r)=>Object.defineProperty(t,e,{value:r}),tet=/([0-z])-([0-z])/g,OIe=()=>!1,ret=t=>t.replace(tet,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:NIe),net=t=>{let{length:e}=t;return t.slice(0,e-e%2)},iet=[[/\\?\s+$/,t=>t.indexOf("\\")===0?PIe:NIe],[/\\\s/g,()=>PIe],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>wX],[/\\\\/g,()=>wX],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===wX?`\\[${r}${net(n)}${i}`:i==="]"&&n.length%2===0?`[${ret(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],DIe=Object.create(null),oet=(t,e)=>{let r=DIe[t];return r||(r=iet.reduce((n,i)=>n.replace(i[0],i[1].bind(t)),t),DIe[t]=r),e?new RegExp(r,"i"):new RegExp(r)},kX=t=>typeof t=="string",set=t=>t&&kX(t)&&!KZe.test(t)&&!YZe.test(t)&&t.indexOf("#")!==0,aet=t=>t.split(JZe),AX=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}},cet=(t,e)=>{let r=t,n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(QZe,"!").replace(XZe,"#");let i=oet(t,e);return new AX(r,t,n,i)},uet=(t,e)=>{throw new e(t)},em=(t,e,r)=>kX(t)?t?em.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),MIe=t=>ZZe.test(t);em.isNotRelative=MIe;em.convert=t=>t;var PX=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){eet(this,kIe,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[kIe]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(set(e)){let r=cet(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,AIe(kX(e)?aet(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(o=>{let{negative:s}=o;if(i===s&&n!==i||s&&!n&&!i&&!r)return;o.regex.test(e)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(e,r,n,i){let o=e&&em.convert(e);return em(o,e,this._allowRelativePaths?OIe:uet),this._t(o,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(RX)),i.pop(),!i.length)return r[e]=this._testOne(e,n);let o=this._t(i.join(RX)+RX,r,n,i);return r[e]=o.ignored?o:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return AIe(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},X6=t=>new PX(t),det=t=>em(t&&em.convert(t),t,OIe);X6.isPathValid=det;X6.default=X6;FIe.exports=X6;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");em.convert=t;let e=/^[a-z]:\//i;em.isNotRelative=r=>e.test(r)||MIe(r)}});var VIe=k((ear,zIe)=>{"use strict";zIe.exports=GIe;function GIe(t,e,r){t instanceof RegExp&&(t=HIe(t,r)),e instanceof RegExp&&(e=HIe(e,r));var n=jIe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function HIe(t,e){var r=e.match(t);return r?r[0]:null}GIe.range=jIe;function jIe(t,e,r){var n,i,o,s,a,c=r.indexOf(t),u=r.indexOf(e,c+1),l=c;if(c>=0&&u>0){if(t===e)return[c,u];for(n=[],o=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,s=u),u=r.indexOf(e,l+1)),l=c<u&&c>=0?c:u;n.length&&(a=[o,s])}return a}});var ZIe=k((tar,JIe)=>{var $Ie=VIe();JIe.exports=met;var WIe="\0SLASH"+Math.random()+"\0",KIe="\0OPEN"+Math.random()+"\0",NX="\0CLOSE"+Math.random()+"\0",YIe="\0COMMA"+Math.random()+"\0",QIe="\0PERIOD"+Math.random()+"\0";function DX(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function pet(t){return t.split("\\\\").join(WIe).split("\\{").join(KIe).split("\\}").join(NX).split("\\,").join(YIe).split("\\.").join(QIe)}function fet(t){return t.split(WIe).join("\\").split(KIe).join("{").split(NX).join("}").split(YIe).join(",").split(QIe).join(".")}function XIe(t){if(!t)return[""];var e=[],r=$Ie("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=XIe(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function met(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),WR(pet(t),!0).map(fet)):[]}function het(t){return"{"+t+"}"}function get(t){return/^-?0\d/.test(t)}function vet(t,e){return t<=e}function yet(t,e){return t>=e}function WR(t,e){var r=[],n=$Ie("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?WR(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var a=i+"{"+n.body+"}"+o[s];r.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=c||u,d=n.body.indexOf(",")>=0;if(!l&&!d)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+NX+n.post,WR(t)):[t];var p;if(l)p=n.body.split(/\.\./);else if(p=XIe(n.body),p.length===1&&(p=WR(p[0],!1).map(het),p.length===1))return o.map(function(N){return n.pre+p[0]+N});var f;if(l){var m=DX(p[0]),h=DX(p[1]),g=Math.max(p[0].length,p[1].length),v=p.length==3?Math.abs(DX(p[2])):1,y=vet,b=h<m;b&&(v*=-1,y=yet);var x=p.some(get);f=[];for(var S=m;y(S,h);S+=v){var T;if(u)T=String.fromCharCode(S),T==="\\"&&(T="");else if(T=String(S),x){var L=g-T.length;if(L>0){var M=new Array(L+1).join("0");S<0?T="-"+M+T.slice(1):T=M+T}}f.push(T)}}else{f=[];for(var j=0;j<p.length;j++)f.push.apply(f,WR(p[j],!1))}for(var j=0;j<f.length;j++)for(var s=0;s<o.length;s++){var a=i+f[j]+o[s];(!e||l||a)&&r.push(a)}}return r}});var Qt=k((rLr,U2e)=>{U2e.exports={options:{usePureJavaScript:!1}}});var H2e=k((nLr,q2e)=>{var OZ={};q2e.exports=OZ;var B2e={};OZ.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Lnt(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join(`\r
`)}return n};OZ.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=B2e[e];if(!r){r=B2e[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<s.length;++c)u+=s[c]*i,s[c]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var l=0;t[l]===o&&l<t.length-1;++l)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Lnt(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}});var Lr=k((iLr,V2e)=>{var G2e=Qt(),j2e=H2e(),V=V2e.exports=G2e.util=G2e.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){V.nextTick=process.nextTick,typeof setImmediate=="function"?V.setImmediate=setImmediate:V.setImmediate=V.nextTick;return}if(typeof setImmediate=="function"){V.setImmediate=function(){return setImmediate.apply(void 0,arguments)},V.nextTick=function(a){return setImmediate(a)};return}if(V.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(l){l()})}};var s=a,t="forge.setImmediate",e=[];V.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=V.setImmediate;V.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}V.nextTick=V.setImmediate})();V.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;V.globalScope=function(){return V.isNodejs?global:typeof self>"u"?window:self}();V.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};V.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};V.isArrayBufferView=function(t){return t&&V.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function A2(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}V.ByteBuffer=MZ;function MZ(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(V.isArrayBuffer(t)||V.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof MZ||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}V.ByteStringBuffer=MZ;var Ont=4096;V.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Ont&&(this.data.substr(0,1),this._constructedStringLength=0)};V.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};V.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};V.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};V.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};V.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};V.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(V.encodeUtf8(t))};V.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};V.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};V.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};V.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};V.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};V.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};V.ByteStringBuffer.prototype.putInt=function(t,e){A2(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};V.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};V.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};V.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};V.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};V.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};V.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};V.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};V.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};V.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};V.ByteStringBuffer.prototype.getInt=function(t){A2(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};V.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};V.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};V.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};V.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};V.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};V.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};V.ByteStringBuffer.prototype.copy=function(){var t=V.createBuffer(this.data);return t.read=this.read,t};V.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};V.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};V.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};V.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};V.ByteStringBuffer.prototype.toString=function(){return V.decodeUtf8(this.bytes())};function Mnt(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=V.isArrayBuffer(t),n=V.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}V.DataBuffer=Mnt;V.DataBuffer.prototype.length=function(){return this.write-this.read};V.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};V.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};V.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};V.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};V.DataBuffer.prototype.putBytes=function(t,e){if(V.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(V.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof V.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&V.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof V.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=V.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=V.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};V.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};V.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};V.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};V.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};V.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};V.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};V.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};V.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};V.DataBuffer.prototype.putInt=function(t,e){A2(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};V.DataBuffer.prototype.putSignedInt=function(t,e){return A2(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};V.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};V.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};V.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};V.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};V.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};V.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};V.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};V.DataBuffer.prototype.getInt=function(t){A2(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};V.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};V.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};V.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};V.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};V.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};V.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};V.DataBuffer.prototype.copy=function(){return new V.DataBuffer(this)};V.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};V.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};V.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};V.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};V.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return V.binary.raw.encode(e);if(t==="hex")return V.binary.hex.encode(e);if(t==="base64")return V.binary.base64.encode(e);if(t==="utf8")return V.text.utf8.decode(e);if(t==="utf16")return V.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};V.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=V.encodeUtf8(t)),new V.ByteBuffer(t)};V.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};V.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};V.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};V.bytesToHex=function(t){return V.createBuffer(t).toHex()};V.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var x0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",S0=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],z2e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";V.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=x0.charAt(i>>2),r+=x0.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=x0.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":x0.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};V.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=S0[t.charCodeAt(s++)-43],n=S0[t.charCodeAt(s++)-43],i=S0[t.charCodeAt(s++)-43],o=S0[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};V.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};V.decodeUtf8=function(t){return decodeURIComponent(escape(t))};V.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:j2e.encode,decode:j2e.decode}};V.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};V.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};V.binary.hex.encode=V.bytesToHex;V.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};V.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=x0.charAt(i>>2),r+=x0.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=x0.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":x0.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};V.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,c=0,u=r;c<t.length;)i=S0[t.charCodeAt(c++)-43],o=S0[t.charCodeAt(c++)-43],s=S0[t.charCodeAt(c++)-43],a=S0[t.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,s!==64&&(n[u++]=(o&15)<<4|s>>2,a!==64&&(n[u++]=(s&3)<<6|a));return e?u-r:n.subarray(0,u)};V.binary.base58.encode=function(t,e){return V.binary.baseN.encode(t,z2e,e)};V.binary.base58.decode=function(t,e){return V.binary.baseN.decode(t,z2e,e)};V.text={utf8:{},utf16:{}};V.text.utf8.encode=function(t,e,r){t=V.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};V.text.utf8.decode=function(t){return V.decodeUtf8(String.fromCharCode.apply(null,t))};V.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};V.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};V.deflate=function(t,e,r){if(e=V.decode64(t.deflate(V.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};V.inflate=function(t,e,r){var n=t.inflate(V.encode64(e)).rval;return n===null?null:V.decode64(n)};var FZ=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=V.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},UZ=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(V.decode64(r))),r},Fnt=function(t,e,r,n){var i=UZ(t,e);i===null&&(i={}),i[r]=n,FZ(t,e,i)},Unt=function(t,e,r){var n=UZ(t,e);return n!==null&&(n=r in n?n[r]:null),n},Bnt=function(t,e,r){var n=UZ(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),FZ(t,e,n)}},qnt=function(t,e){FZ(t,e,null)},fF=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return n};V.setItem=function(t,e,r,n,i){fF(Fnt,arguments,i)};V.getItem=function(t,e,r,n){return fF(Unt,arguments,n)};V.removeItem=function(t,e,r,n){fF(Bnt,arguments,n)};V.clearItems=function(t,e,r){fF(qnt,arguments,r)};V.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};V.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};V.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")};V.formatSize=function(t){return t>=1073741824?t=V.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=V.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=V.formatNumber(t/1024,0)+" KiB":t=V.formatNumber(t,0)+" bytes",t};V.bytesFromIP=function(t){return t.indexOf(".")!==-1?V.bytesFromIPv4(t):t.indexOf(":")!==-1?V.bytesFromIPv6(t):null};V.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=V.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};V.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=V.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=V.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};V.bytesToIP=function(t){return t.length===4?V.bytesToIPv4(t):t.length===16?V.bytesToIPv6(t):null};V.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};V.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=V.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};V.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in V&&!t.update)return e(null,V.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return V.cores=navigator.hardwareConcurrency,e(null,V.cores);if(typeof Worker>"u")return V.cores=1,e(null,V.cores);if(typeof Blob>"u")return V.cores=2,e(null,V.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,c){if(a===0){var u=Math.floor(s.reduce(function(l,d){return l+d},0)/s.length);return V.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,V.cores)}i(c,function(l,d){s.push(o(c,d)),n(s,a-1,c)})}function i(s,a){for(var c=[],u=[],l=0;l<s;++l){var d=new Worker(r);d.addEventListener("message",function(p){if(u.push(p.data),u.length===s){for(var f=0;f<s;++f)c[f].terminate();a(null,u)}}),c.push(d)}for(var l=0;l<s;++l)c[l].postMessage(l)}function o(s,a){for(var c=[],u=0;u<s;++u)for(var l=a[u],d=c[u]=[],p=0;p<s;++p)if(u!==p){var f=a[p];(l.st>f.st&&l.st<f.et||f.st>l.st&&f.st<l.et)&&d.push(p)}return c.reduce(function(m,h){return Math.max(m,h.length)},0)}}});var mF=k((oLr,$2e)=>{var Uo=Qt();Lr();$2e.exports=Uo.cipher=Uo.cipher||{};Uo.cipher.algorithms=Uo.cipher.algorithms||{};Uo.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Uo.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Uo.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Uo.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Uo.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Uo.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Uo.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Uo.cipher.algorithms[t]=e};Uo.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Uo.cipher.algorithms?Uo.cipher.algorithms[t]:null};var BZ=Uo.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};BZ.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Uo.util.createBuffer(),this.output=t.output||Uo.util.createBuffer(),this.mode.start(e)};BZ.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BZ.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var HZ=k((sLr,W2e)=>{var Bo=Qt();Lr();Bo.cipher=Bo.cipher||{};var or=W2e.exports=Bo.cipher.modes=Bo.cipher.modes||{};or.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};or.ecb.prototype.start=function(t){};or.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};or.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};or.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};or.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};or.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};or.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=hF(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};or.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};or.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};or.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};or.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};or.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Bo.util.createBuffer(),this._partialBytes=0};or.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hF(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};or.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};or.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};or.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Bo.util.createBuffer(),this._partialBytes=0};or.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hF(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};or.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};or.ofb.prototype.decrypt=or.ofb.prototype.encrypt;or.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Bo.util.createBuffer(),this._partialBytes=0};or.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hF(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};or.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}gF(this._inBlock)};or.ctr.prototype.decrypt=or.ctr.prototype.encrypt;or.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Bo.util.createBuffer(),this._partialBytes=0,this._R=3774873600};or.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Bo.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Bo.util.createBuffer(t.additionalData):r=Bo.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Bo.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(qZ(n*8)))}this._inBlock=this._j0.slice(0),gF(this._inBlock),this._partialBytes=0,r=Bo.util.createBuffer(r),this._aDataLength=qZ(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};or.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),gF(this._inBlock)};or.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),gF(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};or.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Bo.util.createBuffer();var n=this._aDataLength.concat(qZ(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};or.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};or.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};or.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};or.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};or.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=s/n|0,u=(n-1-s%n)*e;a[c]=1<<e-1<<u,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};or.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function hF(t,e){if(typeof t=="string"&&(t=Bo.util.createBuffer(t)),Bo.util.isArray(t)&&t.length>4){var r=t;t=Bo.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Bo.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function gF(t){t[t.length-1]=t[t.length-1]+1&4294967295}function qZ(t){return[t/4294967296|0,t&4294967295]}});var E0=k((aLr,X2e)=>{var wn=Qt();mF();HZ();Lr();X2e.exports=wn.aes=wn.aes||{};wn.aes.startEncrypting=function(t,e,r,n){var i=vF({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};wn.aes.createEncryptionCipher=function(t,e){return vF({key:t,output:null,decrypt:!1,mode:e})};wn.aes.startDecrypting=function(t,e,r,n){var i=vF({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};wn.aes.createDecryptionCipher=function(t,e){return vF({key:t,output:null,decrypt:!0,mode:e})};wn.aes.Algorithm=function(t,e){zZ||Y2e();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return jZ(r._w,n,i,!1)},decrypt:function(n,i){return jZ(r._w,n,i,!0)}}}),r._init=!1};wn.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=wn.util.createBuffer(e);else if(wn.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=wn.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!wn.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!wn.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=Q2e(e,t.decrypt&&!s),this._init=!0}};wn.aes._expandKey=function(t,e){return zZ||Y2e(),Q2e(t,e)};wn.aes._updateBlock=jZ;oT("AES-ECB",wn.cipher.modes.ecb);oT("AES-CBC",wn.cipher.modes.cbc);oT("AES-CFB",wn.cipher.modes.cfb);oT("AES-OFB",wn.cipher.modes.ofb);oT("AES-CTR",wn.cipher.modes.ctr);oT("AES-GCM",wn.cipher.modes.gcm);function oT(t,e){var r=function(){return new wn.aes.Algorithm(t,e)};wn.cipher.registerAlgorithm(t,r)}var zZ=!1,iT=4,ma,GZ,K2e,Cb,Rl;function Y2e(){zZ=!0,K2e=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;ma=new Array(256),GZ=new Array(256),Cb=new Array(4),Rl=new Array(4);for(var e=0;e<4;++e)Cb[e]=new Array(256),Rl[e]=new Array(256);for(var r=0,n=0,i,o,s,a,c,u,l,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,ma[r]=a,GZ[a]=r,c=t[a],i=t[r],o=t[i],s=t[o],u=c<<24^a<<16^a<<8^(a^c),l=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var d=0;d<4;++d)Cb[d][r]=u,Rl[d][a]=l,u=u<<24|u>>>8,l=l<<24|l>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function Q2e(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=iT*s,c=o;c<a;++c)n=r[c-1],c%o===0?(n=ma[n>>>16&255]<<24^ma[n>>>8&255]<<16^ma[n&255]<<8^ma[n>>>24]^K2e[i]<<24,i++):o>6&&c%o===4&&(n=ma[n>>>24]<<24^ma[n>>>16&255]<<16^ma[n>>>8&255]<<8^ma[n&255]),r[c]=r[c-o]^n;if(e){var u,l=Rl[0],d=Rl[1],p=Rl[2],f=Rl[3],m=r.slice(0);a=r.length;for(var c=0,h=a-iT;c<a;c+=iT,h-=iT)if(c===0||c===a-iT)m[c]=r[h],m[c+1]=r[h+3],m[c+2]=r[h+2],m[c+3]=r[h+1];else for(var g=0;g<iT;++g)u=r[h+g],m[c+(3&-g)]=l[ma[u>>>24]]^d[ma[u>>>16&255]]^p[ma[u>>>8&255]]^f[ma[u&255]];r=m}return r}function jZ(t,e,r,n){var i=t.length/4-1,o,s,a,c,u;n?(o=Rl[0],s=Rl[1],a=Rl[2],c=Rl[3],u=GZ):(o=Cb[0],s=Cb[1],a=Cb[2],c=Cb[3],u=ma);var l,d,p,f,m,h,g;l=e[0]^t[0],d=e[n?3:1]^t[1],p=e[2]^t[2],f=e[n?1:3]^t[3];for(var v=3,y=1;y<i;++y)m=o[l>>>24]^s[d>>>16&255]^a[p>>>8&255]^c[f&255]^t[++v],h=o[d>>>24]^s[p>>>16&255]^a[f>>>8&255]^c[l&255]^t[++v],g=o[p>>>24]^s[f>>>16&255]^a[l>>>8&255]^c[d&255]^t[++v],f=o[f>>>24]^s[l>>>16&255]^a[d>>>8&255]^c[p&255]^t[++v],l=m,d=h,p=g;r[0]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[f&255]^t[++v],r[n?3:1]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^t[++v],r[2]=u[p>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^t[++v],r[n?1:3]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++v]}function vF(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=wn.cipher.createDecipher(r,t.key):n=wn.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof wn.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var T0=k((cLr,J2e)=>{var P2=Qt();P2.pki=P2.pki||{};var VZ=J2e.exports=P2.pki.oids=P2.oids=P2.oids||{};function Re(t,e){VZ[t]=e,VZ[e]=t}function Xr(t,e){VZ[t]=e}Re("1.2.840.113549.1.1.1","rsaEncryption");Re("1.2.840.113549.1.1.4","md5WithRSAEncryption");Re("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Re("1.2.840.113549.1.1.7","RSAES-OAEP");Re("1.2.840.113549.1.1.8","mgf1");Re("1.2.840.113549.1.1.9","pSpecified");Re("1.2.840.113549.1.1.10","RSASSA-PSS");Re("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Re("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Re("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Re("1.3.101.112","EdDSA25519");Re("1.2.840.10040.4.3","dsa-with-sha1");Re("1.3.14.3.2.7","desCBC");Re("1.3.14.3.2.26","sha1");Re("1.3.14.3.2.29","sha1WithRSASignature");Re("2.16.840.1.101.3.4.2.1","sha256");Re("2.16.840.1.101.3.4.2.2","sha384");Re("2.16.840.1.101.3.4.2.3","sha512");Re("2.16.840.1.101.3.4.2.4","sha224");Re("2.16.840.1.101.3.4.2.5","sha512-224");Re("2.16.840.1.101.3.4.2.6","sha512-256");Re("1.2.840.113549.2.2","md2");Re("1.2.840.113549.2.5","md5");Re("1.2.840.113549.1.7.1","data");Re("1.2.840.113549.1.7.2","signedData");Re("1.2.840.113549.1.7.3","envelopedData");Re("1.2.840.113549.1.7.4","signedAndEnvelopedData");Re("1.2.840.113549.1.7.5","digestedData");Re("1.2.840.113549.1.7.6","encryptedData");Re("1.2.840.113549.1.9.1","emailAddress");Re("1.2.840.113549.1.9.2","unstructuredName");Re("1.2.840.113549.1.9.3","contentType");Re("1.2.840.113549.1.9.4","messageDigest");Re("1.2.840.113549.1.9.5","signingTime");Re("1.2.840.113549.1.9.6","counterSignature");Re("1.2.840.113549.1.9.7","challengePassword");Re("1.2.840.113549.1.9.8","unstructuredAddress");Re("1.2.840.113549.1.9.14","extensionRequest");Re("1.2.840.113549.1.9.20","friendlyName");Re("1.2.840.113549.1.9.21","localKeyId");Re("1.2.840.113549.1.9.22.1","x509Certificate");Re("1.2.840.113549.1.12.10.1.1","keyBag");Re("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Re("1.2.840.113549.1.12.10.1.3","certBag");Re("1.2.840.113549.1.12.10.1.4","crlBag");Re("1.2.840.113549.1.12.10.1.5","secretBag");Re("1.2.840.113549.1.12.10.1.6","safeContentsBag");Re("1.2.840.113549.1.5.13","pkcs5PBES2");Re("1.2.840.113549.1.5.12","pkcs5PBKDF2");Re("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Re("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Re("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Re("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Re("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Re("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Re("1.2.840.113549.2.7","hmacWithSHA1");Re("1.2.840.113549.2.8","hmacWithSHA224");Re("1.2.840.113549.2.9","hmacWithSHA256");Re("1.2.840.113549.2.10","hmacWithSHA384");Re("1.2.840.113549.2.11","hmacWithSHA512");Re("1.2.840.113549.3.7","des-EDE3-CBC");Re("2.16.840.1.101.3.4.1.2","aes128-CBC");Re("2.16.840.1.101.3.4.1.22","aes192-CBC");Re("2.16.840.1.101.3.4.1.42","aes256-CBC");Re("2.5.4.3","commonName");Re("2.5.4.4","surname");Re("2.5.4.5","serialNumber");Re("2.5.4.6","countryName");Re("2.5.4.7","localityName");Re("2.5.4.8","stateOrProvinceName");Re("2.5.4.9","streetAddress");Re("2.5.4.10","organizationName");Re("2.5.4.11","organizationalUnitName");Re("2.5.4.12","title");Re("2.5.4.13","description");Re("2.5.4.15","businessCategory");Re("2.5.4.17","postalCode");Re("2.5.4.42","givenName");Re("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Re("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Re("2.16.840.1.113730.1.1","nsCertType");Re("2.16.840.1.113730.1.13","nsComment");Xr("2.5.29.1","authorityKeyIdentifier");Xr("2.5.29.2","keyAttributes");Xr("2.5.29.3","certificatePolicies");Xr("2.5.29.4","keyUsageRestriction");Xr("2.5.29.5","policyMapping");Xr("2.5.29.6","subtreesConstraint");Xr("2.5.29.7","subjectAltName");Xr("2.5.29.8","issuerAltName");Xr("2.5.29.9","subjectDirectoryAttributes");Xr("2.5.29.10","basicConstraints");Xr("2.5.29.11","nameConstraints");Xr("2.5.29.12","policyConstraints");Xr("2.5.29.13","basicConstraints");Re("2.5.29.14","subjectKeyIdentifier");Re("2.5.29.15","keyUsage");Xr("2.5.29.16","privateKeyUsagePeriod");Re("2.5.29.17","subjectAltName");Re("2.5.29.18","issuerAltName");Re("2.5.29.19","basicConstraints");Xr("2.5.29.20","cRLNumber");Xr("2.5.29.21","cRLReason");Xr("2.5.29.22","expirationDate");Xr("2.5.29.23","instructionCode");Xr("2.5.29.24","invalidityDate");Xr("2.5.29.25","cRLDistributionPoints");Xr("2.5.29.26","issuingDistributionPoint");Xr("2.5.29.27","deltaCRLIndicator");Xr("2.5.29.28","issuingDistributionPoint");Xr("2.5.29.29","certificateIssuer");Xr("2.5.29.30","nameConstraints");Re("2.5.29.31","cRLDistributionPoints");Re("2.5.29.32","certificatePolicies");Xr("2.5.29.33","policyMappings");Xr("2.5.29.34","policyConstraints");Re("2.5.29.35","authorityKeyIdentifier");Xr("2.5.29.36","policyConstraints");Re("2.5.29.37","extKeyUsage");Xr("2.5.29.46","freshestCRL");Xr("2.5.29.54","inhibitAnyPolicy");Re("1.3.6.1.4.1.11129.2.4.2","timestampList");Re("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Re("1.3.6.1.5.5.7.3.1","serverAuth");Re("1.3.6.1.5.5.7.3.2","clientAuth");Re("1.3.6.1.5.5.7.3.3","codeSigning");Re("1.3.6.1.5.5.7.3.4","emailProtection");Re("1.3.6.1.5.5.7.3.8","timeStamping")});var Al=k((uLr,eAe)=>{var qn=Qt();Lr();T0();var je=eAe.exports=qn.asn1=qn.asn1||{};je.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};je.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};je.create=function(t,e,r,n,i){if(qn.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||qn.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=je.copy(a)),a};je.copy=function(t,e){var r;if(qn.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(je.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:je.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};je.equals=function(t,e,r){if(qn.util.isArray(t)){if(!qn.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!je.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&je.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};je.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function k2(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var Hnt=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;k2(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};je.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=qn.util.createBuffer(t));var r=t.length(),n=yF(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function yF(t,e,r,n){var i;k2(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var c=Hnt(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var l,d,p=(o&32)===32;if(p)if(l=[],c===void 0)for(;;){if(k2(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),l.push(yF(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),l.push(yF(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(l===void 0&&s===je.Class.UNIVERSAL&&a===je.Type.BITSTRING&&(d=t.bytes(c)),l===void 0&&n.decodeBitStrings&&s===je.Class.UNIVERSAL&&a===je.Type.BITSTRING&&c>1){var f=t.read,m=e,h=0;if(a===je.Type.BITSTRING&&(k2(t,e,1),h=t.getByte(),e--),h===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},v=yF(t,e,r+1,g),y=i-t.length();e-=y,a==je.Type.BITSTRING&&y++;var b=v.tagClass;y===c&&(b===je.Class.UNIVERSAL||b===je.Class.CONTEXT_SPECIFIC)&&(l=[v])}catch{}l===void 0&&(t.read=f,e=m)}if(l===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===je.Type.BMPSTRING)for(l="";c>0;c-=2)k2(t,e,2),l+=String.fromCharCode(t.getInt16()),e-=2;else l=t.getBytes(c),e-=c}var x=d===void 0?null:{bitStringContents:d};return je.create(s,a,p,l,x)}je.toDer=function(t){var e=qn.util.createBuffer(),r=t.tagClass|t.type,n=qn.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=je.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(je.toDer(t.value[o]))}else if(t.type===je.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===je.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};je.oidToDer=function(t){var e=t.split("."),r=qn.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};je.derToOid=function(t){var e;typeof t=="string"&&(t=qn.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};je.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var l=parseInt(t.substr(u+1,2),10),d=parseInt(t.substr(u+4,2),10),p=l*60+d;p*=6e4,c==="+"?e.setTime(+e-p):e.setTime(+e+p)}return e};je.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,l=!1;t.charAt(t.length-1)==="Z"&&(l=!0);var d=t.length-5,p=t.charAt(d);if(p==="+"||p==="-"){var f=parseInt(t.substr(d+1,2),10),m=parseInt(t.substr(d+4,2),10);u=f*60+m,u*=6e4,p==="+"&&(u*=-1),l=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),l?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,s,a,c)),e};je.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};je.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};je.integerToDer=function(t){var e=qn.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};je.derToInteger=function(t){typeof t=="string"&&(t=qn.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};je.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&qn.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=je.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Z2e=/[^\\u0000-\\u00ff]/;je.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case je.Class.UNIVERSAL:n+="Universal:";break;case je.Class.APPLICATION:n+="Application:";break;case je.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case je.Class.PRIVATE:n+="Private:";break}if(t.tagClass===je.Class.UNIVERSAL)switch(n+=t.type,t.type){case je.Type.NONE:n+=" (None)";break;case je.Type.BOOLEAN:n+=" (Boolean)";break;case je.Type.INTEGER:n+=" (Integer)";break;case je.Type.BITSTRING:n+=" (Bit string)";break;case je.Type.OCTETSTRING:n+=" (Octet string)";break;case je.Type.NULL:n+=" (Null)";break;case je.Type.OID:n+=" (Object Identifier)";break;case je.Type.ODESC:n+=" (Object Descriptor)";break;case je.Type.EXTERNAL:n+=" (External or Instance of)";break;case je.Type.REAL:n+=" (Real)";break;case je.Type.ENUMERATED:n+=" (Enumerated)";break;case je.Type.EMBEDDED:n+=" (Embedded PDV)";break;case je.Type.UTF8:n+=" (UTF8)";break;case je.Type.ROID:n+=" (Relative Object Identifier)";break;case je.Type.SEQUENCE:n+=" (Sequence)";break;case je.Type.SET:n+=" (Set)";break;case je.Type.PRINTABLESTRING:n+=" (Printable String)";break;case je.Type.IA5String:n+=" (IA5String (ASCII))";break;case je.Type.UTCTIME:n+=" (UTC time)";break;case je.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case je.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=je.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===je.Type.OID){var c=je.derToOid(t.value);n+=c,qn.pki&&qn.pki.oids&&c in qn.pki.oids&&(n+=" ("+qn.pki.oids[c]+") ")}if(t.type===je.Type.INTEGER)try{n+=je.derToInteger(t.value)}catch{n+="0x"+qn.util.bytesToHex(t.value)}else if(t.type===je.Type.BITSTRING){if(t.value.length>1?n+="0x"+qn.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===je.Type.OCTETSTRING)Z2e.test(t.value)||(n+="("+t.value+") "),n+="0x"+qn.util.bytesToHex(t.value);else if(t.type===je.Type.UTF8)try{n+=qn.util.decodeUtf8(t.value)}catch(l){if(l.message==="URI malformed")n+="0x"+qn.util.bytesToHex(t.value)+" (malformed UTF8)";else throw l}else t.type===je.Type.PRINTABLESTRING||t.type===je.Type.IA5String?n+=t.value:Z2e.test(t.value)?n+="0x"+qn.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var lp=k((lLr,tAe)=>{var bF=Qt();tAe.exports=bF.md=bF.md||{};bF.md.algorithms=bF.md.algorithms||{}});var sT=k((dLr,rAe)=>{var nm=Qt();lp();Lr();var Gnt=rAe.exports=nm.hmac=nm.hmac||{};Gnt.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in nm.md.algorithms)e=nm.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=nm.util.createBuffer(s);else if(nm.util.isArray(s)){var a=s;s=nm.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=nm.util.createBuffer(),n=nm.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var a=s.at(c);r.putByte(54^a),n.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var xF=k((pLr,sAe)=>{var dp=Qt();lp();Lr();var iAe=sAe.exports=dp.md5=dp.md5||{};dp.md.md5=dp.md.algorithms.md5=iAe;iAe.create=function(){oAe||jnt();var t=null,e=dp.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=dp.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=dp.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),nAe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=dp.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes($Z.substr(0,n.blockLength-s));for(var a,c=0,u=n.fullMessageLength.length-1;u>=0;--u)a=n.fullMessageLength[u]*8+c,c=a/4294967296>>>0,i.putInt32Le(a>>>0);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};nAe(l,r,i);var d=dp.util.createBuffer();return d.putInt32Le(l.h0),d.putInt32Le(l.h1),d.putInt32Le(l.h2),d.putInt32Le(l.h3),d},n};var $Z=null,_F=null,D2=null,aT=null,oAe=!1;function jnt(){$Z="\x80",$Z+=dp.util.fillString("\0",64),_F=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],D2=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],aT=new Array(64);for(var t=0;t<64;++t)aT[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);oAe=!0}function nAe(t,e,r){for(var n,i,o,s,a,c,u,l,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,l=0;l<16;++l)e[l]=r.getInt32Le(),c=a^o&(s^a),n=i+c+aT[l]+e[l],u=D2[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<32;++l)c=s^a&(o^s),n=i+c+aT[l]+e[_F[l]],u=D2[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<48;++l)c=o^s^a,n=i+c+aT[l]+e[_F[l]],u=D2[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<64;++l)c=s^(o|~a),n=i+c+aT[l]+e[_F[l]],u=D2[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,d-=64}}});var Ib=k((fLr,cAe)=>{var EF=Qt();Lr();var aAe=cAe.exports=EF.pem=EF.pem||{};aAe.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=SF(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=SF(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=SF(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=SF(t.headers[i]);return t.procType&&(r+=`\r
`),r+=EF.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};aAe.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:EF.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var l=c[u].replace(/\s+$/,""),d=u+1;d<c.length;++d){var p=c[d];if(!/\s/.test(p[0]))break;l+=p,u=d}if(o=l.match(n),o){for(var f={name:o[1],values:[]},m=o[2].split(","),h=0;h<m.length;++h)f.values.push(znt(m[h]));if(a.procType)if(!a.contentDomain&&f.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&f.name==="DEK-Info"){if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(f);else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function SF(t){for(var e=t.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function znt(t){return t.replace(/^\s+/,"")}});var N2=k((mLr,lAe)=>{var Xn=Qt();mF();HZ();Lr();lAe.exports=Xn.des=Xn.des||{};Xn.des.startEncrypting=function(t,e,r,n){var i=TF({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Xn.des.createEncryptionCipher=function(t,e){return TF({key:t,output:null,decrypt:!1,mode:e})};Xn.des.startDecrypting=function(t,e,r,n){var i=TF({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Xn.des.createDecryptionCipher=function(t,e){return TF({key:t,output:null,decrypt:!0,mode:e})};Xn.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return uAe(r._keys,n,i,!1)},decrypt:function(n,i){return uAe(r._keys,n,i,!0)}}}),r._init=!1};Xn.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Xn.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Znt(e),this._init=!0}};pp("DES-ECB",Xn.cipher.modes.ecb);pp("DES-CBC",Xn.cipher.modes.cbc);pp("DES-CFB",Xn.cipher.modes.cfb);pp("DES-OFB",Xn.cipher.modes.ofb);pp("DES-CTR",Xn.cipher.modes.ctr);pp("3DES-ECB",Xn.cipher.modes.ecb);pp("3DES-CBC",Xn.cipher.modes.cbc);pp("3DES-CFB",Xn.cipher.modes.cfb);pp("3DES-OFB",Xn.cipher.modes.ofb);pp("3DES-CTR",Xn.cipher.modes.ctr);function pp(t,e){var r=function(){return new Xn.des.Algorithm(t,e)};Xn.cipher.registerAlgorithm(t,r)}var Vnt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],$nt=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Wnt=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Knt=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Ynt=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Qnt=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Xnt=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Jnt=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Znt(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],h=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],y=0,b,x=0;x<h;x++){var S=t.getInt32(),T=t.getInt32();b=(S>>>4^T)&252645135,T^=b,S^=b<<4,b=(T>>>-16^S)&65535,S^=b,T^=b<<-16,b=(S>>>2^T)&858993459,T^=b,S^=b<<2,b=(T>>>-16^S)&65535,S^=b,T^=b<<-16,b=(S>>>1^T)&1431655765,T^=b,S^=b<<1,b=(T>>>8^S)&16711935,S^=b,T^=b<<8,b=(S>>>1^T)&1431655765,T^=b,S^=b<<1,b=S<<8|T>>>20&240,S=T<<24|T<<8&16711680|T>>>8&65280|T>>>24&240,T=b;for(var L=0;L<v.length;++L){v[L]?(S=S<<2|S>>>26,T=T<<2|T>>>26):(S=S<<1|S>>>27,T=T<<1|T>>>27),S&=-15,T&=-15;var M=e[S>>>28]|r[S>>>24&15]|n[S>>>20&15]|i[S>>>16&15]|o[S>>>12&15]|s[S>>>8&15]|a[S>>>4&15],j=c[T>>>28]|u[T>>>24&15]|l[T>>>20&15]|d[T>>>16&15]|p[T>>>12&15]|f[T>>>8&15]|m[T>>>4&15];b=(j>>>16^M)&65535,g[y++]=M^b,g[y++]=j^b<<16}}return g}function uAe(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],c=e[1];s=(a>>>4^c)&252645135,c^=s,a^=s<<4,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var l=o[u+1],d=o[u+2],p=o[u];p!=l;p+=d){var f=c^t[p],m=(c>>>4|c<<28)^t[p+1];s=a,a=c,c=s^($nt[f>>>24&63]|Knt[f>>>16&63]|Qnt[f>>>8&63]|Jnt[f&63]|Vnt[m>>>24&63]|Wnt[m>>>16&63]|Ynt[m>>>8&63]|Xnt[m&63])}s=a,a=c,c=s}a=a>>>1|a<<31,c=c>>>1|c<<31,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(a>>>4^c)&252645135,c^=s,a^=s<<4,r[0]=a,r[1]=c}function TF(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Xn.cipher.createDecipher(r,t.key):n=Xn.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Xn.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var CF=k((hLr,dAe)=>{var ha=Qt();sT();lp();Lr();var eit=ha.pkcs5=ha.pkcs5||{},im;ha.util.isNodejs&&!ha.options.usePureJavaScript&&(im=require("crypto"));dAe.exports=ha.pbkdf2=eit.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),ha.util.isNodejs&&!ha.options.usePureJavaScript&&im.pbkdf2&&(i===null||typeof i!="object")&&(im.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?im.pbkdf2Sync.length===4?im.pbkdf2(t,e,r,n,function(b,x){if(b)return o(b);o(null,x.toString("binary"))}):im.pbkdf2(t,e,r,n,i,function(b,x){if(b)return o(b);o(null,x.toString("binary"))}):im.pbkdf2Sync.length===4?im.pbkdf2Sync(t,e,r,n).toString("binary"):im.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in ha.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=ha.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),u=n-(c-1)*s,l=ha.hmac.create();l.start(i,t);var d="",p,f,m;if(!o){for(var h=1;h<=c;++h){l.start(null,null),l.update(e),l.update(ha.util.int32ToBytes(h)),p=m=l.digest().getBytes();for(var g=2;g<=r;++g)l.start(null,null),l.update(m),f=l.digest().getBytes(),p=ha.util.xorBytes(p,f,s),m=f;d+=h<c?p:p.substr(0,u)}return d}var h=1,g;function v(){if(h>c)return o(null,d);l.start(null,null),l.update(e),l.update(ha.util.int32ToBytes(h)),p=m=l.digest().getBytes(),g=2,y()}function y(){if(g<=r)return l.start(null,null),l.update(m),f=l.digest().getBytes(),p=ha.util.xorBytes(p,f,s),m=f,++g,ha.util.setImmediate(y);d+=h<c?p:p.substr(0,u),++h,v()}v()}});var KZ=k((gLr,gAe)=>{var fp=Qt();lp();Lr();var fAe=gAe.exports=fp.sha256=fp.sha256||{};fp.md.sha256=fp.md.algorithms.sha256=fAe;fAe.create=function(){mAe||tit();var t=null,e=fp.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=fp.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=fp.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),pAe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=fp.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(WZ.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};pAe(d,r,i);var p=fp.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p.putInt32(d.h5),p.putInt32(d.h6),p.putInt32(d.h7),p},n};var WZ=null,mAe=!1,hAe=null;function tit(){WZ="\x80",WZ+=fp.util.fillString("\0",64),hAe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],mAe=!0}function pAe(t,e,r){for(var n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,y=r.length();y>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(l=t.h0,d=t.h1,p=t.h2,f=t.h3,m=t.h4,h=t.h5,g=t.h6,v=t.h7,u=0;u<64;++u)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=g^m&(h^g),o=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),c=l&d|p&(l^d),n=v+s+a+hAe[u]+e[u],i=o+c,v=g,g=h,h=m,m=f+n>>>0,f=p,p=d,d=l,l=n+i>>>0;t.h0=t.h0+l|0,t.h1=t.h1+d|0,t.h2=t.h2+p|0,t.h3=t.h3+f|0,t.h4=t.h4+m|0,t.h5=t.h5+h|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,y-=64}}});var YZ=k((vLr,vAe)=>{var mp=Qt();Lr();var IF=null;mp.util.isNodejs&&!mp.options.usePureJavaScript&&!process.versions["node-webkit"]&&(IF=require("crypto"));var rit=vAe.exports=mp.prng=mp.prng||{};rit.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,l){if(!l)return e.generateSync(u);var d=e.plugin.cipher,p=e.plugin.increment,f=e.plugin.formatKey,m=e.plugin.formatSeed,h=mp.util.createBuffer();e.key=null,g();function g(v){if(v)return l(v);if(h.length()>=u)return l(null,h.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return mp.util.nextTick(function(){o(g)});var y=d(e.key,e.seed);e.generated+=y.length,h.putBytes(y),e.key=f(d(e.key,p(e.seed))),e.seed=m(d(e.key,e.seed)),mp.util.setImmediate(g)}},e.generateSync=function(u){var l=e.plugin.cipher,d=e.plugin.increment,p=e.plugin.formatKey,f=e.plugin.formatSeed;e.key=null;for(var m=mp.util.createBuffer();m.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&s();var h=l(e.key,e.seed);e.generated+=h.length,m.putBytes(h),e.key=p(l(e.key,d(e.seed))),e.seed=f(l(e.key,e.seed))}return m.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return a(),u();var l=32-e.pools[0].messageLength<<5;e.seedFile(l,function(d,p){if(d)return u(d);e.collect(p),a(),u()})}function s(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var l=1,d=0;d<32;++d)e.reseeds%l===0&&(u.update(e.pools[d].digest().getBytes()),e.pools[d].start()),l=l<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var p=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(p),e.generated=0}function c(u){var l=null,d=mp.util.globalScope,p=d.crypto||d.msCrypto;p&&p.getRandomValues&&(l=function(S){return p.getRandomValues(S)});var f=mp.util.createBuffer();if(l)for(;f.length()<u;){var m=Math.max(1,Math.min(u-f.length(),65536)/4),h=new Uint32Array(Math.floor(m));try{l(h);for(var g=0;g<h.length;++g)f.putInt32(h[g])}catch(S){if(!(typeof QuotaExceededError<"u"&&S instanceof QuotaExceededError))throw S}}if(f.length()<u)for(var v,y,b,x=Math.floor(Math.random()*65536);f.length()<u;){y=16807*(x&65535),v=16807*(x>>16),y+=(v&32767)<<16,y+=v>>15,y=(y&2147483647)+(y>>31),x=y&4294967295;for(var g=0;g<3;++g)b=x>>>(g<<3),b^=Math.floor(Math.random()*256),f.putByte(b&255)}return f.getBytes(u)}return IF?(e.seedFile=function(u,l){IF.randomBytes(u,function(d,p){if(d)return l(d);l(null,p.toString())})},e.seedFileSync=function(u){return IF.randomBytes(u).toString()}):(e.seedFile=function(u,l){try{l(null,c(u))}catch(d){l(d)}},e.seedFileSync=c),e.collect=function(u){for(var l=u.length,d=0;d<l;++d)e.pools[e.pool].update(u.substr(d,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,l){for(var d="",p=0;p<l;p+=8)d+=String.fromCharCode(u>>p&255);e.collect(d)},e.registerWorker=function(u){if(u===self)e.seedFile=function(d,p){function f(m){var h=m.data;h.forge&&h.forge.prng&&(self.removeEventListener("message",f),p(h.forge.prng.err,h.forge.prng.bytes))}self.addEventListener("message",f),self.postMessage({forge:{prng:{needed:d}}})};else{var l=function(d){var p=d.data;p.forge&&p.forge.prng&&e.seedFile(p.forge.prng.needed,function(f,m){u.postMessage({forge:{prng:{err:f,bytes:m}}})})};u.addEventListener("message",l)}},e}});var wu=k((yLr,QZ)=>{var qo=Qt();E0();KZ();YZ();Lr();(function(){if(qo.random&&qo.random.getBytes){QZ.exports=qo.random;return}(function(t){var e={},r=new Array(4),n=qo.util.createBuffer();e.formatKey=function(d){var p=qo.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),qo.aes._expandKey(d,!1)},e.formatSeed=function(d){var p=qo.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),d},e.cipher=function(d,p){return qo.aes._updateBlock(d,p,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(d){return++d[3],d},e.md=qo.md.sha256;function i(){var d=qo.prng.create(e);return d.getBytes=function(p,f){return d.generate(p,f)},d.getBytesSync=function(p){return d.generate(p)},d}var o=i(),s=null,a=qo.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(s=function(d){return c.getRandomValues(d)}),qo.options.usePureJavaScript||!qo.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var l in navigator)try{typeof navigator[l]=="string"&&(u+=navigator[l])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(d){o.collectInt(d.clientX,16),o.collectInt(d.clientY,16)}),t().keypress(function(d){o.collectInt(d.charCode,8)}))}if(!qo.random)qo.random=o;else for(var l in o)qo.random[l]=o[l];qo.random.createInstance=i,QZ.exports=qo.random})(typeof jQuery<"u"?jQuery:null)})()});var JZ=k((bLr,_Ae)=>{var Ja=Qt();Lr();var XZ=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],yAe=[1,2,3,5],nit=function(t,e){return t<<e&65535|(t&65535)>>16-e},iit=function(t,e){return(t&65535)>>e|t<<16-e&65535};_Ae.exports=Ja.rc2=Ja.rc2||{};Ja.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Ja.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(XZ[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,XZ[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,XZ[r.at(a+1)^r.at(a+o)]);return r};var bAe=function(t,e,r){var n=!1,i=null,o=null,s=null,a,c,u,l,d=[];for(t=Ja.rc2.expandKey(t,e),u=0;u<64;u++)d.push(t.getInt16Le());r?(a=function(m){for(u=0;u<4;u++)m[u]+=d[l]+(m[(u+3)%4]&m[(u+2)%4])+(~m[(u+3)%4]&m[(u+1)%4]),m[u]=nit(m[u],yAe[u]),l++},c=function(m){for(u=0;u<4;u++)m[u]+=d[m[(u+3)%4]&63]}):(a=function(m){for(u=3;u>=0;u--)m[u]=iit(m[u],yAe[u]),m[u]-=d[l]+(m[(u+3)%4]&m[(u+2)%4])+(~m[(u+3)%4]&m[(u+1)%4]),l--},c=function(m){for(u=3;u>=0;u--)m[u]-=d[m[(u+3)%4]&63]});var p=function(m){var h=[];for(u=0;u<4;u++){var g=i.getInt16Le();s!==null&&(r?g^=s.getInt16Le():s.putInt16Le(g)),h.push(g&65535)}l=r?0:63;for(var v=0;v<m.length;v++)for(var y=0;y<m[v][0];y++)m[v][1](h);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(h[u]):h[u]^=s.getInt16Le()),o.putInt16Le(h[u])},f=null;return f={start:function(m,h){m&&typeof m=="string"&&(m=Ja.util.createBuffer(m)),n=!1,i=Ja.util.createBuffer(),o=h||new Ja.util.createBuffer,s=m,f.output=o},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)p([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(m){var h=!0;if(r)if(m)h=m(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(h&&(n=!0,f.update()),!r&&(h=i.length()===0,h))if(m)h=m(8,o,!r);else{var v=o.length(),y=o.at(v-1);y>v?h=!1:o.truncate(y)}return h}},f};Ja.rc2.startEncrypting=function(t,e,r){var n=Ja.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Ja.rc2.createEncryptionCipher=function(t,e){return bAe(t,e,!0)};Ja.rc2.startDecrypting=function(t,e,r){var n=Ja.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Ja.rc2.createDecryptionCipher=function(t,e){return bAe(t,e,!1)}});var O2=k((_Lr,RAe)=>{var ZZ=Qt();RAe.exports=ZZ.jsbn=ZZ.jsbn||{};var om,oit=0xdeadbeefcafe,xAe=(oit&16777215)==15715070;function ve(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}ZZ.jsbn.BigInteger=ve;function Or(){return new ve(null)}function sit(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function ait(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,l=a*c+u*s;c=s*c+((l&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(l>>>15)+a*u+(i>>>30),r.data[n++]=c&1073741823}return i}function SAe(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,l=a*c+u*s;c=s*c+((l&16383)<<14)+r.data[n]+i,i=(c>>28)+(l>>14)+a*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(ve.prototype.am=SAe,om=28):xAe&&navigator.appName=="Microsoft Internet Explorer"?(ve.prototype.am=ait,om=30):xAe&&navigator.appName!="Netscape"?(ve.prototype.am=sit,om=26):(ve.prototype.am=SAe,om=28);ve.prototype.DB=om;ve.prototype.DM=(1<<om)-1;ve.prototype.DV=1<<om;var eee=52;ve.prototype.FV=Math.pow(2,eee);ve.prototype.F1=eee-om;ve.prototype.F2=2*om-eee;var cit="0123456789abcdefghijklmnopqrstuvwxyz",wF=new Array,cT,Ru;cT=48;for(Ru=0;Ru<=9;++Ru)wF[cT++]=Ru;cT=97;for(Ru=10;Ru<36;++Ru)wF[cT++]=Ru;cT=65;for(Ru=10;Ru<36;++Ru)wF[cT++]=Ru;function EAe(t){return cit.charAt(t)}function TAe(t,e){var r=wF[t.charCodeAt(e)];return r??-1}function uit(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function lit(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function C0(t){var e=Or();return e.fromInt(t),e}function dit(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:TAe(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&ve.ZERO.subTo(this,this)}function pit(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function fit(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=EAe(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=EAe(n));return i?o:"0"}function mit(){var t=Or();return ve.ZERO.subTo(this,t),t}function hit(){return this.s<0?this.negate():this}function git(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function RF(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function vit(){return this.t<=0?0:this.DB*(this.t-1)+RF(this.data[this.t-1]^this.s&this.DM)}function yit(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function bit(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function _it(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function xit(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function Sit(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function Eit(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&ve.ZERO.subTo(e,e)}function Tit(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Cit(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Or());var o=Or(),s=this.s,a=t.s,c=this.DB-RF(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,l=o.data[u-1];if(l!=0){var d=l*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),p=this.FV/d,f=(1<<this.F1)/d,m=1<<this.F2,h=r.t,g=h-u,v=e??Or();for(o.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),ve.ONE.dlShiftTo(u,v),v.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--g>=0;){var y=r.data[--h]==l?this.DM:Math.floor(r.data[h]*p+(r.data[h-1]+m)*f);if((r.data[h]+=o.am(0,y,r,g,0,u))<y)for(o.dlShiftTo(g,v),r.subTo(v,r);r.data[h]<--y;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),s!=a&&ve.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&ve.ZERO.subTo(r,r)}}}function Iit(t){var e=Or();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ve.ZERO)>0&&t.subTo(e,e),e}function wb(t){this.m=t}function wit(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Rit(t){return t}function Ait(t){t.divRemTo(this.m,null,t)}function Pit(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function kit(t,e){t.squareTo(e),this.reduce(e)}wb.prototype.convert=wit;wb.prototype.revert=Rit;wb.prototype.reduce=Ait;wb.prototype.mulTo=Pit;wb.prototype.sqrTo=kit;function Dit(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Rb(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Nit(t){var e=Or();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ve.ZERO)>0&&this.m.subTo(e,e),e}function Lit(t){var e=Or();return t.copyTo(e),this.reduce(e),e}function Oit(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Mit(t,e){t.squareTo(e),this.reduce(e)}function Fit(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Rb.prototype.convert=Nit;Rb.prototype.revert=Lit;Rb.prototype.reduce=Oit;Rb.prototype.mulTo=Fit;Rb.prototype.sqrTo=Mit;function Uit(){return(this.t>0?this.data[0]&1:this.s)==0}function Bit(t,e){if(t>4294967295||t<1)return ve.ONE;var r=Or(),n=Or(),i=e.convert(this),o=RF(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function qit(t,e){var r;return t<256||e.isEven()?r=new wb(e):r=new Rb(e),this.exp(t,r)}ve.prototype.copyTo=uit;ve.prototype.fromInt=lit;ve.prototype.fromString=dit;ve.prototype.clamp=pit;ve.prototype.dlShiftTo=yit;ve.prototype.drShiftTo=bit;ve.prototype.lShiftTo=_it;ve.prototype.rShiftTo=xit;ve.prototype.subTo=Sit;ve.prototype.multiplyTo=Eit;ve.prototype.squareTo=Tit;ve.prototype.divRemTo=Cit;ve.prototype.invDigit=Dit;ve.prototype.isEven=Uit;ve.prototype.exp=Bit;ve.prototype.toString=fit;ve.prototype.negate=mit;ve.prototype.abs=hit;ve.prototype.compareTo=git;ve.prototype.bitLength=vit;ve.prototype.mod=Iit;ve.prototype.modPowInt=qit;ve.ZERO=C0(0);ve.ONE=C0(1);function Hit(){var t=Or();return this.copyTo(t),t}function Git(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function jit(){return this.t==0?this.s:this.data[0]<<24>>24}function zit(){return this.t==0?this.s:this.data[0]<<16>>16}function Vit(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function $it(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Wit(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=C0(r),i=Or(),o=Or(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function Kit(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var c=TAe(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&ve.ZERO.subTo(this,this)}function Yit(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(ve.ONE.shiftLeft(t-1),tee,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ve.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Qit(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Xit(t){return this.compareTo(t)==0}function Jit(t){return this.compareTo(t)<0?this:t}function Zit(t){return this.compareTo(t)>0?this:t}function eot(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function tot(t,e){return t&e}function rot(t){var e=Or();return this.bitwiseTo(t,tot,e),e}function tee(t,e){return t|e}function not(t){var e=Or();return this.bitwiseTo(t,tee,e),e}function CAe(t,e){return t^e}function iot(t){var e=Or();return this.bitwiseTo(t,CAe,e),e}function IAe(t,e){return t&~e}function oot(t){var e=Or();return this.bitwiseTo(t,IAe,e),e}function sot(){for(var t=Or(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function aot(t){var e=Or();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function cot(t){var e=Or();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function uot(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function lot(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+uot(this.data[t]);return this.s<0?this.t*this.DB:-1}function dot(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function pot(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=dot(this.data[r]^e);return t}function fot(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function mot(t,e){var r=ve.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function hot(t){return this.changeBit(t,tee)}function got(t){return this.changeBit(t,IAe)}function vot(t){return this.changeBit(t,CAe)}function yot(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function bot(t){var e=Or();return this.addTo(t,e),e}function _ot(t){var e=Or();return this.subTo(t,e),e}function xot(t){var e=Or();return this.multiplyTo(t,e),e}function Sot(t){var e=Or();return this.divRemTo(t,e,null),e}function Eot(t){var e=Or();return this.divRemTo(t,null,e),e}function Tot(t){var e=Or(),r=Or();return this.divRemTo(t,e,r),new Array(e,r)}function Cot(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Iot(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function L2(){}function wAe(t){return t}function wot(t,e,r){t.multiplyTo(e,r)}function Rot(t,e){t.squareTo(e)}L2.prototype.convert=wAe;L2.prototype.revert=wAe;L2.prototype.mulTo=wot;L2.prototype.sqrTo=Rot;function Aot(t){return this.exp(t,new L2)}function Pot(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function kot(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function uT(t){this.r2=Or(),this.q3=Or(),ve.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Dot(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Or();return t.copyTo(e),this.reduce(e),e}function Not(t){return t}function Lot(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Oot(t,e){t.squareTo(e),this.reduce(e)}function Mot(t,e,r){t.multiplyTo(e,r),this.reduce(r)}uT.prototype.convert=Dot;uT.prototype.revert=Not;uT.prototype.reduce=Lot;uT.prototype.mulTo=Mot;uT.prototype.sqrTo=Oot;function Fot(t,e){var r=t.bitLength(),n,i=C0(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new wb(e):e.isEven()?o=new uT(e):o=new Rb(e);var s=new Array,a=3,c=n-1,u=(1<<n)-1;if(s[1]=o.convert(this),n>1){var l=Or();for(o.sqrTo(s[1],l);a<=u;)s[a]=Or(),o.mulTo(l,s[a-2],s[a]),a+=2}var d=t.t-1,p,f=!0,m=Or(),h;for(r=RF(t.data[d])-1;d>=0;){for(r>=c?p=t.data[d]>>r-c&u:(p=(t.data[d]&(1<<r+1)-1)<<c-r,d>0&&(p|=t.data[d-1]>>this.DB+r-c)),a=n;!(p&1);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),f)s[p].copyTo(i),f=!1;else{for(;a>1;)o.sqrTo(i,m),o.sqrTo(m,i),a-=2;a>0?o.sqrTo(i,m):(h=i,i=m,m=h),o.mulTo(m,s[p],i)}for(;d>=0&&!(t.data[d]&1<<r);)o.sqrTo(i,m),h=i,i=m,m=h,--r<0&&(r=this.DB-1,--d)}return o.revert(i)}function Uot(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Bot(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function qot(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ve.ZERO;for(var r=t.clone(),n=this.clone(),i=C0(1),o=C0(0),s=C0(0),a=C0(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(ve.ONE)!=0)return ve.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Pl=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Hot=(1<<26)/Pl[Pl.length-1];function Got(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Pl[Pl.length-1]){for(e=0;e<Pl.length;++e)if(r.data[0]==Pl[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Pl.length;){for(var n=Pl[e],i=e+1;i<Pl.length&&n<Hot;)n*=Pl[i++];for(n=r.modInt(n);e<i;)if(n%Pl[e++]==0)return!1}return r.millerRabin(t)}function jot(t){var e=this.subtract(ve.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=zot(),o,s=0;s<t;++s){do o=new ve(this.bitLength(),i);while(o.compareTo(ve.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(ve.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(ve.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function zot(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}ve.prototype.chunkSize=Vit;ve.prototype.toRadix=Wit;ve.prototype.fromRadix=Kit;ve.prototype.fromNumber=Yit;ve.prototype.bitwiseTo=eot;ve.prototype.changeBit=mot;ve.prototype.addTo=yot;ve.prototype.dMultiply=Cot;ve.prototype.dAddOffset=Iot;ve.prototype.multiplyLowerTo=Pot;ve.prototype.multiplyUpperTo=kot;ve.prototype.modInt=Bot;ve.prototype.millerRabin=jot;ve.prototype.clone=Hit;ve.prototype.intValue=Git;ve.prototype.byteValue=jit;ve.prototype.shortValue=zit;ve.prototype.signum=$it;ve.prototype.toByteArray=Qit;ve.prototype.equals=Xit;ve.prototype.min=Jit;ve.prototype.max=Zit;ve.prototype.and=rot;ve.prototype.or=not;ve.prototype.xor=iot;ve.prototype.andNot=oot;ve.prototype.not=sot;ve.prototype.shiftLeft=aot;ve.prototype.shiftRight=cot;ve.prototype.getLowestSetBit=lot;ve.prototype.bitCount=pot;ve.prototype.testBit=fot;ve.prototype.setBit=hot;ve.prototype.clearBit=got;ve.prototype.flipBit=vot;ve.prototype.add=bot;ve.prototype.subtract=_ot;ve.prototype.multiply=xot;ve.prototype.divide=Sot;ve.prototype.remainder=Eot;ve.prototype.divideAndRemainder=Tot;ve.prototype.modPow=Fot;ve.prototype.modInverse=qot;ve.prototype.pow=Aot;ve.prototype.gcd=Uot;ve.prototype.isProbablePrime=Got});var lT=k((xLr,DAe)=>{var hp=Qt();lp();Lr();var PAe=DAe.exports=hp.sha1=hp.sha1||{};hp.md.sha1=hp.md.algorithms.sha1=PAe;PAe.create=function(){kAe||Vot();var t=null,e=hp.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=hp.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=hp.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),AAe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=hp.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(ree.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};AAe(d,r,i);var p=hp.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p},n};var ree=null,kAe=!1;function Vot(){ree="\x80",ree+=hp.util.fillString("\0",64),kAe=!0}function AAe(t,e,r){for(var n,i,o,s,a,c,u,l,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,c=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<20;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<32;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<40;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<60;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o&s|a&(o^s),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<80;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,d-=64}}});var nee=k((SLr,LAe)=>{var gp=Qt();Lr();wu();lT();var NAe=LAe.exports=gp.pkcs1=gp.pkcs1||{};NAe.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=gp.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),c=a-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var l=o.digest(),d="",p=c-e.length,f=0;f<p;f++)d+="\0";var m=l.getBytes()+d+""+e;if(!i)i=gp.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var h=AF(i,a-o.digestLength-1,s),g=gp.util.xorBytes(m,h,m.length),v=AF(g,o.digestLength,s),y=gp.util.xorBytes(i,v,i.length);return"\0"+y+g};NAe.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=s,g}if(i===void 0?i=gp.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),l=e.substring(1+i.digestLength),d=AF(l,i.digestLength,o),p=gp.util.xorBytes(u,d,u.length),f=AF(p,s-i.digestLength-1,o),m=gp.util.xorBytes(l,f,l.length),h=m.substring(0,i.digestLength),g=c!=="\0",v=0;v<i.digestLength;++v)g|=a.charAt(v)!==h.charAt(v);for(var y=1,b=i.digestLength,x=i.digestLength;x<m.length;x++){var S=m.charCodeAt(x),T=S&1^1,L=y?65534:0;g|=S&L,y=y&T,b+=y}if(g||m.charCodeAt(b)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(b+1)};function AF(t,e,r){r||(r=gp.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var oee=k((ELr,iee)=>{var I0=Qt();Lr();O2();wu();(function(){if(I0.prime){iee.exports=I0.prime;return}var t=iee.exports=I0.prime=I0.prime||{},e=I0.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(d,p){return d|p};t.generateProbablePrime=function(d,p,f){typeof p=="function"&&(f=p,p={}),p=p||{};var m=p.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var h=p.prng||I0.random,g={nextBytes:function(v){for(var y=h.getBytesSync(v.length),b=0;b<v.length;++b)v[b]=y.charCodeAt(b)}};if(m.name==="PRIMEINC")return o(d,g,m.options,f);throw new Error("Invalid prime generation algorithm: "+m.name)};function o(d,p,f,m){return"workers"in f?c(d,p,f,m):s(d,p,f,m)}function s(d,p,f,m){var h=u(d,p),g=0,v=l(h.bitLength());"millerRabinTests"in f&&(v=f.millerRabinTests);var y=10;"maxBlockTime"in f&&(y=f.maxBlockTime),a(h,d,p,g,v,y,m)}function a(d,p,f,m,h,g,v){var y=+new Date;do{if(d.bitLength()>p&&(d=u(p,f)),d.isProbablePrime(h))return v(null,d);d.dAddOffset(r[m++%8],0)}while(g<0||+new Date-y<g);I0.util.setImmediate(function(){a(d,p,f,m,h,g,v)})}function c(d,p,f,m){if(typeof Worker>"u")return s(d,p,f,m);var h=u(d,p),g=f.workers,v=f.workLoad||100,y=v*30/8,b=f.workerScript||"forge/prime.worker.js";if(g===-1)return I0.util.estimateCores(function(S,T){S&&(T=2),g=T-1,x()});x();function x(){g=Math.max(1,g);for(var S=[],T=0;T<g;++T)S[T]=new Worker(b);for(var L=g,T=0;T<g;++T)S[T].addEventListener("message",j);var M=!1;function j(N){if(!M){--L;var J=N.data;if(J.found){for(var X=0;X<S.length;++X)S[X].terminate();return M=!0,m(null,new e(J.prime,16))}h.bitLength()>d&&(h=u(d,p));var D=h.toString(16);N.target.postMessage({hex:D,workLoad:v}),h.dAddOffset(y,0)}}}}function u(d,p){var f=new e(d,p),m=d-1;return f.testBit(m)||f.bitwiseTo(e.ONE.shiftLeft(m),i,f),f.dAddOffset(31-f.mod(n).byteValue(),0),f}function l(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}})()});var M2=k((TLr,HAe)=>{var vt=Qt();Al();O2();T0();nee();oee();wu();Lr();typeof Cr>"u"&&(Cr=vt.jsbn.BigInteger);var Cr,see=vt.util.isNodejs?require("crypto"):null,te=vt.asn1,Au=vt.util;vt.pki=vt.pki||{};HAe.exports=vt.pki.rsa=vt.rsa=vt.rsa||{};var Gt=vt.pki,$ot=[6,4,2,4,2,4,6,2],Wot={name:"PrivateKeyInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Kot={name:"RSAPrivateKey",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Yot={name:"RSAPublicKey",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Qot=vt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:te.Class.UNIVERSAL,type:te.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Xot={name:"DigestInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:te.Class.UNIVERSAL,type:te.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Jot=function(t){var e;if(t.algorithm in Gt.oids)e=Gt.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=te.oidToDer(e).getBytes(),i=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[]),o=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[]);o.value.push(te.create(te.Class.UNIVERSAL,te.Type.OID,!1,n)),o.value.push(te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,""));var s=te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),te.toDer(i).getBytes()},BAe=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Cr.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Cr.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Cr(vt.util.bytesToHex(vt.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Cr.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};Gt.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=qAe(t,e,r)):(i=vt.util.createBuffer(),i.putBytes(t));for(var s=new Cr(i.toHex(),16),a=BAe(s,e,n),c=a.toString(16),u=vt.util.createBuffer(),l=o-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(vt.util.hexToBytes(c)),u.getBytes()};Gt.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new Cr(vt.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=BAe(s,e,r),c=a.toString(16),u=vt.util.createBuffer(),l=i-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(vt.util.hexToBytes(c)),n!==!1?PF(u.getBytes(),e,r):u.getBytes()};Gt.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||vt.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new Cr(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};Gt.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Cr(null);r.fromInt(30);for(var n=0,i=function(d,p){return d|p},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new Cr(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Cr.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(est(t.num.bitLength()))?++t.pqState:t.num.dAddOffset($ot[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Cr.ONE).gcd(t.e).compareTo(Cr.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Cr.ONE),t.q1=t.q.subtract(Cr.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Cr.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var l=t.e.modInverse(t.phi);t.keys={privateKey:Gt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:Gt.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};Gt.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!vt.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(OAe("generateKeyPair"))return see.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:Gt.privateKeyFromPem(u),publicKey:Gt.publicKeyFromPem(c)})});if(MAe("generateKey")&&MAe("exportKey"))return Au.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:UAe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Au.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=Gt.privateKeyFromAsn1(te.fromDer(vt.util.createBuffer(a)));n(null,{privateKey:c,publicKey:Gt.setRsaPublicKey(c.n,c.e)})}});if(FAe("generateKey")&&FAe("exportKey")){var i=Au.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:UAe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=Au.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(l){var d=l.target.result,p=Gt.privateKeyFromAsn1(te.fromDer(vt.util.createBuffer(d)));n(null,{privateKey:p,publicKey:Gt.setRsaPublicKey(p.n,p.e)})},u.onerror=function(l){n(l)}},i.onerror=function(a){n(a)};return}}else if(OAe("generateKeyPairSync")){var o=see.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Gt.privateKeyFromPem(o.privateKey),publicKey:Gt.publicKeyFromPem(o.publicKey)}}}var s=Gt.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Gt.rsa.stepKeyPairGenerationState(s,0),s.keys;Zot(s,r,n)};Gt.setRsaPublicKey=Gt.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return qAe(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return vt.pkcs1.encode_rsa_oaep(c,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return Gt.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(c,u){u=PF(u,r,!0);var l=te.fromDer(u,{parseAllBytes:s._parseAllDigestBytes}),d={},p=[];if(!te.validate(l,Xot,d,p)){var f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw f.errors=p,f}var m=te.derToOid(d.algorithmIdentifier);if(!(m===vt.oids.md2||m===vt.oids.md5||m===vt.oids.sha1||m===vt.oids.sha224||m===vt.oids.sha256||m===vt.oids.sha384||m===vt.oids.sha512||m===vt.oids["sha512-224"]||m===vt.oids["sha512-256"])){var f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw f.oid=m,f}if((m===vt.oids.md2||m===vt.oids.md5)&&!("parameters"in d))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===d.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(c,u){return u=PF(u,r,!0),c===u}});var a=Gt.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};Gt.setRsaPrivateKey=Gt.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return c.decrypt=function(u,l,d){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var p=Gt.rsa.decrypt(u,c,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:PF};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(f,m){return vt.pkcs1.decode_rsa_oaep(m,f,d)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(f){return f}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(p,c,!1)},c.sign=function(u,l){var d=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:Jot},d=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return u}},d=1);var p=l.encode(u,c.n.bitLength());return Gt.rsa.encrypt(p,c,d)},c};Gt.wrapRsaPrivateKey=function(t){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,te.integerToDer(0).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(Gt.oids.rsaEncryption).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")]),te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,te.toDer(t).getBytes())])};Gt.privateKeyFromAsn1=function(t){var e={},r=[];if(te.validate(t,Wot,e,r)&&(t=te.fromDer(vt.util.createBuffer(e.privateKey))),e={},r=[],!te.validate(t,Kot,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,c,u,l,d;return i=vt.util.createBuffer(e.privateKeyModulus).toHex(),o=vt.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=vt.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=vt.util.createBuffer(e.privateKeyPrime1).toHex(),c=vt.util.createBuffer(e.privateKeyPrime2).toHex(),u=vt.util.createBuffer(e.privateKeyExponent1).toHex(),l=vt.util.createBuffer(e.privateKeyExponent2).toHex(),d=vt.util.createBuffer(e.privateKeyCoefficient).toHex(),Gt.setRsaPrivateKey(new Cr(i,16),new Cr(o,16),new Cr(s,16),new Cr(a,16),new Cr(c,16),new Cr(u,16),new Cr(l,16),new Cr(d,16))};Gt.privateKeyToAsn1=Gt.privateKeyToRSAPrivateKey=function(t){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,te.integerToDer(0).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.n)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.e)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.d)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.p)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.q)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.dP)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.dQ)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.qInv))])};Gt.publicKeyFromAsn1=function(t){var e={},r=[];if(te.validate(t,Qot,e,r)){var n=te.derToOid(e.publicKeyOid);if(n!==Gt.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!te.validate(t,Yot,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=vt.util.createBuffer(e.publicKeyModulus).toHex(),s=vt.util.createBuffer(e.publicKeyExponent).toHex();return Gt.setRsaPublicKey(new Cr(o,16),new Cr(s,16))};Gt.publicKeyToAsn1=Gt.publicKeyToSubjectPublicKeyInfo=function(t){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(Gt.oids.rsaEncryption).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")]),te.create(te.Class.UNIVERSAL,te.Type.BITSTRING,!1,[Gt.publicKeyToRSAPublicKey(t)])])};Gt.publicKeyToRSAPublicKey=function(t){return te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.n)),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,vp(t.e))])};function qAe(t,e,r){var n=vt.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<s;++c)n.putByte(a)}else for(;s>0;){for(var u=0,l=vt.random.getBytes(s),c=0;c<s;++c)a=l.charCodeAt(c),a===0?++u:n.putByte(a);s=u}return n.putByte(0),n.putBytes(t),n}function PF(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=vt.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(a===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var l=o.getByte();if(l!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function Zot(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,c){vt.prime.generateProbablePrime(a,n,c)}function s(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Cr.ONE).gcd(t.e).compareTo(Cr.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Cr.ONE).gcd(t.e).compareTo(Cr.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(Cr.ONE),t.q1=t.q.subtract(Cr.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Cr.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var l=t.e.modInverse(t.phi);t.keys={privateKey:Gt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:Gt.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function vp(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=vt.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function est(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function OAe(t){return vt.util.isNodejs&&typeof see[t]=="function"}function MAe(t){return typeof Au.globalScope<"u"&&typeof Au.globalScope.crypto=="object"&&typeof Au.globalScope.crypto.subtle=="object"&&typeof Au.globalScope.crypto.subtle[t]=="function"}function FAe(t){return typeof Au.globalScope<"u"&&typeof Au.globalScope.msCrypto=="object"&&typeof Au.globalScope.msCrypto.subtle=="object"&&typeof Au.globalScope.msCrypto.subtle[t]=="function"}function UAe(t){for(var e=vt.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var aee=k((CLr,$Ae)=>{var Ke=Qt();E0();Al();N2();lp();T0();CF();Ib();wu();JZ();M2();Lr();typeof GAe>"u"&&(GAe=Ke.jsbn.BigInteger);var GAe,de=Ke.asn1,$t=Ke.pki=Ke.pki||{};$Ae.exports=$t.pbe=Ke.pbe=Ke.pbe||{};var Ab=$t.oids,tst={name:"EncryptedPrivateKeyInfo",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:de.Class.UNIVERSAL,type:de.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},rst={name:"PBES2Algorithms",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:de.Class.UNIVERSAL,type:de.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:de.Class.UNIVERSAL,type:de.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},nst={name:"pkcs-12PbeParams",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:de.Class.UNIVERSAL,type:de.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,capture:"iterations"}]};$t.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Ke.random.getBytesSync(r.saltSize),i=r.count,o=de.integerToDer(i),s,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,l,d;switch(r.algorithm){case"aes128":s=16,u=16,l=Ab["aes128-CBC"],d=Ke.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,l=Ab["aes192-CBC"],d=Ke.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,l=Ab["aes256-CBC"],d=Ke.aes.createEncryptionCipher;break;case"des":s=8,u=8,l=Ab.desCBC,d=Ke.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var f="hmacWith"+r.prfAlgorithm.toUpperCase(),m=VAe(f),h=Ke.pkcs5.pbkdf2(e,n,i,s,m),g=Ke.random.getBytesSync(u),v=d(h);v.start(g),v.update(de.toDer(t)),v.finish(),c=v.output.getBytes();var y=ist(n,o,s,f);a=de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[de.create(de.Class.UNIVERSAL,de.Type.OID,!1,de.oidToDer(Ab.pkcs5PBES2).getBytes()),de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[de.create(de.Class.UNIVERSAL,de.Type.OID,!1,de.oidToDer(Ab.pkcs5PBKDF2).getBytes()),y]),de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[de.create(de.Class.UNIVERSAL,de.Type.OID,!1,de.oidToDer(l).getBytes()),de.create(de.Class.UNIVERSAL,de.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){s=24;var b=new Ke.util.ByteBuffer(n),h=$t.pbe.generatePkcs12Key(e,b,1,i,s),g=$t.pbe.generatePkcs12Key(e,b,2,i,s),v=Ke.des.createEncryptionCipher(h);v.start(g),v.update(de.toDer(t)),v.finish(),c=v.output.getBytes(),a=de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[de.create(de.Class.UNIVERSAL,de.Type.OID,!1,de.oidToDer(Ab["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[de.create(de.Class.UNIVERSAL,de.Type.OCTETSTRING,!1,n),de.create(de.Class.UNIVERSAL,de.Type.INTEGER,!1,o.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var x=de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[a,de.create(de.Class.UNIVERSAL,de.Type.OCTETSTRING,!1,c)]);return x};$t.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!de.validate(t,tst,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=de.derToOid(n.encryptionOid),a=$t.pbe.getCipher(s,n.encryptionParams,e),c=Ke.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=de.fromDer(a.output)),r};$t.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:de.toDer(t).getBytes()};return Ke.pem.encode(r,{maxline:e})};$t.encryptedPrivateKeyFromPem=function(t){var e=Ke.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return de.fromDer(e.body)};$t.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=$t.wrapRsaPrivateKey($t.privateKeyToAsn1(t));return n=$t.encryptPrivateKeyInfo(n,e,r),$t.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=Ke.random.getBytesSync(16),a=Ke.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=Ke.random.getBytesSync(16),a=Ke.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=Ke.random.getBytesSync(16),a=Ke.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=Ke.random.getBytesSync(8),a=Ke.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=Ke.random.getBytesSync(8),a=Ke.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=Ke.pbe.opensslDeriveBytes(e,o.substr(0,8),s),l=a(u);l.start(o),l.update(de.toDer($t.privateKeyToAsn1(t))),l.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Ke.util.bytesToHex(o).toUpperCase()},body:l.output.getBytes()};return Ke.pem.encode(d)};$t.decryptRsaPrivateKey=function(t,e){var r=null,n=Ke.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=Ke.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=Ke.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=Ke.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=Ke.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=Ke.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(d){return Ke.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":o=8,s=function(d){return Ke.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":o=16,s=function(d){return Ke.rc2.createDecryptionCipher(d,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=Ke.util.hexToBytes(n.dekInfo.parameters),c=Ke.pbe.opensslDeriveBytes(e,a.substr(0,8),o),u=s(c);if(u.start(a),u.update(Ke.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=$t.decryptPrivateKeyInfo(de.fromDer(r),e):r=de.fromDer(r),r!==null&&(r=$t.privateKeyFromAsn1(r)),r};$t.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in Ke.md))throw new Error('"sha1" hash algorithm unavailable.');o=Ke.md.sha1.create()}var c=o.digestLength,u=o.blockLength,l=new Ke.util.ByteBuffer,d=new Ke.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)d.putInt16(t.charCodeAt(a));d.putInt16(0)}var p=d.length(),f=e.length(),m=new Ke.util.ByteBuffer;m.fillWithByte(r,u);var h=u*Math.ceil(f/u),g=new Ke.util.ByteBuffer;for(a=0;a<h;a++)g.putByte(e.at(a%f));var v=u*Math.ceil(p/u),y=new Ke.util.ByteBuffer;for(a=0;a<v;a++)y.putByte(d.at(a%p));var b=g;b.putBuffer(y);for(var x=Math.ceil(i/c),S=1;S<=x;S++){var T=new Ke.util.ByteBuffer;T.putBytes(m.bytes()),T.putBytes(b.bytes());for(var L=0;L<n;L++)o.start(),o.update(T.getBytes()),T=o.digest();var M=new Ke.util.ByteBuffer;for(a=0;a<u;a++)M.putByte(T.at(a%c));var j=Math.ceil(f/u)+Math.ceil(p/u),N=new Ke.util.ByteBuffer;for(s=0;s<j;s++){var J=new Ke.util.ByteBuffer(b.getBytes(u)),X=511;for(a=M.length()-1;a>=0;a--)X=X>>8,X+=M.at(a)+J.at(a),J.setAt(a,X&255);N.putBuffer(J)}b=N,l.putBuffer(T)}return l.truncate(l.length()-i),l};$t.pbe.getCipher=function(t,e,r){switch(t){case $t.oids.pkcs5PBES2:return $t.pbe.getCipherForPBES2(t,e,r);case $t.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case $t.oids["pbewithSHAAnd40BitRC2-CBC"]:return $t.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};$t.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!de.validate(e,rst,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=de.derToOid(n.kdfOid),t!==$t.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=de.derToOid(n.encOid),t!==$t.oids["aes128-CBC"]&&t!==$t.oids["aes192-CBC"]&&t!==$t.oids["aes256-CBC"]&&t!==$t.oids["des-EDE3-CBC"]&&t!==$t.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=Ke.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch($t.oids[t]){case"aes128-CBC":c=16,u=Ke.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=Ke.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=Ke.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=Ke.des.createDecryptionCipher;break;case"desCBC":c=8,u=Ke.des.createDecryptionCipher;break}var l=zAe(n.prfOid),d=Ke.pkcs5.pbkdf2(r,s,a,c,l),p=n.encIv,f=u(d);return f.start(p),f};$t.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!de.validate(e,nst,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=Ke.util.createBuffer(n.salt),a=Ke.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,l;switch(t){case $t.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=Ke.des.startDecrypting;break;case $t.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(h,g){var v=Ke.rc2.createDecryptionCipher(h,40);return v.start(g,null),v};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var d=zAe(n.prfOid),p=$t.pbe.generatePkcs12Key(r,s,1,a,c,d);d.start();var f=$t.pbe.generatePkcs12Key(r,s,2,a,u,d);return l(p,f)};$t.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in Ke.md))throw new Error('"md5" hash algorithm unavailable.');n=Ke.md.md5.create()}e===null&&(e="");for(var i=[jAe(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(jAe(n,i[s-1]+t+e));return i.join("").substr(0,r)};function jAe(t,e){return t.start().update(e).digest().getBytes()}function zAe(t){var e;if(!t)e="hmacWithSHA1";else if(e=$t.oids[de.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return VAe(e)}function VAe(t){var e=Ke.md;switch(t){case"hmacWithSHA224":e=Ke.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function ist(t,e,r,n){var i=de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[de.create(de.Class.UNIVERSAL,de.Type.OCTETSTRING,!1,t),de.create(de.Class.UNIVERSAL,de.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(de.create(de.Class.UNIVERSAL,de.Type.INTEGER,!1,Ke.util.hexToBytes(r.toString(16))),de.create(de.Class.UNIVERSAL,de.Type.SEQUENCE,!0,[de.create(de.Class.UNIVERSAL,de.Type.OID,!1,de.oidToDer($t.oids[n]).getBytes()),de.create(de.Class.UNIVERSAL,de.Type.NULL,!1,"")])),i}});var cee=k((ILr,YAe)=>{var dT=Qt();Al();Lr();var Ve=dT.asn1,pT=YAe.exports=dT.pkcs7asn1=dT.pkcs7asn1||{};dT.pkcs7=dT.pkcs7||{};dT.pkcs7.asn1=pT;var WAe={name:"ContentInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};pT.contentInfoValidator=WAe;var KAe={name:"EncryptedContentInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};pT.envelopedDataValidator={name:"EnvelopedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(KAe)};pT.encryptedDataValidator={name:"EncryptedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"}].concat(KAe)};var ost={name:"SignerInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};pT.signedDataValidator={name:"SignedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},WAe,{name:"SignedData.Certificates",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,capture:"signerInfos",optional:!0,value:[ost]}]};pT.recipientInfoValidator={name:"RecipientInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var uee=k((wLr,QAe)=>{var Pb=Qt();Lr();Pb.mgf=Pb.mgf||{};var sst=QAe.exports=Pb.mgf.mgf1=Pb.mgf1=Pb.mgf1||{};sst.create=function(t){var e={generate:function(r,n){for(var i=new Pb.util.ByteBuffer,o=Math.ceil(n/t.digestLength),s=0;s<o;s++){var a=new Pb.util.ByteBuffer;a.putInt32(s),t.start(),t.update(r+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var JAe=k((RLr,XAe)=>{var kF=Qt();uee();XAe.exports=kF.mgf=kF.mgf||{};kF.mgf.mgf1=kF.mgf1});var DF=k((ALr,ZAe)=>{var kb=Qt();wu();Lr();var ast=ZAe.exports=kb.pss=kb.pss||{};ast.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=kb.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||kb.random,a={};return a.encode=function(c,u){var l,d=u-1,p=Math.ceil(d/8),f=c.digest().getBytes();if(p<n+o+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(o):m=i.bytes();var h=new kb.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(f),h.putBytes(m),e.start(),e.update(h.getBytes());var g=e.digest().getBytes(),v=new kb.util.ByteBuffer;v.fillWithByte(0,p-o-n-2),v.putByte(1),v.putBytes(m);var y=v.getBytes(),b=p-n-1,x=r.generate(g,b),S="";for(l=0;l<b;l++)S+=String.fromCharCode(y.charCodeAt(l)^x.charCodeAt(l));var T=65280>>8*p-d&255;return S=String.fromCharCode(S.charCodeAt(0)&~T)+S.substr(1),S+g+"\xBC"},a.verify=function(c,u,l){var d,p=l-1,f=Math.ceil(p/8);if(u=u.substr(-f),f<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=f-n-1,h=u.substr(0,m),g=u.substr(m,n),v=65280>>8*f-p&255;if(h.charCodeAt(0)&v)throw new Error("Bits beyond keysize not zero as expected.");var y=r.generate(g,m),b="";for(d=0;d<m;d++)b+=String.fromCharCode(h.charCodeAt(d)^y.charCodeAt(d));b=String.fromCharCode(b.charCodeAt(0)&~v)+b.substr(1);var x=f-n-o-2;for(d=0;d<x;d++)if(b.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(b.charCodeAt(x)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var S=b.substr(-o),T=new kb.util.ByteBuffer;T.fillWithByte(0,8),T.putBytes(c),T.putBytes(S),e.start(),e.update(T.getBytes());var L=e.digest().getBytes();return g===L},a}});var OF=k((PLr,iPe)=>{var yt=Qt();E0();Al();N2();lp();JAe();T0();Ib();DF();M2();Lr();var w=yt.asn1,Me=iPe.exports=yt.pki=yt.pki||{},Ir=Me.oids,Pi={};Pi.CN=Ir.commonName;Pi.commonName="CN";Pi.C=Ir.countryName;Pi.countryName="C";Pi.L=Ir.localityName;Pi.localityName="L";Pi.ST=Ir.stateOrProvinceName;Pi.stateOrProvinceName="ST";Pi.O=Ir.organizationName;Pi.organizationName="O";Pi.OU=Ir.organizationalUnitName;Pi.organizationalUnitName="OU";Pi.E=Ir.emailAddress;Pi.emailAddress="E";var tPe=yt.pki.rsa.publicKeyValidator,cst={name:"Certificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},tPe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},ust={name:"rsapss",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},lst={name:"CertificationRequestInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},tPe,{name:"CertificationRequestInfo.attributes",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:w.Class.UNIVERSAL,type:w.Type.SET,constructed:!0}]}]}]},dst={name:"CertificationRequest",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[lst,{name:"CertificationRequest.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Me.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,s=0;s<t.value.length;++s){n=t.value[s];for(var a=0;a<n.value.length;++a)o={},i=n.value[a],o.type=w.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in Ir&&(o.name=Ir[o.type],o.name in Pi&&(o.shortName=Pi[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Me.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=w.derToOid(n.value[0].value),o=n.value[1].value,s=0;s<o.length;++s){var a={};if(a.type=i,a.value=o[s].value,a.valueTagClass=o[s].type,a.type in Ir&&(a.name=Ir[a.type],a.name in Pi&&(a.shortName=Pi[a.name])),a.type===Ir.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(Me.certificateExtensionFromAsn1(a.value[c]))}e.push(a)}return e};function w0(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var NF=function(t,e,r){var n={};if(t!==Ir["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Ir.sha1},mgf:{algorithmOid:Ir.mgf1,hash:{algorithmOid:Ir.sha1}},saltLength:20});var i={},o=[];if(!w.validate(e,ust,i,o)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=o,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=w.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=w.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=w.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},LF=function(t){switch(Ir[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return yt.md.sha1.create();case"md5WithRSAEncryption":return yt.md.md5.create();case"sha256WithRSAEncryption":return yt.md.sha256.create();case"sha384WithRSAEncryption":return yt.md.sha384.create();case"sha512WithRSAEncryption":return yt.md.sha512.create();case"RSASSA-PSS":return yt.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},rPe=function(t){var e=t.certificate,r;switch(e.signatureOid){case Ir.sha1WithRSAEncryption:case Ir.sha1WithRSASignature:break;case Ir["RSASSA-PSS"]:var n,i;if(n=Ir[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||yt.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=Ir[e.signatureParameters.mgf.algorithmOid],i===void 0||yt.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=yt.mgf[i].create(yt.md[n].create()),n=Ir[e.signatureParameters.hash.algorithmOid],n===void 0||yt.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=yt.pss.create(yt.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Me.certificateFromPem=function(t,e,r){var n=yt.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=w.fromDer(n.body,r);return Me.certificateFromAsn1(o,e)};Me.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:w.toDer(Me.certificateToAsn1(t)).getBytes()};return yt.pem.encode(r,{maxline:e})};Me.publicKeyFromPem=function(t){var e=yt.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=w.fromDer(e.body);return Me.publicKeyFromAsn1(n)};Me.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:w.toDer(Me.publicKeyToAsn1(t)).getBytes()};return yt.pem.encode(r,{maxline:e})};Me.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:w.toDer(Me.publicKeyToRSAPublicKey(t)).getBytes()};return yt.pem.encode(r,{maxline:e})};Me.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||yt.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=w.toDer(Me.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=w.toDer(Me.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Me.certificationRequestFromPem=function(t,e,r){var n=yt.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=w.fromDer(n.body,r);return Me.certificationRequestFromAsn1(o,e)};Me.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:w.toDer(Me.certificationRequestToAsn1(t)).getBytes()};return yt.pem.encode(r,{maxline:e})};Me.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return w0(t.issuer,e)},t.issuer.addField=function(e){Pu([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return w0(t.subject,e)},t.subject.addField=function(e){Pu([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Pu(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Pu(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)nPe(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||yt.md.sha1.create();var n=Ir[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Me.getTBSCertificate(t);var o=w.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var s=e.md;if(s===null){s=LF({signatureOid:e.signatureOid,type:"certificate"});var a=e.tbsCertificate||Me.getTBSCertificate(e),c=w.toDer(a);s.update(c.getBytes())}return s!==null&&(r=rPe({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,s,a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],(o.type!==s.type||o.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Me.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Ir.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return yt.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Me.certificateFromAsn1=function(t,e){var r={},n=[];if(!w.validate(t,cst,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=w.derToOid(r.publicKeyOid);if(o!==Me.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Me.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=yt.util.createBuffer(r.certSerialNumber);s.serialNumber=a.toHex(),s.signatureOid=yt.asn1.derToOid(r.certSignatureOid),s.signatureParameters=NF(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=yt.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=NF(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(w.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(w.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(w.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(w.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=c[0],s.validity.notAfter=c[1],s.tbsCertificate=r.tbsCertificate,e){s.md=LF({signatureOid:s.signatureOid,type:"certificate"});var u=w.toDer(s.tbsCertificate);s.md.update(u.getBytes())}var l=yt.md.sha1.create(),d=w.toDer(r.certIssuer);l.update(d.getBytes()),s.issuer.getField=function(m){return w0(s.issuer,m)},s.issuer.addField=function(m){Pu([m]),s.issuer.attributes.push(m)},s.issuer.attributes=Me.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var p=yt.md.sha1.create(),f=w.toDer(r.certSubject);return p.update(f.getBytes()),s.subject.getField=function(m){return w0(s.subject,m)},s.subject.addField=function(m){Pu([m]),s.subject.attributes.push(m)},s.subject.attributes=Me.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=p.digest().toHex(),r.certExtensions?s.extensions=Me.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Me.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Me.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Me.certificateExtensionFromAsn1(n.value[i]));return e};Me.certificateExtensionFromAsn1=function(t){var e={};if(e.id=w.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===w.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Ir){if(e.name=Ir[e.id],e.name==="keyUsage"){var r=w.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=w.fromDer(e.value);r.value.length>0&&r.value[0].type===w.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===w.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=w.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=w.fromDer(e.value),s=0;s<r.value.length;++s){var a=w.derToOid(r.value[s].value);a in Ir?e[Ir[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=w.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=w.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var l={type:c.type,value:c.value};switch(e.altNames.push(l),c.type){case 1:case 2:case 6:break;case 7:l.ip=yt.util.bytesToIP(c.value);break;case 8:l.oid=w.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=w.fromDer(e.value);e.subjectKeyIdentifier=yt.util.bytesToHex(r.value)}}return e};Me.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!w.validate(t,dst,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=w.derToOid(r.publicKeyOid);if(o!==Me.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Me.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=yt.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=NF(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=yt.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=NF(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=LF({signatureOid:s.signatureOid,type:"certification request"});var a=w.toDer(s.certificationRequestInfo);s.md.update(a.getBytes())}var c=yt.md.sha1.create();return s.subject.getField=function(u){return w0(s.subject,u)},s.subject.addField=function(u){Pu([u]),s.subject.attributes.push(u)},s.subject.attributes=Me.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),s.subject.hash=c.digest().toHex(),s.publicKey=Me.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(u){return w0(s,u)},s.addAttribute=function(u){Pu([u]),s.attributes.push(u)},s.attributes=Me.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Me.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return w0(t.subject,e)},t.subject.addField=function(e){Pu([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return w0(t,e)},t.addAttribute=function(e){Pu([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Pu(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Pu(e),t.attributes=e},t.sign=function(e,r){t.md=r||yt.md.sha1.create();var n=Ir[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Me.getCertificationRequestInfo(t);var o=w.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=LF({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Me.getCertificationRequestInfo(t),i=w.toDer(n);r.update(i.getBytes())}return r!==null&&(e=rPe({certificate:t,md:r,signature:t.signature})),e},t};function fT(t){for(var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var s=r.value,a=w.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===w.Type.UTF8&&(s=yt.util.encodeUtf8(s))),n=w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(r.type).getBytes()),w.create(w.Class.UNIVERSAL,a,!1,s)])]),e.value.push(n)}return e}function Pu(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Me.oids?e.name=Me.oids[e.type]:e.shortName&&e.shortName in Pi&&(e.name=Me.oids[Pi[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Me.oids)e.type=Me.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in Pi&&(e.shortName=Pi[e.name]),e.type===Ir.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=w.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Me.certificateExtensionToAsn1(nPe(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function nPe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Me.oids&&(t.name=Me.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Me.oids)t.id=Me.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var s=String.fromCharCode(n);o!==0?s+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(s+=String.fromCharCode(i)),t.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var c in t)t[c]===!0&&(c in Ir?a.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(Ir[c]).getBytes())):c.indexOf(".")!==-1&&a.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);for(var u,l=0;l<t.altNames.length;++l){u=t.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=yt.util.bytesFromIP(u.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?s=w.oidToDer(w.oidToDer(u.oid)):s=w.oidToDer(s));t.value.value.push(w.create(w.Class.CONTEXT_SPECIFIC,u.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=w.create(w.Class.UNIVERSAL,w.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,d.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var p=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var f=[w.create(w.Class.CONTEXT_SPECIFIC,4,!0,[fT(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,f))}if(t.serialNumber){var m=yt.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(t.name==="cRLDistributionPoints"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);for(var a=t.value.value,h=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),g=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]),u,l=0;l<t.altNames.length;++l){u=t.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=yt.util.bytesFromIP(u.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?s=w.oidToDer(w.oidToDer(u.oid)):s=w.oidToDer(s));g.value.push(w.create(w.Class.CONTEXT_SPECIFIC,u.type,!1,s))}h.value.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[g])),a.push(h)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function lee(t,e){switch(t){case Ir["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.mgf.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.mgf.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.saltLength).getBytes())])),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,r);default:return w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")}}function pst(t){var e=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,s=w.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===w.Type.UTF8&&(o=yt.util.encodeUtf8(o));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var c=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(i.type).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,s,a,o)])]);e.value.push(c)}return e}var fst=new Date("1950-01-01T00:00:00Z"),mst=new Date("2050-01-01T00:00:00Z");function ePe(t){return t>=fst&&t<mst?w.create(w.Class.UNIVERSAL,w.Type.UTCTIME,!1,w.dateToUtcTime(t)):w.create(w.Class.UNIVERSAL,w.Type.GENERALIZEDTIME,!1,w.dateToGeneralizedTime(t))}Me.getTBSCertificate=function(t){var e=ePe(t.validity.notBefore),r=ePe(t.validity.notAfter),n=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.version).getBytes())]),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,yt.util.hexToBytes(t.serialNumber)),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.siginfo.algorithmOid).getBytes()),lee(t.siginfo.algorithmOid,t.siginfo.parameters)]),fT(t.issuer),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,r]),fT(t.subject),Me.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Me.certificateExtensionsToAsn1(t.extensions)),n};Me.getCertificationRequestInfo=function(t){var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.version).getBytes()),fT(t.subject),Me.publicKeyToAsn1(t.publicKey),pst(t)]);return e};Me.distinguishedNameToAsn1=function(t){return fT(t)};Me.certificateToAsn1=function(t){var e=t.tbsCertificate||Me.getTBSCertificate(t);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.signatureOid).getBytes()),lee(t.signatureOid,t.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+t.signature)])};Me.certificateExtensionsToAsn1=function(t){var e=w.create(w.Class.CONTEXT_SPECIFIC,3,!0,[]),r=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Me.certificateExtensionToAsn1(t[n]));return e};Me.certificateExtensionToAsn1=function(t){var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);e.value.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.id).getBytes())),t.critical&&e.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=w.toDer(r).getBytes()),e.value.push(w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,r)),e};Me.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Me.getCertificationRequestInfo(t);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.signatureOid).getBytes()),lee(t.signatureOid,t.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+t.signature)])};Me.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var a=r(s.issuer);return a},e.addCertificate=function(s){if(typeof s=="string"&&(s=yt.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var a=e.certs[s.subject.hash];yt.util.isArray(a)||(a=[a]),a.push(s),e.certs[s.subject.hash]=a}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=yt.pki.certificateFromPem(s));var a=r(s.subject);if(!a)return!1;yt.util.isArray(a)||(a=[a]);for(var c=w.toDer(Me.certificateToAsn1(s)).getBytes(),u=0;u<a.length;++u){var l=w.toDer(Me.certificateToAsn1(a[u])).getBytes();if(c===l)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var c=e.certs[a];if(!yt.util.isArray(c))s.push(c);else for(var u=0;u<c.length;++u)s.push(c[u])}return s},e.removeCertificate=function(s){var a;if(typeof s=="string"&&(s=yt.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var c=r(s.subject);if(!yt.util.isArray(c))return a=e.certs[s.subject.hash],delete e.certs[s.subject.hash],a;for(var u=w.toDer(Me.certificateToAsn1(s)).getBytes(),l=0;l<c.length;++l){var d=w.toDer(Me.certificateToAsn1(c[l])).getBytes();u===d&&(a=c[l],c.splice(l,1))}return c.length===0&&delete e.certs[s.subject.hash],a};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var a=yt.md.sha1.create();s.attributes=Me.RDNAttributesAsArray(fT(s),a),s.hash=a.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Me.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Me.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,s=null,a=0;do{var c=e.shift(),u=null,l=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Me.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),s===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(l=!0,u=c),u){var d=u;yt.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){u=d.shift();try{p=u.verify(c)}catch{}}p||(s={message:"Certificate signature is invalid.",error:Me.certificateError.bad_certificate})}s===null&&(!u||l)&&!t.hasCertificate(c)&&(s={message:"Certificate is not trusted.",error:Me.certificateError.unknown_ca})}if(s===null&&u&&!c.isIssuer(u)&&(s={message:"Certificate issuer is invalid.",error:Me.certificateError.bad_certificate}),s===null)for(var f={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<c.extensions.length;++m){var h=c.extensions[m];h.critical&&!(h.name in f)&&(s={message:"Certificate has an unsupported critical extension.",error:Me.certificateError.unsupported_certificate})}if(s===null&&(!o||e.length===0&&(!u||l))){var g=c.getExtension("basicConstraints"),v=c.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||g===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Me.certificateError.bad_certificate}),s===null&&g!==null&&!g.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Me.certificateError.bad_certificate}),s===null&&v!==null&&"pathLenConstraint"in g){var y=a-1;y>g.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Me.certificateError.bad_certificate})}}var b=s===null?!0:s.error,x=r.verify?r.verify(b,a,n):b;if(x===!0)s=null;else throw b===!0&&(s={message:"The application rejected the certificate.",error:Me.certificateError.bad_certificate}),(x||x===0)&&(typeof x=="object"&&!yt.util.isArray(x)?(x.message&&(s.message=x.message),x.error&&(s.error=x.error)):typeof x=="string"&&(s.error=x)),s;o=!1,++a}while(e.length>0);return!0}});var pee=k((kLr,sPe)=>{var Rn=Qt();Al();sT();T0();cee();aee();wu();M2();lT();Lr();OF();var B=Rn.asn1,sr=Rn.pki,U2=sPe.exports=Rn.pkcs12=Rn.pkcs12||{},oPe={name:"ContentInfo",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},hst={name:"PFX",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,capture:"version"},oPe,{name:"PFX.macData",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:B.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},gst={name:"SafeBag",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:B.Class.UNIVERSAL,type:B.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},vst={name:"Attribute",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:B.Class.UNIVERSAL,type:B.Type.SET,constructed:!0,capture:"values"}]},yst={name:"CertBag",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:B.Class.UNIVERSAL,type:B.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function F2(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var s=0;s<t[o].safeBags.length;s++){var a=t[o].safeBags[s];if(!(n!==void 0&&a.type!==n)){if(e===null){i.push(a);continue}a.attributes[e]!==void 0&&a.attributes[e].indexOf(r)>=0&&i.push(a)}}return i}U2.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!B.validate(t,hst,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(g){var v={},y;return"localKeyId"in g?y=g.localKeyId:"localKeyIdHex"in g&&(y=Rn.util.hexToBytes(g.localKeyIdHex)),y===void 0&&!("friendlyName"in g)&&"bagType"in g&&(v[g.bagType]=F2(s.safeContents,null,null,g.bagType)),y!==void 0&&(v.localKeyId=F2(s.safeContents,"localKeyId",y,g.bagType)),"friendlyName"in g&&(v.friendlyName=F2(s.safeContents,"friendlyName",g.friendlyName,g.bagType)),v},getBagsByFriendlyName:function(g,v){return F2(s.safeContents,"friendlyName",g,v)},getBagsByLocalKeyId:function(g,v){return F2(s.safeContents,"localKeyId",g,v)}};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(B.derToOid(n.contentType)!==sr.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=B.derToOid(n.contentType),o}var a=n.content.value[0];if(a.tagClass!==B.Class.UNIVERSAL||a.type!==B.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=dee(a),n.mac){var c=null,u=0,l=B.derToOid(n.macAlgorithm);switch(l){case sr.oids.sha1:c=Rn.md.sha1.create(),u=20;break;case sr.oids.sha256:c=Rn.md.sha256.create(),u=32;break;case sr.oids.sha384:c=Rn.md.sha384.create(),u=48;break;case sr.oids.sha512:c=Rn.md.sha512.create(),u=64;break;case sr.oids.md5:c=Rn.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+l);var d=new Rn.util.ByteBuffer(n.macSalt),p="macIterations"in n?parseInt(Rn.util.bytesToHex(n.macIterations),16):1,f=U2.generateKey(r,d,3,p,u,c),m=Rn.hmac.create();m.start(c,f),m.update(a.value);var h=m.getMac();if(h.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return bst(s,a.value,e,r),s};function dee(t){if(t.composed||t.constructed){for(var e=Rn.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function bst(t,e,r,n){if(e=B.fromDer(e,r),e.tagClass!==B.Class.UNIVERSAL||e.type!==B.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],s={},a=[];if(!B.validate(o,oPe,s,a)){var c=new Error("Cannot read ContentInfo.");throw c.errors=a,c}var u={encrypted:!1},l=null,d=s.content.value[0];switch(B.derToOid(s.contentType)){case sr.oids.data:if(d.tagClass!==B.Class.UNIVERSAL||d.type!==B.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=dee(d).value;break;case sr.oids.encryptedData:l=_st(d,n),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=B.derToOid(s.contentType),c}u.safeBags=xst(l,r,n),t.safeContents.push(u)}}function _st(t,e){var r={},n=[];if(!B.validate(t,Rn.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=B.derToOid(r.contentType);if(o!==sr.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=B.derToOid(r.encAlgorithm);var s=sr.pbe.getCipher(o,r.encParameter,e),a=dee(r.encryptedContentAsn1),c=Rn.util.createBuffer(a.value);if(s.update(c),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function xst(t,e,r){if(!e&&t.length===0)return[];if(t=B.fromDer(t,e),t.tagClass!==B.Class.UNIVERSAL||t.type!==B.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],s={},a=[];if(!B.validate(o,gst,s,a)){var c=new Error("Cannot read SafeBag.");throw c.errors=a,c}var u={type:B.derToOid(s.bagId),attributes:Sst(s.bagAttributes)};n.push(u);var l,d,p=s.bagValue.value[0];switch(u.type){case sr.oids.pkcs8ShroudedKeyBag:if(p=sr.decryptPrivateKeyInfo(p,r),p===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case sr.oids.keyBag:try{u.key=sr.privateKeyFromAsn1(p)}catch{u.key=null,u.asn1=p}continue;case sr.oids.certBag:l=yst,d=function(){if(B.derToOid(s.certId)!==sr.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=B.derToOid(s.certId),m}var h=B.fromDer(s.cert,e);try{u.cert=sr.certificateFromAsn1(h,!0)}catch{u.cert=null,u.asn1=h}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(l!==void 0&&!B.validate(p,l,s,a)){var c=new Error("Cannot read PKCS#12 "+l.name);throw c.errors=a,c}d()}return n}function Sst(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!B.validate(t[r],vst,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var s=B.derToOid(n.oid);if(sr.oids[s]!==void 0){e[sr.oids[s]]=[];for(var a=0;a<n.values.length;++a)e[sr.oids[s]].push(n.values[a].value)}}return e}U2.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=Rn.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=Rn.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=sr.certificateFromPem(s));var a=Rn.md.sha1.create();a.update(B.toDer(sr.certificateToAsn1(s)).getBytes()),i=a.digest().getBytes()}else i=Rn.random.getBytes(20);var c=[];i!==null&&c.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.localKeyId).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.friendlyName).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[B.create(B.Class.UNIVERSAL,B.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(o=B.create(B.Class.UNIVERSAL,B.Type.SET,!0,c));var u=[],l=[];e!==null&&(Rn.util.isArray(e)?l=e:l=[e]);for(var d=[],p=0;p<l.length;++p){e=l[p],typeof e=="string"&&(e=sr.certificateFromPem(e));var f=p===0?o:void 0,m=sr.certificateToAsn1(e),h=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.certBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.x509Certificate).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(m).getBytes())])])]),f]);d.push(h)}if(d.length>0){var g=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,d),v=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(g).getBytes())])]);u.push(v)}var y=null;if(t!==null){var b=sr.wrapRsaPrivateKey(sr.privateKeyToAsn1(t));r===null?y=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.keyBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[b]),o]):y=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.pkcs8ShroudedKeyBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[sr.encryptPrivateKeyInfo(b,r,n)]),o]);var x=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[y]),S=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(x).getBytes())])]);u.push(S)}var T=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,u),L;if(n.useMac){var a=Rn.md.sha1.create(),M=new Rn.util.ByteBuffer(Rn.random.getBytes(n.saltSize)),j=n.count,t=U2.generateKey(r,M,3,j,20),N=Rn.hmac.create();N.start(a,t),N.update(B.toDer(T).getBytes());var J=N.getMac();L=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.sha1).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,J.getBytes())]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,M.getBytes()),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(j).getBytes())])}return B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(3).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(sr.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(T).getBytes())])]),L])};U2.generateKey=Rn.pbe.generatePkcs12Key});var mee=k((DLr,aPe)=>{var R0=Qt();Al();T0();aee();Ib();CF();pee();DF();M2();Lr();OF();var fee=R0.asn1,mT=aPe.exports=R0.pki=R0.pki||{};mT.pemToDer=function(t){var e=R0.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return R0.util.createBuffer(e.body)};mT.privateKeyFromPem=function(t){var e=R0.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=fee.fromDer(e.body);return mT.privateKeyFromAsn1(n)};mT.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:fee.toDer(mT.privateKeyToAsn1(t)).getBytes()};return R0.pem.encode(r,{maxline:e})};mT.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:fee.toDer(t).getBytes()};return R0.pem.encode(r,{maxline:e})}});var _ee=k((NLr,hPe)=>{var ye=Qt();Al();sT();xF();Ib();mee();wu();lT();Lr();var BF=function(t,e,r,n){var i=ye.util.createBuffer(),o=t.length>>1,s=o+(t.length&1),a=t.substr(0,s),c=t.substr(o,s),u=ye.util.createBuffer(),l=ye.hmac.create();r=e+r;var d=Math.ceil(n/16),p=Math.ceil(n/20);l.start("MD5",a);var f=ye.util.createBuffer();u.putBytes(r);for(var m=0;m<d;++m)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+r),f.putBuffer(l.digest());l.start("SHA1",c);var h=ye.util.createBuffer();u.clear(),u.putBytes(r);for(var m=0;m<p;++m)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+r),h.putBuffer(l.digest());return i.putBytes(ye.util.xorBytes(f.getBytes(),h.getBytes(),n)),i},Est=function(t,e,r){var n=ye.hmac.create();n.start("SHA1",t);var i=ye.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},Tst=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=ye.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},Cst=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=ye.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},Ic=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return ye.util.createBuffer(t.getBytes(r))},ku=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},P={};P.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};P.SupportedVersions=[P.Versions.TLS_1_1,P.Versions.TLS_1_0];P.Version=P.SupportedVersions[0];P.MaxFragment=15360;P.ConnectionEnd={server:0,client:1};P.PRFAlgorithm={tls_prf_sha256:0};P.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};P.CipherType={stream:0,block:1,aead:2};P.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};P.CompressionMethod={none:0,deflate:1};P.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};P.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};P.Alert={};P.Alert.Level={warning:1,fatal:2};P.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};P.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};P.CipherSuites={};P.getCipherSuite=function(t){var e=null;for(var r in P.CipherSuites){var n=P.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};P.handleUnexpected=function(t,e){var r=!t.open&&t.entity===P.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.unexpected_message}})};P.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(P.queue(t,P.createAlert(t,{level:P.Alert.Level.warning,description:P.Alert.Description.no_renegotiation})),P.flush(t)),t.process()};P.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===P.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.illegal_parameter}});else{var o=e.fragment,s=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:ye.util.createBuffer(o.getBytes(32)),session_id:Ic(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=Ic(o,2),n.compression_methods=Ic(o,1)),s=r-(s-o.length()),s>0){for(var a=Ic(o,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:Ic(a,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var u=n.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var l=Ic(u.data,2);l.length()>0;){var d=l.getByte();if(d!==0)break;t.session.extensions.server_name.serverNameList.push(Ic(l,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=P.getCipherSuite(n.cipher_suite);else for(var p=ye.util.createBuffer(n.cipher_suites.bytes());p.length()>0&&(t.session.cipherSuite=P.getCipherSuite(p.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.handshake_failure},cipherSuite:ye.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=P.CompressionMethod.none}return n};P.createSecurityParameters=function(t,e){var r=t.entity===P.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:P.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:P.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};P.handleServerHello=function(t,e,r){var n=P.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=lPe,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=wst,t.session.resuming=!1,P.createSecurityParameters(t,n)),t.session.id=i,t.process()}};P.handleClientHello=function(t,e,r){var n=P.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=ye.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var s,a=1;a<P.SupportedVersions.length&&(s=P.SupportedVersions[a],!(s.minor<=n.version.minor));++a);t.version={major:s.major,minor:s.minor},t.session.version=t.version}o!==null?(t.expect=yee,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?Lst:vee,t.session.resuming=!1,P.createSecurityParameters(t,n)),t.open=!0,P.queue(t,P.createRecord(t,{type:P.ContentType.handshake,data:P.createServerHello(t)})),t.session.resuming?(P.queue(t,P.createRecord(t,{type:P.ContentType.change_cipher_spec,data:P.createChangeCipherSpec()})),t.state.pending=P.createConnectionState(t),t.state.current.write=t.state.pending.write,P.queue(t,P.createRecord(t,{type:P.ContentType.handshake,data:P.createFinished(t)}))):(P.queue(t,P.createRecord(t,{type:P.ContentType.handshake,data:P.createCertificate(t)})),t.fail||(P.queue(t,P.createRecord(t,{type:P.ContentType.handshake,data:P.createServerKeyExchange(t)})),t.verifyClient!==!1&&P.queue(t,P.createRecord(t,{type:P.ContentType.handshake,data:P.createCertificateRequest(t)})),P.queue(t,P.createRecord(t,{type:P.ContentType.handshake,data:P.createServerHelloDone(t)})))),P.flush(t),t.process()}};P.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Ic(n,3)},o,s,a=[];try{for(;i.certificate_list.length()>0;)o=Ic(i.certificate_list,3),s=ye.asn1.fromDer(o),o=ye.pki.certificateFromAsn1(s,!0),a.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.bad_certificate}})}var c=t.entity===P.ConnectionEnd.client;(c||t.verifyClient===!0)&&a.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.illegal_parameter}}):a.length===0?t.expect=c?cPe:vee:(c?t.session.serverCertificate=a[0]:t.session.clientCertificate=a[0],P.verifyCertificateChain(t,a)&&(t.expect=c?cPe:vee)),t.process()};P.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.unsupported_certificate}});t.expect=Rst,t.process()};P.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Ic(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=ye.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var a=t.session.clientHelloVersion;if(a.major!==s.pre_master_secret.charCodeAt(0)||a.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=ye.random.getBytes(48)}t.expect=yee,t.session.clientCertificate!==null&&(t.expect=Ost),t.process()};P.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Ic(n,1),certificate_authorities:Ic(n,2)};t.session.certificateRequest=i,t.expect=Ast,t.process()};P.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:Ic(n,2).getBytes()},s=ye.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var a=t.session.clientCertificate;if(!a.publicKey.verify(s,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.handshake_failure}})}t.expect=yee,t.process()};P.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!ye.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=P.createRecord(t,{type:P.ContentType.handshake,data:P.createCertificate(t)}),P.queue(t,e)),e=P.createRecord(t,{type:P.ContentType.handshake,data:P.createClientKeyExchange(t)}),P.queue(t,e),t.expect=Dst;var s=function(a,c){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&P.queue(a,P.createRecord(a,{type:P.ContentType.handshake,data:P.createCertificateVerify(a,c)})),P.queue(a,P.createRecord(a,{type:P.ContentType.change_cipher_spec,data:P.createChangeCipherSpec()})),a.state.pending=P.createConnectionState(a),a.state.current.write=a.state.pending.write,P.queue(a,P.createRecord(a,{type:P.ContentType.handshake,data:P.createFinished(a)})),a.expect=lPe,P.flush(a),a.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);P.getClientSignature(t,s)};P.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.illegal_parameter}});var r=t.entity===P.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=P.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?Pst:Mst,t.process()};P.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=ye.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===P.ConnectionEnd.client,a=s?"server finished":"client finished",c=t.session.sp,u=12,l=BF;if(n=l(c.master_secret,a,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(P.queue(t,P.createRecord(t,{type:P.ContentType.change_cipher_spec,data:P.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,P.queue(t,P.createRecord(t,{type:P.ContentType.handshake,data:P.createFinished(t)}))),t.expect=s?kst:Fst,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,P.flush(t),t.isConnected=!0,t.connected(t),t.process()};P.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case P.Alert.Description.close_notify:i="Connection closed.";break;case P.Alert.Description.unexpected_message:i="Unexpected message.";break;case P.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case P.Alert.Description.decryption_failed:i="Decryption failed.";break;case P.Alert.Description.record_overflow:i="Record overflow.";break;case P.Alert.Description.decompression_failure:i="Decompression failed.";break;case P.Alert.Description.handshake_failure:i="Handshake failure.";break;case P.Alert.Description.bad_certificate:i="Bad certificate.";break;case P.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case P.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case P.Alert.Description.certificate_expired:i="Certificate expired.";break;case P.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case P.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case P.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case P.Alert.Description.access_denied:i="Access denied.";break;case P.Alert.Description.decode_error:i="Decode error.";break;case P.Alert.Description.decrypt_error:i="Decrypt error.";break;case P.Alert.Description.export_restriction:i="Export restriction.";break;case P.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case P.Alert.Description.insufficient_security:i="Insufficient security.";break;case P.Alert.Description.internal_error:i="Internal error.";break;case P.Alert.Description.user_canceled:i="User canceled.";break;case P.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===P.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===P.ConnectionEnd.client?"server":"client",alert:n}),t.process()};P.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=ye.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in UF[t.entity][t.expect]?(t.entity===P.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ye.md.md5.create(),sha1:ye.md.sha1.create()}),n!==P.HandshakeType.hello_request&&n!==P.HandshakeType.certificate_verify&&n!==P.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),UF[t.entity][t.expect][n](t,e,i)):P.handleUnexpected(t,e)};P.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};P.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===P.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();P.queue(t,P.createRecord(t,{type:P.ContentType.heartbeat,data:P.createHeartbeat(P.HeartbeatMessageType.heartbeat_response,o)})),P.flush(t)}else if(n===P.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,ye.util.createBuffer(o))}t.process()};var Ist=0,wst=1,cPe=2,Rst=3,Ast=4,lPe=5,Pst=6,kst=7,Dst=8,Nst=0,Lst=1,vee=2,Ost=3,yee=4,Mst=5,Fst=6,R=P.handleUnexpected,dPe=P.handleChangeCipherSpec,ms=P.handleAlert,ga=P.handleHandshake,pPe=P.handleApplicationData,hs=P.handleHeartbeat,bee=[];bee[P.ConnectionEnd.client]=[[R,ms,ga,R,hs],[R,ms,ga,R,hs],[R,ms,ga,R,hs],[R,ms,ga,R,hs],[R,ms,ga,R,hs],[dPe,ms,R,R,hs],[R,ms,ga,R,hs],[R,ms,ga,pPe,hs],[R,ms,ga,R,hs]];bee[P.ConnectionEnd.server]=[[R,ms,ga,R,hs],[R,ms,ga,R,hs],[R,ms,ga,R,hs],[R,ms,ga,R,hs],[dPe,ms,R,R,hs],[R,ms,ga,R,hs],[R,ms,ga,pPe,hs],[R,ms,ga,R,hs]];var A0=P.handleHelloRequest,Ust=P.handleServerHello,fPe=P.handleCertificate,uPe=P.handleServerKeyExchange,hee=P.handleCertificateRequest,MF=P.handleServerHelloDone,mPe=P.handleFinished,UF=[];UF[P.ConnectionEnd.client]=[[R,R,Ust,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[A0,R,R,R,R,R,R,R,R,R,R,fPe,uPe,hee,MF,R,R,R,R,R,R],[A0,R,R,R,R,R,R,R,R,R,R,R,uPe,hee,MF,R,R,R,R,R,R],[A0,R,R,R,R,R,R,R,R,R,R,R,R,hee,MF,R,R,R,R,R,R],[A0,R,R,R,R,R,R,R,R,R,R,R,R,R,MF,R,R,R,R,R,R],[A0,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[A0,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,mPe],[A0,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[A0,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];var Bst=P.handleClientHello,qst=P.handleClientKeyExchange,Hst=P.handleCertificateVerify;UF[P.ConnectionEnd.server]=[[R,Bst,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,fPe,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,qst,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Hst,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,mPe],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];P.generateKeys=function(t,e){var r=BF,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===P.Versions.TLS_1_0.major&&t.version.minor===P.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),a={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return o&&(a.client_write_IV=s.getBytes(e.fixed_iv_length),a.server_write_IV=s.getBytes(e.fixed_iv_length)),a};P.createConnectionState=function(t){var e=t.entity===P.ConnectionEnd.client,r=function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]}};return o},n={read:r(),write:r()};if(n.read.update=function(o,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(o,s,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,s){return n.write.compressFunction(o,s,n.write)?n.write.cipherFunction(s,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=P.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case P.CompressionMethod.none:break;case P.CompressionMethod.deflate:n.read.compressFunction=Cst,n.write.compressFunction=Tst;break;default:throw new Error("Unsupported compression algorithm.")}}return n};P.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=ye.util.createBuffer();return r.putInt32(e),r.putBytes(ye.random.getBytes(28)),r};P.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};P.createAlert=function(t,e){var r=ye.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),P.createRecord(t,{type:P.ContentType.alert,data:r})};P.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=ye.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=ye.util.createBuffer();o.putByte(P.CompressionMethod.none);var s=o.length(),a=ye.util.createBuffer();if(t.virtualHost){var c=ye.util.createBuffer();c.putByte(0),c.putByte(0);var u=ye.util.createBuffer();u.putByte(0),ku(u,2,ye.util.createBuffer(t.virtualHost));var l=ye.util.createBuffer();ku(l,2,u),ku(c,2,l),a.putBuffer(c)}var d=a.length();d>0&&(d+=2);var p=t.session.id,f=p.length+1+2+4+28+2+i+1+s+d,m=ye.util.createBuffer();return m.putByte(P.HandshakeType.client_hello),m.putInt24(f),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),ku(m,1,ye.util.createBuffer(p)),ku(m,2,e),ku(m,1,o),d>0&&ku(m,2,a),m};P.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=ye.util.createBuffer();return n.putByte(P.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),ku(n,1,ye.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};P.createCertificate=function(t){var e=t.entity===P.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=ye.util.createBuffer();if(r!==null)try{ye.util.isArray(r)||(r=[r]);for(var o=null,s=0;s<r.length;++s){var a=ye.pem.decode(r[s])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=a.type,c}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=ye.util.createBuffer(a.body);o===null&&(o=ye.asn1.fromDer(u.bytes(),!1));var l=ye.util.createBuffer();ku(l,3,u),i.putBuffer(l)}r=ye.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(f){return t.error(t,{message:"Could not send certificate list.",cause:f,send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.bad_certificate}})}var d=3+i.length(),p=ye.util.createBuffer();return p.putByte(P.HandshakeType.certificate),p.putInt24(d),ku(p,3,i),p};P.createClientKeyExchange=function(t){var e=ye.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(ye.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=ye.util.createBuffer();return o.putByte(P.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};P.createServerKeyExchange=function(t){var e=0,r=ye.util.createBuffer();return e>0&&(r.putByte(P.HandshakeType.server_key_exchange),r.putInt24(e)),r};P.getClientSignature=function(t,e){var r=ye.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=ye.pki.privateKeyFromPem(s)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.internal_error}}):i=s.sign(i,null),o(n,i)},t.getSignature(t,r,e)};P.createCertificateVerify=function(t,e){var r=e.length+2,n=ye.util.createBuffer();return n.putByte(P.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};P.createCertificateRequest=function(t){var e=ye.util.createBuffer();e.putByte(1);var r=ye.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=ye.pki.distinguishedNameToAsn1(i.subject),s=ye.asn1.toDer(o);r.putInt16(s.length()),r.putBuffer(s)}var a=1+e.length()+2+r.length(),c=ye.util.createBuffer();return c.putByte(P.HandshakeType.certificate_request),c.putInt24(a),ku(c,1,e),ku(c,2,r),c};P.createServerHelloDone=function(t){var e=ye.util.createBuffer();return e.putByte(P.HandshakeType.server_hello_done),e.putInt24(0),e};P.createChangeCipherSpec=function(){var t=ye.util.createBuffer();return t.putByte(1),t};P.createFinished=function(t){var e=ye.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===P.ConnectionEnd.client,n=t.session.sp,i=12,o=BF,s=r?"client finished":"server finished";e=o(n.master_secret,s,e.getBytes(),i);var a=ye.util.createBuffer();return a.putByte(P.HandshakeType.finished),a.putInt24(e.length()),a.putBuffer(e),a};P.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=ye.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(ye.random.getBytes(o)),n};P.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===P.ContentType.handshake||e.type===P.ContentType.alert||e.type===P.ContentType.change_cipher_spec))){if(e.type===P.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=P.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>P.MaxFragment;)n.push(P.createRecord(t,{type:e.type,data:ye.util.createBuffer(i.slice(0,P.MaxFragment))})),i=i.slice(P.MaxFragment);i.length>0&&n.push(P.createRecord(t,{type:e.type,data:ye.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var s=n[o],a=t.state.current.write;a.update(t,s)&&t.records.push(s)}}};P.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var gee=function(t){switch(t){case!0:return!0;case ye.pki.certificateError.bad_certificate:return P.Alert.Description.bad_certificate;case ye.pki.certificateError.unsupported_certificate:return P.Alert.Description.unsupported_certificate;case ye.pki.certificateError.certificate_revoked:return P.Alert.Description.certificate_revoked;case ye.pki.certificateError.certificate_expired:return P.Alert.Description.certificate_expired;case ye.pki.certificateError.certificate_unknown:return P.Alert.Description.certificate_unknown;case ye.pki.certificateError.unknown_ca:return P.Alert.Description.unknown_ca;default:return P.Alert.Description.bad_certificate}},Gst=function(t){switch(t){case!0:return!0;case P.Alert.Description.bad_certificate:return ye.pki.certificateError.bad_certificate;case P.Alert.Description.unsupported_certificate:return ye.pki.certificateError.unsupported_certificate;case P.Alert.Description.certificate_revoked:return ye.pki.certificateError.certificate_revoked;case P.Alert.Description.certificate_expired:return ye.pki.certificateError.certificate_expired;case P.Alert.Description.certificate_unknown:return ye.pki.certificateError.certificate_unknown;case P.Alert.Description.unknown_ca:return ye.pki.certificateError.unknown_ca;default:return ye.pki.certificateError.bad_certificate}};P.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,s,a){var c=gee(o),u=t.verify(t,o,s,a);if(u!==!0){if(typeof u=="object"&&!ye.util.isArray(u)){var l=new Error("The application rejected the certificate.");throw l.send=!0,l.alert={level:P.Alert.Level.fatal,description:P.Alert.Description.bad_certificate},u.message&&(l.message=u.message),u.alert&&(l.alert.description=u.alert),l}u!==o&&(u=Gst(u))}return u},ye.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||ye.util.isArray(i))&&(i={send:!0,alert:{level:P.Alert.Level.fatal,description:gee(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:P.Alert.Level.fatal,description:gee(i.error)}),t.error(t,i)}return!t.fail};P.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,s=null;if(i?s=ye.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){o=r.cache[s],delete r.cache[s];for(var a in r.order)if(r.order[a]===s){r.order.splice(a,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=ye.util.bytesToHex(i);r.order.push(s),r.cache[s]=o}}return r};P.createConnection=function(t){var e=null;t.caStore?ye.util.isArray(t.caStore)?e=ye.pki.createCaStore(t.caStore):e=t.caStore:e=ye.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in P.CipherSuites)r.push(P.CipherSuites[n])}var i=t.server?P.ConnectionEnd.server:P.ConnectionEnd.client,o=t.sessionCache?P.createSessionCache(t.sessionCache):null,s={version:{major:P.Version.major,minor:P.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(l,d,p,f){return d},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:ye.util.createBuffer(),tlsData:ye.util.createBuffer(),data:ye.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(l,d){d.origin=d.origin||(l.entity===P.ConnectionEnd.client?"client":"server"),d.send&&(P.queue(l,P.createAlert(l,d.alert)),P.flush(l));var p=d.fatal!==!1;p&&(l.fail=!0),t.error(l,d),p&&l.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(l){s.version={major:P.Version.major,minor:P.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===P.ConnectionEnd.client?Ist:Nst,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(l||typeof l>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=P.createConnectionState(s)},s.reset();var a=function(l,d){var p=d.type-P.ContentType.change_cipher_spec,f=bee[l.entity][l.expect];p in f?f[p](l,d):P.handleUnexpected(l,d)},c=function(l){var d=0,p=l.input,f=p.length();if(f<5)d=5-f;else{l.record={type:p.getByte(),version:{major:p.getByte(),minor:p.getByte()},length:p.getInt16(),fragment:ye.util.createBuffer(),ready:!1};var m=l.record.version.major===l.version.major;m&&l.session&&l.session.version&&(m=l.record.version.minor===l.version.minor),m||l.error(l,{message:"Incompatible TLS version.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.protocol_version}})}return d},u=function(l){var d=0,p=l.input,f=p.length();if(f<l.record.length)d=l.record.length-f;else{l.record.fragment.putBytes(p.getBytes(l.record.length)),p.compact();var m=l.state.current.read;m.update(l,l.record)&&(l.fragmented!==null&&(l.fragmented.type===l.record.type?(l.fragmented.fragment.putBuffer(l.record.fragment),l.record=l.fragmented):l.error(l,{message:"Invalid fragmented record.",send:!0,alert:{level:P.Alert.Level.fatal,description:P.Alert.Description.unexpected_message}})),l.record.ready=!0)}return d};return s.handshake=function(l){if(s.entity!==P.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,l=l||"";var d=null;l.length>0&&(s.sessionCache&&(d=s.sessionCache.getSession(l)),d===null&&(l="")),l.length===0&&s.sessionCache&&(d=s.sessionCache.getSession(),d!==null&&(l=d.id)),s.session={id:l,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ye.md.md5.create(),sha1:ye.md.sha1.create()},d&&(s.version=d.version,s.session.sp=d.sp),s.session.sp.client_random=P.createRandom().getBytes(),s.open=!0,P.queue(s,P.createRecord(s,{type:P.ContentType.handshake,data:P.createClientHello(s)})),P.flush(s)}},s.process=function(l){var d=0;return l&&s.input.putBytes(l),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(d=c(s)),!s.fail&&s.record!==null&&!s.record.ready&&(d=u(s)),!s.fail&&s.record!==null&&s.record.ready&&a(s,s.record)),d},s.prepare=function(l){return P.queue(s,P.createRecord(s,{type:P.ContentType.application_data,data:ye.util.createBuffer(l)})),P.flush(s)},s.prepareHeartbeatRequest=function(l,d){return l instanceof ye.util.ByteBuffer&&(l=l.bytes()),typeof d>"u"&&(d=l.length),s.expectedHeartbeatPayload=l,P.queue(s,P.createRecord(s,{type:P.ContentType.heartbeat,data:P.createHeartbeat(P.HeartbeatMessageType.heartbeat_request,l,d)})),P.flush(s)},s.close=function(l){if(!s.fail&&s.sessionCache&&s.session){var d={id:s.session.id,version:s.session.version,sp:s.session.sp};d.sp.keys=null,s.sessionCache.setSession(d.id,d)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,P.queue(s,P.createAlert(s,{level:P.Alert.Level.warning,description:P.Alert.Description.close_notify})),P.flush(s)),s.closed(s)),s.reset(l)},s};hPe.exports=ye.tls=ye.tls||{};for(FF in P)typeof P[FF]!="function"&&(ye.tls[FF]=P[FF]);var FF;ye.tls.prf_tls1=BF;ye.tls.hmac_sha1=Est;ye.tls.createSessionCache=P.createSessionCache;ye.tls.createConnection=P.createConnection});var yPe=k((LLr,vPe)=>{var P0=Qt();E0();_ee();var Du=vPe.exports=P0.tls;Du.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=Du.BulkCipherAlgorithm.aes,t.cipher_type=Du.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Du.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:gPe};Du.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=Du.BulkCipherAlgorithm.aes,t.cipher_type=Du.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Du.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:gPe};function gPe(t,e,r){var n=e.entity===P0.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:P0.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:P0.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=$st,t.write.cipherFunction=jst,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Du.hmac_sha1}function jst(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Du.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=P0.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Du.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(zst)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}function zst(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function Vst(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),s=i-1-o;s<i-1;++s)n=n&&e.at(s)==o;n&&e.truncate(o+1)}return n}function $st(t,e){var r=!1,n;t.version.minor===Du.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Vst);var o=e.macLength,s=P0.random.getBytesSync(o),a=i.output.length();a>=o?(t.fragment=i.output.getBytes(a-o),s=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=P0.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Wst(e.macKey,s,c)&&r,r}function Wst(t,e,r){var n=P0.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var Eee=k((OLr,SPe)=>{var Hn=Qt();lp();Lr();var B2=SPe.exports=Hn.sha512=Hn.sha512||{};Hn.md.sha512=Hn.md.algorithms.sha512=B2;var _Pe=Hn.sha384=Hn.sha512.sha384=Hn.sha512.sha384||{};_Pe.create=function(){return B2.create("SHA-384")};Hn.md.sha384=Hn.md.algorithms.sha384=_Pe;Hn.sha512.sha256=Hn.sha512.sha256||{create:function(){return B2.create("SHA-512/256")}};Hn.md["sha512/256"]=Hn.md.algorithms["sha512/256"]=Hn.sha512.sha256;Hn.sha512.sha224=Hn.sha512.sha224||{create:function(){return B2.create("SHA-512/224")}};Hn.md["sha512/224"]=Hn.md.algorithms["sha512/224"]=Hn.sha512.sha224;B2.create=function(t){if(xPe||Kst(),typeof t>"u"&&(t="SHA-512"),!(t in Db))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Db[t],r=null,n=Hn.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=Hn.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=Hn.util.encodeUtf8(c));var l=c.length;a.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=l[1],l[1]=l[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,l[0]=l[1]/4294967296>>>0;return n.putBytes(c),bPe(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=Hn.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,l=u&a.blockLength-1;c.putBytes(xee.substr(0,a.blockLength-l));for(var d,p,f=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)d=a.fullMessageLength[m+1]*8,p=d/4294967296>>>0,f+=p,c.putInt32(f>>>0),f=d>>>0;c.putInt32(f);for(var h=new Array(r.length),m=0;m<r.length;++m)h[m]=r[m].slice(0);bPe(h,i,c);var g=Hn.util.createBuffer(),v;t==="SHA-512"?v=h.length:t==="SHA-384"?v=h.length-2:v=h.length-4;for(var m=0;m<v;++m)g.putInt32(h[m][0]),(m!==v-1||t!=="SHA-512/224")&&g.putInt32(h[m][1]);return g},a};var xee=null,xPe=!1,See=null,Db=null;function Kst(){xee="\x80",xee+=Hn.util.fillString("\0",128),See=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Db={},Db["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Db["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Db["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Db["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],xPe=!0}function bPe(t,e,r){for(var n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,y,b,x,S,T,L,M,j,N,J,X,D,E,A,F,O,Z,$,z,se,He=r.length();He>=128;){for(A=0;A<16;++A)e[A][0]=r.getInt32()>>>0,e[A][1]=r.getInt32()>>>0;for(;A<80;++A)Z=e[A-2],F=Z[0],O=Z[1],n=((F>>>19|O<<13)^(O>>>29|F<<3)^F>>>6)>>>0,i=((F<<13|O>>>19)^(O<<3|F>>>29)^(F<<26|O>>>6))>>>0,z=e[A-15],F=z[0],O=z[1],o=((F>>>1|O<<31)^(F>>>8|O<<24)^F>>>7)>>>0,s=((F<<31|O>>>1)^(F<<24|O>>>8)^(F<<25|O>>>7))>>>0,$=e[A-7],se=e[A-16],O=i+$[1]+s+se[1],e[A][0]=n+$[0]+o+se[0]+(O/4294967296>>>0)>>>0,e[A][1]=O>>>0;for(h=t[0][0],g=t[0][1],v=t[1][0],y=t[1][1],b=t[2][0],x=t[2][1],S=t[3][0],T=t[3][1],L=t[4][0],M=t[4][1],j=t[5][0],N=t[5][1],J=t[6][0],X=t[6][1],D=t[7][0],E=t[7][1],A=0;A<80;++A)u=((L>>>14|M<<18)^(L>>>18|M<<14)^(M>>>9|L<<23))>>>0,l=((L<<18|M>>>14)^(L<<14|M>>>18)^(M<<23|L>>>9))>>>0,d=(J^L&(j^J))>>>0,p=(X^M&(N^X))>>>0,a=((h>>>28|g<<4)^(g>>>2|h<<30)^(g>>>7|h<<25))>>>0,c=((h<<4|g>>>28)^(g<<30|h>>>2)^(g<<25|h>>>7))>>>0,f=(h&v|b&(h^v))>>>0,m=(g&y|x&(g^y))>>>0,O=E+l+p+See[A][1]+e[A][1],n=D+u+d+See[A][0]+e[A][0]+(O/4294967296>>>0)>>>0,i=O>>>0,O=c+m,o=a+f+(O/4294967296>>>0)>>>0,s=O>>>0,D=J,E=X,J=j,X=N,j=L,N=M,O=T+i,L=S+n+(O/4294967296>>>0)>>>0,M=O>>>0,S=b,T=x,b=v,x=y,v=h,y=g,O=i+s,h=n+o+(O/4294967296>>>0)>>>0,g=O>>>0;O=t[0][1]+g,t[0][0]=t[0][0]+h+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+y,t[1][0]=t[1][0]+v+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+x,t[2][0]=t[2][0]+b+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+T,t[3][0]=t[3][0]+S+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+M,t[4][0]=t[4][0]+L+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+N,t[5][0]=t[5][0]+j+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+X,t[6][0]=t[6][0]+J+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+E,t[7][0]=t[7][0]+D+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,He-=128}}});var EPe=k(Tee=>{var Yst=Qt();Al();var Ho=Yst.asn1;Tee.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Tee.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var MPe=k((FLr,OPe)=>{var gs=Qt();O2();wu();Eee();Lr();var APe=EPe(),Qst=APe.publicKeyValidator,Xst=APe.privateKeyValidator;typeof TPe>"u"&&(TPe=gs.jsbn.BigInteger);var TPe,wee=gs.util.ByteBuffer,Za=typeof Buffer>"u"?Uint8Array:Buffer;gs.pki=gs.pki||{};OPe.exports=gs.pki.ed25519=gs.ed25519=gs.ed25519||{};var ar=gs.ed25519;ar.constants={};ar.constants.PUBLIC_KEY_BYTE_LENGTH=32;ar.constants.PRIVATE_KEY_BYTE_LENGTH=64;ar.constants.SEED_BYTE_LENGTH=32;ar.constants.SIGN_BYTE_LENGTH=64;ar.constants.HASH_BYTE_LENGTH=64;ar.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=gs.random.getBytesSync(ar.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==ar.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+ar.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=sm({message:e,encoding:"binary"});for(var r=new Za(ar.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Za(ar.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return tat(r,n),{publicKey:r,privateKey:n}};ar.privateKeyFromAsn1=function(t){var e={},r=[],n=gs.asn1.validate(t,Xst,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=gs.asn1.derToOid(e.privateKeyOid),s=gs.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.privateKey,c=sm({message:gs.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:c}};ar.publicKeyFromAsn1=function(t){var e={},r=[],n=gs.asn1.validate(t,Qst,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=gs.asn1.derToOid(e.publicKeyOid),s=gs.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.ed25519PublicKey;if(a.length!==ar.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return sm({message:a,encoding:"binary"})};ar.publicKeyFromPrivateKey=function(t){t=t||{};var e=sm({message:t.privateKey,encoding:"binary"});if(e.length!==ar.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ar.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Za(ar.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};ar.sign=function(t){t=t||{};var e=sm(t),r=sm({message:t.privateKey,encoding:"binary"});if(r.length===ar.constants.SEED_BYTE_LENGTH){var n=ar.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==ar.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ar.constants.SEED_BYTE_LENGTH+" or "+ar.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Za(ar.constants.SIGN_BYTE_LENGTH+e.length);rat(i,e,e.length,r);for(var o=new Za(ar.constants.SIGN_BYTE_LENGTH),s=0;s<o.length;++s)o[s]=i[s];return o};ar.verify=function(t){t=t||{};var e=sm(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=sm({message:t.signature,encoding:"binary"});if(r.length!==ar.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+ar.constants.SIGN_BYTE_LENGTH);var n=sm({message:t.publicKey,encoding:"binary"});if(n.length!==ar.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+ar.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Za(ar.constants.SIGN_BYTE_LENGTH+e.length),o=new Za(ar.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<ar.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+ar.constants.SIGN_BYTE_LENGTH]=e[s];return nat(o,i,i.length,n)>=0};function sm(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Za)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new wee(e,r)}else if(!(e instanceof wee))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Za(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var Ree=wt(),qF=wt([1]),Jst=wt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Zst=wt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),CPe=wt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),IPe=wt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Cee=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),eat=wt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function q2(t,e){var r=gs.md.sha512.create(),n=new wee(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Za(ar.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)o[s]=i.charCodeAt(s);return o}function tat(t,e){var r=[wt(),wt(),wt(),wt()],n,i=q2(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Dee(r,i),kee(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function rat(t,e,r,n){var i,o,s=new Float64Array(64),a=[wt(),wt(),wt(),wt()],c=q2(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var l=q2(t.subarray(32),r+32);for(Aee(l),Dee(a,l),kee(t,a),i=32;i<64;++i)t[i]=n[i];var d=q2(t,r+64);for(Aee(d),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=l[i];for(i=0;i<32;++i)for(o=0;o<32;o++)s[i+o]+=d[i]*c[o];return PPe(t.subarray(32),s),u}function nat(t,e,r,n){var i,o,s=new Za(32),a=[wt(),wt(),wt(),wt()],c=[wt(),wt(),wt(),wt()];if(o=-1,r<64||iat(c,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=q2(t,r);if(Aee(u),NPe(a,c,u),Dee(c,e.subarray(32)),Pee(a,c),kee(s,a),r-=64,kPe(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}function PPe(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*Cee[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Cee[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Cee[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Aee(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;PPe(t,e)}function Pee(t,e){var r=wt(),n=wt(),i=wt(),o=wt(),s=wt(),a=wt(),c=wt(),u=wt(),l=wt();gT(r,t[1],t[0]),gT(l,e[1],e[0]),yn(r,r,l),hT(n,t[0],t[1]),hT(l,e[0],e[1]),yn(n,n,l),yn(i,t[3],e[3]),yn(i,i,Zst),yn(o,t[2],e[2]),hT(o,o,o),gT(s,n,r),gT(a,o,i),hT(c,o,i),hT(u,n,r),yn(t[0],s,a),yn(t[1],u,c),yn(t[2],c,a),yn(t[3],s,u)}function wPe(t,e,r){for(var n=0;n<4;++n)LPe(t[n],e[n],r)}function kee(t,e){var r=wt(),n=wt(),i=wt();cat(i,e[2]),yn(r,e[0],i),yn(n,e[1],i),HF(t,n),t[31]^=DPe(r)<<7}function HF(t,e){var r,n,i,o=wt(),s=wt();for(r=0;r<16;++r)s[r]=e[r];for(Iee(s),Iee(s),Iee(s),n=0;n<2;++n){for(o[0]=s[0]-65517,r=1;r<15;++r)o[r]=s[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,LPe(s,o,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function iat(t,e){var r=wt(),n=wt(),i=wt(),o=wt(),s=wt(),a=wt(),c=wt();return k0(t[2],qF),oat(t[1],e),Nb(i,t[1]),yn(o,i,Jst),gT(i,i,t[2]),hT(o,t[2],o),Nb(s,o),Nb(a,s),yn(c,a,s),yn(r,c,i),yn(r,r,o),sat(r,r),yn(r,r,i),yn(r,r,o),yn(r,r,o),yn(t[0],r,o),Nb(n,t[0]),yn(n,n,o),RPe(n,i)&&yn(t[0],t[0],eat),Nb(n,t[0]),yn(n,n,o),RPe(n,i)?-1:(DPe(t[0])===e[31]>>7&&gT(t[0],Ree,t[0]),yn(t[3],t[0],t[1]),0)}function oat(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function sat(t,e){var r=wt(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Nb(r,r),n!==1&&yn(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function RPe(t,e){var r=new Za(32),n=new Za(32);return HF(r,t),HF(n,e),kPe(r,0,n,0)}function kPe(t,e,r,n){return aat(t,e,r,n,32)}function aat(t,e,r,n,i){var o,s=0;for(o=0;o<i;++o)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}function DPe(t){var e=new Za(32);return HF(e,t),e[0]&1}function NPe(t,e,r){var n,i;for(k0(t[0],Ree),k0(t[1],qF),k0(t[2],qF),k0(t[3],Ree),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,wPe(t,e,n),Pee(e,t),Pee(t,t),wPe(t,e,n)}function Dee(t,e){var r=[wt(),wt(),wt(),wt()];k0(r[0],CPe),k0(r[1],IPe),k0(r[2],qF),yn(r[3],CPe,IPe),NPe(t,r,e)}function k0(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function cat(t,e){var r=wt(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Nb(r,r),n!==2&&n!==4&&yn(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function Iee(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function LPe(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function wt(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function hT(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function gT(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function Nb(t,e){yn(t,e,e)}function yn(t,e,r){var n,i,o=0,s=0,a=0,c=0,u=0,l=0,d=0,p=0,f=0,m=0,h=0,g=0,v=0,y=0,b=0,x=0,S=0,T=0,L=0,M=0,j=0,N=0,J=0,X=0,D=0,E=0,A=0,F=0,O=0,Z=0,$=0,z=r[0],se=r[1],He=r[2],ee=r[3],ft=r[4],ze=r[5],Ct=r[6],mr=r[7],me=r[8],Qe=r[9],U=r[10],ae=r[11],le=r[12],Ie=r[13],be=r[14],et=r[15];n=e[0],o+=n*z,s+=n*se,a+=n*He,c+=n*ee,u+=n*ft,l+=n*ze,d+=n*Ct,p+=n*mr,f+=n*me,m+=n*Qe,h+=n*U,g+=n*ae,v+=n*le,y+=n*Ie,b+=n*be,x+=n*et,n=e[1],s+=n*z,a+=n*se,c+=n*He,u+=n*ee,l+=n*ft,d+=n*ze,p+=n*Ct,f+=n*mr,m+=n*me,h+=n*Qe,g+=n*U,v+=n*ae,y+=n*le,b+=n*Ie,x+=n*be,S+=n*et,n=e[2],a+=n*z,c+=n*se,u+=n*He,l+=n*ee,d+=n*ft,p+=n*ze,f+=n*Ct,m+=n*mr,h+=n*me,g+=n*Qe,v+=n*U,y+=n*ae,b+=n*le,x+=n*Ie,S+=n*be,T+=n*et,n=e[3],c+=n*z,u+=n*se,l+=n*He,d+=n*ee,p+=n*ft,f+=n*ze,m+=n*Ct,h+=n*mr,g+=n*me,v+=n*Qe,y+=n*U,b+=n*ae,x+=n*le,S+=n*Ie,T+=n*be,L+=n*et,n=e[4],u+=n*z,l+=n*se,d+=n*He,p+=n*ee,f+=n*ft,m+=n*ze,h+=n*Ct,g+=n*mr,v+=n*me,y+=n*Qe,b+=n*U,x+=n*ae,S+=n*le,T+=n*Ie,L+=n*be,M+=n*et,n=e[5],l+=n*z,d+=n*se,p+=n*He,f+=n*ee,m+=n*ft,h+=n*ze,g+=n*Ct,v+=n*mr,y+=n*me,b+=n*Qe,x+=n*U,S+=n*ae,T+=n*le,L+=n*Ie,M+=n*be,j+=n*et,n=e[6],d+=n*z,p+=n*se,f+=n*He,m+=n*ee,h+=n*ft,g+=n*ze,v+=n*Ct,y+=n*mr,b+=n*me,x+=n*Qe,S+=n*U,T+=n*ae,L+=n*le,M+=n*Ie,j+=n*be,N+=n*et,n=e[7],p+=n*z,f+=n*se,m+=n*He,h+=n*ee,g+=n*ft,v+=n*ze,y+=n*Ct,b+=n*mr,x+=n*me,S+=n*Qe,T+=n*U,L+=n*ae,M+=n*le,j+=n*Ie,N+=n*be,J+=n*et,n=e[8],f+=n*z,m+=n*se,h+=n*He,g+=n*ee,v+=n*ft,y+=n*ze,b+=n*Ct,x+=n*mr,S+=n*me,T+=n*Qe,L+=n*U,M+=n*ae,j+=n*le,N+=n*Ie,J+=n*be,X+=n*et,n=e[9],m+=n*z,h+=n*se,g+=n*He,v+=n*ee,y+=n*ft,b+=n*ze,x+=n*Ct,S+=n*mr,T+=n*me,L+=n*Qe,M+=n*U,j+=n*ae,N+=n*le,J+=n*Ie,X+=n*be,D+=n*et,n=e[10],h+=n*z,g+=n*se,v+=n*He,y+=n*ee,b+=n*ft,x+=n*ze,S+=n*Ct,T+=n*mr,L+=n*me,M+=n*Qe,j+=n*U,N+=n*ae,J+=n*le,X+=n*Ie,D+=n*be,E+=n*et,n=e[11],g+=n*z,v+=n*se,y+=n*He,b+=n*ee,x+=n*ft,S+=n*ze,T+=n*Ct,L+=n*mr,M+=n*me,j+=n*Qe,N+=n*U,J+=n*ae,X+=n*le,D+=n*Ie,E+=n*be,A+=n*et,n=e[12],v+=n*z,y+=n*se,b+=n*He,x+=n*ee,S+=n*ft,T+=n*ze,L+=n*Ct,M+=n*mr,j+=n*me,N+=n*Qe,J+=n*U,X+=n*ae,D+=n*le,E+=n*Ie,A+=n*be,F+=n*et,n=e[13],y+=n*z,b+=n*se,x+=n*He,S+=n*ee,T+=n*ft,L+=n*ze,M+=n*Ct,j+=n*mr,N+=n*me,J+=n*Qe,X+=n*U,D+=n*ae,E+=n*le,A+=n*Ie,F+=n*be,O+=n*et,n=e[14],b+=n*z,x+=n*se,S+=n*He,T+=n*ee,L+=n*ft,M+=n*ze,j+=n*Ct,N+=n*mr,J+=n*me,X+=n*Qe,D+=n*U,E+=n*ae,A+=n*le,F+=n*Ie,O+=n*be,Z+=n*et,n=e[15],x+=n*z,S+=n*se,T+=n*He,L+=n*ee,M+=n*ft,j+=n*ze,N+=n*Ct,J+=n*mr,X+=n*me,D+=n*Qe,E+=n*U,A+=n*ae,F+=n*le,O+=n*Ie,Z+=n*be,$+=n*et,o+=38*S,s+=38*T,a+=38*L,c+=38*M,u+=38*j,l+=38*N,d+=38*J,p+=38*X,f+=38*D,m+=38*E,h+=38*A,g+=38*F,v+=38*O,y+=38*Z,b+=38*$,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=d,t[7]=p,t[8]=f,t[9]=m,t[10]=h,t[11]=g,t[12]=v,t[13]=y,t[14]=b,t[15]=x}});var qPe=k((ULr,BPe)=>{var wc=Qt();Lr();wu();O2();BPe.exports=wc.kem=wc.kem||{};var FPe=wc.jsbn.BigInteger;wc.kem.rsa={};wc.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||wc.random,n={};return n.encrypt=function(i,o){var s=Math.ceil(i.n.bitLength()/8),a;do a=new FPe(wc.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(a.compareTo(FPe.ONE)<=0);a=wc.util.hexToBytes(a.toString(16));var c=s-a.length;c>0&&(a=wc.util.fillString("\0",c)+a);var u=i.encrypt(a,"NONE"),l=t.generate(a,o);return{encapsulation:u,key:l}},n.decrypt=function(i,o,s){var a=i.decrypt(o,"NONE");return t.generate(a,s)},n};wc.kem.kdf1=function(t,e){UPe(this,t,0,e||t.digestLength)};wc.kem.kdf2=function(t,e){UPe(this,t,1,e||t.digestLength)};function UPe(t,e,r,n){t.generate=function(i,o){for(var s=new wc.util.ByteBuffer,a=Math.ceil(o/n)+r,c=new wc.util.ByteBuffer,u=r;u<a;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var l=e.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-o),s.getBytes()}}});var zPe=k((BLr,jPe)=>{var fr=Qt();Lr();jPe.exports=fr.log=fr.log||{};fr.log.levels=["none","error","warning","info","debug","verbose","max"];var GF={},Oee=[],G2=null;fr.log.LEVEL_LOCKED=2;fr.log.NO_LEVEL_CHECK=4;fr.log.INTERPOLATE=8;for(yp=0;yp<fr.log.levels.length;++yp)Nee=fr.log.levels[yp],GF[Nee]={index:yp,name:Nee.toUpperCase()};var Nee,yp;fr.log.logMessage=function(t){for(var e=GF[t.level].index,r=0;r<Oee.length;++r){var n=Oee[r];if(n.flags&fr.log.NO_LEVEL_CHECK)n.f(t);else{var i=GF[n.level].index;e<=i&&n.f(n,t)}}};fr.log.prepareStandard=function(t){"standard"in t||(t.standard=GF[t.level].name+" ["+t.category+"] "+t.message)};fr.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=fr.util.format.apply(this,e)}};fr.log.prepareStandardFull=function(t){"standardFull"in t||(fr.log.prepareStandard(t),t.standardFull=t.standard)};for(Lee=["error","warning","info","debug","verbose"],yp=0;yp<Lee.length;++yp)(function(e){fr.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};fr.log.logMessage(o)}})(Lee[yp]);var Lee,yp;fr.log.makeLogger=function(t){var e={flags:0,f:t};return fr.log.setLevel(e,"none"),e};fr.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&fr.log.LEVEL_LOCKED))for(var n=0;n<fr.log.levels.length;++n){var i=fr.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};fr.log.lock=function(t,e){typeof e>"u"||e?t.flags|=fr.log.LEVEL_LOCKED:t.flags&=~fr.log.LEVEL_LOCKED};fr.log.addLogger=function(t){Oee.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(HPe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},j2=function(t,e){fr.log.prepareStandard(e);var r=HPe[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},vT=fr.log.makeLogger(j2)):(j2=function(e,r){fr.log.prepareStandardFull(r),console.log(r.standardFull)},vT=fr.log.makeLogger(j2)),fr.log.setLevel(vT,"debug"),fr.log.addLogger(vT),G2=vT):console={log:function(){}};var vT,HPe,j2;G2!==null&&typeof window<"u"&&window.location&&(H2=new URL(window.location.href).searchParams,H2.has("console.level")&&fr.log.setLevel(G2,H2.get("console.level").slice(-1)[0]),H2.has("console.lock")&&(GPe=H2.get("console.lock").slice(-1)[0],GPe=="true"&&fr.log.lock(G2)));var H2,GPe;fr.log.consoleLogger=G2});var $Pe=k((qLr,VPe)=>{VPe.exports=lp();xF();lT();KZ();Eee()});var YPe=k((HLr,KPe)=>{var qe=Qt();E0();Al();N2();T0();Ib();cee();wu();Lr();OF();var G=qe.asn1,va=KPe.exports=qe.pkcs7=qe.pkcs7||{};va.messageFromPem=function(t){var e=qe.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=G.fromDer(e.body);return va.messageFromAsn1(n)};va.messageToPem=function(t,e){var r={type:"PKCS7",body:G.toDer(t.toAsn1()).getBytes()};return qe.pem.encode(r,{maxline:e})};va.messageFromAsn1=function(t){var e={},r=[];if(!G.validate(t,va.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=G.derToOid(e.contentType),o;switch(i){case qe.pki.oids.envelopedData:o=va.createEnvelopedData();break;case qe.pki.oids.encryptedData:o=va.createEncryptedData();break;case qe.pki.oids.signedData:o=va.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};va.createSignedData=function(){var t=null;return t={type:qe.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Fee(t,n,va.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(qe.pki.certificateFromAsn1(i[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(qe.pki.certificateToAsn1(t.certificates[i]));var o=[],s=G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(t.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(G.create(G.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&s.value[0].value.push(G.create(G.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(G.create(G.Class.UNIVERSAL,G.Type.SET,!0,t.signerInfos)),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=qe.pki.certificateFromPem(s)),i=s.issuer.attributes,o=s.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=qe.pki.privateKeyFromPem(a));var c=n.digestAlgorithm||qe.pki.oids.sha1;switch(c){case qe.pki.oids.sha1:case qe.pki.oids.sha256:case qe.pki.oids.sha384:case qe.pki.oids.sha512:case qe.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var l=!1,d=!1,p=0;p<u.length;++p){var f=u[p];if(!l&&f.type===qe.pki.oids.contentType){if(l=!0,d)break;continue}if(!d&&f.type===qe.pki.oids.messageDigest){if(d=!0,l)break;continue}}if(!l||!d)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:qe.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(qe.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof qe.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=qe.util.encodeUtf8(t.content)),n.detached?t.detachedContent=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=qe.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],s=o.digestAlgorithm;s in n||(n[s]=qe.md[qe.pki.oids[s]].create()),o.authenticatedAttributes.length===0?o.md=n[s]:o.md=qe.md[qe.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(s).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=G.derToOid(t.contentInfo.value[0].value),s=G.toDer(i);s.getByte(),G.getBerValueLength(s),s=s.getBytes();for(var a in n)n[a].start().update(s);for(var c=new Date,u=0;u<t.signers.length;++u){var l=t.signers[u];if(l.authenticatedAttributes.length===0){if(o!==qe.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=G.create(G.Class.UNIVERSAL,G.Type.SET,!0,[]),p=0;p<l.authenticatedAttributes.length;++p){var f=l.authenticatedAttributes[p];f.type===qe.pki.oids.messageDigest?f.value=n[l.digestAlgorithm].digest():f.type===qe.pki.oids.signingTime&&(f.value||(f.value=c)),d.value.push(Mee(f)),l.authenticatedAttributesAsn1.value.push(Mee(f))}s=G.toDer(d).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=mat(t.signers)}};va.createEncryptedData=function(){var t=null;return t={type:qe.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:qe.pki.oids["aes256-CBC"]},fromAsn1:function(e){Fee(t,e,va.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),WPe(t)}},t};va.createEnvelopedData=function(){var t=null;return t={type:qe.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:qe.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=Fee(t,e,va.asn1.envelopedDataValidator);t.recipients=dat(r.recipientInfos.value)},toAsn1:function(){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.type).getBytes()),G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(t.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,pat(t.recipients)),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,hat(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case qe.pki.oids.rsaEncryption:case qe.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=qe.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}WPe(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:qe.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case qe.pki.oids["aes128-CBC"]:n=16,i=16,o=qe.aes.createEncryptionCipher;break;case qe.pki.oids["aes192-CBC"]:n=24,i=16,o=qe.aes.createEncryptionCipher;break;case qe.pki.oids["aes256-CBC"]:n=32,i=16,o=qe.aes.createEncryptionCipher;break;case qe.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=qe.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=qe.util.createBuffer(qe.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=qe.util.createBuffer(qe.random.getBytes(i));var s=o(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var a=0;a<t.recipients.length;++a){var c=t.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case qe.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t};function uat(t){var e={},r=[];if(!G.validate(t,va.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:qe.pki.RDNAttributesAsArray(e.issuer),serialNumber:qe.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:G.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function lat(t){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(t.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[qe.pki.distinguishedNameToAsn1({attributes:t.issuer}),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,qe.util.hexToBytes(t.serialNumber))]),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.encryptedContent.algorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]),G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function dat(t){for(var e=[],r=0;r<t.length;++r)e.push(uat(t[r]));return e}function pat(t){for(var e=[],r=0;r<t.length;++r)e.push(lat(t[r]));return e}function fat(t){var e=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(t.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[qe.pki.distinguishedNameToAsn1({attributes:t.issuer}),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,qe.util.hexToBytes(t.serialNumber))]),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.digestAlgorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.signatureAlgorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")])),e.value.push(G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=G.create(G.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Mee(i))}e.value.push(r)}return e}function mat(t){for(var e=[],r=0;r<t.length;++r)e.push(fat(t[r]));return e}function Mee(t){var e;if(t.type===qe.pki.oids.contentType)e=G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.value).getBytes());else if(t.type===qe.pki.oids.messageDigest)e=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===qe.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=G.utcTimeToDate(i):i=G.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=G.create(G.Class.UNIVERSAL,G.Type.UTCTIME,!1,G.dateToUtcTime(i)):e=G.create(G.Class.UNIVERSAL,G.Type.GENERALIZEDTIME,!1,G.dateToGeneralizedTime(i))}return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.type).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,[e])])}function hat(t){return[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(qe.pki.oids.data).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.algorithm).getBytes()),t.parameter?G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.content.getBytes())])]}function Fee(t,e,r){var n={},i=[];if(!G.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var s=G.derToOid(n.contentType);if(s!==qe.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(qe.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==G.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[c].value}else a=n.encryptedContent;t.encryptedContent={algorithm:G.derToOid(n.encAlgorithm),parameter:qe.util.createBuffer(n.encParameter.value),content:qe.util.createBuffer(a)}}if(n.content){var a="";if(qe.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==G.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[c].value}else a=n.content;t.content=qe.util.createBuffer(a)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function WPe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case qe.pki.oids["aes128-CBC"]:case qe.pki.oids["aes192-CBC"]:case qe.pki.oids["aes256-CBC"]:e=qe.aes.createDecryptionCipher(t.encryptedContent.key);break;case qe.pki.oids.desCBC:case qe.pki.oids["des-EDE3-CBC"]:e=qe.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var XPe=k((GLr,QPe)=>{var uo=Qt();E0();sT();xF();lT();Lr();var zF=QPe.exports=uo.ssh=uo.ssh||{};zF.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var s=uo.util.createBuffer();yT(s,n),bp(s,t.e),bp(s,t.n);var a=uo.util.encode64(s.bytes(),64),c=Math.floor(a.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=a;var u=uo.util.createBuffer();bp(u,t.d),bp(u,t.p),bp(u,t.q),bp(u,t.qInv);var l;if(!e)l=uo.util.encode64(u.bytes(),64);else{var d=u.length()+16-1;d-=d%16;var p=jF(u.bytes());p.truncate(p.length()-d+u.length()),u.putBuffer(p);var f=uo.util.createBuffer();f.putBuffer(jF("\0\0\0\0",e)),f.putBuffer(jF("\0\0\0",e));var m=uo.aes.createEncryptionCipher(f.truncate(8),"CBC");m.start(uo.util.createBuffer().fillWithByte(0,16)),m.update(u.copy()),m.finish();var h=m.output;h.truncate(16),l=uo.util.encode64(h.bytes(),64)}c=Math.floor(l.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=l;var g=jF("putty-private-key-file-mac-key",e),v=uo.util.createBuffer();yT(v,n),yT(v,i),yT(v,r),v.putInt32(s.length()),v.putBuffer(s),v.putInt32(u.length()),v.putBuffer(u);var y=uo.hmac.create();return y.start("sha1",g),y.update(v.bytes()),o+=`\r
Private-MAC: `+y.digest().toHex()+`\r
`,o};zF.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=uo.util.createBuffer();return yT(n,r),bp(n,t.e),bp(n,t.n),r+" "+uo.util.encode64(n.bytes())+" "+e};zF.privateKeyToOpenSSH=function(t,e){return e?uo.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):uo.pki.privateKeyToPem(t)};zF.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||uo.md.md5.create(),n="ssh-rsa",i=uo.util.createBuffer();yT(i,n),bp(i,t.e),bp(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function bp(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=uo.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function yT(t,e){t.putInt32(e.length),t.putString(e)}function jF(){for(var t=uo.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var ZPe=k((jLr,JPe)=>{JPe.exports=Qt();E0();yPe();Al();mF();N2();MPe();sT();qPe();zPe();$Pe();uee();CF();Ib();nee();pee();YPe();mee();oee();YZ();DF();wu();JZ();XPe();_ee();Lr()});var eke=k((zLr,gat)=>{gat.exports={name:"@roamhq/mac-ca",version:"1.0.7",description:"Get Mac OS Root certificates",main:"index.js",repository:{type:"git",url:"https://github.com/WonderInventions/mac-ca.git"},scripts:{test:'echo "Error: no test specified" && exit 1',lint:"eslint ."},license:"BSD-3-Clause",dependencies:{"node-forge":"^1.3.1"},devDependencies:{eslint:"^8.22.0"}}});var nke=k((VLr,Uee)=>{var $F=ZPe(),tke=eke(),VF=Uee.exports.validFormats={der:0,pem:1,txt:2,asn1:3};function rke(t){let e=$F.pki.pemToDer(t),r=$F.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,s=n.slice(o);return{serial:s[0],issuer:s[2],valid:s[3],subject:s[4]}}function vat(t){let e=rke(t),r=new Date,n=e.subject.value.map(s=>s.value[0].value[1].value).join("/"),i=e.valid.value.map(s=>s.value).join(" - "),o=r.toTimeString().replace(/\s*\(.*\)\s*/,"");return[`Subject	${n}`,`Valid	${i}`,`Saved	${r.toLocaleDateString()} ${o} by ${tke.name}@${tke.version}`,String(t)].join(`
`)}Uee.exports.transform=function(t){return function(e){try{switch(t){case VF.der:return $F.pki.pemToDer(e);case VF.pem:return e;case VF.txt:return vat(e);case VF.asn1:return rke(e);default:return $F.pki.certificateFromPem(e)}}catch{return}}}});var ike=k(($Lr,bT)=>{var Bee=require("https"),qee=nke();if(process.platform!=="darwin")bT.exports.all=()=>[],bT.exports.each=()=>{};else{let a=function(u,l,d){return d.indexOf(u)===l};yat=a;let t=require("child_process"),e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r="/System/Library/Keychains/SystemRootCertificates.keychain",n=["find-certificate","-a","-p"],i=t.spawnSync("/usr/bin/security",n).stdout.toString().split(e),o=t.spawnSync("/usr/bin/security",n.concat(r)).stdout.toString().split(e);Bee.globalAgent.options.ca=Bee.globalAgent.options.ca||[];let s=Bee.globalAgent.options.ca,c=i.concat(o);c.filter(a).forEach(u=>s.push(u)),bT.exports.der2=qee.validFormats,bT.exports.all=function(u){return c.map(qee.transform(u)).filter(l=>l)},bT.exports.each=function(u,l){return typeof u=="function"&&(l=u,u=void 0),c.map(qee.transform(u)).filter(d=>d).forEach(l)}}var yat});var ste=k((S4r,fke)=>{var z2=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,wat=typeof AbortController=="function",XF=wat?AbortController:class{constructor(){this.signal=new lke}abort(){this.signal.dispatchEvent("abort")}},Rat=typeof AbortSignal=="function",Aat=typeof XF.AbortSignal=="function",lke=Rat?AbortSignal:Aat?XF.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},ite=new Set,tte=(t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;JF(r)&&ote(r,`${t} option`,`options.${e}`,xT)},rte=(t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(JF(r)){let{prototype:n}=xT,{get:i}=Object.getOwnPropertyDescriptor(n,t);ote(r,`${t} method`,`cache.${e}()`,i)}},Pat=(t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(JF(r)){let{prototype:n}=xT,{get:i}=Object.getOwnPropertyDescriptor(n,t);ote(r,`${t} property`,`cache.${e}`,i)}},dke=(...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},JF=t=>!ite.has(t),ote=(t,e,r,n)=>{ite.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;dke(i,"DeprecationWarning",t,n)},Lb=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),pke=t=>Lb(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?_T:null:null,_T=class extends Array{constructor(e){super(e),this.fill(0)}},nte=class{constructor(e){if(e===0)return[];let r=pke(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},xT=class t{constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:u,disposeAfter:l,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,sizeCalculation:m,fetchMethod:h,fetchContext:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:y}=e,{length:b,maxAge:x,stale:S}=e instanceof t?{}:e;if(r!==0&&!Lb(r))throw new TypeError("max option must be a nonnegative integer");let T=r?pke(r):Array;if(!T)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=f,this.sizeCalculation=m||b,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=h||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=g,!this.fetchMethod&&g!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new T(r),this.prev=new T(r),this.head=0,this.tail=0,this.free=new nte(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof l=="function"?(this.disposeAfter=l,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.maxSize!==0){if(!Lb(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!S,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Lb(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||x||0,this.ttl){if(!Lb(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let L="LRU_CACHE_UNBOUNDED";JF(L)&&(ite.add(L),dke("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,t))}S&&tte("stale","allowStale"),x&&tte("maxAge","ttl"),b&&tte("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new _T(this.max),this.starts=new _T(this.max),this.setItemTTL=(n,i,o=z2.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let s=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);s.unref&&s.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?z2.now():0};let e=0,r=()=>{let n=z2.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n};this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new _T(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!Lb(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!Lb(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return rte("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],s={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){s.ttl=this.ttls[r];let a=z2.now()-this.starts[r];s.start=Math.floor(Date.now()-a)}this.sizes&&(s.size=this.sizes[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=z2.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:s=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(s=this.requireSize(e,r,s,a),this.maxSize&&s>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,s),c=!1;else{let l=this.valList[u];r!==l&&(this.isBackgroundFetch(l)?l.__abortController.abort():o||(this.dispose(l,e,"set"),this.disposeAfter&&this.disposed.push([l,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,s)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let s=new XF,a={signal:s.signal,options:n,context:i},c=p=>(s.signal.aborted||this.set(e,p,a.options),p),u=p=>{if(this.valList[r]===d&&(!n.noDeleteOnFetchRejection||d.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=d.__staleWhileFetching),d.__returned===d)throw p},l=p=>p(this.fetchMethod(e,o,a)),d=new Promise(l).then(c,u);return d.__abortController=s,d.__staleWhileFetching=o,d.__returned=null,r===void 0?(this.set(e,d,a.options),r=this.keyMap.get(e)):this.valList[r]=d,d}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,fetchContext:d=this.fetchContext,forceRefresh:p=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let f={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:l},m=this.keyMap.get(e);if(m===void 0){let h=this.backgroundFetch(e,m,f,d);return h.__returned=h}else{let h=this.valList[m];if(this.isBackgroundFetch(h))return r&&h.__staleWhileFetching!==void 0?h.__staleWhileFetching:h.__returned=h;if(!p&&!this.isStale(m))return this.moveToTail(m),n&&this.updateItemAge(m),h;let g=this.backgroundFetch(e,m,f,d);return r&&g.__staleWhileFetching!==void 0?g.__staleWhileFetching:g.__returned=g}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let s=this.valList[o],a=this.isBackgroundFetch(s);return this.isStale(o)?a?r?s.__staleWhileFetching:void 0:(i||this.delete(e),r?s:void 0):a?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),s)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return rte("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return rte("reset","clear"),this.clear}get length(){return Pat("length","size"),this.size}static get AbortController(){return XF}static get AbortSignal(){return lke}};fke.exports=xT});var ute=k((E4r,mke)=>{"use strict";var V2=class extends Error{constructor(e,r){super(e),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},ate=class extends V2{constructor(e,r,n){super(e,r),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},cte=class extends V2{constructor(e,r="aborted"){super(e,r)}};mke.exports={FetchBaseError:V2,FetchError:ate,AbortError:cte}});var cm=k((T4r,gke)=>{"use strict";var{constants:{MAX_LENGTH:kat}}=require("buffer"),{pipeline:ZF,PassThrough:Dat}=require("stream"),{promisify:Nat}=require("util"),{createGunzip:Lat,createInflate:Oat,createBrotliDecompress:Mat,constants:{Z_SYNC_FLUSH:hke}}=require("zlib"),Fat=Zu()("helix-fetch:utils"),Uat=Nat(ZF),Bat=(t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),qat=(t,e,r,n)=>{if(!Bat(t,e))return r;let i=o=>{o&&(Fat(`encountered error while decoding stream: ${o}`),n(o))};switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return ZF(r,Lat({flush:hke,finishFlush:hke}),i);case"deflate":case"x-deflate":return ZF(r,Oat(),i);case"br":return ZF(r,Mat(),i);default:return r}},Hat=t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},e9=(t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?Gat(t,e):jat(t,e);default:return 0}},Gat=(t,e)=>(e.add(t),t.map(r=>e.has(r)?0:e9(r,e)).reduce((r,n)=>r+n,0)),jat=(t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=e9(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=e9(t[i],e)}),r},zat=t=>e9(t,new WeakSet),Vat=async t=>{let e=new Dat,r=0,n=[];return e.on("data",i=>{if(r+i.length>kat)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await Uat(t,e),Buffer.concat(n,r)};gke.exports={decodeStream:qat,isPlainObject:Hat,sizeof:zat,streamToBuffer:Vat}});var r9=k((C4r,_ke)=>{"use strict";var{PassThrough:vke,Readable:um}=require("stream"),{types:{isAnyArrayBuffer:bke}}=require("util"),{FetchError:$at,FetchBaseError:Wat}=ute(),{streamToBuffer:Kat}=cm(),Yat=Buffer.alloc(0),Nu=Symbol("Body internals"),Qat=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),yke=async t=>{if(t[Nu].disturbed)throw new TypeError("Already read");if(t[Nu].error)throw new TypeError(`Stream had error: ${t[Nu].error.message}`);t[Nu].disturbed=!0;let{stream:e}=t[Nu];return e===null?Yat:Kat(e)},t9=class{constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=um.from(e.toString()):e instanceof um?r=e:Buffer.isBuffer(e)?r=um.from(e):bke(e)?r=um.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=um.from(e):r=um.from(String(e)),this[Nu]={stream:r,disturbed:!1,error:null},e instanceof um&&r.on("error",n=>{let i=n instanceof Wat?n:new $at(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Nu].error=i})}get body(){return this[Nu].stream}get bodyUsed(){return this[Nu].disturbed}async buffer(){return yke(this)}async arrayBuffer(){return Qat(await this.buffer())}async text(){return(await yke(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(t9.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var Xat=t=>{if(t[Nu].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Nu],r=e;if(e instanceof um){r=new vke;let n=new vke;e.pipe(r),e.pipe(n),t[Nu].stream=n}return r},Jat=t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||bke(t)||t instanceof um?null:"text/plain; charset=utf-8";_ke.exports={Body:t9,cloneStream:Xat,guessContentType:Jat}});var ST=k((I4r,Tke)=>{"use strict";var{validateHeaderName:xke,validateHeaderValue:Ske}=require("http"),{isPlainObject:Zat}=cm(),lm=Symbol("Headers internals"),$2=t=>{let e=typeof t!="string"?String(t):t;if(typeof xke=="function")xke(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},Eke=(t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof Ske=="function")Ske(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},n9=class t{constructor(e={}){if(this[lm]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(Zat(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[lm].map.set($2(e),Eke(r,e))}has(e){return this[lm].map.has($2(e))}get(e){let r=this[lm].map.get($2(e));return r===void 0?null:r}append(e,r){let n=$2(e),i=Eke(r,e),o=this[lm].map.get(n);this[lm].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[lm].map.delete($2(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[lm].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[lm].map)}};Object.defineProperties(n9.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));Tke.exports={Headers:n9}});var lte=k((w4r,Cke)=>{"use strict";var{EventEmitter:ect}=require("events"),kl=Symbol("AbortSignal internals"),ET=class{constructor(){this[kl]={eventEmitter:new ect,onabort:null,aborted:!1}}get aborted(){return this[kl].aborted}get onabort(){return this[kl].onabort}set onabort(e){this[kl].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[kl].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[kl].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[kl][n]=="function"&&this[n](r),this[kl].eventEmitter.emit(e,r)}fire(){this[kl].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(ET.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var o9=class extends ET{constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[kl].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[kl].timerId)}};Object.defineProperties(o9.prototype,{clear:{enumerable:!0}});var i9=Symbol("AbortController internals"),s9=class{constructor(){this[i9]={signal:new ET}}get signal(){return this[i9].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[i9].signal.aborted||this[i9].signal.fire()}};Object.defineProperties(s9.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});Cke.exports={AbortController:s9,AbortSignal:ET,TimeoutSignal:o9}});var W2=k((R4r,Rke)=>{"use strict";var{randomBytes:tct}=require("crypto"),{Readable:rct}=require("stream"),pte=t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),nct=t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData",Ike=t=>`--${t}--\r
\r
`,wke=(t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,pte(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`};async function*ict(t,e){for(let[r,n]of t)yield wke(e,r,n),pte(n)?yield*n.stream():yield n,yield`\r
`;yield Ike(e)}var oct=(t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(wke(e,n,i)),r+=pte(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(Ike(e)),r},dte=class{constructor(e){this.fd=e,this.boundary=tct(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=oct(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return rct.from(ict(this.fd,this.boundary))}};Rke.exports={isFormData:nct,FormDataSerializer:dte}});var Pke=k((A4r,Ake)=>{"use strict";var{AbortSignal:sct}=lte(),{Body:act,cloneStream:cct,guessContentType:uct}=r9(),{Headers:lct}=ST(),{isPlainObject:dct}=cm(),{isFormData:pct,FormDataSerializer:fct}=W2(),mct=20,D0=Symbol("Request internals"),a9=class t extends act{constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body||(n&&n.body?cct(n):null),a=new lct(r.headers||n&&n.headers||{});if(pct(s)&&!a.has("content-type")){let d=new fct(s);s=d.stream(),a.set("content-type",d.contentType()),!a.has("transfer-encoding")&&!a.has("content-length")&&a.set("content-length",d.length())}if(!a.has("content-type"))if(dct(s))s=JSON.stringify(s),a.set("content-type","application/json");else{let d=uct(s);d&&a.set("content-type",d)}super(s);let c=n?n.signal:null;if("signal"in r&&(c=r.signal),c&&!(c instanceof sct))throw new TypeError("signal needs to be an instance of AbortSignal");let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let l=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(l))throw new TypeError(`'${l}' is not a valid cache option`);this[D0]={init:{...r},method:o,redirect:u,cache:l,headers:a,parsedURL:i,signal:c},r.follow===void 0?!n||n.follow===void 0?this.follow=mct:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[D0].method}get url(){return this[D0].parsedURL.toString()}get headers(){return this[D0].headers}get redirect(){return this[D0].redirect}get cache(){return this[D0].cache}get signal(){return this[D0].signal}clone(){return new t(this)}get init(){return this[D0].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(a9.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});Ake.exports={Request:a9}});var fte=k((P4r,kke)=>{"use strict";var{Body:hct,cloneStream:gct,guessContentType:vct}=r9(),{Headers:yct}=ST(),{isPlainObject:bct}=cm(),{isFormData:_ct,FormDataSerializer:xct}=W2(),Dl=Symbol("Response internals"),c9=class t extends hct{constructor(e=null,r={}){let n=new yct(r.headers),i=e;if(_ct(i)&&!n.has("content-type")){let o=new xct(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(bct(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=vct(i);o&&n.set("content-type",o)}super(i),this[Dl]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Dl].url||""}get status(){return this[Dl].status}get statusText(){return this[Dl].statusText}get ok(){return this[Dl].status>=200&&this[Dl].status<300}get redirected(){return this[Dl].counter>0}get headers(){return this[Dl].headers}get httpVersion(){return this[Dl].httpVersion}get decoded(){return this[Dl].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(gct(this),{...this[Dl]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(c9.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});kke.exports={Response:c9}});var Nke=k((D4r,Dke)=>{"use strict";var Sct=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Ect=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Tct=new Set([500,502,503,504]),Cct={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Ict={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Ob(t){let e=parseInt(t,10);return isFinite(e)?e:0}function wct(t){return t?Tct.has(t.status):!0}function mte(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function Rct(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}Dke.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=mte(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=mte(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Rct(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Ect.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Sct.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=mte(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Cct[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Ob(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Ob(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Ob(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Ob(this._rescc["stale-if-error"]),n=e+Ob(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Ob(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Ob(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&wct(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!Ict[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var Fke=k((N4r,Mke)=>{"use strict";var Act=Nke(),{Headers:Pct}=ST(),Lke=t=>({url:t.url,method:t.method,headers:t.headers.plain()}),Oke=t=>({status:t.status,headers:t.headers.plain()}),hte=class{constructor(e,r,n){this.policy=new Act(Lke(e),Oke(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(Lke(e))}responseHeaders(e){return new Pct(this.policy.responseHeaders(Oke(e)))}timeToLive(){return this.policy.timeToLive()}};Mke.exports=hte});var qke=k((L4r,Bke)=>{"use strict";var{Readable:kct}=require("stream"),{Headers:Uke}=ST(),{Response:Dct}=fte(),N0=Symbol("CacheableResponse internals"),Nct=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),gte=class t extends Dct{constructor(e,r){super(e,r);let n=new Uke(r.headers);this[N0]={headers:n,bufferedBody:e}}get headers(){return this[N0].headers}set headers(e){if(e instanceof Uke)this[N0].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return kct.from(this[N0].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[N0].bufferedBody}async arrayBuffer(){return Nct(this[N0].bufferedBody)}async text(){return this[N0].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a}=this;return new t(this[N0].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a})}get[Symbol.toStringTag](){return this.constructor.name}},Lct=async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:c}=t;return new gte(e,{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:c})};Bke.exports={cacheableResponse:Lct}});var u9=k((O4r,Hke)=>{"use strict";var vte=class extends Error{get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};Hke.exports={RequestAbortedError:vte}});var $ke=k((M4r,Vke)=>{"use strict";var jke=require("http"),zke=require("https"),{Readable:Oct}=require("stream"),dm=Zu()("helix-fetch:h1"),{RequestAbortedError:Gke}=u9(),{decodeStream:Mct}=cm(),Fct=(t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new zke.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new jke.Agent(n),r.httpAgent):void 0},Uct=t=>{t.h1={}},Bct=async({h1:t})=>{t.httpAgent&&(dm("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(dm("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},qct=(t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:c}=t,u=e?Mct(n,c,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:c,readable:u,decoded:!!(e&&u!==t)}},Hct=async(t,e,r)=>{let{request:n}=e.protocol==="https:"?zke:jke,i=Fct(t,e.protocol),o={...r,agent:i},{socket:s,body:a}=o;return s&&(delete o.socket,s.assigned||(s.assigned=!0,i?o.agent=new Proxy(i,{get:(c,u)=>u==="createConnection"&&!s.inUse?(l,d)=>{dm(`agent reusing socket #${s.id} (${s.servername})`),s.inUse=!0,d(null,s)}:c[u]}):o.createConnection=(c,u)=>{dm(`reusing socket #${s.id} (${s.servername})`),s.inUse=!0,u(null,s)})),new Promise((c,u)=>{dm(`${o.method} ${e.href}`);let l,{signal:d}=o,p=()=>{d.removeEventListener("abort",p),s&&!s.inUse&&(dm(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),u(new Gke),l&&l.abort()};if(d){if(d.aborted){u(new Gke);return}d.addEventListener("abort",p)}l=n(e,o),l.once("response",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(dm(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),c(qct(f,o.decode,u))}),l.once("error",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(dm(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),l.aborted||(dm(`${o.method} ${e.href} failed with: ${f.message}`),l.abort(),u(f))}),a instanceof Oct?a.pipe(l):(a&&l.write(a),l.end())})};Vke.exports={request:Hct,setupContext:Uct,resetContext:Bct}});var Qke=k((F4r,Yke)=>{"use strict";var{connect:Gct,constants:jct}=require("http2"),{Readable:zct}=require("stream"),Gn=Zu()("helix-fetch:h2"),{RequestAbortedError:Wke}=u9(),{decodeStream:Vct}=cm(),{NGHTTP2_CANCEL:K2}=jct,$ct=5*60*1e3,Wct=5e3,Kct=t=>{t.h2={sessionCache:{}}},Yct=async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),Gn(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),Kke=(t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let s=r?Vct(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:s,decoded:!!(r&&s!==e)}},Qct=(t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:s,pushHandler:a,pushedStreamIdleTimeout:c=Wct}}}=t,u=i[":path"],l=`${e}${u}`;Gn(`received PUSH_PROMISE: ${l}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),s&&s(l,i,()=>{n.close(K2)}),n.on("push",(d,p)=>{Gn(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(d)}, flags: ${p}`),n.setTimeout(c,()=>{Gn(`closing pushed stream #${n.id} after ${c} ms of inactivity`),n.close(K2)}),a&&a(l,i,Kke(d,n,r))}),n.on("aborted",()=>{Gn(`pushed stream #${n.id} aborted`)}),n.on("error",d=>{Gn(`pushed stream #${n.id} encountered error: ${d}`)}),n.on("frameError",(d,p,f)=>{Gn(`pushed stream #${n.id} encountered frameError: type: ${d}, code: ${p}, id: ${f}`)})},Xct=async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:s}=e,a=`${i}${o}${s}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:l=$ct,pushPromiseHandler:d,pushHandler:p}=c,f={...r},{method:m,headers:h,socket:g,body:v,decode:y}=f;return g&&delete f.socket,h.host&&(h[":authority"]=h.host,delete h.host),new Promise((b,x)=>{let S=u[n];if(!S||S.closed||S.destroyed){let N=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),J={...c,rejectUnauthorized:N};g&&!g.inUse&&(J.createConnection=()=>(Gn(`reusing socket #${g.id} (${g.servername})`),g.inUse=!0,g)),S=Gct(n,{...J,settings:{enablePush:!!(d||p)}}),S.setMaxListeners(1e3),S.setTimeout(l,()=>{Gn(`closing session ${n} after ${l} ms of inactivity`),S.close()}),S.once("connect",()=>{Gn(`session ${n} established`),Gn(`caching session ${n}`),u[n]=S}),S.on("localSettings",D=>{Gn(`session ${n} localSettings: ${JSON.stringify(D)}`)}),S.on("remoteSettings",D=>{Gn(`session ${n} remoteSettings: ${JSON.stringify(D)}`)}),S.once("close",()=>{Gn(`session ${n} closed`),u[n]===S&&(Gn(`discarding cached session ${n}`),delete u[n])}),S.once("error",D=>{Gn(`session ${n} encountered error: ${D}`),u[n]===S&&(Gn(`discarding cached session ${n}`),delete u[n])}),S.on("frameError",(D,E,A)=>{Gn(`session ${n} encountered frameError: type: ${D}, code: ${E}, id: ${A}`)}),S.once("goaway",(D,E,A)=>{Gn(`session ${n} received GOAWAY frame: errorCode: ${D}, lastStreamID: ${E}, opaqueData: ${A?A.toString():void 0}`)}),S.on("stream",(D,E,A)=>{Qct(t,n,y,D,E,A)})}else g&&g.id!==S.socket.id&&!g.inUse&&(Gn(`discarding redundant socket used for ALPN: #${g.id} ${g.servername}`),g.destroy());Gn(`${m} ${e.host}${a}`);let T,{signal:L}=f,M=()=>{L.removeEventListener("abort",M),x(new Wke),T&&T.close(K2)};if(L){if(L.aborted){x(new Wke);return}L.addEventListener("abort",M)}let j=N=>{Gn(`session ${n} encountered error during ${f.method} ${e.href}: ${N}`),x(N)};S.once("error",j),T=S.request({":method":m,":path":a,...h}),T.once("response",N=>{S.off("error",j),L&&L.removeEventListener("abort",M),b(Kke(N,T,f.decode,x))}),T.once("error",N=>{S.off("error",j),L&&L.removeEventListener("abort",M),T.rstCode!==K2&&(Gn(`${f.method} ${e.href} failed with: ${N.message}`),T.close(K2),x(N))}),T.once("frameError",(N,J,X)=>{S.off("error",j),Gn(`encountered frameError during ${f.method} ${e.href}: type: ${N}, code: ${J}, id: ${X}`)}),T.on("push",(N,J)=>{Gn(`received 'push' event: headers: ${JSON.stringify(N)}, flags: ${J}`)}),v instanceof zct?v.pipe(T):(v&&T.write(v),T.end())})};Yke.exports={request:Xct,setupContext:Kct,resetContext:Yct}});var Jke=k((U4r,Xke)=>{"use strict";var{EventEmitter:Jct}=require("events"),Zct=()=>{let t={},e=new Jct;return e.setMaxListeners(0),{acquire:r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))};e.on(r,i)}),release:(r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))}}};Xke.exports=Zct});var Zke=k((B4r,eut)=>{eut.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var iDe=k((q4r,nDe)=>{"use strict";var{Readable:tut}=require("stream"),rut=require("tls"),{types:{isAnyArrayBuffer:nut}}=require("util"),iut=ste(),yte=Zu()("helix-fetch:core"),{RequestAbortedError:l9}=u9(),bte=$ke(),d9=Qke(),sut=Jke(),{isPlainObject:aut}=cm(),{isFormData:cut,FormDataSerializer:uut}=W2(),{version:lut}=Zke(),_te="h2",xte="h2c",Ste="http/1.0",Mb="http/1.1",dut=100,put=60*60*1e3,fut=[_te,Mb,Ste],mut=`helix-fetch/${lut}`,hut={method:"GET",compress:!0,decode:!0},eDe=0,tDe=sut(),rDe=(t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,s=()=>{i.removeEventListener("abort",s);let u=new l9;n(u),o&&o.destroy(u)};if(i){if(i.aborted){n(new l9);return}i.addEventListener("abort",s)}let a=+t.port||443,c=u=>{i&&i.removeEventListener("abort",s),u instanceof l9||(yte(`connecting to ${t.hostname}:${a} failed with: ${u.message}`),n(u))};o=rut.connect(a,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",s),o.off("error",c),eDe+=1,o.id=eDe,o.secureConnecting=!1,yte(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",c)}),gut=async(t,e)=>{let r=await tDe.acquire(t.origin);try{return r||(r=await rDe(t,e)),r}finally{tDe.release(t.origin,r)}},vut=async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=Mb,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=xte,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:s={},h2:a={}}}=t,c=!(o===!1||s.rejectUnauthorized===!1||a.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let l=await gut(e,u);return i=l.alpnProtocol,i||(i=Mb),t.alpnCache.set(n,i),{protocol:i,socket:l}},yut=t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},but=async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let s={...r,host:e.host,hostname:e.hostname,port:o},a=await t(s);if(i){let u={...s,ALPNProtocols:n};u.socket=a,u.servername=s.host;let l=await rDe(e,u);return{protocol:l.alpnProtocol||Mb,socket:l}}return{protocol:a.alpnProtocol||Mb,socket:a}},_ut=async(t,e,r)=>{let n=new URL(e),i={...hut,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=yut(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(cut(i.body)){let u=new uut(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":aut(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):nut(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof tut||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:s}=i,{protocol:a,socket:c=null}=t.socketFactory?await but(t.socketFactory,n,i,t.alpnProtocols):await vut(t,n,s);switch(yte(`${n.host} -> ${a}`),a){case _te:try{return await d9.request(t,n,c?{...i,socket:c}:i)}catch(u){let{code:l,message:d}=u;throw l==="ERR_HTTP2_ERROR"&&d==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case xte:return d9.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),c?{...i,socket:c}:i);case Ste:case Mb:return bte.request(t,n,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${a}`)}},xut=async t=>(t.alpnCache.clear(),Promise.all([bte.resetContext(t),d9.resetContext(t)])),Sut=t=>{let{options:{alpnProtocols:e=fut,alpnCacheTTL:r=put,alpnCacheSize:n=dut,userAgent:i=mut,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new iut({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,bte.setupContext(t),d9.setupContext(t)};nDe.exports={request:_ut,setupContext:Sut,resetContext:xut,RequestAbortedError:l9,ALPN_HTTP2:_te,ALPN_HTTP2C:xte,ALPN_HTTP1_1:Mb,ALPN_HTTP1_0:Ste}});var sDe=k((H4r,oDe)=>{"use strict";var Eut=Zu()("helix-fetch:core"),{request:Tut,setupContext:Cut,resetContext:Iut,RequestAbortedError:wut,ALPN_HTTP2:Rut,ALPN_HTTP2C:Aut,ALPN_HTTP1_1:Put,ALPN_HTTP1_0:kut}=iDe(),Ete=class t{constructor(e){this.options={...e||{}},Cut(this)}api(){return{request:async(e,r)=>this.request(e,r),context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),reset:async()=>this.reset(),RequestAbortedError:wut,ALPN_HTTP2:Rut,ALPN_HTTP2C:Aut,ALPN_HTTP1_1:Put,ALPN_HTTP1_0:kut}}async request(e,r){return Tut(this,e,r)}setCA(e){this.options.ca=e}async reset(){return Eut("resetting context"),Iut(this)}};oDe.exports=new Ete().api()});var dDe=k((G4r,lDe)=>{"use strict";var{EventEmitter:Dut}=require("events"),{Readable:Y2}=require("stream"),Tte=Zu()("helix-fetch"),Nut=ste(),{Body:Lut}=r9(),{Headers:Rte}=ST(),{Request:Fb}=Pke(),{Response:Ite}=fte(),{FetchBaseError:Out,FetchError:Q2,AbortError:p9}=ute(),{AbortController:Mut,AbortSignal:Fut,TimeoutSignal:Uut}=lte(),But=Fke(),{cacheableResponse:qut}=qke(),{sizeof:Hut}=cm(),{isFormData:Gut}=W2(),{context:jut,RequestAbortedError:zut}=sDe(),aDe=["GET","HEAD"],Vut=500,$ut=100*1024*1024,Cte="push",cDe=async(t,e,r)=>{let{request:n}=t.context,i=e instanceof Fb&&typeof r>"u"?e:new Fb(e,r),{method:o,body:s,signal:a,compress:c,decode:u,follow:l,redirect:d,init:{body:p}}=i,f;if(a&&a.aborted){let S=new p9("The operation was aborted.");throw i.init.body instanceof Y2&&i.init.body.destroy(S),S}try{f=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:p&&!(p instanceof Y2)&&!Gut(p)?p:s,compress:c,decode:u,follow:l,redirect:d,signal:a})}catch(S){throw p instanceof Y2&&p.destroy(S),S instanceof TypeError?S:S instanceof zut?new p9("The operation was aborted."):new Q2(S.message,"system",S)}let m=()=>{a.removeEventListener("abort",m);let S=new p9("The operation was aborted.");i.init.body instanceof Y2&&i.init.body.destroy(S),f.readable.emit("error",S)};a&&a.addEventListener("abort",m);let{statusCode:h,statusText:g,httpVersion:v,headers:y,readable:b,decoded:x}=f;if([301,302,303,307,308].includes(h)){let{location:S}=y,T=S==null?null:new URL(S,i.url);switch(i.redirect){case"manual":break;case"error":throw a&&a.removeEventListener("abort",m),new Q2(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(T===null)break;if(i.counter>=i.follow)throw a&&a.removeEventListener("abort",m),new Q2(`maximum redirect reached at: ${i.url}`,"max-redirect");let L={headers:new Rte(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(h!==303&&i.body&&i.init.body instanceof Y2)throw a&&a.removeEventListener("abort",m),new Q2("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(h===303||(h===301||h===302)&&i.method==="POST")&&(L.method="GET",L.body=void 0,L.headers.delete("content-length")),a&&a.removeEventListener("abort",m),cDe(t,new Fb(T,L))}default:}}return a&&(b.once("end",()=>{a.removeEventListener("abort",m)}),b.once("error",()=>{a.removeEventListener("abort",m)})),new Ite(b,{url:i.url,status:h,statusText:g,headers:y,httpVersion:v,decoded:x,counter:i.counter})},uDe=async(t,e,r)=>{if(t.options.maxCacheSize===0||!aDe.includes(e.method))return r;let n=new But(e,r,{shared:!1});if(n.storable()){let i=await qut(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},Wut=async(t,e,r)=>{let n=new Fb(e,r);if(t.options.maxCacheSize!==0&&aDe.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:s,response:a}=t.cache.get(n.url)||{};if(s&&s.satisfiesWithoutRevalidation(n)){a.headers=new Rte(s.responseHeaders(a));let c=a.clone();return c.fromCache=!0,c}}let o=await cDe(t,n);return n.cache!=="no-store"?uDe(t,n,o):o},Kut=(t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},Yut=t=>new Uut(t),wte=class t{constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:$ut,i=Vut;n===0&&(n=1,i=1);let o=({response:a},c)=>Hut(a);this.cache=new Nut({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new Dut,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:s}=this.options.h2;s&&(this.options.h2.pushPromiseHandler=(a,c,u)=>{let l={...c};Object.keys(l).filter(d=>d.startsWith(":")).forEach(d=>delete l[d]),this.pushPromiseHandler(a,l,u)},this.options.h2.pushHandler=(a,c,u)=>{let l={...c};Object.keys(l).filter(v=>v.startsWith(":")).forEach(v=>delete l[v]);let{statusCode:d,statusText:p,httpVersion:f,headers:m,readable:h,decoded:g}=u;this.pushHandler(a,l,new Ite(h,{url:a,status:d,statusText:p,headers:m,httpVersion:f,decoded:g}))}),this.context=jut(this.options)}api(){return{fetch:async(e,r)=>this.fetch(e,r),Body:Lut,Headers:Rte,Request:Fb,Response:Ite,AbortController:Mut,AbortSignal:Fut,FetchBaseError:Out,FetchError:Q2,AbortError:p9,context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),noCache:(e={})=>new t({...e,maxCacheSize:0}).api(),h1:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAlive:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),h1NoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAliveNoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),reset:async()=>this.context.reset(),onPush:e=>this.onPush(e),offPush:e=>this.offPush(e),createUrl:Kut,timeoutSignal:Yut,clearCache:()=>this.clearCache(),cacheStats:()=>this.cacheStats(),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return Wut(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Cte,e)}offPush(e){return this.eventEmitter.off(Cte,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){Tte(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new Fb(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Tte(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){Tte(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await uDe(this,new Fb(e,{headers:r}),n);this.eventEmitter.emit(Cte,e,i)}};lDe.exports=new wte().api()});var fDe=k((j4r,pDe)=>{"use strict";pDe.exports=dDe()});var alt={};an(alt,{activate:()=>nlt,createExtensionContext:()=>IDe,onDeactivate:()=>wDe});module.exports=Gi(alt);var wT=W(_r()),CDe=W(gre()),Hr=require("vscode");var oP=W(require("fs"));var Ou;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n})(Ou||={});var zi=oe("instantiationService");function ANe(t,e,r){e[Ou.DI_TARGET]===e?e[Ou.DI_DEPENDENCIES].push({id:t,index:r}):(e[Ou.DI_DEPENDENCIES]=[{id:t,index:r}],e[Ou.DI_TARGET]=e)}function oe(t){if(Ou.serviceIds.has(t))return Ou.serviceIds.get(t);let e=function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");ANe(e,r,i)};return e.toString=()=>t,Ou.serviceIds.set(t,e),e}var J9=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?uA.isErrorNoTelemetry(e)?new uA(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},PNe=new J9;function Vb(t){Ep(t)||PNe.onUnexpectedError(t)}var Z9="Canceled";function Ep(t){return t instanceof ys?!0:t instanceof Error&&t.name===Z9&&t.message===Z9}var ys=class extends Error{constructor(){super(Z9),this.name=this.message}};function wr(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}function vre(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}function lA(t){return t?t.message?t.message:t.stack?t.stack.split(`
`)[0]:String(t):"Error"}var uA=class t extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},ln=class t extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function e7(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}function bre(t,e){let r=t7(t,e);if(r!==-1)return t[r]}function t7(t,e,r=t.length-1){for(let n=r;n>=0;n--){let i=t[n];if(e(i))return n}return-1}function r7(t,e){let r=vm(t,e);return r===-1?void 0:t[r]}function vm(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?i=s+1:o=s}return i-1}function dA(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?o=s:i=s+1}return i}var yre=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=vm(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};function _re(t,e){for(let r of t){let n=e(r);if(n!==void 0)return n}}function Sre(t,e){let r=0,n=t-1;for(;r<=n;){let i=(r+n)/2|0,o=e(i);if(o<0)r=i+1;else if(o>0)n=i-1;else return i}return-(r+1)}function Xt(t){return t.filter(e=>!!e)}function Ere(t,e){let r;if(typeof e=="number"){let n=e;r=()=>{let i=Math.sin(n++)*179426549;return i-Math.floor(i)}}else r=Math.random;for(let n=t.length-1;n>0;n-=1){let i=Math.floor(r()*(n+1)),o=t[n];t[n]=t[i],t[i]=o}}var Tre;(a=>{function t(c){return c<0}a.isLessThan=t;function e(c){return c<=0}a.isLessThanOrEqual=e;function r(c){return c>0}a.isGreaterThan=r;function n(c){return c===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(Tre||={});function pA(t,e){return(r,n)=>e(t(r),t(n))}var fA=(t,e)=>t-e;var xre=class t{constructor(e){this.iterate=e}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||Tre.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function Cre(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}var i7=class{constructor(e,r){this.uri=e;this.value=r}};function DNe(t){return Array.isArray(t)}var NNe,kn=class t{constructor(e,r){this[NNe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(DNe(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{this.defaultToKey=e=>e.toString()}set(e,r){return this.map.set(this.toKey(e),new i7(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(NNe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},LNe,Ire=class{constructor(e,r){this[LNe]="ResourceSet";!e||typeof e=="function"?this._map=new kn(e):(this._map=new kn(r),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(LNe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var ONe,o7=class{constructor(){this[ONe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(ONe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},s7=class extends o7{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},Ol=class extends s7{constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var mA=class{constructor(){this.map=new Map}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var Mu;(y=>{function t(b){return b&&typeof b=="object"&&typeof b[Symbol.iterator]=="function"}y.is=t;let e=Object.freeze([]);function r(){return e}y.empty=r;function*n(b){yield b}y.single=n;function i(b){return t(b)?b:n(b)}y.wrap=i;function o(b){return b||e}y.from=o;function*s(b){for(let x=b.length-1;x>=0;x--)yield b[x]}y.reverse=s;function a(b){return!b||b[Symbol.iterator]().next().done===!0}y.isEmpty=a;function c(b){return b[Symbol.iterator]().next().value}y.first=c;function u(b,x){for(let S of b)if(x(S))return!0;return!1}y.some=u;function l(b,x){for(let S of b)if(x(S))return S}y.find=l;function*d(b,x){for(let S of b)x(S)&&(yield S)}y.filter=d;function*p(b,x){let S=0;for(let T of b)yield x(T,S++)}y.map=p;function*f(...b){for(let x of b)yield*x}y.concat=f;function m(b,x,S){let T=S;for(let L of b)T=x(T,L);return T}y.reduce=m;function*h(b,x,S=b.length){for(x<0&&(x+=b.length),S<0?S+=b.length:S>b.length&&(S=b.length);x<S;x++)yield b[x]}y.slice=h;function g(b,x=Number.POSITIVE_INFINITY){let S=[];if(x===0)return[S,b];let T=b[Symbol.iterator]();for(let L=0;L<x;L++){let M=T.next();if(M.done)return[S,y.empty()];S.push(M.value)}return[S,{[Symbol.iterator](){return T}}]}y.consume=g;async function v(b){let x=[];for await(let S of b)x.push(S);return Promise.resolve(x)}y.asyncToArray=v})(Mu||={});var MNe=!1,$b=null,wre=class t{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let c=new Map,u=[...this.livingDisposables.values()].filter(d=>d.source!==null&&!this.getRootParent(d,c).isSingleton);if(u.length===0)return;let l=new Set(u.map(d=>d.value));if(n=u.filter(d=>!(d.parent&&l.has(d.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(c){function u(d,p){for(;d.length>0&&p.some(f=>typeof f=="string"?f===d[0]:d[0].match(f));)d.shift()}let l=c.source.split(`
`).map(d=>d.trim().replace("at ","")).filter(d=>d!=="");return u(l,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),l.reverse()}let o=new mA;for(let c of n){let u=i(c);for(let l=0;l<=u.length;l++)o.add(u.slice(0,l).join(`
`),c)}n.sort(pA(c=>c.idx,fA));let s="",a=0;for(let c of n.slice(0,e)){a++;let u=i(c),l=[];for(let d=0;d<u.length;d++){let p=u[d];p=`(shared with ${o.get(u.slice(0,d+1).join(`
`)).size}/${n.length} leaks) at ${p}`;let m=o.get(u.slice(0,d).join(`
`)),h=Cre([...m].map(g=>i(g)[d]),g=>g);delete h[u[d]];for(let[g,v]of Object.entries(h))l.unshift(`    - stacktraces of ${v.length} other leaks continue with ${g}`);l.unshift(p)}s+=`


==================== Leaking disposable ${a}/${n.length}: ${c.value.constructor.name} ====================
${l.join(`
`)}
============================================================

`}return n.length>e&&(s+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:s}}};function FNe(t){$b=t}if(MNe){let t="__is_disposable_tracked__";FNe(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==hr.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==hr.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function Kb(t){return $b?.trackDisposable(t),t}function Yb(t){$b?.markAsDisposed(t)}function a7(t,e){$b?.setParent(t,e)}function UNe(t,e){if($b)for(let r of t)$b.setParent(r,e)}function hA(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}function ym(t){if(Mu.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function gA(...t){let e=Ac(()=>ym(t));return UNe(t,e),e}function Ac(t){let e=Kb({dispose:e7(()=>{Yb(e),t()})});return e}var qt=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;Kb(this)}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(Yb(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{ym(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return a7(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),a7(e,null))}},hr=class{constructor(){this._store=new qt;Kb(this),a7(this._store,this)}static{this.None=Object.freeze({dispose(){}})}dispose(){Yb(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Wb=class{constructor(){this._store=new Map;this._isDisposed=!1;Kb(this)}dispose(){Yb(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{ym(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,r,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,r)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var Dn=class t{static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},MT=class{constructor(){this._first=Dn.Undefined;this._last=Dn.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===Dn.Undefined}clear(){let e=this._first;for(;e!==Dn.Undefined;){let r=e.next;e.prev=Dn.Undefined,e.next=Dn.Undefined,e=r}this._first=Dn.Undefined,this._last=Dn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new Dn(e);if(this._first===Dn.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Dn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Dn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Dn.Undefined&&e.next!==Dn.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===Dn.Undefined&&e.next===Dn.Undefined?(this._first=Dn.Undefined,this._last=Dn.Undefined):e.next===Dn.Undefined?(this._last=this._last.prev,this._last.next=Dn.Undefined):e.prev===Dn.Undefined&&(this._first=this._first.next,this._first.prev=Dn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Dn.Undefined;)yield e.element,e=e.next}};var BNe=globalThis.performance&&typeof globalThis.performance.now=="function",Ml=class t{static create(e){return new t(e)}constructor(e){this._now=BNe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var qNe=!1,Rre=!1,HNe=!1,Xb;(X=>{X.None=()=>hr.None;function e(D){if(HNe){let{onDidAddListener:E}=D,A=FT.create(),F=0;D.onDidAddListener=()=>{++F===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),A.print()),E?.()}}}function r(D,E){return p(D,()=>{},0,void 0,!0,void 0,E)}X.defer=r;function n(D){return(E,A=null,F)=>{let O=!1,Z;return Z=D($=>{if(!O)return Z?Z.dispose():O=!0,E.call(A,$)},null,F),O&&Z.dispose(),Z}}X.once=n;function i(D,E,A){return l((F,O=null,Z)=>D($=>F.call(O,E($)),null,Z),A)}X.map=i;function o(D,E,A){return l((F,O=null,Z)=>D($=>{E($),F.call(O,$)},null,Z),A)}X.forEach=o;function s(D,E,A){return l((F,O=null,Z)=>D($=>E($)&&F.call(O,$),null,Z),A)}X.filter=s;function a(D){return D}X.signal=a;function c(...D){return(E,A=null,F)=>{let O=gA(...D.map(Z=>Z($=>E.call(A,$))));return d(O,F)}}X.any=c;function u(D,E,A,F){let O=A;return i(D,Z=>(O=E(O,Z),O),F)}X.reduce=u;function l(D,E){let A,F={onWillAddFirstListener(){A=D(O.fire,O)},onDidRemoveLastListener(){A?.dispose()}};E||e(F);let O=new gr(F);return E?.add(O),O.event}function d(D,E){return E instanceof Array?E.push(D):E&&E.add(D),D}function p(D,E,A=100,F=!1,O=!1,Z,$){let z,se,He,ee=0,ft,ze={leakWarningThreshold:Z,onWillAddFirstListener(){z=D(mr=>{ee++,se=E(se,mr),F&&!He&&(Ct.fire(se),se=void 0),ft=()=>{let me=se;se=void 0,He=void 0,(!F||ee>1)&&Ct.fire(me),ee=0},typeof A=="number"?(clearTimeout(He),He=setTimeout(ft,A)):He===void 0&&(He=0,queueMicrotask(ft))})},onWillRemoveListener(){O&&ee>0&&ft?.()},onDidRemoveLastListener(){ft=void 0,z.dispose()}};$||e(ze);let Ct=new gr(ze);return $?.add(Ct),Ct.event}X.debounce=p;function f(D,E=0,A){return X.debounce(D,(F,O)=>F?(F.push(O),F):[O],E,void 0,!0,void 0,A)}X.accumulate=f;function m(D,E=(F,O)=>F===O,A){let F=!0,O;return s(D,Z=>{let $=F||!E(Z,O);return F=!1,O=Z,$},A)}X.latch=m;function h(D,E,A){return[X.filter(D,E,A),X.filter(D,F=>!E(F),A)]}X.split=h;function g(D,E=!1,A=[],F){let O=A.slice(),Z=D(se=>{O?O.push(se):z.fire(se)});F&&F.add(Z);let $=()=>{O?.forEach(se=>z.fire(se)),O=null},z=new gr({onWillAddFirstListener(){Z||(Z=D(se=>z.fire(se)),F&&F.add(Z))},onDidAddFirstListener(){O&&(E?setTimeout($):$())},onDidRemoveLastListener(){Z&&Z.dispose(),Z=null}});return F&&F.add(z),z.event}X.buffer=g;function v(D,E){return(F,O,Z)=>{let $=E(new b);return D(function(z){let se=$.evaluate(z);se!==y&&F.call(O,se)},void 0,Z)}}X.chain=v;let y=Symbol("HaltChainable");class b{constructor(){this.steps=[]}map(E){return this.steps.push(E),this}forEach(E){return this.steps.push(A=>(E(A),A)),this}filter(E){return this.steps.push(A=>E(A)?A:y),this}reduce(E,A){let F=A;return this.steps.push(O=>(F=E(F,O),F)),this}latch(E=(A,F)=>A===F){let A=!0,F;return this.steps.push(O=>{let Z=A||!E(O,F);return A=!1,F=O,Z?O:y}),this}evaluate(E){for(let A of this.steps)if(E=A(E),E===y)break;return E}}function x(D,E,A=F=>F){let F=(...z)=>$.fire(A(...z)),O=()=>D.on(E,F),Z=()=>D.removeListener(E,F),$=new gr({onWillAddFirstListener:O,onDidRemoveLastListener:Z});return $.event}X.fromNodeEventEmitter=x;function S(D,E,A=F=>F){let F=(...z)=>$.fire(A(...z)),O=()=>D.addEventListener(E,F),Z=()=>D.removeEventListener(E,F),$=new gr({onWillAddFirstListener:O,onDidRemoveLastListener:Z});return $.event}X.fromDOMEventEmitter=S;function T(D){return new Promise(E=>n(D)(E))}X.toPromise=T;function L(D){let E=new gr;return D.then(A=>{E.fire(A)},()=>{E.fire(void 0)}).finally(()=>{E.dispose()}),E.event}X.fromPromise=L;function M(D,E,A){return E(A),D(F=>E(F))}X.runAndSubscribe=M;class j{constructor(E,A){this._observable=E;this._counter=0;this._hasChanged=!1;let F={onWillAddFirstListener:()=>{E.addObserver(this)},onDidRemoveLastListener:()=>{E.removeObserver(this)}};A||e(F),this.emitter=new gr(F),A&&A.add(this.emitter)}beginUpdate(E){this._counter++}handlePossibleChange(E){}handleChange(E,A){this._hasChanged=!0}endUpdate(E){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function N(D,E){return new j(D,E).emitter.event}X.fromObservable=N;function J(D){return(E,A,F)=>{let O=0,Z=!1,$={beginUpdate(){O++},endUpdate(){O--,O===0&&(D.reportChanges(),Z&&(Z=!1,E.call(A)))},handlePossibleChange(){},handleChange(){Z=!0}};D.addObserver($),D.reportChanges();let z={dispose(){D.removeObserver($)}};return F instanceof qt?F.add(z):Array.isArray(F)&&F.push(z),z}}X.fromObservableLight=J})(Xb||={});var u7=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new Ml,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},Are=-1;var l7=class{constructor(e,r=Math.random().toString(18).slice(2,5)){this.threshold=e;this.name=r;this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let o,s=0;for(let[a,c]of this._stacks)(!o||s<c)&&(o=a,s=c);console.warn(`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${s}):`),console.warn(o)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}},FT=class t{constructor(e){this.value=e}static create(){return new t(new Error().stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},GNe=0,Qb=class{constructor(e){this.value=e;this.id=GNe++}},jNe=2,zNe=(t,e)=>{if(t instanceof Qb)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},c7=qNe?new FinalizationRegistry(t=>{typeof t=="string"&&(console.warn("[LEAKING LISTENER] GC'ed a listener that was NOT yet disposed. This is where is was created:"),console.warn(t))}):void 0,gr=class{constructor(e){this._size=0;this._options=e,this._leakageMon=Are>0||this._options?.leakWarningThreshold?new l7(this._options?.leakWarningThreshold??Are):void 0,this._perfMon=this._options?._profName?new u7(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(Rre){let e=this._listeners;queueMicrotask(()=>{zNe(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),hr.None;if(this._disposed)return hr.None;r&&(e=e.bind(r));let i=new Qb(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=FT.create(),o=this._leakageMon.check(i.stack,this._size+1)),Rre&&(i.stack=s??FT.create()),this._listeners?this._listeners instanceof Qb?(this._deliveryQueue??=new d7,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=Ac(()=>{c7?.unregister(a),o?.(),this._removeListener(i)});if(n instanceof qt?n.add(a):Array.isArray(n)&&n.push(a),c7){let c=new Error().stack.split(`
`).slice(2).join(`
`).trim();c7.register(a,c,a)}return a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*jNe<=r.length){let o=0;for(let s=0;s<r.length;s++)r[s]?r[o++]=r[s]:i&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||Vb;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Qb)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var d7=class{constructor(){this.i=-1;this.end=0}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var Pre=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),Vr;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof Jb?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Xb.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Pre})})(Vr||={});var Jb=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Pre:(this._emitter||(this._emitter=new gr),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},UT=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Jb),this._token}cancel(){this._token?this._token instanceof Jb&&this._token.cancel():this._token=Vr.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Jb&&this._token.dispose():this._token=Vr.None}};function VNe(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}function kre(t,e,...r){return VNe(e,r)}var Zb="en",_A=!1,xA=!1,BT=!1,WNe=!1,Nre=!1,p7=!1,KNe=!1,YNe=!1,QNe=!1,XNe=!1,vA,yA=Zb,Dre=Zb,JNe,Tp,Cp=globalThis,rc;typeof Cp.vscode<"u"&&typeof Cp.vscode.process<"u"?rc=Cp.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(rc=process);var Lre=typeof rc?.versions?.electron=="string",ZNe=Lre&&rc?.type==="renderer";if(typeof rc=="object"){_A=rc.platform==="win32",xA=rc.platform==="darwin",BT=rc.platform==="linux",WNe=BT&&!!rc.env.SNAP&&!!rc.env.SNAP_REVISION,KNe=Lre,QNe=!!rc.env.CI||!!rc.env.BUILD_ARTIFACTSTAGINGDIRECTORY,vA=Zb,yA=Zb;let t=rc.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];vA=e.locale,Dre=e.osLocale,yA=r||Zb,JNe=e._translationsConfigFile}catch{}Nre=!0}else typeof navigator=="object"&&!ZNe?(Tp=navigator.userAgent,_A=Tp.indexOf("Windows")>=0,xA=Tp.indexOf("Macintosh")>=0,YNe=(Tp.indexOf("Macintosh")>=0||Tp.indexOf("iPad")>=0||Tp.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,BT=Tp.indexOf("Linux")>=0,XNe=Tp?.indexOf("Mobi")>=0,p7=!0,vA=(kre({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),void 0)||Zb,yA=vA,Dre=navigator.language):console.error("Unable to resolve platform.");var bA=0;xA?bA=1:_A?bA=3:BT&&(bA=2);var Ul=_A,Ore=xA,Mre=BT;var Fre=Nre;var Ure=p7,eLe=p7&&typeof Cp.importScripts=="function",Bre=eLe?Cp.origin:void 0;var qre=bA,Fl=Tp,bm=yA,tLe;(n=>{function t(){return bm}n.value=t;function e(){return bm.length===2?bm==="en":bm.length>=3?bm[0]==="e"&&bm[1]==="n"&&bm[2]==="-":!1}n.isDefaultVariant=e;function r(){return bm==="en"}n.isDefault=r})(tLe||={});var rLe=typeof Cp.postMessage=="function"&&!Cp.importScripts,Hre=(()=>{if(rLe){let t=[];Cp.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),Cp.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var nLe=!!(Fl&&Fl.indexOf("Chrome")>=0),Qlt=!!(Fl&&Fl.indexOf("Firefox")>=0),Xlt=!!(!nLe&&Fl&&Fl.indexOf("Safari")>=0),Jlt=!!(Fl&&Fl.indexOf("Edg/")>=0),Zlt=!!(Fl&&Fl.indexOf("Android")>=0);var H0,f7=globalThis.vscode;if(typeof f7<"u"&&typeof f7.process<"u"){let t=f7.process;H0={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?H0={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:H0={get platform(){return Ul?"win32":Ore?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var qT=H0.cwd,Gre=H0.env,jre=H0.platform,rdt=H0.arch;var sLe=65,aLe=97,cLe=90,uLe=122,Sm=46,Eo=47,ba=92,_m=58,lLe=63,SA=class extends Error{constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${o} ${i} of type ${r}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function dLe(t,e){if(t===null||typeof t!="object")throw new SA(e,"Object",t)}function fi(t,e){if(typeof t!="string")throw new SA(e,"string",t)}var _a=jre==="win32";function zt(t){return t===Eo||t===ba}function m7(t){return t===Eo}function xm(t){return t>=sLe&&t<=cLe||t>=aLe&&t<=uLe}function EA(t,e,r,n){let i="",o=0,s=-1,a=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=Eo}if(n(c)){if(!(s===u-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Sm||i.charCodeAt(i.length-2)!==Sm){if(i.length>2){let l=i.lastIndexOf(r);l===-1?(i="",o=0):(i=i.slice(0,l),o=i.length-1-i.lastIndexOf(r)),s=u,a=0;continue}else if(i.length!==0){i="",o=0,s=u,a=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(s+1,u)}`:i=t.slice(s+1,u),o=u-s-1;s=u,a=0}else c===Sm&&a!==-1?++a:a=-1}return i}function zre(t,e){dLe(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}var mi={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],fi(o,"path"),o.length===0)continue}else e.length===0?o=qT():(o=Gre[`=${e}`]||qT(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===ba)&&(o=`${e}\\`));let s=o.length,a=0,c="",u=!1,l=o.charCodeAt(0);if(s===1)zt(l)&&(a=1,u=!0);else if(zt(l))if(u=!0,zt(o.charCodeAt(1))){let d=2,p=d;for(;d<s&&!zt(o.charCodeAt(d));)d++;if(d<s&&d!==p){let f=o.slice(p,d);for(p=d;d<s&&zt(o.charCodeAt(d));)d++;if(d<s&&d!==p){for(p=d;d<s&&!zt(o.charCodeAt(d));)d++;(d===s||d!==p)&&(c=`\\\\${f}\\${o.slice(p,d)}`,a=d)}}}else a=1;else xm(l)&&o.charCodeAt(1)===_m&&(c=o.slice(0,2),a=2,s>2&&zt(o.charCodeAt(2))&&(u=!0,a=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(a)}\\${r}`,n=u,u&&e.length>0)break}return r=EA(r,!n,"\\",zt),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){fi(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return m7(o)?"\\":t;if(zt(o))if(i=!0,zt(t.charCodeAt(1))){let a=2,c=a;for(;a<e&&!zt(t.charCodeAt(a));)a++;if(a<e&&a!==c){let u=t.slice(c,a);for(c=a;a<e&&zt(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&!zt(t.charCodeAt(a));)a++;if(a===e)return`\\\\${u}\\${t.slice(c)}\\`;a!==c&&(n=`\\\\${u}\\${t.slice(c,a)}`,r=a)}}}else r=1;else xm(o)&&t.charCodeAt(1)===_m&&(n=t.slice(0,2),r=2,e>2&&zt(t.charCodeAt(2))&&(i=!0,r=3));let s=r<e?EA(t.slice(r),!i,"\\",zt):"";return s.length===0&&!i&&(s="."),s.length>0&&zt(t.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(t){fi(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return zt(r)||e>2&&xm(r)&&t.charCodeAt(1)===_m&&zt(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let s=t[o];fi(s,"path"),s.length>0&&(e===void 0?e=r=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&zt(r.charCodeAt(0))){++i;let o=r.length;o>1&&zt(r.charCodeAt(1))&&(++i,o>2&&(zt(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&zt(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return mi.normalize(e)},relative(t,e){if(fi(t,"from"),fi(e,"to"),t===e)return"";let r=mi.resolve(t),n=mi.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===ba;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===ba;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===ba;)a++;let c=e.length;for(;c-1>a&&e.charCodeAt(c-1)===ba;)c--;let u=c-a,l=s<u?s:u,d=-1,p=0;for(;p<l;p++){let m=t.charCodeAt(i+p);if(m!==e.charCodeAt(a+p))break;m===ba&&(d=p)}if(p!==l){if(d===-1)return n}else{if(u>l){if(e.charCodeAt(a+p)===ba)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}s>l&&(t.charCodeAt(i+p)===ba?d=p:p===2&&(d=3)),d===-1&&(d=0)}let f="";for(p=i+d+1;p<=o;++p)(p===o||t.charCodeAt(p)===ba)&&(f+=f.length===0?"..":"\\..");return a+=d,f.length>0?`${f}${n.slice(a,c)}`:(n.charCodeAt(a)===ba&&++a,n.slice(a,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=mi.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===ba){if(e.charCodeAt(1)===ba){let r=e.charCodeAt(2);if(r!==lLe&&r!==Sm)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(xm(e.charCodeAt(0))&&e.charCodeAt(1)===_m&&e.charCodeAt(2)===ba)return`\\\\?\\${e}`;return t},dirname(t){fi(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return zt(i)?t:".";if(zt(i)){if(r=n=1,zt(t.charCodeAt(1))){let a=2,c=a;for(;a<e&&!zt(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&zt(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&!zt(t.charCodeAt(a));)a++;if(a===e)return t;a!==c&&(r=n=a+1)}}}}else xm(i)&&t.charCodeAt(1)===_m&&(r=e>2&&zt(t.charCodeAt(2))?3:2,n=r);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(zt(t.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&fi(e,"ext"),fi(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&xm(t.charCodeAt(0))&&t.charCodeAt(1)===_m&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(zt(c)){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(c===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(zt(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){fi(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,s=0;t.length>=2&&t.charCodeAt(1)===_m&&xm(t.charCodeAt(0))&&(e=n=2);for(let a=t.length-1;a>=e;--a){let c=t.charCodeAt(a);if(zt(c)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),c===Sm?r===-1?r=a:s!==1&&(s=1):r!==-1&&(s=-1)}return r===-1||i===-1||s===0||s===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:zre.bind(null,"\\"),parse(t){fi(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return zt(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(zt(i)){if(n=1,zt(t.charCodeAt(1))){let d=2,p=d;for(;d<r&&!zt(t.charCodeAt(d));)d++;if(d<r&&d!==p){for(p=d;d<r&&zt(t.charCodeAt(d));)d++;if(d<r&&d!==p){for(p=d;d<r&&!zt(t.charCodeAt(d));)d++;d===r?n=d:d!==p&&(n=d+1)}}}}else if(xm(i)&&t.charCodeAt(1)===_m){if(r<=2)return e.root=e.dir=t,e;if(n=2,zt(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,s=n,a=-1,c=!0,u=t.length-1,l=0;for(;u>=n;--u){if(i=t.charCodeAt(u),zt(i)){if(!c){s=u+1;break}continue}a===-1&&(c=!1,a=u+1),i===Sm?o===-1?o=u:l!==1&&(l=1):o!==-1&&(l=-1)}return a!==-1&&(o===-1||l===0||l===1&&o===a-1&&o===s+1?e.base=e.name=t.slice(s,a):(e.name=t.slice(s,o),e.base=t.slice(s,a),e.ext=t.slice(o,a))),s>0&&s!==n?e.dir=t.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},pLe=(()=>{if(_a){let t=/\\/g;return()=>{let e=qT().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>qT()})(),ur={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:pLe();fi(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Eo)}return e=EA(e,!r,"/",m7),r?`/${e}`:e.length>0?e:"."},normalize(t){if(fi(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Eo,r=t.charCodeAt(t.length-1)===Eo;return t=EA(t,!e,"/",m7),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return fi(t,"path"),t.length>0&&t.charCodeAt(0)===Eo},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];fi(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ur.normalize(e)},relative(t,e){if(fi(t,"from"),fi(e,"to"),t===e||(t=ur.resolve(t),e=ur.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,s=e.length-o,a=i<s?i:s,c=-1,u=0;for(;u<a;u++){let d=t.charCodeAt(r+u);if(d!==e.charCodeAt(o+u))break;d===Eo&&(c=u)}if(u===a)if(s>a){if(e.charCodeAt(o+u)===Eo)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>a&&(t.charCodeAt(r+u)===Eo?c=u:u===0&&(c=0));let l="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===Eo)&&(l+=l.length===0?"..":"/..");return`${l}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(fi(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Eo,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Eo){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&fi(e,"ext"),fi(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Eo){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(c===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Eo){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){fi(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let s=t.length-1;s>=0;--s){let a=t.charCodeAt(s);if(a===Eo){if(!i){r=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===Sm?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:zre.bind(null,"/"),parse(t){fi(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Eo,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,c=t.length-1,u=0;for(;c>=n;--c){let l=t.charCodeAt(c);if(l===Eo){if(!a){o=c+1;break}continue}s===-1&&(a=!1,s=c+1),l===Sm?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(s!==-1){let l=o===0&&r?1:o;i===-1||u===0||u===1&&i===s-1&&i===o+1?e.base=e.name=t.slice(l,s):(e.name=t.slice(l,i),e.base=t.slice(l,s),e.ext=t.slice(i,s))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ur.win32=mi.win32=mi;ur.posix=mi.posix=ur;var h7=_a?mi.normalize:ur.normalize,fLe=_a?mi.isAbsolute:ur.isAbsolute,mLe=_a?mi.join:ur.join,Vre=_a?mi.resolve:ur.resolve,$re=_a?mi.relative:ur.relative,Wre=_a?mi.dirname:ur.dirname,TA=_a?mi.basename:ur.basename,ndt=_a?mi.extname:ur.extname,idt=_a?mi.format:ur.format,odt=_a?mi.parse:ur.parse,sdt=_a?mi.toNamespacedPath:ur.toNamespacedPath,e_=_a?mi.sep:ur.sep,adt=_a?mi.delimiter:ur.delimiter;function hLe(t){return t}var IA=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=hLe):(this._fn=r,this._computeKey=e.getCacheKey)}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}};var zo=class{constructor(e){this.executor=e;this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function G0(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function t_(t,e){let r=0,n=t.indexOf(e);for(;n!==-1;)r++,n=t.indexOf(e,n+e.length);return r}function wA(t){return t.split(/\r\n|\r|\n/)}function Jre(t){for(let e=0,r=t.length;e<r;e++){let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function RA(t,e,r){let n=[],i=0;for(let o of t.matchAll(e)){if(n.push(t.slice(i,o.index)),o.index===void 0)throw new Error("match.index should be defined");i=o.index+o[0].length,n.push(r(o[0],...o.slice(1),o.index,t,o.groups))}return n.push(t.slice(i)),Promise.all(n).then(o=>o.join(""))}function Zre(t,e){return t<e?-1:t>e?1:0}function vLe(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let c=t.charCodeAt(r),u=e.charCodeAt(i);if(c<u)return-1;if(c>u)return 1}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function ene(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let c=t.charCodeAt(r),u=e.charCodeAt(i);if(c===u)continue;if(c>=128||u>=128)return vLe(t.toLowerCase(),e.toLowerCase(),r,n,i,o);Kre(c)&&(c-=32),Kre(u)&&(u-=32);let l=c-u;if(l!==0)return l}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function Kre(t){return t>=97&&t<=122}function AA(t,e){return t.length===e.length&&ene(t,e)===0}function HT(t,e){let r=e.length;return e.length>t.length?!1:ene(t,e,0,r)===0}function PA(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}function tne(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}var vdt=String.fromCharCode(65279);var Yre=class t{static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=yLe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function yLe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var Qre=class t{constructor(e){this.confusableDictionary=e}static{this.ambiguousCharacterData=new zo(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new IA({getCacheKey:JSON.stringify},e=>{function r(l){let d=new Map;for(let p=0;p<l.length;p+=2)d.set(l[p],l[p+1]);return d}function n(l,d){let p=new Map(l);for(let[f,m]of d)p.set(f,m);return p}function i(l,d){if(!l)return d;let p=new Map;for(let[f,m]of l)d.has(f)&&p.set(f,m);return p}let o=this.ambiguousCharacterData.value,s=e.filter(l=>!l.startsWith("_")&&l in o);s.length===0&&(s=["_default"]);let a;for(let l of s){let d=r(o[l]);a=i(a,d)}let c=r(o._common),u=n(c,a);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new zo(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},Xre=class t{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static get codePoints(){return t.getData()}};function GT(t){return typeof t=="string"}function kA(t){return Array.isArray(t)&&t.every(e=>GT(e))}function g7(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}function r_(t){return typeof t=="number"&&!isNaN(t)}function bLe(t){return typeof t>"u"}function n_(t){return!_Le(t)}function _Le(t){return bLe(t)||t===null}function DA(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Tm(t){return t===47||t===92}function Ip(t){return t.replace(/[\\/]/g,ur.sep)}function nne(t){return t.indexOf("/")===-1&&(t=Ip(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}function v7(t,e=ur.sep){if(!t)return"";let r=t.length,n=t.charCodeAt(0);if(Tm(n)){if(Tm(t.charCodeAt(1))&&!Tm(t.charCodeAt(2))){let o=3,s=o;for(;o<r&&!Tm(t.charCodeAt(o));o++);if(s!==o&&!Tm(t.charCodeAt(o+1))){for(o+=1;o<r;o++)if(Tm(t.charCodeAt(o)))return t.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(SLe(n)&&t.charCodeAt(1)===58)return Tm(t.charCodeAt(2))?t.slice(0,2)+e:t.slice(0,2);let i=t.indexOf("://");if(i!==-1){for(i+=3;i<r;i++)if(Tm(t.charCodeAt(i)))return t.slice(0,i+1)}return""}function y7(t,e,r,n=e_){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!HT(t,e))return!1;if(e.length===t.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,t.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}function SLe(t){return t>=65&&t<=90||t>=97&&t<=122}var TLe=/^\w[\w\d+.-]*$/,CLe=/^\//,ILe=/^\/\//;function wLe(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!TLe.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!CLe.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(ILe.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function RLe(t,e){return!t&&!e?"file":t}function ALe(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Fu&&(e=Fu+e):e=Fu;break}return e}var dn="",Fu="/",PLe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,ut=class t{static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||dn,this.authority=e.authority||dn,this.path=e.path||dn,this.query=e.query||dn,this.fragment=e.fragment||dn):(this.scheme=RLe(e,s),this.authority=r||dn,this.path=ALe(this.scheme,n||dn),this.query=i||dn,this.fragment=o||dn,wLe(this,s))}get fsPath(){return jT(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:s}=e;return r===void 0?r=this.scheme:r===null&&(r=dn),n===void 0?n=this.authority:n===null&&(n=dn),i===void 0?i=this.path:i===null&&(i=dn),o===void 0?o=this.query:o===null&&(o=dn),s===void 0?s=this.fragment:s===null&&(s=dn),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new Cm(r,n,i,o,s)}static parse(e,r=!1){let n=PLe.exec(e);return n?new Cm(n[2]||dn,NA(n[4]||dn),NA(n[5]||dn),NA(n[7]||dn),NA(n[9]||dn),r):new Cm(dn,dn,dn,dn,dn)}static file(e){let r=dn;if(Ul&&(e=e.replace(/\\/g,Fu)),e[0]===Fu&&e[1]===Fu){let n=e.indexOf(Fu,2);n===-1?(r=e.substring(2),e=Fu):(r=e.substring(2,n),e=e.substring(n)||Fu)}return new Cm("file",r,e,dn,dn)}static from(e,r){return new Cm(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Ul&&e.scheme==="file"?n=t.file(mi.join(jT(e,!0),...r)).path:n=ur.join(e.path,...r),e.with({path:n})}toString(e=!1){return b7(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Cm(e);return r._formatted=e.external??null,r._fsPath=e._sep===sne?e.fsPath??null:null,r}}else return e}};function j0(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}var sne=Ul?1:void 0,Cm=class extends ut{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=jT(this,!1)),this._fsPath}toString(r=!1){return r?b7(this,!0):(this._formatted||(this._formatted=b7(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=sne),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},ane={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function ine(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||r&&s===91||r&&s===93||r&&s===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let a=ane[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}function kLe(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=ane[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}function jT(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Ul&&(r=r.replace(/\//g,"\\")),r}function b7(t,e){let r=e?kLe:ine,n="",{scheme:i,authority:o,path:s,query:a,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Fu,n+=Fu),o){let u=o.indexOf("@");if(u!==-1){let l=o.substr(0,u);o=o.substr(u+1),u=l.lastIndexOf(":"),u===-1?n+=r(l,!1,!1):(n+=r(l.substr(0,u),!1,!1),n+=":",n+=r(l.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let u=s.charCodeAt(1);u>=65&&u<=90&&(s=`/${String.fromCharCode(u+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let u=s.charCodeAt(0);u>=65&&u<=90&&(s=`${String.fromCharCode(u+32)}:${s.substr(2)}`)}n+=r(s,!0,!1)}return a&&(n+="?",n+=r(a,!1,!1)),c&&(n+="#",n+=e?c:ine(c,!1,!1)),n}function cne(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+cne(t.substr(3)):t}}var one=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function NA(t){return t.match(one)?t.replace(one,e=>cne(e)):t}var Zr;(z=>(z.inMemory="inmemory",z.vscode="vscode",z.internal="private",z.walkThrough="walkThrough",z.walkThroughSnippet="walkThroughSnippet",z.http="http",z.https="https",z.file="file",z.mailto="mailto",z.untitled="untitled",z.data="data",z.command="command",z.vscodeRemote="vscode-remote",z.vscodeRemoteResource="vscode-remote-resource",z.vscodeManagedRemoteResource="vscode-managed-remote-resource",z.vscodeUserData="vscode-userdata",z.vscodeCustomEditor="vscode-custom-editor",z.vscodeNotebookCell="vscode-notebook-cell",z.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",z.vscodeNotebookCellOutput="vscode-notebook-cell-output",z.vscodeInteractiveInput="vscode-interactive-input",z.vscodeSettings="vscode-settings",z.vscodeWorkspaceTrust="vscode-workspace-trust",z.vscodeTerminal="vscode-terminal",z.vscodeChatCodeBlock="vscode-chat-code-block",z.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",z.vscodeChatSesssion="vscode-chat-editor",z.webviewPanel="webview-panel",z.vscodeWebview="vscode-webview",z.extension="extension",z.vscodeFileResource="vscode-file",z.tmp="tmp",z.vsls="vsls",z.vscodeSourceControl="vscode-scm",z.commentsInput="comment",z.codeSetting="code-setting"))(Zr||={});var DLe="tkn",_7=class{constructor(){this._hosts=Object.create(null);this._ports=Object.create(null);this._connectionTokens=Object.create(null);this._preferredWebSchema="http";this._delegate=null;this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,r){this._serverRootPath=LLe(e,r)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return ur.join(this._serverRootPath,Zr.vscodeRemoteResource)}set(e,r,n){this._hosts[e]=r,this._ports[e]=n}setConnectionToken(e,r){this._connectionTokens[e]=r}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Vb(a),e}let r=e.authority,n=this._hosts[r];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[r],o=this._connectionTokens[r],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${DLe}=${encodeURIComponent(o)}`),ut.from({scheme:Ure?this._preferredWebSchema:Zr.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},NLe=new _7;function LLe(t,e){return ur.join(e??"/",`${t.quality??"oss"}-${t.commit??"dev"}`)}var OLe="vscode-app",x7=class t{static{this.FALLBACK_AUTHORITY=OLe}asBrowserUri(e){let r=this.toUri(e,require);return this.uriToBrowserUri(r)}uriToBrowserUri(e){return e.scheme===Zr.vscodeRemote?NLe.rewrite(e):e.scheme===Zr.file&&(Fre||Bre===`${Zr.vscodeFileResource}://${t.FALLBACK_AUTHORITY}`)?e.with({scheme:Zr.vscodeFileResource,authority:e.authority||t.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let r=this.toUri(e,require);return this.uriToFileUri(r)}uriToFileUri(e){return e.scheme===Zr.vscodeFileResource?e.with({scheme:Zr.file,authority:e.authority!==t.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,r){return ut.isUri(e)?e:ut.parse(r.toUrl(e))}},Ddt=new x7,MLe;(o=>{let t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(t.get("3"));let r="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:ut.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let c=a?.get(r);if(c)return t.get(c)}o.getHeadersFromQuery=n;function i(s,a,c){if(!globalThis.crossOriginIsolated)return;let u=a&&c?"3":c?"2":"1";s instanceof URLSearchParams?s.set(r,u):s[r]=u}o.addSearchParam=i})(MLe||={});function wp(t){return jT(t,!0)}var zT=class{constructor(e){this._ignorePathCasing=e}compare(e,r,n=!1){return e===r?0:Zre(this.getComparisonKey(e,n),this.getComparisonKey(r,n))}isEqual(e,r,n=!1){return e===r?!0:!e||!r?!1:this.getComparisonKey(e,n)===this.getComparisonKey(r,n)}getComparisonKey(e,r=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,r,n=!1){if(e.scheme===r.scheme){if(e.scheme===Zr.file)return y7(wp(e),wp(r),this._ignorePathCasing(e))&&e.query===r.query&&(n||e.fragment===r.fragment);if(une(e.authority,r.authority))return y7(e.path,r.path,this._ignorePathCasing(e),"/")&&e.query===r.query&&(n||e.fragment===r.fragment)}return!1}joinPath(e,...r){return ut.joinPath(e,...r)}basenameOrAuthority(e){return Pc(e)||e.authority}basename(e){return ur.basename(e.path)}extname(e){return ur.extname(e.path)}dirname(e){if(e.path.length===0)return e;let r;return e.scheme===Zr.file?r=ut.file(Wre(wp(e))).path:(r=ur.dirname(e.path),e.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),r="/")),e.with({path:r})}normalizePath(e){if(!e.path.length)return e;let r;return e.scheme===Zr.file?r=ut.file(h7(wp(e))).path:r=ur.normalize(e.path),e.with({path:r})}relativePath(e,r){if(e.scheme!==r.scheme||!une(e.authority,r.authority))return;if(e.scheme===Zr.file){let o=$re(wp(e),wp(r));return Ul?Ip(o):o}let n=e.path||"/",i=r.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(n.length,i.length);o<s&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return ur.relative(n,i)}resolvePath(e,r){if(e.scheme===Zr.file){let n=ut.file(Vre(wp(e),r));return e.with({authority:n.authority,path:n.path})}return r=nne(r),e.with({path:ur.resolve(e.path,r)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,r){return e===r||e!==void 0&&r!==void 0&&AA(e,r)}hasTrailingPathSeparator(e,r=e_){if(e.scheme===Zr.file){let n=wp(e);return n.length>v7(n).length&&n[n.length-1]===r}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,r=e_){return lne(e,r)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,r=e_){let n=!1;if(e.scheme===Zr.file){let i=wp(e);n=i!==void 0&&i.length===v7(i).length&&i[i.length-1]===r}else{r="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!lne(e,r)?e.with({path:e.path+"/"}):e}},Rr=new zT(()=>!1),Bdt=new zT(t=>t.scheme===Zr.file?!Mre:!0),qdt=new zT(t=>!0),S7=Rr.isEqual.bind(Rr),Hdt=Rr.isEqualOrParent.bind(Rr),Gdt=Rr.getComparisonKey.bind(Rr),jdt=Rr.basenameOrAuthority.bind(Rr),Pc=Rr.basename.bind(Rr),nc=Rr.extname.bind(Rr),zdt=Rr.dirname.bind(Rr),Vdt=Rr.joinPath.bind(Rr),$dt=Rr.normalizePath.bind(Rr),dne=Rr.relativePath.bind(Rr),Wdt=Rr.resolvePath.bind(Rr),Kdt=Rr.isAbsolutePath.bind(Rr),une=Rr.isEqualAuthority.bind(Rr),lne=Rr.hasTrailingPathSeparator.bind(Rr),Ydt=Rr.removeTrailingPathSeparator.bind(Rr),Qdt=Rr.addTrailingPathSeparator.bind(Rr);var FLe;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(l=>{let[d,p]=l.split(":");d&&p&&a.set(d,p)});let u=s.path.substring(0,s.path.indexOf(";"));return u&&a.set(o.META_DATA_MIME,u),a}o.parseMetaData=i})(FLe||={});var fne=Symbol("MicrotaskDelay");function mne(t){let e=new UT,r=t(e.token),n=new Promise((i,o)=>{let s=e.token.onCancellationRequested(()=>{s.dispose(),o(new ys)});Promise.resolve(r).then(a=>{s.dispose(),e.dispose(),i(a)},a=>{s.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function Im(t,e,r){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(r)});t.then(n,i).finally(()=>o.dispose())})}function V0(t,e,r){let n,i=setTimeout(()=>{n?.(void 0),r?.()},e);return Promise.race([t.finally(()=>clearTimeout(i)),new Promise(o=>n=o)])}var E7=class{constructor(){this.isDisposed=!1;this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let r=()=>{if(this.queuedPromise=null,this.isDisposed)return;let n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(r,r).then(n)})}return new Promise((r,n)=>{this.queuedPromise.then(r,n)})}return this.activePromise=e(),new Promise((r,n)=>{this.activePromise.then(i=>{this.activePromise=null,r(i)},i=>{this.activePromise=null,n(i)})})}dispose(){this.isDisposed=!0}};var ULe=(t,e)=>{let r=!0,n=setTimeout(()=>{r=!1,e()},t);return{isTriggered:()=>r,dispose:()=>{clearTimeout(n),r=!1}}},BLe=t=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,t())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},T7=class{constructor(e){this.defaultDelay=e;this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,r=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,o)=>{this.doResolve=i,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let i=this.task;return this.task=null,i()}}));let n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=r===fne?BLe(n):ULe(r,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new ys),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}},OA=class{constructor(e){this.delayer=new T7(e),this.throttler=new E7}trigger(e,r){return this.delayer.trigger(()=>this.throttler.queue(e),r)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}};var i_=class{constructor(e){this._size=0;this._isDisposed=!1;this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new gr}whenIdle(){return this.size>0?Xb.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((r,n)=>{this.outstandingPromises.push({factory:e,c:r,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}};var MA=class{constructor(e,r){this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}},FA=class{constructor(){this.disposable=void 0}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,r,n=globalThis){this.cancel();let i=n.setInterval(()=>{e()},r);this.disposable=Ac(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel()}};var qLe,LA;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?LA=(t,e)=>{Hre(()=>{if(r)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:LA=(t,e,r)=>{let n=t.requestIdleCallback(e,typeof r=="number"?{timeout:r}:void 0),i=!1;return{dispose(){i||(i=!0,t.cancelIdleCallback(n))}}},qLe=t=>LA(globalThis,t)})();var C7=class{constructor(e,r){this._didRun=!1;this._executor=()=>{try{this._value=r()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=LA(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},UA=class extends C7{constructor(e){super(globalThis,e)}};var Rp=class{get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new ys)}},HLe;(r=>{async function t(n){let i,o=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}r.settled=t;function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(s){o(s)}})}r.withAsyncBody=e})(HLe||={});var Uu=class t{static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromises(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new gr,queueMicrotask(async()=>{let n={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Xb.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var z0=class{constructor(e){this._deferred=new Rp;this._asyncIterable=new Uu(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var Ot=class{constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};var I7=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}},VT=class{constructor(e){this._hashFn=e;this._nodes=new Map}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new I7(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};var $0=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var GLe=!1,BA=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},qA=class t{constructor(e=new $0,r=!1,n,i=GLe){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(zi,this),this._globalGraph=i?n?._globalGraph??new VT(o=>o):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,ym(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)hA(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e){this._throwIfDisposed();let r=new class extends t{dispose(){this._children.delete(r),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(r),r}invokeFunction(e,...r){this._throwIfDisposed();let n=$T.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s=>{if(i)throw vre("service accessor is only valid during the invocation of its target method");let a=this._getOrCreateServiceInstance(s,n);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a}},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof Ot?(n=$T.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=$T.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=Ou.getServiceDependencies(e).sort((a,c)=>a.index-c.index),o=[];for(let a of i){let c=this._getOrCreateServiceInstance(a.id,n);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(c)}let s=i.length>0?i[0].index:r.length;if(r.length!==s){console.trace(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${r.length} static arguments`);let a=s-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,s)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof Ot)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Ot?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new VT(a=>a.id.toString()),o=0,s=[{id:e,desc:r,_trace:n}];for(;s.length;){let a=s.pop();if(i.lookupOrInsertNode(a),o++>1e3)throw new BA(i);for(let c of Ou.getServiceDependencies(a.desc.ctor)){let u=this._getServiceInstanceOrDescriptor(c.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(a.id),String(c.id)),u instanceof Ot){let l={id:c.id,desc:u,_trace:a._trace.branch(c.id,!0)};i.insertEdge(a,l),s.push(l)}}}for(;;){let a=i.roots();if(a.length===0){if(!i.isEmpty())throw new BA(i);break}for(let{data:c}of a){if(this._getServiceInstanceOrDescriptor(c.id)instanceof Ot){let l=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setCreatedServiceInstance(c.id,l)}i.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof Ot)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,s){if(i){let a=new t(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);let c=new Map,u=new UA(()=>{let l=a._createInstance(r,n,o);for(let[d,p]of c){let f=l[d];if(typeof f=="function")for(let m of p)m.disposable=f.apply(l,m.listener)}return c.clear(),s.add(l),l});return new Proxy(Object.create(null),{get(l,d){if(!u.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let m=c.get(d);return m||(m=new MT,c.set(d,m)),(g,v,y)=>{if(u.isInitialized)return u.value[d](g,v,y);{let b={listener:[g,v,y],disposable:void 0},x=m.push(b);return Ac(()=>{x(),b.disposable?.dispose()})}}}if(d in l)return l[d];let p=u.value,f=p[d];return typeof f!="function"||(f=f.bind(p),l[d]=f),f},set(l,d,p){return u.value[d]=p,!0},getPrototypeOf(l){return r.prototype}})}else{let a=this._createInstance(r,n,o);return s.add(a),a}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var $T=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,s){let a=[],c=new Array(o+1).join("	");for(let[u,l,d]of s._dep)if(l&&d){r=!0,a.push(`${c}CREATES -> ${u}`);let p=n(o+1,d);p&&a.push(p)}else a.push(`${c}uses -> ${u}`);return a.join(`
`)}let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var ct=oe("IServicesAccessor"),HA=class{constructor(e,r){this._isSealed=!1;let n=Array.isArray(e)?new $0(...e):e??new $0;n.set(ct,this);let i=r?r._pair.insta.createChild(n):new qA(n,!0);this._pair={services:n,insta:i}}dispose(){this._pair.insta.dispose()}get(e){return this._pair.insta.invokeFunction(r=>r.get(e))}safeGet(e){try{return this.get(e)}catch{return}}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._pair.services.set(e,r)}defineIfNotDefined(e,r){this.safeGet(e)===void 0&&this.define(e,r())}seal(){this._isSealed=!0}toString(){return""}};var xa=require("../package.json"),GA=xa.buildType!=="dev",Ap=xa.isPreRelease||!GA,Fpt=xa.engines.vscode;var WT=class{constructor(e,r){this.name=e;this.version=r}format(){return`${this.name}/${this.version}`}},St=oe("IEnvService");var mt=(n=>(n[n.InlineChat=1]="InlineChat",n[n.PanelChat=2]="PanelChat",n[n.Other=3]="Other",n))(mt||{});(e=>{function t(r){switch(r){case 1:return"conversationInline";case 2:return"conversationPanel";default:return"none"}}e.toString=t})(mt||={});var wm="github.copilot",ke=oe("IConfigurationService"),zA=class{getConfigMixedWithDefaults(e){let r=this.getConfig(e);return r===void 0?e.defaultValue:g7(r)&&g7(e.defaultValue)?{...e.defaultValue,...r}:r}},jA;function jLe(){if(!jA){jA=new Map;let t=xa.contributes.configuration.properties;for(let e of Object.keys(t))typeof t[e].default<"u"&&jA.set(e,t[e].default)}return jA}function bt(t,e){let r=jLe().get(`${wm}.${t}`);if(typeof r<"u"&&e!==r)throw new Error(`The default value for setting ${t} is different in package.json and in code`);let n=t.indexOf("."),i=t.substring(0,n);if(i!=="editor"&&i!=="chat"&&i!=="advanced"&&i!=="notebook"&&i!=="renameSuggestions")throw new Error(`Unexpected setting section ${i} in setting ${t}`);let o=t.substring(n+1);return{id:t,firstPart:i,secondPart:o,defaultValue:e}}var Ae={EnableCodeActions:bt("editor.enableCodeActions",!0),LocaleOverride:bt("chat.localeOverride","auto"),WelcomeMessage:bt("chat.welcomeMessage","first"),TerminalChatLocation:bt("chat.terminalChatLocation","chatView"),AuthProvider:bt("advanced.authProvider","github"),NotebookIterativeImproving:bt("notebook.iterativeImproving",!1),AutomaticRenameSuggestions:bt("renameSuggestions.triggerAutomatically",!0),DebugOverrideProxyUrl:bt("advanced.debug.overrideProxyUrl",""),DebugChatOverrideProxyUrl:bt("advanced.debug.chatOverrideProxyUrl",""),DebugTestOverrideProxyUrl:bt("advanced.debug.testOverrideProxyUrl",""),DebugOverrideCAPIUrl:bt("advanced.debug.overrideCAPIUrl",""),DebugOverrideEngine:bt("advanced.debug.overrideEngine",""),DebugOverrideChatEngine:bt("advanced.debug.overrideChatEngine",void 0),DebugOverrideEmbeddingsModel:bt("advanced.debug.overrideEmbeddingsModel",void 0),DebugOverrideChatMaxTokenNum:bt("advanced.debug.overrideChatMaxTokenNum",0),DebugOverrideChatOffTopicModel:bt("advanced.debug.overrideChatOffTopicModel",""),DebugOverrideChatOffTopicModelTokenizer:bt("advanced.debug.overrideChatOffTopicModelTokenizer",""),DebugOverrideChatOffTopicModelThreshold:bt("advanced.debug.overrideChatOffTopicModelThreshold",0),DebugOverrideLogLevels:bt("advanced.debug.overrideLogLevels",{}),DebugFilterLogCategories:bt("advanced.debug.filterLogCategories",[]),DebugReportFeedback:bt("advanced.debug.reportFeedback",!1),DebugUseNodeFetcher:bt("advanced.debug.useNodeFetcher",!1),DebugUseElectronFetcher:bt("advanced.debug.useElectronFetcher",!1),ConversationSlashCommandEnablements:bt("advanced.slashCommands",{"*":!1}),ConversationVariablesEnablements:bt("advanced.variables",{"*":Ap}),ConversationAdditionalPromptContext:bt("advanced.conversationAdditionalPromptContext","firstTurn"),ConversationLoggingEnabled:bt("advanced.conversationLoggingEnabled",!1),ConversationIntentDetection:bt("advanced.conversationIntentDetection",!1),KerberosServicePrincipal:bt("advanced.kerberosServicePrincipal",void 0),AgentsEndpointUrl:bt("advanced.agentsEndpointUrl","https://api.githubcopilot.com"),ExplainIntentRefer:bt("advanced.explain.refer",!0),FixUseGPT4InInlineChat:bt("advanced.fix.useGPT4InInlineChat",!1),FixUseWorkspaceChunksFromSelection:bt("advanced.fix.useWorkspaceChunksFromSelection",!1),FixUseWorkspaceChunksFromDiagnostics:bt("advanced.fix.useWorkspaceChunksFromDiagnostics",!1),GPT4TurboExperimentEnabled:bt("advanced.gpt4TurboExperimentEnabled",!1),WorkspaceNewFlowEnabled:bt("advanced.workspace.useNewFlow",!0),WorkspaceCodeSearchEnabled:bt("advanced.workspace.codeSearchEnabled",void 0),WorkspaceUseAdaEnabled:bt("advanced.workspace.useAda",void 0),WorkspaceRerankStrategy:bt("advanced.workspace.rerankStrategy",void 0),WorkspaceCodeSearchReturnRawChunks:bt("advanced.workspace.codeSearchReturnRawChunks",void 0),WorkspaceUseFilesVariable:bt("advanced.workspace.useFilesVariable",!1),UseProjectTemplates:bt("chat.useProjectTemplates",!0),ExplainScopeSelection:bt("chat.scopeSelection",!1),UseMessageNames:bt("advanced.useMessageNames",!0),FeedbackOnChange:bt("advanced.feedback.onChange",!1),ReviewContextMenu:bt("advanced.review.contextMenu",!1),ReviewSCMViewlet:bt("advanced.review.scmViewlet",!1),ReviewIntent:bt("advanced.review.intent",!1),ReviewPalette:bt("advanced.review.palette",!1),NotebookPrioritiesExperimentEnabled:bt("advanced.notebook.prioritiesExperimentEnabled",!1),NotebookPackagesExperimentEnabled:bt("advanced.notebook.packagesExperimentEnabled",!1),NotebookAdditionalCodeGenerationRuleEnabled:bt("advanced.notebook.additionalCodeGenerationRule",!1),NotebookSummaryExperimentEnabled:bt("advanced.notebook.summaryExperimentEnabled",!1)};var ue=oe("ILogService"),Pp=class{constructor(e,r){this.logTargets=e;this.configurationService=r;this.loggers=new Map;this.promptResponseLoggers=new Map;this.myLogTarget={logIt:(n,i,...o)=>{this.logTargets.forEach(s=>s.logIt(n,i,...o))}}}get defaultLogger(){return this.getLogger("extension")}getLogger(e){return Pp._getLogger(e,this.loggers,r=>new WA(r,this.myLogTarget,this.configurationService))}getPromptResponseLogger(e){return Pp._getLogger(e,this.promptResponseLoggers,r=>new w7(r,this.myLogTarget,this.configurationService))}registerAppender(e){return this.logTargets.push(e),Ac(()=>{let r=this.logTargets.indexOf(e);r!==-1&&this.logTargets.splice(r,1)})}static _getLogger(e,r,n){let i=r.get(e);return typeof i>"u"&&(i=n(e),r.set(e,i)),i}};Pp=fe([ie(1,ke)],Pp);var KT=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(KT||{}),VA=class{logIt(e,r,...n){e===3?console.error(r,...n):e===2&&console.warn(r,...n)}},$A=class{constructor(e){this.output=e}logIt(e,r,...n){this.output.appendLine(`${r} ${n.map(zLe)}`)}},WA=class{constructor(e,r,n){this.category=e;this.target=r;this.configurationService=n}stringToLevel(e){return KT[e]}log(e,...r){if(!this.shouldLog(e,this.category))return;let n=`[${this.category}]`;this.target.logIt(e,n,...r)}shouldLog(e,r){let n=this.configurationService.getConfig(Ae.DebugFilterLogCategories);if(n.length>0&&!n.includes(r))return!1;let i=this.configurationService.getConfig(Ae.DebugOverrideLogLevels),o=this.stringToLevel(i[this.category])??this.stringToLevel(i["*"])??1;return e>=o}debug(...e){this.log(0,...e)}info(...e){this.log(1,...e)}warn(...e){this.log(2,...e)}error(...e){this.log(3,...e)}exception(e,r){let n=r?`${r}: `:"",i=e instanceof Error?e:new Error("Non-error thrown: "+e);this.log(3,`${n}${i.stack}`)}},w7=class extends WA{logPrompt(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;super.info(r+e.map(n=>`${n.role.toUpperCase()}:
${n.content}`).join(r)+r)}logResponse(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;if(typeof e!="string"){if(e.type!=="success"){super.info(`${r}RESPONSE FAILED DUE TO ${e.type}${r}`);return}Array.isArray(e.value)?e.value.length===1?e=e.value[0]:e=`${e.value.map(n=>`<<${n}>>`).join(", ")}`:e=e.value}super.info(`${r}ASSISTANT:
${e}${r}`)}debug(e,...r){this.conversationLoggingEnabled()&&super.debug(e,...r)}info(e,...r){this.conversationLoggingEnabled()&&super.info(e,...r)}warn(e,...r){this.conversationLoggingEnabled()&&super.warn(e,...r)}error(e,...r){this.conversationLoggingEnabled()&&super.error(e,...r)}conversationLoggingEnabled(){return this.configurationService.getConfig(Ae.ConversationLoggingEnabled)}};function zLe(t){switch(typeof t){case"object":return JSON.stringify(t);default:return String(t)}}var Mr=oe("IFetcherService"),Rm=class{constructor(e,r,n,i,o,s){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getJson=o;this.getBody=s;this.ok=this.status>=200&&this.status<300}async text(){return this.getText()}async json(){return this.getJson()}async body(){return this.getBody()}};var hne="github.com",VLe=`https://${hne}`,o_=oe("INetworkConfiguration"),KA=class{constructor(e=VLe){this.recalculateUrls(e)}isGitHubEnterprise(){return this.isEnterprise}getTokenUrl(e){return e.devOverride?.copilotTokenUrl??this.tokenUrl}getNotificationUrl(e){return e.devOverride?.notificationUrl??this.notificationUrl}updateBaseUrl(e,r){if(!r)return;let n=this.baseUri;this.recalculateUrls(r),n.toString()!==this.baseUri.toString()&&e.get(Et).resetCopilotToken(e)}recalculateUrls(e){this.baseUri=ut.parse(e);let r=ut.parse(`${this.baseUri.scheme}://api.${this.baseUri.authority}`);this.isEnterprise=this.baseUri.authority!==hne,this.tokenUrl=ut.joinPath(r,"/copilot_internal/v2/token").toString(),this.notificationUrl=ut.joinPath(r,"/copilot_internal/notification").toString()}};var s_=oe("IUrlOpener"),YA=class{constructor(){this.openedUrls=[]}open(e){this.openedUrls.push(e)}};var QA=oe("INotificationSender");var $Le=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],JA=oe("IUserErrorNotifier"),XA=class{constructor(e){this.accessor=e;this.notifiedErrorCodes=[]}async notifyUser(e){$Le.includes(e.code)&&!this.didNotifyBefore(e.code)&&(this.displayCertificateErrorNotification(e),this.notifiedErrorCodes.push(e.code))}displayCertificateErrorNotification(e){let r="https://aka.ms/copilot-ssc",n="Your current Copilot license doesn't support proxy connections with self-signed certificates.";this.accessor.get(ue).getLogger("certificates").error(`${n} Please visit ${r} to learn more. Original cause: ${JSON.stringify(e)}`),this.showCertificateWarningMessage(n,r)}showCertificateWarningMessage(e,r){let n={title:"Learn more"};this.accessor.get(QA).showWarningMessage(e,n).then(i=>{i?.title===n.title&&this.accessor.get(s_).open(r)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};var Co=oe("ICopilotTokenNotifier"),ZA=class{constructor(){this._onCopilotToken=new gr;this.onCopilotToken=this._onCopilotToken.event}dispose(){this._onCopilotToken.dispose()}emit(e,r){this._onCopilotToken.fire({token:e,envelope:r})}};var a_=oe("ITelemetryUserConfig"),eP=class{constructor(e,r,n){this.trackingId=r,this.optedIn=n??!1,this.setupUpdateOnToken(e)}setupUpdateOnToken(e){e.get(Co).onCopilotToken(r=>{let n=r.token.getTokenValue("rt")==="1",i=r.token.getTokenValue("tid"),o=r.token.organization_list;i!==void 0&&(this.trackingId=i,this.organizationsList=o?.toString(),this.optedIn=n)})}},WLe="https://copilot-telemetry.githubusercontent.com/telemetry",rP=oe("ITelemetryEndpointUrl"),tP=class{constructor(e=WLe){this.url=e}getUrl(){return this.url}},Ee=oe("ITelemetryService"),Am=oe("IGHTelemetryService");var bn=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let t;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?t=crypto.getRandomValues.bind(crypto):t=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),r=[];for(let n=0;n<256;n++)r.push(n.toString(16).padStart(2,"0"));return function(){t(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,o="";return o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o}}();var Ar=class t{static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Date.now())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o.filtersAndExp=this.filtersAndExp,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Date.now())}extendWithEditorAgnosticFields(e){let r=e.get(St);this.properties.editor_version=r.getEditorInfo().format(),this.properties.editor_plugin_version=r.getEditorPluginInfo().format(),this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${r.getVersion()}`,this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=r.getEditorInfo().format()}extendWithConfigProperties(e){let r=e.get(St),n=e.get(ke).dumpConfig();n["copilot.build"]=r.getBuild(),n["copilot.buildType"]=r.getBuildType();let i=e.get(a_);i.trackingId&&(n["copilot.trackingId"]=i.trackingId),i.organizationsList&&(n.organizations_list=i.organizationsList),this.properties={...this.properties,...n}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(e)return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}updateTimeSinceIssuedAndDisplayed(){let e=Date.now()-this.issuedTime;if(this.measurements.timeSinceIssuedMs=e,this.displayedTime!==void 0){let r=Date.now()-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}}makeReadyForSending(e){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.updateTimeSinceIssuedAndDisplayed();for(let r in this.properties)this.properties[r]===void 0&&delete this.properties[r];YLe(e,this.properties)}};function gne(t){if(!t)return;let e={};for(let r in t){let n=t[r];n&&(n.value?e[r]=n.value:e[r]=n)}return e}function YLe(t,e){e.unique_id=bn();let r=t.get(St);e.common_extname=r.getEditorPluginInfo().name,e.common_extversion=r.getEditorPluginInfo().version,e.common_vscodeversion=r.getEditorInfo().format()}var kp=class{constructor(e,r,n,i,o){this.token=e;this.organization_list=r;this.public_suggestions=n;this.enterprise_list=i;this.sku=o;this.tokenMap=this.parseToken(e)}parseToken(e){let r=new Map,i=e?.split(":")[0]?.split(";");for(let o of i){let[s,a]=o.split("=");r.set(s,a)}return r}get isInternal(){let e=["4535c7beffc844b46bb1ed4aa04d759a","a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","1cb18ac6eedd49b43d74a1c5beb0b955"];if(!this.organization_list)return!1;for(let r of this.organization_list)if(e.includes(r))return!0;return!1}getTokenValue(e){return this.tokenMap.get(e)}};var Et=oe("ICopilotTokenManager"),c_=class t{constructor(){this._copilotTokenRefreshEmitter=new gr;this.onDidCopilotTokenRefresh=this._copilotTokenRefreshEmitter.event;this._githubTokenChangedEmitter=new gr;this.onDidGitHubTokenChanged=this._githubTokenChangedEmitter.event}static{this._refreshRunningCountByTokenManager=new WeakMap}async _refreshToken(e,r){let n=Pm(),i=t._refreshRunningCountByTokenManager.get(this)??t._refreshRunningCountByTokenManager.set(this,{value:0}).get(this);i.value>0||(i.value++,setTimeout(async()=>{let o,s="";try{i.value--,await this.getCopilotToken(e,!0),o="success",this._copilotTokenRefreshEmitter.fire()}catch(c){o="failure",s=c.toString()}let a=Ar.createAndMarkAsIssued({result:o},{time_taken:Pm()-n,refresh_count:i.value});s&&(a.properties.reason=s),e.get(Ee).sendGHTelemetryEvent("auth.token_refresh",a.properties,a.measurements)},r*1e3))}};function vne(t){return t.get(ue).getLogger("auth")}var QLe=60;function Pm(){return Math.floor(Date.now()/1e3)}async function nP(t,e){let r=vne(t),n=t.get(Ee);n.sendGHTelemetryEvent("auth.new_login");let i=await XLe(t,e);if(!i)return r.info("Failed to get copilot token"),n.sendGHTelemetryErrorEvent("auth.request_failed"),{kind:"failure",reason:"FailedToGetToken"};let o=await i.json();if(!o)return r.info("Failed to get copilot token"),n.sendGHTelemetryErrorEvent("auth.request_read_failed"),{kind:"failure",reason:"FailedToGetToken"};if(i.status===401)return r.info("Failed to get copilot token due to 401 status"),n.sendGHTelemetryErrorEvent("auth.unknown_401"),{kind:"failure",reason:"HTTP401"};if(!i.ok||!o.token){r.info(`Invalid copilot token: missing token: ${i.status} ${i.statusText}`);let m=Ar.createAndMarkAsIssued({status:i.status.toString(),status_text:i.statusText});return n.sendGHTelemetryErrorEvent("auth.invalid_token",m.properties,m.measurements),{kind:"failure",reason:"NotAuthorized",...o.error_details}}let s=o.expires_at;o.expires_at=Pm()+o.refresh_in+QLe;let{token:a,organization_list:c,enterprise_list:u,sku:l,...d}=o,p=new kp(a,c,void 0,u,l);t.get(Co).emit(p,d);let f=Ar.createAndMarkAsIssued({},{adjusted_expires_at:o.expires_at,expires_at:s,current_time:Pm()});return n.sendGHTelemetryEvent("auth.new_token",f.properties,f.measurements),{kind:"success",...o}}async function XLe(t,e){let r=t.get(o_).getTokenUrl(e);try{return await t.get(Mr).fetch(r,{headers:{Authorization:`token ${e.token}`,...t.get(St).getEditorVersionHeaders()}})}catch(n){throw t.get(JA).notifyUser(n),n}}var YT=class extends c_{constructor(r,n){super();this.completionsToken=r;this.embeddingsToken=n;this.wasReset=!1}getAnyGitHubToken(){return Promise.resolve(this.completionsToken)}getPermissiveGitHubToken(){return Promise.resolve(this.completionsToken)}async getCopilotToken(r,n){return new kp(this.completionsToken)}async getEmbeddingsToken(r,n){return new kp(this.embeddingsToken??this.completionsToken)}resetCopilotToken(r,n){this.wasReset=!0}async checkCopilotToken(r){return{status:"OK"}}},iP=class extends c_{constructor(r){super();this.githubToken=r;this.copilotToken=void 0}getAnyGitHubToken(){return Promise.resolve(this.githubToken.token)}getPermissiveGitHubToken(){return Promise.resolve(this.githubToken.token)}async getCopilotToken(r,n){if(!this.copilotToken||this.copilotToken.expires_at<Pm()||n){let i=await nP(r,this.githubToken);if(i.kind==="failure")throw Error(`Failed to get copilot token: ${i.reason.toString()} ${i.message??""}`);this.copilotToken={...i},this._refreshToken(r,i.refresh_in)}return new kp(this.copilotToken.token,this.copilotToken.organization_list,this.copilotToken.public_suggestions,this.copilotToken.enterprise_list,this.copilotToken.sku)}async checkCopilotToken(r){if(!this.copilotToken||this.copilotToken.expires_at<Pm()){let i=await nP(r,this.githubToken);if(i.kind==="failure")return i;this.copilotToken={...i},this._refreshToken(r,i.refresh_in)}return{status:"OK"}}resetCopilotToken(r,n){n!==void 0&&r.get(Ee).sendGHTelemetryEvent("auth.reset_token_"+n),vne(r).debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}},A7=`${process.env.HOME||process.env.USERPROFILE}/.copilot-testing-gh-token`,R7;function yne(){return R7||(R7=JLe()),R7}var JLe=()=>{if(process.env.GITHUB_PAT)return new YT(process.env.GITHUB_PAT);if(process.env.GITHUB_OAUTH_TOKEN)return new iP({token:process.env.GITHUB_OAUTH_TOKEN});let t=ZLe();if(t)return new iP({token:t.trim()});throw new Error(`Tests: either GITHUB_PAT must be set, or there must be a GitHub token from an app with access to Copilot in ${A7}. Run "npm run get_token" to get one.`)};function ZLe(){if(oP.existsSync(A7))return oP.readFileSync(A7).toString()}var km=require("vscode");var Vo=require("vscode");var P7=["user:email"],bne=["read:user"],k7=["read:user","user:email","repo","workflow"],_ne="You are not signed in to GitHub. Please sign in to use Copilot.";function sP(t){return t.getConfig(Ae.AuthProvider)==="github-enterprise"?"github-enterprise":"github"}async function xne(t,e){if(!t.length)return;if(t.length===1)return t[0];let r=new Set(t.map(o=>o.account.label));if(r.size===1)return t[0];let n=Vo.workspace.getConfiguration();if(e?.forceNewSession)return await n.update("github.copilot.preferredAccount",t[0].account.label,Vo.ConfigurationTarget.Global),t[0];let i=n.get("github.copilot.preferredAccount");if(i)return t.find(o=>o.account.label===i);if(e?.createIfNone){let o=await Vo.window.showQuickPick([...r.values()],{placeHolder:Vo.l10n.t("Choose the account you would like to use with GitHub Copilot")});if(o)return await n.update("github.copilot.preferredAccount",o,Vo.ConfigurationTarget.Global),t.find(s=>s.account.label===o)}}async function Bu(t,e){let r=sP(t),n=[Vo.authentication.getSession(r,k7,{silent:!0}),Vo.authentication.getSession(r,bne,{silent:!0})];e?.forceNewSession?n.unshift(Vo.authentication.getSession(r,P7,e)):n.push(Vo.authentication.getSession(r,P7,e));let i=(await Promise.all(n)).filter(o=>!!o);return await xne(i,e)}async function Sne(t,e){let r=sP(t),n=await Promise.all([Vo.authentication.getSession(r,k7,e),Vo.authentication.getSession(r,bne,{silent:!0}),Vo.authentication.getSession(r,P7,{silent:!0})]);if(!n[0])return;let i=n.filter(s=>!!s),o=await xne(i,e);return o?.scopes.length===k7.length?o:void 0}var Ene=!1,QT=class extends Error{},XT=class extends Error{},JT=class extends Error{};async function t4e(t){let e=t.get(ue).getLogger("auth"),r=await Bu(t.get(ke));if(!r)return e.info("GitHub login failed"),t.get(Ee).sendGHTelemetryErrorEvent("auth.github_login_failed"),{kind:"failure",reason:"GitHubLoginFailed"};e.info(`Logged in as ${r.account.label}`);let n=await nP(t,{token:r.accessToken});return n.kind==="success"&&e.info(`Got Copilot token for ${r.account.label}`),n}async function r4e(t){let e=await t4e(t);if(e.kind==="failure"&&e.reason==="NotAuthorized"){let r=e.message;if(r?.includes("No access to GitHub Copilot found"))throw new QT(r??"User not authorized");if(r?.includes("Your subscription has ended"))throw new XT(r)}if(e.kind==="failure"){let r=e.message;if(r?.includes("Please contact your enterprise admin to enable your managed account for Copilot for Business"))throw new JT(r)}if(e.kind==="failure"&&e.reason==="HTTP401"){let r="Your GitHub token is invalid. Please sign out from your GitHub account using the VS Code accounts menu and try again.";throw Ene||(Ene=!0,km.window.showWarningMessage(r)),Error(r)}if(e.kind==="failure"&&e.reason==="GitHubLoginFailed")throw Error("GitHubLoginFailed");if(e.kind==="failure")throw Error("Failed to get copilot token");return e}var aP=class extends c_{constructor(r,n){super();this.configurationService=r;this._accessor=n;this._cachedAnyToken=null;this._cachedPermissiveToken=null;this.copilotToken=void 0,this._disposable=km.Disposable.from(km.authentication.onDidChangeSessions(i=>{i.provider.id===sP(r)&&this._handleAuthChangeEvent()}),km.workspace.onDidChangeConfiguration(async i=>{i.affectsConfiguration("github.copilot.preferredAccount")&&this._handleAuthChangeEvent()}))}dispose(){this._disposable.dispose()}async getAnyGitHubToken(r){if(this._cachedAnyToken!==null&&!this.isInteractiveRequest(r))return this._cachedAnyToken;let n=await Bu(this.configurationService,r);return this._cachedAnyToken=n?.accessToken,this._cachedAnyToken}async getPermissiveGitHubToken(r){if(this._cachedPermissiveToken!==null&&!this.isInteractiveRequest(r))return this._cachedPermissiveToken;let n=await Sne(this.configurationService,r);return this._cachedPermissiveToken=n?.accessToken,this._cachedPermissiveToken}async getCopilotToken(r,n){return(!this.copilotToken||this.copilotToken.expires_at<Pm()||n)&&(this.copilotToken=await r4e(r),this._refreshToken(r,this.copilotToken.refresh_in)),new kp(this.copilotToken.token,this.copilotToken.organization_list,this.copilotToken.public_suggestions,this.copilotToken.enterprise_list,this.copilotToken.sku)}resetCopilotToken(r,n){n!==void 0&&r.get(Ee).sendGHTelemetryEvent("auth.reset_token_"+n),r.get(ue).getLogger("auth").debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}async _handleAuthChangeEvent(){this._cachedAnyToken=null,this._cachedPermissiveToken=null,this._resetOrRefreshCopilotToken(),this._githubTokenChangedEmitter.fire()}async _resetOrRefreshCopilotToken(){if(!await this.getAnyGitHubToken()){this.resetCopilotToken(this._accessor);return}await this.getCopilotToken(this._accessor,!0)}isInteractiveRequest(r){return!r?.createIfNone&&!r?.forceNewSession}};var uP=oe("IBlockedExtensionService"),cP=class{constructor(){this.blockedExtensions=new Map}reportBlockedExtension(e,r){this.blockedExtensions.has(e)&&clearTimeout(this.blockedExtensions.get(e));let n=setTimeout(()=>{this.blockedExtensions.delete(e)},r*1e3);this.blockedExtensions.set(e,n)}isExtensionBlocked(e){return this.blockedExtensions.has(e)}};var lP=oe("IChatAgentService"),D7="default",ZT="editor",Dp="workspace",eC="vscode",u_="terminal",Tne=[D7,ZT,Dp,eC,u_];function l_(t){return`github.copilot.${t}`}function Cne(t){return t.replace(/^github\.copilot\./,"")}var Jt=oe("IChatMLFetcher");var Vi=oe("ConversationOptions");var n4e=Object.freeze({abap:{lineComment:{start:"'"}},bat:{lineComment:{start:"REM"},aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"}},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"]},haskell:{lineComment:{start:"--"}},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"]},ini:{lineComment:{start:";"}},java:{lineComment:{start:"//"},extensions:[".java",".class"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"]},json:{extensions:[".json"],lineComment:{start:"//"}},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"}},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"]},kotlin:{lineComment:{start:"//"}},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"]},markdown:{lineComment:{start:"[]: #"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"]},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"}},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"}}}),tC=new Map(Object.entries(n4e).map(([t,e])=>[t,{languageId:t,...e}]));function $o(t){let e=typeof t=="string"?t:t.languageId,r=tC.get(e.toLowerCase());return r||{languageId:e,lineComment:{start:"//"}}}function Dm(t){let e=nc(t).toLowerCase();for(let r of tC.values())if(r.extensions?.includes(e))return r;return $o("plaintext")}var lU=W(st()),ge=oe("ITokenizer");function Jne(t,e,r){return Math.min(Math.max(t,e),r)}var $r=class t{constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,s=r.column|0;return o-s}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var ht=class t{constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,s;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,s=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,s=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new t(n,i,o,s)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=r.startLineNumber,c=r.startColumn,u=r.endLineNumber,l=r.endColumn;return n<a?(n=a,i=c):n===a&&(i=Math.max(i,c)),o>u?(o=u,s=l):o===u&&(s=Math.min(s,l)),n>o||n===o&&i>s?null:new t(n,i,o,s)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new $r(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new $r(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,s=r.startLineNumber|0;if(o===s){let a=e.startColumn|0,c=r.startColumn|0;if(a===c){let u=e.endLineNumber|0,l=r.endLineNumber|0;if(u===l){let d=e.endColumn|0,p=r.endColumn|0;return d-p}return u-l}return a-c}return o-s}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var ot=W(require("vscode")),jn=ot.Position,Xe=ot.Range,Lm=ot.Selection,Zne=ot.EventEmitter,eie=ot.CancellationTokenSource;var Jn=ot.TextEdit,oC=ot.WorkspaceEdit,Zn=ot.Uri,Wo=ot.MarkdownString;var kc=ot.DiagnosticSeverity,Sa=ot.ExtensionMode,Ea=ot.Location;var pn=ot.ChatResponseMarkdownPart;var sC=ot.ChatResponseFileTreePart;var Io=ot.ChatResponseProgressPart,AP=ot.ChatResponseReferencePart,tie=ot.ChatResponseCommandButtonPart;var $s=ot.ChatResponseTextEditPart;var rie=ot.ChatResponseDetectedParticipantPart,nie=ot.ChatRequestTurn;var iie=ot.NewSymbolName,oie=ot.NewSymbolNameTag,aC=ot.NewSymbolNameTriggerKind;var dU={t:ot.l10n.t};var Ue=oe("IEndpointProvider");var PP=class extends Error{constructor(e){super(`Unrecognized language: ${e}`)}},sie={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",tsx:"tsx",go:"go",ruby:"ruby",csharp:"csharp",cpp:"cpp",java:"java",rust:"rust"};function Np(t){if(t in sie)return sie[t]}function Gl(t,e,r){if(t===0)return{text:e,range:r};let n=typeof t=="number"?{0:e.slice(0,t),index:t}:e.match(t);if(!n)return{text:e,range:r};let i=n[0],o=t_(i,`
`);return{text:e.slice(i.length),range:{startLineNumber:r.startLineNumber+o,startColumn:o>0?i.length-(i.lastIndexOf(`
`)+1):r.startColumn+i.length,endColumn:r.endColumn,endLineNumber:r.endLineNumber}}}function jl(t,e,r){if(t===0)return{text:e,range:r};let n=typeof t=="number"?{0:e.slice(-t),index:e.length-t}:e.match(t);if(!n)return{text:e,range:r};let i=n[0],o=t_(i,`
`),s=r.endLineNumber-o;return{text:e.slice(0,n.index),range:{startColumn:r.startColumn,startLineNumber:r.startLineNumber,endLineNumber:s,endColumn:o>0?(s===r.startLineNumber?r.startColumn:0)+n.index-(e.lastIndexOf(`
`,n.index-1)+1):Math.max(0,r.endColumn-i.length)}}}function aie(t){let e=t.lastIndexOf(`
`);return e===-1?{lineNumber:0,column:t.length}:{lineNumber:t_(t.slice(0,e),`
`)+1,column:t.length-(e+1)}}function cie(t,e,r,n){let i=r?L4e(r,t,e):{text:t,range:e};return n?O4e(n,i.text,i.range):i}function L4e(t,e,r){let n=ht.lift(r),i=$r.lift(t);if(i.equals(n.getStartPosition()))return{text:e,range:r};if(i.isBefore(n.getStartPosition()))return{text:e,range:r};let o=0;if(i.lineNumber===n.getStartPosition().lineNumber)o=i.column-n.getStartPosition().column;else{let s=e.split(`
`);for(let[a,c]of s.entries())if(n.getStartPosition().lineNumber+a===i.lineNumber){o+=i.column;break}else o+=c.length+1}return{text:e.substring(o),range:{startLineNumber:i.lineNumber,startColumn:i.column,endColumn:r.endColumn,endLineNumber:r.endLineNumber}}}function O4e(t,e,r){let n=ht.lift(r),i=$r.lift(t);if(i.equals(n.getEndPosition()))return{text:e,range:r};if(n.getEndPosition().isBefore(i))return{text:e,range:r};let o="";if(i.lineNumber===n.getStartPosition().lineNumber)o=e.substring(0,i.column-n.getStartPosition().column);else{let s=e.split(`
`),a=[];for(let[c,u]of s.entries())if(n.getStartPosition().lineNumber+c===i.lineNumber){a.push(u.substring(0,i.column));break}else a.push(u+`
`);o=a.join("")}return{text:o,range:{startLineNumber:r.startLineNumber,startColumn:r.startColumn,endColumn:i.column,endLineNumber:i.lineNumber}}}function Om(t,e=0,r=0){let n=t.row+e,i=t.column+r;return{lineNumber:n<0?0:n,column:i<0?0:i}}function ic(t){return{startLineNumber:t.range.startPosition.row,startColumn:t.range.startPosition.column,endLineNumber:t.range.endPosition.row,endColumn:t.range.endPosition.column}}var K0=/\s+$/;function uie(t){return t.replace(K0,"")}function Dc(t,e){return{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:e.lineNumber,endColumn:e.column}}function lie(t,e,r){if(t===0)return{text:e,sources:r};let n=typeof t=="number"?{0:e.slice(-t),index:e.length-t}:e.match(t);if(!n)return{text:e,sources:r};let i=n.index;return{text:e.slice(0,i),sources:r.filter(o=>o.start<i).map(o=>({start:o.start,end:Math.min(o.end,i),range:jl(Math.max(0,o.end-i),e.slice(0,o.end),o.range).range}))}}var xt=oe("IParserService");function kP(t){return{startPosition:{row:t.start.line,column:t.start.character},endPosition:{row:t.end.line,column:t.end.character}}}function DP(t){return new Xe(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function Ki(t,e){return{startIndex:e.offsetAt(t.start),endIndex:e.offsetAt(t.end)}}function _s(t,e){return new Xe(t.positionAt(e.startIndex),t.positionAt(e.endIndex))}var LP=t=>{let e=ic(t);return{sources:[{start:0,end:t.text.length,range:e}],text:t.text,range:e}},zl=class{constructor(e){this.tokenizer=e}genericWholeFileChunking(e,{maxTokenLength:r=NP,removeEmptyLines:n=!0,rangeLimit:i=void 0}){e=e.replace(/\r\n/g,`
`);let o=e,s=aie(e),a={startLineNumber:0,startColumn:0,endLineNumber:s.lineNumber,endColumn:s.column};if(i){let u=uC(ht.lift(i),e,ht.lift(a));o=u.newTextRange.text,a=u.newTextRange.range}return this._processLinesIntoChunks(o,a.startLineNumber,[{start:a.startLineNumber,end:e.length,range:a}],r,!0,n).filter(u=>!n||u.text.length&&/[\w\d]{2}/.test(u.text))}genericChunking({lineRangeText:e,maxTokenLength:r=NP,removeEmptyLines:n=!0,extraLineRangeSeparator:i="",numTokensInEllipsis:o=0}){if(r<0)throw Error("Cannot chunk text, not enough chunk room");if(e.length===0)return[];let s=this.tokenizer.tokenLength(i),a=[],c,u=!1;for(let l=0;l<e.length;l++){let d=e[l];if(c){let f=r-this.tokenizer.tokenLength(c.text)-s;if(f>0&&d.text.length<2e4&&this.tokenizer.tokenLength(d.text)<=f){let m=i||(u?`
`:""),h=c.text.length+m.length,g=c.text+m+d.text,v={startLineNumber:c.range.startLineNumber,startColumn:c.range.startColumn,endColumn:d.range.endColumn,endLineNumber:d.range.endLineNumber},y=d.sources.map(b=>({start:b.start+h,end:b.end+h,range:b.range}));for(let b of c.sources)y.push(b);u=!1,c={sources:y,text:g,range:v};continue}a.push(c)}let p=this._processLinesIntoChunks(d.text,d.range.startLineNumber,d.sources,r,!1,n,o,l===0);c=p.pop(),u=!0,a.push(...p)}return c&&a.push(c),a.filter(l=>!n||l.text.length&&/[^\s]/.test(l.text)).map(l=>{let{text:d,sources:p}=lie(K0,l.text,l.sources);return{range:l.range,text:d,sources:p}})}_processLinesIntoChunks(e,r,n,i,o,s,a=0,c=!1){let u=0,l=0,d=e.split(`
`),p=[];for(let m=0;m<d.length;m++){let h=d[m],g=l;if(l+=h.length+1,s&&h.length===0)continue;let v=h.slice(0,i*4);p.push({text:v,lineNumber:m+r,originalStart:g,originalEnd:g+v.length,tokens:this.tokenizer.tokenLength(v)})}let f=[];for(;u<p.length;){let m=i-a-(c?0:a),h=u+1,g="";for(let J=p[u].tokens;h<p.length;h++){let X=J+p[h].tokens;if(X>m){g=p.slice(u,h+1).map(E=>E.text).join(`
`);let D=this.tokenizer.tokenLength(g);for(;D<=m&&h<p.length-1;)h++,g+=`
`+p[h].text,D=this.tokenizer.tokenLength(g);break}J=X}let v=p.slice(u,h),y=h;if(o){let{chunks:J,usedFromRemaining:X}=this._dedentAndAddLinesToChunk(v,p.slice(h),m);v=J,u=y+X}else for(u=y;u<p.length&&p[u].text.length===0;)u++;if(v.length===0)continue;for(;v.length;){let J=v[v.length-1],X=J.text.trimEnd();if(X==="")v.pop();else if(X!==J.text){J.text=X,J.originalEnd=X.length;break}else break}if(v.length===0)continue;let b=[];n.sort((J,X)=>J.start-X.start);let x=0,S=0,T=0,L=v[0]?.originalStart||0,M=(J,X)=>{if(S===J){S=X;return}for(;x<n.length&&n[x].start<S;){let D=n[x++];if(D.end<L)continue;let E=Math.max(0,D.end-S),A=Math.max(0,L-D.start),F=jl(E,e.slice(D.start,D.end),D.range),O=Gl(A,F.text,F.range);b.push({start:D.start+A-T,end:D.end-E-T,range:O.range})}S=X,L=J},j="";for(let J=0;J<v.length;J++){let X=v[J];M(X.originalStart,X.originalEnd),j+=X.text,T=X.originalEnd-j.length,J<v.length-1&&(j+=`
`,e[X.originalEnd]===`
`&&M(X.originalEnd,X.originalEnd+1))}M(1/0,1/0);let N=v[v.length-1];f.push({text:j,range:{startLineNumber:v[0].lineNumber,startColumn:0,endLineNumber:N.lineNumber,endColumn:N.text.length},sources:b})}return f}_dedentAndAddLinesToChunk(e,r,n){let i=cC(e.map(l=>l.text)),o=i.shortestLeadingCommonWhitespace;if(!o)return{chunks:e,usedFromRemaining:0};let s=e;for(let l=0;l<s.length;l++)s[l].originalStart+=o.length,s[l].text=i.trimmedLines[l]||"";let a=0,c=this.tokenizer.tokenLength(s.map(l=>l.text).join(`
`)),u=r[a];for(c+=u?.tokens||0;u&&c<n&&(u.text.length===0||u.text.startsWith(o));)s.push({...u,text:u.text.slice(o.length),originalStart:u.originalEnd+o.length}),a++,u=r[a],c+=u?.tokens||0;return{chunks:s,usedFromRemaining:a}}};zl=fe([ie(0,ge)],zl);function cC(t){let e=t.map(o=>{if(!o)return;let s=o.match(/^\s+/),a=s?s[0]:"",c=o.substring(a?.length);return[a,c]}),r=Xt(e),n=M4e(r)??"",i=n.length;return{trimmedLines:e.map(o=>o?o[0].substring(i)+o[1]:void 0),shortestLeadingCommonWhitespace:n}}function M4e(t){let e;for(let r of t){if(e===void 0){e=r[0];continue}e=F4e(e,r[0])}return e??""}function F4e(t,e){let r=PA(t,e);return t.substring(0,r)}var NP=250;function uC(t,e,r){let n=r.getStartPosition().isBefore(t.getStartPosition()),i=t.getEndPosition().isBefore(r.getEndPosition());return{newTextRange:cie(e,r,t.getStartPosition(),t.getEndPosition()),trimmedLeft:n,trimmedRight:i}}function U4e(t){return t&&Array.isArray(t.text)&&(t.needsLeadingElipsis===void 0||typeof t.needsLeadingElipsis=="boolean")&&(t.needsTrailingElipsis===void 0||typeof t.needsTrailingElipsis=="boolean")}function B4e(t){return t&&typeof t.bodyIndent=="string"&&typeof t.fullRange=="object"&&t.body&&Array.isArray(t.body.content)&&(t.body.outline===void 0||U4e(t.body.outline))&&(t.suffix===void 0||typeof t.suffix=="string")&&(t.header===void 0||typeof t.header=="object"&&typeof t.header.original=="string"&&(t.header.outline===void 0||typeof t.header.outline=="string"))}var m_=class t{constructor(e,r){this.lang=r;this._tokenizer=e.get(ge),this._naiveChunker=new zl(this._tokenizer),this._parserService=e.get(xt);let n=t.getFileChunkingOptions(r);this._inlineComment=n?.blockWrap??{start:"",end:""},this._elipsisPlaceholder=n?.elipsisPlaceholder??"...",this._lookForIndentInHeader=n?.lookForIndentInHeader??!0,this._numTokensInEllipsis=this._tokenizer.tokenLength(this._elipsisPlaceholder)+1}static getFileChunkingOptions(e){return e!=="python"&&e!=="ruby"?{elipsisPlaceholder:"/*...*/",blockWrap:{start:"{",end:"}"},lookForIndentInHeader:!1}:{}}get _summaryPlaceHolder(){return this._inlineComment.start+this._elipsisPlaceholder+this._inlineComment.end}async parse(e,r,n){let i=await this.createChunkTree(e,r,n);return i?this.createSummaryFromSemanticChunkTree(i,!0):[]}async createChunkTree(e,r,n){let i=await this.provideQueryTree(e);if(!n.isCancellationRequested)return this.createChunkTreeFromQueryTree(i,r,n)}async createSummaryFromSemanticChunkTree(e,r=!1){let n=[];if(e.body.content.length!==0&&n.push(this._makeChunksFromStructure(e.bodyIndent,e.body.content,e.fullRange,!r,e.header?.original,e.suffix)),e.body.outline&&e.body.outline.text.length!==0){let i=e.header?.outline??e.header?.original;n.push(this._makeChunksFromStructure(e.bodyIndent,e.body.outline.text,e.fullRange,!0,i,e.suffix,e.body.outline.needsLeadingElipsis,e.body.outline.needsTrailingElipsis).then(o=>(r&&o.length===1&&(o[0]={...o[0],isFullFile:!0}),o)))}return(await Promise.all(n)).flat()}async createChunkTreeFromQueryTree(e,r,n){let i=ht.lift(r.limitToRange),o=this._parseBlocks(e.roots,"",r.maxTokenLength,r.maxHeaderLengthFactor,i??void 0),s=o.content.flat(),a=o.outline??[],c=this.createOutlineSummaryBody(r.maxTokenLength,LP(e.syntaxTreeRoot),a,"",i??void 0);return{bodyIndent:"",fullRange:ic(e.syntaxTreeRoot),body:{content:s,outline:c}}}provideQueryTree(e){let r=e.replace(/\r\n/g,`
`);return this._parserService.getSemanticChunkTree(this.lang,r)}chunkWholeText(e,r,n,i=0,o=r,s,a=""){if(e.trim().length===0)return{content:{text:[],isFull:!0}};let c;try{let u={range:r,text:e},l=o,d=u.text;if(s){let p=ht.lift(o),f=uC(s,e,p);u=f.newTextRange;let m=p.intersectRanges(s);if(!m)throw Error("Invalid Body Text Range");l=m,d=this._constructLimitedRange(f.trimmedRight,f.trimmedLeft,u.text,a)}c=this._naiveChunker.genericChunking({lineRangeText:[{range:u.range,text:d,sources:[{start:i,end:d.length,range:l}]}],maxTokenLength:n,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return{content:{text:[],isFull:!1},outline:[]}}return{content:{text:c,isFull:!0}}}_parseBlocks(e,r,n,i,o){return this._parseSemanticStructure(e,r,n,i,(s,a,c,u)=>{let l=u+a.text;if(this._tokenizer.tokenLength(l)<=c){let m=Gl(/^\s*\n/g,l,a.range),h=Gl(/(\n\s*$)/g,m.text,m.range);if(o){let g=uC(o,h.text,ht.lift(h.range)),v=this._constructLimitedRange(g.trimmedRight,g.trimmedLeft,g.newTextRange.text,u);return{content:{text:[{sources:[{start:0,end:v.length,range:g.newTextRange.range}],range:g.newTextRange.range,text:v}],isFull:!0}}}else return{content:{text:[{sources:[{start:u.length,end:h.text.length,range:h.range}],range:h.range,text:h.text}],isFull:!0}}}if(s.length===0)return this.chunkWholeText(l,a.range,c,o?0:u.length,void 0,o,u);let d=this._parseBlocks(s,u,c,i,o),p=d.content,f=d.outline;return{content:{text:p,isFull:!1},outline:f}},o)}_createOutlineBody(e,r){let n=e.text.split(`
`),i={lineNumber:e.range.startLineNumber,column:e.range.startColumn},o=[],s=i,a=d=>{let p=d.lineNumber-i.lineNumber,f=d.column;return i.lineNumber===d.lineNumber&&(f=d.column-i.column),{lineNumber:p,column:f}},c=d=>{let p=d.lineNumber-i.lineNumber,f=p>=n.length||d.column===n[p].length-1;return{newPosition:{lineNumber:d.lineNumber,column:d.column+1},isNewLine:f}},u=(d,p)=>{if(d.lineNumber>p.lineNumber||d.lineNumber===p.lineNumber&&d.column>p.column)return;let f=[],m=a(d),h=a(p),g=Dc(d,p),v=n[m.lineNumber].substring(m.column);if(m.lineNumber===h.lineNumber){let x=v.substring(0,h.column-m.column),S=c(p);s=S.newPosition,S.isNewLine&&(x+=`
`),f.push(x)}else{let x=n[h.lineNumber].substring(0,h.column),S=c(p);s=S.newPosition,S.isNewLine&&(x+=`
`),f.push(v+`
`);for(let T=m.lineNumber+1;T<h.lineNumber;T++)f.push(n[T]+`
`);f.push(x)}let y=f.join(""),b=Gl(/^\s+\n/,y,g);b.text.length>0&&o.push({sources:[{start:0,end:b.text.length,range:b.range}],text:b.text,range:g})},l=d=>{o.push({sources:d.sources,text:d.summary+`

`,range:d.range})};return r.sort((d,p)=>d.range.startLineNumber-p.range.startLineNumber||d.range.endLineNumber-p.range.endLineNumber),r.forEach(d=>{u(s,{lineNumber:d.range.startLineNumber,column:d.range.startColumn}),l(d),s=c({lineNumber:d.range.endLineNumber,column:d.range.endColumn}).newPosition}),u(s,{lineNumber:e.range.endLineNumber,column:e.range.endColumn}),o}createOutlineSummaryBody(e,r,n,i,o){let s=r;if(s.range.startColumn>=i.length){let d={startLineNumber:s.range.startLineNumber,startColumn:s.range.startColumn-i.length,endLineNumber:s.range.endLineNumber,endColumn:s.range.endColumn},p=i+s.text;s={text:p,range:d,sources:[{start:0,end:p.length,range:d}]}}let a=!1,c=!1;if(o){if(n.length===1&&ht.lift(n[0].range).containsRange(o))return{text:[]};let d=uC(o,r.text,ht.lift(r.range));c=d.trimmedLeft,a=d.trimmedRight,s={text:d.newTextRange.text,range:d.newTextRange.range,sources:[{start:0,end:d.newTextRange.text.length,range:d.newTextRange.range}]}}let u=this._createOutlineBody(s,n.map(d=>({sources:d.sources,summary:uie(d.summary),range:d.range,needsTrailingElipsis:a,needsLeadingElipsis:c}))),l;try{l=this._naiveChunker.genericChunking({lineRangeText:u,removeEmptyLines:!1,maxTokenLength:e,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return console.error("caught error in naive chunker: {e}"),{text:[]}}return{text:l,needsLeadingElipsis:c,needsTrailingElipsis:a}}async _makeChunksFromStructure(e,r,n,i,o,s,a,c){return Xt(await Promise.all(r.map(async(u,l)=>{let d=B4e(u)?await this.createSummaryFromSemanticChunkTree(u):u,p=o&&o.length>0?o:"";(a||i&&l!==0)&&(p+=`${e}${this._elipsisPlaceholder}
`);let f="";if((c||i&&l!==r.length-1)&&(f+=`
${e}${this._elipsisPlaceholder}`),s&&s.length>0&&(f+=s),Array.isArray(d))return Xt(d.map(h=>{if(h.text.trim().length!==0)return{range:h.range,text:p+h.text+f,sources:h.sources.map(g=>({start:g.start+p.length,end:g.end+p.length,range:g.range}))}}));if(d.text.trim().length===0)return;let m={startColumn:(l===0?n:d.range).startColumn,startLineNumber:(l===0?n:d.range).startLineNumber,endColumn:n.endColumn,endLineNumber:n.endLineNumber};return{sources:d.sources.map(h=>({start:h.start+p.length,end:h.end+p.length,range:h.range})),range:m,text:p+d.text+f}}))).flat()}findNewIndent(e,r,n){let o=(this._lookForIndentInHeader?r.text.substring(0,n.startIndex-r.startIndex):n.text).match(new RegExp(`\\n+(\\s*)${e}${this._lookForIndentInHeader?"$":""}`));return o&&o.length>1?o[1]:""}_constructLimitedRange(e,r,n,i){return n.length===0?"":(r?`${i}${this._elipsisPlaceholder}
`:"")+n+(e?`
${i}${this._elipsisPlaceholder}`:"")}};var Nc=class extends m_{_parseSemanticStructure(e,r,n,i,o,s){let a=[],c=l=>{let d=l.info,p=d.mainBlock,f=d.detailBlocks.comments,m=d.detailBlocks.body,h=ic(m),g=this._getInnerLineRangeText(m),v=m.startIndex-p.startIndex+g.prefix.length,y=this.findNewIndent(r,p,m),b="";for(let Z of f)b+=r+Z.text+`
`;let x=r+p.text.substring(0,v),S=b+x,T=ic(p),L=Dc(Om((f.length>0?f[0]:p).range.startPosition,0,-r.length),{column:T.endColumn,lineNumber:T.endLineNumber});if(s&&!ht.lift(L).intersectRanges(s))return;let M=i*n,j=S.replace(/(\n*)(\n\s*)$/g,`
`),N=this._tokenizer.tokenLength(j);if(N>M&&(j=x.replace(/(\n*)(\n\s*)$/g,`
`),N=this._tokenizer.tokenLength(x),N>M)){j="",N=0;let Z=this.chunkWholeText(b+r+p.text,ic(p),n,b.length+r.length,void 0,s,r);return{bodyIndent:r,body:{content:Z.content.text},fullRange:L}}let J=g.suffix+p.text.substring(m.endIndex-p.startIndex),X=this._tokenizer.tokenLength(j+`
`+J),D=n-X,E=o(l.children,g.body,D,r+y);L=Dc({column:L.startColumn,lineNumber:L.startLineNumber},Om(p.range.endPosition));let A=jl(K0,p.text.substring(0,m.startIndex-p.startIndex),{startColumn:T.startColumn,startLineNumber:T.startLineNumber,endLineNumber:h.startLineNumber,endColumn:h.startColumn}),F,O=b+r;return a.push({summary:O+A.text+" "+this._summaryPlaceHolder,range:L,sources:[{start:O.length,end:O.length+A.text.length,range:A.range}]}),E.outline!==void 0&&(F=this.createOutlineSummaryBody(D,g.body,E.outline,r+y,s)),{header:{original:j},bodyIndent:r+y,body:{content:E.content.text,outline:F},fullRange:L,suffix:J}},u=Xt(e.map(l=>c(l)));return{outline:a,content:u}}_getInnerLineRangeText(e){let r=ic(e),n=e.text,i=Gl(/^\s*\{\s*/,n,r),o=jl(/\s*\}\s*$/,i.text,i.range);return{prefix:n.slice(0,n.length-i.text.length),body:{sources:[{start:0,end:o.text.length,range:o.range}],text:o.text,range:o.range},suffix:i.text.slice(o.text.length)}}};var OP=class{constructor(e){this.accessor=e;this.naiveChunker=new zl(e.get(ge))}async parse(e,r,n){let i=this._getLineRangeText(e,r.limitToRange);return this.naiveChunker.genericChunking({lineRangeText:i,maxTokenLength:r.maxTokenLength,extraLineRangeSeparator:`

`})}_getLineRangeText(e,r){e=e.replace(/\r\n/g,`
`);let n=e.split(`
`),i=[],o={lineNumber:0,column:0},s=[],a=r?r.startLineNumber:0,c=r?r.startColumn:void 0,u=Math.min(r?r.endLineNumber+1:n.length,n.length),l=r?r.endColumn:void 0;for(let d=a;d<u;d++)if(d===0&&c?n[d]=n[d].substring(c):d===u-1&&l&&(n[d]=n[d].substring(0,l)),n[d].trim().length===0){if(i.length>0){let p=i.join(`
`),f=Dc(o,{lineNumber:d-1,column:n[d-1].length});s.push({sources:[{start:0,end:p.length,range:f}],text:p,range:f}),i.length=0}o={lineNumber:d+1,column:0};continue}else i.push(n[d]);if(i.length>0){let d=i.join(`
`),p=Dc(o,{lineNumber:n.length-1,column:n[n.length-1].length});s.push({sources:[{start:0,end:d.length,range:p}],text:d,range:p})}return s}};var MP=class extends m_{_parseSemanticStructure(e,r,n,i,o,s){let a=[],c=l=>{let d=l.info,p=d.mainBlock,f=d.detailBlocks.decorator,m=d.detailBlocks.docstring,h=d.detailBlocks.body,g={start:0,end:0,range:null};if(m)g.end=m.endIndex-p.startIndex,g.range={startLineNumber:p.range.startPosition.row,startColumn:p.range.startPosition.column,endLineNumber:m.range.endPosition.row,endColumn:m.range.endPosition.column};else if(h)g.end=h.startIndex-p.startIndex,g.range={startLineNumber:p.range.startPosition.row,startColumn:p.range.startPosition.column,endLineNumber:h.range.startPosition.row,endColumn:h.range.startPosition.column};else{let E=jl(1,p.text,g.range);g.end=p.text.length,g.range=E.range}let v=this.findNewIndent(r,p,h),y=[],b="";f&&(b=r+f.text+`
`,y.push({start:r.length,end:f.text.length+r.length,range:ic(f)}));let x=jl(K0,p.text.substring(0,g.end),g.range);y.push({start:b.length+r.length,end:b.length+r.length+x.text.length,range:x.range});let S=b+r+x.text+`
`,T=Dc(Om(p.range.startPosition,0,-r.length),Om(p.range.endPosition));if(f&&(T=Dc(Om(f.range.startPosition,0,-r.length),{column:T.endColumn,lineNumber:T.endLineNumber})),s&&!ht.lift(T).intersectRanges(s))return;let L=i*n,M=S.replace(/\n+\s*$/g,`
`),j=this._tokenizer.tokenLength(M);if(j>L&&(M=r+x.text.substring(0,h.startIndex-p.startIndex),j=this._tokenizer.tokenLength(M),j>L)){M="",j=0;let E=Gl(m?m.endIndex-h.startIndex:0,h.text,ic(h)),A=this.chunkWholeText(S+`
`+E.text,ic(p),n,S.length+1,E.range,s,r);return{fullRange:T,body:{content:A.content.text},bodyIndent:r}}T=Dc({column:T.startColumn,lineNumber:T.startLineNumber},Om(p.range.endPosition)),a.push({summary:(m?S+v:S.slice(0,-1)+" ")+this._summaryPlaceHolder,sources:y,range:T});let N=LP(h),J=o(l.children,N,n-j,r+v),X=r+p.text.substring(0,h.startIndex-p.startIndex).replace(/\n+\s*$/g,`
`);J.content.isFull&&(M=X);let D;return J.outline!==void 0&&(D=this.createOutlineSummaryBody(n-j,N,J.outline,r+v,s)),{header:{original:M,outline:X},bodyIndent:r+v,body:{content:J.content.text,outline:D},fullRange:T}},u=Xt(e.map(l=>c(l)));return{outline:a,content:u}}};var q4e=.6,Lc=oe("ChunkingService"),die=(t,e)=>({file:t,text:e.text,sources:e.sources.map(r=>({start:r.start,end:r.end,range:ht.lift(r.range)})),range:ht.lift(e.range),isFullFile:e.isFullFile}),Mm=class{constructor(e){this.accessor=e;this.semanticChunkers=new Map;this.tokenizer=this.accessor.get(ge),this.naiveChunker=new zl(this.tokenizer),this.logger=this.accessor.get(ue).getLogger("WorkspaceChunkSearch")}canSemanticallyChunk(e){return!!this.getSemanticChunker(e)}async chunkFileNaive(e,r,n,i){let o=i?.maxTokenLength??await pie(this.accessor);if(n.isCancellationRequested)return[];let a=this.naiveChunker.genericWholeFileChunking(r,{maxTokenLength:o,rangeLimit:i?.limitToRange}).map(c=>die(e,c));return i?.validateChunkLengths&&this.validateChunkLengths(a,o),a.filter(c=>c.text)}async chunkFileSemantic(e,r,n,i){let o=i?.maxTokenLength??await pie(this.accessor);if(n.isCancellationRequested)return[];let s=i?.maxHeaderLengthFactor??q4e,a=[];try{let c=await this.getSemanticChunker(e)?.parse(r,{maxTokenLength:o,maxHeaderLengthFactor:s,limitToRange:i?.limitToRange},n);if(n.isCancellationRequested)return[];a.push(...Array.from(c??[],u=>die(e,u)))}catch(c){this.logger.error("Error parsing semantic chunks for the following file: "+e.fsPath),this.logger.error(c),a=[]}return a.length?(i?.validateChunkLengths&&this.validateChunkLengths(a,o),a.filter(c=>c.text)):this.chunkFileNaive(e,r,n,{maxTokenLength:o,validateChunkLengths:i?.validateChunkLengths,limitToRange:i?.limitToRange})}validateChunkLengths(e,r){for(let n of e){let i=this.tokenizer.tokenLength(n.text);i>r*1.2&&console.warn("Produced chunk that is over length limit",{file:n.file+"",range:n.range,chunkTokenLength:i,maxLength:r})}}getSemanticChunker(e){let r=Dm(e),n=this.semanticChunkers.get(r.languageId);if(n)return n;let i;switch(r.languageId){case"typescript":i=new Nc(this.accessor,"typescript");break;case"typescriptreact":i=new Nc(this.accessor,"tsx");break;case"javascript":case"javascriptreact":i=new Nc(this.accessor,"javascript");break;case"python":i=new MP(this.accessor,"python");break;case"java":i=new Nc(this.accessor,"java");break;case"cpp":case"c":i=new Nc(this.accessor,"cpp");break;case"csharp":i=new Nc(this.accessor,"csharp");break;case"go":i=new Nc(this.accessor,"go");break;case"markdown":i=new OP(this.accessor);break;case"ruby":i=new Nc(this.accessor,"ruby");break;case"rust":i=new Nc(this.accessor,"rust");break}return i&&this.semanticChunkers.set(r.languageId,i),i}};Mm=fe([ie(0,ct)],Mm);async function pie(t){return Y0(t,{valueFor4096:NP,maxMultiplier:4})}function Fm(t){return new Xe(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn)}async function Y0(t,e){let n=(await t.get(Ue).getChatEndpoint("gpt-3.5-turbo")).modelMaxPromptTokens/4096;return Jne(Math.round(e.valueFor4096*n),e.valueFor4096,e.valueFor4096*e.maxMultiplier)}var FP=W(require("vscode"));function fie(t){return typeof t=="string"?t:JSON.stringify(t)}var UP=class extends zA{constructor(){super(),this.config=FP.workspace.getConfiguration(wm),FP.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration(wm)&&(this.config=FP.workspace.getConfiguration(wm))})}getConfig(e){if(this.config[e.firstPart]&&this.config[e.firstPart][e.secondPart]!==void 0)return this.config[e.firstPart][e.secondPart];let r=this.config.get(e.id);return r!==void 0?r:e.defaultValue}dumpConfig(){let e={};try{let r=xa.contributes.configuration?.properties??{};for(let n in r){let o=n.replace(`${wm}.`,"").split(".").reduce((s,a)=>s[a],this.config);typeof o=="object"&&o!==null?Object.keys(o).filter(s=>s!=="secret_key").forEach(s=>e[`${n}.${s}`]=fie(o[s])):e[n]=fie(o)}}catch(r){console.error(`Failed to retrieve configuration properties ${r}`)}return e}};var h_=oe("IDebugOutputService");var hU=require("vscode"),mie=[];function hie(){return mie.join(`
`)}function H4e(t,e){t.push(G4e(e)),t.length>40&&t.shift()}var fU=class{constructor(e){this.session=e}onWillStartSession(){}onWillReceiveMessage(e){}onDidSendMessage(e){if(hU.debug.activeDebugSession!==this.session)return;let r=this.extractOutput(e);r&&H4e(mie,r)}extractOutput(e){if(e.event==="output"&&(e.body.category==="stdout"||e.body.category==="stderr"))return e.body.output}onWillStopSession(){}onError(e){}onExit(e,r){}};function G4e(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function gie(){return[hU.debug.registerDebugAdapterTrackerFactory("*",new mU)]}var mU=class{createDebugAdapterTracker(e){return new fU(e)}};var BP=class extends hr{constructor(){super();for(let e of gie())this._register(e)}get consoleOutput(){return hie()}};var qP=oe("IDevContainerConfigurationService");var HP=oe("IDialogService");var vie=W(require("vscode")),GP=class{showQuickPick(e,r,n){return vie.window.showQuickPick(e,r,n)}};var Ws=oe("IEmbeddingsComputer"),j4e=.72;function yie(t,e,r,n=j4e){return e.map(([i,o])=>{let s=0;for(let a=0;a<o.length;a++)s+=o[a]*t[a];return{score:s,item:i}}).filter(i=>i.score>n).sort((i,o)=>o.score-i.score).slice(0,r).map(i=>i.item)}function Um(t,e){let r=t.reduce((o,s,a)=>o+s*e[a],0),n=Math.sqrt(t.reduce((o,s)=>o+s*s,0)),i=Math.sqrt(e.reduce((o,s)=>o+s*s,0));return r/(n*i)}var xr=oe("IVSCodeExtensionContext");var fn=oe("IFileSystemService");var Q0=oe("IWorkbenchService");function z4e(t){switch(t){case"copilot-preview-ada-centralus":return"text-3-small";case"text-embedding-ada-002":default:return"text-ada-002"}}var jP=class{constructor(e,r,n,i){this.accessor=e;this.cacheType=r;this.cacheKey=n;this.cacheVersion=i;this.cacheVersionKey=`${n}-version`,this.fileSystem=e.get(fn)}get cacheStorageUri(){return this.cacheType===2?this.accessor.get(xr).storageUri:this.accessor.get(xr).globalStorageUri}get cacheVersionMementoStorage(){return this.cacheType===2?this.accessor.get(xr).workspaceState:this.accessor.get(xr).globalState}async updateCache(e){if(!this.cacheStorageUri||!this.fileSystem.isWritableFileSystem(this.cacheStorageUri.scheme))return;try{await this.fileSystem.stat(this.cacheStorageUri)}catch{await this.fileSystem.createDirectory(this.cacheStorageUri)}await this.cacheVersionMementoStorage.update(this.cacheVersionKey,this.cacheVersion),this.cacheVersionMementoStorage.get(this.cacheKey)&&await this.cacheVersionMementoStorage.update(this.cacheKey,void 0);let n=ut.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`);try{await(e===void 0?this.fileSystem.delete(n,{useTrash:!1}):this.fileSystem.writeFile(n,Buffer.from(JSON.stringify(e))))}catch{e!==void 0&&console.error(`Failed to write embeddings cache to ${n}`)}}async getCache(){if(!(!this.cacheStorageUri||this.cacheVersionMementoStorage.get(this.cacheVersionKey)!==this.cacheVersion))try{let r=await this.fileSystem.readFile(ut.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`));return JSON.parse(r.toString())}catch{return}}async clearCache(){return this.updateCache(void 0)}},Bm=class t extends jP{constructor(r,n,i,o,s){super(r,n,i,o);this.remoteCacheType=s;this.fetcher=r.get(Mr),this.remoteCacheVersionKey=`${i}-version-remote`}async getRemoteContainer(){let n=(await this.accessor.get(Ue).getEmbeddingsEndpoint()).model;return z4e(n)}async getRemoteCacheURL(){if(!this._remoteCacheURL){let r=await this.getRemoteContainer();this._remoteCacheURL=t.calculateRemoteCDNURL(r,this.remoteCacheType,this.cacheVersion)}return this._remoteCacheURL}async getRemoteCacheLatestUpdateURL(){if(!this._remoteCacheLatestUpdateURL){let r=await this.getRemoteContainer();this._remoteCacheLatestUpdateURL=t.calculateRemoteCDNLatestURL(r,this.remoteCacheType,this.cacheVersion)}return this._remoteCacheLatestUpdateURL}async fetchRemoteCache(){if(this._remoteCache)return this._remoteCache;let r=await this.getRemoteCacheURL();try{let n=await this.getRemoteCacheURL(),i=await this.fetcher.fetch(n,{method:"GET"});if(i.ok)return this._remoteCache=await i.json(),this._remoteCache;console.error(`Failed to fetch remote embeddings cache from ${n}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${r}`);return}}async fetchRemoteCacheLatest(){let r=await this.getRemoteCacheLatestUpdateURL();try{let n=await this.fetcher.fetch(r,{method:"GET"});if(n.ok)return n.text();console.error(`Failed to fetch remote embeddings cache from ${r}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${r}`);return}}async getCache(){let r=await this.fetchRemoteCacheLatest(),n=await super.getCache();if(n&&r===this.cacheVersionMementoStorage.get(this.remoteCacheVersionKey))return n;let i=await this.fetchRemoteCache();return await this.cacheVersionMementoStorage.update(this.remoteCacheVersionKey,r),await this.updateCache(i),i}async updateCache(r,n){if(r===void 0)return super.updateCache(r);if(!await super.getCache()||n)return super.updateCache(r)}static calculateRemoteCDNURL(r,n,i){return`https://embeddings.vscode-cdn.net/${r}/v${i}/${n}/core.json`}static calculateRemoteCDNLatestURL(r,n,i){return`https://embeddings.vscode-cdn.net/${r}/v${i}/${n}/latest.txt`}},gU=class t extends Bm{constructor(r,n,i,o,s){super(r,n,i,o,s);this._wasRemoteExtensionCacheUpdated=!1}async getBaseExtensionCDNURL(){if(!this._baseExtensionCDNURL){let r=await this.getRemoteContainer();this._baseExtensionCDNURL=t.calculateBaseRemoteExtensionCDNURL(r,this.remoteCacheType,this.cacheVersion)}return this._baseExtensionCDNURL}constructExposedCache(){if(!this._remoteExtensionCache)return;let r={...this._remoteExtensionCache.core};for(let n in this._remoteExtensionCache.extensions){let i=this._remoteExtensionCache.extensions[n];for(let o in i)r[o]=i[o]}return r}async fetchRemoteExtensionCache(r){let i=`${await this.getBaseExtensionCDNURL()}/${r}.json`;try{let o=await this.fetcher.fetch(i,{method:"GET"});if(o.ok)return await o.json();if(o.status===404)return{};console.error(`Failed to fetch remote embeddings cache from ${i}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${i}`);return}}async getCache(){let r=await super.getCache();if(r===void 0)return;let n={core:{},extensions:{}};r&&t.isEmbeddingsCacheEntriesWithExtensions(r)?n=r:n={core:r,extensions:{}};let i=t.getInstalledExtensionIds(this.accessor),o=!1;for(let a in n.extensions)i.includes(a)||(delete n.extensions[a],o=!0);let s=i.filter(a=>!(a in n.extensions)||n.extensions[a]===void 0);for(let a of s){let c=await this.fetchRemoteExtensionCache(a);c&&(n.extensions[a]=c)}return this._remoteExtensionCache=n,this._wasRemoteExtensionCacheUpdated=s.length>0||o,this.constructExposedCache()}async updateCache(r,n){let i=r?super.updateCache(this._remoteExtensionCache,n||this._wasRemoteExtensionCacheUpdated):super.updateCache(r,n||this._wasRemoteExtensionCacheUpdated);return this._wasRemoteExtensionCacheUpdated=!1,i}static isEmbeddingsCacheEntriesWithExtensions(r){return"core"in r&&"extensions"in r}static getInstalledExtensionIds(r){return r.get(Q0).getAllExtensions().filter(n=>!n.id.startsWith("vscode")).map(n=>n.id)}static calculateBaseRemoteExtensionCDNURL(r,n,i){return`https://embeddings.vscode-cdn.net/${r}/v${i}/${n}`}},zP=class{constructor(e,r,n,i,o,s,a,c){this._endpointProvider=n;this.cacheKey=o;this.embeddingsComputer=a;this._isIndexLoaded=!1;this._logger=r.get(ue).getPromptResponseLogger(e),this._items=new Map,c?.type&&!c.supportsExtensions?this._embeddingsCache=new Bm(r,i,o,s,c.type):c?.type&&c.supportsExtensions?this._embeddingsCache=new gU(r,i,o,s,c.type):this._embeddingsCache=new jP(r,i,o,s)}get isIndexLoaded(){return this._isIndexLoaded}set isIndexLoaded(e){this._isIndexLoaded=e}async rebuildCache(){return await this._embeddingsCache.clearCache(),this._items.clear(),this.calculateEmbeddings()}nClosestValues(e,r){let n=Array.from(this._items.values()).map(i=>{if(!i.embedding)return{item:i,similarity:0};let o=Um(e,i.embedding);return{item:i,similarity:o}});return n=n.filter(i=>i.similarity>0),n.sort((i,o)=>o.similarity-i.similarity),n.slice(0,r).map(i=>i.item)}hasItem(e){return this._items.has(e)}getItem(e){return this._items.get(e)}async calculateEmbeddings(){return this._calculationPromise?this._calculationPromise:(this._calculationPromise=this._calculateEmbeddings(),this._calculationPromise.then(()=>this._calculationPromise=void 0))}async _calculateEmbeddings(){let e=Date.now(),r=await this.getLatestItems(),n=await this._embeddingsCache.getCache(),i=new Map;for(let o of r){let s=o,a=this._items.get(o.key),c=o.key;a?.embedding?s=a:n&&n[c]&&(s={...o,...n[c]}),i.set(c,s)}this._items=i,await this._embeddingsCache.updateCache(n),this._logger.debug(`Embeddings for ${this.cacheKey} calculated in ${Date.now()-e}ms`),this.isIndexLoaded=!0}async fetchEmbeddingsForItems(e){return this._embeddingEndpoint??=await this._endpointProvider.getEmbeddingsEndpoint(),this.embeddingsComputer.computeEmbeddings(this._embeddingEndpoint,e.map(r=>this.getEmbeddingQueryString(r)),void 0)}};function X0(t){let e=t.split(".");return`${e[0]}.${e[1]}`}var VP=oe("IProjectTemplatesIndex"),g_=class{constructor(e){this._isIndexLoaded=!1;let r=X0(e.get(St).getEditorInfo().version);this.embeddingsCache=new Bm(e,1,"projectTemplateEmbeddings",r,"project-templates")}async updateIndex(){this._isIndexLoaded||(this._isIndexLoaded=!0,this._embeddings=await this.embeddingsCache.getCache())}async nClosestValues(e,r,n=0){if(await this.updateIndex(),!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[0]}`,similarity:0};let s=Um(e,o[1].embedding);return{key:`${o[0]} `,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}};g_=fe([ie(0,ct)],g_);function bU(t){let e=`Setting Id: ${t.key}
`;if(e+=`Type: ${t.type}
`,e+=`Description: ${t.description??t.markdownDescription??""}
`,t.enum){e+=`Possible values:
`;for(let r=0;r<t.enum.length;r++)e+=` - ${t.enum[r]} - ${t.enumDescriptions?.[r]??""}
`}return e+=`
`,e}var $P=class extends zP{constructor(r,n,i,o,s,a,c,u){super(r,n,n.get(Ue),i,o,s,a,u);this.relatedInformationConfig=c;this.isIndexLoaded=!1,this._telemetryLogger=n.get(Ee)}async provideRelatedInformation(r,n){let i=Date.now();if(!this.isIndexLoaded)return this.calculateEmbeddings(),this._logger.debug(`Related Information: Index not loaded yet triggering background calculation, returning ${Date.now()-i}ms`),[];if(n.isCancellationRequested)return this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`),[];let o=Date.now(),s=await this._endpointProvider.getEmbeddingsEndpoint(),a=await this.embeddingsComputer.computeEmbeddings(s,[r],{},n);if(this._logger.debug(`Related Information: Remote similarly request took ${Date.now()-o}ms`),n.isCancellationRequested||!a||!a[0])return this._logger.debug(`Related Information: Request cancelled or no embeddings computed, returning ${Date.now()-i}ms`),[];let c=[];for(let l of this._items.values()){if(n.isCancellationRequested){this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`);break}if(l.embedding){let d=Um(a[0],l.embedding);d>this.relatedInformationConfig.threshold&&c.push(this.toRelatedInformation(l,d))}}return this._logger.debug(`Related Information: Successfully Calculated, returning ${Date.now()-i}ms`),this.relatedInformationConfig.type===4&&this._telemetryLogger.sendInternalMSFTTelemetryEvent("relatedInformationSettings",{query:r}),c.sort((l,d)=>d.weight-l.weight).slice(0,this.relatedInformationConfig.maxResults)}},vU=class extends $P{constructor(r,n){super("CommandIdIndex",r,1,"commandEmbeddings",X0(r.get(St).getEditorInfo().version),n,{type:2,threshold:.7,maxResults:100},{type:"commands",supportsExtensions:!0});this.accessor=r}async getLatestItems(){let r=await this.accessor.get(Q0).getAllCommands();return r.push({label:"Extensions: Search the marketplace for extensions",command:"workbench.extensions.search",keybinding:"Not set"}),r.push({label:"Extensions: Install extension from marketplace",command:"workbench.extensions.installExtension",keybinding:"Not set"}),r.map(n=>({key:n.command,label:n.label.replace("View: Toggle","View: Toggle or Show or Hide"),originalLabel:n.label,keybinding:n.keybinding??"Not set"}))}getEmbeddingQueryString(r){return`${r.label} - ${r.key}`}toRelatedInformation(r,n){return{type:2,weight:n,command:r.key}}},yU=class extends $P{constructor(r,n){super("SettingsIndex",r,1,"settingEmbeddings",X0(r.get(St).getEditorInfo().version),n,{type:4,threshold:.7,maxResults:100},{type:"settings",supportsExtensions:!0});this.accessor=r;this.isIndexLoaded=!1}async getLatestItems(){let r=await this.accessor.get(Q0).getAllSettings(),n=[];for(let i of Object.keys(r)){let o=r[i];o.deprecationMessage||o.markdownDeprecationMessage||n.push({...o,key:i})}return n}getEmbeddingQueryString(r){return bU(r)}toRelatedInformation(r,n){return{type:4,weight:n,setting:r.key}}},qm=oe("ICombinedEmbeddingIndex"),v_=class{constructor(e){this.commandIdIndex=new vU(e,e.get(Ws)),this.settingsIndex=new yU(e,e.get(Ws))}async loadIndexes(){await Promise.all([this.commandIdIndex.isIndexLoaded?Promise.resolve():this.commandIdIndex.calculateEmbeddings(),this.settingsIndex.isIndexLoaded?Promise.resolve():this.settingsIndex.calculateEmbeddings()])}async nClosestValues(e,r){return await this.loadIndexes(),{commands:this.commandIdIndex.nClosestValues(e,r),settings:this.settingsIndex.nClosestValues(e,r)}}hasSetting(e){return this.settingsIndex.hasItem(e)}hasCommand(e){return this.commandIdIndex.hasItem(e)}getSetting(e){return this.settingsIndex.getItem(e)}getCommand(e){return this.commandIdIndex.getItem(e)}};v_=fe([ie(0,ct)],v_);var Lp=class t{constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return e.get(Am).sendExpProblemTelemetry({reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};var y_=oe("IExpConfigMaker"),WP=class{async fetchExperiments(e,r){let n=e.get(Mr),i;try{i=await n.fetch("https://default.exp-tas.com/vscode/ab",{method:"GET",headers:r})}catch(c){return Lp.createFallbackConfig(e,`Error fetching ExP config: ${c}`)}if(!i.ok)return Lp.createFallbackConfig(e,`ExP responded with ${i.status}`);let o=await i.json(),s=o.Configs.find(c=>c.Id==="vscode")??{Id:"vscode",Parameters:{}},a=Object.entries(s.Parameters).map(([c,u])=>c+(u?"":"cf"));return new Lp(s.Parameters,o.AssignmentContext,a.join(";"))}},KP=class{async fetchExperiments(e,r){return Lp.createEmptyConfig()}};var V4e={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},YP=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=V4e[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};var QP=class{constructor(e){this.prefix=e}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},_U=class extends QP{getValue(e){return this.prefix}getUpcomingValues(e){return[]}},Sie=t=>new _U(t),XP=class extends QP{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let s of i)for(let a of o)n.push(this.prefix+s+a);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets===void 0?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs===void 0?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var Eie="X-Copilot-ClientTimeBucket",xU=class{now(){return new Date}},JP=class{constructor(e,r=new xU){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=Sie(e)}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new XP(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(Eie,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(Eie,o))}}};var SU=class{constructor(e){this.accessor=e;this.cache=new Ol(200)}async fetchExpConfig(e){let r=this.cache.get(e.stringify());return r||(r=new EU(()=>this.accessor.get(y_).fetchExperiments(this.accessor,e.toHeaders()),1e3*60*60),this.cache.set(e.stringify(),r)),r.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},EU=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}},Hm=oe("IFeatures"),qu=class{constructor(e){this.accessor=e;this.staticFilters={};this.dynamicFilters={};this.upcomingDynamicFilters={};this.assignments=new SU(this.accessor)}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}getDynamicFilterValues(){let e={};for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}async getAssignment(e,r={},n){let i=this.getGranularityDirectory(),o=this.makeFilterSettings(r),s=i.extendFilters(o),a=await this.getExpConfig(s.newFilterSettings);i.update(o,+(a.variables.copilotbycallbuckets??NaN),+(a.variables.copilottimeperiodsizeinh??NaN));let c=i.extendFilters(o),u=c.newFilterSettings,l=await this.getExpConfig(u),d=new Promise(p=>setTimeout(p,qu.upcomingDynamicFilterCheckDelayMs));for(let p of c.otherFilterSettingsToPrefetch)d=d.then(async()=>{await new Promise(f=>setTimeout(f,qu.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(p)});return this.prepareForUpcomingFilters(u),n&&(n.filtersAndExp={exp:l,filters:u}),l.variables[e]}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.accessor.get(St).machineId;this.granularityDirectory=new JP(e)}return this.granularityDirectory}makeFilterSettings(e){return new YP({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e){try{return this.assignments.fetchExpConfig(e)}catch(r){return Lp.createFallbackConfig(this.accessor,`Error fetching ExP config: ${r}`)}}async prepareForUpcomingFilters(e){if(!(new Date().getMinutes()<60-qu.upcomingTimeBucketMinutes))for(let[r,n]of Object.entries(this.upcomingDynamicFilters))await new Promise(i=>setTimeout(i,qu.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,n()))}async chatExpModel(){return await this.getAssignment("copilotchatexpmodel")??""}async chatMaxNumTokens(){return await this.getAssignment("copilotchatmaxnumtokens")??0}async chatOffTopicModel(){return await this.getAssignment("copilotchatofftopicmodel")??""}async chatOffTopicModelTokenizer(){return await this.getAssignment("copilotchatofftopicmodeltokenizer")??""}async chatOffTopicModelThreshold(){return await this.getAssignment("copilotchatofftopicmodelthreshold")??0}async addExpAndFilterToTelemetry(e){let r=this.makeFilterSettings({});e.filtersAndExp={filters:r,exp:await this.getExpConfig(r)}}};qu=fe([ie(0,ct)],qu);var TU=oe("IEditorExperimentFilters");function Iie(t){let e=t.get(Hm),r=t.get(ke);e.registerStaticFilters($4e(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>r.getConfig(Ae.DebugOverrideEngine))}function $4e(t){let e=W4e(t),r=t.get(TU).addEditorSpecificFilters();return{...e,...r}}function W4e(t){let e=t.get(St),r=e.getEditorInfo();return{"X-VSCode-AppVersion":Cie(r.version),"X-MSEdge-ClientId":e.machineId,"X-VSCode-ExtensionName":e.getName(),"X-VSCode-ExtensionVersion":Cie(e.getVersion()),"X-VSCode-TargetPopulation":"public"}}function Cie(t){return t.split("-")[0]}var CU=W(require("vscode"));var ZP=class{addEditorSpecificFilters(){return{"X-VSCode-Build":CU.env.appName,"X-VSCode-Language":CU.env.language}}};var ek=oe("IGitCommitMessageService");var oc=oe("IGitExtensionService");var ei=oe("IGitService");function b_(t){if(!t)return;if(t.remoteFetchUrls?.length===1)return IU(t.remoteFetchUrls[0]);let e=t.remotes.findIndex(n=>n===t.upstreamRemote);if(e!==-1){let n=t.remoteFetchUrls?.[e];if(n){let i=IU(n);if(i)return i}}let r=t.remotes.findIndex(n=>n==="origin");if(r!==-1){let n=t.remoteFetchUrls?.[r];if(n){let i=IU(n);if(i)return i}}}function IU(t){t=t.replace(/^git@/,"").replace(/\.git$/,"");try{let e=ut.parse(t);if(e.authority!=="github.com"&&e.scheme!=="github.com")return;let r=e.path.replace(/^\//,"").trim(),[n,i,o]=r.split("/");return n&&i?`${n}/${i}`:void 0}catch{return}}function wie(t){if(t.includes("@")&&t.includes(":")){let e="https://"+t.substring(t.indexOf("@")+1).replace(":","/"),r=new URL(e);return r.username="",r.password="",r.search="",r.toString()}else{let e=new URL(t);return e.protocol="https",e.username="",e.password="",e.search="",e.toString()}}var Gm=W(require("vscode"));var tk=class{constructor(e){this._onDidChange=new Gm.EventEmitter;this.onDidChange=this._onDidChange.event;this._extensionEnablement=void 0;this._disposables=[];this._logger=e.get(ue).getLogger("gitExtensionService"),this._logger.info("Initializing Git extension service."),this._disposables.push(...this._initializeExtensionApi())}getExtensionApi(){return this._api}get extensionAvaiable(){return this._extensionEnablement===void 0?!!Gm.extensions.getExtension("vscode.git"):this._extensionEnablement}_initializeExtensionApi(){let e=[],r=Gm.extensions.getExtension("vscode.git"),n=async()=>{let i;try{i=await r.activate(),this._logger.info("Successfully activated the vscode.git extension.")}catch(s){this._logger.error("Failed to activate the vscode.git extension.",s);return}let o=s=>{this._logger.info(`Enablement state of the vscode.git extension: ${s}.`),this._extensionEnablement=s,s?(this._api=i.getAPI(1),this._onDidChange.fire({enabled:!0}),this._logger.info("Successfully registered Git commit message provider.")):(this._api=void 0,this._onDidChange.fire({enabled:!1}))};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(r)n();else{this._logger.info("vscode.git extension is not yet activated.");let i=Gm.extensions.onDidChange(()=>{!r&&Gm.extensions.getExtension("vscode.git")&&(r=Gm.extensions.getExtension("vscode.git"),n(),i.dispose())})}return e}};var wU=W(require("vscode"));var Hu=class extends hr{constructor(r){super();this.gitExtensionService=r;this._onDidOpenRepository=new gr;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new gr;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidFinishInitialRepositoryDiscovery=new gr;this.onDidFinishInitialization=this._onDidFinishInitialRepositoryDiscovery.event;this._isInitialized=!1;this._register(this._onDidOpenRepository),this._register(this._onDidCloseRepository),this._register(this._onDidFinishInitialRepositoryDiscovery);let n=this.gitExtensionService.getExtensionApi();n?this.registerGitAPIListeners(n):this._register(this.gitExtensionService.onDidChange(i=>{if(i.enabled){let o=this.gitExtensionService.getExtensionApi();o&&this.registerGitAPIListeners(o)}else this._onDidFinishInitialRepositoryDiscovery.fire()}))}registerGitAPIListeners(r){this._register(r.onDidOpenRepository(n=>{let i=Hu.repoToRepoContext(n);i&&this._onDidOpenRepository.fire(i)})),this._register(r.onDidCloseRepository(n=>{let i=Hu.repoToRepoContext(n);i&&this._onDidCloseRepository.fire(i)})),r.state==="initialized"&&(this._onDidFinishInitialRepositoryDiscovery.fire(),this._isInitialized=!0),this._register(r.onDidChangeState(n=>{n==="initialized"&&(this._onDidFinishInitialRepositoryDiscovery.fire(),this._isInitialized=!0)}))}get isInitialized(){return this._isInitialized}getRepository(r){let n=this.gitExtensionService.getExtensionApi();if(n)return Hu.repoToRepoContext(n.getRepository(r))}async initialize(){if(this._isInitialized)return;let r=wU.workspace.workspaceFolders;if(!r)return;let n=this.gitExtensionService.getExtensionApi();if(n)for(let i of r)await n.openRepository(i.uri).catch(()=>{})}static repoToRepoContext(r){if(r)return{rootUri:r.rootUri,headBranchName:r.state.HEAD?.name,upstreamBranchName:r.state.HEAD?.upstream?.name,upstreamRemote:r.state.HEAD?.upstream?.remote,isRebasing:r.state.rebaseCommit!==null,remotes:r.state.remotes.map(n=>n.name),remoteFetchUrls:r.state.remotes.map(n=>n.fetchUrl)}}get repositories(){if(!wU.workspace.workspaceFolders)return[];let n=this.gitExtensionService.getExtensionApi();return n?Xt(n.repositories.map(i=>Hu.repoToRepoContext(i))):[]}};Hu=fe([ie(0,oc)],Hu);var Oc=oe("IGithubRepositoryService");var __=class{constructor(e){this.accessor=e;this.githubRepositoryInfoCache=new Map;this.fetcherService=e.get(Mr)}async _doGetRepositoryInfo(e,r){let n=await this.accessor.get(Et).getAnyGitHubToken(),i={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};return n&&(i.Authorization=`Bearer ${n}`),this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}`,{method:"GET",headers:i})}async getRepositoryInfo(e,r){let n=this.githubRepositoryInfoCache.get(`${e}/${r}`);if(n)return n;let i=await this._doGetRepositoryInfo(e,r);if(i.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(`${e}/${r}`,o),o}throw new Error(`Failed to fetch repository info for ${e}/${r}`)}async isAvailable(e,r){try{return(await this._doGetRepositoryInfo(e,r)).ok}catch{return!1}}async getRepositoryItems(e,r,n){let i=[];try{let o=await this.accessor.get(Et).getPermissiveGitHubToken({silent:!0}),s=n.split("/").map(c=>encodeURIComponent(c)).join("/"),a=await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}/contents/${s}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${o}`}});if(a.ok){let c=await a.json();if(Array.isArray(c))for(let u of c)"name"in u&&"path"in u&&"type"in u&&"html_url"in u&&(i.push({name:u.name,path:u.path,type:u.type,html_url:u.html_url}),u.type==="dir"&&i.push(...await this.getRepositoryItems(e,r,u.path)))}else return console.error(`Failed to fetch contents from ${e}:${r}:${n}`),[]}catch{return console.error(`Failed to fetch contents from ${e}:${r}:${n}`),[]}return i}async getRepositoryItemContent(e,r,n){try{let i=await this.accessor.get(Et).getPermissiveGitHubToken({silent:!0}),o=n.split("/").map(a=>encodeURIComponent(a)).join("/"),s=await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}/contents/${o}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${i}`}});if(s.ok){let a=await s.json();if("content"in a){let c=Buffer.from(a.content,"base64");return new Uint8Array(c)}throw new Error("Unexpected data from GitHub")}}catch{console.error(`Failed to contents from ${e}:${r}:${n}`)}}};__=fe([ie(0,ct)],__);var rk=`

**Note:** Some files were excluded from the context due to content exclusion rules. Click [here](https://docs.github.com/en/copilot/managing-github-copilot-in-your-organization/configuring-content-exclusions-for-github-copilot) to learn more.`,De=oe("IIgnoreService"),Rie=class t{static{this.Instance=new t}dispose(){}async init(){}async isCopilotIgnored(e){return!1}async asMinimatchPattern(){}async sessionInfo(){return""}};var Ko=oe("ILanguageDiagnosticService"),x_=class{constructor(e){this._ignoreService=e}waitForNewDiagnostics(e,r,n=5e3){let i,o,s;return new Promise(a=>{i=r.onCancellationRequested(()=>a([])),s=setTimeout(()=>a(this.getDiagnostics(e)),n),o=this.onDidChangeDiagnostics(c=>{for(let u of c.uris)if(S7(u,e)){a(this.getDiagnostics(e));break}})}).finally(()=>{i.dispose(),o.dispose(),clearTimeout(s)})}};x_=fe([ie(0,De)],x_);function Aie(t){return t.map(e=>e.range).reduce((e,r)=>e.union(r))}function Pie(t){return t.severity===kc.Error}var hi=oe("ILanguageFeaturesService");function Op(t){return typeof t=="object"&&t!==null&&"targetUri"in t}var RU=W(require("vscode"));var nk=class extends x_{constructor(){super(...arguments);this.onDidChangeDiagnostics=RU.languages.onDidChangeDiagnostics}getDiagnostics(r){return RU.languages.getDiagnostics(r)}};var jm=W(require("vscode")),ik=class{constructor(){}async getDefinitions(e,r){return await jm.commands.executeCommand("vscode.executeDefinitionProvider",e,r)}async getImplementations(e,r){return await jm.commands.executeCommand("vscode.executeImplementationProvider",e,r)}async getReferences(e,r){return await jm.commands.executeCommand("vscode.executeReferenceProvider",e,r)}async getWorkspaceSymbols(e){return await jm.commands.executeCommand("vscode.executeWorkspaceSymbolProvider",e)}async getDocumentSymbols(e){return await jm.commands.executeCommand("vscode.executeDocumentSymbolProvider",e)}getDiagnostics(e){return jm.languages.getDiagnostics(e)}};var ok=oe("IKerberosLoader");var sk=oe("IWindowsCaCertsLoader");var AU=W(require("vscode")),ak=class{async loadKerberos(){try{return require(`${AU.env.appRoot}/node_modules.asar/kerberos`)}catch{}try{return require(`${AU.env.appRoot}/node_modules/kerberos`)}catch{}}};var Nie=require("vscode");var Lie="github-enterprise",kie="https://github.com";function Die(t){return t.getConfig(Ae.AuthProvider)==="github-enterprise"?Nie.workspace.getConfiguration(Lie).get("uri")??kie:kie}var S_=class extends KA{constructor(r){super(Die(r));this.configurationService=r}updateBaseUrl(r,n){super.updateBaseUrl(r,Die(this.configurationService))}};S_=fe([ie(0,ke)],S_);function Oie(t,e){(t.affectsConfiguration(`${wm}.advanced`)||t.affectsConfiguration(`${Lie}.uri`))&&e.get(o_).updateBaseUrl(e)}var Mie=W(require("os")),PU=W(require("vscode")),ck=class{async loadCaCerts(){let e=await this.loadBuiltInWinCAModule(),r=new Set,n=new e.Crypt32;try{let i;for(;i=n.next();)r.add(K4e(i))}finally{n.done()}return Array.from(r)}async loadBuiltInWinCAModule(){try{return require(`${PU.env.appRoot}/node_modules.asar/@vscode/windows-ca-certs`)}catch{}try{return require(`${PU.env.appRoot}/node_modules/@vscode/windows-ca-certs`)}catch{}}};function K4e(t){let e=["-----BEGIN CERTIFICATE-----"],r=t.toString("base64");for(let n=0;n<r.length;n+=64)e.push(r.substr(n,64));return e.push("-----END CERTIFICATE-----",""),e.join(Mie.EOL)}var J0=oe("INotebookService");var E_=require("vscode");var Fie=require("vscode");var uk=class{constructor(){this._onDidChangeNotebookCellExecutionStateEmitter=new gr;this.onDidChangeNotebookCellExecutionState=this._onDidChangeNotebookCellExecutionStateEmitter.event;this._disposables=[];this._cellExecution=new WeakMap;this._disposables.push(Fie.workspace.onDidChangeNotebookDocument(e=>{for(let r of e.cellChanges)r.executionSummary&&(r.executionSummary.success===void 0?this._cellExecution.has(r.cell)||(this._cellExecution.set(r.cell,!0),this._onDidChangeNotebookCellExecutionStateEmitter.fire({cell:r.cell,state:2})):(this._cellExecution.delete(r.cell),this._onDidChangeNotebookCellExecutionStateEmitter.fire({cell:r.cell,state:1})))}))}dispose(){this._disposables.forEach(e=>e.dispose())}};var lk=class{constructor(){this._cellExecution=new Map;this._executionService=new uk;this._disposables=[];this._registerExecutionListener()}_hasJupyterExtension(){return E_.extensions.getExtension("ms-toolsai.jupyter")?.isActive}async getVariables(e){if(!this._hasJupyterExtension())try{let r=await E_.commands.executeCommand("vscode.executeNotebookVariableProvider",e);return r&&Array.isArray(r)?r.map(this._convertResult):[]}catch{return[]}try{let r=await E_.commands.executeCommand("jupyter.listVariables",e);return r&&Array.isArray(r)?r.map(this._convertResult):[]}catch{return[]}}_convertResult(e){return"variable"in e?e:{variable:e,hasNamedChildren:!1,indexedChildrenCount:0}}async getPipPackages(e){if(!this._hasJupyterExtension())return[];try{return await E_.commands.executeCommand("jupyter.listPipPackages",e)}catch{return[]}}setVariables(e,r){}_registerExecutionListener(){this._disposables.push(this._executionService.onDidChangeNotebookCellExecutionState(e=>{let r=e.cell,i=r.notebook.uri.toString(),o=this._cellExecution.get(i);o||(o=[],this._cellExecution.set(i,o));let s=o.findIndex(a=>a.cell===r);s!==-1&&o.splice(s,1),o.push({cell:r,executionCount:r.executionSummary?.executionOrder})}))}getCellExecutions(e){return this._cellExecution.get(e.toString())?.map(r=>r.cell)||[]}dispose(){this._disposables.forEach(e=>e.dispose())}};var Uie=require("vscode"),dk=class{async showWarningMessage(e,...r){return{title:await Uie.window.showWarningMessage(e,...r.map(i=>i.title))}}};var loe=W(require("path"));var Bie=require("worker_threads"),kU=class{constructor(e,r,n){this.logger=n;this.handlers=new Map;this.nextId=1;this.worker=new Bie.Worker(e,r),this.worker.on("message",({id:i,err:o,res:s})=>{let a=this.handlers.get(i);a&&(this.handlers.delete(i),o?a.reject(o):a.resolve(s))}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))})}terminate(){this.worker.removeAllListeners(),this.worker.terminate(),this.handlers.clear()}handleError(e){this.logger?.exception(e);for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}remoteCall(e,r){let n=this.nextId++,i,o,s=new Promise((a,c)=>{i=a,o=c});return this.handlers.set(n,{resolve:i,reject:o}),this.worker.postMessage({id:n,fn:e,args:r}),s}},zm=class{constructor(e,r,n){this.worker=new kU(e,r,n);let i={get:(o,s)=>(typeof s=="string"&&!o[s]&&(o[s]=(...a)=>{if(!this.worker)throw new Error("Worker was terminated!");return this.worker.remoteCall(s,a)}),o[s])};this.proxy=new Proxy(Object.create(null),i)}terminate(){this.worker.terminate()}};var VU={};an(VU,{_clean:()=>X4e,_extractDoc:()=>E3e,_getCallExpressions:()=>o3e,_getClassDeclarations:()=>a3e,_getClassReferences:()=>l3e,_getCoarseParentScope:()=>h3e,_getDocumentableNodeIfOnIdentifier:()=>v3e,_getFineScopes:()=>b3e,_getFixSelectionOfInterest:()=>g3e,_getFunctionBodies:()=>m3e,_getFunctionDefinitions:()=>s3e,_getFunctionPositions:()=>f3e,_getNodeMatchingSelection:()=>hk,_getNodeToDocument:()=>_3e,_getNodeToExplain:()=>x3e,_getSemanticChunkTree:()=>p3e,_getStructure:()=>C3e,_getSymbols:()=>d3e,_getTestableNode:()=>y3e,_getTypeDeclarations:()=>c3e,_getTypeReferences:()=>u3e,_parse:()=>Qi});var pC=W(require("path"));function qie(t,e,r){let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n}function lC(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let i=t[n];e(i,r)>0&&(r=i)}return r}var DU=class{constructor(e=10){this.values=new Map;this.lruKeys=[];if(e<1)throw new Error("Cache size must be at least 1");this.size=e}removeKeyFromLRU(e){let r=this.lruKeys.indexOf(e);r!==-1&&this.lruKeys.splice(r,1)}touchKeyInLRU(e){this.removeKeyFromLRU(e),this.lruKeys.push(e)}clear(){this.values.clear(),this.lruKeys=[]}deleteKey(e){this.removeKeyFromLRU(e);let r=this.values.get(e);return r!==void 0&&this.values.delete(e),r}get(e){if(this.values.has(e)){let r=this.values.get(e);return this.touchKeyInLRU(e),r}}keys(){return this.lruKeys.slice()}getValues(){return this.values.values()}put(e,r){let n;if(!this.values.has(e)&&this.lruKeys.length===this.size){let i=this.lruKeys.shift(),o=this.deleteKey(i);n=[i,o]}return this.values.set(e,r),this.touchKeyInLRU(e),n}},pk=class{constructor(e){this.actual=new DU(e)}dispose(){this.clear()}clear(){let e=this.actual.getValues();for(let r of e)r.dispose();this.actual.clear()}deleteKey(e){let r=this.actual.deleteKey(e);r&&r.dispose()}get(e){return this.actual.get(e)}keys(){return this.actual.keys()}getValues(){return this.actual.getValues()}put(e,r){let n=this.actual.put(e,r);n&&n[1].dispose()}};var Yi={doesContain:(t,e)=>t.startIndex<=e.startIndex&&e.endIndex<=t.endIndex,ofSyntaxNode:t=>({startIndex:t.startIndex,endIndex:t.endIndex}),compare:(t,e)=>t.startIndex-e.startIndex||e.endIndex-t.endIndex,isEqual:(t,e)=>Yi.compare(t,e)===0,doIntersect:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return r<n},len:t=>t.endIndex-t.startIndex,intersectionSize:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return Math.max(n-r,0)},isTreeSitterOffsetRange(t){return typeof t.startIndex=="number"&&typeof t.endIndex=="number"}},Gu={isEqual(t,e){return t.row===e.row&&t.column===e.column},isBefore(t,e){return t.row<e.row||t.row===e.row&&t.column<e.column},isAfter(t,e){return Gu.isBefore(e,t)},isBeforeOrEqual(t,e){let r=Gu.isBefore(t,e),n=Gu.isEqual(t,e);return!!(r||n)},equals(t,e){return t.column===e.column&&t.row===e.row},isAfterOrEqual(t,e){return Gu.isBeforeOrEqual(e,t)},ofPoint:t=>({row:t.row,column:t.column})},$m={doesContain:(t,e)=>Gu.isBeforeOrEqual(t.startPosition,e.startPosition)&&Gu.isAfterOrEqual(t.endPosition,e.endPosition),equals:(t,e)=>Gu.equals(t.startPosition,e.startPosition)&&Gu.equals(t.endPosition,e.endPosition),ofSyntaxNode:t=>({startPosition:t.startPosition,endPosition:t.endPosition})},fk={ofSyntaxNode:t=>({type:t.type,startIndex:t.startIndex,endIndex:t.endIndex})},ju={ofSyntaxNode:t=>({range:$m.ofSyntaxNode(t),startIndex:t.startIndex,text:t.text,endIndex:t.endIndex})},Vm=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new ln("startIndex must be less than endIndex");let o=e;for(let s of i){if(s.startIndex<o)throw new ln("Invalid child startIndex");if(s.endIndex>r)throw new ln("Invalid child endIndex");o=Math.max(s.endIndex,o)}}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return r(this),e.join(`
`)}};var mk=class{constructor(e,r){this.syntaxTreeRoot=r;this.roots=[];this.formTree(e)}formTree(e){e.sort((o,s)=>o.mainBlock.startIndex-s.mainBlock.startIndex||o.mainBlock.endIndex-s.mainBlock.endIndex);let r=[],n=()=>r[r.length-1],i=(o,s)=>o.mainBlock.startIndex===s.mainBlock.startIndex&&o.mainBlock.endIndex===s.mainBlock.endIndex;for(let o of e){let s={info:o,children:[]},a=n();if(!a){this.roots.push(s),r.push(s);continue}if(!i(a.info,o)){for(;a&&!Yi.doesContain(a.info.mainBlock,o.mainBlock);)r.pop(),a=n();a?a.children.push(s):this.roots.push(s),r.push(s)}}}};var Sr=(()=>{function t(e,...r){return e.length===1?e[0]:e.reduce((n,i,o)=>`${n}${i}${r[o]||""}`,"")}return{typescript:t,javascript:t,python:t,go:t,ruby:t,csharp:t,cpp:t,java:t,rust:t}})();function Mc(t,e){return Object.fromEntries(t.map(r=>[r,e]))}var Hie={...Mc(["javascript","typescript","tsx"],[`[
			(call_expression
				function: (identifier) @identifier)
			(call_expression
				function: (member_expression
					(property_identifier) @identifier))
		] @call_expression`]),python:[`[
			(call
				function: (identifier) @identifier)
			(call
				function: (attribute
					attribute: (identifier) @identifier))
		] @call_expression`],csharp:[`[
			(invocation_expression
				function: (identifier) @identifier)
			(invocation_expression
				function: (member_access_expression
					name: (identifier) @identifier))
		] @call_expression`],go:[`[
			(call_expression
				((selector_expression
					(field_identifier) @identifier)))
			(call_expression
				(identifier) @identifier)
		] @call_expression`],java:[`[
			(method_invocation
				name: (identifier) @identifier)
		] @call_expression`],ruby:[`[
			(call (identifier) @identifier
				(#not-match? @identifier "new|send|public_send|method"))
			(call
				receiver: (identifier)
				method: (identifier) @method
				(#match? @method "^(send|public_send|method)")
				arguments: (argument_list
					(simple_symbol) @symbol))
		] @call_expression`],cpp:[`[
			(function_declarator
				(identifier) @identifier)
			(function_declarator
				(field_identifier) @identifier)
			(call_expression (identifier) @identifier)
			(call_expression
				(field_expression
					field: (field_identifier) @identifier))
			(call_expression
				(call_expression
					(primitive_type)
					(argument_list
						(pointer_expression
						(identifier) @identifier))))
		] @call_expression`],rust:[`[
			(call_expression (identifier) @identifier)
			(call_expression (field_expression (identifier) (field_identifier) @identifier))
			(call_expression (scoped_identifier (identifier) (identifier) @identifier (#not-match? @identifier "new")))
		] @call_expression`]},Gie={...Mc(["javascript","typescript","tsx"],["(class_declaration) @class_declaration"]),java:["(class_declaration) @class_declaration"],csharp:["(class_declaration) @class_declaration"],python:["(class_definition) @class_declaration"],cpp:["(class_specifier) @class_declaration"],ruby:["(class) @class_declaration"],go:[`(type_declaration
			(type_spec
				(type_identifier) @type_identifier)) @class_declaration`],rust:["(impl_item (type_identifier) @type_identifier) @class_declaration"]},jie={typescript:[`[
			(interface_declaration)
			(type_alias_declaration)
		] @type_declaration`],csharp:[`(interface_declaration
			(identifier) @type_identifier) @type_declaration`],cpp:[`[
			(struct_specifier
				(type_identifier) @type_identifier)
			(union_specifier
				(type_identifier) @type_identifier)
			(enum_specifier
				(type_identifier) @type_identifier)
		] @type_declaration`],java:[`(interface_declaration
			(identifier) @type_identifier) @type_declaration`],go:[`(type_declaration
			(type_spec
				(type_identifier) @type_identifier)) @type_declaration`],ruby:["((constant) @type_identifier) @type_declaration"],python:[`(class_definition
			(identifier) @type_identifier) @type_declaration`]},zie={typescript:["(type_identifier) @type_identifier"],go:["(type_identifier) @type_identifier"],ruby:["(constant) @type_identifier"],csharp:[`[
			(base_list
				(identifier) @type_identifier)
			(variable_declaration
				(identifier) @type_identifier)
		]`],cpp:["(type_identifier) @type_identifier"],java:["(type_identifier) @type_identifier"],python:[`[
			(type (identifier) @type_identifier)
			(argument_list
				(identifier) @type_identifier)
		]`]},Vie={...Mc(["javascript","typescript","tsx"],[`(new_expression
			constructor: (identifier) @new_expression)`]),python:[`(call
			function: (identifier) @new_expression)`],csharp:[`(object_creation_expression
			(identifier) @new_expression)`],java:[`(object_creation_expression
			(type_identifier) @new_expression)`],cpp:[`[
			(declaration
				(type_identifier) @new_expression)
			(class_specifier
				(type_identifier) @new_expression)
		]`],go:["(composite_literal (type_identifier) @new_expression)"],ruby:[`((call
			receiver: ((constant) @new_expression)
			method: (identifier) @method)
				(#eq? @method "new"))`],rust:[`(call_expression
			(scoped_identifier
				(identifier) @new_expression
				(identifier) @identifier
				(#eq? @identifier "new")))`]},$ie={python:[`[
			(function_definition
				name: (identifier) @identifier
				body: (block
						(expression_statement (string))? @docstring) @body)
			(assignment
				left: (identifier) @identifier
				right: (lambda) @body)
		] @function`,'(ERROR ("def" (identifier) (parameters))) @function'],...Mc(["javascript","typescript","tsx"],[`[
			(function
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(function_declaration
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(generator_function
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(generator_function_declaration
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(method_definition
				name: (property_identifier)? @identifier
				body: (statement_block) @body)
			(arrow_function
				body: (statement_block) @body)
		] @function`]),go:[`[
			(function_declaration
				name: (identifier) @identifier
				body: (block) @body)
			(method_declaration
				name: (field_identifier) @identifier
				body: (block) @body)
		] @function`],ruby:[`[
			(method
				name: (_) @identifier
				parameters: (method_parameters)? @params
				[(_)+ "end"] @body)
			(singleton_method
				name: (_) @identifier
				parameters: (method_parameters)? @params
				[(_)+ "end"] @body)
		] @function`],csharp:[`[
			(constructor_declaration
				(identifier) @identifier
				(block) @body)
			(destructor_declaration
				(identifier) @identifier
				(block) @body)
			(operator_declaration
				(block) @body)
			(method_declaration
				(identifier) @identifier
				(block) @body)
			(local_function_statement
				(identifier) @identifier
				(block) @body)
		] @function`],cpp:[`[
			(function_definition
				(_
					(identifier) @identifier)
					(compound_statement) @body)
			(function_definition
				(function_declarator
					(qualified_identifier
						(identifier) @identifier))
					(compound_statement) @body)
		] @function`],java:[`[
			(constructor_declaration
				name: (identifier) @identifier
				body: (constructor_body) @body)
			(method_declaration
				name: (_) @identifier
				body: (block) @body)
			(lambda_expression
				body: (block) @body)
		] @function`],rust:[`[
			(function_item (identifier) @identifier)
			(let_declaration (identifier) @identifier)
		] @function`]},Wie={javascript:[Sr.javascript`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`],...Mc(["typescript","tsx"],[Sr.typescript`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]),java:[Sr.java`((block_comment) @block_comment
			(#match? @block_comment "^\\\\/\\\\*\\\\*")) @docComment`],cpp:[Sr.cpp`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`],csharp:[Sr.csharp`(
			((comment) @c
				(#match? @c "^\\\\/\\\\/\\\\/"))+
		) @docComment`],rust:[Sr.rust`((line_comment) @comment
			(#match? @comment "^\/\/\/|^\/\/!"))+ @docComment`],go:[Sr.go`((comment)+) @docComment`],ruby:[Sr.ruby`((comment)+) @docComment`],python:[`(expression_statement
			(string) @docComment)`]},Kie={javascript:[Sr.javascript`[
			(function_declaration
				(identifier) @function.identifier
			) @function

			(generator_function_declaration
				name: (identifier) @generator_function.identifier
			) @generator_function

			(class_declaration
				name: (identifier) @class.identifier ;; note: (type_identifier) in typescript
				body: (class_body
							(method_definition
								name: (property_identifier) @method.identifier
							) @method
						)
			) @class
		]`],...Mc(["typescript","tsx"],[Sr.typescript`[
				(function_declaration
					(identifier) @function.identifier
				) @function

				(generator_function_declaration
					name: (identifier) @generator_function.identifier
				) @generator_function

				(class_declaration
					name: (type_identifier) @class.identifier
					body: (class_body
								(method_definition
									name: (property_identifier) @method.identifier
								) @method
							)
				) @class
			]`]),python:[Sr.python`[
				(function_definition
					name: (identifier) @function.identifier
				) @function
			]`],go:[Sr.go`[
				(function_declaration
					name: (identifier) @function.identifier
				) @function

				(method_declaration
					name: (field_identifier) @method.identifier
				) @method
			]`],ruby:[Sr.ruby`[
				(method
					name: (identifier) @method.identifier
				) @method

				(singleton_method
					name: (_) @singleton_method.identifier
				) @singleton_method
			]`],csharp:[Sr.csharp`[
				(constructor_declaration
					(identifier) @constructor.identifier
				) @constructor

				(destructor_declaration
					(identifier) @destructor.identifier
				) @destructor

				(method_declaration
					(identifier) @method.identifier
				) @method

				(local_function_statement
					(identifier) @local_function.identifier
				) @local_function
			]`],cpp:[Sr.cpp`[
				(function_definition
					(_
						(identifier) @identifier)
				) @function
			]`],java:[Sr.java`(class_declaration
			body: (_
						[
							(constructor_declaration
								(modifiers)? @constructor.modifiers
								(#not-eq? @constructor.modifiers "private")
								name: (identifier) @constructor.identifier
							) @constructor

							(method_declaration
								(modifiers)? @method.modifiers
								(#not-eq? @method.modifiers "private")
								name: (identifier) @method.identifier
							) @method
						]
					)
		) @class`],rust:[Sr.rust`[
				(function_item
					(identifier) @function.identifier
				) @function
			]`]},Yie={javascript:[Sr.javascript`[
			(identifier) @symbol
			(property_identifier) @symbol
			(private_property_identifier) @symbol
		]`],...Mc(["typescript","tsx"],[Sr.typescript`[
			(identifier) @symbol
			(type_identifier) @symbol
			(property_identifier) @symbol
			(private_property_identifier) @symbol
		]`]),cpp:[Sr.cpp`[
			(identifier) @symbol
			(type_identifier) @symbol
		]`],csharp:[Sr.csharp`[
			(identifier) @symbol
		]`],go:[Sr.go`[
			(identifier) @symbol
		]`],java:[Sr.java`[
			(identifier) @symbol
		]`],python:[Sr.python`[
			(identifier) @symbol
		]`],ruby:[Sr.ruby`[
			(identifier) @symbol
		]`],rust:[Sr.rust`[
			(identifier) @symbol
		]`]},Qie={...Mc(["typescript","tsx"],[Sr.typescript`
			[
				(comment) @comment ;; split into multiple comment kinds?

				(declaration) @declaration

				;; class declaration related
				(public_field_definition) @public_field_definition
				(method_definition) @method_definition
				(class_declaration (_ (method_signature) @method_signature))

				;; enum declaration related
				(enum_assignment) @enum_assignment

				;; interface declaration related
				(interface_declaration (_ (method_signature) @method_signature))
				(interface_declaration (_ (property_signature) @property_signature))

				;; statements

				(import_statement) @import_statement
				(export_statement) @export_statement

				(expression_statement) @expression_statement

				(for_in_statement) @for_in_statement
				;; exclude any children found in the for loop condition
				(for_statement condition: (_) @for_statement.exclude_captures ) @for_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(do_statement) @do_statement
				(if_statement) @if_statement
				(switch_statement) @switch_statement
				(switch_case) @switch_case
				(try_statement) @try_statement
				(throw_statement) @throw_statement
				(debugger_statement) @debugger_statement
				(return_statement) @return_statement
			]
		`]),python:[Sr.python`
			[
				(comment) @comment

				;; simple statements
				(assert_statement) @assert_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(delete_statement) @delete_statement
				(exec_statement) @exec_statement
				(expression_statement) @expression_statement
				(future_import_statement) @future_import_statement
				(global_statement) @global_statement
				(import_from_statement) @import_from_statement
				(import_statement) @import_statement
				(nonlocal_statement) @nonlocal_statement
				(pass_statement) @pass_statement
				(print_statement) @print_statement
				(raise_statement) @raise_statement
				(return_statement) @return_statement
				(type_alias_statement) @type_alias_statement


				;; compound statements

				(class_definition) @class_definition
				(decorated_definition) @decorated_definition
				(for_statement) @for_statement
				(function_definition) @function_definition
				(if_statement) @if_statement
				(try_statement) @try_statement
				(while_statement) @while_statement
				(with_statement) @with_statement


				;; expressions

				(expression_list) @expression_list
				(expression_statement) @expression_statement
			]
		`],javascript:[Sr.javascript`
			[
				(comment) @comment ;; split into multiple comment kinds?

				(declaration) @declaration

				;; class declaration related

				(field_definition) @field_definition
				(method_definition) @method_definition

				;; statements

				(import_statement) @import_statement
				(export_statement) @export_statement

				(expression_statement) @expression_statement

				(for_in_statement) @for_in_statement
				;; exclude any children found in the for loop condition
				(for_statement condition: (_) @for_statement.exclude_captures ) @for_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(do_statement) @do_statement
				(if_statement) @if_statement
				(switch_statement) @switch_statement
				(switch_case) @switch_case
				(try_statement) @try_statement
				(throw_statement) @throw_statement
				(debugger_statement) @debugger_statement
				(return_statement) @return_statement
			]`],go:[Sr.go`
		[
			(_statement) @statement
			(function_declaration) @function_declaration
			(import_declaration) @import_declaration
			(method_declaration) @method_declaration
			(package_clause) @package_clause

			(if_statement
				initializer: (_) @for_statement.exclude_captures) @for_statement

			(expression_case) @expression_case ;; e.g., case 0:
		]
		`],ruby:[Sr.ruby`
			[
				(comment) @comment

				(assignment) @assignment

				(if) @if

				(call) @call

				(case) @case

				(when) @when

				(while) @while

				(for) @for

				(method) @method

				(class) @class

				(module) @module

				(begin) @begin
			]
		`],csharp:[Sr.csharp`
			[
				(comment) @comment

				(class_declaration) @class_declaration
				(constructor_declaration) @constructor_declaration
				(method_declaration) @method_declaration
				(delegate_declaration) @delegate_declaration
				(enum_declaration) @enum_declaration
				(extern_alias_directive) @extern_alias_directive
				(file_scoped_namespace_declaration) @file_scoped_namespace_declaration
				(global_attribute_list) @global_attribute_list
				(global_statement) @global_statement
				(interface_declaration) @interface_declaration
				(namespace_declaration) @namespace_declaration
				(record_declaration) @record_declaration
				(record_struct_declaration) @record_struct_declaration
				(struct_declaration) @struct_declaration
				(using_directive) @using_directive

				(local_declaration_statement) @local_declaration_statement
				(expression_statement) @expression_statement
				(for_statement) @for_statement
				(for_each_statement) @for_each_statement
				(continue_statement) @continue_statement
				(break_statement) @break_statement
				(throw_statement) @throw_statement
				(return_statement) @return_statement
				(try_statement) @try_statement
			]
		`],cpp:[Sr.cpp`
			[
				(declaration) @declaration

				(expression_statement) @expression_statement

				(comment) @comment

				(preproc_include) @preproc_include

				(namespace_definition) @namespace_definition

				(enum_specifier) @enum_specifier

				(struct_specifier) @struct_specifier

				(template_declaration) @template_declaration

				(function_definition) @function_definition

				(return_statement) @return_statement

				(class_specifier) @class_specifier

				(try_statement) @try_statement

				(throw_statement) @throw_statement

				(for_statement) @for_statement
				(for_statement
					initializer:(_) @for_statement.exclude_captures) @for_statement

				(for_range_loop) @for_range_loop
			]
		`],java:[Sr.java`
		[
			(statement) @statement ;; @ulugbekna: this includes (declaration); but somehow it can't capture inner classes

			(line_comment) @line_comment
			(block_comment) @block_comment

			(for_statement
				init: (_) @for_statement.exclude_captures)

			(block) @block.exclude_captures

			(field_declaration) @field_declaration
		]
		`],rust:[]},Xie={...Mc(["typescript","tsx"],["program","interface_declaration","class_declaration","function_declaration","function","type_alias_declaration","method_definition"]),javascript:["program","class_declaration","function_declaration","function","method_definition"],java:["program","class_declaration","interface_declaration","method_declaration"],cpp:["translation_unit","class_declaration","function_definition"],csharp:["compilation_unit","class_declaration","interface_declaration","method_declaration"],python:["module","class_definition","function_definition"],go:["source_file","type_declaration","function_declaration","method_declaration"],ruby:["program","method","class","method"],rust:["source_file","function_item","impl_item","let_declaration"]},Jie={typescript:[Vl("typescript")],tsx:[Vl("tsx")],javascript:[Vl("javascript")],java:[Vl("java")],cpp:[Vl("cpp")],csharp:[Vl("csharp")],python:[Vl("python")],go:[Vl("go")],ruby:[Vl("ruby")],rust:[Vl("rust")]},Zie={...Mc(["typescript","tsx","javascript"],["for_in_statement","for_statement","if_statement","while_statement","do_statement","try_statement","switch_statement"]),java:["for_statement","enhanced_for_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],cpp:["for_statement","for_range_loop","if_statement","while_statement","do_statement","try_statement","switch_statement"],csharp:["for_statement","for_each_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],python:["for_statement","if_statement","while_statement","try_statement"],go:["for_statement","if_statement","type_switch_statement"],ruby:["while","for","if","case"],rust:["for_statement","if_statement","while_statement","loop_statement","match_expression"]},Y4e={...Mc(["typescript","tsx"],["lexical_declaration","expression_statement","public_field_definition"]),javascript:["call_expression","expression_statement","variable_declaration","public_field_definition"],java:["expression_statement","local_variable_declaration","field_declaration"],cpp:["field_declaration","expression_statement","declaration"],csharp:["field_declaration","expression_statement"],python:["expression_statement"],go:["short_var_declaration","call_expression"],ruby:["call","assignment"],rust:["expression_statement","let_declaration","use_declaration","assignment_expression","macro_definition","extern_crate_declaration"]},Q4e={...Mc(["typescript","tsx"],["class_declaration","function_declaration","generator_function_declaration","interface_declaration","internal_module","method_definition","abstract_class_declaration"]),javascript:["class_declaration","function_declaration","generator_function_declaration","method_definition"],java:["class_declaration","constructor_declaration","enum_declaration","interface_declaration","method_declaration","module_declaration"],cpp:["class_specifier","function_definition","namespace_definition","struct_specifier"],csharp:["class_declaration","constructor_declaration","destructor_declaration","enum_declaration","interface_declaration","method_declaration","namespace_declaration","struct_declaration"],python:["function_definition","class_definition"],go:["function_declaration","method_declaration"],ruby:["class","method","module"],rust:["function_item","impl_item","mod_item","struct_item","trait_item","union_item"]},eoe={typescript:[$l("typescript")],tsx:[$l("tsx")],javascript:[$l("javascript")],java:[$l("java")],cpp:[$l("cpp")],csharp:[$l("csharp")],python:[$l("python")],go:[$l("go")],rust:[$l("rust")],ruby:[$l("ruby")]};function Vl(t){return Xie[t].map(e=>`(${e}) @scope`).join(`
`)}function $l(t){return`[
		${Q4e[t].map(r=>`(${r})`).join(`
`)}
	] @definition`}function dC(t,e){return Xie[t].includes(e.type)||Zie[t].includes(e.type)}function toe(t,e){return Zie[t].includes(e.type)}function NU(t,e){return Y4e[t].includes(e.type)}var LU=roe(),OU=class{constructor(){this.loadedLanguagesCache=new Map}loadLanguage(e){return this.loadedLanguagesCache.has(e)||this.loadedLanguagesCache.set(e,this._doLoadLanguage(e)),this.loadedLanguagesCache.get(e)}_doLoadLanguage(e){let n=`tree-sitter-${e==="csharp"?"c-sharp":e}.wasm`,i=pC.basename(__dirname)==="dist"?pC.resolve(__dirname,n):pC.resolve(__dirname,"../../../../dist",n);return LU.Language.load(i)}},MU=class t{static{this.CACHE_SIZE_PER_LANGUAGE=5}constructor(){this.caches=new Map,this.languageLoader=new OU,this._parser=null}get parser(){return this._parser||(this._parser=new LU),this._parser}async parse(e,r){await LU.init();let n=this.getParseTreeCache(e),i=n.get(r);if(i)return i.createReference();let o=await this.languageLoader.loadLanguage(e);this.parser.setLanguage(o);let s=this.parser.parse(r),a=new UU(s);return n.put(r,a),a.createReference()}delete(){this._parser&&(this.parser.delete(),this._parser=null);for(let e of this.caches.values())e.dispose()}getParseTreeCache(e){let r=this.caches.get(e);return r||(r=new pk(t.CACHE_SIZE_PER_LANGUAGE),this.caches.set(e,r)),r}},FU=class{constructor(e){this._tree=e;this._refCount=1}get tree(){if(this._refCount===0)throw new Error("Cannot access disposed RefCountedParseTree");return this._tree}ref(){if(this._refCount===0)throw new Error("Cannot ref disposed RefCountedParseTree");this._refCount++}deref(){if(this._refCount===0)throw new Error("Cannot deref disposed RefCountedParseTree");this._refCount--,this._refCount===0&&this._tree.delete()}},UU=class{constructor(e){this._tree=new FU(e)}dispose(){this._tree.deref()}createReference(){return new BU(this._tree)}},BU=class{constructor(e){this._parseTree=e;this._parseTree.ref()}get tree(){return this._parseTree.tree}dispose(){this._parseTree.deref()}},ooe=new MU;function X4e(){ooe.delete()}function Qi(t,e){return ooe.parse(t,e)}var qU=class{constructor(e){this.language=e;this.map=new Map}getQuery(e){return this.map.has(e)||this.map.set(e,this.language.query(e)),this.map.get(e)}},HU=class t{constructor(){this.map=new Map}static{this.INSTANCE=new t}getQuery(e,r){return this.map.has(e)||this.map.set(e,new qU(e)),this.map.get(e).getQuery(r)}};function Fc(t,e){let r=[];for(let n of t){let i=HU.INSTANCE.getQuery(e.tree.getLanguage(),n);r.push(...i.matches(e))}return r}function J4e(t,e){let r=Jie[t];return Fc(r,e)}function jU(t,e){let r=$ie[t];return Fc(r,e)}function Z4e(t,e){let r=Hie[t];return r?Fc(r,e):[]}function e3e(t,e){let r=Gie[t];return r?Fc(r,e):[]}function t3e(t,e){let r=jie[t];return r?Fc(r,e):[]}function r3e(t,e){let r=zie[t];return r?Fc(r,e):[]}function n3e(t,e){let r=Vie[t];return r?Fc(r,e):[]}function i3e(t,e){let r=eoe[t];return Fc(r,e)}async function o3e(t,e,r){let n=await Qi(t,e);try{return Z4e(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="call_expression").node;if(Yi.doIntersect(r,c)){let u,l;t==="ruby"&&(l=a.captures.find(d=>d.name==="symbol")?.node,u=l?.text?.slice(1)),l??=a.captures.find(d=>d.name==="identifier")?.node,u??=l?.text,s.push({identifier:u??"",text:c.text,startIndex:(l??c).startIndex,endIndex:(l??c).endIndex})}return s},[])}finally{n.dispose()}}async function s3e(t,e){let r=await Qi(t,e);try{return jU(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="function").node;return{identifier:o.captures.find(c=>c.name==="identifier")?.node.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function a3e(t,e){let r=await Qi(t,e);try{return e3e(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="class_declaration").node;return{identifier:s?.children.find(c=>c.type==="type_identifier"||c.type==="identifier"||c.type==="constant")?.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function c3e(t,e){let r=await Qi(t,e);try{return t3e(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="type_declaration").node,a=o.captures.find(c=>c.name==="type_identifier")?.node.text;return a||(a=s?.children.find(c=>c.type==="type_identifier")?.text),{identifier:a??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function u3e(t,e,r){let n=await Qi(t,e);try{return r3e(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="type_identifier").node;return Yi.doIntersect(r,c)&&s.push({identifier:c.text,text:c.text,startIndex:c.startIndex,endIndex:c.endIndex}),s},[])}finally{n.dispose()}}async function l3e(t,e,r){let n=await Qi(t,e);try{return n3e(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="new_expression").node;return Yi.doIntersect(r,c)&&s.push({identifier:c.text,text:c.text,startIndex:c.startIndex,endIndex:c.endIndex}),s},[])}finally{n.dispose()}}async function d3e(t,e,r){let n=await Qi(t,e);try{let i=Yie[t];return Fc(i,n.tree.rootNode).reduce((a,c)=>{let u=c.captures.find(l=>l.name==="symbol").node;return Yi.doIntersect(r,u)&&a.push({identifier:u.text,text:u.text,startIndex:u.startIndex,endIndex:u.endIndex}),a},[])}finally{n.dispose()}}async function p3e(t,e){let r=await Qi(t,e);try{let n=i3e(t,r.tree.rootNode);return I3e(t,n,r.tree.rootNode)}finally{r.dispose()}}async function f3e(t,e){let r=await Qi(t,e);try{return jU(t,r.tree.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="function").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function m3e(t,e){let r=await Qi(t,e);try{return jU(t,r.tree.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="body").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function h3e(t,e,r){let n=await Qi(t,e);try{let i=J4e(t,n.tree.rootNode),o;for(let s of i){let a=s.captures[0].node,c=$m.ofSyntaxNode(a);if($m.doesContain(c,r)&&(o=a),Gu.isBefore(r.endPosition,c.startPosition))break}if(o)return $m.ofSyntaxNode(o);throw new Error("No parent node found")}finally{n.dispose()}}async function g3e(t,e,r,n){let i=await Qi(t,e);try{let o=i.tree.rootNode.descendantForPosition(r.startPosition,r.endPosition),s={startPosition:o.startPosition,endPosition:o.endPosition},a=aoe(t,o,n,r,!0);return $m.equals(s,a)?soe(t,o):a}finally{i.dispose()}}function soe(t,e){let r=e.parent,n={startPosition:e.startPosition,endPosition:e.endPosition};if(dC(t,e)||!r)return n;let{filteredRanges:i,indexOfInterest:o}=coe(t,r.children,n,!1);if(o-1>=0&&o+1<=i.length-1){let s=i[o-1],a=i[o+1];return{startPosition:s.startPosition,endPosition:a.endPosition}}return soe(t,r)}function aoe(t,e,r,n,i){let o=e.children;if(e.endPosition.row-e.startPosition.row+1<=r){let a=dC(t,e)?{startPosition:e.startPosition,endPosition:e.endPosition}:ioe(t,o,r,n,i),c=e.parent;return c?aoe(t,c,r,a,!1):a}return ioe(t,o,r,n,i)}function noe(t,e){return e.endPosition.row-t.startPosition.row+1}function ioe(t,e,r,n,i){if(e.length===0)return n;let{filteredRanges:o,indexOfInterest:s}=coe(t,e,n,i),a=0,c=o.length-1,u=o[a],l=o[c];for(;noe(u,l)>r&&a!==c;)s-a<c-s?(c--,l=o[c]):(a++,u=o[a]);return noe(u,l)<=r?{startPosition:u.startPosition,endPosition:l.endPosition}:n}function coe(t,e,r,n){let i,o;if(n?(i=e.filter(s=>dC(t,s)||NU(t,s)),o=qie(i,r,(s,a)=>Gu.isBefore(s.startPosition,a.startPosition)),i.splice(o,0,r)):(i=e.filter(s=>$m.doesContain(s,r)||dC(t,s)||NU(t,s)),o=i.findIndex(s=>$m.doesContain(s,r))),o===-1)throw new Error("Valid index not found");return{filteredRanges:i,indexOfInterest:o}}function hk(t,e,r,n=zU){let i=[t.rootNode],o=[];for(;;){let s=i.map(a=>[a,Yi.intersectionSize(a,e)]).filter(([a,c])=>c>0).sort(([a,c],[u,l])=>l-c);if(s.length===0)return o.length===0?void 0:lC(o,([a,c],[u,l])=>c-l)[0];{let a=s.map(([c,u])=>{let l=Yi.len(c),d=Math.abs(Yi.len(e)-u),f=(u-d)/l;return[c,f]});o.push(...a.filter(([c,u])=>n(c,r))),i=[],i.push(...a.flatMap(([c,u])=>c.children))}}}async function v3e(t,e,r){let n=await Qi(t,e);try{let i=n.tree.rootNode.descendantForIndex(r.startIndex,r.endIndex);if(i.type.match(/identifier/)&&(i.parent===null||zU(i.parent,t))){let o=i.parent,s=o===null?void 0:{startIndex:o.startIndex,endIndex:o.endIndex};return{identifier:i.text,nodeRange:s}}}finally{n.dispose()}}async function y3e(t,e,r){let n=await Qi(t,e);try{let i=Kie[t],a=Fc(i,n.tree.rootNode).flatMap(({captures:c})=>c).filter(({name:c})=>c.endsWith("identifier")).find(({node:c})=>Yi.doesContain(c,r));return a?{identifier:a.node.text}:void 0}catch{return}finally{n.dispose()}}async function b3e(t,e,r){let n=[],s=(await Qi(t,e)).tree.rootNode.descendantForIndex(r.startIndex,r.endIndex);for(;s!==null;)toe(t,s)&&n.push({startIndex:s.startIndex,endIndex:s.endIndex}),s=s.parent;return n}async function _3e(t,e,r){let n=await Qi(t,e);try{let o=r.startIndex===r.endIndex?void 0:hk(n.tree,r,t);if(o)return{nodeIdentifier:GU(o,t),nodeToDocument:fk.ofSyntaxNode(o),nodeSelectionBy:"matchingSelection"};let a=n.tree.rootNode.descendantForIndex(r.startIndex,r.endIndex),c=0;for(;!zU(a,t)&&a.parent!==null;)a=a.parent,++c;return{nodeIdentifier:GU(a,t),nodeToDocument:fk.ofSyntaxNode(a),nodeSelectionBy:"expanding"}}finally{n.dispose()}}async function x3e(t,e,r){let n=await Qi(t,e);try{let i=r.startIndex===r.endIndex;if(i)return;let o=i?void 0:hk(n.tree,r,t),s=i?void 0:hk(n.tree,r,t,S3e);if(s&&o)return{nodeIdentifier:GU(o,t),nodeToExplain:fk.ofSyntaxNode(s)}}finally{n.dispose()}}function GU(t,e){switch(e){case"python":case"csharp":return t.children.find(r=>r.type.match(/identifier/))?.text;case"go":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/spec/))?.children.find(i=>i.type.match(/identifier/))?.text}case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":case"cpp":{let r=t.children.find(i=>i.type.match(/declarator/));return r?r.children.find(i=>i.type.match(/identifier/))?.text:t.children.find(i=>i.type.match(/identifier/))?.text}case"java":return t.children.find(n=>n.type==="identifier")?.text;case"ruby":return t.children.find(r=>r.type.match(/constant|identifier/))?.text;default:return t.children.find(r=>r.type.match(/identifier/))?.text}}function S3e(t,e){return t.type.match(/definition/)}function zU(t,e){switch(e){case"typescript":case"tsx":case"javascript":return t.type.match(/definition|declaration|declarator|export_statement/);case"go":return t.type.match(/definition|declaration|declarator|var_spec/);case"cpp":return t.type.match(/definition|declaration|class_specifier/);case"ruby":return t.type.match(/module|class|method|assignment/);default:return t.type.match(/definition|declaration|declarator/)}}async function E3e(t,e){if(!new Set(["javascript","typescript","java","cpp","csharp","go","ruby"]).has(t))return;let n=await Qi(t,e);try{let i=Wie[t],o=Fc(i,n.tree.rootNode).flatMap(a=>a.captures.filter(c=>c.name==="docComment")),s=T3e(o);if(s.length>1&&(s=s.filter(a=>a.includes(`
`)||!a.match(/(implementation code|code implementation|implementation details|\.\.\.)/i))),s.length===1)return s[0]}finally{n.dispose()}}function T3e(t){let e=[];for(let r=0;r<t.length;++r){let n=[t[r].node.text];for(;r+1<t.length&&t[r].node.endPosition.row+1===t[r+1].node.startPosition.row;)++r,n.push(t[r].node.text);e.push(n.join(`
`))}return e}async function C3e(t,e){let r=Qie[t];if(r.length===0)return;let n=await Qi(t,e);try{let i=Fc(r,n.tree.rootNode).flatMap(c=>c.captures).sort((c,u)=>Yi.compare(c.node,u.node)),o=[];for(let c of i)c.name.endsWith(".exclude_captures")&&o.push(Yi.ofSyntaxNode(c.node));let s=new Vm(0,e.length,"root",[]),a=[s];for(let c=0;c<i.length;++c){let l=i[c].node;if(o.some(f=>Yi.isEqual(f,l)))continue;let d;do d=a.pop();while(d&&!Yi.doesContain(d,l));if(new Set(["export_statement","ambient_declaration"]).has(d.kind))d.kind=l.type,a.push(d);else{let f=l.type;(t==="typescript"||t==="tsx"||t==="javascript")&&f==="method_definition"&&l.namedChildren.some(h=>h.type==="property_identifier"&&h.text==="constructor")&&(f="constructor");let m=new Vm(l.startIndex,l.endIndex,f,[]);d.children.push(m),a.push(d,m)}}return s}catch(i){console.error(i instanceof Error?i:new Error(i))}finally{n.dispose()}}function I3e(t,e,r){let n;switch(t){case"python":n=P3e(e);break;case"ruby":n=A3e(e);break;default:{n=w3e(e,t);break}}return new mk(n,ju.ofSyntaxNode(r))}function w3e(t,e){let r=new Map;return t.forEach(n=>{let o=n.captures.find(a=>a.name==="definition")?.node,s=o?.childForFieldName("body");if(o&&s){let a;switch(e){case"typescript":case"javascript":{let{definition:u,comments:l}=k3e(o);o=u,a=l;break}case"java":case"rust":a=D3e(o);break;default:{a=fC(o);break}}r.get(o.id)||r.set(o.id,{mainBlock:ju.ofSyntaxNode(o),detailBlocks:{comments:a.map(u=>ju.ofSyntaxNode(u)),body:ju.ofSyntaxNode(s)}})}}),Array.from(r.values())}function R3e(t){if(!(t.length<2))for(let e=1;e<t.length;e++){let r=t[e];if(!r.type.includes("parameters"))return r}}function A3e(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(o=>o.name==="definition")?.node;if(i){let o=i.namedChildren,s=R3e(o);if(s){let a=o[o.length-1],c=i.text.substring(s.startIndex-i.startIndex,a.endIndex-i.startIndex),u=fC(i);e.get(i.id)||e.set(i.id,{mainBlock:ju.ofSyntaxNode(i),detailBlocks:{comments:u.map(d=>ju.ofSyntaxNode(d)),body:{range:{startPosition:{row:s.startPosition.row,column:s.startPosition.column},endPosition:{row:a.endPosition.row,column:a.endPosition.column}},startIndex:s.startIndex,text:c,endIndex:a.endIndex}}})}}}),Array.from(e.values())}function P3e(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(s=>s.name==="definition")?.node,o=i?.childForFieldName("body");if(i&&o){let s=L3e(o),a=N3e(i);e.set(i.id,{mainBlock:ju.ofSyntaxNode(i),detailBlocks:{docstring:s?ju.ofSyntaxNode(s):void 0,decorator:a?ju.ofSyntaxNode(a):void 0,body:ju.ofSyntaxNode(o)}});return}}),Array.from(e.values())}function fC(t,e=["comment"]){let r=[],n=t.previousNamedSibling;for(;n&&e.some(i=>i===n?.type);)r.push(n),n=n.previousNamedSibling;return r.reverse()}function k3e(t){let e=t.parent;return e?.type==="export_statement"?{definition:e,comments:fC(e)}:{definition:t,comments:fC(t)}}function D3e(t){return fC(t,["block_comment","line_comment"])}function N3e(t){let e=t.previousNamedSibling;return e?.type==="decorator"?e:void 0}function L3e(t){let e=t.firstChild;if(!e||e.type!=="expression_statement")return;let r=e.firstChild;return r?.type==="string"?r:void 0}var O3e=loe.join(__dirname,"worker2.js"),T_=class{constructor(e,r){this._parser=new $U(VU,O3e,e,r.getLogger("parser proxy"))}dispose(){this._parser.dispose()}getTreeSitterAST(e){let r=Np(e.languageId);if(r)return this.getTreeSitterASTForWASMLanguage(r,e.getText())}getTreeSitterASTForWASMLanguage(e,r){let n=this._parser.proxy;return{getFunctionPositions:()=>n._getFunctionPositions(e,r),getFunctionBodies:()=>n._getFunctionBodies(e,r),getCoarseParentScope:i=>n._getCoarseParentScope(e,r,i),getFixSelectionOfInterest:(i,o)=>n._getFixSelectionOfInterest(e,r,i,o),getCallExpressions:i=>n._getCallExpressions(e,r,i),getFunctionDefinitions:()=>n._getFunctionDefinitions(e,r),getClassReferences:i=>n._getClassReferences(e,r,i),getClassDeclarations:()=>n._getClassDeclarations(e,r),getTypeDeclarations:()=>n._getTypeDeclarations(e,r),getTypeReferences:i=>n._getTypeReferences(e,r,i),getSymbols:i=>n._getSymbols(e,r,i),getDocumentableNodeIfOnIdentifier:i=>n._getDocumentableNodeIfOnIdentifier(e,r,i),getTestableNode:i=>n._getTestableNode(e,r,i),getNodeToExplain:i=>n._getNodeToExplain(e,r,i),getNodeToDocument:i=>n._getNodeToDocument(e,r,i),getFineScopes:i=>n._getFineScopes(e,r,i),getStructure:()=>n._getStructure(e,r)}}extractDoc(e,r){return this._parser.proxy._extractDoc(e,r)}getSemanticChunkTree(e,r){return this._parser.proxy._getSemanticChunkTree(e,r)}getStructure(e,r){return this._parser.proxy._getStructure(e,r)}};T_=fe([ie(1,ue)],T_);var $U=class{constructor(e,r,n,i){this._workerPath=r;this._useWorker=n;this._local=new Proxy(e,{get:(o,s,a)=>{let c=o[s];return typeof c!="function"?c:async(...u)=>{let l=await c.apply(o,uoe(u));return uoe(l)}}}),this._worker=new zo(()=>new zm(this._workerPath,{name:"Parser worker"},i))}get proxy(){return this._useWorker?this._worker.value.proxy:this._local}dispose(){this._worker.hasValue&&this._worker.value.terminate()}};function uoe(t){return typeof t>"u"?t:JSON.parse(JSON.stringify(t))}var gk=require("vscode");var yk=oe("IRemoteRepositoriesService"),vk=class{async loadWorkspaceContents(e){return await(await this.getApi()).loadWorkspaceContents?.(e)??!1}getApi(){return this.getRemoteExtension().activate()}getRemoteExtension(){if(this._remoteHub!==void 0)return this._remoteHub;if(this._remoteHub=gk.extensions.getExtension("ms-vscode.remote-repositories")??gk.extensions.getExtension("GitHub.remoteHub")??gk.extensions.getExtension("GitHub.remoteHub-insiders"),this._remoteHub===void 0)throw new Error("No Remote repository extension found.");return this._remoteHub}};var sc=oe("IReviewService");var Wr=W(require("vscode"));var WU=require("vscode");var C_=class{constructor(e,r,n){this._configurationService=e;this._contextService=r;this._disposables=new qt;this._commentController=Wr.comments.createCommentController("github-copilot-review","GitHub Copilot Review");this._comments=[];this._logger=n.getLogger("ReviewService"),this._disposables.add(Wr.workspace.onDidChangeConfiguration(i=>{i.affectsConfiguration("github.copilot.advanced")&&(Wr.commands.executeCommand("setContext","github.copilot.advanced.review.contextmenu.enabled",this._configurationService.getConfig(Ae.ReviewContextMenu)),Wr.commands.executeCommand("setContext","github.copilot.advanced.review.scmviewlet.enabled",this._configurationService.getConfig(Ae.ReviewSCMViewlet))),(i.affectsConfiguration("github.copilot.advanced")||i.affectsConfiguration("github.copilot.advanced.review.intent"))&&Wr.commands.executeCommand("setContext","github.copilot.advanced.review.intent.enabled",this.isIntentEnabled()),(i.affectsConfiguration("github.copilot.advanced")||i.affectsConfiguration("github.copilot.advanced.review.palette"))&&Wr.commands.executeCommand("setContext","github.copilot.advanced.review.palette.enabled",this.isPaletteEnabled())})),this.updateContextValues()}updateContextValues(){Wr.commands.executeCommand("setContext","github.copilot.advanced.review.contextmenu.enabled",this._configurationService.getConfig(Ae.ReviewContextMenu)),Wr.commands.executeCommand("setContext","github.copilot.advanced.review.scmviewlet.enabled",this._configurationService.getConfig(Ae.ReviewSCMViewlet)),Wr.commands.executeCommand("setContext","github.copilot.advanced.review.intent.enabled",this.isIntentEnabled()),Wr.commands.executeCommand("setContext","github.copilot.advanced.review.palette.enabled",this.isPaletteEnabled())}isIntentEnabled(){let e=this._configurationService.getConfig(Ae.ReviewIntent);return e!==Ae.ReviewIntent.defaultValue?e:Wr.workspace.getConfiguration("github.copilot.advanced.review").get("intent",Ae.ReviewIntent.defaultValue)}isPaletteEnabled(){let e=this._configurationService.getConfig(Ae.ReviewPalette);return e!==Ae.ReviewPalette.defaultValue?e:Wr.workspace.getConfiguration("github.copilot.advanced.review").get("palette",Ae.ReviewPalette.defaultValue)}getDiagnosticCollection(){return this._diagnosticCollection||this._disposables.add(this._diagnosticCollection=Wr.languages.createDiagnosticCollection("github.copilot.review"))}getReviewComments(){return this._comments.map(({comment:e})=>e)}addReviewComments(e){for(let r of e){let n=`

(Type ${r.kind}, severity ${r.severity}.)`,i=this._commentController.createCommentThread(r.uri,r.range,[{body:typeof r.body=="string"?`${r.body}${n}`:new Wr.MarkdownString(`${r.body.value}${n}`),mode:Wr.CommentMode.Preview,author:{name:WU.l10n.t("GitHub Copilot"),iconPath:ut.joinPath(this._contextService.extensionUri,"assets","Copilot-chat-avatar.png")}}]);i.canReply=!1,this._comments.find(o=>o.comment.uri.toString()===r.uri.toString())||(i.collapsibleState=Wr.CommentThreadCollapsibleState.Expanded),this._comments.push({comment:r,thread:i}),this._comments.forEach((o,s)=>{o.thread.label=WU.l10n.t("Code Review Comment ({0} of {1})",s+1,this._comments.length)}),this._comments.length===1&&(Wr.window.activeTextEditor?.document.uri.toString()===r.uri.toString()?Wr.commands.executeCommand("editor.action.nextCommentThreadAction",i):Wr.window.showTextDocument(r.uri,{preview:!0,selection:new Wr.Range(r.range.start,r.range.start)}).then(()=>Wr.commands.executeCommand("editor.action.nextCommentThreadAction",i)))}}collapseReviewComment(e){let r=this._comments.find(o=>o.comment===e);if(!r)return;let n=r.thread;n.dispose();let i=this._commentController.createCommentThread(e.uri,e.range,n.comments);i.canReply=!1,i.label=n.label,r.thread=i}removeReviewComments(e){for(let r of e){let n=this._comments.findIndex(i=>i.comment===r);n!==-1&&(this._comments[n].thread.dispose(),this._comments.splice(n,1))}}findReviewComment(e){return this._comments.find(n=>n.thread===e)?.comment}findCommentThread(e){return this._comments.find(n=>n.comment===e)?.thread}dispose(){this._disposables.dispose()}};C_=fe([ie(0,ke),ie(1,xr),ie(2,ue)],C_);var Wm=oe("IScopeSelector");var mC=require("vscode");var doe=Object.create(null);function _(t,e){if(GT(e)){let r=doe[e];if(r===void 0)throw new Error(`${t} references an unknown codicon: ${e}`);e=r}return doe[t]=e,{id:t}}var poe={add:_("add",6e4),plus:_("plus",6e4),gistNew:_("gist-new",6e4),repoCreate:_("repo-create",6e4),lightbulb:_("lightbulb",60001),lightBulb:_("light-bulb",60001),repo:_("repo",60002),repoDelete:_("repo-delete",60002),gistFork:_("gist-fork",60003),repoForked:_("repo-forked",60003),gitPullRequest:_("git-pull-request",60004),gitPullRequestAbandoned:_("git-pull-request-abandoned",60004),recordKeys:_("record-keys",60005),keyboard:_("keyboard",60005),tag:_("tag",60006),gitPullRequestLabel:_("git-pull-request-label",60006),tagAdd:_("tag-add",60006),tagRemove:_("tag-remove",60006),person:_("person",60007),personFollow:_("person-follow",60007),personOutline:_("person-outline",60007),personFilled:_("person-filled",60007),gitBranch:_("git-branch",60008),gitBranchCreate:_("git-branch-create",60008),gitBranchDelete:_("git-branch-delete",60008),sourceControl:_("source-control",60008),mirror:_("mirror",60009),mirrorPublic:_("mirror-public",60009),star:_("star",60010),starAdd:_("star-add",60010),starDelete:_("star-delete",60010),starEmpty:_("star-empty",60010),comment:_("comment",60011),commentAdd:_("comment-add",60011),alert:_("alert",60012),warning:_("warning",60012),search:_("search",60013),searchSave:_("search-save",60013),logOut:_("log-out",60014),signOut:_("sign-out",60014),logIn:_("log-in",60015),signIn:_("sign-in",60015),eye:_("eye",60016),eyeUnwatch:_("eye-unwatch",60016),eyeWatch:_("eye-watch",60016),circleFilled:_("circle-filled",60017),primitiveDot:_("primitive-dot",60017),closeDirty:_("close-dirty",60017),debugBreakpoint:_("debug-breakpoint",60017),debugBreakpointDisabled:_("debug-breakpoint-disabled",60017),debugHint:_("debug-hint",60017),terminalDecorationSuccess:_("terminal-decoration-success",60017),primitiveSquare:_("primitive-square",60018),edit:_("edit",60019),pencil:_("pencil",60019),info:_("info",60020),issueOpened:_("issue-opened",60020),gistPrivate:_("gist-private",60021),gitForkPrivate:_("git-fork-private",60021),lock:_("lock",60021),mirrorPrivate:_("mirror-private",60021),close:_("close",60022),removeClose:_("remove-close",60022),x:_("x",60022),repoSync:_("repo-sync",60023),sync:_("sync",60023),clone:_("clone",60024),desktopDownload:_("desktop-download",60024),beaker:_("beaker",60025),microscope:_("microscope",60025),vm:_("vm",60026),deviceDesktop:_("device-desktop",60026),file:_("file",60027),fileText:_("file-text",60027),more:_("more",60028),ellipsis:_("ellipsis",60028),kebabHorizontal:_("kebab-horizontal",60028),mailReply:_("mail-reply",60029),reply:_("reply",60029),organization:_("organization",60030),organizationFilled:_("organization-filled",60030),organizationOutline:_("organization-outline",60030),newFile:_("new-file",60031),fileAdd:_("file-add",60031),newFolder:_("new-folder",60032),fileDirectoryCreate:_("file-directory-create",60032),trash:_("trash",60033),trashcan:_("trashcan",60033),history:_("history",60034),clock:_("clock",60034),folder:_("folder",60035),fileDirectory:_("file-directory",60035),symbolFolder:_("symbol-folder",60035),logoGithub:_("logo-github",60036),markGithub:_("mark-github",60036),github:_("github",60036),terminal:_("terminal",60037),console:_("console",60037),repl:_("repl",60037),zap:_("zap",60038),symbolEvent:_("symbol-event",60038),error:_("error",60039),stop:_("stop",60039),variable:_("variable",60040),symbolVariable:_("symbol-variable",60040),array:_("array",60042),symbolArray:_("symbol-array",60042),symbolModule:_("symbol-module",60043),symbolPackage:_("symbol-package",60043),symbolNamespace:_("symbol-namespace",60043),symbolObject:_("symbol-object",60043),symbolMethod:_("symbol-method",60044),symbolFunction:_("symbol-function",60044),symbolConstructor:_("symbol-constructor",60044),symbolBoolean:_("symbol-boolean",60047),symbolNull:_("symbol-null",60047),symbolNumeric:_("symbol-numeric",60048),symbolNumber:_("symbol-number",60048),symbolStructure:_("symbol-structure",60049),symbolStruct:_("symbol-struct",60049),symbolParameter:_("symbol-parameter",60050),symbolTypeParameter:_("symbol-type-parameter",60050),symbolKey:_("symbol-key",60051),symbolText:_("symbol-text",60051),symbolReference:_("symbol-reference",60052),goToFile:_("go-to-file",60052),symbolEnum:_("symbol-enum",60053),symbolValue:_("symbol-value",60053),symbolRuler:_("symbol-ruler",60054),symbolUnit:_("symbol-unit",60054),activateBreakpoints:_("activate-breakpoints",60055),archive:_("archive",60056),arrowBoth:_("arrow-both",60057),arrowDown:_("arrow-down",60058),arrowLeft:_("arrow-left",60059),arrowRight:_("arrow-right",60060),arrowSmallDown:_("arrow-small-down",60061),arrowSmallLeft:_("arrow-small-left",60062),arrowSmallRight:_("arrow-small-right",60063),arrowSmallUp:_("arrow-small-up",60064),arrowUp:_("arrow-up",60065),bell:_("bell",60066),bold:_("bold",60067),book:_("book",60068),bookmark:_("bookmark",60069),debugBreakpointConditionalUnverified:_("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:_("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:_("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:_("debug-breakpoint-data-unverified",60072),debugBreakpointData:_("debug-breakpoint-data",60073),debugBreakpointDataDisabled:_("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:_("debug-breakpoint-log-unverified",60074),debugBreakpointLog:_("debug-breakpoint-log",60075),debugBreakpointLogDisabled:_("debug-breakpoint-log-disabled",60075),briefcase:_("briefcase",60076),broadcast:_("broadcast",60077),browser:_("browser",60078),bug:_("bug",60079),calendar:_("calendar",60080),caseSensitive:_("case-sensitive",60081),check:_("check",60082),checklist:_("checklist",60083),chevronDown:_("chevron-down",60084),chevronLeft:_("chevron-left",60085),chevronRight:_("chevron-right",60086),chevronUp:_("chevron-up",60087),chromeClose:_("chrome-close",60088),chromeMaximize:_("chrome-maximize",60089),chromeMinimize:_("chrome-minimize",60090),chromeRestore:_("chrome-restore",60091),circleOutline:_("circle-outline",60092),circle:_("circle",60092),debugBreakpointUnverified:_("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:_("terminal-decoration-incomplete",60092),circleSlash:_("circle-slash",60093),circuitBoard:_("circuit-board",60094),clearAll:_("clear-all",60095),clippy:_("clippy",60096),closeAll:_("close-all",60097),cloudDownload:_("cloud-download",60098),cloudUpload:_("cloud-upload",60099),code:_("code",60100),collapseAll:_("collapse-all",60101),colorMode:_("color-mode",60102),commentDiscussion:_("comment-discussion",60103),creditCard:_("credit-card",60105),dash:_("dash",60108),dashboard:_("dashboard",60109),database:_("database",60110),debugContinue:_("debug-continue",60111),debugDisconnect:_("debug-disconnect",60112),debugPause:_("debug-pause",60113),debugRestart:_("debug-restart",60114),debugStart:_("debug-start",60115),debugStepInto:_("debug-step-into",60116),debugStepOut:_("debug-step-out",60117),debugStepOver:_("debug-step-over",60118),debugStop:_("debug-stop",60119),debug:_("debug",60120),deviceCameraVideo:_("device-camera-video",60121),deviceCamera:_("device-camera",60122),deviceMobile:_("device-mobile",60123),diffAdded:_("diff-added",60124),diffIgnored:_("diff-ignored",60125),diffModified:_("diff-modified",60126),diffRemoved:_("diff-removed",60127),diffRenamed:_("diff-renamed",60128),diff:_("diff",60129),diffSidebyside:_("diff-sidebyside",60129),discard:_("discard",60130),editorLayout:_("editor-layout",60131),emptyWindow:_("empty-window",60132),exclude:_("exclude",60133),extensions:_("extensions",60134),eyeClosed:_("eye-closed",60135),fileBinary:_("file-binary",60136),fileCode:_("file-code",60137),fileMedia:_("file-media",60138),filePdf:_("file-pdf",60139),fileSubmodule:_("file-submodule",60140),fileSymlinkDirectory:_("file-symlink-directory",60141),fileSymlinkFile:_("file-symlink-file",60142),fileZip:_("file-zip",60143),files:_("files",60144),filter:_("filter",60145),flame:_("flame",60146),foldDown:_("fold-down",60147),foldUp:_("fold-up",60148),fold:_("fold",60149),folderActive:_("folder-active",60150),folderOpened:_("folder-opened",60151),gear:_("gear",60152),gift:_("gift",60153),gistSecret:_("gist-secret",60154),gist:_("gist",60155),gitCommit:_("git-commit",60156),gitCompare:_("git-compare",60157),compareChanges:_("compare-changes",60157),gitMerge:_("git-merge",60158),githubAction:_("github-action",60159),githubAlt:_("github-alt",60160),globe:_("globe",60161),grabber:_("grabber",60162),graph:_("graph",60163),gripper:_("gripper",60164),heart:_("heart",60165),home:_("home",60166),horizontalRule:_("horizontal-rule",60167),hubot:_("hubot",60168),inbox:_("inbox",60169),issueReopened:_("issue-reopened",60171),issues:_("issues",60172),italic:_("italic",60173),jersey:_("jersey",60174),json:_("json",60175),kebabVertical:_("kebab-vertical",60176),key:_("key",60177),law:_("law",60178),lightbulbAutofix:_("lightbulb-autofix",60179),linkExternal:_("link-external",60180),link:_("link",60181),listOrdered:_("list-ordered",60182),listUnordered:_("list-unordered",60183),liveShare:_("live-share",60184),loading:_("loading",60185),location:_("location",60186),mailRead:_("mail-read",60187),mail:_("mail",60188),markdown:_("markdown",60189),megaphone:_("megaphone",60190),mention:_("mention",60191),milestone:_("milestone",60192),gitPullRequestMilestone:_("git-pull-request-milestone",60192),mortarBoard:_("mortar-board",60193),move:_("move",60194),multipleWindows:_("multiple-windows",60195),mute:_("mute",60196),noNewline:_("no-newline",60197),note:_("note",60198),octoface:_("octoface",60199),openPreview:_("open-preview",60200),package:_("package",60201),paintcan:_("paintcan",60202),pin:_("pin",60203),play:_("play",60204),run:_("run",60204),plug:_("plug",60205),preserveCase:_("preserve-case",60206),preview:_("preview",60207),project:_("project",60208),pulse:_("pulse",60209),question:_("question",60210),quote:_("quote",60211),radioTower:_("radio-tower",60212),reactions:_("reactions",60213),references:_("references",60214),refresh:_("refresh",60215),regex:_("regex",60216),remoteExplorer:_("remote-explorer",60217),remote:_("remote",60218),remove:_("remove",60219),replaceAll:_("replace-all",60220),replace:_("replace",60221),repoClone:_("repo-clone",60222),repoForcePush:_("repo-force-push",60223),repoPull:_("repo-pull",60224),repoPush:_("repo-push",60225),report:_("report",60226),requestChanges:_("request-changes",60227),rocket:_("rocket",60228),rootFolderOpened:_("root-folder-opened",60229),rootFolder:_("root-folder",60230),rss:_("rss",60231),ruby:_("ruby",60232),saveAll:_("save-all",60233),saveAs:_("save-as",60234),save:_("save",60235),screenFull:_("screen-full",60236),screenNormal:_("screen-normal",60237),searchStop:_("search-stop",60238),server:_("server",60240),settingsGear:_("settings-gear",60241),settings:_("settings",60242),shield:_("shield",60243),smiley:_("smiley",60244),sortPrecedence:_("sort-precedence",60245),splitHorizontal:_("split-horizontal",60246),splitVertical:_("split-vertical",60247),squirrel:_("squirrel",60248),starFull:_("star-full",60249),starHalf:_("star-half",60250),symbolClass:_("symbol-class",60251),symbolColor:_("symbol-color",60252),symbolConstant:_("symbol-constant",60253),symbolEnumMember:_("symbol-enum-member",60254),symbolField:_("symbol-field",60255),symbolFile:_("symbol-file",60256),symbolInterface:_("symbol-interface",60257),symbolKeyword:_("symbol-keyword",60258),symbolMisc:_("symbol-misc",60259),symbolOperator:_("symbol-operator",60260),symbolProperty:_("symbol-property",60261),wrench:_("wrench",60261),wrenchSubaction:_("wrench-subaction",60261),symbolSnippet:_("symbol-snippet",60262),tasklist:_("tasklist",60263),telescope:_("telescope",60264),textSize:_("text-size",60265),threeBars:_("three-bars",60266),thumbsdown:_("thumbsdown",60267),thumbsup:_("thumbsup",60268),tools:_("tools",60269),triangleDown:_("triangle-down",60270),triangleLeft:_("triangle-left",60271),triangleRight:_("triangle-right",60272),triangleUp:_("triangle-up",60273),twitter:_("twitter",60274),unfold:_("unfold",60275),unlock:_("unlock",60276),unmute:_("unmute",60277),unverified:_("unverified",60278),verified:_("verified",60279),versions:_("versions",60280),vmActive:_("vm-active",60281),vmOutline:_("vm-outline",60282),vmRunning:_("vm-running",60283),watch:_("watch",60284),whitespace:_("whitespace",60285),wholeWord:_("whole-word",60286),window:_("window",60287),wordWrap:_("word-wrap",60288),zoomIn:_("zoom-in",60289),zoomOut:_("zoom-out",60290),listFilter:_("list-filter",60291),listFlat:_("list-flat",60292),listSelection:_("list-selection",60293),selection:_("selection",60293),listTree:_("list-tree",60294),debugBreakpointFunctionUnverified:_("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:_("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:_("debug-breakpoint-function-disabled",60296),debugStackframeActive:_("debug-stackframe-active",60297),circleSmallFilled:_("circle-small-filled",60298),debugStackframeDot:_("debug-stackframe-dot",60298),terminalDecorationMark:_("terminal-decoration-mark",60298),debugStackframe:_("debug-stackframe",60299),debugStackframeFocused:_("debug-stackframe-focused",60299),debugBreakpointUnsupported:_("debug-breakpoint-unsupported",60300),symbolString:_("symbol-string",60301),debugReverseContinue:_("debug-reverse-continue",60302),debugStepBack:_("debug-step-back",60303),debugRestartFrame:_("debug-restart-frame",60304),debugAlt:_("debug-alt",60305),callIncoming:_("call-incoming",60306),callOutgoing:_("call-outgoing",60307),menu:_("menu",60308),expandAll:_("expand-all",60309),feedback:_("feedback",60310),gitPullRequestReviewer:_("git-pull-request-reviewer",60310),groupByRefType:_("group-by-ref-type",60311),ungroupByRefType:_("ungroup-by-ref-type",60312),account:_("account",60313),gitPullRequestAssignee:_("git-pull-request-assignee",60313),bellDot:_("bell-dot",60314),debugConsole:_("debug-console",60315),library:_("library",60316),output:_("output",60317),runAll:_("run-all",60318),syncIgnored:_("sync-ignored",60319),pinned:_("pinned",60320),githubInverted:_("github-inverted",60321),serverProcess:_("server-process",60322),serverEnvironment:_("server-environment",60323),pass:_("pass",60324),issueClosed:_("issue-closed",60324),stopCircle:_("stop-circle",60325),playCircle:_("play-circle",60326),record:_("record",60327),debugAltSmall:_("debug-alt-small",60328),vmConnect:_("vm-connect",60329),cloud:_("cloud",60330),merge:_("merge",60331),export:_("export",60332),graphLeft:_("graph-left",60333),magnet:_("magnet",60334),notebook:_("notebook",60335),redo:_("redo",60336),checkAll:_("check-all",60337),pinnedDirty:_("pinned-dirty",60338),passFilled:_("pass-filled",60339),circleLargeFilled:_("circle-large-filled",60340),circleLarge:_("circle-large",60341),circleLargeOutline:_("circle-large-outline",60341),combine:_("combine",60342),gather:_("gather",60342),table:_("table",60343),variableGroup:_("variable-group",60344),typeHierarchy:_("type-hierarchy",60345),typeHierarchySub:_("type-hierarchy-sub",60346),typeHierarchySuper:_("type-hierarchy-super",60347),gitPullRequestCreate:_("git-pull-request-create",60348),runAbove:_("run-above",60349),runBelow:_("run-below",60350),notebookTemplate:_("notebook-template",60351),debugRerun:_("debug-rerun",60352),workspaceTrusted:_("workspace-trusted",60353),workspaceUntrusted:_("workspace-untrusted",60354),workspaceUnknown:_("workspace-unknown",60355),terminalCmd:_("terminal-cmd",60356),terminalDebian:_("terminal-debian",60357),terminalLinux:_("terminal-linux",60358),terminalPowershell:_("terminal-powershell",60359),terminalTmux:_("terminal-tmux",60360),terminalUbuntu:_("terminal-ubuntu",60361),terminalBash:_("terminal-bash",60362),arrowSwap:_("arrow-swap",60363),copy:_("copy",60364),personAdd:_("person-add",60365),filterFilled:_("filter-filled",60366),wand:_("wand",60367),debugLineByLine:_("debug-line-by-line",60368),inspect:_("inspect",60369),layers:_("layers",60370),layersDot:_("layers-dot",60371),layersActive:_("layers-active",60372),compass:_("compass",60373),compassDot:_("compass-dot",60374),compassActive:_("compass-active",60375),azure:_("azure",60376),issueDraft:_("issue-draft",60377),gitPullRequestClosed:_("git-pull-request-closed",60378),gitPullRequestDraft:_("git-pull-request-draft",60379),debugAll:_("debug-all",60380),debugCoverage:_("debug-coverage",60381),runErrors:_("run-errors",60382),folderLibrary:_("folder-library",60383),debugContinueSmall:_("debug-continue-small",60384),beakerStop:_("beaker-stop",60385),graphLine:_("graph-line",60386),graphScatter:_("graph-scatter",60387),pieChart:_("pie-chart",60388),bracket:_("bracket",60175),bracketDot:_("bracket-dot",60389),bracketError:_("bracket-error",60390),lockSmall:_("lock-small",60391),azureDevops:_("azure-devops",60392),verifiedFilled:_("verified-filled",60393),newline:_("newline",60394),layout:_("layout",60395),layoutActivitybarLeft:_("layout-activitybar-left",60396),layoutActivitybarRight:_("layout-activitybar-right",60397),layoutPanelLeft:_("layout-panel-left",60398),layoutPanelCenter:_("layout-panel-center",60399),layoutPanelJustify:_("layout-panel-justify",60400),layoutPanelRight:_("layout-panel-right",60401),layoutPanel:_("layout-panel",60402),layoutSidebarLeft:_("layout-sidebar-left",60403),layoutSidebarRight:_("layout-sidebar-right",60404),layoutStatusbar:_("layout-statusbar",60405),layoutMenubar:_("layout-menubar",60406),layoutCentered:_("layout-centered",60407),target:_("target",60408),indent:_("indent",60409),recordSmall:_("record-small",60410),errorSmall:_("error-small",60411),terminalDecorationError:_("terminal-decoration-error",60411),arrowCircleDown:_("arrow-circle-down",60412),arrowCircleLeft:_("arrow-circle-left",60413),arrowCircleRight:_("arrow-circle-right",60414),arrowCircleUp:_("arrow-circle-up",60415),layoutSidebarRightOff:_("layout-sidebar-right-off",60416),layoutPanelOff:_("layout-panel-off",60417),layoutSidebarLeftOff:_("layout-sidebar-left-off",60418),blank:_("blank",60419),heartFilled:_("heart-filled",60420),map:_("map",60421),mapHorizontal:_("map-horizontal",60421),foldHorizontal:_("fold-horizontal",60421),mapFilled:_("map-filled",60422),mapHorizontalFilled:_("map-horizontal-filled",60422),foldHorizontalFilled:_("fold-horizontal-filled",60422),circleSmall:_("circle-small",60423),bellSlash:_("bell-slash",60424),bellSlashDot:_("bell-slash-dot",60425),commentUnresolved:_("comment-unresolved",60426),gitPullRequestGoToChanges:_("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:_("git-pull-request-new-changes",60428),searchFuzzy:_("search-fuzzy",60429),commentDraft:_("comment-draft",60430),send:_("send",60431),sparkle:_("sparkle",60432),insert:_("insert",60433),mic:_("mic",60434),thumbsdownFilled:_("thumbsdown-filled",60435),thumbsupFilled:_("thumbsup-filled",60436),coffee:_("coffee",60437),snake:_("snake",60438),game:_("game",60439),vr:_("vr",60440),chip:_("chip",60441),piano:_("piano",60442),music:_("music",60443),micFilled:_("mic-filled",60444),repoFetch:_("repo-fetch",60445),copilot:_("copilot",60446),lightbulbSparkle:_("lightbulb-sparkle",60447),robot:_("robot",60448),sparkleFilled:_("sparkle-filled",60449),diffSingle:_("diff-single",60450),diffMultiple:_("diff-multiple",60451),surroundWith:_("surround-with",60452),share:_("share",60453),gitStash:_("git-stash",60454),gitStashApply:_("git-stash-apply",60455),gitStashPop:_("git-stash-pop",60456),vscode:_("vscode",60457),vscodeInsiders:_("vscode-insiders",60458),codeOss:_("code-oss",60459),runCoverage:_("run-coverage",60460),runAllCoverage:_("run-all-coverage",60461),coverage:_("coverage",60462),githubProject:_("github-project",60463),mapVertical:_("map-vertical",60464),foldVertical:_("fold-vertical",60464),mapVerticalFilled:_("map-vertical-filled",60465),foldVerticalFilled:_("fold-vertical-filled",60465),goToSearch:_("go-to-search",60466),percentage:_("percentage",60467),sortPercentage:_("sort-percentage",60467)};var M3e={dialogError:_("dialog-error","error"),dialogWarning:_("dialog-warning","warning"),dialogInfo:_("dialog-info","info"),dialogClose:_("dialog-close","close"),treeItemExpanded:_("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:_("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:_("tree-filter-on-type-off","list-selection"),treeFilterClear:_("tree-filter-clear","close"),treeItemLoading:_("tree-item-loading","loading"),menuSelection:_("menu-selection","check"),menuSubmenu:_("menu-submenu","chevron-right"),menuBarMore:_("menubar-more","more"),scrollbarButtonLeft:_("scrollbar-button-left","triangle-left"),scrollbarButtonRight:_("scrollbar-button-right","triangle-right"),scrollbarButtonUp:_("scrollbar-button-up","triangle-up"),scrollbarButtonDown:_("scrollbar-button-down","triangle-down"),toolBarMore:_("toolbar-more","more"),quickInputBack:_("quick-input-back","arrow-left"),dropDownButton:_("drop-down-button",60084),symbolCustomColor:_("symbol-customcolor",60252),exportIcon:_("export",60332),workspaceUnspecified:_("workspace-unspecified",60355),newLine:_("newline",60394),thumbsDownFilled:_("thumbsdown-filled",60435),thumbsUpFilled:_("thumbsup-filled",60436),gitFetch:_("git-fetch",60445),lightbulbSparkleAutofix:_("lightbulb-sparkle-autofix",60447),debugBreakpointPending:_("debug-breakpoint-pending",60377)},Kr={...poe,...M3e};var I_=class{constructor(e){this.accessor=e}async findEnclosingBlocks(e,r){let n=this.accessor.get(xt).getTreeSitterAST(e);if(n===void 0)return;let i=Ki(r,e);return(await n.getFineScopes(i))?.map(s=>{let a=_s(e,s);return{kind:"code",name:e.lineAt(a.start).text.trim(),range:a}})}findEnclosingSymbols(e,r){for(let n of e)if(n.range.contains(r)){let i=this.findEnclosingSymbols(n.children,r);return i?[n,...i]:[n]}}async selectEnclosingScope(e,r){let n=await this.accessor.get(hi).getDocumentSymbols(e.document.uri);if(!n||n.length>0&&!n[0].hasOwnProperty("children"))return;let i=e.selection;if(!i.isEmpty)return;let o=this.findEnclosingSymbols(n,e.selection.active);if(r?.includeBlocks&&o?.push(...await this.findEnclosingBlocks(e.document,e.selection)??[]),o||(o=n),o?.length===1){let s=o[0];e.selection=new mC.Selection(s.range.start,s.range.end)}else if(o&&o.length>1||!o&&n.length>1){let s=o.sort((c,u)=>u.range.start.line-c.range.start.line).map(c=>({label:`$(${c.kind==="code"?"code":foe.toIcon(c.kind).id}) ${c.name}`,description:`:${c.range.start.line+1}-${c.range.end.line+1}`,symbol:c}));if(!await this.accessor.get(HP).showQuickPick(s,{placeHolder:r?.reason??mC.l10n.t("Select an enclosing range"),onDidSelectItem(c){let u=c.symbol;u&&(e.selection=new mC.Selection(u.range.start,u.range.end),e.revealRange(u.range))}}))throw e.selection=i,new ys}return e.selection}};I_=fe([ie(0,ct)],I_);var foe;(r=>{let t=new Map;t.set(0,Kr.symbolFile),t.set(1,Kr.symbolModule),t.set(2,Kr.symbolNamespace),t.set(3,Kr.symbolPackage),t.set(4,Kr.symbolClass),t.set(5,Kr.symbolMethod),t.set(6,Kr.symbolProperty),t.set(7,Kr.symbolField),t.set(8,Kr.symbolConstructor),t.set(9,Kr.symbolEnum),t.set(10,Kr.symbolInterface),t.set(11,Kr.symbolFunction),t.set(12,Kr.symbolVariable),t.set(13,Kr.symbolConstant),t.set(14,Kr.symbolString),t.set(15,Kr.symbolNumber),t.set(16,Kr.symbolBoolean),t.set(17,Kr.symbolArray),t.set(18,Kr.symbolObject),t.set(19,Kr.symbolKey),t.set(20,Kr.symbolNull),t.set(21,Kr.symbolEnumMember),t.set(22,Kr.symbolStruct),t.set(23,Kr.symbolEvent),t.set(24,Kr.symbolOperator),t.set(25,Kr.symbolTypeParameter);function e(n){let i=t.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=Kr.symbolProperty),i}r.toIcon=e})(foe||={});var Ta=oe("ISearchService"),bk=class{async findFilesWithDefaultExcludes(e,r,n){return this._findFilesWithDefaultExcludesAndExcludes(e,void 0,r,n)}async _findFilesWithDefaultExcludesAndExcludes(e,r,n,i){let o={maxResults:n,exclude:r,useDefaultExcludes:!0,useDefaultSearchExcludes:!0},s=await this.findFiles(e,o,i);return n===1?s[0]:s}};async function Wl(t,e,r){let n=new Ml;try{t.debug(`${e} started`);let i=await r();return t.debug(`${e} finished. Elapsed ${n.elapsed()}`),i}catch(i){throw t.debug(`${e} failed. Elapsed ${n.elapsed()}`),i}}function gi(t){return function(e,r,n){let i=n.value,o=0;return n.value=async function(...s){let a=o++,c=t(this);return Wl(c,`${r}#${a}`,()=>i.apply(this,s))},n}}function Z0(t){return function(e,r,n){let i=n.value;return n.value=async function(...o){let s=new Ml;try{let a=await i.apply(this,o);return t.call(this,s.elapsed(),"success"),a}catch(a){throw t.call(this,s.elapsed(),Ep(a)?"cancelled":"failed"),a}},n}}var KU=W(require("vscode"));var w_=class extends bk{findTextInFiles(e,r,n,i){return Promise.resolve(KU.workspace.findTextInFiles(e,r,o=>n.report(o),i))}findFiles(e,r,n){return KU.workspace.findFiles2(e,r,n)}};var ev=class extends w_{constructor(r,n){super();this._ignoreService=r;this._logger=n.getLogger("SearchService")}async findFilesWithDefaultExcludes(r,n,i){let o=await this._ignoreService.asMinimatchPattern();return this._findFilesWithDefaultExcludesAndExcludes(r,o,n,i)}async findFiles(r,n,i){let o=await this._ignoreService.asMinimatchPattern();return n?.exclude||(n={...n,exclude:o}),await super.findFiles(r,n,i)}async findTextInFiles(r,n,i,o){return super.findTextInFiles(r,n,i,o)}};fe([gi(r=>r._logger)],ev.prototype,"findFiles",1),ev=fe([ie(0,De),ie(1,ue)],ev);var Tt=oe("ITabsAndEditorsService");var Yo=W(require("vscode"));var _k=class{constructor(){this._store=new qt;this._tabGroupsUseInfo=new Map;this._tabClock=0;this.onDidChangeActiveTextEditor=Yo.window.onDidChangeActiveTextEditor;this.onDidChangeTabs=Yo.window.tabGroups.onDidChangeTabs;let e=()=>this._tabGroupsUseInfo.set(Yo.window.tabGroups.activeTabGroup,this._tabClock++);e(),this._store.add(Yo.window.tabGroups.onDidChangeTabGroups(r=>{r.closed.forEach(n=>this._tabGroupsUseInfo.delete(n)),e()}))}dispose(){this._store.dispose()}get activeTextEditor(){let e=Yo.window.activeTextEditor;if(e&&e.document.uri.scheme!=="output")return e;let r=new kn;Yo.window.visibleTextEditors.forEach(i=>r.set(i.document.uri,i));let n=[...this._tabGroupsUseInfo];n.sort((i,o)=>o[1]-i[1]);for(let[i]of n)if(i.activeTab){let o=this._asTabInfo(i.activeTab);if(o.uri&&r.has(o.uri))return r.get(o.uri)}}get activeNotebookEditor(){return Yo.window.activeNotebookEditor}get tabs(){return Yo.window.tabGroups.all.flatMap(e=>e.tabs).map(this._asTabInfo,this)}_asTabInfo(e){let r;return e.input instanceof Yo.TabInputText||e.input instanceof Yo.TabInputNotebook?r=e.input.uri:(e.input instanceof Yo.TabInputTextDiff||e.input instanceof Yo.TabInputNotebookDiff)&&(r=e.input.modified),{tab:e,uri:r}}};var Mt=oe("IExperimentationService"),xk=class{constructor(){this.initializePromise=Promise.resolve();this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};var Sk=class{dispose(){}sendInternalMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryErrorEvent(e,r,n){}sendGHTelemetryEvent(e,r,n){}sendGHTelemetryErrorEvent(e,r,n){}sendGHTelemetryException(e,r){}sendTelemetryEvent(e,r,n,i){}sendTelemetryErrorEvent(e,r,n,i){}setSharedProperty(e,r){}postEvent(e,r){}sendRestrictedGHTelemetryEvent(e,r,n){}sendRestrictedGHTelemetryErrorEvent(e,r,n){}};var xye=W(_ye()),DL=W(require("os"));var Eh=class{constructor(e,r,n){this.namespace=r;this.client=x$e(e,n),Sye(e,this.client)}separateData(e){if(e.properties!==void 0||e.measurements!==void 0)return e.properties=e.properties||{},e.measurements=e.measurements||{},e;let r={},n={};for(let[i,o]of Object.entries(e))typeof o=="number"?n[i]=o:r[i]=o;return{properties:r,measurements:n}}sendEventData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackEvent({name:this.qualifyEventName(e),properties:n,measurements:i})}sendErrorData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackException({exception:e,properties:n,measurements:i})}flush(){return new Promise(e=>{this.client.flush({callback:()=>{e(void 0)}})})}qualifyEventName(e){return e.includes(this.namespace)?e:`${this.namespace}/${e}`}};function x$e(t,e){let r=new xye.TelemetryClient(e);return r.config.enableAutoCollectRequests=!1,r.config.enableAutoCollectPerformance=!1,r.config.enableAutoCollectExceptions=!1,r.config.enableAutoCollectConsole=!1,r.config.enableAutoCollectDependencies=!1,r.config.noDiagnosticChannel=!0,Sye(t,r),r}function Sye(t,e){e.commonProperties=S$e(e.commonProperties,t),e.context.tags[e.context.keys.cloudRoleInstance]="REDACTED",e.config.endpointUrl=t.get(rP).getUrl()}function S$e(t,e){t=t||{},t.common_os=DL.platform(),t.common_platformversion=DL.release();let r=e.get(St);return t.common_vscodemachineid=r.machineId,t.common_vscodesessionid=r.sessionId,t.common_uikind="desktop",t.common_remotename="none",t.common_isnewappinstall="",t}var Wz="7d7048df-6dd0-4048-bb23-b716c1461f8f",Kz="3fdd7f28-937a-48c8-9a21-ba337db23bd1";async function Yz(t,e,r){let n=t.get(Am);if(await n.deactivate(),!r)return;let i=new Eh(t,e,Wz),o=new Eh(t,e,Kz);return n.setReporter(i),n.setSecureReporter(o),{dispose(){n.setReporter(void 0),n.setSecureReporter(void 0),i.flush(),o.flush()}}}var zI=W(Bye());function j$e(t){return t?zI.TargetPopulation.Insiders:zI.TargetPopulation.Public}async function qye(t,e,r){let n=t.extension.id,i=t.extension.packageJSON.version,o=j$e(r);return(0,zI.getExperimentationService)(n,i,o,e,t.globalState)}var VI=require("vscode");function zL(t){return t.replace(/([\s|(]|file:\/\/)(\/[^\s]+)/g,"$1[redacted]").replace(/([\s|(]|file:\/\/)([a-zA-Z]:[(\\|/){1,2}][^\s]+)/gi,"$1[redacted]").replace(/([\s|(]|file:\/\/)(\\[^\s]+)/gi,"$1[redacted]")}var VL=class{constructor(e,r,n,i,o){this._accessor=e;this._restrictedTelemetryEnabled=!1;this._disposables=[];this._nonRestrictedTelemetryLogger=VI.env.createTelemetryLogger(new Eh(this._accessor,r,n),{ignoreBuiltInCommonProperties:!0,ignoreUnhandledErrors:!0}),this._disposables.push(o.onCopilotToken(s=>{s.token.getTokenValue("rt")==="1"?(this._restrictedTelemetryEnabled=!0,this._restrictedTelemetryLogger=VI.env.createTelemetryLogger(new Eh(this._accessor,r,i),{ignoreBuiltInCommonProperties:!0,ignoreUnhandledErrors:!0})):(this._restrictedTelemetryEnabled=!1,this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger.dispose(),this._restrictedTelemetryLogger=void 0)}))}sendTelemetryEvent(e,r,n){this._nonRestrictedTelemetryLogger.logUsage(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendTelemetryErrorEvent(e,r,n){this._nonRestrictedTelemetryLogger.logError(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendRestrictedTelemetryEvent(e,r,n){this._restrictedTelemetryEnabled&&this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger?.logUsage(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendRestrictedTelemetryErrorEvent(e,r,n){this._restrictedTelemetryEnabled&&this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger?.logError(e,this.markAsIssuedAndMakeReadyForSending(r,n))}async sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=Ar.createAndMarkAsIssued({origin:zL(r),reason:this._restrictedTelemetryEnabled?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await i.makeReadyForSending(this._accessor),this.sendTelemetryEvent("exception",i.properties,i.measurements),!this._restrictedTelemetryEnabled||!this._restrictedTelemetryLogger)return;let o=Ar.createAndMarkAsIssued({origin:r});await o.makeReadyForSending(this._accessor),this._restrictedTelemetryLogger.logError(n,o)}markAsIssuedAndMakeReadyForSending(e,r){let n=Ar.createAndMarkAsIssued(gne(e),r);n.makeReadyForSending(this._accessor);let i={};for(let o in n.properties)i[o]=new VI.TelemetryTrustedValue(n.properties[o]);return{properties:i,measurements:n.measurements}}dispose(){this._nonRestrictedTelemetryLogger.dispose(),this._disposables.forEach(e=>e.dispose()),this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger.dispose()}};var sY=W(IEe());var e5=class{constructor(e,r,n,i){this._isInternal=!1;i.onCopilotToken(async o=>{if(this._username=(await Bu(e))?.account?.label,this._sku=o.token.getTokenValue("sku"),this._isInternal=o.token.isInternal,!o.token.organization_list||!o.envelope.chat_enabled){this._internalTelemetryReporter=void 0;return}o.token.isInternal&&(this._internalTelemetryReporter=new sY.default(r))}),this._externalTelemetryReporter=new sY.default(n)}dispose(){this._externalTelemetryReporter.dispose(),this._internalTelemetryReporter?.dispose()}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this._isInternal&&this.sendInternalTelemetryEvent(e,n),this.sendTelemetryEvent(e,n)}sendInternalTelemetryEvent(e,r,n){this._internalTelemetryReporter&&(r={...r,"common.userName":this._username??"undefined"},this._internalTelemetryReporter.sendRawTelemetryEvent(e,r,n))}sendTelemetryEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryEvent(e,r,n)}sendTelemetryErrorEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryErrorEvent(e,r,n)}};var t5=class{constructor(e,r,n,i,o,s){this._sharedProperties={};this._disposables=[];let a=r.get(ke),c=r.get(Co);this._disposables.push(c.onCopilotToken(u=>{this.sendMSFTTelemetryEvent("token",void 0,{chatEnabled:u.envelope.chat_enabled?1:0,snippyEnabled:u.envelope.public_suggestions==="enabled"?1:0,telemetryEnabled:u.envelope.telemetry==="enabled"?1:0})})),this._microsoftTelemetryService=new e5(a,n,i,c),this._ghTelemetryService=new VL(r,e,o,s,c),this._disposables.push(this._microsoftTelemetryService,this._ghTelemetryService)}dispose(){this._disposables.forEach(e=>e.dispose())}sendMSFTTelemetryEvent(e,r,n){this.sendTelemetryEvent(e,{github:!1,microsoft:!0},r,n)}sendMSFTTelemetryErrorEvent(e,r,n){this.sendTelemetryErrorEvent(e,{github:!1,microsoft:!0},r,n)}sendGHTelemetryEvent(e,r,n){this.sendTelemetryEvent(e,{github:!0,microsoft:!1},r,n)}sendGHTelemetryErrorEvent(e,r,n){this.sendTelemetryErrorEvent(e,{github:!0,microsoft:!1},r,n)}sendGHTelemetryException(e,r){this._ghTelemetryService.sendExceptionTelemetry(e,r)}sendRestrictedGHTelemetryEvent(e,r,n){r={...r,...this._sharedProperties},this._ghTelemetryService.sendRestrictedTelemetryEvent(e,r,n)}sendRestrictedGHTelemetryErrorEvent(e,r,n){r={...r,...this._sharedProperties},this._ghTelemetryService.sendRestrictedTelemetryErrorEvent(e,r,n)}sendInternalMSFTTelemetryEvent(e,r,n){r={...r,...this._sharedProperties},this._microsoftTelemetryService.sendInternalTelemetryEvent(e,r,n)}sendTelemetryEvent(e,r,n,i){n={...n,...this._sharedProperties},r.github&&this._ghTelemetryService.sendTelemetryEvent(e,n,i),r.microsoft&&this._microsoftTelemetryService.sendTelemetryEvent(e,n,i)}sendTelemetryErrorEvent(e,r,n,i){n={...n,...this._sharedProperties},r.github&&this._ghTelemetryService.sendTelemetryErrorEvent(e,n,i),r.microsoft&&this._microsoftTelemetryService.sendTelemetryErrorEvent(e,n,i)}setSharedProperty(e,r){this._sharedProperties[e]=r}postEvent(e,r){for(let[n,i]of Object.entries(this._sharedProperties))r.set(n,i);this._microsoftTelemetryService.postEvent(e,r)}};var ao=oe("ITerminalService");var REe=require("path"),AEe=require("process"),Ng=require("vscode"),r5=new Map,cY=new Map;function PEe(){let t=Ng.window.activeTerminal;return t===void 0?"":r5.get(t)?.join(`
`)||""}function kEe(){let t=Ng.window.activeTerminal;if(t!==void 0)return cY.get(t)?.at(-1)}function DEe(){try{return Ng.window.activeTerminal?.selection??""}catch{return""}}var aY;function NEe(){let t=Ng.window.activeTerminal;if(t&&"shellPath"in t.creationOptions){let e=t.creationOptions.shellPath;if(e){let r,n=(0,REe.basename)(e);if(n==="bash.exe")r="Git Bash";else{let i=n.replace(/\..+/,"");switch(i){case"pwsh":case"powershell":r="powershell";case"":break;default:r=i}}if(r)return aY=r,r}}return aY||(AEe.platform==="win32"?"powershell":"bash")}function wEe(t,e){t.push(e),t.length>40&&t.shift()}function VYe(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function LEe(){return[Ng.window.onDidWriteTerminalData(t=>{let e=r5.get(t.terminal);e||(e=[],r5.set(t.terminal,e)),wEe(e,VYe(t.data))}),Ng.window.onDidExecuteTerminalCommand(t=>{let e=cY.get(t.terminal);e||(e=[],cY.set(t.terminal,e)),wEe(e,t)}),Ng.window.onDidCloseTerminal(t=>{r5.delete(t)})]}var n5=class extends hr{constructor(){super();for(let e of LEe())this._register(e)}get terminalBuffer(){return PEe()}get terminalLastCommand(){return kEe()}get terminalSelection(){return DEe()}get terminalShellType(){return NEe()}};var gl=oe("ITestProvider");var Ms=W(require("vscode"));function uY(t){if(!t()){debugger;t(),Vb(new ln("Assertion Failed"))}}var Yy=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}getDebugName(e){return $Ye(e,this)}},OEe=new Map,lY=new WeakMap;function $Ye(t,e){let r=lY.get(t);if(r)return r;let n=WYe(t,e);if(n){let i=OEe.get(n)??0;i++,OEe.set(n,i);let o=i===1?n:`${n}#${i}`;return lY.set(t,o),o}}function WYe(t,e){let r=lY.get(t);if(r)return r;let n=e.owner?YYe(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let s=e.referenceFn;if(s!==void 0&&(i=i5(s),i!==void 0))return n+i;if(e.owner!==void 0){let a=KYe(e.owner,t);if(a!==void 0)return n+a}}function KYe(t,e){for(let r in t)if(t[r]===e)return r}var MEe=new Map,FEe=new WeakMap;function YYe(t){let e=FEe.get(t);if(e)return e;let r=QYe(t),n=MEe.get(r)??0;n++,MEe.set(r,n);let i=n===1?r:`${r}#${n}`;return FEe.set(t,i),i}function QYe(t){let e=t.constructor;return e?e.name:"Object"}function i5(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}var XYe;function Lg(){return XYe}function s5(t){return new o5(new Yy(void 0,void 0,t),t,void 0,void 0)}var o5=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=this.createChangeSummary?.(),Lg()?.handleAutorunCreated(this),this._runIfNeeded(),Kb(this)}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Yb(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;let r=this.disposed;try{if(!r){Lg()?.handleAutorunTriggered(this);let n=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}}finally{r||Lg()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,uY(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,r){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:r,didChange:i=>i===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=o5)(s5||={});var UEe=(t,e)=>t===e;var JYe;var ZYe;var eQe;var dY=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return eQe({owner:n,debugName:()=>{let o=i5(i);if(o!==void 0)return o;let a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:i},o=>i(this.read(o),o))}recomputeInitiallyAndOnChange(e,r){return e.add(JYe(this,r)),this}keepObserved(e){return e.add(ZYe(this)),this}get debugValue(){return this.get()}},pY=class extends dY{constructor(){super(...arguments);this.observers=new Set}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded()}removeObserver(r){this.observers.delete(r)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};var fY=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Lg()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():i5(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,Lg()?.handleEndTransaction()}};function BEe(t,e){let r;return typeof t=="string"?r=new Yy(void 0,t,void 0):r=new Yy(t,void 0,void 0),new mY(r,e,UEe)}var mY=class extends pY{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new fY(()=>{},()=>`Setting ${this.debugName}`));try{let s=this._value;this._setValue(r),Lg()?.handleObservableChanged(this,{oldValue:s,newValue:r,change:i,didChange:!0,hadValue:!0});for(let a of this.observers)n.updateObserver(a,this),a.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};var a5=class extends hr{constructor(){super();this.resultsDocs=new kn;this.isEnabled=BEe("TestProvider.isEnabled",!1);this._register(s5(r=>{Ms.commands.executeCommand("setContext","github.copilot.chat.fixTestFailures.enabled",this.isEnabled.read(r))}))}get lastResultsFrom(){return Ms.tests.testResults[0]?.completedAt}async setEnablement(r){let n=await r.getTreatmentVariableAsync("vscode","copilotchat.fixTestFailures"),i=Ms.env.appName.includes("Insiders")||Ms.env.appName.includes("OSS"),o=n||i;this.isEnabled.set(o,void 0)}getAllFailures(){let r=Ms.tests.testResults[0];return r?this.dfsFailures(r.results):Mu.empty()}getFailureAtPosition(r,n){let i=Ms.tests.testResults[0];if(this.resultsDocsAreForTestRun!==i&&this.makeResultsDocs(i),!i)return;let o=this.resultsDocs.get(r)||[],s=bre(o,a=>!a.range?.start.isAfter(n));if(s){for(let a of s.taskStates)if(a.state===Ms.TestResultState.Failed||a.state===Ms.TestResultState.Errored)return{snapshot:s,task:a}}}*dfsFailures(r){for(let n of r){yield*this.dfsFailures(n.children);for(let i of n.taskStates)(i.state===Ms.TestResultState.Failed||i.state===Ms.TestResultState.Errored)&&(yield{snapshot:n,task:i})}}makeResultsDocs(r){if(this.resultsDocs.clear(),this.resultsDocsAreForTestRun=r,!r)return;let n=[r.results];for(;n.length;)for(let o of n.pop()){if(n.push(o.children),!o.uri)continue;let s=this.resultsDocs.get(o.uri);s?s.push(o):this.resultsDocs.set(o.uri,[o])}let i=new Ms.Range(0,0,0,0);for(let o of this.resultsDocs.values())o.sort((s,a)=>(s.range||i).start.compareTo((a.range||i).start)||tQe(s.taskStates,a.taskStates))}},tQe=(t,e)=>{let r=0,n=0;for(let i of t)r=Math.max(r,i.state);for(let i of e)n=Math.max(n,i.state);return r-n};var Ze=oe("IWorkspaceService"),c5=class{getWorkspaceFolder(e){return this.getWorkspaceFolders().find(r=>r.scheme===e.scheme&&r.authority===e.authority&&e.fsPath.startsWith(r.fsPath))}};function Og(t,e){let r=t.getWorkspaceFolder(e);return r?ur.relative(r.path,e.path):e.path}var Mg=require("vscode");function qEe(t){return t.scheme==="vscode-vfs"&&t.authority.startsWith("github")}var xS=class extends c5{constructor(r){super();this._accessor=r;this.onDidOpenTextDocument=Mg.workspace.onDidOpenTextDocument;this.onDidChangeTextDocument=Mg.workspace.onDidChangeTextDocument;this.onDidCloseTextDocument=Mg.workspace.onDidCloseTextDocument;this._logger=this._accessor.get(ue).getLogger("ExtensionTextDocumentManager")}get textDocuments(){return Mg.workspace.textDocuments}async openTextDocument(r){return await Mg.workspace.openTextDocument(r)}get notebookDocuments(){return Mg.workspace.notebookDocuments}getWorkspaceFolders(){return Mg.workspace.workspaceFolders?.map(r=>r.uri)??[]}ensureWorkspaceIsFullyLoaded(){return this._fullyLoadedPromise??=(async()=>{let r=this._accessor.get(yk);for(let n of this.getWorkspaceFolders())if(qEe(n)){this._logger.debug(`Preloading virtual workspace contents for ${n}`);try{let i=await r.loadWorkspaceContents(n);this._logger.info(`loading virtual workspace contents resulted in ${i} for: ${n}`)}catch(i){this._logger.error(`Error loading virtual workspace contents for ${n}: ${i}`)}}})(),this._fullyLoadedPromise}};xS=fe([ie(0,ct)],xS);var tCe=W(require("crypto"));var SS=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,GEe=new Set,hY=typeof process=="object"&&process?process:{},jEe=(t,e,r,n)=>{typeof hY.emitWarning=="function"?hY.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},u5=globalThis.AbortController,HEe=globalThis.AbortSignal;if(typeof u5>"u"){HEe=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},u5=class{constructor(){e()}signal=new HEe;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=hY.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,jEe("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var rQe=t=>!GEe.has(t),eGt=Symbol("type"),Fg=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),zEe=t=>Fg(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?ES:null:null,ES=class extends Array{constructor(e){super(e),this.fill(0)}},gY=class t{heap;length;static#t=!1;static create(e){let r=zEe(e);if(!r)return[];t.#t=!0;let n=new t(e,r);return t.#t=!1,n}constructor(e,r){if(!t.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},l5=class t{#t;#i;#d;#r;#c;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#m;#s;#n;#e;#p;#h;#l;#u;#v;#f;#_;#x;#y;#S;#I;#g;static unsafeExposeInternals(e){return{starts:e.#x,ttls:e.#y,sizes:e.#_,keyMap:e.#s,keyList:e.#n,valList:e.#e,next:e.#p,prev:e.#h,get head(){return e.#l},get tail(){return e.#u},free:e.#v,isBackgroundFetch:r=>e.#o(r),backgroundFetch:(r,n,i,o)=>e.#D(r,n,i,o),moveToTail:r=>e.#A(r),indexes:r=>e.#E(r),rindexes:r=>e.#T(r),isStale:r=>e.#b(r)}}get max(){return this.#t}get maxSize(){return this.#i}get calculatedSize(){return this.#m}get size(){return this.#a}get fetchMethod(){return this.#c}get dispose(){return this.#d}get disposeAfter(){return this.#r}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:u,disposeAfter:l,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,maxEntrySize:m=0,sizeCalculation:h,fetchMethod:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:x,ignoreFetchAbort:S}=e;if(r!==0&&!Fg(r))throw new TypeError("max option must be a nonnegative integer");let T=r?zEe(r):Array;if(!T)throw new Error("invalid max value: "+r);if(this.#t=r,this.#i=f,this.maxEntrySize=m||this.#i,this.sizeCalculation=h,this.sizeCalculation){if(!this.#i&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#c=g,this.#I=!!g,this.#s=new Map,this.#n=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#p=new T(r),this.#h=new T(r),this.#l=0,this.#u=0,this.#v=gY.create(r),this.#a=0,this.#m=0,typeof u=="function"&&(this.#d=u),typeof l=="function"?(this.#r=l,this.#f=[]):(this.#r=void 0,this.#f=void 0),this.#S=!!this.#d,this.#g=!!this.#r,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!b,this.allowStaleOnFetchAbort=!!x,this.ignoreFetchAbort=!!S,this.maxEntrySize!==0){if(this.#i!==0&&!Fg(this.#i))throw new TypeError("maxSize must be a positive integer if specified");if(!Fg(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#U()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Fg(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Fg(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#N()}if(this.#t===0&&this.ttl===0&&this.#i===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#i){let L="LRU_CACHE_UNBOUNDED";rQe(L)&&(GEe.add(L),jEe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#N(){let e=new ES(this.#t),r=new ES(this.#t);this.#y=e,this.#x=r,this.#L=(o,s,a=SS.now())=>{if(r[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#b(o)&&this.delete(this.#n[o])},s+1);c.unref&&c.unref()}},this.#w=o=>{r[o]=e[o]!==0?SS.now():0},this.#C=(o,s)=>{if(e[s]){let a=e[s],c=r[s];if(!a||!c)return;o.ttl=a,o.start=c,o.now=n||i();let u=o.now-c;o.remainingTTL=a-u}};let n=0,i=()=>{let o=SS.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let a=e[s],c=r[s];if(!a||!c)return 1/0;let u=(n||i())-c;return a-u},this.#b=o=>{let s=r[o],a=e[o];return!!a&&!!s&&(n||i())-s>a}}#w=()=>{};#C=()=>{};#L=()=>{};#b=()=>!1;#U(){let e=new ES(this.#t);this.#m=0,this.#_=e,this.#R=r=>{this.#m-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#o(n))return 0;if(!Fg(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Fg(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#P=(r,n,i)=>{if(e[r]=n,this.#i){let o=this.#i-e[r];for(;this.#m>o;)this.#k(!0)}this.#m+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#m)}}#R=e=>{};#P=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:e=this.allowStale}={}){if(this.#a)for(let r=this.#u;!(!this.#M(r)||((e||!this.#b(r))&&(yield r),r===this.#l));)r=this.#h[r]}*#T({allowStale:e=this.allowStale}={}){if(this.#a)for(let r=this.#l;!(!this.#M(r)||((e||!this.#b(r))&&(yield r),r===this.#u));)r=this.#p[r]}#M(e){return e!==void 0&&this.#s.get(this.#n[e])===e}*entries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#o(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#T())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#o(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#E()){let r=this.#n[e];r!==void 0&&!this.#o(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#T()){let r=this.#n[e];r!==void 0&&!this.#o(this.#e[e])&&(yield r)}}*values(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#o(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#T())this.#e[e]!==void 0&&!this.#o(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#E()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#n[n],this))return this.get(this.#n[n],r)}}forEach(e,r=this){for(let n of this.#E()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#n[n],this)}}rforEach(e,r=this){for(let n of this.#T()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#n[n],this)}}purgeStale(){let e=!1;for(let r of this.#T({allowStale:!0}))this.#b(r)&&(this.delete(this.#n[r]),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#e[r],i=this.#o(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#y&&this.#x){let s=this.#y[r],a=this.#x[r];if(s&&a){let c=s-(SS.now()-a);o.ttl=c,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#E({allowStale:!0})){let n=this.#n[r],i=this.#e[r],o=this.#o(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#y&&this.#x){s.ttl=this.#y[r];let a=SS.now()-this.#x[r];s.start=Math.floor(Date.now()-a)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=SS.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,l=this.#O(e,r,n.size||0,a);if(this.maxEntrySize&&l>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;let d=this.#a===0?void 0:this.#s.get(e);if(d===void 0)d=this.#a===0?this.#u:this.#v.length!==0?this.#v.pop():this.#a===this.#t?this.#k(!1):this.#a,this.#n[d]=e,this.#e[d]=r,this.#s.set(e,d),this.#p[this.#u]=d,this.#h[d]=this.#u,this.#u=d,this.#a++,this.#P(d,l,c),c&&(c.set="add"),u=!1;else{this.#A(d);let p=this.#e[d];if(r!==p){if(this.#I&&this.#o(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=p;f!==void 0&&!s&&(this.#S&&this.#d?.(f,e,"set"),this.#g&&this.#f?.push([f,e,"set"]))}else s||(this.#S&&this.#d?.(p,e,"set"),this.#g&&this.#f?.push([p,e,"set"]));if(this.#R(d),this.#P(d,l,c),this.#e[d]=r,c){c.set="replace";let f=p&&this.#o(p)?p.__staleWhileFetching:p;f!==void 0&&(c.oldValue=f)}}else c&&(c.set="update")}if(i!==0&&!this.#y&&this.#N(),this.#y&&(u||this.#L(d,i,o),c&&this.#C(c,d)),!s&&this.#g&&this.#f){let p=this.#f,f;for(;f=p?.shift();)this.#r?.(...f)}return this}pop(){try{for(;this.#a;){let e=this.#e[this.#l];if(this.#k(!0),this.#o(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#g&&this.#f){let e=this.#f,r;for(;r=e?.shift();)this.#r?.(...r)}}}#k(e){let r=this.#l,n=this.#n[r],i=this.#e[r];return this.#I&&this.#o(i)?i.__abortController.abort(new Error("evicted")):(this.#S||this.#g)&&(this.#S&&this.#d?.(i,n,"evict"),this.#g&&this.#f?.push([i,n,"evict"])),this.#R(r),e&&(this.#n[r]=void 0,this.#e[r]=void 0,this.#v.push(r)),this.#a===1?(this.#l=this.#u=0,this.#v.length=0):this.#l=this.#p[r],this.#s.delete(n),this.#a--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#e[o];if(this.#o(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#b(o))i&&(i.has="stale",this.#C(i,o));else return n&&this.#w(o),i&&(i.has="hit",this.#C(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#b(i))return;let o=this.#e[i];return this.#o(o)?o.__staleWhileFetching:o}#D(e,r,n,i){let o=r===void 0?void 0:this.#e[r];if(this.#o(o))return o;let s=new u5,{signal:a}=n;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let c={signal:s.signal,options:n,context:i},u=(h,g=!1)=>{let{aborted:v}=s.signal,y=n.ignoreFetchAbort&&h!==void 0;if(n.status&&(v&&!g?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,y&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),v&&!y&&!g)return d(s.signal.reason);let b=f;return this.#e[r]===f&&(h===void 0?b.__staleWhileFetching?this.#e[r]=b.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,h,c.options))),h},l=h=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=h),d(h)),d=h=>{let{aborted:g}=s.signal,v=g&&n.allowStaleOnFetchAbort,y=v||n.allowStaleOnFetchRejection,b=y||n.noDeleteOnFetchRejection,x=f;if(this.#e[r]===f&&(!b||x.__staleWhileFetching===void 0?this.delete(e):v||(this.#e[r]=x.__staleWhileFetching)),y)return n.status&&x.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),x.__staleWhileFetching;if(x.__returned===x)throw h},p=(h,g)=>{let v=this.#c?.(e,o,c);v&&v instanceof Promise&&v.then(y=>h(y===void 0?void 0:y),g),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(h(void 0),n.allowStaleOnFetchAbort&&(h=y=>u(y,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(p).then(u,l),m=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,m,{...c.options,status:void 0}),r=this.#s.get(e)):this.#e[r]=m,m}#o(e){if(!this.#I)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof u5}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:h,forceRefresh:g=!1,status:v,signal:y}=r;if(!this.#I)return v&&(v.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:v});let b={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:c,sizeCalculation:u,noUpdateTTL:l,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:m,ignoreFetchAbort:f,status:v,signal:y},x=this.#s.get(e);if(x===void 0){v&&(v.fetch="miss");let S=this.#D(e,x,b,h);return S.__returned=S}else{let S=this.#e[x];if(this.#o(S)){let N=n&&S.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",N&&(v.returnedStale=!0)),N?S.__staleWhileFetching:S.__returned=S}let T=this.#b(x);if(!g&&!T)return v&&(v.fetch="hit"),this.#A(x),i&&this.#w(x),v&&this.#C(v,x),S;let L=this.#D(e,x,b,h),j=L.__staleWhileFetching!==void 0&&n;return v&&(v.fetch=T?"stale":"refresh",j&&T&&(v.returnedStale=!0)),j?L.__staleWhileFetching:L.__returned=L}}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,a=this.#s.get(e);if(a!==void 0){let c=this.#e[a],u=this.#o(c);return s&&this.#C(s,a),this.#b(a)?(s&&(s.get="stale"),u?(s&&n&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?c.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?c:void 0)):(s&&(s.get="hit"),u?c.__staleWhileFetching:(this.#A(a),i&&this.#w(a),c))}else s&&(s.get="miss")}#F(e,r){this.#h[r]=e,this.#p[e]=r}#A(e){e!==this.#u&&(e===this.#l?this.#l=this.#p[e]:this.#F(this.#h[e],this.#p[e]),this.#F(this.#u,e),this.#u=e)}delete(e){let r=!1;if(this.#a!==0){let n=this.#s.get(e);if(n!==void 0)if(r=!0,this.#a===1)this.clear();else{this.#R(n);let i=this.#e[n];if(this.#o(i)?i.__abortController.abort(new Error("deleted")):(this.#S||this.#g)&&(this.#S&&this.#d?.(i,e,"delete"),this.#g&&this.#f?.push([i,e,"delete"])),this.#s.delete(e),this.#n[n]=void 0,this.#e[n]=void 0,n===this.#u)this.#u=this.#h[n];else if(n===this.#l)this.#l=this.#p[n];else{let o=this.#h[n];this.#p[o]=this.#p[n];let s=this.#p[n];this.#h[s]=this.#h[n]}this.#a--,this.#v.push(n)}}if(this.#g&&this.#f?.length){let n=this.#f,i;for(;i=n?.shift();)this.#r?.(...i)}return r}clear(){for(let e of this.#T({allowStale:!0})){let r=this.#e[e];if(this.#o(r))r.__abortController.abort(new Error("deleted"));else{let n=this.#n[e];this.#S&&this.#d?.(r,n,"delete"),this.#g&&this.#f?.push([r,n,"delete"])}}if(this.#s.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#y&&this.#x&&(this.#y.fill(0),this.#x.fill(0)),this.#_&&this.#_.fill(0),this.#l=0,this.#u=0,this.#v.length=0,this.#m=0,this.#a=0,this.#g&&this.#f){let e=this.#f,r;for(;r=e?.shift();)this.#r?.(...r)}}};var CY={};an(CY,{arrayReplaceAt:()=>TY,assign:()=>IS,escapeHtml:()=>zf,escapeRE:()=>BQe,fromCodePoint:()=>TR,has:()=>RQe,isMdAsciiPunct:()=>Jy,isPunctChar:()=>Xy,isSpace:()=>ir,isString:()=>x5,isValidEntityCode:()=>S5,isWhiteSpace:()=>Qy,lib:()=>qQe,normalizeReference:()=>Zy,unescapeAll:()=>qg,unescapeMd:()=>NQe});var h5={};an(h5,{decode:()=>SR,encode:()=>f5,format:()=>TS,parse:()=>ER});var VEe={};function nQe(t){let e=VEe[t];if(e)return e;e=VEe[t]=[];for(let r=0;r<128;r++){let n=String.fromCharCode(r);e.push(n)}for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);e[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return e}function d5(t,e){typeof e!="string"&&(e=d5.defaultChars);let r=nQe(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(n){let i="";for(let o=0,s=n.length;o<s;o+=3){let a=parseInt(n.slice(o+1,o+3),16);if(a<128){i+=r[a];continue}if((a&224)===192&&o+3<s){let c=parseInt(n.slice(o+4,o+6),16);if((c&192)===128){let u=a<<6&1984|c&63;u<128?i+="\uFFFD\uFFFD":i+=String.fromCharCode(u),o+=3;continue}}if((a&240)===224&&o+6<s){let c=parseInt(n.slice(o+4,o+6),16),u=parseInt(n.slice(o+7,o+9),16);if((c&192)===128&&(u&192)===128){let l=a<<12&61440|c<<6&4032|u&63;l<2048||l>=55296&&l<=57343?i+="\uFFFD\uFFFD\uFFFD":i+=String.fromCharCode(l),o+=6;continue}}if((a&248)===240&&o+9<s){let c=parseInt(n.slice(o+4,o+6),16),u=parseInt(n.slice(o+7,o+9),16),l=parseInt(n.slice(o+10,o+12),16);if((c&192)===128&&(u&192)===128&&(l&192)===128){let d=a<<18&1835008|c<<12&258048|u<<6&4032|l&63;d<65536||d>1114111?i+="\uFFFD\uFFFD\uFFFD\uFFFD":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),o+=9;continue}}i+="\uFFFD"}return i})}d5.defaultChars=";/?:@&=+$,#";d5.componentChars="";var SR=d5;var $Ee={};function iQe(t){let e=$Ee[t];if(e)return e;e=$Ee[t]=[];for(let r=0;r<128;r++){let n=String.fromCharCode(r);/^[0-9a-z]$/i.test(n)?e.push(n):e.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<t.length;r++)e[t.charCodeAt(r)]=t[r];return e}function p5(t,e,r){typeof e!="string"&&(r=e,e=p5.defaultChars),typeof r>"u"&&(r=!0);let n=iQe(e),i="";for(let o=0,s=t.length;o<s;o++){let a=t.charCodeAt(o);if(r&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3))){i+=t.slice(o,o+3),o+=2;continue}if(a<128){i+=n[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){let c=t.charCodeAt(o+1);if(c>=56320&&c<=57343){i+=encodeURIComponent(t[o]+t[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[o])}return i}p5.defaultChars=";/?:@&=+$,-_.!~*'()#";p5.componentChars="-_.!~*'()";var f5=p5;function TS(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function m5(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var oQe=/^([a-z0-9.+-]+:)/i,sQe=/:[0-9]*$/,aQe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,cQe=["<",">",'"',"`"," ","\r",`
`,"	"],uQe=["{","}","|","\\","^","`"].concat(cQe),lQe=["'"].concat(uQe),WEe=["%","/","?",";","#"].concat(lQe),KEe=["/","?","#"],dQe=255,YEe=/^[+a-z0-9A-Z_-]{0,63}$/,pQe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,QEe={javascript:!0,"javascript:":!0},XEe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function fQe(t,e){if(t&&t instanceof m5)return t;let r=new m5;return r.parse(t,e),r}m5.prototype.parse=function(t,e){let r,n,i,o=t;if(o=o.trim(),!e&&t.split("#").length===1){let u=aQe.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=oQe.exec(o);if(s&&(s=s[0],r=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&QEe[s])&&(o=o.substr(2),this.slashes=!0)),!QEe[s]&&(i||s&&!XEe[s])){let u=-1;for(let m=0;m<KEe.length;m++)n=o.indexOf(KEe[m]),n!==-1&&(u===-1||n<u)&&(u=n);let l,d;u===-1?d=o.lastIndexOf("@"):d=o.lastIndexOf("@",u),d!==-1&&(l=o.slice(0,d),o=o.slice(d+1),this.auth=l),u=-1;for(let m=0;m<WEe.length;m++)n=o.indexOf(WEe[m]),n!==-1&&(u===-1||n<u)&&(u=n);u===-1&&(u=o.length),o[u-1]===":"&&u--;let p=o.slice(0,u);o=o.slice(u),this.parseHost(p),this.hostname=this.hostname||"";let f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){let m=this.hostname.split(/\./);for(let h=0,g=m.length;h<g;h++){let v=m[h];if(v&&!v.match(YEe)){let y="";for(let b=0,x=v.length;b<x;b++)v.charCodeAt(b)>127?y+="x":y+=v[b];if(!y.match(YEe)){let b=m.slice(0,h),x=m.slice(h+1),S=v.match(pQe);S&&(b.push(S[1]),x.unshift(S[2])),x.length&&(o=x.join(".")+o),this.hostname=b.join(".");break}}}}this.hostname.length>dQe&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}let a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));let c=o.indexOf("?");return c!==-1&&(this.search=o.substr(c),o=o.slice(0,c)),o&&(this.pathname=o),XEe[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};m5.prototype.parseHost=function(t){let e=sQe.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var ER=fQe;var vY={};an(vY,{Any:()=>g5,Cc:()=>v5,Cf:()=>JEe,P:()=>CS,Z:()=>y5});var g5=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;var v5=/[\0-\x1F\x7F-\x9F]/;var JEe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/;var CS=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/;var y5=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;var ZEe=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(t=>t.charCodeAt(0)));var eTe=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(t=>t.charCodeAt(0)));var yY,mQe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),bY=(yY=String.fromCodePoint)!==null&&yY!==void 0?yY:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function _Y(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=mQe.get(t))!==null&&e!==void 0?e:t}var Oo;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Oo||(Oo={}));var hQe=32,Ug;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Ug||(Ug={}));function xY(t){return t>=Oo.ZERO&&t<=Oo.NINE}function gQe(t){return t>=Oo.UPPER_A&&t<=Oo.UPPER_F||t>=Oo.LOWER_A&&t<=Oo.LOWER_F}function vQe(t){return t>=Oo.UPPER_A&&t<=Oo.UPPER_Z||t>=Oo.LOWER_A&&t<=Oo.LOWER_Z||xY(t)}function yQe(t){return t===Oo.EQUALS||vQe(t)}var Lo;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Lo||(Lo={}));var Wd;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Wd||(Wd={}));var b5=class{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=Lo.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Wd.Strict}startEntity(e){this.decodeMode=e,this.state=Lo.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case Lo.EntityStart:return e.charCodeAt(r)===Oo.NUM?(this.state=Lo.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=Lo.NamedEntity,this.stateNamedEntity(e,r));case Lo.NumericStart:return this.stateNumericStart(e,r);case Lo.NumericDecimal:return this.stateNumericDecimal(e,r);case Lo.NumericHex:return this.stateNumericHex(e,r);case Lo.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|hQe)===Oo.LOWER_X?(this.state=Lo.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=Lo.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,i){if(r!==n){let o=n-r;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(r,o),i),this.consumed+=o}}stateNumericHex(e,r){let n=r;for(;r<e.length;){let i=e.charCodeAt(r);if(xY(i)||gQe(i))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){let n=r;for(;r<e.length;){let i=e.charCodeAt(r);if(xY(i))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Oo.SEMI)this.consumed+=1;else if(this.decodeMode===Wd.Strict)return 0;return this.emitCodePoint(_Y(this.result),this.consumed),this.errors&&(e!==Oo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){let{decodeTree:n}=this,i=n[this.treeIndex],o=(i&Ug.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){let s=e.charCodeAt(r);if(this.treeIndex=bQe(n,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===Wd.Attribute&&(o===0||yQe(s))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],o=(i&Ug.VALUE_LENGTH)>>14,o!==0){if(s===Oo.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Wd.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;let{result:r,decodeTree:n}=this,i=(n[r]&Ug.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){let{decodeTree:i}=this;return this.emitCodePoint(r===1?i[e]&~Ug.VALUE_LENGTH:i[e+1],n),r===3&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case Lo.NamedEntity:return this.result!==0&&(this.decodeMode!==Wd.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Lo.NumericDecimal:return this.emitNumericEntity(0,2);case Lo.NumericHex:return this.emitNumericEntity(0,3);case Lo.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Lo.EntityStart:return 0}}};function tTe(t){let e="",r=new b5(t,n=>e+=bY(n));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),r.startEntity(o);let u=r.write(i,a+1);if(u<0){s=a+r.end();break}s=a+u,a=u===0?s+1:s}let c=e+i.slice(s);return e="",c}}function bQe(t,e,r,n){let i=(e&Ug.BRANCH_LENGTH)>>7,o=e&Ug.JUMP_TABLE;if(i===0)return o!==0&&n===o?r:-1;if(o){let c=n-o;return c<0||c>=i?-1:t[r+c]-1}let s=r,a=s+i-1;for(;s<=a;){let c=s+a>>>1,u=t[c];if(u<n)s=c+1;else if(u>n)a=c-1;else return t[c+i]}return-1}var _Qe=tTe(ZEe),wGt=tTe(eTe);function Bg(t,e=Wd.Legacy){return _Qe(t,e)}function _5(t){for(let e=1;e<t.length;e++)t[e][0]+=t[e-1][0]+1;return t}var xQe=new Map(_5([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(_5([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(_5([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(_5([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var SQe=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),EQe=String.prototype.codePointAt!=null?(t,e)=>t.codePointAt(e):(t,e)=>(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e);function SY(t,e){return function(n){let i,o=0,s="";for(;i=t.exec(n);)o!==i.index&&(s+=n.substring(o,i.index)),s+=e.get(i[0].charCodeAt(0)),o=i.index+1;return s+n.substring(o)}}var rTe=SY(/[&<>'"]/g,SQe),nTe=SY(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),iTe=SY(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var oTe;(function(t){t[t.XML=0]="XML",t[t.HTML=1]="HTML"})(oTe||(oTe={}));var sTe;(function(t){t[t.UTF8=0]="UTF8",t[t.ASCII=1]="ASCII",t[t.Extensive=2]="Extensive",t[t.Attribute=3]="Attribute",t[t.Text=4]="Text"})(sTe||(sTe={}));function IQe(t){return Object.prototype.toString.call(t)}function x5(t){return IQe(t)==="[object String]"}var wQe=Object.prototype.hasOwnProperty;function RQe(t,e){return wQe.call(t,e)}function IS(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function TY(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function S5(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function TR(t){if(t>65535){t-=65536;let e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var uTe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,AQe=/&([a-z#][a-z0-9]{1,31});/gi,PQe=new RegExp(uTe.source+"|"+AQe.source,"gi"),kQe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function DQe(t,e){if(e.charCodeAt(0)===35&&kQe.test(e)){let n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return S5(n)?TR(n):t}let r=Bg(t);return r!==t?r:t}function NQe(t){return t.indexOf("\\")<0?t:t.replace(uTe,"$1")}function qg(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(PQe,function(e,r,n){return r||DQe(e,n)})}var LQe=/[&<>"]/,OQe=/[&<>"]/g,MQe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function FQe(t){return MQe[t]}function zf(t){return LQe.test(t)?t.replace(OQe,FQe):t}var UQe=/[.?*+^$[\]\\(){}|-]/g;function BQe(t){return t.replace(UQe,"\\$&")}function ir(t){switch(t){case 9:case 32:return!0}return!1}function Qy(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Xy(t){return CS.test(t)}function Jy(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Zy(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(/ẞ/g,"\xDF")),t.toLowerCase().toUpperCase()}var qQe={mdurl:h5,ucmicro:vY};var AY={};an(AY,{parseLinkDestination:()=>wY,parseLinkLabel:()=>IY,parseLinkTitle:()=>RY});function IY(t,e,r){let n,i,o,s,a=t.posMax,c=t.pos;for(t.pos=e+1,n=1;t.pos<a;){if(o=t.src.charCodeAt(t.pos),o===93&&(n--,n===0)){i=!0;break}if(s=t.pos,t.md.inline.skipToken(t),o===91){if(s===t.pos-1)n++;else if(r)return t.pos=c,-1}}let u=-1;return i&&(u=t.pos),t.pos=c,u}function wY(t,e,r){let n,i=e,o={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<r;){if(n=t.charCodeAt(i),n===10||n===60)return o;if(n===62)return o.pos=i+1,o.str=qg(t.slice(e+1,i)),o.ok=!0,o;if(n===92&&i+1<r){i+=2;continue}i++}return o}let s=0;for(;i<r&&(n=t.charCodeAt(i),!(n===32||n<32||n===127));){if(n===92&&i+1<r){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(n===40&&(s++,s>32))return o;if(n===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=qg(t.slice(e,i)),o.pos=i,o.ok=!0),o}function RY(t,e,r){let n,i,o=0,s=e,a={ok:!1,pos:0,lines:0,str:""};if(s>=r||(i=t.charCodeAt(s),i!==34&&i!==39&&i!==40))return a;for(s++,i===40&&(i=41);s<r;){if(n=t.charCodeAt(s),n===i)return a.pos=s+1,a.lines=o,a.str=qg(t.slice(e+1,s)),a.ok=!0,a;if(n===40&&i===41)return a;n===10?o++:n===92&&s+1<r&&(s++,t.charCodeAt(s)===10&&o++),s++}return a}var Kd={};Kd.code_inline=function(t,e,r,n,i){let o=t[e];return"<code"+i.renderAttrs(o)+">"+zf(o.content)+"</code>"};Kd.code_block=function(t,e,r,n,i){let o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+zf(t[e].content)+`</code></pre>
`};Kd.fence=function(t,e,r,n,i){let o=t[e],s=o.info?qg(o.info).trim():"",a="",c="";if(s){let l=s.split(/(\s+)/g);a=l[0],c=l.slice(2).join("")}let u;if(r.highlight?u=r.highlight(o.content,a,c)||zf(o.content):u=zf(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){let l=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[];l<0?d.push(["class",r.langPrefix+a]):(d[l]=d[l].slice(),d[l][1]+=" "+r.langPrefix+a);let p={attrs:d};return`<pre><code${i.renderAttrs(p)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${u}</code></pre>
`};Kd.image=function(t,e,r,n,i){let o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};Kd.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};Kd.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Kd.text=function(t,e){return zf(t[e].content)};Kd.html_block=function(t,e){return t[e].content};Kd.html_inline=function(t,e){return t[e].content};function wS(){this.rules=IS({},Kd)}wS.prototype.renderAttrs=function(e){let r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+zf(e.attrs[r][0])+'="'+zf(e.attrs[r][1])+'"';return i};wS.prototype.renderToken=function(e,r,n){let i=e[r],o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&n.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&r+1<e.length)){let a=e[r+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};wS.prototype.renderInline=function(t,e,r){let n="",i=this.rules;for(let o=0,s=t.length;o<s;o++){let a=t[o].type;typeof i[a]<"u"?n+=i[a](t,o,e,r,this):n+=this.renderToken(t,o,e)}return n};wS.prototype.renderInlineAsText=function(t,e,r){let n="";for(let i=0,o=t.length;i<o;i++)switch(t[i].type){case"text":n+=t[i].content;break;case"image":n+=this.renderInlineAsText(t[i].children,e,r);break;case"html_inline":case"html_block":n+=t[i].content;break;case"softbreak":case"hardbreak":n+=`
`;break;default:}return n};wS.prototype.render=function(t,e,r){let n="",i=this.rules;for(let o=0,s=t.length;o<s;o++){let a=t[o].type;a==="inline"?n+=this.renderInline(t[o].children,e,r):typeof i[a]<"u"?n+=i[a](t,o,e,r,this):n+=this.renderToken(t,o,e,r)}return n};var lTe=wS;function vl(){this.__rules__=[],this.__cache__=null}vl.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};vl.prototype.__compile__=function(){let t=this,e=[""];t.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){n.enabled&&(r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn))})})};vl.prototype.at=function(t,e,r){let n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};vl.prototype.before=function(t,e,r,n){let i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};vl.prototype.after=function(t,e,r,n){let i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};vl.prototype.push=function(t,e,r){let n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};vl.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);let r=[];return t.forEach(function(n){let i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};vl.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};vl.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);let r=[];return t.forEach(function(n){let i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};vl.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};var eb=vl;function RS(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}RS.prototype.attrIndex=function(e){if(!this.attrs)return-1;let r=this.attrs;for(let n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};RS.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};RS.prototype.attrSet=function(e,r){let n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};RS.prototype.attrGet=function(e){let r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};RS.prototype.attrJoin=function(e,r){let n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};var Vf=RS;function dTe(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}dTe.prototype.Token=Vf;var pTe=dTe;var HQe=/\r\n?|\n/g,GQe=/\0/g;function PY(t){let e;e=t.src.replace(HQe,`
`),e=e.replace(GQe,"\uFFFD"),t.src=e}function kY(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function DY(t){let e=t.tokens;for(let r=0,n=e.length;r<n;r++){let i=e[r];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function jQe(t){return/^<a[>\s]/i.test(t)}function zQe(t){return/^<\/a\s*>/i.test(t)}function NY(t){let e=t.tokens;if(t.md.options.linkify)for(let r=0,n=e.length;r<n;r++){if(e[r].type!=="inline"||!t.md.linkify.pretest(e[r].content))continue;let i=e[r].children,o=0;for(let s=i.length-1;s>=0;s--){let a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(jQe(a.content)&&o>0&&o--,zQe(a.content)&&o++),!(o>0)&&a.type==="text"&&t.md.linkify.test(a.content)){let c=a.content,u=t.md.linkify.match(c),l=[],d=a.level,p=0;u.length>0&&u[0].index===0&&s>0&&i[s-1].type==="text_special"&&(u=u.slice(1));for(let f=0;f<u.length;f++){let m=u[f].url,h=t.md.normalizeLink(m);if(!t.md.validateLink(h))continue;let g=u[f].text;u[f].schema?u[f].schema==="mailto:"&&!/^mailto:/i.test(g)?g=t.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=t.md.normalizeLinkText(g):g=t.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");let v=u[f].index;if(v>p){let S=new t.Token("text","",0);S.content=c.slice(p,v),S.level=d,l.push(S)}let y=new t.Token("link_open","a",1);y.attrs=[["href",h]],y.level=d++,y.markup="linkify",y.info="auto",l.push(y);let b=new t.Token("text","",0);b.content=g,b.level=d,l.push(b);let x=new t.Token("link_close","a",-1);x.level=--d,x.markup="linkify",x.info="auto",l.push(x),p=u[f].lastIndex}if(p<c.length){let f=new t.Token("text","",0);f.content=c.slice(p),f.level=d,l.push(f)}e[r].children=i=TY(i,s,l)}}}}var fTe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,VQe=/\((c|tm|r)\)/i,$Qe=/\((c|tm|r)\)/ig,WQe={c:"\xA9",r:"\xAE",tm:"\u2122"};function KQe(t,e){return WQe[e.toLowerCase()]}function YQe(t){let e=0;for(let r=t.length-1;r>=0;r--){let n=t[r];n.type==="text"&&!e&&(n.content=n.content.replace($Qe,KQe)),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function QQe(t){let e=0;for(let r=t.length-1;r>=0;r--){let n=t[r];n.type==="text"&&!e&&fTe.test(n.content)&&(n.content=n.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function LY(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(VQe.test(t.tokens[e].content)&&YQe(t.tokens[e].children),fTe.test(t.tokens[e].content)&&QQe(t.tokens[e].children))}var XQe=/['"]/,mTe=/['"]/g,hTe="\u2019";function E5(t,e,r){return t.slice(0,e)+r+t.slice(e+1)}function JQe(t,e){let r,n=[];for(let i=0;i<t.length;i++){let o=t[i],s=t[i].level;for(r=n.length-1;r>=0&&!(n[r].level<=s);r--);if(n.length=r+1,o.type!=="text")continue;let a=o.content,c=0,u=a.length;e:for(;c<u;){mTe.lastIndex=c;let l=mTe.exec(a);if(!l)break;let d=!0,p=!0;c=l.index+1;let f=l[0]==="'",m=32;if(l.index-1>=0)m=a.charCodeAt(l.index-1);else for(r=i-1;r>=0&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r--)if(t[r].content){m=t[r].content.charCodeAt(t[r].content.length-1);break}let h=32;if(c<u)h=a.charCodeAt(c);else for(r=i+1;r<t.length&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r++)if(t[r].content){h=t[r].content.charCodeAt(0);break}let g=Jy(m)||Xy(String.fromCharCode(m)),v=Jy(h)||Xy(String.fromCharCode(h)),y=Qy(m),b=Qy(h);if(b?d=!1:v&&(y||g||(d=!1)),y?p=!1:g&&(b||v||(p=!1)),h===34&&l[0]==='"'&&m>=48&&m<=57&&(p=d=!1),d&&p&&(d=g,p=v),!d&&!p){f&&(o.content=E5(o.content,l.index,hTe));continue}if(p)for(r=n.length-1;r>=0;r--){let x=n[r];if(n[r].level<s)break;if(x.single===f&&n[r].level===s){x=n[r];let S,T;f?(S=e.md.options.quotes[2],T=e.md.options.quotes[3]):(S=e.md.options.quotes[0],T=e.md.options.quotes[1]),o.content=E5(o.content,l.index,T),t[x.token].content=E5(t[x.token].content,x.pos,S),c+=T.length-1,x.token===i&&(c+=S.length-1),a=o.content,u=a.length,n.length=r;continue e}}d?n.push({token:i,pos:l.index,single:f,level:s}):p&&f&&(o.content=E5(o.content,l.index,hTe))}}}function OY(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!XQe.test(t.tokens[e].content)||JQe(t.tokens[e].children,t)}function MY(t){let e,r,n=t.tokens,i=n.length;for(let o=0;o<i;o++){if(n[o].type!=="inline")continue;let s=n[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=r=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==r&&(s[r]=s[e]),r++);e!==r&&(s.length=r)}}var FY=[["normalize",PY],["block",kY],["inline",DY],["linkify",NY],["replacements",LY],["smartquotes",OY],["text_join",MY]];function UY(){this.ruler=new eb;for(let t=0;t<FY.length;t++)this.ruler.push(FY[t][0],FY[t][1])}UY.prototype.process=function(t){let e=this.ruler.getRules("");for(let r=0,n=e.length;r<n;r++)e[r](t)};UY.prototype.State=pTe;var gTe=UY;function Yd(t,e,r,n){this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;let i=this.src;for(let o=0,s=0,a=0,c=0,u=i.length,l=!1;s<u;s++){let d=i.charCodeAt(s);if(!l)if(ir(d)){a++,d===9?c+=4-c%4:c++;continue}else l=!0;(d===10||s===u-1)&&(d!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(c),this.bsCount.push(0),l=!1,a=0,c=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Yd.prototype.push=function(t,e,r){let n=new Vf(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};Yd.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Yd.prototype.skipEmptyLines=function(e){for(let r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Yd.prototype.skipSpaces=function(e){for(let r=this.src.length;e<r;e++){let n=this.src.charCodeAt(e);if(!ir(n))break}return e};Yd.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!ir(this.src.charCodeAt(--e)))return e+1;return e};Yd.prototype.skipChars=function(e,r){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};Yd.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};Yd.prototype.getLines=function(e,r,n,i){if(e>=r)return"";let o=new Array(r-e);for(let s=0,a=e;a<r;a++,s++){let c=0,u=this.bMarks[a],l=u,d;for(a+1<r||i?d=this.eMarks[a]+1:d=this.eMarks[a];l<d&&c<n;){let p=this.src.charCodeAt(l);if(ir(p))p===9?c+=4-(c+this.bsCount[a])%4:c++;else if(l-u<this.tShift[a])c++;else break;l++}c>n?o[s]=new Array(c-n+1).join(" ")+this.src.slice(l,d):o[s]=this.src.slice(l,d)}return o.join("")};Yd.prototype.Token=Vf;var vTe=Yd;function BY(t,e){let r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.slice(r,n)}function yTe(t){let e=[],r=t.length,n=0,i=t.charCodeAt(n),o=!1,s=0,a="";for(;n<r;)i===124&&(o?(a+=t.substring(s,n-1),s=n):(e.push(a+t.substring(s,n)),a="",s=n+1)),o=i===92,n++,i=t.charCodeAt(n);return e.push(a+t.substring(s)),e}function qY(t,e,r,n){if(e+2>r)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let o=t.bMarks[i]+t.tShift[i];if(o>=t.eMarks[i])return!1;let s=t.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=t.eMarks[i])return!1;let a=t.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!ir(a)||s===45&&ir(a))return!1;for(;o<t.eMarks[i];){let b=t.src.charCodeAt(o);if(b!==124&&b!==45&&b!==58&&!ir(b))return!1;o++}let c=BY(t,e+1),u=c.split("|"),l=[];for(let b=0;b<u.length;b++){let x=u[b].trim();if(!x){if(b===0||b===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(x))return!1;x.charCodeAt(x.length-1)===58?l.push(x.charCodeAt(0)===58?"center":"right"):x.charCodeAt(0)===58?l.push("left"):l.push("")}if(c=BY(t,e).trim(),c.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=yTe(c),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();let d=u.length;if(d===0||d!==l.length)return!1;if(n)return!0;let p=t.parentType;t.parentType="table";let f=t.md.block.ruler.getRules("blockquote"),m=t.push("table_open","table",1),h=[e,0];m.map=h;let g=t.push("thead_open","thead",1);g.map=[e,e+1];let v=t.push("tr_open","tr",1);v.map=[e,e+1];for(let b=0;b<u.length;b++){let x=t.push("th_open","th",1);l[b]&&(x.attrs=[["style","text-align:"+l[b]]]);let S=t.push("inline","",0);S.content=u[b].trim(),S.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let y;for(i=e+2;i<r&&!(t.sCount[i]<t.blkIndent);i++){let b=!1;for(let S=0,T=f.length;S<T;S++)if(f[S](t,i,r,!0)){b=!0;break}if(b||(c=BY(t,i).trim(),!c)||t.sCount[i]-t.blkIndent>=4)break;if(u=yTe(c),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),i===e+2){let S=t.push("tbody_open","tbody",1);S.map=y=[e+2,0]}let x=t.push("tr_open","tr",1);x.map=[i,i+1];for(let S=0;S<d;S++){let T=t.push("td_open","td",1);l[S]&&(T.attrs=[["style","text-align:"+l[S]]]);let L=t.push("inline","",0);L.content=u[S]?u[S].trim():"",L.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return y&&(t.push("tbody_close","tbody",-1),y[1]=i),t.push("table_close","table",-1),h[1]=i,t.parentType=p,t.line=i,!0}function HY(t,e,r){if(t.sCount[e]-t.blkIndent<4)return!1;let n=e+1,i=n;for(;n<r;){if(t.isEmpty(n)){n++;continue}if(t.sCount[n]-t.blkIndent>=4){n++,i=n;continue}break}t.line=i;let o=t.push("code_block","code",0);return o.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,o.map=[e,t.line],!0}function GY(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>o)return!1;let s=t.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=t.skipChars(i,s);let c=i-a;if(c<3)return!1;let u=t.src.slice(a,i),l=t.src.slice(i,o);if(s===96&&l.indexOf(String.fromCharCode(s))>=0)return!1;if(n)return!0;let d=e,p=!1;for(;d++,!(d>=r||(i=a=t.bMarks[d]+t.tShift[d],o=t.eMarks[d],i<o&&t.sCount[d]<t.blkIndent));)if(t.src.charCodeAt(i)===s&&!(t.sCount[d]-t.blkIndent>=4)&&(i=t.skipChars(i,s),!(i-a<c)&&(i=t.skipSpaces(i),!(i<o)))){p=!0;break}c=t.sCount[e],t.line=d+(p?1:0);let f=t.push("fence","code",0);return f.info=l,f.content=t.getLines(e+1,d,c,!0),f.markup=u,f.map=[e,t.line],!0}function jY(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],s=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(n)return!0;let a=[],c=[],u=[],l=[],d=t.md.block.ruler.getRules("blockquote"),p=t.parentType;t.parentType="blockquote";let f=!1,m;for(m=e;m<r;m++){let b=t.sCount[m]<t.blkIndent;if(i=t.bMarks[m]+t.tShift[m],o=t.eMarks[m],i>=o)break;if(t.src.charCodeAt(i++)===62&&!b){let S=t.sCount[m]+1,T,L;t.src.charCodeAt(i)===32?(i++,S++,L=!1,T=!0):t.src.charCodeAt(i)===9?(T=!0,(t.bsCount[m]+S)%4===3?(i++,S++,L=!1):L=!0):T=!1;let M=S;for(a.push(t.bMarks[m]),t.bMarks[m]=i;i<o;){let j=t.src.charCodeAt(i);if(ir(j))j===9?M+=4-(M+t.bsCount[m]+(L?1:0))%4:M++;else break;i++}f=i>=o,c.push(t.bsCount[m]),t.bsCount[m]=t.sCount[m]+1+(T?1:0),u.push(t.sCount[m]),t.sCount[m]=M-S,l.push(t.tShift[m]),t.tShift[m]=i-t.bMarks[m];continue}if(f)break;let x=!1;for(let S=0,T=d.length;S<T;S++)if(d[S](t,m,r,!0)){x=!0;break}if(x){t.lineMax=m,t.blkIndent!==0&&(a.push(t.bMarks[m]),c.push(t.bsCount[m]),l.push(t.tShift[m]),u.push(t.sCount[m]),t.sCount[m]-=t.blkIndent);break}a.push(t.bMarks[m]),c.push(t.bsCount[m]),l.push(t.tShift[m]),u.push(t.sCount[m]),t.sCount[m]=-1}let h=t.blkIndent;t.blkIndent=0;let g=t.push("blockquote_open","blockquote",1);g.markup=">";let v=[e,0];g.map=v,t.md.block.tokenize(t,e,m);let y=t.push("blockquote_close","blockquote",-1);y.markup=">",t.lineMax=s,t.parentType=p,v[1]=t.line;for(let b=0;b<l.length;b++)t.bMarks[b+e]=a[b],t.tShift[b+e]=l[b],t.sCount[b+e]=u[b],t.bsCount[b+e]=c[b];return t.blkIndent=h,!0}function zY(t,e,r,n){let i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.bMarks[e]+t.tShift[e],s=t.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){let u=t.src.charCodeAt(o++);if(u!==s&&!ir(u))return!1;u===s&&a++}if(a<3)return!1;if(n)return!0;t.line=e+1;let c=t.push("hr","hr",0);return c.map=[e,t.line],c.markup=Array(a+1).join(String.fromCharCode(s)),!0}function bTe(t,e){let r=t.eMarks[e],n=t.bMarks[e]+t.tShift[e],i=t.src.charCodeAt(n++);if(i!==42&&i!==45&&i!==43)return-1;if(n<r){let o=t.src.charCodeAt(n);if(!ir(o))return-1}return n}function _Te(t,e){let r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e],i=r;if(i+1>=n)return-1;let o=t.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=n)return-1;if(o=t.src.charCodeAt(i++),o>=48&&o<=57){if(i-r>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<n&&(o=t.src.charCodeAt(i),!ir(o))?-1:i}function ZQe(t,e){let r=t.level+2;for(let n=e+2,i=t.tokens.length-2;n<i;n++)t.tokens[n].level===r&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}function VY(t,e,r,n){let i,o,s,a,c=e,u=!0;if(t.sCount[c]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[c]-t.listIndent>=4&&t.sCount[c]<t.blkIndent)return!1;let l=!1;n&&t.parentType==="paragraph"&&t.sCount[c]>=t.blkIndent&&(l=!0);let d,p,f;if((f=_Te(t,c))>=0){if(d=!0,s=t.bMarks[c]+t.tShift[c],p=Number(t.src.slice(s,f-1)),l&&p!==1)return!1}else if((f=bTe(t,c))>=0)d=!1;else return!1;if(l&&t.skipSpaces(f)>=t.eMarks[c])return!1;if(n)return!0;let m=t.src.charCodeAt(f-1),h=t.tokens.length;d?(a=t.push("ordered_list_open","ol",1),p!==1&&(a.attrs=[["start",p]])):a=t.push("bullet_list_open","ul",1);let g=[c,0];a.map=g,a.markup=String.fromCharCode(m);let v=!1,y=t.md.block.ruler.getRules("list"),b=t.parentType;for(t.parentType="list";c<r;){o=f,i=t.eMarks[c];let x=t.sCount[c]+f-(t.bMarks[c]+t.tShift[c]),S=x;for(;o<i;){let A=t.src.charCodeAt(o);if(A===9)S+=4-(S+t.bsCount[c])%4;else if(A===32)S++;else break;o++}let T=o,L;T>=i?L=1:L=S-x,L>4&&(L=1);let M=x+L;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(m);let j=[c,0];a.map=j,d&&(a.info=t.src.slice(s,f-1));let N=t.tight,J=t.tShift[c],X=t.sCount[c],D=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=M,t.tight=!0,t.tShift[c]=T-t.bMarks[c],t.sCount[c]=S,T>=i&&t.isEmpty(c+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,c,r,!0),(!t.tight||v)&&(u=!1),v=t.line-c>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=D,t.tShift[c]=J,t.sCount[c]=X,t.tight=N,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(m),c=t.line,j[1]=c,c>=r||t.sCount[c]<t.blkIndent||t.sCount[c]-t.blkIndent>=4)break;let E=!1;for(let A=0,F=y.length;A<F;A++)if(y[A](t,c,r,!0)){E=!0;break}if(E)break;if(d){if(f=_Te(t,c),f<0)break;s=t.bMarks[c]+t.tShift[c]}else if(f=bTe(t,c),f<0)break;if(m!==t.src.charCodeAt(f-1))break}return d?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(m),g[1]=c,t.line=c,t.parentType=b,u&&ZQe(t,h),!0}function $Y(t,e,r,n){let i=0,o=t.bMarks[e]+t.tShift[e],s=t.eMarks[e],a=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(o)!==91)return!1;for(;++o<s;)if(t.src.charCodeAt(o)===93&&t.src.charCodeAt(o-1)!==92){if(o+1===s||t.src.charCodeAt(o+1)!==58)return!1;break}let c=t.lineMax,u=t.md.block.ruler.getRules("reference"),l=t.parentType;for(t.parentType="reference";a<c&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3||t.sCount[a]<0)continue;let S=!1;for(let T=0,L=u.length;T<L;T++)if(u[T](t,a,c,!0)){S=!0;break}if(S)break}let d=t.getLines(e,a,t.blkIndent,!1).trim();s=d.length;let p=-1;for(o=1;o<s;o++){let S=d.charCodeAt(o);if(S===91)return!1;if(S===93){p=o;break}else S===10?i++:S===92&&(o++,o<s&&d.charCodeAt(o)===10&&i++)}if(p<0||d.charCodeAt(p+1)!==58)return!1;for(o=p+2;o<s;o++){let S=d.charCodeAt(o);if(S===10)i++;else if(!ir(S))break}let f=t.md.helpers.parseLinkDestination(d,o,s);if(!f.ok)return!1;let m=t.md.normalizeLink(f.str);if(!t.md.validateLink(m))return!1;o=f.pos,i+=f.lines;let h=o,g=i,v=o;for(;o<s;o++){let S=d.charCodeAt(o);if(S===10)i++;else if(!ir(S))break}let y=t.md.helpers.parseLinkTitle(d,o,s),b;for(o<s&&v!==o&&y.ok?(b=y.str,o=y.pos,i+=y.lines):(b="",o=h,i=g);o<s;){let S=d.charCodeAt(o);if(!ir(S))break;o++}if(o<s&&d.charCodeAt(o)!==10&&b)for(b="",o=h,i=g;o<s;){let S=d.charCodeAt(o);if(!ir(S))break;o++}if(o<s&&d.charCodeAt(o)!==10)return!1;let x=Zy(d.slice(1,p));return x?(n||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[x]>"u"&&(t.env.references[x]={title:b,href:m}),t.parentType=l,t.line=e+i+1),!0):!1}var xTe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"];var eXe="[a-zA-Z_:][a-zA-Z0-9:._-]*",tXe="[^\"'=<>`\\x00-\\x20]+",rXe="'[^']*'",nXe='"[^"]*"',iXe="(?:"+tXe+"|"+rXe+"|"+nXe+")",oXe="(?:\\s+"+eXe+"(?:\\s*=\\s*"+iXe+")?)",STe="<[A-Za-z][A-Za-z0-9\\-]*"+oXe+"*\\s*\\/?>",ETe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",sXe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",aXe="<[?][\\s\\S]*?[?]>",cXe="<![A-Z]+\\s+[^>]*>",uXe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",TTe=new RegExp("^(?:"+STe+"|"+ETe+"|"+sXe+"|"+aXe+"|"+cXe+"|"+uXe+")"),CTe=new RegExp("^(?:"+STe+"|"+ETe+")");var AS=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+xTe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(CTe.source+"\\s*$"),/^$/,!1]];function WY(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let s=t.src.slice(i,o),a=0;for(;a<AS.length&&!AS[a][0].test(s);a++);if(a===AS.length)return!1;if(n)return AS[a][2];let c=e+1;if(!AS[a][1].test(s)){for(;c<r&&!(t.sCount[c]<t.blkIndent);c++)if(i=t.bMarks[c]+t.tShift[c],o=t.eMarks[c],s=t.src.slice(i,o),AS[a][1].test(s)){s.length!==0&&c++;break}}t.line=c;let u=t.push("html_block","",0);return u.map=[e,c],u.content=t.getLines(e,c,t.blkIndent,!0),!0}function KY(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=t.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=t.src.charCodeAt(++i);if(a>6||i<o&&!ir(s))return!1;if(n)return!0;o=t.skipSpacesBack(o,i);let c=t.skipCharsBack(o,35,i);c>i&&ir(t.src.charCodeAt(c-1))&&(o=c),t.line=e+1;let u=t.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,t.line];let l=t.push("inline","",0);l.content=t.src.slice(i,o).trim(),l.map=[e,t.line],l.children=[];let d=t.push("heading_close","h"+String(a),-1);return d.markup="########".slice(0,a),!0}function YY(t,e,r){let n=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;let i=t.parentType;t.parentType="paragraph";let o=0,s,a=e+1;for(;a<r&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let f=t.bMarks[a]+t.tShift[a],m=t.eMarks[a];if(f<m&&(s=t.src.charCodeAt(f),(s===45||s===61)&&(f=t.skipChars(f,s),f=t.skipSpaces(f),f>=m))){o=s===61?1:2;break}}if(t.sCount[a]<0)continue;let p=!1;for(let f=0,m=n.length;f<m;f++)if(n[f](t,a,r,!0)){p=!0;break}if(p)break}if(!o)return!1;let c=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;let u=t.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[e,t.line];let l=t.push("inline","",0);l.content=c,l.map=[e,t.line-1],l.children=[];let d=t.push("heading_close","h"+String(o),-1);return d.markup=String.fromCharCode(s),t.parentType=i,!0}function QY(t,e,r){let n=t.md.block.ruler.getRules("paragraph"),i=t.parentType,o=e+1;for(t.parentType="paragraph";o<r&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3||t.sCount[o]<0)continue;let u=!1;for(let l=0,d=n.length;l<d;l++)if(n[l](t,o,r,!0)){u=!0;break}if(u)break}let s=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o;let a=t.push("paragraph_open","p",1);a.map=[e,t.line];let c=t.push("inline","",0);return c.content=s,c.map=[e,t.line],c.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}var T5=[["table",qY,["paragraph","reference"]],["code",HY],["fence",GY,["paragraph","reference","blockquote","list"]],["blockquote",jY,["paragraph","reference","blockquote","list"]],["hr",zY,["paragraph","reference","blockquote","list"]],["list",VY,["paragraph","reference","blockquote"]],["reference",$Y],["html_block",WY,["paragraph","reference","blockquote"]],["heading",KY,["paragraph","reference","blockquote"]],["lheading",YY],["paragraph",QY]];function C5(){this.ruler=new eb;for(let t=0;t<T5.length;t++)this.ruler.push(T5[t][0],T5[t][1],{alt:(T5[t][2]||[]).slice()})}C5.prototype.tokenize=function(t,e,r){let n=this.ruler.getRules(""),i=n.length,o=t.md.options.maxNesting,s=e,a=!1;for(;s<r&&(t.line=s=t.skipEmptyLines(s),!(s>=r||t.sCount[s]<t.blkIndent));){if(t.level>=o){t.line=r;break}let c=t.line,u=!1;for(let l=0;l<i;l++)if(u=n[l](t,s,r,!1),u){if(c>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),s=t.line,s<r&&t.isEmpty(s)&&(a=!0,s++,t.line=s)}};C5.prototype.parse=function(t,e,r,n){if(!t)return;let i=new this.State(t,e,r,n);this.tokenize(i,i.line,i.lineMax)};C5.prototype.State=vTe;var ITe=C5;function CR(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}CR.prototype.pushPending=function(){let t=new Vf("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};CR.prototype.push=function(t,e,r){this.pending&&this.pushPending();let n=new Vf(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};CR.prototype.scanDelims=function(t,e){let r,n,i=!0,o=!0,s=this.posMax,a=this.src.charCodeAt(t),c=t>0?this.src.charCodeAt(t-1):32,u=t;for(;u<s&&this.src.charCodeAt(u)===a;)u++;let l=u-t,d=u<s?this.src.charCodeAt(u):32,p=Jy(c)||Xy(String.fromCharCode(c)),f=Jy(d)||Xy(String.fromCharCode(d)),m=Qy(c),h=Qy(d);return h?i=!1:f&&(m||p||(i=!1)),m?o=!1:p&&(h||f||(o=!1)),e?(r=i,n=o):(r=i&&(!o||p),n=o&&(!i||f)),{can_open:r,can_close:n,length:l}};CR.prototype.Token=Vf;var wTe=CR;function lXe(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function XY(t,e){let r=t.pos;for(;r<t.posMax&&!lXe(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)}var dXe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function JY(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;let r=t.pos,n=t.posMax;if(r+3>n||t.src.charCodeAt(r)!==58||t.src.charCodeAt(r+1)!==47||t.src.charCodeAt(r+2)!==47)return!1;let i=t.pending.match(dXe);if(!i)return!1;let o=i[1],s=t.md.linkify.matchAtStart(t.src.slice(r-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");let c=t.md.normalizeLink(a);if(!t.md.validateLink(c))return!1;if(!e){t.pending=t.pending.slice(0,-o.length);let u=t.push("link_open","a",1);u.attrs=[["href",c]],u.markup="linkify",u.info="auto";let l=t.push("text","",0);l.content=t.md.normalizeLinkText(a);let d=t.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return t.pos+=a.length-o.length,!0}function ZY(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==10)return!1;let n=t.pending.length-1,i=t.posMax;if(!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){let o=n-1;for(;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(r++;r<i&&ir(t.src.charCodeAt(r));)r++;return t.pos=r,!0}var eQ=[];for(let t=0;t<256;t++)eQ.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){eQ[t.charCodeAt(0)]=1});function tQ(t,e){let r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==92||(r++,r>=n))return!1;let i=t.src.charCodeAt(r);if(i===10){for(e||t.push("hardbreak","br",0),r++;r<n&&(i=t.src.charCodeAt(r),!!ir(i));)r++;return t.pos=r,!0}let o=t.src[r];if(i>=55296&&i<=56319&&r+1<n){let a=t.src.charCodeAt(r+1);a>=56320&&a<=57343&&(o+=t.src[r+1],r++)}let s="\\"+o;if(!e){let a=t.push("text_special","",0);i<256&&eQ[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return t.pos=r+1,!0}function rQ(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==96)return!1;let i=r;r++;let o=t.posMax;for(;r<o&&t.src.charCodeAt(r)===96;)r++;let s=t.src.slice(i,r),a=s.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=s),t.pos+=a,!0;let c=r,u;for(;(u=t.src.indexOf("`",c))!==-1;){for(c=u+1;c<o&&t.src.charCodeAt(c)===96;)c++;let l=c-u;if(l===a){if(!e){let d=t.push("code_inline","code",0);d.markup=s,d.content=t.src.slice(r,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=c,!0}t.backticks[l]=u}return t.backticksScanned=!0,e||(t.pending+=s),t.pos+=a,!0}function pXe(t,e){let r=t.pos,n=t.src.charCodeAt(r);if(e||n!==126)return!1;let i=t.scanDelims(t.pos,!0),o=i.length,s=String.fromCharCode(n);if(o<2)return!1;let a;o%2&&(a=t.push("text","",0),a.content=s,o--);for(let c=0;c<o;c+=2)a=t.push("text","",0),a.content=s+s,t.delimiters.push({marker:n,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function RTe(t,e){let r,n=[],i=e.length;for(let o=0;o<i;o++){let s=e[o];if(s.marker!==126||s.end===-1)continue;let a=e[s.end];r=t.tokens[s.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=t.tokens[a.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&n.push(a.token-1)}for(;n.length;){let o=n.pop(),s=o+1;for(;s<t.tokens.length&&t.tokens[s].type==="s_close";)s++;s--,o!==s&&(r=t.tokens[s],t.tokens[s]=t.tokens[o],t.tokens[o]=r)}}function fXe(t){let e=t.tokens_meta,r=t.tokens_meta.length;RTe(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&RTe(t,e[n].delimiters)}var nQ={tokenize:pXe,postProcess:fXe};function mXe(t,e){let r=t.pos,n=t.src.charCodeAt(r);if(e||n!==95&&n!==42)return!1;let i=t.scanDelims(t.pos,n===42);for(let o=0;o<i.length;o++){let s=t.push("text","",0);s.content=String.fromCharCode(n),t.delimiters.push({marker:n,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function ATe(t,e){let r=e.length;for(let n=r-1;n>=0;n--){let i=e[n];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;let o=e[i.end],s=n>0&&e[n-1].end===i.end+1&&e[n-1].marker===i.marker&&e[n-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),c=t.tokens[i.token];c.type=s?"strong_open":"em_open",c.tag=s?"strong":"em",c.nesting=1,c.markup=s?a+a:a,c.content="";let u=t.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(t.tokens[e[n-1].token].content="",t.tokens[e[i.end+1].token].content="",n--)}}function hXe(t){let e=t.tokens_meta,r=t.tokens_meta.length;ATe(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&ATe(t,e[n].delimiters)}var iQ={tokenize:mXe,postProcess:hXe};function oQ(t,e){let r,n,i,o,s="",a="",c=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;let l=t.pos,d=t.posMax,p=t.pos+1,f=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(f<0)return!1;let m=f+1;if(m<d&&t.src.charCodeAt(m)===40){for(u=!1,m++;m<d&&(r=t.src.charCodeAt(m),!(!ir(r)&&r!==10));m++);if(m>=d)return!1;if(c=m,i=t.md.helpers.parseLinkDestination(t.src,m,t.posMax),i.ok){for(s=t.md.normalizeLink(i.str),t.md.validateLink(s)?m=i.pos:s="",c=m;m<d&&(r=t.src.charCodeAt(m),!(!ir(r)&&r!==10));m++);if(i=t.md.helpers.parseLinkTitle(t.src,m,t.posMax),m<d&&c!==m&&i.ok)for(a=i.str,m=i.pos;m<d&&(r=t.src.charCodeAt(m),!(!ir(r)&&r!==10));m++);}(m>=d||t.src.charCodeAt(m)!==41)&&(u=!0),m++}if(u){if(typeof t.env.references>"u")return!1;if(m<d&&t.src.charCodeAt(m)===91?(c=m+1,m=t.md.helpers.parseLinkLabel(t,m),m>=0?n=t.src.slice(c,m++):m=f+1):m=f+1,n||(n=t.src.slice(p,f)),o=t.env.references[Zy(n)],!o)return t.pos=l,!1;s=o.href,a=o.title}if(!e){t.pos=p,t.posMax=f;let h=t.push("link_open","a",1),g=[["href",s]];h.attrs=g,a&&g.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=m,t.posMax=d,!0}function sQ(t,e){let r,n,i,o,s,a,c,u,l="",d=t.pos,p=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;let f=t.pos+2,m=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(m<0)return!1;if(o=m+1,o<p&&t.src.charCodeAt(o)===40){for(o++;o<p&&(r=t.src.charCodeAt(o),!(!ir(r)&&r!==10));o++);if(o>=p)return!1;for(u=o,a=t.md.helpers.parseLinkDestination(t.src,o,t.posMax),a.ok&&(l=t.md.normalizeLink(a.str),t.md.validateLink(l)?o=a.pos:l=""),u=o;o<p&&(r=t.src.charCodeAt(o),!(!ir(r)&&r!==10));o++);if(a=t.md.helpers.parseLinkTitle(t.src,o,t.posMax),o<p&&u!==o&&a.ok)for(c=a.str,o=a.pos;o<p&&(r=t.src.charCodeAt(o),!(!ir(r)&&r!==10));o++);else c="";if(o>=p||t.src.charCodeAt(o)!==41)return t.pos=d,!1;o++}else{if(typeof t.env.references>"u")return!1;if(o<p&&t.src.charCodeAt(o)===91?(u=o+1,o=t.md.helpers.parseLinkLabel(t,o),o>=0?i=t.src.slice(u,o++):o=m+1):o=m+1,i||(i=t.src.slice(f,m)),s=t.env.references[Zy(i)],!s)return t.pos=d,!1;l=s.href,c=s.title}if(!e){n=t.src.slice(f,m);let h=[];t.md.inline.parse(n,t.md,t.env,h);let g=t.push("image","img",0),v=[["src",l],["alt",""]];g.attrs=v,g.children=h,g.content=n,c&&v.push(["title",c])}return t.pos=o,t.posMax=p,!0}var gXe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,vXe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function aQ(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==60)return!1;let n=t.pos,i=t.posMax;for(;;){if(++r>=i)return!1;let s=t.src.charCodeAt(r);if(s===60)return!1;if(s===62)break}let o=t.src.slice(n+1,r);if(vXe.test(o)){let s=t.md.normalizeLink(o);if(!t.md.validateLink(s))return!1;if(!e){let a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let c=t.push("text","",0);c.content=t.md.normalizeLinkText(o);let u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}if(gXe.test(o)){let s=t.md.normalizeLink("mailto:"+o);if(!t.md.validateLink(s))return!1;if(!e){let a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let c=t.push("text","",0);c.content=t.md.normalizeLinkText(o);let u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}return!1}function yXe(t){return/^<a[>\s]/i.test(t)}function bXe(t){return/^<\/a\s*>/i.test(t)}function _Xe(t){let e=t|32;return e>=97&&e<=122}function cQ(t,e){if(!t.md.options.html)return!1;let r=t.posMax,n=t.pos;if(t.src.charCodeAt(n)!==60||n+2>=r)return!1;let i=t.src.charCodeAt(n+1);if(i!==33&&i!==63&&i!==47&&!_Xe(i))return!1;let o=t.src.slice(n).match(TTe);if(!o)return!1;if(!e){let s=t.push("html_inline","",0);s.content=o[0],yXe(s.content)&&t.linkLevel++,bXe(s.content)&&t.linkLevel--}return t.pos+=o[0].length,!0}var xXe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,SXe=/^&([a-z][a-z0-9]{1,31});/i;function uQ(t,e){let r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==38||r+1>=n)return!1;if(t.src.charCodeAt(r+1)===35){let o=t.src.slice(r).match(xXe);if(o){if(!e){let s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=t.push("text_special","",0);a.content=S5(s)?TR(s):TR(65533),a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}else{let o=t.src.slice(r).match(SXe);if(o){let s=Bg(o[0]);if(s!==o[0]){if(!e){let a=t.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}}return!1}function PTe(t){let e={},r=t.length;if(!r)return;let n=0,i=-2,o=[];for(let s=0;s<r;s++){let a=t[s];if(o.push(0),(t[n].marker!==a.marker||i!==a.token-1)&&(n=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);let c=e[a.marker][(a.open?3:0)+a.length%3],u=n-o[n]-1,l=u;for(;u>c;u-=o[u]+1){let d=t[u];if(d.marker===a.marker&&d.open&&d.end<0){let p=!1;if((d.close||a.open)&&(d.length+a.length)%3===0&&(d.length%3!==0||a.length%3!==0)&&(p=!0),!p){let f=u>0&&!t[u-1].open?o[u-1]+1:0;o[s]=s-u+f,o[u]=f,a.open=!1,d.end=s,d.close=!1,l=-1,i=-2;break}}}l!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=l)}}function lQ(t){let e=t.tokens_meta,r=t.tokens_meta.length;PTe(t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&PTe(e[n].delimiters)}function dQ(t){let e,r,n=0,i=t.tokens,o=t.tokens.length;for(e=r=0;e<o;e++)i[e].nesting<0&&n--,i[e].level=n,i[e].nesting>0&&n++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==r&&(i[r]=i[e]),r++);e!==r&&(i.length=r)}var pQ=[["text",XY],["linkify",JY],["newline",ZY],["escape",tQ],["backticks",rQ],["strikethrough",nQ.tokenize],["emphasis",iQ.tokenize],["link",oQ],["image",sQ],["autolink",aQ],["html_inline",cQ],["entity",uQ]],fQ=[["balance_pairs",lQ],["strikethrough",nQ.postProcess],["emphasis",iQ.postProcess],["fragments_join",dQ]];function IR(){this.ruler=new eb;for(let t=0;t<pQ.length;t++)this.ruler.push(pQ[t][0],pQ[t][1]);this.ruler2=new eb;for(let t=0;t<fQ.length;t++)this.ruler2.push(fQ[t][0],fQ[t][1])}IR.prototype.skipToken=function(t){let e=t.pos,r=this.ruler.getRules(""),n=r.length,i=t.md.options.maxNesting,o=t.cache;if(typeof o[e]<"u"){t.pos=o[e];return}let s=!1;if(t.level<i){for(let a=0;a<n;a++)if(t.level++,s=r[a](t,!0),t.level--,s){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;s||t.pos++,o[e]=t.pos};IR.prototype.tokenize=function(t){let e=this.ruler.getRules(""),r=e.length,n=t.posMax,i=t.md.options.maxNesting;for(;t.pos<n;){let o=t.pos,s=!1;if(t.level<i){for(let a=0;a<r;a++)if(s=e[a](t,!1),s){if(o>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(t.pos>=n)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};IR.prototype.parse=function(t,e,r,n){let i=new this.State(t,e,r,n);this.tokenize(i);let o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};IR.prototype.State=wTe;var kTe=IR;function DTe(t){let e={};t=t||{},e.src_Any=g5.source,e.src_Cc=v5.source,e.src_Z=y5.source,e.src_P=CS.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");let r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function mQ(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function w5(t){return Object.prototype.toString.call(t)}function EXe(t){return w5(t)==="[object String]"}function TXe(t){return w5(t)==="[object Object]"}function CXe(t){return w5(t)==="[object RegExp]"}function NTe(t){return w5(t)==="[object Function]"}function IXe(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var OTe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function wXe(t){return Object.keys(t||{}).reduce(function(e,r){return e||OTe.hasOwnProperty(r)},!1)}var RXe={"http:":{validate:function(t,e,r){let n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){let n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){let n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},AXe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",PXe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function kXe(t){t.__index__=-1,t.__text_cache__=""}function DXe(t){return function(e,r){let n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function LTe(){return function(t,e){e.normalize(t)}}function I5(t){let e=t.re=DTe(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(AXe),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");let i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){let c=t.__schemas__[a];if(c===null)return;let u={validate:null,link:null};if(t.__compiled__[a]=u,TXe(c)){CXe(c.validate)?u.validate=DXe(c.validate):NTe(c.validate)?u.validate=c.validate:o(a,c),NTe(c.normalize)?u.normalize=c.normalize:c.normalize?o(a,c):u.normalize=LTe();return}if(EXe(c)){i.push(a);return}o(a,c)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:LTe()};let s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(IXe).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),kXe(t)}function NXe(t,e){let r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function hQ(t,e){let r=new NXe(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function Ec(t,e){if(!(this instanceof Ec))return new Ec(t,e);e||wXe(t)&&(e=t,t={}),this.__opts__=mQ({},OTe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=mQ({},RXe,t),this.__compiled__={},this.__tlds__=PXe,this.__tlds_replaced__=!1,this.re={},I5(this)}Ec.prototype.add=function(e,r){return this.__schemas__[e]=r,I5(this),this};Ec.prototype.set=function(e){return this.__opts__=mQ(this.__opts__,e),this};Ec.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let r,n,i,o,s,a,c,u,l;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=e.indexOf("@"),l>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Ec.prototype.pretest=function(e){return this.re.pretest.test(e)};Ec.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};Ec.prototype.match=function(e){let r=[],n=0;this.__index__>=0&&this.__text_cache__===e&&(r.push(hQ(this,n)),n=this.__last_index__);let i=n?e.slice(n):e;for(;this.test(i);)r.push(hQ(this,n)),i=i.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};Ec.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;let r=this.re.schema_at_start.exec(e);if(!r)return null;let n=this.testSchemaAt(e,r[2],r[0].length);return n?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+n,hQ(this,0)):null};Ec.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),I5(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,I5(this),this)};Ec.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Ec.prototype.onCompile=function(){};var MTe=Ec;var UTe="-",LXe=/^xn--/,OXe=/[^\0-\x7F]/,MXe=/[\x2E\u3002\uFF0E\uFF61]/g,FXe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},gQ=35,Qd=Math.floor,vQ=String.fromCharCode;function Hg(t){throw new RangeError(FXe[t])}function UXe(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function BTe(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(MXe,".");let i=t.split("."),o=UXe(i,e).join(".");return n+o}function qTe(t){let e=[],r=0,n=t.length;for(;r<n;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let o=t.charCodeAt(r++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var BXe=t=>String.fromCodePoint(...t),qXe=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},FTe=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},HTe=function(t,e,r){let n=0;for(t=r?Qd(t/700):t>>1,t+=Qd(t/e);t>gQ*26>>1;n+=36)t=Qd(t/gQ);return Qd(n+(gQ+1)*t/(t+38))},GTe=function(t){let e=[],r=t.length,n=0,i=128,o=72,s=t.lastIndexOf(UTe);s<0&&(s=0);for(let a=0;a<s;++a)t.charCodeAt(a)>=128&&Hg("not-basic"),e.push(t.charCodeAt(a));for(let a=s>0?s+1:0;a<r;){let c=n;for(let l=1,d=36;;d+=36){a>=r&&Hg("invalid-input");let p=qXe(t.charCodeAt(a++));p>=36&&Hg("invalid-input"),p>Qd((2147483647-n)/l)&&Hg("overflow"),n+=p*l;let f=d<=o?1:d>=o+26?26:d-o;if(p<f)break;let m=36-f;l>Qd(2147483647/m)&&Hg("overflow"),l*=m}let u=e.length+1;o=HTe(n-c,u,c==0),Qd(n/u)>2147483647-i&&Hg("overflow"),i+=Qd(n/u),n%=u,e.splice(n++,0,i)}return String.fromCodePoint(...e)},jTe=function(t){let e=[];t=qTe(t);let r=t.length,n=128,i=0,o=72;for(let c of t)c<128&&e.push(vQ(c));let s=e.length,a=s;for(s&&e.push(UTe);a<r;){let c=2147483647;for(let l of t)l>=n&&l<c&&(c=l);let u=a+1;c-n>Qd((2147483647-i)/u)&&Hg("overflow"),i+=(c-n)*u,n=c;for(let l of t)if(l<n&&++i>2147483647&&Hg("overflow"),l===n){let d=i;for(let p=36;;p+=36){let f=p<=o?1:p>=o+26?26:p-o;if(d<f)break;let m=d-f,h=36-f;e.push(vQ(FTe(f+m%h,0))),d=Qd(m/h)}e.push(vQ(FTe(d,0))),o=HTe(i,u,a===s),i=0,++a}++i,++n}return e.join("")},HXe=function(t){return BTe(t,function(e){return LXe.test(e)?GTe(e.slice(4).toLowerCase()):e})},GXe=function(t){return BTe(t,function(e){return OXe.test(e)?"xn--"+jTe(e):e})},jXe={version:"2.3.1",ucs2:{decode:qTe,encode:BXe},decode:GTe,encode:jTe,toASCII:GXe,toUnicode:HXe};var yQ=jXe;var zTe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}};var VTe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}};var $Te={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}};var zXe={default:zTe,zero:VTe,commonmark:$Te},VXe=/^(vbscript|javascript|file|data):/,$Xe=/^data:image\/(gif|png|jpeg|webp);/;function WXe(t){let e=t.trim().toLowerCase();return VXe.test(e)?$Xe.test(e):!0}var WTe=["http:","https:","mailto:"];function KXe(t){let e=ER(t,!0);if(e.hostname&&(!e.protocol||WTe.indexOf(e.protocol)>=0))try{e.hostname=yQ.toASCII(e.hostname)}catch{}return f5(TS(e))}function YXe(t){let e=ER(t,!0);if(e.hostname&&(!e.protocol||WTe.indexOf(e.protocol)>=0))try{e.hostname=yQ.toUnicode(e.hostname)}catch{}return SR(TS(e),SR.defaultChars+"%")}function yu(t,e){if(!(this instanceof yu))return new yu(t,e);e||x5(t)||(e=t||{},t="default"),this.inline=new kTe,this.block=new ITe,this.core=new gTe,this.renderer=new lTe,this.linkify=new MTe,this.validateLink=WXe,this.normalizeLink=KXe,this.normalizeLinkText=YXe,this.utils=CY,this.helpers=IS({},AY),this.options={},this.configure(t),e&&this.set(e)}yu.prototype.set=function(t){return IS(this.options,t),this};yu.prototype.configure=function(t){let e=this;if(x5(t)){let r=t;if(t=zXe[r],!t)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};yu.prototype.enable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));let n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};yu.prototype.disable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));let n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};yu.prototype.use=function(t){let e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};yu.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");let r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};yu.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};yu.prototype.parseInline=function(t,e){let r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};yu.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var bQ=yu;function KTe(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}function Ii(t,e,r=!0){let n=e.matchAll(/^\s*(```+)/gm),i=Math.max(3,...Array.from(n,s=>s[1].length+1)),o="`".repeat(i);return`${o}${R5(t)}
${r?e.trim():e}
${o}`}function R5(t){switch(t.trim().toLowerCase()){case"typescriptreact":return"tsx";case"javascriptreact":return"jsx";default:return t}}function A5(t){let e=nc(t).toLowerCase(),r=Object.keys(tC).find(n=>tC.get(n)?.extensions?.includes(e))||e.replace(/^\./,"");return R5(r)}function Ya(t){let e=[],n=new bQ().parse(t,{});for(let i of YTe(n))i.map&&i.type==="fence"&&e.push({startMarkup:i.markup,code:i.content.replace(/\n$/,""),language:i.info.trim(),startLine:i.map[0],endLine:i.map[1]});return e}function*YTe(t){for(let e of t)e.children&&(yield*YTe(e.children)),yield e}var ZTe=W(JTe()),eCe=require("util");var PS=class{constructor(e,r){this.baseUri=e;this.pattern=r}get base(){throw new Error("Not implemented")}};var iJe=1e5,oJe=1*1024*1024,sJe=new Set(["jpg","jpeg","jpe","png","gif","bmp","tif","tiff","tga","ico","webp","svg","eps","heif","heic","pdf","raw","mp4","m4v","mkv","webm","mov","avi","wmv","flv","mp3","wav","m4a","flac","ogg","wma","weba","aac","7z","bz2","gz","gz","rar","tar","xz","zip","vsix","db","bin","dat","hex","map","wasm","pyc","pdb","sym","git"]),aJe=["node_modules","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],cJe=[".DS_Store","Thumbs.db","package-lock.json","yarn.lock"],uJe=[Zr.vscode,Zr.vscodeUserData,"output",Zr.inMemory,Zr.internal,"git"];function tb(t,e){if(uJe.includes(t.scheme)||e&&![Zr.file,Zr.untitled].includes(t.scheme)&&!e.getWorkspaceFolders().some(i=>t.scheme===i.scheme))return!1;let r=nc(t).replace(/\./,"").toLowerCase();return!(sJe.has(r)||cJe.includes(Pc(t).toLowerCase())||t.fsPath.toLowerCase().split(/[/\\]/g).some(i=>aJe.includes(i)))}async function lJe(t,e=iJe,r){let n=t.get(Ze),i=t.get(Ta),o=t.get(De);if(await o.init(),r?.isCancellationRequested)return[];let s=new kn;for(let a of n.getWorkspaceFolders()??[]){if(s.size>=e)break;let c=await i.findFilesWithDefaultExcludes(new PS(a,"**/*"),e-s.size,r);if(r.isCancellationRequested)return[];for(let u of c){if(s.size>=e||r.isCancellationRequested)break;tb(u,n)&&!await o.isCopilotIgnored(u)&&s.set(u)}}return s.keys()}var k5=class{constructor(e,r){this._uri=e;this._chunkingService=r;this._isDisposed=!1;this._disposedCts=new eie}dispose(){this._isDisposed=!0,this._disposedCts.cancel(),this._disposedCts.dispose()}get uri(){return this._uri}async getBasicChunks(e){return this._basicChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:this._chunkingService.chunkFileNaive(this._uri,r,this._disposedCts.token)),await Im(this._basicChunks,e)??[]}async getSemanticChunks(e){return this._chunkingService.canSemanticallyChunk(this.uri)?(this._semanticChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:this._chunkingService.chunkFileSemantic(this._uri,r,this._disposedCts.token)),await Im(this._semanticChunks,e)??[]):this.getBasicChunks(e)}},EQ=class extends k5{constructor(r,n,i){super(r,n);this._fs=i}async getText(r){return this._text??=this._fs.readFile(this.uri).then(async n=>this._isDisposed||n.byteLength>=oJe||await(0,ZTe.isBinaryFile)(Buffer.from(n))||this._isDisposed?"":new eCe.TextDecoder().decode(n),n=>""),await Im(this._text,r)??""}},D5=class extends k5{constructor(r,n){super(r.uri,n);this._textDocument=r}async getText(r){return this._textDocument.getText()}},yl=oe("workspaceChunkIndex"),kS=class extends hr{constructor(r,n,i,o,s){super();this._accessor=r;this._chunkingService=n;this._fileSystem=i;this._telemetryService=o;this._workspaceService=s;this._textDocumentFiles=new kn;this._fsFiles=new kn;this._onDidCreateFile=this._register(new gr);this.onDidCreateFile=this._onDidCreateFile.event;this._onDidChangeFile=this._register(new gr);this.onDidChangeFile=this._onDidChangeFile.event;this._onDidDeleteFile=this._register(new gr);this.onDidDeleteFile=this._onDidDeleteFile.event}get fileSystemFileCount(){return this._fsFiles.size}dispose(){super.dispose(),ym(this._fsFiles.values()),this._fsFiles.clear(),ym(this._textDocumentFiles.values()),this._textDocumentFiles.clear()}get(r){return this._textDocumentFiles.get(r)||this._fsFiles.get(r)}*values(){let r=new kn;for(let[n,i]of this._textDocumentFiles.entries())yield i,r.set(n);for(let[n,i]of this._fsFiles.entries())r.has(n)||(r.set(n),yield i)}registerListeners(){let r=i=>{if(!tb(i.uri,this._workspaceService))return;let o=this._textDocumentFiles.get(i.uri),s=this._fsFiles.get(i.uri);o?.dispose(),this._textDocumentFiles.set(i.uri,new D5(i,this._chunkingService)),!o&&!s?this._onDidCreateFile.fire(i.uri):this._onDidChangeFile.fire(i.uri)};this._register(this._workspaceService.onDidOpenTextDocument(r)),this._register(this._workspaceService.onDidChangeTextDocument(i=>r(i.document))),this._register(this._workspaceService.onDidCloseTextDocument(i=>{let o=this._textDocumentFiles.get(i.uri);if(!o)return;this._textDocumentFiles.delete(i.uri),o.dispose(),this._fsFiles.get(i.uri)?this._onDidChangeFile.fire(i.uri):this._onDidDeleteFile.fire(i.uri)}));let n=this._register(this._fileSystem.createFileSystemWatcher("**/*"));this._register(n.onDidChange(i=>{if(!tb(i,this._workspaceService))return;let o=this._fsFiles.has(i);this.createOrUpdateFsEntry(i),o?this._onDidChangeFile.fire(i):this._onDidCreateFile.fire(i)})),this._register(n.onDidCreate(i=>{tb(i,this._workspaceService)&&(this._fsFiles.has(i)||(this.createOrUpdateFsEntry(i),this._onDidCreateFile.fire(i)))})),this._register(n.onDidDelete(i=>{let o=this._fsFiles.get(i);o&&(o.dispose(),this._fsFiles.delete(i),this._onDidDeleteFile.fire(i))}))}initialize(){return this._initializedWorkspacePromise??=(async()=>{this.registerListeners(),await this._workspaceService.ensureWorkspaceIsFullyLoaded();for(let n of this._workspaceService.textDocuments)tb(n.uri,this._workspaceService)&&this._textDocumentFiles.set(n.uri,new D5(n,this._chunkingService));let r=await lJe(this._accessor,void 0,Vr.None);for(let n of r)this.createOrUpdateFsEntry(n);this._telemetryService.sendMSFTTelemetryEvent("workspaceChunkIndex.initialize",{},{totalFileCount:Mu.reduce(this.values(),n=>n+1,0)})})(),this._initializedWorkspacePromise}createOrUpdateFsEntry(r){let n=this._fsFiles.get(r);n&&n.dispose();let i=new EQ(r,this._chunkingService,this._fileSystem);this._fsFiles.set(r,i)}};kS=fe([ie(0,ct),ie(1,Lc),ie(2,fn),ie(3,Ee),ie(4,Ze)],kS);var dJe="1.0.9",RR=class extends hr{constructor(r,n,i,o){super();this.path=r;this.version=n;this.options=i;this.fileSystem=o;this.cache=new l5(this.options),this._delayer=typeof i.autoWriteDelay=="number"?this._register(new OA(i.autoWriteDelay)):void 0}async initialize(){if(!this.path)return;let r;try{r=await this.fileSystem.readFile(this.path)}catch{return}try{let n=new TextDecoder().decode(r),i=JSON.parse(n);i.version===this.version&&this.cache.load(i.data)}catch(n){console.error(`Failed to load LRU cache at ${this.path}`,n)}}get(r){return this.cache.get(this.toKey(r))}set(r,n){this.cache.set(this.toKey(r),n),this._delayer?.trigger(()=>this.save())}async save(){if(!this.path)return;let r=JSON.stringify({version:this.version,data:this.cache.dump()});await this.fileSystem.writeFile(this.path,new TextEncoder().encode(r))}toKey(r){let n=tCe.createHash("sha256");return n.update(r),n.digest("hex")}};RR=fe([ie(3,fn)],RR);var zg=oe("IWorkspaceChunkEmbeddingsIndex"),$f=class extends hr{constructor(r){super();this._accessor=r;this.shouldSearchTimeout=!0;this._workspaceIndex=r.get(yl),this._embeddingsComputer=r.get(Ws),this._embeddingsCache=new zo(async()=>{let n=this._accessor.get(xr).storageUri,i=n?ut.joinPath(n,"workspaceEmbeddingsCache.json"):void 0,o=this._register(r.get(zi).createInstance(RR,i,dJe,{max:2e3,autoWriteDelay:5e3}));return await o.initialize(),o}),this._logger=r.get(ue).getLogger("WorkspaceChunkEmbeddingsIndex")}static{this._MAX_EMBEDDINGS_COMPUTATION_TIME=1e4}static{this._MAX_CHUNK_LENGTH=2e3}get fileSystemFileCount(){return this._workspaceIndex.fileSystemFileCount}workspaceEmbeddingsInitialized(){return this._initializedWorkspacePromise??=this._workspaceIndex.initialize(),this._initializedWorkspacePromise}async triggerIndexing(r){let n=await this.getChunksToSearch(r);if(r.isCancellationRequested)return;let i=await this.getEmbeddings(n.map(o=>this.chunkToIndexString(o)),r);this._logger.debug(`Indexed ${i.length} chunks`)}async searchAllChunks(r,n,i){let o=await this.getChunksToSearch(i);return i.isCancellationRequested?[]:this.searchChunks(o,r,n,i)}async searchChunks(r,n,i,o){if(!r.length)return[];let s=[n,...r.map(d=>this.chunkToIndexString(d))],a=this.shouldSearchTimeout?await V0(this.getEmbeddings(s,o),$f._MAX_EMBEDDINGS_COMPUTATION_TIME):await this.getEmbeddings(s,o);if(o.isCancellationRequested)return[];if(!a)throw new Error("Timeout computing embeddings");if(a.length<1)throw new Error("Invalid response");let[c,...u]=a,l=u.map((d,p)=>[r[p],d]);return yie(c,l,i)}async getChunksToSearch(r){let n=(await Promise.all(Array.from(this._workspaceIndex.values(),i=>i.getSemanticChunks(r)))).flat();return r.isCancellationRequested?[]:n.filter(i=>i.text.length<$f._MAX_CHUNK_LENGTH)}chunkToIndexString(r){let n=this._accessor.get(Ze),i=Og(n,r.file);return pJe(r,i)}async getEmbeddings(r,n){let i=await this._embeddingsCache.value,o=new Array(r.length),s=[];for(let[c,u]of r.entries()){let l=i.get(u);l?o[c]=l:s.push({index:c,value:u})}if(s.length===0)return o;let a=await this.computeEmbeddingsWithRetry(s.map(c=>c.value),n);for(let c=0;c<s.length;c++){let u=s[c],l=a[c];if(typeof l>"u")throw new Error("Error computing embedding");o[u.index]=l,i.set(u.value,l)}return o}async computeEmbeddingsWithRetry(r,n){let o=0,s;for(;o<3;)try{if(this._embeddingEndpoint??=await this._accessor.get(Ue).getEmbeddingsEndpoint(),s=await this._embeddingsComputer.computeEmbeddings(this._embeddingEndpoint,r,{parallelism:2},n),!s)throw new Error("Failed to compute embeddings");return s}catch(a){if(o++,o===3)throw a;if(n.isCancellationRequested)throw new Error("Cancelled computing embeddings");this._logger.warn(`Error computing embeddings. Retrying in ${o} seconds. Error: ${a}`),await new Promise(c=>setTimeout(c,1e3*o))}throw new Error("Failed to compute embeddings")}};$f=fe([ie(0,ct)],$f);function pJe(t,e){return`File: \`${e}\`
${Ii(A5(t.file),t.text)}`}var qQ=W(_r());var DS=class extends Error{constructor(r,n){super(n);this.repo=r}},AR=class extends DS{constructor(){super(...arguments);this.name="ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG"}},TQ=class extends DS{constructor(){super(...arguments);this.name="ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE"}},CQ=class extends DS{constructor(){super(...arguments);this.name="ERROR_TYPE_NOT_INDEXED"}},IQ=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_MAX_RETRIES_EXCEEDED"}},wQ=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_NO_ACCESS_TO_ENDPOINT"}};function rCe({error:t,message:e,repo:r}){switch(t){case"ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG":return new AR(r,e);case"ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE":return new TQ(r,e);case"ERROR_TYPE_NOT_INDEXED":return new CQ(r,e);default:return new DS(r,e)}}function RQ({error:t,message:e}){switch(t){case"ERROR_TYPE_MAX_RETRIES_EXCEEDED":return new IQ(e);case"ERROR_TYPE_NO_ACCESS_TO_ENDPOINT":return new wQ(e);default:return new Error(e)}}var UQ=W(SCe());function F5(t,e){return typeof e=="string"?UQ.default.isMatch(t.fsPath,e,{dot:!0,windows:process.platform==="win32"}):UQ.default.isMatch(t.fsPath,e.pattern,{dot:!0,windows:process.platform==="win32"})}function ECe(t,e){return e.exclude?.some(r=>F5(t,r))?!1:e.include?e.include.some(r=>F5(t,r)):!0}var U5=oe("codeSearchClient"),B5=oe("docsSearchClient");var Vg=class extends hr{constructor(r){super();this._accessor=r}async toSemanticChunks(r,n){let i=this._accessor.get(yl),o=this._accessor.get(Lc),s=new kn;for(let c of r){let u=s.get(c.file);u?u.push(c):s.set(c.file,[c])}let a=await Promise.all(Array.from(s,async([c,u])=>{let l=i.get(c);if(l&&o.canSemanticallyChunk(c)){let d=await l.getSemanticChunks(n);if(n.isCancellationRequested)return[];let p=new Set;for(let f of u){let m=!1;for(let h of d)h.range.intersectRanges(f.range)&&(p.add(h),m=!0);m||p.add(f)}return Array.from(p)}else return u}));return Array.from(new Set(a.flat()))}};var rb=class extends Vg{constructor(r){super(r);this.id="codesearch";this.timeout=5e3;this._codeSearchClient=r.get(U5),this._workspaceChunkIndex=r.get(yl),this._embeddingsIndex=r.get(zg),this._telemetryService=r.get(Ee),this._logger=r.get(ue).getLogger("CodeSearchChunkSearch")}async searchFileChunks(r,n,i,o){if(o.isCancellationRequested)return[];if(await Wl(this._logger,"initialize",()=>this.initialized()),o.isCancellationRequested)return[];let s;try{if(s=await this.getSimilarFilesFromCodeSearch(r,o),o.isCancellationRequested)return[];this._telemetryService.sendMSFTTelemetryEvent("codeSearchChunkSearch.search.success",{},{chunkCount:s?.length??0})}catch(c){throw this._telemetryService.sendMSFTTelemetryEvent("codeSearchChunkSearch.search.error",{errorMessage:c instanceof Error?c.message:c.toString()}),c}if(!s||o.isCancellationRequested)return[];let a=await Wl(this._logger,"toSemanticChunks",()=>this.toSemanticChunks(s,o));return o.isCancellationRequested?[]:i.include?a.filter(c=>ECe(c.file,i.include)):a}async isAvailable(){let r;return r=this._accessor.get(ke).getConfig(Ae.WorkspaceCodeSearchEnabled),r===void 0&&(r=await this._accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.useCodeSearch",!0)),r??!0}async getShouldUseRawChunks(){let r;return r=this._accessor.get(ke).getConfig(Ae.WorkspaceCodeSearchReturnRawChunks),r===void 0&&(r=await this._accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.codeSearchRawChunks",!0)),r??!1}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}async getSimilarFilesFromCodeSearch(r,n){let i=this._accessor.get(Ze).getWorkspaceFolders(),o=this._accessor.safeGet(ei)?.repositories;if(!o){if(i.length)throw new Error("No repo contexts available for workspace folders");return}let s=[],a=new Map;for(let p=0;p<o.length;p++){let f=o[p];if(!f)continue;let m=b_(f)?.toLowerCase();m&&(s.push(m),a.set(m,i[p]))}if(!s.length)throw new Error("No repos to search through");let c=await this.getShouldUseRawChunks();if(n.isCancellationRequested)return[];let u;if(r.maySkipResolve?.())u=r.rawQuery;else{let p=await r.resolve(n);if(!p||n.isCancellationRequested)return[];u=p.rephrasedQuery}let l=await this._codeSearchClient.search(u,{repo:s},{rawChunks:c},n);return n.isCancellationRequested?void 0:(await this.processResults(a,[l])).flat().sort((p,f)=>f.score-p.score)}async processResults(r,n){let i=[];for(let o of n){if(o.errors.length){let s=!0;for(let a of r.keys()){let c=o.errors.filter(u=>u.repo===a);if(c){this._logger.debug(`[${a}] Errors when searching codesearch: ${c.map(lA)}`);continue}s=!1}if(s)throw o.errors.length===1?o.errors[0]:new AggregateError(o.errors)}for(let s of o.results){let a=s.repoOwner.toLowerCase()+"/"+s.repoName.toLowerCase(),c=r.get(a);if(!c){this._logger.error("Could not find workspace folder for repo",a);continue}let u=this._workspaceChunkIndex.get(ut.joinPath(c,s.path));u&&(await this._accessor.get(De).isCopilotIgnored(u.uri)||i.push({file:u.uri,score:s.score,text:s.contents,sources:[],range:new ht(s.range.start,0,s.range.end+1,0)}))}}return i}};fe([gi(r=>r._logger)],rb.prototype,"searchFileChunks",1),fe([gi(r=>r._logger)],rb.prototype,"getSimilarFilesFromCodeSearch",1);var H5=class H5 extends Vg{constructor(r,n=!1){super(r);this.id="ada";this.timeout=5e3;this._embeddingsIndex=r.get(zg),this._logger=r.get(ue).getLogger("EmbeddingsCacheChunkSearch"),n&&(this._embeddingsIndex.shouldSearchTimeout=!1)}static{this.FILE_CAP=200}async searchFileChunks(r,n,i,o){if(await this.initialized(),o.isCancellationRequested)return[];let s;if(r.maySkipResolve?.())s=r.rawQuery;else{let a=await r.resolve(o);if(!a||o.isCancellationRequested)return[];s=a.rephrasedQuery}return this._logger.debug("Fetching related workspace chunks in repository..."),await this._embeddingsIndex.searchAllChunks(s,n,o)}async isAvailable(){return this._isAvailable===void 0&&(this._isAvailable=this.doIsAvailable()),this._isAvailable}async doIsAvailable(){return await this.initialized(),this._embeddingsIndex.fileSystemFileCount<H5.FILE_CAP?(this.triggerIndexing(),!0):!1}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}triggerIndexing(){this._initializedWorkspacePromise||(this._logger.debug("Starting indexing"),this._initializedWorkspacePromise=this._embeddingsIndex.triggerIndexing(Vr.None).then(()=>{this._isAvailable=Promise.resolve(!0),this._logger.debug("Workspace Chunk Embeddings Index initialized.")}).catch(r=>{this._logger.warn(`Failed to index workspace: ${r}`),this._initializedWorkspacePromise=void 0}))}};fe([gi(r=>r._logger)],H5.prototype,"searchFileChunks",1);var q5=H5;var TCe=W(require("path"));function DR(t,e){if(!t)return t;if(Array.isArray(t))return t.map(r=>DR(r,e));if(typeof t=="object"){let r=e(t);if(r)return r;let n={};for(let i in t)n[i]=DR(t[i],e);return n}return t}var $Je=TCe.default.join(__dirname,"tfidfWorker.js"),LS=class extends hr{constructor(r){super();this.id="tfidf";this.timeout=500;this._isDisposed=!1;this._tfIdfWorker=new zo(()=>new zm($Je,{name:"TfIdf Worker"})),this._logger=r.get(ue).getLogger("TfidfChunkSearch");let n=i=>{let o=this._workspaceIndex.get(i);o&&this.addOrUpdateTfidfEntries([o])};this._workspaceIndex=r.get(yl),this._register(this._workspaceIndex.onDidCreateFile(n)),this._register(this._workspaceIndex.onDidChangeFile(n)),this._register(this._workspaceIndex.onDidDeleteFile(i=>{this._isDisposed||this._tfIdfWorker.value.proxy.delete(i)}))}dispose(){this._isDisposed=!0,super.dispose(),this._tfIdfWorker.rawValue?.terminate()}initialize(){return this._initializePromise??=this._initializeWorkspaceFiles(),this._initializePromise}async searchFileChunks(r,n,i,o){if(await Im(this.initialize(),o),o.isCancellationRequested||this._isDisposed)return[];let s=await r.resolve(o);if(!s||o.isCancellationRequested)return[];let a=s.keywords.flatMap(u=>[u.keyword,...u.variations]),c=await Wl(this._logger,"search",()=>this._tfIdfWorker.value.proxy.search([a.length?a.join(", "):s.rephrasedQuery],{maxResults:n,include:i.include,maxSpread:.75}));return KJe(c)}async isAvailable(){return await this.initialize(),!0}async _initializeWorkspaceFiles(){await Wl(this._logger,"initialize workspaceIndex",()=>this._workspaceIndex.initialize()),!this._isDisposed&&await Wl(this._logger,"initialize tfidf",()=>this.addOrUpdateTfidfEntries(this._workspaceIndex.values()))}async addOrUpdateTfidfEntries(r){if(this._isDisposed)return;let n=new i_(20),i;try{i=await Promise.all(Array.from(r,o=>n.queue(async()=>({uri:o.uri,content:await o.getText(Vr.None)}))))}finally{n.dispose()}this._isDisposed||this._tfIdfWorker.value.proxy.addOrUpdate(WJe(i))}};fe([gi(r=>r._logger)],LS.prototype,"initialize",1),fe([gi(r=>r._logger)],LS.prototype,"searchFileChunks",1);function WJe(t){return DR(t,e=>{if(ut.isUri(e))return{$mid:"uri",...e};if(e instanceof ht)return{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn}})}function KJe(t){return DR(t,e=>{if(e.$mid==="range")return new ht(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);if(e.$mid==="uri")return ut.revive(e)})}var NR=class extends Vg{constructor(r){super(r);this.id="tfidf";this.timeout=500;this._tfidf=this._register(new LS(r)),this._logger=r.get(ue).getLogger("TfIdfWithSemanticChunkSearch")}async searchFileChunks(r,n,i,o){this._logger.debug("Performing full workspace search for chunks...");let a=await this._tfidf.searchFileChunks(r,n*2,i,o);if(o.isCancellationRequested||!a.length)return[];let c=await Wl(this._logger,"toSemanticChunks",()=>this.toSemanticChunks(a,o));return o.isCancellationRequested||!c.length?[]:c}isAvailable(){return this._tfidf.isAvailable()}};fe([gi(r=>r._logger)],NR.prototype,"searchFileChunks",1);var $g=oe("IWorkspaceChunkSearch"),Yf=class{constructor(e,r){this._forcedChunkSearchStrategy=e;this._accessor=r;this._workspaceChunkEmbeddingsIndex=this._accessor.get(zg);this._logger=this._accessor.get(ue).getLogger("WorkspaceChunkSearch");this._inTests=!!this._forcedChunkSearchStrategy,this._embeddingsCacheChunkSearch=new q5(r,this._inTests),this._codeSearchChunkSearch=new rb(r),this._tfIdfWithSemanticChunkSearch=new NR(r)}dispose(){this._embeddingsCacheChunkSearch.dispose(),this._codeSearchChunkSearch.dispose(),this._tfIdfWithSemanticChunkSearch.dispose()}async triggerIndexing(){await Promise.allSettled([this._tfIdfWithSemanticChunkSearch.isAvailable(),this._embeddingsCacheChunkSearch.isAvailable()])}async searchFileChunks(e,r,n,i,o,s){let a=await this.getStrategies();if(o.isCancellationRequested)return[];let c=a.map(m=>mne(async h=>({chunks:await m.searchFileChunks(r,n,i,h),strategy:m.id})));o.onCancellationRequested(()=>c.forEach(m=>m.cancel()));for(let m of c)m.then(h=>{for(let g=0;g<c.length;g++)h.strategy==="ada"?c[g].cancel():V0(c[g].catch(()=>{}),a[g].timeout,()=>{c[g].cancel(),this._logger.warn(`WorkspaceChunkSearch strategy ${a[g].id} timed out`)})},()=>{});let u=await Im(Promise.allSettled(c),o);if(o.isCancellationRequested||!u)return[];let l=[],d;for(let m=0;m<u.length;m++){let h=u[m],g=a[m];if(h.status==="fulfilled"){(!d||h.value.strategy==="ada")&&(d=h.value.strategy),l.push(h.value);continue}if(this._logger.debug(`Strategy, ${g.id}, failed with the following error: ${lA(h.reason)}`),h.status==="rejected"&&h.reason instanceof AR&&g instanceof rb)try{if(await this._accessor.get(Et).getPermissiveGitHubToken({silent:!0}))continue;if(await this._accessor.get(Et).getPermissiveGitHubToken({forceNewSession:{detail:qQ.t("To show you more relevant Copilot Chat results, we need permission to read the contents of your repository on GitHub."),learnMore:ut.parse("https://aka.ms/copilotRepoScope")}})){let y=await g.searchFileChunks(r,n,i,o);d=g.id,l.unshift({chunks:y,strategy:g.id})}}catch{}}this.reportTopSuccessfulFlow(d);let p=this._accessor.get(De),f=await Promise.all(l.map(async m=>({...m,chunks:Xt(await Promise.all(m.chunks.map(async h=>await p.isCopilotIgnored(h.file)?null:h)))})));if(this._inTests&&!f.some(m=>m.chunks.length>0))throw new Error("No chunks returned");return this.rerankChunks(e,r,f.flat(),n,o,s)}async rerankChunks(e,r,n,i,o,s){let a=n.find(u=>u.strategy==="ada");if(a)return a.chunks.slice(0,i);s?.(qQ.t("Filtering to most relevant information"));let c=n.flatMap(u=>u.chunks);return this._accessor.get(ke).getConfig(Ae.WorkspaceRerankStrategy)==="model"?this.sortChunksUsingModel(e,r,c,i,o):await this.getShouldUseAda()?o.isCancellationRequested?[]:this.rerankChunksUsingAda(r,c,i,o):c.slice(0,i)}async rerankChunksUsingAda(e,r,n,i){try{let o=await e.resolve(i);if(!o||i.isCancellationRequested)return[];let s=r.map((l,d)=>({...l,index:d})),a=await this._workspaceChunkEmbeddingsIndex.searchChunks(s,o.rephrasedQuery,n,i),c=this._accessor.get(Ee),u=a.filter(l=>l.index<n).length;return c.sendMSFTTelemetryEvent("workspaceChunkSearch.adaRerank",{topChunkInitialIndices:a.map(l=>l.index).join(",")},{originalTopInTopAfterRerank:u/n}),a}catch(o){return this._logger.warn("Failed to search chunk embeddings index: ",o),r.slice(0,n)}}async sortChunksUsingModel(e,r,n,i,o){let s=await r.resolve(o);if(!s||o.isCancellationRequested)return[];let a=this._accessor.get(Jt),c=[];for(let u=0;u<n.length;u+=i){let l=n.slice(u,u+i),d=[...c,...l];Ere(d);let p=await a.fetchOne([{role:"system",content:`
The user will provide you with question and a numbered list of code snippets.
You are to sort the code snippets by most to least helpful in answering the question.
If a code snippet is not related to the question in possible any way, you may opt not to include it in the list.
Return an ordered list of snippet numbers.
Only return snippet numbers.
Do not explain.
				`.trim()},{role:"user",content:`
Question: ${s.rephrasedQuery}

${d.map((m,h)=>`# Snippet ${h}
 ${Ii("",m.text)}`).join(`

`)}
					`.trim()}],async m=>{},o,2,e,{agent:Dp},{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceChunkRerank"});if(o.isCancellationRequested)return[];if(p.type!=="success"){console.warn("Model re-rank failed");continue}let f=new Set(Array.from(p.value.matchAll(/\d+/g),m=>parseInt(m[0])));c=Xt(Array.from(f).map(m=>d.at(m))).slice(0,i)}return c}async getStrategies(){let e=new Array;switch(this._forcedChunkSearchStrategy){case"codesearch":e.push(this._codeSearchChunkSearch);break;case"ada":e.push(this._embeddingsCacheChunkSearch);break;case"tfidf":e.push(this._tfIdfWithSemanticChunkSearch);break;default:await this._codeSearchChunkSearch.isAvailable()&&e.push(this._codeSearchChunkSearch),await this.getShouldUseAda()&&await this._embeddingsCacheChunkSearch.isAvailable()&&e.push(this._embeddingsCacheChunkSearch),e.push(this._tfIdfWithSemanticChunkSearch);break}return this._logger.debug(`Using ${e.map(r=>r.id).join(", ")} for chunk search`),e}async getShouldUseAda(){let e=this._accessor.get(ke).getConfig(Ae.WorkspaceUseAdaEnabled);return e!==void 0?e:await this._accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.workspaceUseAda",!0)??!0}reportTopSuccessfulFlow(e){this._logger.debug(`'${e}' was the top working workspace chunk search strategy`),this._accessor.get(Ee).sendMSFTTelemetryEvent("workspaceChunkSearchStrategy",{strategy:e??"none"})}};fe([gi(e=>e._logger),Z0(function(e,r){this._accessor.get(Ee).sendMSFTTelemetryEvent("workspaceChunkSearch.perf.triggerIndexing",{status:r},{execTime:e})})],Yf.prototype,"triggerIndexing",1),fe([gi(e=>e._logger),Z0(function(e,r){this._accessor.get(Ee).sendMSFTTelemetryEvent("workspaceChunkSearch.perf.searchFileChunks",{status:r},{execTime:e})})],Yf.prototype,"searchFileChunks",1),fe([gi(e=>e._logger),Z0(function(e,r){this._accessor.get(Ee).sendMSFTTelemetryEvent("workspaceChunkSearch.perf.adaRerank",{status:r},{execTime:e})})],Yf.prototype,"rerankChunksUsingAda",1),Yf=fe([ie(1,ct)],Yf);var CCe=require("vscode");var LR=class{static{this.version=1}#t;constructor(e){this.#t=e}async selectScope(e,r){if(e??=CCe.window.activeTextEditor,!!e)return this.#t.get(Wm).selectEnclosingScope(e,r)}};var OS=class{constructor(e){let r=X0(e.get(St).getEditorInfo().version);this.embeddingsCache=new Bm(e,1,"api",r,"api")}async updateIndex(){this.apiChunks=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this.apiChunks)return[];let i=this.apiChunks.map(o=>{if(!o.embedding)return{text:o.text,similarity:0};let s=Um(e,o.embedding);return{text:this.toContextString(o),similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.text)}toContextString(e){return e.type==="code"?`Snippet from vscode.d.ts:
${Ii(e.lang,e.text)}`:e.type==="command"?`${e.text}`:e.type==="documentationCodeBlock"?`Example code from documentation:
${Ii(e.lang,e.text)}`:""}};OS=fe([ie(0,ct)],OS);var G5=oe("IApiEmbeddingsIndex");var HQ=class extends hr{constructor(){super(...arguments);this._contextCtors=[];this._contextResolvers=new Map;this._initialized=!1}get contextResolvers(){return this._contextResolvers.values()}getContextResolver(r){return this._contextResolvers.get(r)}register(r){if(typeof r=="function"){this._handleCtor(r);return}else return this._contextResolvers.set(r.kind,r),hA(r)&&this._register(r),r}initialize(r){if(this._initialized)return hr.None;for(this._initialized=!0,this._accessor=r;this._contextCtors.length;){let n=this._contextCtors.pop();this._handleCtor(n)}return this}_handleCtor(r){if(!this._accessor){this._contextCtors.push(r);return}try{let n=this._accessor.createInstance(r);this.register(n)}catch(n){console.error(n)}}},un=new HQ;var RCe=W(_r()),ACe=W(st());var OR=W(_r());var GQ=W(st()),xo=W(st());var bu=class{toString(){return Object.getPrototypeOf(this).constructor.name}},Zd=class{constructor(e,r){this.request=e;this.sessionId=r;this.status="in-progress";this.contextParts=[];this.references=[]}addReferences(e){this.references=j5([...this.references,...e])}},_l=class t{constructor(e=[]){this.turns=e}copy(){let e=JSON.parse(JSON.stringify(this.turns));return new t(e)}getLatestTurn(){return this.turns[this.turns.length-1]}addTurn(e){this.turns.forEach(r=>r.chatMessages=[]),this.turns.push(e)}removeTurn(e){let r=this.turns.findIndex(n=>n.requestId===e);if(r!==-1)return this.turns.splice(r,1)[0]}insertBeforeLatestTurn(e){this.turns.splice(this.turns.length-1,0,...e)}getState(){return{turns:this.turns}}};function j5(t){let e=new kn,r=[],n=(o,s)=>{if(o.contains(s))return o;if(s.contains(o))return s;let[a,c]=o.start.line<s.start.line?[o,s]:[s,o];if(a.end.line>=c.start.line-1)return new Xe(a.start,c.end)};return t.forEach(o=>{let s=o.anchor;if("variableName"in s)r.push(o);else if(!ICe(s))e.set(s,o);else{let a=e.get(s.uri);if(!a)e.set(s.uri,[o]);else if(!(a instanceof GQ.PromptReference)){let c=[],u=s.range;a.forEach(d=>{if("variableName"in d.anchor||!ICe(d.anchor))return;let p=n(u,d.anchor.range);p?u=p:c.push(d.anchor)});let l={uri:s.uri,range:u};e.set(s.uri,[...c,l].sort((d,p)=>d.range.start.line-p.range.start.line||d.range.end.line-p.range.end.line).map(d=>new GQ.PromptReference(d)))}}}),[...Array.from(e.keys()).sort((o,s)=>o.fsPath.localeCompare(s.fsPath)).map(o=>{let s=e.get(o);return s||[]}).flat(),...r]}function ICe(t){return"uri"in t&&"range"in t}function z5(t,e=!0){switch(t){case"snippy":return e?OR.t({message:"Sorry, the response matched public code so it was blocked. Please rephrase your prompt. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):OR.t("Sorry, the response matched public code so it was blocked. Please rephrase your prompt.");default:return e?OR.t({message:"Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):OR.t("Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again.")}}var Mo=class{async buildPrompt(e,r,n,i,o,s){return await(await this.createRenderer(e,r,n,i,o,s)).render(i,s)}},Je=class extends ACe.PromptRenderer{constructor(r,n,i,o,s){super(r,n,i,o);this.accessor=s}createElement(r){return new r.ctor(r.props,this.accessor)}async render(r,n){let i=await super.render(r,n),o=i.messages[i.messages.length-1];if(o&&o.role!=="user")throw new Error(RCe.t("Sorry, this message is too long. Please try a shorter question."));return{...i,references:j5(i.references)}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};async function ca(t,e,r,n,i,o,s){let a=new Je(e,r,n,i,t),{messages:c,tokenCount:u,references:l}=await a.render(o,s),d=a.getAllMeta(),p=a.getUsedContext();return{messages:c,tokenCount:u,metadatas:d,usedContext:p,references:j5(l)}}var DCe=W(st());var PCe=require("util");var $5=oe("IPromptWorkspaceLabels"),V5=class{constructor(){this.indicators=new Map;this.contentIndicators=new Map;this._labels=[];this.initIndicators()}get labels(){if(this._labels.includes("javascript")&&this._labels.includes("typescript")){let e=this._labels.indexOf("javascript");this._labels.splice(e,1)}return this._labels}async collectContext(e){let r=e.get(Ze).getWorkspaceFolders();if(r)for(let n=0;n<r.length;n++)await this.addContextForFolders(e,r[n])}async addContextForFolders(e,r){for(let[n,i]of this.indicators.entries())await this.addLabelIfApplicable(e,r,n,i)}async addLabelIfApplicable(e,r,n,i){let o=Zn.joinPath(r,n);if(!await e.get(De).isCopilotIgnored(o))try{await e.get(fn).stat(o),i.forEach(a=>this._labels.push(a));let s=this.contentIndicators.get(n);if(s){let a=await e.get(fn).readFile(o);try{s(new PCe.TextDecoder().decode(a)).forEach(u=>this._labels.push(u))}catch{}}}catch{}}initIndicators(){this.addIndicator("package.json","javascript","npm"),this.addIndicator("tsconfig.json","typescript"),this.addIndicator("pom.xml","java","maven"),this.addIndicator("build.gradle","java","gradle"),this.addIndicator("requirements.txt","python","pip"),this.addIndicator("Pipfile","python","pip"),this.addIndicator("Cargo.toml","rust","cargo"),this.addIndicator("go.mod","go","go.mod"),this.addIndicator("pubspec.yaml","dart","pub"),this.addIndicator("build.sbt","scala","sbt"),this.addIndicator("build.boot","clojure","boot"),this.addIndicator("project.clj","clojure","lein"),this.addIndicator("mix.exs","elixir","mix"),this.addIndicator("composer.json","php","composer"),this.addIndicator("Gemfile","ruby","bundler"),this.addIndicator("build.xml","java","ant"),this.addIndicator("build.gradle.kts","java","gradle"),this.addIndicator("yarn.lock","yarn"),this.addIndicator("CMakeLists.txt","c++","cmake"),this.addIndicator("vcpkg.json","c++"),this.addIndicator("Makefile","c++","makefile"),this.addContentIndicator("CMakeLists.txt",this.collectCMakeListsTxtIndicators),this.addContentIndicator("package.json",this.collectPackageJsonIndicators)}addIndicator(e,...r){this.indicators.set(e,r)}addContentIndicator(e,r){this.contentIndicators.set(e,r)}collectCMakeListsTxtIndicators(e){function r(s,a,c){try{let u=Array.from(s.matchAll(a));if(u&&u[0]&&u[0][1]){let l=parseInt(u[0][1]);if(c.includes(l))return l}}catch{}}let n=[],i=r(e,/set\s*\(\s*CMAKE_CXX_STANDARD\s*(\d+)/gmi,[98,11,14,17,20,23,26]);i&&n.push(`C++${i}`);let o=r(e,/set\s*\(\s*CMAKE_C_STANDARD\s*(\d+)/gmi,[90,99,11,17,23]);return o&&n.push(`C${o}`),n}collectPackageJsonIndicators(e){let r=[],n=JSON.parse(e),i=n.dependencies,o=n.devDependencies;i&&(i["@angular/core"]&&r.push("angular"),i.react&&r.push("react"),i.vue&&r.push("vue")),o&&o.typescript&&r.push("typescript");let s=n.engines;return s&&(s.node&&r.push("node"),s.vscode&&r.push("vscode extension")),r}};var kCe=W(st()),K=class extends kCe.PromptElement{constructor(e,r){super(e),this.accessor=r}};var _u=class extends K{async prepare(){let e=this.accessor.get($5);return await e.collectContext(this.accessor),{labels:[...new Set(e.labels)].sort()}}render(e,r){if(e.labels.length!==0)return vscpp(vscppf,null,vscpp(DCe.UserMessage,{priority:this.props.priority},"I am working on a project of the following nature:",vscpp("br",null),e.labels.reduce((n,i)=>`${n}
- ${i}`,"").trim()))}};var jQ=class{constructor(){this.kind="project-labels"}async resolveContext(e,r){let{messages:n}=await ca(e,r.endpoint,_u,{},e.get(ge));if(n.length>0)return{kind:this.kind,userMessages:n.map(i=>i.content)}}},aYt=un.register(new jQ);var It=W(require("vscode"));var MS={workspace:{explain:"explain",review:"review",tests:"tests",fix:"fix",new:"new",newNotebook:"newNotebook",semanticSearch:"semanticSearch",fixTestFailure:"fixTestFailure"},vscode:{search:"search",api:"api"},terminal:{explain:"terminalExplain"}};function NCe(t){if(Object.keys(MS).includes(t))return{agent:t};for(let[e,r]of Object.entries(MS))if(Object.values(r).includes(t))return{agent:e,command:t}}var nb="GitHub.copilot-chat";var Wg=oe("IConversationStore"),W5=class{constructor(){this.conversationMap=new Map}addConversation(e,r){this.conversationMap.set(e,r)}getConversation(e){return this.conversationMap.get(e)}};var l0=W(_r());var US=oe("IDiffService");var Nr=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new ln(`Invalid range: ${this.toString()}`)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),s=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,s))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new ln(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new ln(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}};var xl=class{get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;;){let n=e.indexOf(`
`,r);if(n===-1)break;this._lineStartOffsets.push(n+1),r=n+1}}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new $r(r,n)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};var co=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new Error(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Bi.fromJson))}static from(e){let r=e.map(i=>new Bi(Nr.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static async fromDiff(e,r,n){let i=await n.computeDiff(e,r,{maxComputationTimeMs:5e3,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new xl(e),s=new xl(r),a=[];for(let c of i.changes)for(let u of c.innerChanges??[]){let l=s.positionToOffset(u.modifiedRange.getStartPosition()),d=s.positionToOffset(u.modifiedRange.getEndPosition()),p=r.substring(l,d),f=o.positionToOffset(u.originalRange.getStartPosition()),m=o.positionToOffset(u.originalRange.getEndPosition()),h=new Nr(f,m);a.push(new Bi(h,p))}return new t(a)}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new Bi(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return YJe(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new Bi(Nr.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Nr.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[i];if(a)s?a.replaceRange.intersects(s.replaceRange)?i++:a.replaceRange.start<s.replaceRange.start?(r.push(new Bi(a.replaceRange.delta(o),a.newText)),i++):(n++,o+=s.newText.length-s.replaceRange.length):(r.push(new Bi(a.replaceRange.delta(o),a.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}convertOriginalOffsetToPostEditsOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}convertOriginalRangeToPostEditsRange(e){return new Nr(this.convertOriginalOffsetToPostEditsOffset(e.start),this.convertOriginalOffsetToPostEditsOffset(e.endExclusive))}convertPostEditsOffsetToOriginalOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},Bi=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static fromJson(e){return new t(Nr.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=PA(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,tne(r,this.newText)),o=new Nr(this.replaceRange.start+n,this.replaceRange.endExclusive-i),s=this.newText.substring(n,this.newText.length-i);return new t(o,s)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function YJe(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let s=i,a,c;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;a||(a=u),c=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!a)n.push(new Bi(o.replaceRange.delta(-i),o.newText));else{let u="",l=o.replaceRange.start-(a.replaceRange.start+s);l>0&&(u=a.newText.slice(0,l));let d=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(d>0){let m=new Bi(Nr.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-d));r.unshift(m),i-=m.newText.length-m.replaceRange.length}let p=u+o.newText,f=new Nr(Math.min(a.replaceRange.start,o.replaceRange.start-s),o.replaceRange.endExclusive-i);n.push(new Bi(f,p))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new co(n).normalize()}var K5=class extends hr{constructor(r,n,i){super();this._initialText=r;this._document=n;this._serviceAccessor=i;this._additionalEdits=co.empty;this._documentText=this._document.getText();let o=i.get(Ze);this._register(o.onDidChangeTextDocument(s=>{if(s.document.uri.toString()!==this._document.uri.toString())return;let a=co.from(s.contentChanges);this._additionalEdits=this._additionalEdits.compose(a)}))}async compute(){let r=this._serviceAccessor.get(US),n=await co.fromDiff(this._initialText,this._documentText,r);return{getEditsSinceInitial:()=>{if(this._store.isDisposed)throw new ln("EditComputer has been disposed");return n.compose(this._additionalEdits)}}}};var BS=class{constructor(e,r){this.initialText=e;this._diffService=r;this._document=new zQ(e)}addEdits(e){let r=QJe(e,this._document);this._document.apply(r)}getText(){return this._document.getValue()}async getEdits(){let e=this.getText();return await co.fromDiff(this.initialText,e,this._diffService)}};BS=fe([ie(1,US)],BS);function QJe(t,e){return new co(t.map(r=>{let n=e.positionToOffset(r.range.start),i=e.positionToOffset(r.range.end);return new Bi(new Nr(n,i),r.newText)}))}var zQ=class{constructor(e=""){this._converter=void 0;this._value="";this._value=e}getValue(){return this._value}apply(e){this._value=e.apply(this._value),this._converter=void 0}positionToOffset(e){return this._converter||(this._converter=new xl(this._value)),this._converter.positionToOffset(new $r(e.line+1,e.character+1))}};function MR(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}function LCe(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}function OCe(t){if(typeof t!="object"||t===null||!("details"in t))return!1;let{details:e}=t;return typeof e=="object"&&e!==null&&"type"in e&&"description"in e&&typeof e.type=="string"&&typeof e.description=="string"}function MCe(t){return typeof t=="object"&&!!t&&"title"in t&&"excerpt"in t&&"url"in t}var XJe="vscode-notebook-cell";function Yt(t){return t.scheme===XJe||t.scheme==="untitled"&&t.fragment.startsWith("notebook-chat-input")}var Xa=new class{constructor(){this.commands=new Set}registerCommand(t){this.commands.add(t)}getCommand(t,e){return this.getCommands(e).find(r=>r.commandId===t)}getCommands(t){return Array.from(this.commands.values()).filter(e=>e.locations.includes(t))}};function ep(t){return Yt(t)?t.path.endsWith(".ipynb"):!1}function FCe(t,e){return t.notebookDocuments.find(n=>n.uri.fsPath===e.fsPath)?.notebookType}var lIe=W(_r());var qS=class{constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},FR=class{constructor(e){this.lines=e}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.lines[r].trim();return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},Kg=class{static Assert(e,r){if(!e)throw new Error(r)}},Yg=class{static Copy(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}static Copy2(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}};var Y5=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new qS(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},Q5=class t{constructor(e,r){let[n,i]=t._getElements(e),[o,s]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=s,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let l;return n<=i?(Kg.Assert(e===r+1,"originalStart should only be one more than originalEnd"),l=[new qS(e,0,n,i-n+1)]):e<=r?(Kg.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),l=[new qS(e,r-e+1,n,0)]):(Kg.Assert(e===r+1,"originalStart should only be one more than originalEnd"),Kg.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),l=[]),l}let o=[0],s=[0],a=this.ComputeRecursionPoint(e,r,n,i,o,s),c=o[0],u=s[0];if(a!==null)return a;{let l=this.ComputeDiffRecursive(e,c,n,u),d=this.ComputeDiffRecursive(c+1,r,u+1,i);return this.ConcatenateChanges(l,d)}}WALKTRACE(e,r,n,i,o,s,a,c,u,l,d,p,f,m,h,g,v){let y=null,b=null,x=new Y5,S=r,T=n,L=f[0]-g[0]-i,M=-1073741824,j=this.m_forwardHistory.length-1;do{let N=L+e;N===S||N<T&&u[N-1]<u[N+1]?(d=u[N+1],m=d-L-i,d<M&&x.MarkNextChange(),M=d,x.AddModifiedElement(d+1,m),L=N+1-e):(d=u[N-1]+1,m=d-L-i,d<M&&x.MarkNextChange(),M=d-1,x.AddOriginalElement(d,m+1),L=N-1-e),j>=0&&(u=this.m_forwardHistory[j],e=u[0],S=1,T=u.length-1)}while(--j>=-1);y=x.getReverseChanges(),x=new Y5,S=s,T=a,L=f[0]-g[0]-c,M=1073741824,j=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let N=L+o;N===S||N<T&&l[N-1]>=l[N+1]?(d=l[N+1]-1,m=d-L-c,d>M&&x.MarkNextChange(),M=d+1,x.AddOriginalElement(d+1,m+1),L=N+1-o):(d=l[N-1],m=d-L-c,d>M&&x.MarkNextChange(),M=d,x.AddModifiedElement(d+1,m+1),L=N-1-o),j>=0&&(l=this.m_reverseHistory[j],o=l[0],S=1,T=l.length-1)}while(--j>=-1);return b=x.getChanges(),this.ConcatenateChanges(y,b)}ComputeRecursionPoint(e,r,n,i,o,s){let a=0,c=0,u=0,l=0,d=0,p=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=r-e+(i-n),m=f+1,h=new Int32Array(m),g=new Int32Array(m),v=i-n,y=r-e,b=e-n,x=r-i,T=(y-v)%2===0;h[v]=e,g[y]=r;for(let L=1;L<=f/2+1;L++){let M=0,j=0;u=this.ClipDiagonalBound(v-L,L,v,m),l=this.ClipDiagonalBound(v+L,L,v,m);for(let N=u;N<=l;N+=2){N===u||N<l&&h[N-1]<h[N+1]?a=h[N+1]:a=h[N-1]+1,c=a-(N-v)-b;let J=a;for(;a<r&&c<i&&this.ElementsAreEqual(a+1,c+1);)a++,c++;if(h[N]=a,a+c>M+j&&(M=a,j=c),!T&&Math.abs(N-y)<=L-1&&a>=g[N])return o[0]=a,s[0]=c,J<=g[N]&&1447>0&&L<=1448?this.WALKTRACE(v,u,l,b,y,d,p,x,h,g,a,r,o,c,i,s,T):null}d=this.ClipDiagonalBound(y-L,L,y,m),p=this.ClipDiagonalBound(y+L,L,y,m);for(let N=d;N<=p;N+=2){N===d||N<p&&g[N-1]>=g[N+1]?a=g[N+1]-1:a=g[N-1],c=a-(N-y)-x;let J=a;for(;a>e&&c>n&&this.ElementsAreEqual(a,c);)a--,c--;if(g[N]=a,T&&Math.abs(N-v)<=L&&a<=h[N])return o[0]=a,s[0]=c,J>=h[N]&&1447>0&&L<=1448?this.WALKTRACE(v,u,l,b,y,d,p,x,h,g,a,r,o,c,i,s,T):null}if(L<=1447){let N=new Int32Array(l-u+2);N[0]=v-u+1,Yg.Copy2(h,u,N,1,l-u+1),this.m_forwardHistory.push(N),N=new Int32Array(p-d+2),N[0]=y-d+1,Yg.Copy2(g,d,N,1,p-d+1),this.m_reverseHistory.push(N)}}return this.WALKTRACE(v,u,l,b,y,d,p,x,h,g,a,r,o,c,i,s,T)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return Yg.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Yg.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return Yg.Copy(e,0,i,0,e.length),Yg.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(Kg.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),Kg.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(a=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new qS(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=r%2===0;if(e<0){let c=o%2===0;return a===c?0:1}else{let c=s%2===0;return a===c?i-1:i-2}}};function qCe(t,e){let r=t.getText().split(/\r|\n|\r\n/g),n=e||{tabSize:4},i={getLineCount:()=>r.length,getLineContent:o=>r[o-1],getOptions:()=>n};try{let o=ZJe(i,t.languageId),[s]=HCe(t,o,void 0);return s.adjust(t,GCe(t.languageId)),s.toOverlayNode(t,!0)}catch{return new X5(1,t.lineCount,[]).toOverlayNode(t,!0)}}function HCe(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.lineCount:e.getEndLineNumber(r),o=[],s=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let a=e.getStartLineNumber(r),c=e.getEndLineNumber(r);if(a>i||c>i)break;let u=s;if([s,r]=HCe(t,e,r),u&&s.startLineNumber<=u.endLineNumber)throw new ln("Invalid Folding Ranges: overlapping children");if(s.startLineNumber<n)throw new ln("Invalid Folding Ranges: child starts before parent");o.push(s)}return[new X5(n,i,o),r]}var X5=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new ln("Invalid Folding Ranges: startLineNumber > endLineNumber")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.lineCount)}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.lineAt(this.endLineNumber).text.trim();/^[\}\]\)];?$/.test(n)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let s=i;s<o.startLineNumber;s++){let a=UCe(e,s);a&&n.push(a)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let s=UCe(e,o);s&&n.push(s)}return JJe(e,this.startLineNumber,this.endLineNumber,n)}};function UCe(t,e){let r=t.lineAt(e-1);if(r.isEmptyOrWhitespace)return null;let n=t.offsetAt(r.range.start),i=t.offsetAt(r.range.end);return new Vm(n,i,"LINE",[])}function JJe(t,e,r,n){let i=t.offsetAt(new jn(e-1,0)),o=t.offsetAt(new jn(r-1,t.lineAt(r-1).text.length));return new Vm(i,o,"FOLD",n)}function ZJe(t,e){return eZe(t,GCe(e))}function GCe(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}function eZe(t,e){let r=t.getOptions().tabSize,n=new VQ,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let s=t.getLineCount();s>0;s--){let a=t.getLineContent(s),c=rZe(a,r),u=i[i.length-1];if(c===-1){e&&(u.endAbove=s);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let l=u.endAbove-1;l-s>=1&&n.insertFirst(s,l,c)}u.indent===c?u.endAbove=s:i.push({indent:c,endAbove:s,line:s})}return n.toIndentRanges()}var tZe=65535,ib=16777215,BCe=4278190080,VQ=class{constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>ib||r>ib)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new $Q(e,r)}};function rZe(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}var $Q=class{constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=(n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i};for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],s=this._endIndexes[n];if(o>ib||s>ib)throw new Error("startLineNumber or endLineNumber must not exceed "+ib);for(;e.length>0&&!r(o,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((a&255)<<24),this._endIndexes[n]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&ib}getEndLineNumber(e){return this._endIndexes[e]&ib}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&BCe)>>>24)+((this._endIndexes[e]&BCe)>>>16);return r===tZe?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};async function jCe(t,e,r,n){let i=t.get(xt),o=i.getTreeSitterAST(e);if(!o)return[];let s=t.get(hi),a=Ki(r,e),c=await ua(t,e,n,()=>o.getCallExpressions(a),[]);async function u(m){let h=e.positionAt(m.startIndex);try{let g=await s.getImplementations(e.uri,h);return g.length?g:await s.getDefinitions(e.uri,h)}catch{return[]}}let l=await ua(t,e,n*3,()=>Promise.all(c.map(u)),[]),d=[];for(let m=0;m<l.length;m++){let h=c[m],g=l[m];for(let v of g){let{uri:y,range:b}=Op(v)?{uri:v.targetUri,range:v.targetRange}:v,x=await t.get(Ze).openTextDocument(y),S=i.getTreeSitterAST(x);if(S){let L=(await S.getFunctionDefinitions()).find(M=>M.identifier===h.identifier);if(L){let M=Ki(b,x);d.push({uri:y,range:b,version:x.version,identifier:h.identifier,startIndex:M.startIndex,endIndex:M.endIndex,text:L.text})}}}}if(d.length!==0)return d;let p=await ua(t,e,n,()=>o.getFunctionDefinitions(),[]),f=[];for(let m of p)for(let h of c)m.identifier===h.identifier&&f.push(m);return f.sort((m,h)=>m.startIndex-h.startIndex)}async function zCe(t,e,r,n){let i=t.get(xt),o=i.getTreeSitterAST(e);if(!o)return[];let s=t.get(hi),a=Ki(r,e),c=await ua(t,e,n,()=>o.getClassReferences(a),[]),u=await ua(t,e,n*3,async()=>await Promise.all(c.map(async f=>{try{let m=e.positionAt(f.startIndex),h=await s.getImplementations(e.uri,m);return h.length?h:await s.getDefinitions(e.uri,m)}catch{return[]}})),[]),l=[];for(let f=0;f<u.length;f++){let m=c[f],h=u[f];for(let g of h){let{uri:v,range:y}=Op(g)?{uri:g.targetUri,range:g.targetRange}:g,b=await t.get(Ze).openTextDocument(v),x=i.getTreeSitterAST(b);if(x){let S=(await x.getClassDeclarations()).find(T=>T.identifier===m.identifier);if(S){let T=Ki(y,b);l.push({uri:v,range:y,version:b.version,identifier:m.identifier,startIndex:T.startIndex,endIndex:T.endIndex,text:S.text})}}}}if(l.length!==0)return l;let d=await ua(t,e,n,()=>o.getClassDeclarations(),[]),p=[];for(let f of d)for(let m of c)f.identifier===m.identifier&&p.push(f);return p.sort((f,m)=>f.startIndex-m.startIndex)}async function VCe(t,e,r,n){let o=t.get(xt).getTreeSitterAST(e);if(!o)return[];let s=Ki(r,e),a=await ua(t,e,n,()=>o.getTypeReferences(s),[]),c=await ua(t,e,n,()=>o.getTypeDeclarations(),[]),u=[];for(let l of c)for(let d of a)l.identifier===d.identifier&&u.push(l);return u.sort((l,d)=>l.startIndex-d.startIndex)}function nZe(t,e){return e===0?t.then(r=>({type:"success",value:r})):new Promise((r,n)=>{let i=setTimeout(()=>r({type:"timeout"}),e);t.then(o=>{clearTimeout(i),r({type:"success",value:o})}).catch(o=>{clearTimeout(i),n(o)})})}async function $Ce(t,e,r){let i=t.get(xt).getTreeSitterAST(e);if(!i)return[];let o=await ua(t,e,r,()=>i.getFunctionBodies(),[]);return o.sort((s,a)=>s.startIndex-a.startIndex),iZe(o)}function iZe(t){t.sort((r,n)=>r.startIndex-n.startIndex||n.endIndex-r.endIndex);let e=[];for(let r=0,n=t.length;r<n;){e.push(t[r]);let i=r+1;for(;i<t.length&&Yi.doesContain(t[r],t[i]);)++i;r=i}return e}async function ua(t,e,r,n,i){let o=t.get(ue).getLogger("asyncCompute");try{let s=await nZe(WCe(e,n,i),r);return s.type==="success"?s.value:(o.info(`Computing async parser based result took longer than ${r}ms`),i)}catch(s){return s instanceof PP||(o.exception(s,"Failed to compute async parser based result"),t.get(Ee).sendGHTelemetryException(s,"Failed to compute async parser based result")),i}}async function WCe(t,e,r,n=0){let i=t.version,o=await e();return t.version!==i?n<3?WCe(t,e,r,n+1):r:o}var Fs=class t{static forDocument(e,r){return this.forUri(e,r.uri)}static forUri(e,r){return`${this.forLanguage(e)}: ${r.path}`}static forLanguage(e){return`${e.lineComment.start} FILEPATH`}static testLine(e,r){let n=t.forLanguage(e);return r.trimStart().startsWith(n)}};var cs=class{static begin(e,r){return typeof r>"u"?`${e.lineComment.start} BEGIN:`:`${e.lineComment.start} BEGIN: ${r}`}static end(e,r){return typeof r>"u"?`${e.lineComment.start} END:`:`${e.lineComment.start} END: ${r}`}};function ob(t){return/(^|\n)```[\s\S]+\n```/m.test(t)}function KCe(t){return t.split("```",1)[0].match(/^.+/)?.[0]??""}async function YCe(t,e,r){let i=await t.getTreeSitterAST(e)?.getStructure();return i||qCe(e,r)}var us=class extends bu{constructor(r,n){super();this.wholeRange=r;this.contextInfo=n}};(e=>{function t(r){return r instanceof e}e.is=t})(us||={});var WQ=class{constructor(){this.spacesDiff=0;this.looksLikeAlignment=!1}};function oZe(t,e,r,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let p=t.charCodeAt(o),f=r.charCodeAt(o);if(p!==f)break}let s=0,a=0;for(let p=o;p<e;p++)t.charCodeAt(p)===32?s++:a++;let c=0,u=0;for(let p=o;p<n;p++)r.charCodeAt(p)===32?c++:u++;if(s>0&&a>0||c>0&&u>0)return;let l=Math.abs(a-u),d=Math.abs(s-c);if(l===0){i.spacesDiff=d,d>0&&0<=c-1&&c-1<t.length&&c<r.length&&r.charCodeAt(c)!==32&&t.charCodeAt(c-1)===32&&t.charCodeAt(t.length-1)===44&&(i.looksLikeAlignment=!0);return}if(d%l===0){i.spacesDiff=d/l;return}}function sb(t,e,r){let n=Math.min(t.length,1e4),i=0,o=0,s="",a=0,c=[2,4,6,8,3,5,7],u=8,l=[0,0,0,0,0,0,0,0,0],d=new WQ;for(let m=0;m<n;m++){let h=t[m],g=h.length,v=!1,y=0,b=0,x=0;for(let T=0,L=g;T<L;T++){let M=h.charCodeAt(T);if(M===9)x++;else if(M===32)b++;else{v=!0,y=T;break}}if(!v||(x>0?i++:b>1&&o++,oZe(s,a,h,y,d),d.looksLikeAlignment&&!(r&&e===d.spacesDiff)))continue;let S=d.spacesDiff;S<=u&&l[S]++,s=h,a=y}let p=r;i!==o&&(p=i<o);let f=e;if(p){let m=p?0:.1*n;c.forEach(h=>{let g=l[h];g>m&&(m=g,f=h)}),f===4&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(f=2)}return{insertSpaces:p,tabSize:f}}function sZe(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?~r:r}function J5(t,e){let r=sZe(t,e);return r<0?Math.floor(~r/e):Math.floor(r/e)}function aZe(t,e){return t+e-t%e}function cZe(t,e,r){let n=0;for(let o=0;o<t.length;o++)t.charAt(o)==="	"?n=aZe(n,e):n++;let i="";if(!r){let o=Math.floor(n/e);n=n%e;for(let s=0;s<o;s++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}function KQ(t,e,r){let n=Jre(t);return n===-1&&(n=t.length),cZe(t.substring(0,n),e,r)+t.substring(n)}var Su=class{constructor(e,r,n,i="",o=`
`){this.firstLineIndex=e;this.endLineIndex=r;this.lines=n;this.prefix=i;this.suffix=o}toTextEdit(){let e=this.lines.length>0?this.prefix+this.lines.join(`
`)+this.suffix:"";return Jn.replace(new Xe(this.firstLineIndex,0,this.endLineIndex,0),e)}},GS;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t;function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e})(GS||={});var Qg=class t{constructor(e,r){this.text=e;this.languageId=r}static fromDocumentContext(e){return new t(e.document.getText(),e.language.languageId)}};function Xf(t,e,r,n,i,o){let s=GS.fromString(r);if(s.length===e.range.lines.length&&e.range.lines.every((d,p)=>d===s[p]))return[];let a=[],c=!1;for(let d of s){let p=Z5(e,d);p===null?a.push(d):(p.type==="fakestart"||p.type==="fakend")&&(c=!0)}let u;if(n===4)u=new Su(e.range.lastLineIndex,e.range.lastLineIndex,s);else{let d=dZe(e,s,i),p=yZe(t,e,a,i);if(!d)u=p;else if(!p)u=d;else{let f=QCe(d);QCe(p)<f?u=p:u=d}u||(u=lZe(t,e,n,i,c,a))}o&&(u=uZe(o,u,i));let l=[u];return o&&(l=pZe(o,l)),l.map(d=>d.toTextEdit())}function uZe(t,e,r){let n=t.text.split(/\r\n|\r|\n/g),i=n.slice(0,e.firstLineIndex),o=n.slice(e.endLineIndex),s=e.lines.slice(0),[,a]=JCe(i,s);a>0&&s.splice(0,a),a>0&&(s=Xg(s,{whichLine:"bottomMost",lines:i.slice(i.length-a)},r).slice(0));let[c]=JCe(s,o);return c>0&&s.splice(s.length-c,c),new Su(e.firstLineIndex,e.endLineIndex,s)}function lZe(t,e,r,n,i,o){let s=t.get(ue).getLogger("editGeneration");return i?(s.info("(case 6) Appending to selected code"),ZCe(e.range,o,n)):r===3?(s.info("(case 7) Appending to selected code"),ZCe(e.range,o,n)):r===1?(s.info("(case 8) Prepending to selected code"),SZe(e.range,Xg(o,e.range.lines.filter(a=>a.trim()!=="").length>0?{whichLine:"topMost",lines:e.range.lines}:{whichLine:"bottomMost",lines:e.above.lines},n))):(s.info("(Default) Replacing selected code"),tp(e.range,o,n))}function QCe(t){let e=t.endLineIndex-t.firstLineIndex,r=t.lines.length;return e+r}function dZe(t,e,r){let n=null,i=[];for(let o of e){let s=Z5(t,o);if(s===null){i.push(o);continue}if(n){if(s.type==="end"&&s.endMarker===n)return tp(n,i,r);if(s.type==="end"&&n===t.above&&s.endMarker===t.range){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),tp(a,i,r)}if(s.type==="end"&&n===t.above&&s.endMarker===t.below){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),a.mergeFromBelow(t.below.clone()),tp(a,i,r)}}else s.type==="start"&&(n=s.startMarker,i=[])}if(i.length>0&&n)return tp(n,i,r)}function pZe(t,e){let r=[],n=t.text.split(/\r\n|\r|\n/g),i=fZe(n,a=>HS(a,t.languageId)),o=[];for(let a of e){if(a.endLineIndex<=i+1)return e;let c=!1,u=[],l=a.lines;for(let d of l)HS(d,t.languageId)?(o.push(QQ(d)),c=!0):c&&d.length===0||(u.push(d),c=!1);if(!c&&u.length>0){if(a.firstLineIndex<i+1)return e;r.push(new Su(a.firstLineIndex,a.endLineIndex,u))}}if(o.length===0)return e;let s=i+1;return r.unshift(new Su(s,s,o)),r}function fZe(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}function QQ(t){return t.replace(/^\s+/g,"")}function HS(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"javascript":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}var mZe=/^(\t+)/,YQ=new Map;function hZe(t){return YQ.has(t)||YQ.set(t,new RegExp(`^(( {${t}})+)`)),YQ.get(t)}function XQ(t,e,r){let n=e?hZe(r):mZe,i=t.match(n);return i?[i[0],i[0].length/(e?r:1)]:["",0]}function gZe(t){let{insertSpaces:e,tabSize:r}=sb(t,4,!1),n=Number.MAX_VALUE;for(let i of t){if(/^\s*$/.test(i))continue;let[,o]=XQ(i,e,r);n=Math.min(n,o)}return{insertSpaces:e,tabSize:r,minIndentLevel:n}}function XCe(t,e){if(e===0)return"";if(t===" ")switch(e){case 2:return"  ";case 4:return"    ";case 8:return"        ";case 12:return"            "}if(t==="	")switch(e){case 1:return"	";case 2:return"		";case 3:return"			"}return new Array(e).fill(t).join("")}function vZe(t,e){let r=t.lines,n;if(t.whichLine==="topMost")n=r.find(i=>i!=="");else for(let i=r.length-1;i>=0;--i)if(r[i]!==""){n=r[i];break}return n===void 0?0:XQ(n,e.insertSpaces,e.tabSize)[1]}function Xg(t,e,r){if(r===void 0)return t;let n=vZe(e,r),i=gZe(t),o=r.insertSpaces?XCe(" ",r.tabSize):"	";return t.map(s=>{if(s==="")return"";{let[a,c]=XQ(s,i.insertSpaces,i.tabSize),u=s.substring(a.length);return XCe(o,n+(c-i.minIndentLevel))+u}})}function Z5(t,e){switch(e){case t.above.startMarker:return{type:"start",startMarker:t.above};case t.above.endMarker:return{type:"end",endMarker:t.above};case t.range.startMarker:return{type:"start",startMarker:t.range};case t.range.endMarker:return{type:"end",endMarker:t.range};case t.below.startMarker:return{type:"start",startMarker:t.below};case t.below.endMarker:return{type:"end",endMarker:t.below}}return e.trimStart().startsWith(cs.begin(t.language))?{type:"fakestart"}:e.trimStart().startsWith(cs.end(t.language))?{type:"fakend"}:null}function yZe(t,e,r,n){let i=(f,m,h)=>{let g=0;for(let x of f)for(let S=x.originalStart;S<x.originalStart+x.originalLength;S++){let T=m.lines[S];g+=T.length}let v=m.getCharCount(),y=h.getCharCount(),b=v-g;return{equalCharCount:b,originalCharCount:v,modifiedCharCount:y,originalCharRatio:v>0?b/v:0,modifiedCharRatio:y>0?b/y:0}},o=f=>{let m=new FR(f.lines),h=new FR(r),v=new Q5(m,h).ComputeDiff();return i(v,m,h)},s=e.range.clone();s.mergeFromAbove(e.above.clone()),s.mergeFromBelow(e.below.clone());let a=o(s),c=o(e.range),u={diffToEntireScore:a,diffToRangeScore:c},l=t.get(ue).getLogger("editGeneration");if(l.info(`Diff metrics: ${JSON.stringify(u,null,"	")}`),a.originalCharCount>30&&a.originalCharRatio>.7)return l.info("(case 1) Replacing entire code"),tp(s,r,n);if(c.originalCharCount>20&&c.originalCharRatio>.7)return l.info("(case 2) Replacing selected code"),tp(e.range,r,n);let d=Math.min(a.originalCharRatio,a.modifiedCharRatio),p=Math.min(c.originalCharRatio,c.modifiedCharRatio);if(d>.2&&d>p)return l.info("(case 3) Replacing entire code"),tp(s,r,n);if(p>.2)return l.info("(case 4) Replacing selected code"),tp(e.range,r,n);if(!e.range.hasContent)return l.info("(case 5) Replacing empty selected code"),tp(e.range,r,n,{whichLine:"bottomMost",lines:e.above.lines})}function tp(t,e,r,n){let o=Xg(e,n??{whichLine:"topMost",lines:t.lines},r).slice(0),s=t.lines.slice(0),a=t.firstLineIndex,c=t.lastLineIndex;if(s.length===1&&s[0]==="")return new Su(c,c,o);let u=bZe(s,o);if(a+=u,s.splice(0,u),o.splice(0,u),s.length===0)return new Su(c+1,c+1,o);let l=_Ze(s,o);return c-=l,s.splice(s.length-l,l),o.splice(o.length-l,l),s.length===0?new Su(a,a,o):new Su(a,c+1,o)}function bZe(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[n]!==e[n])return n;return r}function _Ze(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[t.length-1-n]!==e[e.length-1-n])return n;return r}function JCe(t,e){let r=t.filter(a=>!/^\s*$/.test(a)),n=e.filter(a=>!/^\s*$/.test(a)),i=xZe(r,n);if(i===0)return[0,0];let o=0;for(let a=0;a<i;a++)for(o++;/^\s*$/.test(t[t.length-o]);)o++;let s=0;for(let a=0;a<i;a++)for(s++;/^\s*$/.test(e[s]);)s++;return[o,s]}function xZe(t,e){for(let r=Math.min(t.length,e.length);r>0;r--){let n=t.length-r,i=!0;for(let o=0;o<r;o++)if(t[n+o]!==e[o]){i=!1;break}if(i)return r}return 0}function SZe(t,e){return new Su(t.firstLineIndex,t.firstLineIndex,e)}function ZCe(t,e,r){let n=Xg(e,{whichLine:"bottomMost",lines:t.lines},r),i=t.lastLineIndex+1;return new Su(i,i,n)}function Jg(t,e,r,n){return{type:"inlineEdit",edits:t,newWholeRange:e,content:r,followUp:n}}function ab(t,e,r){let n=EZe(t,e);if(!n)return null;let{code:i,contentBeforeCode:o,language:s}=n;if(Fs.testLine(r,i)){let a=i.indexOf(`
`);i=i.substring(a).trim()}return{code:i,contentBeforeCode:o,language:s}}function EZe(t,e){e=e.trim();let n=Ya(e).at(0);if(n){let c=wA(e);return{code:n.code,contentBeforeCode:c.slice(0,n.startLine).join(`
`).trimEnd(),language:n.language}}let i=e.split(/\r\n|\r|\n/g),o=!1,s=[],a=[];for(let c of i){let u=Z5(t,c);if(o){if(u)return a.push(c),{code:a.join(`
`),contentBeforeCode:s.join(`
`),language:""};a.push(c)}else u?(o=!0,a.push(c)):s.push(c)}return null}var zS=class{constructor(e,r,n,i,o=!0,s=on.createCodeBlockFilter()){this.myDocument=e;this.initialSelection=r;this.adjustedSelection=n;this.editStrategy=i;this.collectImports=o;this.lineFilter=s;this.replyIndentationTracker=null}async processStream(e){let r=ZQ(e);r=r.filter(this.lineFilter),this.collectImports&&(r=eX(r,this.myDocument));let n=this.myDocument.firstSentLineIndex;for await(let i of this.findInitialAnchor(r))typeof i!="string"?n=this.handleFirstReplyLine(i.anchor,i.line):n=this.handleSubsequentReplyLine(n,i);return this.myDocument.didReplaceEdits&&n<=this.adjustedSelection.end.line&&this.myDocument.deleteLines(n,this.adjustedSelection.end.line),new UR(this.myDocument.didEdits,this.myDocument.additionalImports)}handleFirstReplyLine(e,r){if(e){this.replyIndentationTracker=new VS(this.myDocument,e.lineIndex,r);let o=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);return this.myDocument.getLine(e.lineIndex).sentInCodeBlock===2?this.myDocument.replaceLines(this.adjustedSelection.start.line,e.lineIndex,o):this.myDocument.replaceLine(e.lineIndex,o)}let n=this.adjustedSelection.start.line;this.replyIndentationTracker=new VS(this.myDocument,n,r);let i=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);if(this.initialSelection.isEmpty){let o=this.myDocument.getLine(n).content;if(/^\s*$/.test(o)||i.adjustedContent.startsWith(o))return this.myDocument.replaceLine(n,i,!0)}return this.editStrategy===1?this.myDocument.insertLineBefore(n,i):this.editStrategy===3||this.editStrategy===4?this.myDocument.insertLineAfter(n,i):this.myDocument.replaceLine(n,i)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);if(n.trimmedContent!==""||this.myDocument.didReplaceEdits){let o=this.matchReplyLine(n,e);if(o)return this.myDocument.replaceLines(e,o.lineIndex,n)}if(e>=this.myDocument.getLineCount())return this.myDocument.appendLineAtEndOfDocument(n);let i=this.myDocument.getLine(e);return!i.isSent||i.content===""||n.trimmedContent===""?this.myDocument.insertLineBefore(e,n):i.indentLevel<n.adjustedIndentLevel?this.myDocument.insertLineBefore(e,n):i.indentLevel===n.adjustedIndentLevel&&!this.myDocument.didReplaceEdits?this.myDocument.insertLineBefore(e,n):this.myDocument.replaceLine(e,n)}matchReplyLine(e,r){let n=e.trimmedContent.length<=3;for(let i=r;i<this.myDocument.getLineCount();i++){let o=this.myDocument.getLine(i);if(o.isSent){if(o.normalizedContent===e.adjustedContent)return new n6(i);if(o.trimmedContent.length>0&&o.indentLevel<e.adjustedIndentLevel||n&&o.trimmedContent.length>0)return null}}return null}findInitialAnchor(e){return new Uu(async r=>{let n=[],i=0,o=!1;for await(let s of e)if(o)r.emitOne(s);else if(n.push(s),i+=s.trim().length,i>10){let a=this.searchForEqualSentLines(n);o=!0,r.emitOne(new JQ(n[0],a)),r.emitMany(n.slice(1))}})}searchForEqualSentLines(e){let r=e.map(n=>n.trim());for(let n=this.myDocument.firstSentLineIndex,i=this.myDocument.getLineCount()-e.length;n<=i;n++){if(!this.myDocument.getLine(n).isSent)continue;let o=!0;for(let s=0;s<r.length;s++){let a=this.myDocument.getLine(n+s);if(!a.isSent||a.trimmedContent!==r[s]){o=!1;break}}if(o)return new n6(n)}return null}},e6=class{constructor(e,r,n=on.createCodeBlockFilter()){this._myDocument=e;this._cursorPosition=r;this._lineFilter=n;this.replyIndentationTracker=null}async processStream(e){let r=ZQ(e);r=r.filter(this._lineFilter),r=eX(r,this._myDocument);let n=0;for await(let i of r)this.replyIndentationTracker?n=this.handleSubsequentReplyLine(n,i):n=this.handleFirstReplyLine(i);return new UR(this._myDocument.didEdits,this._myDocument.additionalImports)}handleFirstReplyLine(e){let r=this._cursorPosition.line;this.replyIndentationTracker=new VS(this._myDocument,r,e);let n=this.replyIndentationTracker.reindent(e,this._myDocument.indentStyle),i=this._myDocument.getLine(r).content;return/^\s*$/.test(i)||n.adjustedContent.startsWith(i)?this._myDocument.replaceLine(r,n,!0):this._myDocument.insertLineAfter(r,n)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this._myDocument.indentStyle);return this._myDocument.insertLineBefore(e,n)}},t6=class{constructor(e,r,n=on.createCodeBlockFilter()){this._myDocument=e;this._selection=r;this._lineFilter=n;this.replyIndentationTracker=null}async processStream(e){let r=ZQ(e);r=r.filter(this._lineFilter),r=eX(r,this._myDocument);let n=0,i,o="";this._selection.end.line>this._selection.start.line&&this._selection.end.character===0?i=this._selection.end.line-this._selection.start.line:(i=this._selection.end.line-this._selection.start.line+1,o=this._myDocument.getLine(this._selection.end.line).content.substring(this._selection.end.character));for await(let s of r)if(this.replyIndentationTracker){let a=this.replyIndentationTracker.reindent(s,this._myDocument.indentStyle);i>0?(n=this._myDocument.replaceLine(n,a),i--):n=this._myDocument.insertLineAfter(n-1,a)}else{let a=this._selection.start.line;this.replyIndentationTracker=new VS(this._myDocument,a,s);let c=this.replyIndentationTracker.reindent(s,this._myDocument.indentStyle);n=this._myDocument.replaceLine(a,c),i--}return this._myDocument.didEdits&&i>0&&this._myDocument.deleteLines(n,n+i-1),this._myDocument.didEdits&&o.length>0&&this._myDocument.replaceLine(n-1,this._myDocument.getLine(n-1).content+o),new UR(this._myDocument.didEdits,this._myDocument.additionalImports)}},UR=class{constructor(e,r){this.didEdits=e;this.additionalImports=r}},VS=class{constructor(e,r,n){let i=0;for(let s=r;s>=0;s--){let a=e.getLine(s);if(a.content.length>0){i=a.indentLevel,s!==r&&a.content.endsWith("{")&&(i+=1);break}}this._replyIndentStyle=jS.guessIndentStyleFromLine(n);let o=J5(n,this._replyIndentStyle?.tabSize??4);this.indentDelta=o-i}reindent(e,r){if(e==="")return new r6("",0,"",0);this._replyIndentStyle||(this._replyIndentStyle=jS.guessIndentStyleFromLine(e));let n=0,i=0,o=a=>(n=a,i=Math.max(n-this.indentDelta,0),i),s=jS.reindentLine(e,this._replyIndentStyle??{insertSpaces:!0,tabSize:4},r,o);return new r6(e,n,s,i)}},JQ=class{constructor(e,r){this.line=e;this.anchor=r}},$S=class{constructor(e,r){this.lineIndex=e;this.sentInCodeBlock=r}},WS=class{constructor(e,r){this.startLineIndex=e;this.endLineIndex=r}},KS=class{constructor(e,r,n,i,o,s,a){this.progress=e;this.uri=r;this.languageId=s;this._originalLines=[];this.lines=[];this._didEdits=!1;this._didReplaceEdits=!1;this._additionalImports=[];this.indentStyle=jS.getDocumentIndentStyle(n,a),this._originalLines=n.split(/\r\n|\r|\n/g);for(let c=0;c<this._originalLines.length;c++)this.lines[c]=new Zg(this._originalLines[c],this.indentStyle);this.firstSentLineIndex=Number.MAX_SAFE_INTEGER;for(let c of i)this.lines[c.lineIndex].markSent(c.sentInCodeBlock),this.firstSentLineIndex=Math.min(this.firstSentLineIndex,c.lineIndex);this.firstSentLineIndex=Math.min(this.firstSentLineIndex,o.startLineIndex)}get didEdits(){return this._didEdits}get didReplaceEdits(){return this._didReplaceEdits}get additionalImports(){return this._additionalImports}getText(){return this.lines.map(e=>e.content).join(`
`)}getLineCount(){return this.lines.length}getLine(e){if(e<0||e>=this.lines.length)throw new Error("Invalid index");return this.lines[e]}addAdditionalImport(e){this._additionalImports.push(e)}replaceLine(e,r,n=!1){let i=typeof r=="string"?r:r.adjustedContent;return this.lines[e]=new Zg(i,this.indentStyle),this.progress.report(new $s(this.uri,[new Jn(new Xe(e,0,e,1073741824),i)])),this._didEdits=!0,this._didReplaceEdits=this._didReplaceEdits||!n,e+1}replaceLines(e,r,n){if(e>r)throw new Error("Invalid range");return e===r?this.replaceLine(e,n):(this.lines.splice(e,r-e+1,new Zg(n.adjustedContent,this.indentStyle)),this.progress.report(new $s(this.uri,[new Jn(new Xe(e,0,r,1073741824),n.adjustedContent)])),this._didEdits=!0,this._didReplaceEdits=!0,e+1)}appendLineAtEndOfDocument(e){return this.lines.push(new Zg(e.adjustedContent,this.indentStyle)),this.progress.report(new $s(this.uri,[new Jn(new Xe(this.lines.length-1,1073741824,this.lines.length-1,1073741824),`
`+e.adjustedContent)])),this._didEdits=!0,this.lines.length}insertLineAfter(e,r){return this.lines.splice(e+1,0,new Zg(r.adjustedContent,this.indentStyle)),this.progress.report(new $s(this.uri,[new Jn(new Xe(e,1073741824,e,1073741824),`
`+r.adjustedContent)])),this._didEdits=!0,e+2}insertLineBefore(e,r){return e===this.lines.length?this.insertLineAfter(e-1,r):(this.lines.splice(e,0,new Zg(r.adjustedContent,this.indentStyle)),this.progress.report(new $s(this.uri,[new Jn(new Xe(e,0,e,0),r.adjustedContent+`
`)])),this._didEdits=!0,e+1)}deleteLines(e,r){return this.lines.splice(e,r-e+1),this.progress.report(new $s(this.uri,[new Jn(new Xe(e,0,r+1,0),"")])),this._didEdits=!0,this._didReplaceEdits=!0,e+1}},r6=class{constructor(e,r,n,i){this.originalContent=e;this.originalIndentLevel=r;this.adjustedContent=n;this.adjustedIndentLevel=i;this.trimmedContent=this.originalContent.trim()}},n6=class{constructor(e){this.lineIndex=e}};var Zg=class{constructor(e,r){this.content=e;this._indentStyle=r;this._sentInCodeBlock=0;this._trimmedContent=null;this._normalizedContent=null;this._indentLevel=-1}get isSent(){return this._sentInCodeBlock!==0}get sentInCodeBlock(){return this._sentInCodeBlock}get trimmedContent(){return this._trimmedContent===null&&(this._trimmedContent=this.content.trim()),this._trimmedContent}get normalizedContent(){return this._normalizedContent===null&&(this._normalizedContent=KQ(this.content,this._indentStyle.tabSize,this._indentStyle.insertSpaces)),this._normalizedContent}get indentLevel(){return this._indentLevel===-1&&(this._indentLevel=J5(this.content,this._indentStyle.tabSize)),this._indentLevel}markSent(e){this._sentInCodeBlock=e}},jS=class t{static getDocumentIndentStyle(e,r){return r||sb(GS.fromString(e),4,!1)}static guessIndentStyleFromLine(e){let r=t._getLeadingWhitespace(e);if(!(r===""||r===" "))return sb([e],4,!1)}static reindentLine(e,r,n,i=o=>o){let o=J5(e,r.tabSize),s=i(o);for(;o>0;)e=this._outdent(e,r),o--;for(;o<s;)e="	"+e,o++;return KQ(e,n.tabSize,n.insertSpaces)}static _outdent(e,r){let n=0;for(;n<e.length;){let i=e.charCodeAt(n);if(i===9){n++;break}if(i!==32||n===r.tabSize)break;n++}return e.substring(n)}static _getLeadingWhitespace(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n!==32&&n!==9)return e.substring(0,r)}return e}};function eIe(t){return new Uu(async e=>{let r;(a=>(a[a.BeforeCodeBlock=0]="BeforeCodeBlock",a[a.InCodeBlock=1]="InCodeBlock",a[a.AfterCodeBlock=2]="AfterCodeBlock"))(r||={});let n=0;for await(let i of t){if(n===0){if(/^```/.test(i)){n=1,e.emitOne({value:i,kind:2});continue}}else n===1&&/^```/.test(i)&&(n=2);e.emitOne({value:i,kind:n===1?1:2})}})}var on=class{static combine(...e){return r=>e.every(n=>n?n(r):!0)}static{this.noop=()=>!0}static createCodeBlockFilter(){let e;(s=>(s[s.BeforeCodeBlock=0]="BeforeCodeBlock",s[s.InCodeBlock=1]="InCodeBlock",s[s.AfterCodeBlock=2]="AfterCodeBlock"))(e||={});let r=0;return n=>r===0?(/^```/.test(n)&&(r=1),!1):r===1?/^```/.test(n)?(r=2,!1):!0:!1}static createFencedBlockFilter(e){let r;(a=>(a[a.BeforeCodeBlock=0]="BeforeCodeBlock",a[a.InCodeBlock=1]="InCodeBlock",a[a.AfterCodeBlock=2]="AfterCodeBlock"))(r||={});let n=0;return i=>n===0?(i.startsWith(e)&&(n=1),!1):n===1?i.startsWith(e)?(n=2,!1):!0:!1}static createCodeMarkerRemovingFilter(e){let r=cs.begin(e),n=cs.end(e),i=!0,o=!1;return s=>i&&Fs.testLine(e,s)?(i=!1,!1):!o&&/^\s*$/.test(s)||s.startsWith(r)||s.startsWith(n)?!1:(o=!0,!0)}};function ZQ(t){return new Uu(async e=>{let r="";for await(let n of t){r+=n;do{let i=r.indexOf(`
`);if(i===-1)break;let o=r.substring(0,i);r=r.substring(i+1),e.emitOne(o)}while(!0)}r.length>0&&e.emitOne(r)})}function eX(t,e){let r=!1,n=!1;return t.filter(i=>HS(i,e.languageId)?(e.addAdditionalImport(QQ(i)),r=!0,!1):i.trim().length===0&&r?n:(n=!0,!0))}var BR=class extends Error{constructor(e){super(typeof e=="string"?e:e.message),this.errorDetails=typeof e=="string"?{message:e}:e}},Qn=class extends bu{constructor(r){super();this.factory=r}create(r,n){return this.factory(r,n)}};var i6=class{constructor(e){this.progress=e;this._lastText=void 0}_reportProgress(e){}update(e){return this._reportProgress(this._lastText?e.includes("```")?2:1:0),this._lastText=e,{shouldFinish:ob(e)}}async finish(){if(!this._lastText)throw new Error("No text");return this._reportProgress(3),await this.interpretReply(this._lastText)}},YS=class t extends i6{constructor(r,n){super(n);this.replyInterpreter=r}static createFactory(r){return n=>new t(r,n)}interpretReply(r){return this.replyInterpreter(r,this.progress)}},o6=class extends i6{constructor(r,n,i,o,s){super(s);this.accessor=r;this.selectionContextMetadata=n;this.context=i;this.editStrategy=o}interpretReply(r){let{contextInfo:n,wholeRange:i}=this.selectionContextMetadata,o=ab(n,r,this.context.language);if(!o)return{type:"conversational",content:r};let{code:s}=o,a=Xf(this.accessor,n,s,this.editStrategy,this.context.fileIndentInfo,Qg.fromDocumentContext(this.context));return Jg(a,i)}},s6=class t{constructor(e){this._progress=e;this._responseStream=new z0;this._lastLength=0;this._promise=void 0}static createFactory(){return e=>new t(e)}_reportProgress(e){}update(e){this._promise||(this._reportProgress(0),this._promise=this.processStream(this._responseStream,this._progress)),this._reportProgress(1);let r=e.slice(this._lastLength);return this._lastLength=e.length,this._responseStream.emitOne(r),{shouldFinish:!1}}async finish(){return this._responseStream.resolve(),{type:"conversational",content:""}}async processStream(e,r){for await(let n of e.asyncIterable)r.report(new pn(n));return!1}};function CZe(t,e){let r=new t0(t),n=e.map(i=>{let o=r.toOffsetRange(i.range);return{startOffset:o.start,endOffset:o.endExclusive,text:i.newText}});tX(n,(i,o)=>i.startOffset-o.startOffset||i.endOffset-o.endOffset);for(let i=n.length-1;i>=0;i--){let o=n[i];t=t.substring(0,o.startOffset)+o.text+t.substring(o.endOffset)}return t}function tX(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);tX(n,e),tX(i,e);let o=0,s=0,a=0;for(;o<n.length&&s<i.length;)e(n[o],i[s])<=0?t[a++]=n[o++]:t[a++]=i[s++];for(;o<n.length;)t[a++]=n[o++];for(;s<i.length;)t[a++]=i[s++];return t}var t0=class{constructor(e){this.textLength=e.length,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0),this.lineLengthsByLineIdx=[];let r=0;for(let n=0;n<e.length;n++)e.charAt(n)===`
`?(this.lineStartOffsetByLineIdx.push(n+1),this.lineLengthsByLineIdx.push(r),r=0):r++;this.lineLengthsByLineIdx.push(r)}getLineCount(){return this.lineStartOffsetByLineIdx.length}getLineOffset(e){return this.lineStartOffsetByLineIdx[e]}getLineLength(e){return this.lineLengthsByLineIdx[e]}getOffset(e){return e=this.validatePosition(e),this.lineStartOffsetByLineIdx[e.line]+e.character}getPosition(e){e<0&&(e=0),e>this.textLength&&(e=this.textLength);let r=vm(this.lineStartOffsetByLineIdx,o=>o<=e),n=r,i=e-this.lineStartOffsetByLineIdx[r];return new jn(n,i)}fromOffsetRange(e){return new Xe(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Nr(this.getOffset(e.start),this.getOffset(e.end))}validatePosition(e){let{line:r,character:n}=e;return r<0?(r=0,n=0):r>=this.lineLengthsByLineIdx.length?(r=this.lineLengthsByLineIdx.length-1,n=this.lineLengthsByLineIdx[r]):n<0?n=0:n>this.lineLengthsByLineIdx[r]&&(n=this.lineLengthsByLineIdx[r]),new jn(r,n)}validateRange(e){return new Xe(this.validatePosition(e.start),this.validatePosition(e.end))}},a6=class{constructor(e,r,n,i,o,s){this._accessor=e;this._selectionContextMetadata=r;this._context=n;this._editStrategy=i;this._extractCodeBlock=o;this._progress=s;this._lastText=void 0;this._initialDocText=this._context.document.getText();this._documentInfo=Qg.fromDocumentContext(this._context);if(!this._selectionContextMetadata)throw new Error("code reply NEEDS a selection context");let a=this._selectionContextMetadata.contextInfo,c=a.range.firstLineIndex,u=a.range.firstLineIndex+a.range.lines.length-1,l;{let d=[],p=(m,h)=>{for(let g=0;g<m.lines.length;g++){let v=m.firstLineIndex+g;d.push(new $S(v,h))}};p(a.above,1),p(a.range,2),p(a.below,3);let f=new WS(c,u);l=new KS(s,this._context.document.uri,this._context.document.getText(),d,f,this._context.document.languageId,this._context.fileIndentInfo)}this.streaming=new qR(new zS(l,this._context.selection,new Lm(c,0,u,this._context.document.lineAt(u).text.length),this._editStrategy,!Yt(this._context.document.uri),on.combine(this._extractCodeBlock?on.createCodeBlockFilter():void 0,on.createCodeMarkerRemovingFilter(this._context.language))))}update(e){return this.streaming.update(e),this._lastText=e,{shouldFinish:ob(this._lastText)}}async finish(){if(!this._lastText)throw new Error("No text");let{didEdits:e}=await this.streaming.finish(),r=await this._interpretReply(this._lastText),n=r.type==="inlineEdit"&&e&&Yt(this._context.document.uri);if(r.type==="inlineEdit"){let i=CZe(this._initialDocText,r.edits);return{type:"inlineEdit",edits:n?[]:[{range:new Xe(new jn(0,0),new jn(Number.MAX_SAFE_INTEGER,0)),newText:i}],newWholeRange:r.newWholeRange}}return e&&this._progress.report(new $s(this._context.document.uri,[{range:new Xe(new jn(0,0),new jn(Number.MAX_SAFE_INTEGER,0)),newText:this._initialDocText}])),r}_interpretReply(e){let{contextInfo:r,wholeRange:n}=this._selectionContextMetadata;if(this._extractCodeBlock){let i=ab(r,e,this._context.language);if(!i)return{type:"conversational",content:e};let{code:o}=i,s=Xf(this._accessor,r,o,this._editStrategy,this._context.fileIndentInfo,this._documentInfo);return Jg(s,n)}else{let i=Xf(this._accessor,r,e,this._editStrategy,this._context.fileIndentInfo,this._documentInfo);return Jg(i,n)}}},qR=class{constructor(e){this._responseStream=new z0;this._lastLength=0;this._lastText=void 0;this._streamingPromise=e.processStream(this._responseStream.asyncIterable)}update(e){this._reportMessageProgress(this._lastText?2:0),this._lastText=e;let r=e.slice(this._lastLength);this._lastLength=e.length,this._responseStream.emitOne(r)}_reportMessageProgress(e){}async finish(){return this._responseStream.resolve(),await this._streamingPromise}};var GR=W(st());var Br=class extends K{render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.")}};var u6=W(st());var QS=W(st()),c6=class extends K{render(){return vscpp(vscppf,null,this.props.children)}};var Ht=class extends K{render(e,r){let n=[],i=this.props.history.filter(o=>o.status==="success"||o.status==="in-progress");for(let o of i)o.request.type==="user"&&n.push(vscpp(u6.UserMessage,null,o.request.message)),o.response?.type==="model"&&n.push(vscpp(u6.AssistantMessage,{name:o.response.name},o.response.message));return vscpp(QS.PrioritizedList,{priority:this.props.priority,descending:!1},n)}};var XS=W(st());var cb=class extends K{constructor(e,r){super(e,r),this._contextService=r.get(xr),this._telemetryService=r.get(Ee),this._logService=r.get(ue),this._ignoreService=r.get(De)}_handleFoulPrompt(){let e=new Error("BAD PROMPT");if(this._logService.defaultLogger.error(e),this._contextService.extensionMode!==Sa.Production)throw e;this._telemetryService.sendMSFTTelemetryErrorEvent("prompt.invalidreference",{stack:e.stack})}},Be=class extends cb{async prepare(e,r,n){return{isIgnored:this.props.uri?await this._ignoreService.isCopilotIgnored(this.props.uri):!1}}render(e){if(e.isIgnored)return this._handleFoulPrompt();let r=Ii(this.props.languageId??"",this.props.code,this.props.shouldTrim??!0);return vscpp(XS.TextChunk,null,this.props.references&&vscpp("references",{value:this.props.references}),r)}},l6=class extends cb{async prepare(e,r,n){return{isIgnored:this.props.uri?await this._ignoreService.isCopilotIgnored(this.props.uri):!1}}render(e){if(e.isIgnored)return this._handleFoulPrompt();let r=Ii(this.props.languageId??"",this.props.code,this.props.shouldTrim??!0);return this.props.uri?vscpp(XS.TextChunk,null,vscpp("references",{value:[new XS.PromptReference(this.props.range?new Ea(this.props.uri,this.props.range):this.props.uri)]}),r):vscpp(XS.TextChunk,null,r)}};var la=class extends cb{get insertLineBreakBefore(){return!1}async prepare(){return{isIgnored:await this._ignoreService.isCopilotIgnored(this.props.value)}}render(e){if(e.isIgnored)return this._handleFoulPrompt();let r;return this.props.mode===1?r=this.props.value.path:r=Pc(this.props.value),vscpp(vscppf,null,r)}};var eE=W(st());async function n0(t,e,r,n,i,o,s){let[a,c]=await Promise.all([YCe(t,r,n),s??IZe(e)]),u=o*4;return wZe(u,r,i,a,c)}async function IZe(t){return{useScoreFunction:await t.getTreatmentVariableAsync("vscode","copilotchat.summarizedDocument.useScoreFunction")??!1}}function wZe(t,e,r,n,i){let o=e.getText(),s=HR.convertToLinkedTree(o,e.languageId,n),a=e.offsetAt(r.start),c=e.offsetAt(r.end);return RZe(t,s,a,c,i)}var rX=class{constructor(e,r,n,i){this.document=e;this.selection=r;this.adjustedSelection=n;this._debugData=i}};function RZe(t,e,r,n,i){let o=AZe(e,r,n),s=[];e.visit(f=>{f.isSurviving||s.push(f)});let a=f=>f.endIndex<o.start?o.start-f.endIndex:f.startIndex>o.endExclusive?3*(f.startIndex-o.endExclusive):0,c=a;if(i.useScoreFunction){c=m=>100*m.scopeDistance+m.depth+10*(a(m)/e.text.length);let f=i.scoreOverride;if(f!==void 0){let m=c;c=h=>{let g=m(h);return f(h,g)}}s.sort(pA(c,fA))}else s.sort((f,m)=>{if(f.scopeDistance===m.scopeDistance){if(f.depth===m.depth){let h=a(f),g=a(m);return h-g}return f.depth-m.depth}return f.scopeDistance-m.scopeDistance});let u=e.getSummarizedDocumentBuilder();for(;s.length>0&&u.textLength<t;){s.shift().markToKeep();let m=e.getSummarizedDocumentBuilder();if(m.textLength<=t)u=m;else break}let l=u.finalize(),d=l.convertOriginalRangeToPostEditsRange(new Nr(r,n)),p=l.convertOriginalRangeToPostEditsRange(o);return new rX(l,d,p,{node:e,distFn:a})}function AZe(t,e,r){[e,r]=PZe(t,e,r);let[n,i,o]=kZe(t,e,r);{let s;for(n instanceof JS?(s=n.nextLeaf,n.parent.markSelectedGap(n.gapIndex)):(s=n,s.markSelected());s&&s.startIndex<=r;)s.markSelected(),s=s.nextLeaf}return t.setSelection(new Nr(i,o)),t.propagateScopeDistancesToChildren(),new Nr(i,o)}function PZe(t,e,r){let n=t.text.substring(e,r);if(!/^\s*$/.test(n))return[e,r];let o=e,s=r,a=!0,c=!0;do{if(c&&s>=t.text.length&&(c=!1),c){let u=t.text.charCodeAt(s);if(u===13||u===10)c=!1;else{if(u!==32&&u!==9)return[s,s+1];s++}}if(a&&o===0&&(a=!1),a){let u=t.text.charCodeAt(o-1);if(u===13||u===10)a=!1;else{if(u!==32&&u!==9)return[o-1,o];o--}}}while(a||c);return[e,r]}function kZe(t,e,r){e>0&&e<r&&t.text.charCodeAt(e-1)!==10&&t.text.charCodeAt(e)===10&&e++,e=rIe(t,e),r=nIe(t,r);let n=t.findLeaf2(e),i=t.findLeaf2(r),o=!1,s=c=>{c<e&&(e=rIe(t,c),o=!0,n=t.findLeaf2(e))},a=c=>{c>r&&(r=nIe(t,c),o=!0,i=t.findLeaf2(r))};do{if(o=!1,n instanceof JS){let c=n.isFirstGapInParent?n.parent.lastGap:null,u=n.hasSelectedContent(e,r),l=c&&c.hasSelectedContent(e,r),d=u||l;d&&s(n.firstNonWhitespaceIndex),d&&c&&a(c.lastNonWhitespaceIndex+1)}if(i instanceof JS){let c=i.isLastGapInParent?i.parent.firstGap:null,u=i.hasSelectedContent(e,r),l=c&&c.hasSelectedContent(e,r),d=u||l;d&&i.lastNonWhitespaceIndex+1>r&&a(i.lastNonWhitespaceIndex+1),d&&c&&s(c.firstNonWhitespaceIndex)}n instanceof HR&&t.hasContentInRange(new Nr(e,r))&&n.startIndex<e&&s(n.startIndex),i instanceof HR&&t.hasContentInRange(new Nr(e,r))&&i.endIndex>r&&a(i.endIndex)}while(o);return[n,e,r]}function rIe(t,e){for(;e>0;){let r=t.text.charCodeAt(e-1);if(r!==32&&r!==9)break;e--}return e}function nIe(t,e){if((e>0?t.text.charCodeAt(e-1):0)===10)return e;for(;e<t.text.length;){let n=t.text.charCodeAt(e);if(n!==32&&n!==9)break;e++}return e}function iIe(t){return t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")}var HR=class t{constructor(e,r,n,i,o,s,a,c,u){this._originalText=e;this._languageId=r;this.parent=n;this.startIndex=i;this.endIndex=o;this.kind=s;this.children=a;this.depth=c;this.myIndex=u;this._scopeDistance=Number.MAX_SAFE_INTEGER;this._isSurviving=!1;this._summarizedDocumentBuilder=null;this._survivingGapBeforeChild=-1;this._hasSurvivingChildren=!1;this._selection=null}static convertToLinkedTree(e,r,n){let i=new t(e,r,null,n.startIndex,n.endIndex,n.kind,[],0,0);return t._convertChildrenToLinkedTree(e,r,n,i,1),i}static _convertChildrenToLinkedTree(e,r,n,i,o){for(let s=0;s<n.children.length;s++){let a=n.children[s],c=new t(e,r,i,a.startIndex,a.endIndex,a.kind,[],o,s);i.children.push(c),t._convertChildrenToLinkedTree(e,r,a,c,o+1)}}get scopeDistance(){return this._scopeDistance}get isSurviving(){return this._isSurviving}get text(){return this._originalText.substring(this.startIndex,this.endIndex)}textAt(e){return e.substring(this._originalText)}hasContentInRange(e){let r=this.textAt(e);return!/^\s*$/s.test(r)}toString(){return`Node (${this.startIndex}-${this.endIndex}) ${iIe(this._originalText.substring(this.startIndex,this.endIndex))}`}setSelection(e){this._selection=e;for(let r of this.children)r.setSelection(e)}_touchesSelection(e){return this._selection?e.start<=this._selection.endExclusive&&this._selection.start<=e.endExclusive:!1}markSelected(){this.markToKeep();{let e=1,r=this.parent;for(this._scopeDistance=0;r&&r._scopeDistance>e;)r._scopeDistance=e,e++,r=r.parent}}gapBeforeChild(e){let r=e===0?this.startIndex:this.children[e-1].endIndex,n=e===this.children.length?this.endIndex:this.children[e].startIndex;return new JS(this._originalText,this,r,n,e)}markSelectedGap(e){this._survivingGapBeforeChild=e,this.markSelected()}childAt(e){return this.children[e]??null}get firstGap(){return this.children.length===0?null:this.gapBeforeChild(0)}get lastGap(){return this.children.length===0?null:this.gapBeforeChild(this.children.length)}markToKeep(){if(!this.isSurviving){this._isSurviving=!0;{let e=this.parent;for(;e;)e._summarizedDocumentBuilder=null,e._hasSurvivingChildren=!0,e._isSurviving=!0,e=e.parent}}}propagateScopeDistancesToChildren(){for(let e of this.children)e._scopeDistance>this._scopeDistance&&(e._scopeDistance=this._scopeDistance),e.propagateScopeDistancesToChildren()}findLeaf(e){if(this.children.length===0)return[this,0];let r=Sre(this.children.length,n=>{let i=this.children[n];return e>=i.startIndex&&e<=i.endIndex?0:e<i.startIndex?1:-1});return r<0?[this,r]:this.children[r].findLeaf(e)}findLeaf2(e){let[r,n]=this.findLeaf(e);return n<0?r.gapBeforeChild(~n):r}get nextLeaf(){let e=this;do{let r=e.nextSibling;if(r)return r.leftMostLeafChild;e=e.parent}while(e);return null}get leftMostLeafChild(){let e=this;for(;e.children.length>0;)e=e.children[0];return e}get prevSibling(){let e=this.parent,r=this.myIndex-1;return e&&r>=0?e.children[r]:null}get nextSibling(){let e=this.parent,r=this.myIndex+1;return e&&r<e.children.length?e.children[r]:null}getSummarizedDocumentBuilder(){return this._summarizedDocumentBuilder===null&&(this._summarizedDocumentBuilder=new iX(this._originalText,this._languageId,this.startIndex,this.endIndex),this._extractSurvivingText(this._summarizedDocumentBuilder)),this._summarizedDocumentBuilder}_extractSurvivingText(e){if(!this.isSurviving)return;if(this.children.length===0)return e.appendText(this.startIndex,this.endIndex);let r=e.createSurvivingStringPiece(this.startIndex,this.children[0].startIndex),n=e.createSurvivingStringPiece(this.children[this.children.length-1].endIndex,this.endIndex);if(!this._hasSurvivingChildren){let i=r.trimEnd(),o=n.trimStart();i.endsWith("{")&&o.startsWith("}")?(e.appendSurvivingStringPiece(i),e.setNextElideText("\u2026"),e.appendSurvivingStringPiece(o)):(e.appendSurvivingStringPiece(r),e.appendSurvivingStringPiece(n));return}for(let i=0;i<this.children.length;i++){let o=this.children[i],s=o.isSurviving,a=i>0?this.children[i-1]:null,c=a?a.isSurviving:!1;this._appendGapIfSurviving(e,this.gapBeforeChild(i),c&&s),s&&e.appendChildBuilder(o.getSummarizedDocumentBuilder())}this._appendGapIfSurviving(e,this.gapBeforeChild(this.children.length),!1)}_appendGapIfSurviving(e,r,n){if(this._touchesSelection(r.range)||this._survivingGapBeforeChild===r.gapIndex){let i=e.createSurvivingStringPiece(r.startIndex,r.endIndex);e.appendSurvivingStringPiece(i)}else if(r.gapIndex===0||r.gapIndex===this.children.length||n){let i=e.createSurvivingStringPiece(r.startIndex,r.endIndex);e.appendSurvivingStringPiece(i.trimDupNewLines())}}visit(e){e(this);for(let r of this.children)r.visit(e)}},JS=class t{constructor(e,r,n,i,o){this._originalText=e;this.parent=r;this.startIndex=n;this.endIndex=i;this.gapIndex=o;if(this.startIndex>this.endIndex)throw new ln("Invalid gap")}equals(e){return e instanceof t?this.startIndex===e.startIndex&&this.endIndex===e.endIndex:!1}get range(){return new Nr(this.startIndex,this.endIndex)}get isFirstGapInParent(){return this.gapIndex===0}get isLastGapInParent(){return this.gapIndex===this.parent.children.length}toString(){return`NodeGap (${this.startIndex}-${this.endIndex}) ${iIe(this._originalText.substring(this.startIndex,this.endIndex))}`}get text(){return this._originalText.substring(this.startIndex,this.endIndex)}hasSelectedContent(e,r){let n=this.range.intersect(new Nr(e,r)),i=n?this._originalText.substring(n.start,n.endExclusive):"";return!/^\s*$/s.test(i)}get firstNonWhitespaceIndex(){let e=this.startIndex;for(;e<this.endIndex;){let r=this._originalText.charCodeAt(e);if(r!==9&&r!==32&&r!==10)return e;e++}return this.endIndex}get lastNonWhitespaceIndex(){let e=this.endIndex-1;for(;e>=this.startIndex;){let r=this._originalText.charCodeAt(e);if(r!==9&&r!==32&&r!==10)return e;e--}return this.startIndex-1}get nextLeaf(){let e=this.parent.childAt(this.gapIndex);return e?e.leftMostLeafChild:this.parent.nextLeaf}},nX=class t{constructor(e,r,n){this.allText=e;this.startIndex=r;this.endIndex=n}get text(){return this.allText.substring(this.startIndex,this.endIndex)}trimStart(){let e=this.text.trimStart();return e.length===this.text.length?this:new t(this.allText,this.endIndex-e.length,this.endIndex)}trimStartDupNewLines(){let e=this.text.replace(/^\n+/g,`
`);return e.length===this.text.length?this:new t(this.allText,this.endIndex-e.length,this.endIndex)}trimEnd(){let e=this.text.trimEnd();return e.length===this.text.length?this:new t(this.allText,this.startIndex,this.startIndex+e.length)}trimEndDupNewLines(){let e=this.text.replace(/\n+$/g,`
`);return e.length===this.text.length?this:new t(this.allText,this.startIndex,this.startIndex+e.length)}trimDupNewLines(){return this.trimStartDupNewLines().trimEndDupNewLines()}startsWith(e){return this.text.startsWith(e)}endsWith(e){return this.text.endsWith(e)}},r0=class{constructor(e,r,n){this.originalText=e;this.edits=r;this.languageId=n;this._text=new zo(()=>this.edits.apply(this.originalText));this._transformer=new zo(()=>new t0(this.text))}get transformer(){return this._transformer.value}get text(){return this._text.value}get lineCount(){return this.transformer.getLineCount()}convertOriginalOffsetToPostEditsOffset(e){return this.edits.convertOriginalOffsetToPostEditsOffset(e)}convertOriginalRangeToPostEditsRange(e){return this.edits.convertOriginalRangeToPostEditsRange(e)}convertPostEditsOffsetToOriginalOffset(e){return this.edits.convertPostEditsOffsetToOriginalOffset(e)}},iX=class{constructor(e,r,n,i){this._allText=e;this._languageId=r;this._scopeStartIndex=n;this._scopeEndIndex=i;this._elidedRanges=[];this._len=0;this._nextElidedRangeReplacementText=null;this._firstStartIndex=-1,this._lastEndIndex=n}createSurvivingStringPiece(e,r){return new nX(this._allText,e,r)}get textLength(){return this._len}finalize(){let e=[];return this._scopeStartIndex<this._firstStartIndex&&e.push(new Bi(new Nr(this._scopeStartIndex,this._firstStartIndex),"")),e=e.concat(this._elidedRanges),this._lastEndIndex<this._scopeEndIndex&&e.push(new Bi(new Nr(this._lastEndIndex,this._scopeEndIndex),"")),new r0(this._allText,new co(e),this._languageId)}appendSurvivingStringPiece(e){this.appendText(e.startIndex,e.endIndex)}appendText(e,r){this._markSurviving(e,r);let n=this._allText.substring(e,r);this._len+=n.length}appendChildBuilder(e){this._markSurviving(e._firstStartIndex,e._lastEndIndex),this._elidedRanges=this._elidedRanges.concat(e._elidedRanges),this._len+=e._len}_markSurviving(e,r){this._firstStartIndex===-1?this._firstStartIndex=e:e>this._lastEndIndex&&(this._nextElidedRangeReplacementText?(this._len+=this._nextElidedRangeReplacementText.length,this._elidedRanges.push(new Bi(new Nr(this._lastEndIndex,e),this._nextElidedRangeReplacementText)),this._nextElidedRangeReplacementText=null):this._elidedRanges.push(new Bi(new Nr(this._lastEndIndex,e),""))),this._lastEndIndex=r}setNextElideText(e){this._nextElidedRangeReplacementText=e}};var ZS=class{constructor(e){this._derivedDocument=e;this._workingCopyOriginalDocument=new sX(this._derivedDocument.originalText)}get originalText(){return this._workingCopyOriginalDocument.text}get text(){return this._derivedDocument.text}get languageId(){return this._derivedDocument.languageId}get derivedDocumentTransformer(){return this._derivedDocument.transformer}get originalDocumentTransformer(){return this._workingCopyOriginalDocument.transformer}get allReportedEdits(){return this._workingCopyOriginalDocument.appliedEdits}createDerivedDocumentProgress(e,r){return new oX(e,r,this)}applyAndTransformProgressItem(e){if(!(e instanceof $s))return e;let r=this._workingCopyOriginalDocument,n=this._derivedDocument,i=n.edits,s=oIe(n.transformer,e.edits).tryRebase(i.inverse(r.text)),a=i.tryRebase(s),c=new $s(e.uri,p6(r.transformer,s));return this._workingCopyOriginalDocument.applyOffsetEdits(s),this._derivedDocument=new r0(this._workingCopyOriginalDocument.text,a,this._derivedDocument.languageId),c}rebaseEdits(e){let r=this._workingCopyOriginalDocument,n=this._derivedDocument,i=n.edits,s=oIe(n.transformer,e).tryRebase(i.inverse(r.text));return p6(r.transformer,s)}convertPostEditsOffsetToOriginalOffset(e){return this._derivedDocument.convertPostEditsOffsetToOriginalOffset(e)}},oX=class{constructor(e,r,n){this._actual=e;this._streamEdits=r;this._workingCopySummarizedDoc=n}get finalEdits(){return this._streamEdits?new co([]):this._workingCopySummarizedDoc.allReportedEdits}report(e){let r=this._workingCopySummarizedDoc.applyAndTransformProgressItem(e);r instanceof $s&&!this._streamEdits||this._actual.report(r)}},sX=class{constructor(e){this._text=e;this._transformer=null;this._appliedEdits=new co([])}get text(){return this._text}get transformer(){return this._transformer||(this._transformer=new t0(this._text)),this._transformer}get appliedEdits(){return this._appliedEdits}applyOffsetEdits(e){let{edits:r}=e,n=this._text;for(let i=r.length-1;i>=0;i--){let o=r[i];n=n.substring(0,o.replaceRange.start)+o.newText+n.substring(o.replaceRange.endExclusive)}this._text=n,this._transformer=null,this._appliedEdits=this._appliedEdits.compose(e)}},d6=class{constructor(e){this._text=e;this._transformer=null}get text(){return this._text}get transformer(){return this._transformer||(this._transformer=new t0(this._text)),this._transformer}};function oIe(t,e){let r=e.map(n=>new Jn(t.validateRange(n.range),n.newText));return new co(r.map(n=>new Bi(t.toOffsetRange(n.range),n.newText)))}function p6(t,{edits:e}){return e.map(r=>new Jn(t.fromOffsetRange(r.replaceRange),r.newText))}var f6=class extends K{async prepare(e){let{documentContext:r}=this.props,n=await this.accessor.get(De).isCopilotIgnored(r.document.uri),i=r.document.validateRange(r.wholeRange);return{summarizedDocument:await Eu(this.accessor.get(xt),this.accessor.get(Mt),r.document,r.fileIndentInfo,r.language,i,e.endpoint.modelMaxPromptTokens/3),isIgnored:n}}render(e,r){if(Yt(this.props.documentContext.document.uri))throw wr("InlineChatGenerateCodePrompt should not be used with a notebook!");if(this.props.documentContext.language.languageId==="markdown")throw wr("InlineChatGenerateCodePrompt should not be used with a markdown document!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let{uri:n,languageId:i}=e.summarizedDocument,o=e.summarizedDocument.splitAroundOriginalSelectionEnd(),{codeAbove:s,hasContent:a,codeBelow:c}=o,u=`${s}$PLACEHOLDER$${c}`,l=on.combine(on.createCodeBlockFilter(),f=>f.trim()!=="$PLACEHOLDER$"),d=r.endpoint.model==="gpt-4"?o.insertStreaming(l):o.insertOrReplaceStreaming(l),p=o.createReplyInterpreterFactory(1,d);return vscpp(vscppf,null,vscpp("meta",{value:new Qn(p)}),vscpp(eE.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",i,".",vscpp("br",null),"Source code is always contained in ``` blocks.",vscpp("br",null),"The user needs help to write some new code.",vscpp("br",null),a&&vscpp(vscppf,null,"The user includes existing code and marks with $PLACEHOLDER$ where the new code should go.",vscpp("br",null)),a&&vscpp(vscppf,null,'DO NOT include the text "$PLACEHOLDER$" in your reply.',vscpp("br",null)),a&&vscpp(vscppf,null,"DO NOT repeat any code from the user in your reply.",vscpp("br",null)),!a&&vscpp(vscppf,null,"Your must generate a code block surrounded with ``` that will be used in a new file",vscpp("br",null)),vscpp(Br,null)),this.props.history&&vscpp(Ht,{priority:700,history:this.props.history}),a&&vscpp(eE.UserMessage,{priority:800},"I have the following code in a file called `",vscpp(la,{value:n,mode:1}),"`:",vscpp(Be,{uri:n,languageId:i,code:u,shouldTrim:!1})),!a&&vscpp(eE.UserMessage,{priority:800},"I am in an empty file `",vscpp(la,{value:n,mode:1}),"`."),vscpp(eE.UserMessage,{priority:900},this.props.query,vscpp("br",null),a&&vscpp(vscppf,null,"The code that would fit at $PLACEHOLDER$ with ``` is:")))}};async function Eu(t,e,r,n,i,o,s){let a=await n0(t,e,r,n,o,s);return new aX(a,r,n,i)}var aX=class{constructor(e,r,n,i){this._summarizationResult=e;this._document=r;this._formattingOptions=n;this.language=i}get uri(){return this._document.uri}get languageId(){return this._document.languageId}splitAroundAdjustedSelection(){return new m6(this._summarizationResult.document,this.uri,this._formattingOptions,this._summarizationResult.adjustedSelection)}splitAroundOriginalSelectionEnd(){return new m6(this._summarizationResult.document,this.uri,this._formattingOptions,new Nr(this._summarizationResult.selection.endExclusive,this._summarizationResult.selection.endExclusive))}},m6=class{constructor(e,r,n,i){this._summarizedDoc=e;this._uri=r;this._formattingOptions=n;this._selection=this._summarizedDoc.transformer.fromOffsetRange(i),this.codeAbove=this._summarizedDoc.text.substring(0,i.start),this.codeSelected=this._summarizedDoc.text.substring(i.start,i.endExclusive),this.codeBelow=this._summarizedDoc.text.substring(i.endExclusive)}get hasCodeWithoutSelection(){return this.codeAbove.trim().length>0||this.codeBelow.trim().length>0}get hasContent(){return this.codeAbove.trim().length>0||this.codeSelected.trim().length>0||this.codeBelow.trim().length>0}replaceSelectionStreaming(e){return r=>new t6(r,this._selection,e)}insertStreaming(e){return r=>new e6(r,this._selection.end,e)}insertOrReplaceStreaming(e){return r=>new zS(r,this._selection,this._selection,3,!0,e)}createReplyInterpreterFactory(e,r){return(n,i)=>new cX(n,i,this._uri,this._summarizedDoc,this._formattingOptions,e,r)}},cX=class{constructor(e,r,n,i,o,s,a){this._earlyStopping=s;this._lastText=void 0;this._initialDocumentSnapshot=new d6(i.originalText),this._workingCopySummarizedDoc=new ZS(i),this._progress=this._workingCopySummarizedDoc.createDerivedDocumentProgress(e,r);let c=new KS(this._progress,n,this._workingCopySummarizedDoc.text,this._workingCopySummarizedDoc.text.split(`
`).map((u,l)=>new $S(l,4)),new WS(0,0),this._workingCopySummarizedDoc.languageId,o);this._streaming=new qR(a(c))}update(e){return this._streaming.update(e),this._lastText=e,this._earlyStopping===1?{shouldFinish:ob(e)}:{shouldFinish:!1}}async finish(){let{didEdits:e,additionalImports:r}=await this._streaming.finish();if(e){let n=e?p6(this._initialDocumentSnapshot.transformer,this._progress.finalEdits):[];n.push(...this._generateAdditionalImportsEdits(r));let i=this._workingCopySummarizedDoc.allReportedEdits.inverse(this._initialDocumentSnapshot.text),o=i.edits.reduce((c,u)=>c.join(u.replaceRange),i.edits[0].replaceRange),s=this._workingCopySummarizedDoc.originalDocumentTransformer.fromOffsetRange(o),a={lastDocumentContent:this._workingCopySummarizedDoc.originalText,lastWholeRange:s};return{type:"inlineEdit",edits:n,newWholeRange:void 0,store:a}}if(r.length>0)return{type:"inlineEdit",edits:this._generateAdditionalImportsEdits(r),newWholeRange:void 0,store:void 0};if(!this._lastText)throw new Error("No text");return{type:"conversational",content:this._lastText}}_generateAdditionalImportsEdits(e){if(e.length===0)return[];let r=this._workingCopySummarizedDoc.originalText.split(/\r\n|\r|\n/g),n=t7(r,o=>HS(o,this._workingCopySummarizedDoc.languageId));if(n===-1)return[new Jn(new Xe(0,0,0,0),e.join(`
`)+`

`)];let i=r[n].length;return[new Jn(new Xe(n,i,n,i),`
`+e.join(`
`))]}};var g6=class extends K{async prepare(e){let{documentContext:r}=this.props,n=await this.accessor.get(De).isCopilotIgnored(r.document.uri),i=r.document.validateRange(r.wholeRange);return{summarizedDocument:await Eu(this.accessor.get(xt),this.accessor.get(Mt),r.document,r.fileIndentInfo,r.language,i,e.endpoint.modelMaxPromptTokens/3),isIgnored:n}}render(e,r){if(Yt(this.props.documentContext.document.uri))throw wr("InlineChatEditCodePrompt should not be used with a notebook!");if(this.props.documentContext.language.languageId==="markdown")throw wr("InlineChatEditCodePrompt should not be used with a markdown document!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let{uri:n,languageId:i}=e.summarizedDocument,o=e.summarizedDocument.splitAroundAdjustedSelection(),{codeAbove:s,codeSelected:a,codeBelow:c,hasCodeWithoutSelection:u}=o,l=`${s}$SELECTION_PLACEHOLDER$${c}`,d=o.createReplyInterpreterFactory(1,o.replaceSelectionStreaming(on.combine(on.createCodeBlockFilter(),p=>p.trim()!=="$SELECTION_PLACEHOLDER$")));return vscpp(vscppf,null,vscpp("meta",{value:new Qn(d)}),vscpp(GR.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",i,".",vscpp("br",null),"Source code is always contained in ``` blocks.",vscpp("br",null),"The user needs help to modify some code.",vscpp("br",null),u&&vscpp(vscppf,null,"The user includes existing code and marks with $SELECTION_PLACEHOLDER$ where the selected code should go.",vscpp("br",null)),vscpp(Br,null)),this.props.history&&vscpp(Ht,{priority:700,history:this.props.history}),vscpp(GR.UserMessage,{priority:800},"I have the following code in a file called `",vscpp(la,{value:n,mode:1}),"`:",u&&vscpp(vscppf,null,vscpp(Be,{uri:n,languageId:i,code:l,shouldTrim:!1}),vscpp("br",null)),u&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(Be,{uri:n,languageId:i,code:a,shouldTrim:!1})),vscpp(GR.UserMessage,{priority:900},this.props.query,vscpp("br",null),u&&vscpp(vscppf,null,"The modified $SELECTION_PLACEHOLDER$ code with ``` is:")))}};var o0=W(st());var i0=W(st());var y6=class extends K{async prepare(e){let{documentContext:r}=this.props,n=await this.accessor.get(De).isCopilotIgnored(r.document.uri),i=r.document.validateRange(r.wholeRange);return{summarizedDocument:await Eu(this.accessor.get(xt),this.accessor.get(Mt),r.document,r.fileIndentInfo,r.language,i,e.endpoint.modelMaxPromptTokens/3),isIgnored:n}}render(e,r){if(Yt(this.props.documentContext.document.uri))throw wr("InlineChatGenerateMarkdownPrompt should not be used with a notebook!");if(this.props.documentContext.language.languageId!=="markdown")throw wr("InlineChatGenerateMarkdownPrompt should only be used with markdown documents!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let{uri:n}=e.summarizedDocument,i=e.summarizedDocument.splitAroundOriginalSelectionEnd(),{codeAbove:o,hasContent:s,codeBelow:a}=i,c=`${o}$PLACEHOLDER$${a}`,u=i.createReplyInterpreterFactory(0,i.insertStreaming(on.combine(on.createFencedBlockFilter(Us.FenceSequence),l=>l.trim()!=="$PLACEHOLDER$")));return vscpp(vscppf,null,vscpp("meta",{value:new Qn(u)}),vscpp(i0.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class markdown editor, very well versed in programming.",vscpp("br",null),"The user needs help to write some new markdown.",vscpp("br",null),"The markdown is always delimited by ",Us.FenceSequence,".",vscpp("br",null),s&&vscpp(vscppf,null,"The user includes existing markdown and marks with $PLACEHOLDER$ where the new code should go.",vscpp("br",null)),s&&vscpp(vscppf,null,'DO NOT include the text "$PLACEHOLDER$" in your reply.',vscpp("br",null)),s&&vscpp(vscppf,null,"DO NOT repeat any markdown from the user in your reply.",vscpp("br",null)),!s&&vscpp(vscppf,null,"Your answer must begin and end with ",Us.FenceSequence,vscpp("br",null)),vscpp(Br,null)),this.props.history&&vscpp(Ht,{priority:700,history:this.props.history}),s&&vscpp(i0.UserMessage,{priority:800},"I have the following markdown in a file called `",vscpp(la,{value:n,mode:1}),"`:",vscpp(Us,{uri:n,code:c})),!s&&vscpp(i0.UserMessage,{priority:800},"I am in an empty file `",vscpp(la,{value:n,mode:1}),"`."),vscpp(i0.UserMessage,{priority:900},this.props.query,vscpp("br",null),s&&vscpp(vscppf,null,"Remember to start and end your answer with ",Us.FenceSequence,". The markdown that would fit at $PLACEHOLDER$ is:")))}},Us=class t extends cb{static{this.FenceSequence="-+-+-+-+-+"}async prepare(e,r,n){return{isIgnored:this.props.uri?await this._ignoreService.isCopilotIgnored(this.props.uri):!1}}render(e){if(e.isIgnored)return this._handleFoulPrompt();let r=t.FenceSequence,n=`${r}
${this.props.code}
${r}`;return vscpp(i0.TextChunk,null,n)}};var b6=class extends K{async prepare(e){let{documentContext:r}=this.props,n=await this.accessor.get(De).isCopilotIgnored(r.document.uri),i=r.document.validateRange(r.wholeRange);return{summarizedDocument:await Eu(this.accessor.get(xt),this.accessor.get(Mt),r.document,r.fileIndentInfo,r.language,i,e.endpoint.modelMaxPromptTokens/3),isIgnored:n}}render(e,r){if(Yt(this.props.documentContext.document.uri))throw wr("InlineChatEditMarkdownPrompt should not be used with a notebook!");if(this.props.documentContext.language.languageId!=="markdown")throw wr("InlineChatEditMarkdownPrompt should only be used with markdown documents!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let{uri:n}=e.summarizedDocument,i=e.summarizedDocument.splitAroundAdjustedSelection(),{codeAbove:o,codeSelected:s,codeBelow:a,hasCodeWithoutSelection:c}=i,u=`${o}$SELECTION_PLACEHOLDER$${a}`,l=i.createReplyInterpreterFactory(0,i.replaceSelectionStreaming(on.combine(on.createFencedBlockFilter(Us.FenceSequence),d=>d.trim()!=="$SELECTION_PLACEHOLDER$")));return vscpp(vscppf,null,vscpp("meta",{value:new Qn(l)}),vscpp(o0.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class markdown editor, very well versed in programming.",vscpp("br",null),"The user needs help to modify some markdown content.",vscpp("br",null),"The markdown is always delimited by ",Us.FenceSequence,".",vscpp("br",null),"Your answer must begin and end with ",Us.FenceSequence,".",vscpp("br",null),vscpp(Br,null)),this.props.history&&vscpp(Ht,{priority:700,history:this.props.history}),c&&vscpp(vscppf,null,vscpp(o0.UserMessage,{priority:750},"For context, I have the following markdown in a file called `",vscpp(la,{value:n,mode:1}),"`:",vscpp(Us,{uri:n,code:u}),vscpp("br",null)),vscpp(o0.UserMessage,{priority:800},"I need your help with the following content:",vscpp("br",null),vscpp(Us,{uri:n,code:s})),vscpp(o0.UserMessage,{priority:900},this.props.query,vscpp("br",null),"The rewritten markdown content from my last message wrapped with ",Us.FenceSequence," is:")),!c&&vscpp(vscppf,null,vscpp(o0.UserMessage,{priority:800},"I have the following markdown in a file called `",vscpp(la,{value:n,mode:1}),"`:",vscpp(Us,{uri:n,code:s})),vscpp(o0.UserMessage,{priority:900},this.props.query,vscpp("br",null),"The rewritten markdown content wrapped with ",Us.FenceSequence," is:")))}};var Sl=W(st());var sn=class extends K{render(){return vscpp(vscppf,null,"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.")}};var uX={core:1e3,context:800,runtimeCore:600,history:500,other:100};var oE=W(st());var ls=W(st());var np=class{constructor(e){this.charLimit=e;this._totalChars=0}get totalChars(){return this._totalChars}addLine(e){this._totalChars+=e.length+1}lineWouldFit(e){return this._totalChars+e.length+1<this.charLimit}},Bs=class t{constructor(e,r,n,i){this.tracker=e;this.document=r;this.language=n;this.kindOrUniqueStr=i;this.lines=[];this.firstLineIndex=this.document.lineCount;this.lastLineIndex=-1;this.isComplete=!1;this.nonTrimWhitespaceCharCount=0;this._startMarker=cs.begin(n,i),this._endMarker=cs.end(n,i),this.lines=[],this.firstLineIndex=r.lineCount,this.lastLineIndex=-1}get startMarker(){return this._startMarker}get endMarker(){return this._endMarker}get lineCount(){return this.lines.length}get isVerySmallOrEmpty(){return this.nonTrimWhitespaceCharCount<10}get hasContent(){return this.lines.length===0||this.nonTrimWhitespaceCharCount===0?!1:this.lines.length>0}clone(){let e=new t(this.tracker,this.document,this.language,this.kindOrUniqueStr);return e._startMarker=this.startMarker,e._endMarker=this.endMarker,e.lines.push(...this.lines),e.firstLineIndex=this.firstLineIndex,e.lastLineIndex=this.lastLineIndex,e.nonTrimWhitespaceCharCount=this.nonTrimWhitespaceCharCount,e}clear(){this.lines.length=0,this.firstLineIndex=this.document.lineCount,this.lastLineIndex=-1,this.nonTrimWhitespaceCharCount=0}generatePrompt(e){if(!this.hasContent)return[];let r=[];return r.push("```"+this.language.languageId),r.push(Fs.forDocument(this.language,this.document)),e&&r.push(`${this.startMarker}`),r.push(...this.lines),e&&r.push(`${this.endMarker}`),r.push("```"),r}prependLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.unshift(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}appendLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.push(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}trim(e){let r=e?Math.min(this.lastLineIndex,e.start.line):this.lastLineIndex;for(;this.firstLineIndex<r&&this.lines.length>0&&this.lines[0].trim().length===0;)this.firstLineIndex++,this.lines.shift();let n=e?Math.max(this.firstLineIndex,e.end.line):this.firstLineIndex;for(;n<this.lastLineIndex&&this.lines.length>0&&this.lines[this.lines.length-1].trim().length===0;)this.lastLineIndex--,this.lines.pop()}removeFirstNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(0,e),n=0;for(let i of r)n+=i.trim().length;return this.firstLineIndex+=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}removeLastNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(this.lines.length-e,e),n=0;for(let i of r)n+=i.trim().length;return this.lastLineIndex-=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}takeFromAbove(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeLastNLines(r);this.lines.unshift(...n),this.firstLineIndex-=n.length,this.nonTrimWhitespaceCharCount+=i}takeFromBelow(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeFirstNLines(r);this.lines.push(...n),this.lastLineIndex+=n.length,this.nonTrimWhitespaceCharCount+=i}mergeFromAbove(e){e.hasContent&&(this.lines.unshift(...e.lines),this.firstLineIndex=e.firstLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}mergeFromBelow(e){e.hasContent&&(this.lines.push(...e.lines),this.lastLineIndex=e.lastLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}toRange(){try{let e=this.lastLineIndex===-1?this.document.lineCount-1:this.lastLineIndex,r=new Xe(this.firstLineIndex,0,e,this.document.lineAt(e).text.length);if(this.document.validateRange(r)===r)return r}catch{return}}toString(){return`{${this.firstLineIndex} -> ${this.lastLineIndex}}`}};function aIe(t,e,r,n,i,o){if(r.start.line!==r.end.line&&r.end.character===0){let d=t.lineAt(r.end.line-1);r=new Xe(r.start,new jn(r.end.line-1,d.text.length))}else if(e.end.character===0&&e.end.line!==e.start.line&&(r.start.line===e.start.line&&r.start.character===0&&r.end.line===e.end.line&&r.end.character===t.lineAt(r.end.line).text.length||r.isEqual(e))){let d=t.lineAt(r.end.line-1);r=new Xe(r.start,new jn(r.end.line-1,d.text.length))}let s=new Bs(o,t,i,"ed8c6549bwf9"),a=new Bs(o,t,i,"abpxx6d04wxr"),c=new Bs(o,t,i,"be15d9bcejpp"),u=()=>(a.trim(),s.trim(e),c.trim(),{language:i,above:a,range:s,below:c});for(let d=r.end.line;d>=r.start.line;d--)if(!s.prependLine(d))return u();let l={aboveLineIndex:r.start.line-1,belowLineIndex:r.end.line+1,minimumLineIndex:Math.max(0,n.start.line),maximumLineIndex:Math.min(t.lineCount-1,n.end.line)};return lX(l,a,c),u()}function lX(t,e,r){let n=t.aboveLineIndex,i=!0,o=t.belowLineIndex,s=!0;for(let a=0;a<100&&(i||s);a++)!i||s&&a%4===3?o<=t.maximumLineIndex&&r.appendLine(o)?o++:s=!1:n>=t.minimumLineIndex&&e.prependLine(n)?n--:i=!1;e.isComplete=n<t.minimumLineIndex,r.isComplete=o>t.maximumLineIndex}function cIe(t,e,r,n){let i=0,o="",s=r.endOffset,a="";for(let c of e)if(c.endIndex<r.startOffset)o+=t.substring(i,c.startIndex),o+=n,i=c.endIndex;else if(c.startIndex>r.endOffset)a+=t.substring(s,c.startIndex),a+=n,s=c.endIndex;else continue;return o+=t.substring(i,r.startOffset),a+=t.substring(s,t.length),{outlineAbove:o,outlineBelow:a}}function _6(t,e,r,n,i){let o={...n,outlineAbove:"",outlineBelow:"",aboveCells:[],belowCells:[]},s,a,c;if(r.document.uri.scheme==="vscode-notebook-cell"){s=e.notebookDocuments.find(x=>x.uri.fsPath===r.document.uri.fsPath&&x.getCells().find(S=>S.document===r.document));let b=s?.getCells().findIndex(x=>x.document===r.document);if(b===void 0||b===-1)return o;a=b-1,c=b+1}else{if(t.activeNotebookEditor?.notebook.uri.path!==r.document.uri.path)return o;let b=t.activeNotebookEditor;s=b?.notebook;let x=b.selection.start;a=x-1,c=x}if(!s)return o;let{language:u,above:l,range:d,below:p}=n,f=l.lines.length+d.lines.length+p.lines.length,m=[],h=[],g=()=>(m.forEach(b=>b.trim()),h.forEach(b=>b.trim()),{language:u,above:l,range:d,below:p,outlineAbove:"",outlineBelow:"",aboveCells:m,belowCells:h}),v=!0,y=!0;for(let b=f;b<100&&(v||y);b++)if(v)if(a>=0){let S=s.cellAt(a).document,T=new Bs(i,S,$o(S),"CELL:"+S.uri.fragment);for(let L=0;L<S.lineCount;L++)T.appendLine(L);m.unshift(T),a--}else v=!1;else if(c<s.cellCount){let S=s.cellAt(c).document,T=new Bs(i,S,$o(S),"CELL:"+S.uri.fragment);for(let L=0;L<S.lineCount;L++)T.appendLine(L);h.push(T),c++}else y=!1;return g()}var Jf=class extends K{render(){return vscpp(vscppf,null,"```",this.props.language.languageId,vscpp("br",null),this.props.document&&vscpp(vscppf,null,Fs.forDocument(this.props.language,this.props.document),vscpp("br",null)),this.props.code&&vscpp(vscppf,null,this.props.code,vscpp("br",null)),"```")}};var da=class extends K{render(){if(!this.props.codeRegion.hasContent)return;let e=[];return this.props.useMarkers&&e.push(this.props.codeRegion.startMarker),e.push(...this.props.codeRegion.lines),this.props.useMarkers&&e.push(this.props.codeRegion.endMarker),vscpp(Jf,{language:this.props.codeRegion.language,document:this.props.codeRegion.document,code:e.join(`
`)})}};var x6=class extends K{async prepare(){let{document:e,wholeRange:r}=this.props.documentContext;return{wholeRange:e.validateRange(r)}}render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatNotebookSelection should be used only with a notebook!");let{wholeRange:n}=e,i=S6(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n),o=this.props.documentContext.document,s=new us(n,i),a=[{uri:o.uri,version:o.version,ranges:Xt([i.range.toRange(),i.above.toRange(),i.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:a}),vscpp("meta",{value:s}),vscpp(jR,{documentContext:this.props.documentContext,above:i.above,range:i.range,below:i.below,aboveCells:i.aboveCells,belowCells:i.belowCells}))}},jR=class extends K{render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=ep(this.props.documentContext.document.uri),{below:i,above:o,range:s,aboveCells:a,belowCells:c}=this.props,u=a||[],l=c||[],d=this.props.documentContext.language,p=this.props.includeDelimeters??!1;return vscpp(vscppf,null,n?vscpp(vscppf,null,(u.length>0||l.length>0)&&vscpp(nE,{documentContext:this.props.documentContext,aboveCells:u,belowCells:l}),d.languageId==="markdown"?vscpp(mX,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:p}):vscpp(hX,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:p})):vscpp(vscppf,null,vscpp(tE,{documentContext:this.props.documentContext}),vscpp(rE,{documentContext:this.props.documentContext,aboveCells:u,belowCells:l}),d.languageId==="markdown"?vscpp(pX,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:p}):vscpp(fX,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:p})))}},uIe=[{viewType:"polyglot-notebook",exampleCells:[{lan:"markdown",source:"Samples"},{lan:"csharp",source:"using Microsoft.Data.Analysis;"},{lan:"csharp",source:`DateTimeDataFrameColumn dateTimes = new DateTimeDataFrameColumn("DateTimes");
 Int32DataFrameColumn ints = new Int32DataFrameColumn("Ints", 6);
 StringDataFrameColumn strings = new StringDataFrameColumn("Strings", 6);`},{lan:"csharp",source:'dateTimes.Append(DateTime.Parse("2019/01/01"));'}]},{viewType:"sql-notebook",exampleCells:[{lan:"sql",source:"SELECT * FROM users;"}]},{viewType:"node-notebook",exampleCells:[{lan:"javascript",source:'console.log("Hello World");'},{lan:"javascript",source:"const {display} = require('node-kernel');"},{lan:"markdown",source:"# Plain text output"},{lan:"javascript",source:"display.text('Hello World');"}]},{viewType:"sas-notebook",exampleCells:[{lan:"sas",source:"proc print data=sashelp.class; run;"},{lan:"sas",source:`data race;
pr = probnorm(-15/sqrt(325));
run;

proc print data=race;
var pr;
run;
`}]},{viewType:"http-notebook",exampleCells:[{lan:"http",source:"GET https://httpbin.org/get"},{lan:"http",source:"POST https://httpbin.org/post"}]},{viewType:"powerbi-notebook",exampleCells:[{lan:"markdown",source:"# Get Groups"},{lan:"powerbi-api",source:"GET /groups"},{lan:"powerbi-api",source:`%dax /groups/ccce57d1-10af-1234-1234-665f8bbd8458/datasets/51ba6d4b-1234-1234-8635-a7d743a5ea89
EVALUATE INFO.TABLES()
This`}]},{viewType:"wolfram-language-notebook",exampleCells:[{lan:"wolfram",source:"Plot[Sin[x], {x, 0, 2 Pi}]"}]},{viewType:"github-issues",exampleCells:[{lan:"github-issues",source:`$vscode=repo:microsoft/vscode
$milestone=milestone:"May 2020"`},{lan:"github-issues",source:"$vscode $milestone is:closed author:@me -assignee:@me label:bug -label:verified"},{lan:"github-issues",source:"$vscode assignee:@me is:open label:freeze-slow-crash-leak"}]},{viewType:"rest-book",exampleCells:[{lan:"rest-book",source:"GET google.com"},{lan:"rest-book",source:`GET https://www.google.com
    ?query="fun"
    &page=2
    User-Agent: rest-book
    Content-Type: application/json`}]}],dX=class extends K{render(){let e=this.props.viewType,r=uIe.find(i=>i.viewType===this.props.viewType);if(!r)return vscpp(vscppf,null);let{exampleCells:n}=r;return vscpp(ls.UserMessage,null,"Below you will find a set of example cells for a ",e," notebook.",vscpp("br",null),n.map((i,o)=>vscpp(vscppf,null,"CELL INDEX: ",o,":",vscpp("br",null),"```",i.lan,vscpp("br",null),i.source,vscpp("br",null),vscpp("br",null),"```")))}},tE=class extends K{render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatCustomNotebookInfoRenderer should be used only with a notebook!");let n=FCe(this.accessor.get(Ze),this.props.documentContext.document.uri),i=uIe.find(s=>s.viewType===n),o=i?n:"custom";return vscpp(vscppf,null,vscpp(ls.UserMessage,null,"I am working on a ",o," notebook in VS Code.",vscpp("br",null),o," notebooks in VS Code are documents that contain a mix of rich Markdown, executable code snippets, ",vscpp("br",null),"and accompanying rich output. These are all separated into distinct cells and can be interleaved in any order ",vscpp("br",null),"A ",o," notebook contains multiple cells.",vscpp("br",null)),i&&vscpp(dX,{viewType:i.viewType}))}},rE=class extends K{render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatCustomNotebookCellsContextRenderer should be used only with a notebook!");let{aboveCells:n,belowCells:i,documentContext:o}=this.props,s=n||[],a=i||[],c=o.language;return vscpp(vscppf,null,(s.length>0||a.length>0)&&vscpp(ls.UserMessage,null,"The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```",c.languageId,vscpp("br",null),"Each cell is a block of code that can be executed independently.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),s.length>0&&vscpp(iE,{cells:s,title:`Here are the cells in this custom notebook:
`}),a.length>0&&vscpp(iE,{cells:a,cellIndexDelta:s.length+1,title:`Here are the cells below the current cell that I am editing in this custom notebook:
`})))}},pX=class extends K{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(ls.UserMessage,null,"Now I create a new cell in this custom Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),"This is a markdown cell. Markdown cell is used to describe and document your workflow.",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following content in the selection:",vscpp(da,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following content:",vscpp(Jf,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(ls.UserMessage,null,"In this new cell, I have the following markdown content above the selection:",vscpp(da,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(ls.UserMessage,null,"In this new cell, I have the following markdown content below the selection:",vscpp(da,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},fX=class extends K{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(ls.UserMessage,null,"Now I create a new cell in this custom Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following code in the selection:",vscpp(da,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following code:",vscpp(Jf,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(ls.UserMessage,null,"In this new cell, I have the following code above the selection:",vscpp(da,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(ls.UserMessage,null,"In this new cell, I have the following code below the selection:",vscpp(da,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},nE=class extends K{render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let{aboveCells:n,belowCells:i}=this.props,o=this.props.documentContext.language;return vscpp(vscppf,null,(n.length>0||i.length>0)&&vscpp(ls.UserMessage,null,"I am working on a Jupyter notebook.",vscpp("br",null),"This Jupyter Notebook already contains multiple cells.",vscpp("br",null),"The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```",o.languageId,vscpp("br",null),"Each cell is a block of code that can be executed independently.",vscpp("br",null),"Since it is Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells as well.",vscpp("br",null),"For the same reason, if a variable is defined in a cell, it can be used in other cells as well.",vscpp("br",null),"We should not repeat the same import or variable definition in multiple cells, unless we want to overwrite the previous definition.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),"## Examples starts here",vscpp("br",null),"Here are the cells in this Jupyter Notebook:",vscpp("br",null),"`CELL INDEX: 0",vscpp("br",null),"```python",vscpp("br",null),"import pandas as pd",vscpp("br",null),vscpp("br",null),"# create a dataframe with sample data",vscpp("br",null),"df = pd.DataFrame({'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 35], 'Gender': ['F', 'M', 'M']})",vscpp("br",null),"print(df)",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"Now I create a new cell in this Jupyter Notebook document at index 1.",vscpp("br",null),"In this new cell, I am working with the following code:",vscpp("br",null),"```python",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"plot the data frame",vscpp("br",null),vscpp("br",null),"---------------------------------",vscpp("br",null),"ChatGPT Answer",vscpp("br",null),"---------------------------------",vscpp("br",null),"To plot the dataframe, we can use the `plot()` method of pandas dataframe. Here's the code:",vscpp("br",null),vscpp("br",null),"```python",vscpp("br",null),"df.plot(x='Name', y='Age', kind='bar')",vscpp("br",null),"```",vscpp("br",null),"## Example ends here",vscpp("br",null),n.length>0&&vscpp(iE,{cells:n,title:`Here are the cells in this Jupyter Notebook:
`}),i.length>0&&vscpp(iE,{cells:i,cellIndexDelta:n.length+1,title:`Here are the cells below the current cell that I am editing in this Jupyter Notebook:
`})))}},mX=class extends K{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(ls.UserMessage,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),"This is a markdown cell. Markdown cell is used to describe and document your workflow.",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following content in the selection:",vscpp(da,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following content:",vscpp(Jf,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(ls.UserMessage,null,"In this new cell, I have the following markdown content above the selection:",vscpp(da,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(ls.UserMessage,null,"In this new cell, I have the following markdown content below the selection:",vscpp(da,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},hX=class extends K{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(ls.UserMessage,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following code in the selection:",vscpp(da,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following code:",vscpp(Jf,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(ls.UserMessage,null,"In this new cell, I have the following code above the selection:",vscpp(da,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(ls.UserMessage,null,"In this new cell, I have the following code below the selection:",vscpp(da,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},iE=class extends K{render(){return vscpp(vscppf,null,this.props.title,vscpp("br",null),this.props.cells.map((e,r)=>vscpp(gX,{index:r+(this.props.cellIndexDelta??0),cell:e})))}},gX=class extends K{render(){return vscpp(vscppf,null,"CELL INDEX: ",this.props.index,vscpp("br",null),"```",this.props.cell.language.languageId,vscpp("br",null),this.props.cell.lines.join(`
`),vscpp("br",null),"```")}};function S6(t,e,r,n){let i=e*4,o=new np(i),s=aIe(r.document,r.selection,n,new Xe(0,0,r.document.lineCount,0),r.language,o);return _6(t.get(Tt),t.get(Ze),r,s,o)}var E6=class extends K{async prepare(){let{document:e,wholeRange:r}=this.props.documentContext;return{wholeRange:e.validateRange(r)}}render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatNotebookSelection should be used only with a notebook!");let{wholeRange:n}=e,i=S6(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n),o=this.props.documentContext.document,s=new us(n,i),a=[{uri:o.uri,version:o.version,ranges:Xt([i.range.toRange(),i.above.toRange(),i.below.toRange()])}],c=ep(this.props.documentContext.document.uri),{hasCodeWithoutSelection:u,codeWithoutSelection:l,codeSelected:d}=this.props,{aboveCells:p,belowCells:f}=i,m=p||[],h=f||[],g=this.props.documentContext.language,v=g.languageId==="markdown";return vscpp(vscppf,null,vscpp("usedContext",{value:a}),vscpp("meta",{value:s}),c?vscpp(vscppf,null,(m.length>0||h.length>0)&&vscpp(nE,{documentContext:this.props.documentContext,aboveCells:m,belowCells:h}),vscpp(oE.UserMessage,null,v?vscpp(vscppf,null,u&&vscpp(vscppf,null,"Now I edit a markdown cell in this Jupyter Notebook document at index ",m.length,".",vscpp("br",null)),!u&&vscpp(vscppf,null,"Now I create a new markdown cell in this Jupyter Notebook document at index ",m.length,".",vscpp("br",null)),"This is a markdown cell. Markdown cell is used to describe and document your workflow.",vscpp("br",null),u&&vscpp(vscppf,null,vscpp(Be,{uri:o.uri,languageId:g.languageId,code:l,shouldTrim:!1}),vscpp("br",null)),u&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(Be,{uri:o.uri,languageId:g.languageId,code:d,shouldTrim:!1})):vscpp(vscppf,null,u&&vscpp(vscppf,null,"Now I edit a cell in this Jupyter Notebook document at index ",m.length,".",vscpp("br",null)),!u&&vscpp(vscppf,null,"Now I create a new cell in this Jupyter Notebook document at index ",m.length,".",vscpp("br",null)),u&&vscpp(vscppf,null,vscpp(Be,{uri:o.uri,languageId:g.languageId,code:l,shouldTrim:!1}),vscpp("br",null)),u&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(Be,{uri:o.uri,languageId:g.languageId,code:d,shouldTrim:!1})))):vscpp(vscppf,null,vscpp(tE,{documentContext:this.props.documentContext}),vscpp(rE,{documentContext:this.props.documentContext,aboveCells:m,belowCells:h}),vscpp(oE.UserMessage,null,v?vscpp(vscppf,null,u&&vscpp(vscppf,null,"Now I edit a markdown cell in this custom Notebook document at index ",m.length,".",vscpp("br",null)),!u&&vscpp(vscppf,null,"Now I create a new markdown cell in this custom Notebook document at index ",m.length,".",vscpp("br",null)),"This is a markdown cell. Markdown cell is used to describe and document your workflow.",vscpp("br",null),u&&vscpp(vscppf,null,vscpp(Be,{uri:o.uri,languageId:g.languageId,code:l,shouldTrim:!1}),vscpp("br",null)),u&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(Be,{uri:o.uri,languageId:g.languageId,code:d,shouldTrim:!1})):vscpp(vscppf,null,u&&vscpp(vscppf,null,"Now I edit a cell in this custom Notebook document at index ",m.length,".",vscpp("br",null)),!u&&vscpp(vscppf,null,"Now I create a new cell in this custom Notebook document at index ",m.length,".",vscpp("br",null)),u&&vscpp(vscppf,null,vscpp(Be,{uri:o.uri,languageId:g.languageId,code:l,shouldTrim:!1}),vscpp("br",null)),u&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(Be,{uri:o.uri,languageId:g.languageId,code:d,shouldTrim:!1})))))}},T6=class extends K{async prepare(){let{document:e,wholeRange:r}=this.props.documentContext,n=this.accessor.get(Tt),i=await this.accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.notebookSummary",!1)||this.accessor.get(ke).getConfig(Ae.NotebookSummaryExperimentEnabled),o;return i&&n.activeNotebookEditor?.notebook&&n.activeNotebookEditor?.notebook.uri.path===e.uri.path&&(o=this.accessor.get(J0).getCellExecutions(n.activeNotebookEditor.notebook.uri)),{wholeRange:e.validateRange(r),executedCells:o}}render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatNotebookSelection should be used only with a notebook!");let{wholeRange:n}=e,i=S6(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n),o=this.props.documentContext.document,s=new us(n,i),a=[{uri:o.uri,version:o.version,ranges:Xt([i.range.toRange(),i.above.toRange(),i.below.toRange()])}],c=ep(this.props.documentContext.document.uri),{hasContent:u,code:l}=this.props,{aboveCells:d,belowCells:p}=i,f=d||[],m=p||[],h=this.props.documentContext.language,g=h.languageId==="markdown",v=e.executedCells||[];return vscpp(vscppf,null,vscpp("usedContext",{value:a}),vscpp("meta",{value:s}),c?vscpp(vscppf,null,v.length>0&&vscpp(vX,{documentContext:this.props.documentContext,executedCells:v}),v.length===0&&(f.length>0||m.length>0)&&vscpp(nE,{documentContext:this.props.documentContext,aboveCells:f,belowCells:m}),vscpp(oE.UserMessage,null,g?vscpp(vscppf,null,u&&vscpp(vscppf,null,"Now I edit a markdown cell in this Jupyter Notebook document at index ",f.length,".",vscpp("br",null)),!u&&vscpp(vscppf,null,"Now I create a new markdown cell in this Jupyter Notebook document at index ",f.length,".",vscpp("br",null)),"This is a markdown cell. Markdown cell is used to describe and document your workflow.",vscpp("br",null),u&&vscpp(vscppf,null,vscpp(Be,{uri:o.uri,languageId:h.languageId,code:l,shouldTrim:!1}),vscpp("br",null))):vscpp(vscppf,null,u&&vscpp(vscppf,null,"Now I edit a cell in this Jupyter Notebook document at index ",f.length,".",vscpp("br",null)),!u&&vscpp(vscppf,null,"Now I create a new cell in this Jupyter Notebook document at index ",f.length,".",vscpp("br",null)),u&&vscpp(vscppf,null,vscpp(Be,{uri:o.uri,languageId:h.languageId,code:l,shouldTrim:!1}),vscpp("br",null))))):vscpp(vscppf,null,vscpp(tE,{documentContext:this.props.documentContext}),vscpp(rE,{documentContext:this.props.documentContext,aboveCells:f,belowCells:m}),vscpp(oE.UserMessage,null,g?vscpp(vscppf,null,u&&vscpp(vscppf,null,"Now I edit a markdown cell in this custom Notebook document at index ",f.length,".",vscpp("br",null)),!u&&vscpp(vscppf,null,"Now I create a new markdown cell in this custom Notebook document at index ",f.length,".",vscpp("br",null)),"This is a markdown cell. Markdown cell is used to describe and document your workflow.",vscpp("br",null),u&&vscpp(vscppf,null,vscpp(Be,{uri:o.uri,languageId:h.languageId,code:l,shouldTrim:!1}),vscpp("br",null))):vscpp(vscppf,null,u&&vscpp(vscppf,null,"Now I edit a cell in this custom Notebook document at index ",f.length,".",vscpp("br",null)),!u&&vscpp(vscppf,null,"Now I create a new cell in this custom Notebook document at index ",f.length,".",vscpp("br",null)),u&&vscpp(vscppf,null,vscpp(Be,{uri:o.uri,languageId:h.languageId,code:l,shouldTrim:!1}),vscpp("br",null))))))}},vX=class extends K{render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatJupyterNotebookCellSummaryContextRenderer should be used only with a notebook!");let n=this.props.documentContext.language,i=this.props.executedCells||[];return vscpp(vscppf,null,vscpp(oE.UserMessage,null,"I am working on a Jupyter notebook.",vscpp("br",null),"Users have executed the following cells in this notebook",vscpp("br",null),"Each cell contains a code block started with ```",n.languageId,vscpp("br",null),"Since it is Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells as well.",vscpp("br",null),"For the same reason, if a variable is defined in a cell, it can be used in other cells as well.",vscpp("br",null),"We should not repeat the same import or variable definition in multiple cells, unless we want to overwrite the previous definition.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),"## Examples starts here",vscpp("br",null),"Here are the executed cells in this Jupyter Notebook:",vscpp("br",null),"```python",vscpp("br",null),"import pandas as pd",vscpp("br",null),vscpp("br",null),"df = pd.DataFrame({'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 35], 'Gender': ['F', 'M', 'M']})",vscpp("br",null),"print(df)",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"Now I create a new cell in this Jupyter Notebook document at index 1.",vscpp("br",null),"USER:",vscpp("br",null),"plot the data frame",vscpp("br",null),vscpp("br",null),"---------------------------------",vscpp("br",null),"ChatGPT Answer",vscpp("br",null),"---------------------------------",vscpp("br",null),"To plot the dataframe, we can use the `plot()` method of pandas dataframe. Here's the code:",vscpp("br",null),vscpp("br",null),"```python",vscpp("br",null),"df.plot(x='Name', y='Age', kind='bar')",vscpp("br",null),"```",vscpp("br",null),"## Example ends here",vscpp("br",null),i.map(o=>vscpp(yX,{cell:o}))))}},yX=class extends K{render(){return vscpp(vscppf,null,"```",this.props.cell.document.languageId,vscpp("br",null),this.props.cell.document.getText(),vscpp("br",null),"```")}};var ub=class extends K{render(){let e=this.props.language;return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"The user has a ",e.languageId," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Each code block starts with ``` and ",Fs.forLanguage(e),".",vscpp("br",null),"Answer with a single ",e.languageId," code block.",vscpp("br",null),"If you modify existing code, you will use the ",cs.begin(e)," and ",cs.end(e)," markers.")}};var C6=class extends K{async prepare(){let e=this.accessor.get(Tt);if(e.activeNotebookEditor?.notebook.uri.path!==this.props.documentContext.document.uri.path)return{variables:[],packages:[]};let n=e.activeNotebookEditor?.notebook;if(!n)return{variables:[],packages:[]};let i=await this.accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.notebookPackages",!1)||this.accessor.get(ke).getConfig(Ae.NotebookPackagesExperimentEnabled),o=this.accessor.get(J0).getVariables(n.uri),s=i?Promise.resolve([]):this.accessor.get(J0).getPipPackages(n.uri),[a,c]=await Promise.all([o,s]);return{variables:a,packages:c}}render(e){let{priorities:r}=this.props;return vscpp(vscppf,null,e.variables.length!==0&&vscpp(vscppf,null,vscpp(Sl.UserMessage,{priority:r.runtimeCore},"The following variables are present in this Jupyter Notebook:",e.variables.map(n=>vscpp(vscppf,null,vscpp(Sl.TextChunk,null,"Name: ",n.variable.name,vscpp("br",null),n.variable.type&&vscpp(vscppf,null,"Type: ",n.variable.type),vscpp("br",null),"Value: ",n.variable.value,vscpp("br",null),n.indexedChildrenCount>0&&vscpp(vscppf,null,"Length: ",n.indexedChildrenCount),vscpp("br",null),n.variable.summary&&vscpp(vscppf,null,"Summary: ",n.variable.summary)))))),e.packages.length!==0&&vscpp(vscppf,null,vscpp(Sl.UserMessage,{priority:r.other},"The following pip packages are available in this Jupyter Notebook:",e.packages.map(n=>vscpp(vscppf,null,vscpp(Sl.TextChunk,null,n.name,"==",n.version),vscpp("br",null))))))}},I6=class extends K{async prepare(e){let n=await this.accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.notebookPriorities",!1)||this.accessor.get(ke).getConfig(Ae.NotebookPrioritiesExperimentEnabled)?uX:{},i=this.accessor.get(ke).getConfig(Ae.NotebookAdditionalCodeGenerationRuleEnabled),{documentContext:o}=this.props,s=await this.accessor.get(De).isCopilotIgnored(o.document.uri),a=o.document.validateRange(o.wholeRange);return{summarizedDocument:await Eu(this.accessor.get(xt),this.accessor.get(Mt),o.document,o.fileIndentInfo,o.language,a,e.endpoint.modelMaxPromptTokens/3),isIgnored:s,priorities:n,additionalCodeGenerationRule:i}}render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatNotebookBasePrompt should be used only with a notebook!");let{language:n}=this.props.documentContext,i=n.languageId!=="markdown",o=ep(this.props.documentContext.document.uri),s=e.summarizedDocument.splitAroundOriginalSelectionEnd(),{codeAbove:a,hasContent:c,codeBelow:u}=s,l=`${a}$PLACEHOLDER$${u}`,d=on.combine(i?on.createCodeBlockFilter():void 0,g=>g.trim()!=="$PLACEHOLDER$"),p=r.endpoint.model==="gpt-4"?s.insertStreaming(d):s.insertOrReplaceStreaming(d),f=s.createReplyInterpreterFactory(i?1:0,p),m=e.priorities,h=e.additionalCodeGenerationRule??!1;return vscpp(vscppf,null,vscpp("meta",{value:new Qn(f)}),vscpp(Sl.SystemMessage,{priority:m.core},vscpp(ub,{language:n}),vscpp("br",null),o&&vscpp(vscppf,null,"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If the Jupyter Notebook already contains variables, you should respect the name and value of the variables, and use them in your code when necessary.",vscpp("br",null)),c&&vscpp(vscppf,null,"The user includes existing code and marks with $PLACEHOLDER$ where the new code should go.",vscpp("br",null)),c&&vscpp(vscppf,null,'DO NOT include the text "$PLACEHOLDER$" in your reply.',vscpp("br",null)),c&&vscpp(vscppf,null,"DO NOT repeat any code from the user in your reply.",vscpp("br",null)),!c&&i&&vscpp(vscppf,null,"Your must generate a code block surrounded with ``` that will be used in a new file",vscpp("br",null)),!i&&vscpp(vscppf,null,"When generating content for markdown cell, provide the answer directly without any additional introductory text. Ensure that the response is structured in Markdown format to seamlessly integrate into the markdown file."),vscpp(sn,null)),this.props.history&&vscpp(Ht,{priority:m.history??700,history:this.props.history}),vscpp(T6,{documentContext:this.props.documentContext,hasContent:c,code:l,priority:m.core}),vscpp(C6,{documentContext:this.props.documentContext,priorities:m,query:this.props.query}),vscpp(Sl.UserMessage,{priority:m.core},h&&vscpp(vscppf,null,"Please generate code for: "),this.props.query,c&&i&&vscpp(vscppf,null,"The code that would fit at $PLACEHOLDER$ with ``` is:"),c&&!i&&vscpp(vscppf,null,"The code that would fit at $PLACEHOLDER$ without ``` is:")))}},w6=class extends K{async prepare(e){let n=await this.accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.notebookPriorities",!1)||this.accessor.get(ke).getConfig(Ae.NotebookPrioritiesExperimentEnabled)?uX:{},i=this.accessor.get(ke).getConfig(Ae.NotebookAdditionalCodeGenerationRuleEnabled),{documentContext:o}=this.props,s=await this.accessor.get(De).isCopilotIgnored(o.document.uri),a=o.document.validateRange(o.wholeRange);return{summarizedDocument:await Eu(this.accessor.get(xt),this.accessor.get(Mt),o.document,o.fileIndentInfo,o.language,a,e.endpoint.modelMaxPromptTokens/3),isIgnored:s,priorities:n,additionalCodeGenerationRule:i}}render(e,r){if(!Yt(this.props.documentContext.document.uri))throw wr("InlineChatNotebookEditPrompt should be used only with a notebook!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let n=ep(this.props.documentContext.document.uri),{language:i}=this.props.documentContext,o=i.languageId==="markdown",s=e.summarizedDocument.splitAroundAdjustedSelection(),{codeAbove:a,codeSelected:c,codeBelow:u,hasCodeWithoutSelection:l}=s,d=`${a}$SELECTION_PLACEHOLDER$${u}`,p=s.createReplyInterpreterFactory(1,s.replaceSelectionStreaming(on.combine(on.createCodeBlockFilter(),h=>h.trim()!=="$SELECTION_PLACEHOLDER$"))),f=e.priorities,m=e.additionalCodeGenerationRule??!1;return vscpp(vscppf,null,vscpp("meta",{value:new Qn(p)}),vscpp(Sl.SystemMessage,{priority:f.core},vscpp(ub,{language:i}),vscpp("br",null),n&&vscpp(vscppf,null,"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If the Jupyter Notebook already contains variables, you should respect the name and value of the variables, and use them in your code when necessary.",vscpp("br",null)),o&&vscpp(vscppf,null,"When generating content for markdown cell, provide the answer directly without any additional introductory text. Ensure that the response is structured in Markdown format to seamlessly integrate into the markdown file."),l&&vscpp(vscppf,null,"The user includes existing code and marks with $SELECTION_PLACEHOLDER$ where the selected code should go.",vscpp("br",null)),vscpp(sn,null)),this.props.history&&vscpp(Ht,{priority:f.history??700,history:this.props.history}),vscpp(E6,{documentContext:this.props.documentContext,hasCodeWithoutSelection:l,codeWithoutSelection:d,codeSelected:c,priority:f.core}),vscpp(C6,{documentContext:this.props.documentContext,priority:f.core,priorities:f,query:this.props.query}),vscpp(Sl.UserMessage,{priority:f.core},m&&vscpp(vscppf,null,"Please generate code for: "),this.props.query,vscpp("br",null),l&&o&&vscpp(vscppf,null,"The modified $SELECTION_PLACEHOLDER$ code without ``` is:"),l&&!o&&vscpp(vscppf,null,"The modified $SELECTION_PLACEHOLDER$ code with ``` is:")))}};var s0=class t{constructor(e,r,n){this.accessor=e;this.documentContext=r;this.editStrategy=n;this.replyInterpreterFactory=null}static async createIntentInvocation(e,r,n,i,o){let{location:s,documentContext:a}=n;if(!a)throw new Error("Open a file to add code.");let c=new t(r,a,i);return{intent:e,location:s,endpoint:o,promptCrafter:c,createReplyInterpreter:(u,l)=>c.createReplyInterpreter(u,l)}}async buildPrompt(e,r,n,i,o,s){let c=e.getLatestTurn().request.message,u=e.turns.length>1?e.turns.slice(0,-1):[],l;Yt(this.documentContext.document.uri)?l=this.editStrategy===4?I6:w6:this.documentContext.document.languageId==="markdown"?l=this.editStrategy===4?y6:b6:l=this.editStrategy===4?f6:g6;let d=new Je(r,l,{documentContext:this.documentContext,query:c,history:u},this.accessor.get(ge),this.accessor),p=await d.render(i,s);return this.replyInterpreterFactory=d.getMeta(Qn)?.factory??null,p}createReplyInterpreter(e,r){if(!this.replyInterpreterFactory)throw new Error("Could not create reply interpreter without reply interpreter factory!");return this.replyInterpreterFactory(e,r)}};var a0=class t{constructor(){this.id=t.ID;this.description=lIe.t("Make changes to existing code");this.intentDetectionInput={sampleQuestion:"Change this method to use async/await",modelDescription:"Make changes to existing code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="edit"}async invoke(e,r){let n=await e.get(Ue).getUserRequestEndpoint(this.locations[0],this.id);return s0.createIntentInvocation(this,e,r,2,n)}};var dIe=W(_r());var c0=class t{constructor(){this.id=t.ID;this.description=dIe.t("Generate new code");this.intentDetectionInput={sampleQuestion:"Add a function that returns the sum of two numbers",modelDescription:"Generate new code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="generate"}async invoke(e,r){let n=await e.get(Ue).getUserRequestEndpoint(this.locations[0],this.id);return s0.createIntentInvocation(this,e,r,4,n)}};var gIe=W(st());var u0=class extends K{async prepare(){let e=Object.entries(MS).reduce((r,[n,i])=>{let o=Xa.getCommand(n,this.props.location)?.intent?.description;r+=`
* ${o}`;for(let s of Object.values(i)){let a=Xa.getCommand(s,this.props.location)?.intent?.description;r+=`
* ${a}`}return r},"");return{modelName:DZe(this.props.endpoint.model),commandDescriptions:e}}render(e){return vscpp(vscppf,null,"You can answer general programming questions and perform the following tasks: ",e.commandDescriptions,vscpp("br",null),"You use the ",e.modelName," version of OpenAI's GPT models.")}};function DZe(t){switch(t){case"gpt-4":return"GPT-4";case"code-llama":return"Code Llama";case"gpt-3.5-turbo":case"copilot-preview-gpt35-centralus":return"GPT 3.5 Turbo";case"copilot-preview-gpt4-centralus":case"gpt-4-0125-adaf089e":default:return"GPT-4 Turbo"}}var qr=class extends K{render(){return vscpp(vscppf,null,'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.")}};var NZe=["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],Tr=class extends K{render(){let r=this.accessor.get(ke).getConfig(Ae.LocaleOverride);if(!NZe.find(i=>r===i))return;let n=r!=="auto"?r:this.accessor.get(St).language;if(n!=="en")return vscpp(vscppf,null,"Respond in the following locale: ",n)}};var lb=W(st());var sE=W(st());var R6=class extends K{async prepare(e){let r=this.accessor.get(Lc),n="uri"in this.props.variableValue?this.props.variableValue.uri:this.props.variableValue,i="range"in this.props.variableValue?this.props.variableValue.range:void 0,o=await this.accessor.get(Ze).openTextDocument(n),s=o.getText(i).replace(/\r/g,"");return{chunks:await r.chunkFileSemantic(o.uri,s,Vr.None),languageId:o.languageId,fullText:s}}async truncateMarkdownContent(e,r,n,i){let s=await this.accessor.get(Lc).chunkFileSemantic(r.uri,e,Vr.None),a=`

<!-- Content truncated -->`,c=this.accessor.get(ge),u=c.tokenLength(a),l=Math.floor(n.tokenBudget/4)-u,d="",p=0,f=!1;for(let m of s){let h=c.tokenLength(m.text);if(h+p>l){f=!0;break}d+=`

`+m.text,p+=h}return f&&(d+=a),i=d,i}render(e,r){if(!e.chunks.length)return;let n=KTe(e.fullText);return vscpp(sE.UserMessage,{priority:this.props.priority},"# ",this.props.variableName.toUpperCase()," CONTEXT",vscpp("br",null),n,e.languageId,vscpp("br",null),e.chunks.map(i=>vscpp(sE.TextChunk,null,vscpp("references",{value:[new sE.PromptReference({variableName:this.props.variableName,value:this.props.variableValue})]}),i.text)),vscpp("br",null),n)}};var wi=class extends K{async prepare(){let{query:e,chatVariables:r}=this.props,n=[];return r.forEach((i,o)=>{let s=i.value;if(s){let a=this.uniqueFileName(i.name,r.slice(o+1));n.push({variableName:a,variableValue:s}),i.range&&(e=e.slice(0,i.range[0])+`[#${a}](#${a}-context)`+e.slice(i.range[1]))}}),n.reverse(),{data:n,rewrittenMessage:e}}render(e,r){let n=[];for(let{variableName:i,variableValue:o}of e.data)o instanceof Zn||o instanceof Ea?n.push(vscpp(R6,{variableName:i,variableValue:o})):typeof o=="string"&&n.push(vscpp(lb.UserMessage,{priority:this.props.priority&&this.props.priority-1},vscpp(lb.TextChunk,null,vscpp("references",{value:[new lb.PromptReference({variableName:i})]}),"# ",i.toUpperCase()," CONTEXT",vscpp("br",null),o)));return vscpp(vscppf,null,...n,vscpp(lb.UserMessage,{priority:this.props.priority},e.rewrittenMessage))}uniqueFileName(e,r){let n=r.filter(i=>i.name===e).length;return n===0?e:`${e}-${n}`}};var mIe=W(st()),hIe=W(require("path"));var pIe=W(st()),fIe=W(require("path"));var A6=class extends K{constructor(r,n){super(r,n);this._ignoreService=this.accessor.get(De)}async prepare(r){let n=this.accessor.get(Tt).activeTextEditor;if(!n)return{isIgnored:!1};let i=n.visibleRanges[0],o=n.document;return{isIgnored:await this._ignoreService.isCopilotIgnored(o.uri),document:o,range:i}}render(r,n){let{document:i,range:o}=r;if(i&&o){let s=[{uri:i.uri,version:i.version,ranges:[o]}],a=[new xo.PromptReference({uri:i.uri,range:o})];return r.isIgnored?vscpp("ignoredFiles",{value:[i.uri]}):vscpp(vscppf,null,vscpp("usedContext",{value:s}),vscpp("references",{value:a}),vscpp(pIe.UserMessage,{priority:this.props.priority},"Excerpt from active file ",fIe.basename(i.uri.path),", lines ",o.start.line+1," to ",o.end.line+1,":",vscpp("br",null),vscpp(Be,{code:i.getText(o),languageId:i.languageId,uri:i.uri}),vscpp("br",null),vscpp("br",null),o.isSingleLine&&vscpp(vscppf,null,"The cursor is on line: ",o.start.line)))}else return}};var In=class t extends K{static{this.variableInfo={name:"selection",fullName:"Selection",icon:"selection",description:"The current selection in the active editor",defaultEnablement:!0}}async prepare(e){return this.props.document?{isIgnored:await this.accessor.get(De).isCopilotIgnored(this.props.document.uri)}:{isIgnored:!1}}render(e,r){let n=t.getCurrentSelection(this.accessor.get(Tt));if(!n)return vscpp(A6,null);let i=[{uri:n.activeDocument.uri,version:n.activeDocument.version,ranges:[n.range]}],o=[new xo.PromptReference(new Ea(n.activeDocument.uri,n.range))],s=[n.activeDocument.uri];return e.isIgnored?vscpp("ignoredFiles",{value:s}):vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp(mIe.UserMessage,{priority:this.props.priority},"Active selection:",vscpp("br",null),vscpp("br",null),vscpp("br",null),n.fileName&&vscpp(vscppf,null,"From the file: ",hIe.basename(n.fileName),vscpp("br",null)),vscpp(Be,{code:n.selectedText,languageId:n.languageId,uri:n.activeDocument.uri,references:o}),vscpp("br",null),vscpp("br",null)))}static getCurrentSelection(e,r=!1){let n=e.activeTextEditor,i=n?.document;if(i){let o=n.selection;if(o&&(!o.isEmpty||o.isEmpty&&r)){let s=i.languageId,a=i.getText(o);return{languageId:s,selectedText:a,activeDocument:i,range:o,fileName:i.fileName}}}}};var P6=class extends K{render(e,r){let n=this.accessor.get(St).OS,i=this.props.chatVariables.find(o=>o.name===In.variableInfo.name);return vscpp(vscppf,null,vscpp(gIe.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),vscpp(qr,null),vscpp(Br,null),vscpp("br",null),vscpp(u0,{location:2,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The user is working on a ",n," machine. Please respond with system specific commands if applicable.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp(Tr,null)),this.props.history&&vscpp(Ht,{priority:700,history:this.props.history}),!i&&vscpp(In,{document:this.props.documentContext?.document,range:this.props.documentContext?.selection,priority:800}),vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var aE=class t extends Mo{constructor(r,n=P6,i){super();this.accessor=r;this.prompt=n;this.documentContext=i}static async createIntentInvocation(r,n,i,o){let{location:s,documentContext:a}=i,c=new t(n,o,a),u=await n.get(Ue).getUserRequestEndpoint(s,r.id);return{intent:r,location:s,endpoint:u,promptCrafter:c}}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new Je(n,this.prompt,{documentContext:this.documentContext,endpoint:n,query:u,history:l,chatVariables:i},this.accessor.get(ge),this.accessor)}};var qs=class t{constructor(){this.id=t.ID;this.locations=[1,2];this.description="Intent of this command is unclear or is not related to information technologies";this.commandInfo={hiddenFromUser:!0};this.intentDetectionInput={sampleQuestion:"Add a dog to this comment."}}static{this.ID="unknown"}static{this.Instance=new t}async invoke(e,r){if(r.location===1){let n=await e.get(Ue).getUserRequestEndpoint(1,this.id);return s0.createIntentInvocation(this,e,r,2,n)}return aE.createIntentInvocation(this,e,r)}};var uE="_github.copilot.openRelativePath",N6="_github.copilot.openSymbolInFile",bX=[uE,N6,"_github.copilot.openSymbolFromReferences"];function D6(t,e){return`[\`${t}\`](${L6(uE,[{scheme:e.scheme,authority:e.authority,path:e.path,query:e.query,fragment:e.fragment}])} "${yIe(e.fsPath)}")`}function LZe(t,e){return`[\`${t}\`](${L6(N6,[e.replace(/\\/g,"/"),t])} "${yIe(e)}")`}function L6(t,e){return`command:${t}?${encodeURIComponent(JSON.stringify(e))}`}function yIe(t){return t.replace(/"/g,'\\"')}var _X=new Set;function bIe(t){return _X.add(t),{dispose:()=>_X.delete(t)}}var Zf;(o=>{let t;(u=>(u[u.Default=0]="Default",u[u.CodeBlock=1]="CodeBlock",u[u.Accumulating=2]="Accumulating"))(t=o.Type||={});let e;(c=>(c[c.Word=0]="Word",c[c.InlineCode=1]="InlineCode"))(e=o.AccumulationType||={}),o.Default={type:0};class n{constructor(a,c){this.fence=a;this.indent=c;this.type=1}}o.CodeBlock=n;class i{constructor(a,c=0){this.pendingText=a;this.accumulationType=c;this.type=2}}o.AccumulatingWord=i})(Zf||={});var cE=class{constructor(e,r,n,i=[]){this.references=e;this.workspaceFolders=r;this.fileSystem=n;this._state=Zf.Default;this._appliedText="";this.additionalLinkifiers=Array.from(_X,o=>o(e,r,n)).concat(i)}async append(e,r){let n={text:"",trustedCommands:bX};for(let i of e.split(/(\s+)/))if(i.length)switch(this._state.type){case 0:{let o=i.match(/(^|\n)\s*(`{3,}|~{3,})/);if(o){let s=this._appliedText.match(/(\n|^)([ \t]*)$/);this._state=new Zf.CodeBlock(o[2],s?.[2]??""),n=k6(n,this.doAppend(i))}else if(/\s/.test(i)){let s=await this.doLinkifyAndAppend(i,r);n=k6(n,s)}else/^.*`[^`]*$/.test(e)?this._state=new Zf.AccumulatingWord(i,1):this._state=new Zf.AccumulatingWord(i);break}case 1:{if(new RegExp("(^|\\n)"+this._state.fence+"($|\\n)").test(i)){let o=this._appliedText.match(/(\n|^)([ \t]*)$/);o&&o[2].length<=this._state.indent.length&&(this._state=Zf.Default)}n=k6(n,this.doAppend(i));break}case 2:{if(this._state.accumulationType===1?/`/.test(i):/\s/.test(i)){let o=this._state.pendingText+i;this._state=Zf.Default;let s=await this.doLinkifyAndAppend(o,r);n=k6(n,s)}else this._state=new Zf.AccumulatingWord(this._state.pendingText+i,this._state.accumulationType);break}}return n}async flush(e){if(this._state.type===2){let r=this._state.pendingText;return this._state=Zf.Default,this.doLinkifyAndAppend(r,e)}}doAppend(e){return this._appliedText=this._appliedText+e,{text:e,trustedCommands:bX}}async doLinkifyAndAppend(e,r){return this.doAppend(e),await OZe(e,this.references,this.workspaceFolders,this.fileSystem,this.additionalLinkifiers,r)}};async function OZe(t,e,r,n,i,o){if(t=await RA(t,/\[`([^`\[\]]+?)`]\((\S+?\.\w+)\)/g,async(c,u,l)=>{let d=Zn.joinPath(r[0],l);return await vIe(n,d)?LZe(u,l):"`"+u+"`"}),o?.isCancellationRequested)return{text:t};let s=async(c,u,l)=>{if(/^\w+:/.test(l)||!r.length)return c;for(let f of r){let m=Zn.joinPath(f,l);if(await vIe(n,m))return D6(l,m)}let d=TA(l),p=e.map(f=>"variableName"in f.anchor?j0(f.anchor.value)?f.anchor.value:f.anchor.value?.uri:j0(f.anchor)?f.anchor:f.anchor.uri).filter(f=>!!f).find(f=>Pc(f)===d);return p?D6(l,p):u};if(t=await RA(t,/\[([^`\s]+)\]\((\1)\)/g,s),o?.isCancellationRequested)return{text:t};t=await RA(t,/(?<!\[)(`([^`\s]+)`)(?!\])/g,s);let a=new Set(bX);for(let c of i){let u=await c.linkify(t,o);if(o?.isCancellationRequested)return{text:t};if(u){t=u.text;for(let l of u.trustedCommands??[])a.add(l);break}}return t=t.replace(/\[([^\[\]]+)]\((\S+?\.\w+)\)/g,(c,u,l)=>/^\w+:/.test(l)?c:u),{text:t,trustedCommands:Array.from(a)}}async function vIe(t,e){try{return await t.stat(e),!0}catch{return!1}}function k6(t,e){return{text:t.text+e.text,trustedCommands:Array.from(new Set([...t.trustedCommands??[],...e.trustedCommands??[]]))}}var O6=class{constructor(e,r,n,i,o){this.sequencer=Promise.resolve();let s=e.get(fn),a=e.get(Ze);this._linkifier=new cE(r,a.getWorkspaceFolders(),s,i),this._progress=n,this._token=o}report(e){this.enqueue(()=>{if(e instanceof pn)return this.doApplyText(e.value.value);this.flush(),this._progress.report(e)},!1)}enqueue(e,r=!0){return r&&(this.sequencer=this.sequencer.then(()=>this.doFlush())),this.sequencer=this.sequencer.then(e),this.sequencer}flush(){return this.enqueue(()=>this.doFlush(),!1)}async doFlush(){let e=await this._linkifier.flush(this._token);this._token.isCancellationRequested||e&&this.outputMarkdown(e)}async doApplyText(e){if(!e)return;let r=await this._linkifier.append(e,this._token);this._token.isCancellationRequested||r&&this.outputMarkdown(r)}outputMarkdown(e){let r=new Wo(e.text);r.isTrusted={enabledCommands:e.trustedCommands??[]},this._progress.report(new pn(r))}};var MZe=3,FZe=3,UZe=1;function lE(t,e){let r=0;for(let n of e)r+=BZe(t,n);return r+=MZe,r}function BZe(t,e){let r=FZe;for(let[n,i]of Object.entries(e))i&&(r+=t.tokenLength(i),n==="name"&&(r+=UZe));return r}var M6=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=co.empty;this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r}handleEdits(e){let r=e.apply(this._text),n=this._combinedEditsSinceStart.compose(e);n=n.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=n,this._text=r}computeTrackedEditsSurvivalScore(){let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewTextRanges(),s=qZe(o,this._combinedEditsSinceStart);for(let a=0;a<o.length;a++){let c=this._originalEdits.edits[a],u=this.originalText.substring(c.replaceRange.start,c.replaceRange.endExclusive),l=c.newText,d=s[a],p=this._text.substring(d.start,d.endExclusive),f=zR(p,l),m=zR(l,u),h=zR(p,u);if(m!==1){let y=1-Math.max(h-m,0)/(1-m);n+=c.replaceRange.length*y,i+=c.replaceRange.length}let g=c.newText.length*f,v=c.newText.length;e+=g,r+=v}return{fourGram:r===0?1:e/r,noRevert:i===0?1:n/i}}};function zR(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let a=0;a<=t.length-4;a++){let c=t.substring(a,a+4),u=n.get(c)||0;n.set(c,u+1)}for(let a=0;a<=e.length-4;a++){let c=e.substring(a,a+4),u=n.get(c)||0;n.set(c,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let a of n.values())o+=Math.abs(a);return(i-o)/i}function qZe(t,e){t=t.slice();let r=[],n=0;for(let i of e.edits){for(;;){let s=t[0];if(!s||s.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(s.delta(n))}let o=[];for(;;){let s=t[0];if(!s||!s.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(s)}for(let s=o.length-1;s>=0;s--){let a=o[s],c=a.intersect(i.replaceRange).length;a=a.deltaEnd(-c+(s===0?i.newText.length:0));let u=a.start-i.replaceRange.start;u>0&&(a=a.delta(-u)),s!==0&&(a=a.delta(i.newText.length)),a=a.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(a)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}var dE=class{constructor(e,r,n,i,o,s,a,c,u){this._document=e;this._originalDocumentText=r;this._edits=n;this._sharedProps=o;this._sharedMeasures=s;this._gitService=c;this._telemetryService=u;this._editSurvivalTracker=new M6(this._originalDocumentText,this._edits);this._store=new qt;this._store.add(a.onDidChangeTextDocument(l=>{if(l.document!==this._document)return;let d=co.from(l.contentChanges);this._editSurvivalTracker.handleEdits(d)})),this._editSurvivalTracker.handleEdits(i),this._initialBranchName=this._getCurrentBranchName(),this._reportAfter(30*1e3),this._reportAfter(120*1e3),this._reportAfter(300*1e3),this._reportAfter(600*1e3,()=>{this._store.dispose()})}_getCurrentBranchName(){return this._gitService.getRepository(this._document.uri)?.headBranchName}_reportAfter(e,r){let n=new MA(()=>{this._report(e),n.dispose(),r&&r()},e);this._store.add(n)}_report(e){let r=this._editSurvivalTracker.computeTrackedEditsSurvivalScore(),i=this._getCurrentBranchName()!==this._initialBranchName;this._telemetryService.sendMSFTTelemetryEvent("inline.trackEditSurvival",this._sharedProps,{...this._sharedMeasures,survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:e,didBranchChange:i?1:0})}};dE=fe([ie(6,Ze),ie(7,ei),ie(8,Ee)],dE);var pE=oe("IFeedbackReporter");function fE(){let t=bn(),e=Ar.createAndMarkAsIssued({messageId:t});return new xX(e)}var xX=class t{constructor(e){this.raw=e}get properties(){return this.raw.properties}get measurements(){return this.raw.measurements}markAsDisplayed(){this.raw.markAsDisplayed()}extendedBy(e,r){let n=this.raw.extendedBy(e,r);return new t(n)}};function F6(t,e,r,n,i,o,s){let a=t.turns[t.turns.length-1].contextParts.map(l=>l.kind).sort(),c={source:"user",turnIndex:(t.turns.length-1).toString(),conversationId:e,uiKind:r,inputSources:a.join(",")},u={promptTokenLen:i,messageCharLen:n.length};return o&&(c.suggestion=o),s=s.extendedBy(c,u),s}function U6(t,e,r,n,i,o,s){i!==void 0&&(s=s.extendedBy({offTopic:i.toString()})),s=s.extendedBy({headerRequestId:r}),SX(t,o,e,n,{},{},s)}function B6(t,e,r,n,i,o,s,a){let c=EX(i);SX(t,s,n,i,{source:"model",turnIndex:e.turns.length.toString(),conversationId:r,headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:i.length,numCodeBlocks:c.length},a)}function q6(t,e,r,n,i,o,s,a){SX(t,s,n,i,{source:"offTopic",turnIndex:e.turns.length.toString(),conversationId:r,userMessageId:o,uiKind:n},{messageCharLen:i.length},a)}function SX(t,e,r,n,i,o,s){let a={...n?{messageText:n}:{},...i};e&&(i.languageId=e.languageId,o.documentLength=e.getText().length);let c=s.extendedBy(i,o),u=s.extendedBy(a),l=HZe(r),d=t.get(Ee);return d.sendGHTelemetryEvent(`${l}.message`,c.raw.properties,c.raw.measurements),d.sendRestrictedGHTelemetryEvent(`${l}.messageText`,u.raw.properties,u.raw.measurements),c.raw}function H6(t,e,r,n,i){return mE(t,i,{suggestion:e,messageId:r,suggestionId:n},{},"conversation.suggestionShown")}function mE(t,e,r,n,i,o){let s=o??Ar.createAndMarkAsIssued();e&&(r.languageId=e.languageId,n.documentLength=e.getText().length);let a=s.extendedBy(r,n);return t.get(Ee).sendGHTelemetryEvent(i,a.properties,a.measurements),a}function HZe(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}function EX(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}var G6={top_p:1,temperature:.1};var z6=oe("ICommandService"),j6=class{constructor(e){this.accessor=e;this.commandPrefix="/";this.readConfig()}readConfig(){this._enabledCommands=this.accessor.get(ke).getConfigMixedWithDefaults(Ae.ConversationSlashCommandEnablements)}isCommandEnabled(e,r){if(this._enabledCommands===void 0)return!1;if(this._enabledCommands[e]===void 0){if(this._enabledCommands["*"])return!0;let n=Xa.getCommand(e,r)?.intent?.commandInfo?.defaultEnablement;return typeof n=="boolean"?n:!0}return!!this._enabledCommands[e]}parse(e,r){if(e=e.trimStart(),e.startsWith(this.commandPrefix)){let n=/\/(?<intentId>\w+)(?::(?<intentArgument>\w*))?(?<restOfQuery>\s.*)?/s.exec(e)?.groups,i=n?.intentId??"",o=n?.intentArgument??"",s=(n?.restOfQuery??"").trim(),a=Xa.getCommand(i,r);if(this.readConfig(),a&&this.isCommandEnabled(i,r))return{command:a,intentArgument:o,restOfQuery:s}}return{restOfQuery:e}}getCommand(e,r){return this.allCommands(r).find(n=>n.commandId===e)}allCommands(e){return this.readConfig(),Xa.getCommands(e).filter(r=>this.isCommandEnabled(r.commandId,e))}};var gE=W(st());var GZe=["code","doc","edit","search","workspace","tests","fix","explain","review","terminal","terminalExplain","unknown","api","newNotebook","new"],Ri=new class{constructor(){this.intents=new Set}registerIntent(t){t.locations.every(e=>this.getIntent(t.id,e))||(this.intents.add(t),(!t.commandInfo||!t.commandInfo.hiddenFromUser)&&Xa.registerCommand({commandId:t.id,intent:t,details:t.description,locations:t.locations}))}getIntents(t){let e=r=>{let n=GZe.indexOf(r);return n===-1?Number.MAX_SAFE_INTEGER:n};return Array.from(this.intents.values()).filter(r=>r.locations.includes(t)).sort((r,n)=>e(r.id)-e(n.id))}getIntent(t,e){return this.getIntents(e).find(r=>r.id===t)}};var hE=class t{constructor(e,r){this.accessor=e;this.location=r;this.logger=e.get(ue).getPromptResponseLogger("intent detection"),this.telemetryService=e.get(Ee),this.options=e.get(Vi)}async detectIntent(e,r,n,i,o,s,a){let c=await this.accessor.get(Ue).getChatEndpoint("gpt-3.5-turbo"),u=new Je(c,TX,{preferredIntent:s,location:this.location,userQuestion:r,documentContext:e},this.accessor.get(ge),this.accessor),{messages:l}=await u.render(void 0,i);this.logger.logPrompt(l);let d=await this.accessor.get(Jt).fetchMany(l,void 0,i,this.location,c,{agent:n},{temperature:this.options.temperature,top_p:this.options.topP,stop:[";"],n:1},{messageSource:"chat.intentprompt"}),p=this.handleResult(d,o,r);this.sendTelemetry(s,p?.id,e?.language.languageId,a);let f=u.getMeta(V6);return this.sendInternalTelemetry(r,s,f?.filePath,f?.fileExcerpt,p?.id,e?.language.languageId,a),p}handleResult(e,r,n){if(this.logger.logResponse(e),e.type!=="success"){this.sendPromptIntentErrorTelemetry(r,e);return}let i=e.value.map(c=>c.trimStart().split(`
`)[0].replace(/function id:|response:/i,"").trim()),o=i.map(c=>Ri.getIntent(c,this.location)).filter(c=>c!==void 0&&c.id!==qs.ID),s=t.pickMostFrequent(o);this.logger.info(`picked intent "${s?.id}" from ${JSON.stringify(e.value,null,"	")}`);let a=r.extendedBy({messageText:n,promptContext:i.join(),intent:s?.id||"unknown"});return this.telemetryService.sendRestrictedGHTelemetryEvent("conversation.promptIntent",a.raw.properties,a.raw.measurements),s}sendPromptIntentErrorTelemetry(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason});this.telemetryService.sendRestrictedGHTelemetryErrorEvent("conversation.promptIntentError",n.raw.properties,n.raw.measurements)}static pickMostFrequent(e){if(e.length===0)return;let r=new Map;for(let i of e){let o=r.get(i.id)??[0,i];o[0]+=1,r.set(i.id,o)}let[,n]=[...r.values()].reduce((i,o)=>i[0]>o[0]?i:o);return n}sendTelemetry(e,r,n,i){this.accessor.safeGet(Ee)?.sendMSFTTelemetryEvent("intentDetection",{chatLocation:mt.toString(this.location),preferredIntent:e??"<none>",detectedIntent:r??"<none>",languageId:n??"<none>",isRerunWithoutIntentDetection:String(i)??"<none>"})}sendInternalTelemetry(e,r,n,i,o,s,a){i=i&&i.length<5e3?i:void 0,this.accessor.safeGet(Ee)?.sendInternalMSFTTelemetryEvent("intentDetection",{chatLocation:mt.toString(this.location),request:e,preferredIntent:r??"<none>",filePath:n??"<none>",fileExerpt:i??"<none>",detectedIntent:o??"<none>",languageId:s??"<none>",isRerunWithoutIntentDetection:String(a)??"<none>"},{})}},V6=class extends gE.PromptMetadata{constructor(r,n){super();this.fileExcerpt=r;this.filePath=n}},TX=class extends K{async prepare(e,r,n){let{documentContext:i}=this.props,o=!1;return i!==void 0&&(o=await this.accessor.get(De).isCopilotIgnored(i.document.uri)),{isDocumentCopilotIgnored:o}}render(e){let{preferredIntent:r,location:n,userQuestion:i,documentContext:o}=this.props,s,a,c;try{if(o!==void 0&&!e.isDocumentCopilotIgnored){let{document:f,selection:m}=o;s=f.uri;let h=new Xe(new jn(Math.max(m.start.line-5,0),0),new jn(Math.min(m.end.line+5,f.lineCount),f.lineAt(m.end.line).text.length));a=f.getText(h),c=a.trim().length>0?vscpp(Be,{uri:s,languageId:f.languageId,code:a,shouldTrim:!1}):void 0}}catch{}let u=new V6(a,s?.path),l=this.accessor.get(ke),d=Ri.getIntents(n),p=[];for(let f=0;f<d.length;f++){let m=d[f];if(!(m.id==="review"&&!l.getConfig(Ae.ReviewIntent))){if(m.id==="fixTestFailure"){let h=this.accessor.get(gl);if(!h.isEnabled.get()||Mu.isEmpty(h.getAllFailures()))continue}p.push(m)}}return vscpp(vscppf,null,vscpp("meta",{value:u}),vscpp(gE.SystemMessage,null,'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null)),vscpp(gE.UserMessage,null,"A software developer is using an AI chatbot in a code editor",s&&` in file ${s.path}`,".",vscpp("br",null),c===void 0?vscpp("br",null):vscpp(vscppf,null,"Current active file contains following excerpt:",vscpp("br",null),c,vscpp("br",null)),"The developer added the following request to the chat and your goal is to select a function to perform the request.",vscpp("br",null),r&&`The developer probably wants Function Id '${r}', pick different only if you're certain.`,vscpp("br",null),"Request: ",i,vscpp("br",null),vscpp("br",null),"Available functions:",vscpp("br",null),p.map(f=>vscpp(vscppf,null,"Function Id: ",f.id,vscpp("br",null),"Function Description: ",f.intentDetectionInput.modelDescription||f.description,vscpp("br",null),vscpp("br",null))),vscpp("br",null),"Here are some examples to make the instructions clearer:",vscpp("br",null),p.map(f=>vscpp(vscppf,null,"Request: ",f.intentDetectionInput.sampleQuestion,vscpp("br",null),"Response: ",f.id,vscpp("br",null),vscpp("br",null))),"Request: ",i,vscpp("br",null),"Response:"))}};async function xIe(t,e,r,n,i,o,s){let a=t.get(z6),c,u,l="",d=!1,p=a.parse(e,1);if(p.command)u=p.command.intent,l=p.restOfQuery,c=p.intentArgument,d=!0;else{let h=new hE(t,1),g=r===void 0?!1:!r,v=h.detectIntent(n,e,i?.agent,s,o,i?.preferredIntent,g);(r===void 0||r)&&(u=await v),l=e}let f;u&&i&&(f=i.slashCommands.find(h=>h.name===u.id)),u??=qs.Instance;let m=await u.invoke(t,{location:1,documentContext:n,intentArgument:c},f);return{queryWithoutCommand:l,intentInvocation:m,slashCommand:f,fromQuery:d}}async function SIe(t,e,r,n,i){let o=new _l;if(e&&e.length>0){let a=`The current code is a result of a previous interaction with you. Here are my previous messages: 
- ${e.join(`
- `)}`,c=new Zd({message:a,type:"user"});o.addTurn(c)}let s=new Zd({message:t.queryWithoutCommand,type:"user"});return s.intentInvocation=t.intentInvocation,o.addTurn(s),await t.intentInvocation.promptCrafter.buildPrompt(o,t.intentInvocation.endpoint,[],n,r,i)}var CX=class{constructor(e,r,n,i,o,s,a,c,u){this.placeholder=e;this.slashCommands=r;this.wholeRange=n;this.document=i;this.formattingOptions=o;this.message=s;this.input=a;this.preferredIntent=c;this.agent=u;this._requests=[];this.aiEditCollector=void 0;this.store=void 0;this.sessionId=bn(),this.conversation=void 0}addRequest(e){this._requests.push(e)}getRequests(){return this._requests}};var ip=class{constructor(e,r,n,i,o,s,a,c,u,l,d,p){this.agent=e;this.rejectionMessage=r;this._telemetryService=i;this.tabAndEditorsService=o;this.languageDiagnosticService=s;this.ignoreService=a;this.chatMLFetcher=c;this.tokenizer=u;this.feedbackReporter=l;this.instantiationService=d;this.accessor=p;this.logger=n.getPromptResponseLogger("interactiveEditor"),this.logger.info(`CopilotInteractiveEditorSessionProvider created, with rejection message: ${this.rejectionMessage}`)}async prepareInteractiveEditorSession(e){if(await this.ignoreService.isCopilotIgnored(e.document.uri))throw new Error(l0.t("Inline chat is disabled for this file due to content exclusion policies."));let n;if(this.tabAndEditorsService.activeTextEditor?.document.uri.toString()===e.document.uri.toString()){let f=this.tabAndEditorsService.activeTextEditor.options;n={insertSpaces:f.insertSpaces,tabSize:f.tabSize}}let i,o=this.languageDiagnosticService.getDiagnostics(e.document.uri).find(f=>f.range.contains(e.selection));o&&(o.severity===kc.Warning||o.severity===kc.Error)&&(i=`/fix ${o.message}`);let s={document:e.document,fileIndentInfo:n,language:$o(e.document),selection:e.selection,wholeRange:e.selection},a=[];for(let f of Xa.getCommands(1))if(f.intent?.asSlashCommand){let m=await f.intent.asSlashCommand(this.accessor,s);m&&a.push(m)}else a.push({name:f.commandId,description:f.details});let c=[l0.t({message:"{0} Copilot generated code may be incorrect",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})],u=l0.t({message:"{0} You can also type / for commands",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]}),l,d;e.selection.isEmpty&&e.document.lineAt(e.selection.start.line).text.trim()===""?(c.push(u,l0.t({message:"{0} You can also select code to make an edit",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})),d=l0.t("Ask Copilot to generate code..."),l=c0.ID):!e.selection.isEmpty&&e.selection.start.line!==e.selection.end.line?(c.push(u),d=l0.t("Ask Copilot to edit code..."),l=a0.ID):d=l0.t("Ask Copilot or type / for commands");let p=c[Math.floor(Math.random()*c.length)];return new CX(d,a,e.selection,e.document,n,p,i,l,this.agent)}async provideInteractiveEditorResponse(e,r,n,i){this.logger.info(`CopilotInteractiveEditorSessionProvider query: ${r.prompt}`),r.attempt===0&&e.addRequest(r.prompt);let o=e.aiEditCollector=this.instantiationService.createInstance(BS,e.document.getText()),s=n;n={report(c){"edits"in c&&o.addEdits(c.edits),s.report(c)}};let a=await this.fetchResponse(e,r,n,r.live,i);if(a)return"edits"in a?.parsedReply&&o.addEdits(a.parsedReply.edits),jZe(e,a,r.live)}async provideFollowups(e,r,n){if(ep(e.document.uri)&&!(!e.conversation||!e.wholeRange?.isEmpty))return[]}handleInteractiveEditorResponseFeedback(e,r,n){if(this.logger.debug("CopilotInteractiveEditorSessionProvider feedback received"),n===4&&e.conversation){this.feedbackReporter.reportInline(e.conversation,r.promptQuery,r.reply);return}let i={messageId:r.messageId},o,{selection:s,wholeRange:a,intent:c,query:u}=r.promptQuery,l=e.conversation?.getLatestTurn()?.requestId??"",d=e.sessionId,p=c?.id,f=e.document.languageId,m=r.reply.type,h=m==="inlineEdit"?r.reply.edits:null,g=p==="fix"?EIe(s,this.languageDiagnosticService.getDiagnostics(e.document.uri)):void 0,v=Yt(e.document.uri)?1:0,y={languageId:f,replyType:m,conversationId:d,requestId:l,command:p},b={selectionLineCount:s?Math.abs(s.end.line-s.start.line):-1,wholeRangeLineCount:a?Math.abs(a.end.line-a.start.line):-1,editCount:h?.length??-1,editLineCount:h?.reduce((S,T)=>S+T.newText.split(`
`).length,0)??-1,isNotebook:v,problemsCount:g?.fileDiagnosticsTelemetry.problemsCount??0,selectionProblemsCount:g?.selectionDiagnosticsTelemetry.problemsCount??0,diagnosticsCount:g?.fileDiagnosticsTelemetry.diagnosticsCount??0,selectionDiagnosticsCount:g?.selectionDiagnosticsTelemetry.diagnosticsCount??0},x=(S,T)=>{this._telemetryService.sendInternalMSFTTelemetryEvent(S,{language:f,intent:p,query:u,conversationId:d,requestId:l,replyType:m,problems:g?.fileDiagnosticsTelemetry.problems??"",selectionProblems:g?.selectionDiagnosticsTelemetry.problems??"",diagnosticCodes:g?.fileDiagnosticsTelemetry.diagnosticCodes??"",selectionDiagnosticCodes:g?.selectionDiagnosticsTelemetry.diagnosticCodes??""},{isNotebook:v,...T})};if(n===3&&e.aiEditCollector){let S=e.aiEditCollector,T=new K5(e.aiEditCollector.getText(),e.document,this.accessor);(async()=>{try{let[L,M]=await Promise.all([S.getEdits(),T.compute()]),j=M.getEditsSinceInitial();this.instantiationService.createInstance(dE,e.document,S.initialText,L,j,y,b)}finally{T.dispose()}})()}if(e.aiEditCollector=void 0,n===1||n===0){let S=n===1?1:0;this._telemetryService.sendMSFTTelemetryEvent("inline.action.vote",y,{...b,vote:S}),x("interactiveSessionVote",{vote:S})}else if(n===2||n===3){let S=n===3?1:0;this._telemetryService.sendMSFTTelemetryEvent("inline.done",y,{...b,accepted:S}),x("interactiveSessionDone",{accepted:S})}switch(n){case 1:i.rating="positive",o="inlineConversation.messageRating";break;case 0:i.rating="negative",o="inlineConversation.messageRating";break;case 2:i.action="undo",o="inlineConversation.undo";break;case 3:i.action="accept",o="inlineConversation.accept";break;case 4:o="";break}o&&mE(this.accessor,e.document,i,{},o)}async fetchResponse(e,r,n,i,o){let s=fE(),a=Date.now(),c;e.getRequests().length>1&&r.attempt===0&&e.store&&e.document.getText()===e.store.lastDocumentContent&&(c=e.store.lastWholeRange,this.logger.debug("Ignoring passed in whole range and using the whole range from the previous turn"));let u={document:e.document,fileIndentInfo:e.formattingOptions,language:$o(e.document),selection:r.selection,wholeRange:c??r.wholeRange};(e.getRequests().length>1||r.attempt>0)&&(e.preferredIntent=void 0);let l=await xIe(this.accessor,r.prompt,r.withIntentDetection,u,e,s,o),d=l.intentInvocation;l.slashCommand&&!l.fromQuery&&n.report(new rie("github.copilot.editor",l.slashCommand));let p={query:l.queryWithoutCommand,...u,intent:d.intent},{messages:f,references:m}=await SIe(l,e.getRequests().slice(0,-1),s,n,o);for(let $ of m)n.report(new AP($.anchor));if(o.isCancellationRequested)return;let h=e.conversation,g=h===void 0;h||(h=e.conversation=new _l);let v=f.map($=>$.content).join(`
`),y=new Zd({message:v,type:"user"});y.chatMessages=f,h.addTurn(y),s=F6(h,e.sessionId,"conversationInline",r.prompt,zZe(this.tokenizer,f),d.intent.id,s);let b=s.properties.messageId;y.requestId=b,this.logger.logPrompt(f);let x,S,T=d.linkification?.disable?void 0:new O6(this.accessor,m,n,d.linkification?.additionaLinkifiers??[],o),L=d.createReplyInterpreter(T??n,i);if(f.length===0)return{promptQuery:p,parsedReply:await L.finish(),messageId:s.properties.messageId};let j=Yt(e.document.uri)?1:0,N=EIe(r.selection,this.languageDiagnosticService.getDiagnostics(e.document.uri));this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionRequest",{conversationId:e.sessionId,requestId:b,chatLocation:"inline",intent:d.intent.id,language:e.document.languageId,prompt:f.map($=>`${$.role.toUpperCase()}:
${$.content}`).join(`
---
`),model:d.endpoint.model},{isNotebook:j});let J=0,X=async $=>(J===0&&(J=Date.now()),L.update($).shouldFinish?$.length:void 0),D=Date.now(),E=d.endpoint;try{x=await this.chatMLFetcher.fetchOne(f,X,o,1,E,{agent:ZT},{temperature:ip.pickTemperature(r),top_p:G6.top_p},{messageId:b,messageSource:d.intent.id!==qs.ID?`inline.${d.intent.id}`:"inline.user"},{intent:!0})}catch($){throw this.logger.exception($,"Fetching failed: "),this._telemetryService.sendGHTelemetryException($,"Fetching failed: "),y.status="error",y.response={message:$.message,type:"server"},new Error("Failed to make request")}x&&(this.logger.logResponse(x),U6(this.accessor,"conversationInline",x.requestId,r.prompt,x.type==="offTopic",this.tabAndEditorsService.activeTextEditor?.document,s));let A=$=>{this._telemetryService.sendMSFTTelemetryEvent("inline.request",{command:d.intent.id??"",contextTypes:"none",promptTypes:f.map(z=>`${z.role}${z.name?`-${z.name}`:""}:${z.content.length}`).join(","),conversationId:e.sessionId,requestId:b,languageId:this.tabAndEditorsService.activeTextEditor?.document?.languageId,responseType:x.type,replyType:$?.type,model:E.model,diagnosticsProvider:N.diagnosticsProvider,diagnosticCodes:N.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:N.selectionDiagnosticsTelemetry.diagnosticCodes,outcomeAnnotations:$?.annotations?.map(z=>z.label).join(",")},{firstTurn:g?1:0,isNotebook:j,withIntentDetection:r.withIntentDetection===void 0?void 0:r.withIntentDetection?1:0,messageTokenCount:this.tokenizer.tokenLength(l.queryWithoutCommand),promptTokenCount:lE(this.tokenizer,f),responseTokenCount:x.type==="success"?this.tokenizer.tokenLength(x.value):-1,implicitCommand:r.prompt.trim().startsWith(`/${d.intent.id}`)?0:1,attemptCount:r.attempt||0,selectionLineCount:r.selection?Math.abs(r.selection.end.line-r.selection.start.line)+1:-1,wholeRangeLineCount:r.wholeRange?Math.abs(r.wholeRange.end.line-r.wholeRange.start.line)+1:-1,editCount:$?.type==="inlineEdit"?$.edits.length:-1,editLineCount:$?.type==="inlineEdit"?$.edits.reduce((z,se)=>z+se.newText.split(`
`).length,0):-1,problemsCount:N.fileDiagnosticsTelemetry.problemsCount,selectionProblemsCount:N.selectionDiagnosticsTelemetry.problemsCount,diagnosticsCount:N.fileDiagnosticsTelemetry.diagnosticsCount,selectionDiagnosticsCount:N.selectionDiagnosticsTelemetry.diagnosticsCount,timeToRequest:D-a,timeToFirstToken:J?J-a:-1,timeToComplete:Date.now()-a})},F=($,z)=>{this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionResponse",{conversationId:e.sessionId,requestId:b,chatLocation:"inline",intent:d.intent.id??"",problems:N.fileDiagnosticsTelemetry.problems,selectionProblems:N.selectionDiagnosticsTelemetry.problems,diagnosticCodes:N.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:N.selectionDiagnosticsTelemetry.diagnosticCodes,diagnosticsProvider:N.diagnosticsProvider,language:this.tabAndEditorsService.activeTextEditor?.document?.languageId,request:r.prompt,responseType:$,response:z},{isNotebook:j})};switch(x.type){case"rateLimited":{let $=`Response failed ${x.type}: ${x.reason}`;throw y.status="error",y.response={message:$,type:"server"},A(),F(x.type,$),new Error("Oops, your request failed due to a rate limit. Please try again later.")}case"badRequest":{let $=`Response failed ${x.type}: ${x.reason}`;throw y.status="error",y.response={message:$,type:"server"},A(),F(x.type,$),new Error("Failed to make request")}case"failed":{this.logger.error(`Response failed: ${x.reason}`),y.status="error";let $=x.reason;throw y.response={message:$,type:"server"},A(),F(x.type,$),new Error("Failed to make request")}case"canceled":{this.logger.debug(`Response canceled: ${x.reason}`),y.status="error";let $="Cancelled";y.response={message:$,type:"user"},A(),F(x.type,$);return}case"unknown":{let $=`Response is empty: ${x.reason}`;this.logger.info($),y.status="error",y.response={message:$,type:"server"},A(),F(x.type,$);return}case"filtered":{let $=`Response got filtered: ${x.reason}`;throw this.logger.info($),y.status="filtered",y.response={message:$,type:"server"},A(),F(x.type,$),new Error(z5(x.category,!1))}case"offTopic":{this.logger.info(`Response marked as offtopic: ${x.reason}`),y.status="off-topic";let $=this.rejectionMessage;y.response={message:$,type:"offtopic-detection"},A(),F(x.type,$),q6(this.accessor,h,e.sessionId,"conversationInline",r.prompt,b,e.document,s);return}case"length":{let $=`Response was too long: ${x.reason}`;this.logger.info($),y.status="error",y.response={message:$,type:"server"},A(),F(x.type,$);return}case"success":break;default:{this.logger.error("Unexpected response type"),this.logger.info(JSON.stringify(x)),y.status="error";let $=`Unexpected response type: ${JSON.stringify(x)}`;y.response={message:$,type:"server"},A(),F("unknown",$);return}}if(S=x.value,S.length===0){this.logger.info("Response is empty."),A(),F("unknown","Empty response");return}L.update(S);let O=await L.finish();await T?.flush(),y.status="success";let Z=S;return y.response={message:Z,type:"model"},A(O),F("success",Z),s=s.extendedBy({replyType:O.type}),B6(this.accessor,h,e.sessionId,"conversationInline",S,b,e.document,s),this.logger.info(`Parsed response: ${JSON.stringify(O,null,"	")}`),{promptQuery:p,parsedReply:O,messageId:s.properties.messageId}}static pickTemperature(e){return"attempt"in e&&typeof e.attempt=="number"?Math.min(G6.temperature*(e.attempt+1),2):G6.temperature}};ip=fe([ie(2,ue),ie(3,Ee),ie(4,Tt),ie(5,Ko),ie(6,De),ie(7,Jt),ie(8,ge),ie(9,pE),ie(10,zi),ie(11,ct)],ip);function jZe(t,e,r){let{promptQuery:n,parsedReply:i,messageId:o}=e;if(i.type==="conversational")return{contents:new Wo(i.content),promptQuery:n,reply:i,messageId:o,buttons:i.buttons};let s=i.content!==void 0?new Wo(i.content):void 0;return i.type==="workspaceEdit"?{edits:i.workspaceEdit,promptQuery:n,reply:i,messageId:o,contents:s,buttons:i.buttons}:(t.store=i.store,{edits:i.edits,wholeRange:i.newWholeRange,reply:i,promptQuery:n,messageId:o,contents:i.content!==void 0?new Wo(i.content):void 0,buttons:i.buttons})}function zZe(t,e){let r=0;for(let n of e)r+=t.tokenLength(n.content);return r}function EIe(t,e){let r=e.filter(u=>t.intersection(u.range)),n={problems:e.map(u=>u.message).join(", "),problemsCount:e.length,diagnosticCodes:"",diagnosticsCount:0},i={problems:r.map(u=>u.message).join(", "),problemsCount:r.length,diagnosticCodes:"",diagnosticsCount:0},o=new Map,s=new Map;e.forEach(u=>{let l=u.code,d=typeof l=="string"||typeof l=="number"?l.toString():l?l.value.toString():"",p=u.source?`${u.source}@${d}`:d;o.set(p,(o.get(p)||0)+1),t.intersection(u.range)&&s.set(p,(s.get(p)||0)+1)});let a=u=>{let l="";return u.forEach((d,p)=>{l+=`${p}:${d},`}),l};n.diagnosticCodes=a(o),n.diagnosticsCount=o.size,i.diagnosticCodes=a(s),i.diagnosticsCount=s.size;let c=e.length>0?e[0].source??"":"";return{fileDiagnosticsTelemetry:n,selectionDiagnosticsTelemetry:i,diagnosticsProvider:c}}var vE=class t{constructor(e,r){this.accessor=e;this.outputChannelProvider=r;this.requestCount=-1;this.logger=e.get(ue).getPromptResponseLogger("chat")}logRequest(e){this.requestCount++,this.logInfo("REQUEST",`User:${this.headerSeparator()}${this.printMessageContent(e.message)}`)}logMessages(e){this.logInfo("PROMPT MESSAGES",e.map(r=>`${this.getDisplayName(r)}:${this.headerSeparator()}${this.printMessageContent(r.content)}`).join(`
`))}logProgress(e,r){let n=typeof e.value=="string"?e.value:e.value.value;n&&(r?this.logInfo("RESPONSE",`Assistant:	${n}`,!1):this.logInfo("",`${n.replaceAll(/\r?\n/g,`
`+this.bodySeparator())}`,!1))}logResponse(e){this.logInfo("",""),e.errorDetails&&this.logInfo("ERROR DETAILS",JSON.stringify(e.errorDetails,void 0,4))}logFollowups(e){this.logInfo("FOLLOWUPS","Followups:	"+e.map((r,n)=>`${r.label??r.prompt}
${this.bodySeparator()}`).join(`
${this.bodySeparator()}`))}logThrownError(e){this.logInfo("THROWN ERROR",e.stack?e.stack:e.message)}logIntent(e,r){this.logInfo("INTENT",e!==void 0?`User intent determined to be '${e}' via the ${r?"user":"model"}`:"Intent could not be determined")}logInfo(e,r,n=!0){if(!this.accessor.get(ke).getConfig(Ae.ConversationLoggingEnabled))return;let o=new Date().toISOString();e&&(r=`[${e} ${this.requestCount}]
${r}`,r=`${o} [info] ${r}`),t.outputChannel===void 0&&(t.outputChannel=this.outputChannelProvider()),n?(this.logger.info(r+`
`),t.outputChannel.appendLine(r+`
`)):(this.logger.info(r),t.outputChannel.append(r))}printMessageContent(e){return e.split(`
`).join(`
${this.bodySeparator()}`)}headerSeparator(){return"		"}bodySeparator(){return"			"}getDisplayName(e){let r=this.getDisplayRole(e.role),n=e.name;return n?`${r} (${n})`:r}getDisplayRole(e){switch(e){case"system":return"System";case"user":return"User";case"assistant":return"Assistant"}}};var El=W(_r());function TIe(t){let e=(i,o,s)=>{let a="",c=s?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ";if(o===1?a=`${c}${i.name}
`:o>1&&(a=`|   ${"    ".repeat(o-2)}${c}${i.name}
`),i.children){let u=i.children.length-1;i.children.forEach((l,d)=>{a+=e(l,o+1,d===u)})}return a},r=`${t.baseUri.path.replace("/","")}
`,n=t.value.length-1;return t.value.forEach((i,o)=>{r+=e(i,1,o===n)}),`\`\`\`filetree
${r}\`\`\`
`}var VR=class{constructor(e,r,n,i,o){this.sequencer=Promise.resolve();let s=e.get(fn),a=e.get(Ze);this._linkifier=new cE(r,a.getWorkspaceFolders(),s,i),this._progress=n,this._token=o}markdown(e){return this.appendMarkdown(typeof e=="string"?new Wo(e):e),this}anchor(e,r){return this.enqueue(()=>this._progress.anchor(e,r)),this}button(e){return this.enqueue(()=>this._progress.button(e)),this}filetree(e,r){return this.enqueue(()=>this._progress.filetree(e,r)),this}progress(e){return this.enqueue(()=>this._progress.progress(e)),this}warning(e){return this.enqueue(()=>this._progress.warning(e)),this}reference(e){return this.enqueue(()=>this._progress.reference(e)),this}push(e){return e instanceof pn?this.appendMarkdown(e.value):this.enqueue(()=>this._progress.push(e)),this}textEdit(e,r){return this.enqueue(()=>this._progress.textEdit(e,r)),this}markdownWithVulnerabilities(e,r){return this.enqueue(()=>this._progress.markdownWithVulnerabilities(e,r)),this}detectedParticipant(e,r){return this.enqueue(()=>this._progress.detectedParticipant(e,r)),this}confirmation(e,r,n){return this.enqueue(()=>this._progress.confirmation(e,r,n)),this}enqueue(e,r=!0){return r&&(this.sequencer=this.sequencer.then(()=>this.doFinalize())),this.sequencer=this.sequencer.then(e),this.sequencer}async appendMarkdown(e){this.enqueue(async()=>{await this.doApplyText(e.value)},!1)}async finalize(){await this.enqueue(()=>this.doFinalize(),!1)}async doFinalize(){let e=await this._linkifier.flush(this._token);this._token.isCancellationRequested||e&&this.outputMarkdown(e)}async doApplyText(e){if(!e)return;let r=await this._linkifier.append(e,this._token);this._token.isCancellationRequested||r&&this.outputMarkdown(r)}outputMarkdown(e){let r=new Wo(e.text);r.isTrusted={enabledCommands:e.trustedCommands??[]},this._progress.markdown(r)}};var W6=W(st());var $6=class extends K{render(){return vscpp(vscppf,null,vscpp(W6.SystemMessage,{priority:1e3},vscpp("br",null),"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with \\"GitHub Copilot\\".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null),vscpp("br",null),vscpp("br",null),vscpp(u0,{location:this.props.location,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn."),vscpp(Ht,{priority:800,history:this.props.history}),vscpp(W6.UserMessage,{priority:900},"Write a short one-sentence question that the user can ask that naturally follows from the previous few questions and answers. It should not ask a question which is already answered in the conversation. It should be a question that you are capable of answering. Reply with only the text of the question and nothing else.",vscpp("br",null),vscpp(Tr,null)))}};var yE=class{constructor(e,r,n,i,o,s){this.options=e;this.endpointProvider=n;this.chatMLFetcher=i;this.tokenizer=o;this.accessor=s;this.logger=r.getLogger("ConversationFollowUp")}async followUp(e,r,n,i){let o=i?{...i}:{};o.requestId=bn(),o.messageSource="chat.followup";let s=await this.endpointProvider.getChatEndpoint("gpt-3.5-turbo"),{messages:a}=await ca(this.accessor,s,$6,{history:e.copy().turns,endpoint:s,location:r},this.tokenizer),c=await this.chatMLFetcher.fetchOne(a,void 0,n,r,s,void 0,{temperature:this.options.temperature,top_p:this.options.topP},o);if(c.type==="success"){let u=[];return c.value&&u.push(c.value.trim()),u}else return this.logger.error(`Failed to fetch followups because of response type (${c.type}) and reason (${c.reason})`,c),[]}};yE=fe([ie(0,Vi),ie(1,ue),ie(2,Ue),ie(3,Jt),ie(4,ge),ie(5,ct)],yE);var IX;(e=>{function t(r,n,i){let{options:o,document:s,selection:a,visibleRanges:c}=n,u={insertSpaces:o.insertSpaces,tabSize:o.tabSize},l=$o(s);return i||(c.length===1?i=c[0]:c.length>1?i=c[0].union(c[c.length-1]):i=a),{document:s,fileIndentInfo:u,language:l,selection:a,wholeRange:i}}e.fromEditor=t})(IX||={});var bE=class{constructor(e,r){this.stopStartMappings=e;this.processNonReportedDelta=r;this.stagedDeltasToApply=[];this.currentStartStop=void 0;this._appliedText="";this.nonReportedDeltas=[]}async processResponse(e,r,n,i,o){return this.doProcessResponse(n,i,o)}async doProcessResponse(e,r,n){for await(let{delta:i}of e){if(n.isCancellationRequested)break;this.applyDelta(i,r)}return this._appliedText}applyDeltaToProgress(e,r){let n=e.codeVulnAnnotations?.map(i=>({title:i.details.type,description:i.details.description}));n?.length?r.markdownWithVulnerabilities(e.text??"",n):e.text&&r.markdown(e.text)}updateStagedDeltasUpToIndex(e,r){let n=[];for(let i=0;i<e+r;){let o=this.stagedDeltasToApply.shift();if(o){if(i+o.text.length<=e)n.push(o);else if(i<e||i<e+r){if(i<e){let a={...o};a.text=o.text.substring(0,e-i),n.push(a)}let s={...o};s.text=o.text.substring(e-i+r),s.text&&this.stagedDeltasToApply.unshift(s)}i+=o.text.length}else break}return n}checkForKeyWords(e,r,n){let i=this.stagedDeltasToApply.map(o=>o.text).join("")+r.text;for(let o of e){let s=i.indexOf(o);if(s===-1)continue;return this.stagedDeltasToApply.push(r),this.updateStagedDeltasUpToIndex(s,o.length).forEach(c=>n(c)),o}for(let o of e)for(let s=o.length-1;s>0;s--){let a=o.substring(0,s);if(i.endsWith(a)){this.stagedDeltasToApply=[...this.stagedDeltasToApply,r];return}}[...this.stagedDeltasToApply,r].forEach(o=>{n(o)}),this.stagedDeltasToApply=[]}postReportRecordProgress(e){this.nonReportedDeltas.push(e)}applyDelta(e,r){if(this._appliedText+=e.text,this.currentStartStop===void 0){let n=this.checkForKeyWords(this.stopStartMappings.map(i=>i.stop),e,i=>this.applyDeltaToProgress(i,r));n&&(this.currentStartStop=this.stopStartMappings.find(i=>i.stop===n));return}else{if(!this.currentStartStop.start)return;this.checkForKeyWords([this.currentStartStop.start],e,this.postReportRecordProgress.bind(this))&&(this.processNonReportedDelta&&this.processNonReportedDelta(this.nonReportedDeltas).forEach(o=>this.applyDeltaToProgress({text:o},r)),this.currentStartStop=void 0,this.stagedDeltasToApply.length>0&&this.applyDelta({text:""},r))}}};var $R={errorDetails:{message:El.t("Cancelled")}},K6=class{constructor(e,r,n){this.options=r;this.conversationLogger=n;this.inputPlaceholder=El.t("Ask Copilot or type / for commands");this._telemetryService=e.get(Ee),this._configurationService=e.get(ke),this.accessor=e,this.conversation=new _l,this.intentDetector=new hE(e,2),this.conversation=this.initializeConversation(),this._conversationStore=e.get(Wg)}addHistory(e){let r;for(let n of e)if(n instanceof nie)r=new Zd({message:n.prompt,type:"user"});else{let i=n.response.map(s=>s instanceof pn?s.value.value:s instanceof sC?TIe(s):"content"in s?s.content:null).filter(s=>!!s).join("");if(r){let s=n.command||Cne(n.participant),a=Xa.getCommand(s,2);r.response={message:i,type:"model",name:a?.commandId||qs.ID},n.result.errorDetails?n.result.errorDetails?.responseIsFiltered?r.status="filtered":n.result.errorDetails.message==="Cancelled"?r.status="cancelled":r.status="error":r.status="success",this.conversation.addTurn(r),r=void 0}let o=n.result;typeof o.metadata?.sessionId=="string"&&(this._sessionId=o.metadata.sessionId)}this._sessionId||(this._sessionId=bn())}initializeConversation(){return new _l}async provideResponseWithProgress(e,r,n,i){try{let o=this,s=!0,a=new class{detectedParticipant(p,f){r.detectedParticipant(p,f)}markdown(p){o.conversationLogger?.logProgress(new pn(p),s),s=!1,r.markdown(p)}button(p){r.button(p)}filetree(p,f){r.filetree(p,f)}anchor(p,f){r.anchor(p,f)}progress(p){r.progress(p)}reference(p){r.reference(p)}warning(p){r.warning(p)}push(p){r.push(p)}markdownWithVulnerabilities(p,f){r.markdownWithVulnerabilities(p,f)}textEdit(p,f){r.textEdit(p,f)}confirmation(p,f,m){r.confirmation(p,f,m)}},c=this.newTurn(e),u=fE();u.markAsDisplayed();let l=await this._provideResponseWithProgress(c,e,a,n,u,i),d=await c.intentInvocation?.commands?.(this.accessor,c);return d&&d.forEach(p=>r.button(p)),this.conversationLogger?.logResponse(l),this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionResponse",{chatLocation:"panel",intent:c.intentInvocation?.intent.id??"",request:e.prompt,response:c.response?.message??"",sessionId:this._sessionId},{turnNumber:this.conversation.turns.length}),this._conversationStore.addConversation(c.requestId,this.conversation),{...l,metadata:{responseId:c.requestId,sessionId:this._sessionId,agentId:i.agentId,command:e.command}}}catch(o){throw this.conversationLogger?.logThrownError(o),o}}newTurn(e){let r={message:e.prompt,type:"user"},n=new Zd(r,this._sessionId);return this.conversation.addTurn(n),n}async _provideResponseWithProgress(e,r,n,i,o,s){let a=()=>{if(i.isCancellationRequested)return e.status="cancelled",!0};if(a())return $R;try{let c=this.accessor.get(Tt).activeTextEditor,u=e.request.message;this.conversationLogger?.logRequest(e.request);let l={command:s.intentId?Xa.getCommand(s.intentId,2):void 0,restOfQuery:u};if(l.command?.intent&&!(l.command.intent.commandInfo?.allowsEmptyArgs??!0)&&!l.restOfQuery){let L=NCe(l.command.intent.id),M="";return L&&(M=`@${L.agent} `,L.command&&(M+=` /${L.command}`),M+=` ${l.command.details}`),e.response={message:El.t(`Please specify a question when using this command.

Usage: {0}`,M),type:"meta"},e.status="error",{errorDetails:{message:e.response.message,responseIsFiltered:!1}}}let d=l?.command?.intent,p;if(d&&(e.request={message:l.restOfQuery||d.intentDetectionInput.sampleQuestion,type:"user"},this.conversationLogger?.logIntent(d.id,!0)),!d&&this.accessor.get(ke).getConfig(Ae.ConversationIntentDetection)&&(d=p=await this.intentDetector.detectIntent(void 0,u,s.agentName,i,o,void 0,void 0),this.conversationLogger?.logIntent(d?.id,!1),a()))return $R;d??=qs.Instance;let f=c?IX.fromEditor(this.accessor,c):void 0,m=await d.invoke(this.accessor,{location:2,documentContext:f},void 0);if(a())return $R;e.intentInvocation=m,r=await this.sanitizeVariables(r,e);let h=m.endpoint,g,v,y=!1,b;try{let L={report(j){n.push(j)}},M=r.references??r.variables;({messages:g,tokenCount:v,hasIgnoredFiles:y,references:b}=await m.promptCrafter.buildPrompt(this.conversation,h,M,L,o,i));for(let j of b)n.reference(j.anchor);e.addReferences(b)}catch(L){if(Ep(L))return $R;throw L}if(a())return $R;if(g.length===0)return{};let x=this.conversation.getLatestTurn()?.contextParts.map(L=>L.kind)??[];if(this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionMessage",{intent:d?.id??"none",detectedIntent:p?.id??"none",contextTypes:x.join(","),query:l.restOfQuery},{}),e.chatMessages=g,this.fixMessageNames(d,g),this.conversationLogger?.logMessages(g),o=F6(this.conversation,this._sessionId,"conversationPanel",u,v,d?.id,o),i.isCancellationRequested)return e.status="cancelled",{errorDetails:{message:El.t("Cancelled")}};let S=m?.responseProcessor??new bE([{stop:"[COMMANDS START]"}]),T=await this.fetchConversationResponse(e,h,u,g,s.agentName,i,n,S,m.linkification,o,{messageId:o.properties.messageId,messageSource:d?.id&&d.id!==qs.ID?`chat.${d.id}`:"chat.user"});return y&&n.markdown(El.t(rk)),T}catch(c){this.accessor.get(ue).defaultLogger.exception(c),this.accessor.get(Ee).sendGHTelemetryException(c,"Error"),this.conversationLogger?.logThrownError(c);let u=c.message;return e.status="error",e.response={message:u,type:"meta"},{errorDetails:{message:u}}}}async sanitizeVariables(e,r){let n=e.references.map(async o=>{let s=!1;return o.value instanceof Zn&&(s=await this.accessor.get(De).isCopilotIgnored(o.value)),s&&o.range&&(r.request.message=r.request.message.slice(0,o.range[0])+r.request.message.slice(o.range[1])),s?null:o}),i=Xt(await Promise.all(n));return{...e,references:i}}fixMessageNames(e,r){let n=this._configurationService.getConfig(Ae.UseMessageNames);r.forEach(i=>{n?i.role!=="system"&&i.name===e?.id&&(i.name=void 0):i.name=void 0})}async fetchConversationResponse(e,r,n,i,o,s,a,c,u,l,d){let p=fE();e.requestId=l.properties.messageId;let f=Date.now(),m=0,h=new z0,g=u?.disable?a:new VR(this.accessor,e.references,a,u?.additionaLinkifiers??[],s),v=c.processResponse(e,i,h.asyncIterable,g,s),y=new Set,b=await this.accessor.get(Jt).fetchOne(i,async(J,X,D)=>{m===0&&(m=Date.now()),D.codeVulnAnnotations&&(!((J.match(/(^|\n)```/g)?.length??0)%2===1)||J.match(/(^|\n)```\w*\s*$/))&&(D.codeVulnAnnotations=void 0),D.codeVulnAnnotations&&(D.codeVulnAnnotations=D.codeVulnAnnotations.filter(E=>!y.has(E.details.type)),D.codeVulnAnnotations.forEach(E=>y.add(E.details.type))),h.emitOne({text:J,delta:D})},s,2,r,{agent:o},{temperature:this.options.temperature,top_p:this.options.topP},d,{intent:!0});h.resolve();let x=await v;g instanceof VR&&await g.finalize();let S=x?EX(x):[],T=x?x.match(/\]\(command:_github\.copilot\.open/g):[],L=l.raw.displayedTime??f,M=["programming-related tasks","programming related questions","software development topics","related to programming","expertise is limited","sorry, i can't assist with that"],j=0;b.type==="success"&&!x.trim().includes(`
`)&&M.some(J=>x.toLowerCase().includes(J))&&(j=1);let N=this.accessor.get(ge);switch(this._telemetryService.sendMSFTTelemetryEvent("panel.request",{command:e.intentInvocation?.intent.id??"none",contextTypes:e.contextParts.map(J=>J.kind).join(",")??"none",promptTypes:i.map(J=>`${J.role}${J.name?`-${J.name}`:""}:${J.content.length}`).join(","),conversationId:this._sessionId,requestId:e.requestId,responseId:b.requestId,responseType:b.type,codeBlocks:S.join(","),model:r.model},{turn:this.conversation.turns.length,textBlocks:S.length?-1:x.split(/\n{2,}/).length??0,links:T?.length??0,maybeOffTopic:j,messageTokenCount:N.tokenLength(e.request.message),promptTokenCount:lE(this.accessor.get(ge),i),userPromptCount:i.filter(J=>J.role==="user").length,responseTokenCount:N.tokenLength(x)??0,timeToRequest:f-L,timeToFirstToken:m?m-L:-1,timeToComplete:Date.now()-L}),U6(this.accessor,"conversationPanel",b.requestId,n,b.type==="offTopic",this.accessor.get(Tt).activeTextEditor?.document,l),b.type){case"success":return await this.processSuccessfulFetchResult(e,x,b.requestId,p);case"offTopic":return this.processOffTopicFetchResult(a,e,n,l);case"canceled":return e.status="cancelled",e.response={message:"Cancelled",type:"user"},{errorDetails:e.response};case"rateLimited":return e.status="error",{errorDetails:{message:El.t("Sorry, your request was rate-limited. Please wait and try sending again later."),responseIsFiltered:!0}};case"badRequest":case"failed":return e.status="error",e.response={message:b.reason,type:"server"},{errorDetails:e.response};case"filtered":return e.status="filtered",{errorDetails:{message:z5(b.category),responseIsFiltered:!0}};case"agent_unauthorized":return e.status="error",{};case"agent_failed_dependency":return e.status="error",{errorDetails:{message:b.reason}};case"length":return e.status="error",{errorDetails:{message:El.t("Sorry, the response hit the length limit. Please rephrase your prompt.")}};case"unknown":return e.status="error",{errorDetails:{message:El.t("Sorry, no response was returned."),responseIsFiltered:!1}};case"extensionBlocked":return e.status="error",{errorDetails:{message:El.t("Sorry, something went wrong."),responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i){return r.length>0?(e.status="success",e.response={message:r,type:"model"},i.markAsDisplayed(),B6(this.accessor,this.conversation,this._sessionId,"conversationPanel",r,n,this.accessor.get(Tt).activeTextEditor?.document,i),{}):(e.status="error",e.response={message:El.t("The model unexpectedly did not return a response, which may indicate a service issue. Please report a bug."),type:"meta"},{errorDetails:e.response})}processOffTopicFetchResult(e,r,n,i){let o=fE();return e.markdown(this.options.rejectionMessage),r.response={message:this.options.rejectionMessage,type:"offtopic-detection"},r.status="off-topic",o.markAsDisplayed(),q6(this.accessor,this.conversation,this._sessionId,"conversationPanel",n,i.properties.messageId,this.accessor.get(Tt).activeTextEditor?.document,o),{}}getLatestTurn(){return this.conversation.getLatestTurn()}removeRequest(e){let r=this.conversation.removeTurn(e);this._telemetryService.sendMSFTTelemetryEvent("panel.action.remove",{command:r?.intentInvocation?.intent.id,contextTypes:r?.contextParts.map(n=>n.kind).join(",")??"none",responseType:r?.response?.type,conversationId:this._sessionId,requestId:e})}};async function CIe(t,e,r,n){let i=e.getLatestTurn();if(!i)return[];let o={messageId:i.requestId},c=(i.status==="success"?await t.get(zi).createInstance(yE).followUp(e,2,n,o):[]).map(p=>VZe(p,t,o));n.isCancellationRequested||r?.logFollowups(c);let u=i,l=[],d=u?.intentInvocation;return d?.followUps&&(l=await d.followUps(t,u)),c.concat(l)}function VZe(t,e,r){let n=r??{};return n.suggestionId=bn(),n.suggestionType="Follow-up from model",H6(e,n.suggestionType,n.messageId,n.suggestionId,e.get(Tt).activeTextEditor?.document),{prompt:t,metadata:n}}var d0=W(require("vscode"));function IIe(t,e,r){let n=d0.window.activeTextEditor?.document,i=d0.window.activeTextEditor?.selection,o=e.result,s=t.get(Ee),a=o.metadata?.responseId&&t.get(Wg).getConversation(o.metadata.responseId);switch(e.action.kind){case"copy":s.sendMSFTTelemetryEvent("panel.action.copy",{languageId:n?.languageId,requestId:o.metadata?.responseId,participant:r,command:o.metadata?.command},{codeBlockIndex:e.action.codeBlockIndex,copyType:e.action.copyKind,characterCount:e.action.copiedCharacters,lineCount:e.action.copiedText.split(`
`).length});break;case"insert":s.sendMSFTTelemetryEvent("panel.action.insert",{languageId:n?.languageId,requestId:o.metadata?.responseId,participant:r,command:o.metadata?.command},{codeBlockIndex:e.action.codeBlockIndex,characterCount:e.action.totalCharacters});break;case"runInTerminal":s.sendMSFTTelemetryEvent("panel.action.runinterminal",{languageId:n?.languageId,requestId:o.metadata?.responseId,blockLanguage:e.action.languageId,participant:r,command:o.metadata?.command},{codeBlockIndex:e.action.codeBlockIndex});break;case"followUp":break;case"bug":a&&t.get(pE)?.reportChat(a.getLatestTurn());break}if(e.action.kind==="copy"||e.action.kind==="insert"){let c={};c={totalCharacters:e.action.totalCharacters},e.action.kind==="copy"&&(c={...c,copiedCharacters:e.action.copiedCharacters}),n&&i&&(c={...c,cursorLocation:n.offsetAt(i.active)}),mE(t,d0.window.activeTextEditor?.document,{codeBlockIndex:e.action.codeBlockIndex.toString(),messageId:o.metadata?.responseId??""},c,e.action.kind==="copy"?"conversation.acceptedCopy":"conversation.acceptedInsert")}}function Y6(t,e,r){let n=d0.window.activeTextEditor?.document,i=e.result;t.get(Ee).sendMSFTTelemetryEvent("panel.action.vote",{languageId:n?.languageId,requestId:i.metadata?.responseId,participant:r,command:i.metadata?.command},{direction:e.kind===d0.ChatResultFeedbackKind.Helpful?1:2}),mE(t,n,{rating:e.kind===d0.ChatResultFeedbackKind.Helpful?"positive":"negative",messageId:i.metadata?.responseId??""},{},"conversation.messageRating")}var ds=W(require("vscode"));function Q6(){return"https://aka.ms/microsoft/vscode-copilot-release"}var _E=class{constructor(e,r){this.configurationService=e;this.accessor=r;this.hasShownWelcomeMessage=!1}async provideWelcomeMessage(e,r){let i=(await Bu(this.configurationService))?.account?.label,o=Q6(),s=this.configurationService.getConfig(Ae.WelcomeMessage),a=ds.l10n.t({message:"I'm powered by AI, so surprises and mistakes are possible. Make sure to verify any generated code or suggestions, and [share feedback]({0}) so that we can learn and improve. Check out the [{1} documentation]({2}) to learn more.",args:[o,"Copilot","https://code.visualstudio.com/docs/copilot/getting-started-chat"],comment:["{Locked=']({'}","the [text](url) is a markdown link syntax. Do not add any additional spaces between ] and ("]}),c=i?" **@"+i+"**":"";if(s==="never"||this.hasShownWelcomeMessage&&s==="first")return[ds.l10n.t("Hi{0}, how can I help you?",c)];this.hasShownWelcomeMessage=!0;let u="workbench.action.quickchat.launchInlineChat",l=ds.window.activeNotebookEditor||ds.window.activeTextEditor?ds.l10n.t("You can also [start an inline chat session]({0}).",`command:${u}`):"",d=new ds.MarkdownString(ds.l10n.t("Welcome,{0}, I'm your {1} and I'm here to help you get things done faster. {2}",c,"Copilot",l));return d.isTrusted={enabledCommands:[u]},[d,a]}provideSampleQuestions(e,r){let n=ds.window.activeNotebookEditor||ds.window.activeTextEditor?$Ze():wIe([["","help",ds.l10n.t("What can you do?")]]);return WZe([...n],this.accessor,"welcome"),n}};_E=fe([ie(0,ke),ie(1,ct)],_E);function $Ze(){let t=l_("workspace");return wIe([[t,"fix",ds.l10n.t("the problems in my code")],[t,"tests",ds.l10n.t("add unit tests for my code")],[t,"explain",ds.l10n.t("how the selected code works")]])}function wIe(t){return t.map(([e,r,n])=>({prompt:"",participant:e,command:r,label:`/${r} ${n}`}))}function WZe(t,e,r){t.map(n=>{H6(e,`@${n.participant} /${n.command} ${n.prompt}`,r,"",ds.window.activeTextEditor?.document)})}var xE=class{constructor(e){this.instantiationService=e}register(){let e=this.instantiationService.createInstance(pa);return e.register(),e}};xE=fe([ie(0,zi)],xE);var pa=class{constructor(e,r,n,i,o,s,a,c){this.options=e;this.extensionContext=r;this.configurationService=n;this.copilotTokenManager=i;this.languageDiagnosticsService=o;this.accessor=s;this.logService=a;this.instantiationService=c;this._disposables=new qt;this._inlineChatSessions=new Ol(10,1);this._logger=new vE(this.accessor,()=>this._disposables.add(It.window.createOutputChannel("GitHub Copilot Chat Conversation","log")))}dispose(){this._disposables.dispose()}register(){this._disposables.add(this.registerDefaultAgent()),this._disposables.add(this.registerEditorDefaultAgent()),this._disposables.add(this.registerNotebookDefaultAgent()),this._disposables.add(this.registerWorkspaceAgent()),this._disposables.add(this.registerVSCodeAgent()),this._disposables.add(this.registerTerminalAgent())}createAgent(e,r){let n=l_(e),i=It.chat.createChatParticipant(n,this.getChatParticipantHandler(n,e,r));return i.onDidReceiveFeedback(o=>{if(pa.isInlineChatResult(o.result))return this.handleInlineChatUserAction(o.result,void 0,o);Y6(this.accessor,o,n)}),i.onDidPerformAction(o=>{if(pa.isInlineChatResult(o.result))return this.handleInlineChatUserAction(o.result,o,void 0);IIe(this.accessor,o,n)}),i.supportIssueReporting=this.accessor.get(ke).getConfig(Ae.DebugReportFeedback),i.followupProvider={provideFollowups:async(o,s,a)=>{if(pa.isInlineChatResult(o))return this.handleInlineChatFollowUps(o,s,a);let c=o.metadata?.responseId&&this.accessor.get(Wg).getConversation(o.metadata.responseId);return c?await CIe(this.accessor,c,this._logger,a):[]}},i}registerWorkspaceAgent(){let e=this.createAgent(Dp,"workspace");return e.iconPath=new It.ThemeIcon("code"),e.isSecondary=!0,e}registerVSCodeAgent(){let e=this.createAgent(eC,"vscode"),r=It.env.appName.includes("Insiders")||It.env.appName.includes("OSS");return e.iconPath=ut.joinPath(this.extensionContext.extensionUri,"assets",r?"vscode-chat-avatar-insiders.svg":"vscode-chat-avatar-stable.svg"),e.supportsSlowReferences=!0,e}registerTerminalAgent(){let e=this.createAgent(u_,"terminal");return e.iconPath=new It.ThemeIcon("terminal"),e.supportsSlowReferences=!0,e}async initDefaultAgentRequestorProps(e){let r=async()=>{let n=await Bu(this.configurationService);if(n){let i=n?.account?.label;return e.requester={name:i,icon:ut.parse(`https://avatars.githubusercontent.com/${i}`)},!0}return!1};if(!await r()){let n=this.copilotTokenManager.onDidGitHubTokenChanged(async()=>{await r()&&n.dispose()})}}registerDefaultAgent(){let e=this.createAgent(D7,"unknown");e.iconPath=new It.ThemeIcon("copilot"),e.supportsSlowReferences=!0,this.initDefaultAgentRequestorProps(e);try{e.helpTextPrefix=It.l10n.t("You can ask me general programming questions, or chat with the following participants which have specialized expertise and can perform actions:");let r=It.l10n.t({message:`To have a great conversation, ask me questions as if I was a real programmer:

* **Show me the code** you want to talk about by having the files open and selecting the most important lines.
* **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
* **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.

You can also ask me questions about your editor selection by [starting an inline chat session](command:inlineChat.start).

Learn more about [GitHub Copilot](https://docs.github.com/copilot/using-github-copilot/getting-started-with-github-copilot?tool=vscode&utm_source=editor&utm_medium=chat-panel&utm_campaign=2024q3-em-MSFT-getstarted) in [Visual Studio Code](https://code.visualstudio.com/docs/copilot/overview).`,comment:"{Locked='](command:inlineChat.start)'}"}),n=new It.MarkdownString(r);n.isTrusted={enabledCommands:["inlineChat.start"]},e.helpTextPostfix=n,e.helpTextVariablesPrefix=It.l10n.t("You can also help me understand your question by using the following variables to give me extra context:")}catch{}return e.welcomeMessageProvider=this.accessor.get(zi).createInstance(_E),e}registerEditorDefaultAgent(){let e=this.createAgent(ZT,"unknown");return e.iconPath=new It.ThemeIcon("copilot"),e.welcomeMessageProvider={provideWelcomeMessage:()=>[],provideSampleQuestions:(r,n)=>{if(It.window.activeTextEditor){let{document:i,selection:o}=It.window.activeTextEditor,s=this.languageDiagnosticsService.getDiagnostics(i.uri).find(a=>a.range.contains(o));if(s&&(s.severity===kc.Warning||s.severity===kc.Error))return[{prompt:`/fix ${s.message}`}]}}},e}registerNotebookDefaultAgent(){let e=this.createAgent("notebook","unknown");return e.iconPath=new It.ThemeIcon("copilot"),e.welcomeMessageProvider={provideWelcomeMessage:()=>[],provideSampleQuestions:(r,n)=>{if(It.window.activeTextEditor){let{document:i,selection:o}=It.window.activeTextEditor,s=this.languageDiagnosticsService.getDiagnostics(i.uri).find(a=>a.range.contains(o));if(s&&(s.severity===kc.Warning||s.severity===kc.Error))return[{prompt:`/fix ${s.message}`}]}}},e}getChatParticipantHandler(e,r,n){return async(i,o,s,a)=>{if(i.location===It.ChatLocation.Editor)return this.handleInlineChatRequest(e,i,o,s,a);if(i.location===It.ChatLocation.Notebook)return this.handleNotebookChatRequest(e,i,o,s,a);let c=new K6(this.accessor,this.options,this._logger);c.addHistory(o.history);let u=MS[n],l=i.command&&u?u[i.command]:n;return await c.provideResponseWithProgress(i,s,a,{agentName:r,agentId:e,intentId:l})}}static{this.metadataKey="inlineChatSession"}static isInlineChatResult(e){return!!this.retrieveSessionId(e)}static retrieveSessionId(e){return e?.metadata?.[pa.metadataKey]}static asChatResultWithSessionId(e){return{metadata:{[pa.metadataKey]:e}}}async handleInlineChatRequest(e,r,n,i,o){this._inlineChatProvider??=this.instantiationService.createInstance(ip,e,this.options.rejectionMessage);let s=r.references??r.variables,a=s.find(p=>p.name==="_inlineChatContext")?.value,c=s.find(p=>p.name==="_inlineChatDocument")?.value,u,l,d;if(typeof a=="string"){let p=JSON.parse(a);l=new It.Selection(p.selection.selectionStartLineNumber-1,p.selection.selectionStartColumn-1,p.selection.positionLineNumber-1,p.selection.positionColumn-1),d=new It.Range(p.wholeRange.startLineNumber-1,p.wholeRange.startColumn-1,p.wholeRange.endLineNumber-1,p.wholeRange.endColumn-1),u=It.workspace.textDocuments.find(f=>f.uri.toString()===ut.revive(p.uri).toString())}if(c instanceof It.Uri){let p=c;u=It.workspace.textDocuments.find(f=>f.uri.toString()===p.toString())}return!u||!l||!d?(this.logService.defaultLogger.warn("Inline chat request is missing context information",u,l,d),{}):this.handleCommonInlineChatRequest(e,n,i,u,l,d,r,o)}async handleCommonInlineChatRequest(e,r,n,i,o,s,a,c){this._inlineChatProvider??=this.instantiationService.createInstance(ip,e,this.options.rejectionMessage);let u;for(let g=r.history.length-1;g>=0;g--){let v=r.history[g];if(v instanceof It.ChatResponseTurn){u=v.result;break}}let l=pa.retrieveSessionId(u)??bn(),d=this._inlineChatSessions.get(l);d||(d={session:await this._inlineChatProvider.prepareInteractiveEditorSession({document:i,selection:o}),responses:[]},this._inlineChatSessions.set(l,d));let p={live:!0,previewDocument:d.session.document,attempt:a.attempt,withIntentDetection:a.enableCommandDetection,prompt:a.prompt,selection:o,wholeRange:s},f={report(g){if(g instanceof It.ChatResponseTextEditPart){let v=It.workspace.textDocuments.find(y=>y.uri.toString()===g.uri.toString());if(v){let y=g.edits.filter(b=>v.getText(b.range)!==b.newText);g=new It.ChatResponseTextEditPart(g.uri,y)}}n.push(g)}},m=await this._inlineChatProvider.provideInteractiveEditorResponse(d.session,p,f,c);if(!m)return{};d.responses.push(m),m.contents&&n.markdown(m.contents);let{buttons:h}=m;if(h)for(let g of h)n.button(g);if(m.edits){let{edits:g}=m;if(g instanceof It.WorkspaceEdit)for(let[v,y]of g.entries())n.textEdit(v,y);else n.textEdit(p.previewDocument.uri,g)}return pa.asChatResultWithSessionId(l)}async handleInlineChatUserAction(e,r,n){let i=pa.retrieveSessionId(e);if(!i)return;let o=this._inlineChatSessions.get(i);if(!o||o.responses.length===0)return;let s;r?.action.kind==="editor"?s=r.action.accepted?3:2:r?.action.kind==="bug"?s=4:n?.kind===It.ChatResultFeedbackKind.Helpful?s=1:n?.kind===It.ChatResultFeedbackKind.Unhelpful&&(s=0),s!==void 0&&this._inlineChatProvider?.handleInteractiveEditorResponseFeedback(o.session,o.responses.at(-1),s)}async handleInlineChatFollowUps(e,r,n){let i=pa.retrieveSessionId(e);if(!i)return[];let o=this._inlineChatSessions.get(i);return!o||o.responses.length===0?[]:await this._inlineChatProvider?.provideFollowups(o.session,o.responses.at(-1),n)??[]}async handleNotebookChatRequest(e,r,n,i,o){this._inlineChatProvider??=this.instantiationService.createInstance(ip,e,this.options.rejectionMessage);let s=r.references.find(l=>l.name==="_notebookChatInput")?.value,a=new It.Selection(0,0,0,0),c=new It.Range(0,0,0,0),u;if(s instanceof It.Uri){let l=s;u=It.workspace.textDocuments.find(d=>d.uri.toString()===l.toString())}return u?this.handleCommonInlineChatRequest(e,n,i,u,a,c,r,o):this.handleInlineChatRequest(e,r,n,i,o)}};pa=fe([ie(0,Vi),ie(1,xr),ie(2,ke),ie(3,Et),ie(4,Ko),ie(5,ct),ie(6,ue),ie(7,zi)],pa);var Le=W(require("vscode"));var Fo=require("vscode");function RIe(t){if(typeof t!="string")throw new TypeError("Argument must be a string.");if(!t)return t;let e=t.startsWith("!"),r=e?t.slice(1):t,n=r,i=!1;switch(r[0]==="/"&&(i=!0,n=r.slice(1)),n[0]){case"*":r[1]!=="*"&&(n="**/"+n);break;default:if((!i&&!n.includes("/")||n.endsWith("/"))&&(n="**/"+n),n.endsWith("*")||n.endsWith("?"))break;/\.[a-z\d_-]+$/.test(n)||(n.endsWith("/")||(n+="/"),n+="**")}return e?"!"+n:n}var qIe=W(UIe()),fa=require("path");var J6=class{constructor(){this._ignoreMap=new Map;this._ignoreCache=new Map;this._searchRankCache=null}setIgnoreFile(e,r,n){let i="";e&&(i=(0,fa.relative)(e.fsPath,(0,fa.dirname)(r.fsPath)),i.startsWith("..")&&(i="")),this._ignoreMap.set(r.fsPath,{ignore:(0,qIe.default)().add(n),patterns:wA(n).filter(o=>o.trim()&&!o.startsWith("#")).map(RIe).map(o=>i?fa.posix.join(i,o):o)}),this._searchRankCache=null,this._ignoreCache.clear()}removeIgnoreFile(e){this._ignoreMap.delete(e.fsPath),this._searchRankCache=null,this._ignoreCache.clear()}removeWorkspace(e){let r=0;for(let n of this._ignoreMap.keys())BIe(e.fsPath,n)&&(this._ignoreMap.delete(n),r+=1);r>0&&(this._searchRankCache=null,this._ignoreCache.clear())}asMinimatchPatterns(){return[...this._ignoreMap.values()].flatMap(e=>e.patterns)}isIgnored(e){if(this._ignoreMap.size===0)return!1;let r=e.fsPath;if(this._ignoreCache.has(r))return this._ignoreCache.get(r);let n=0,i={ignored:!1,unignored:!1};try{let o=this._searchRank;for(let s of o){n+=1;let a=(0,fa.dirname)(s),c=(0,fa.relative)(a,r);if(!c.startsWith("..")&&a!==r&&BIe(a,r)){let u=this._ignoreMap.get(s);if(!u)throw new Error(`No ignore patterns found for ${s}`);if(i=u.ignore.test(c),i.ignored||i.unignored)break}}return this._ignoreCache.set(r,i.ignored),i.ignored}catch{return!1}}get _searchRank(){if(this._searchRankCache!==null)return this._searchRankCache;let e={},r=n=>n.split(fa.sep).length;return this._searchRankCache=[...this._ignoreMap.keys()].sort((n,i)=>(e[i]||=r(i))-(e[n]||=r(n)))}};function BIe(t,e){return t===e?!0:(t.charAt(t.length-1)!==fa.sep&&(t+=fa.sep),(0,fa.normalize)(e).startsWith((0,fa.normalize)(t)))}var awe=W(ZIe(),1);var KR=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var bet={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},YR=t=>t.replace(/[[\]\\-]/g,"\\$&"),_et=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ewe=t=>t.join(""),twe=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,a=!1,c=!1,u=!1,l=r,d="";e:for(;o<t.length;){let h=t.charAt(o);if((h==="!"||h==="^")&&o===r+1){u=!0,o++;continue}if(h==="]"&&s&&!c){l=o+1;break}if(s=!0,h==="\\"&&!c){c=!0,o++;continue}if(h==="["&&!c){for(let[g,[v,y,b]]of Object.entries(bet))if(t.startsWith(g,o)){if(d)return["$.",!1,t.length-r,!0];o+=g.length,b?i.push(v):n.push(v),a=a||y;continue e}}if(c=!1,d){h>d?n.push(YR(d)+"-"+YR(h)):h===d&&n.push(YR(h)),d="",o++;continue}if(t.startsWith("-]",o+1)){n.push(YR(h+"-")),o+=2;continue}if(t.startsWith("-",o+1)){d=h,o+=2;continue}n.push(YR(h)),o++}if(l<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let h=n[0].length===2?n[0].slice(-1):n[0];return[_et(h),!1,l-r,!1]}let p="["+(u?"^":"")+ewe(n)+"]",f="["+(u?"":"^")+ewe(i)+"]";return[n.length&&i.length?"("+p+"|"+f+")":n.length?p:f,a,l-r,!0]};var p0=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var xet=new Set(["!","?","+","*","@"]),rwe=t=>xet.has(t),Eet="(?!(?:^|/)\\.\\.?(?:$|/))",Z6="(?!\\.)",Tet=new Set(["[","."]),Cet=new Set(["..","."]),Iet=new Set("().*{}+?[]^$\\!"),wet=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),LX="[^/]",nwe=LX+"*?",iwe=LX+"+?",SE=class t{type;#t;#i;#d=!1;#r=[];#c;#a;#m;#s=!1;#n;#e;#p=!1;constructor(e,r,n={}){this.type=e,e&&(this.#i=!0),this.#c=r,this.#t=this.#c?this.#c.#t:this,this.#n=this.#t===this?n:this.#t.#n,this.#m=this.#t===this?[]:this.#t.#m,e==="!"&&!this.#t.#s&&this.#m.push(this),this.#a=this.#c?this.#c.#r.length:0}get hasMagic(){if(this.#i!==void 0)return this.#i;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#i=!0;return this.#i}toString(){return this.#e!==void 0?this.#e:this.type?this.#e=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#e=this.#r.map(e=>String(e)).join("")}#h(){if(this!==this.#t)throw new Error("should only call on root");if(this.#s)return this;this.toString(),this.#s=!0;let e;for(;e=this.#m.pop();){if(e.type!=="!")continue;let r=e,n=r.#c;for(;n;){for(let i=r.#a+1;!n.type&&i<n.#r.length;i++)for(let o of e.#r){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#r[i])}r=n,n=r.#c}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#c===this))throw new Error("invalid part: "+r);this.#r.push(r)}}toJSON(){let e=this.type===null?this.#r.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#r.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#s&&this.#c?.type==="!")&&e.push({}),e}isStart(){if(this.#t===this)return!0;if(!this.#c?.isStart())return!1;if(this.#a===0)return!0;let e=this.#c;for(let r=0;r<this.#a;r++){let n=e.#r[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#c?.type==="!")return!0;if(!this.#c?.isEnd())return!1;if(!this.type)return this.#c?.isEnd();let e=this.#c?this.#c.#r.length:0;return this.#a===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#r)r.copyIn(n);return r}static#l(e,r,n,i){let o=!1,s=!1,a=-1,c=!1;if(r.type===null){let f=n,m="";for(;f<e.length;){let h=e.charAt(f++);if(o||h==="\\"){o=!o,m+=h;continue}if(s){f===a+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(f===a+2&&c)&&(s=!1),m+=h;continue}else if(h==="["){s=!0,a=f,c=!1,m+=h;continue}if(!i.noext&&rwe(h)&&e.charAt(f)==="("){r.push(m),m="";let g=new t(h,r);f=t.#l(e,g,f,i),r.push(g);continue}m+=h}return r.push(m),f}let u=n+1,l=new t(null,r),d=[],p="";for(;u<e.length;){let f=e.charAt(u++);if(o||f==="\\"){o=!o,p+=f;continue}if(s){u===a+1?(f==="^"||f==="!")&&(c=!0):f==="]"&&!(u===a+2&&c)&&(s=!1),p+=f;continue}else if(f==="["){s=!0,a=u,c=!1,p+=f;continue}if(rwe(f)&&e.charAt(u)==="("){l.push(p),p="";let m=new t(f,l);l.push(m),u=t.#l(e,m,u,i);continue}if(f==="|"){l.push(p),p="",d.push(l),l=new t(null,r);continue}if(f===")")return p===""&&r.#r.length===0&&(r.#p=!0),l.push(p),p="",r.push(...d,l),u;p+=f}return r.type=null,r.#i=void 0,r.#r=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#l(e,n,0,r),n}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#i||this.#n.nocase&&!this.#n.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#n.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#n.dot;if(this.#t===this&&this.#h(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#r.map(f=>{let[m,h,g,v]=typeof f=="string"?t.#v(f,this.#i,c):f.toRegExpSource(e);return this.#i=this.#i||g,this.#d=this.#d||v,m}).join(""),l="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&Cet.has(this.#r[0]))){let m=Tet,h=r&&m.has(u.charAt(0))||u.startsWith("\\.")&&m.has(u.charAt(2))||u.startsWith("\\.\\.")&&m.has(u.charAt(4)),g=!r&&!e&&m.has(u.charAt(0));l=h?Eet:g?Z6:""}let d="";return this.isEnd()&&this.#t.#s&&this.#c?.type==="!"&&(d="(?:$|\\/)"),[l+u+d,p0(u),this.#i=!!this.#i,this.#d]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#u(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#r=[c],this.type=null,this.#i=void 0,[c,p0(this.toString()),!1,!1]}let s=!n||e||r||!Z6?"":this.#u(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let a="";if(this.type==="!"&&this.#p)a=(this.isStart()&&!r?Z6:"")+iwe;else{let c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Z6:"")+nwe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=i+o+c}return[a,p0(o),this.#i=!!this.#i,this.#d]}#u(e){return this.#r.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#d=this.#d||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#v(e,r,n=!1){let i=!1,o="",s=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,o+=(Iet.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,l,d,p]=twe(e,a);if(d){o+=u,s=s||l,a+=d-1,r=r||p;continue}}if(c==="*"){n&&e==="*"?o+=iwe:o+=nwe,r=!0;continue}if(c==="?"){o+=LX,r=!0;continue}o+=wet(c)}return[o,p0(e),!!r,s]}};var OX=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var ps=(t,e,r={})=>(KR(e),!r.nocomment&&e.charAt(0)==="#"?!1:new EE(e,r).match(t)),Ret=/^\*+([^+@!?\*\[\(]*)$/,Aet=t=>e=>!e.startsWith(".")&&e.endsWith(t),Pet=t=>e=>e.endsWith(t),ket=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Det=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Net=/^\*+\.\*+$/,Let=t=>!t.startsWith(".")&&t.includes("."),Oet=t=>t!=="."&&t!==".."&&t.includes("."),Met=/^\.\*+$/,Fet=t=>t!=="."&&t!==".."&&t.startsWith("."),Uet=/^\*+$/,Bet=t=>t.length!==0&&!t.startsWith("."),qet=t=>t.length!==0&&t!=="."&&t!=="..",Het=/^\?+([^+@!?\*\[\(]*)?$/,Get=([t,e=""])=>{let r=cwe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},jet=([t,e=""])=>{let r=uwe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},zet=([t,e=""])=>{let r=uwe([t]);return e?n=>r(n)&&n.endsWith(e):r},Vet=([t,e=""])=>{let r=cwe([t]);return e?n=>r(n)&&n.endsWith(e):r},cwe=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},uwe=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},lwe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",owe={win32:{sep:"\\"},posix:{sep:"/"}},$et=lwe==="win32"?owe.win32.sep:owe.posix.sep;ps.sep=$et;var Cu=Symbol("globstar **");ps.GLOBSTAR=Cu;var Wet="[^/]",Ket=Wet+"*?",Yet="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Qet="(?:(?!(?:\\/|^)\\.).)*?",Xet=(t,e={})=>r=>ps(r,t,e);ps.filter=Xet;var Tu=(t,e={})=>Object.assign({},t,e),Jet=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ps;let e=ps;return Object.assign((n,i,o={})=>e(n,i,Tu(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Tu(t,o))}static defaults(i){return e.defaults(Tu(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Tu(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Tu(t,o))}},unescape:(n,i={})=>e.unescape(n,Tu(t,i)),escape:(n,i={})=>e.escape(n,Tu(t,i)),filter:(n,i={})=>e.filter(n,Tu(t,i)),defaults:n=>e.defaults(Tu(t,n)),makeRe:(n,i={})=>e.makeRe(n,Tu(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,Tu(t,i)),match:(n,i,o={})=>e.match(n,i,Tu(t,o)),sep:e.sep,GLOBSTAR:Cu})};ps.defaults=Jet;var dwe=(t,e={})=>(KR(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,awe.default)(t));ps.braceExpand=dwe;var Zet=(t,e={})=>new EE(t,e).makeRe();ps.makeRe=Zet;var ett=(t,e,r={})=>{let n=new EE(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};ps.match=ett;var swe=/[?*]|[+@!]\(.*?\)|\[|\]/,ttt=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),EE=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){KR(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||lwe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!swe.test(o[2]))&&!swe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(l=>this.parse(l))];if(u)return[o[0],...o.slice(1).map(l=>this.parse(l))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let a=n[i+1],c=n[i+2],u=n[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let l=n.slice(0);l[i]="**",e.push(l),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let a=n[s];s===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let c=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...c),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],a="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(a==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(a==="b")return!1;a="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),g=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),v=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),y=!v&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),b=g?3:h?0:void 0,x=y?3:v?0:void 0;if(typeof b=="number"&&typeof x=="number"){let[S,T]=[e[b],r[x]];S.toLowerCase()===T.toLowerCase()&&(r[x]=S,x>b?r=r.slice(x):b>x&&(e=e.slice(b)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,a=0,c=e.length,u=r.length;s<c&&a<u;s++,a++){this.debug("matchOne loop");var l=r[a],d=e[s];if(this.debug(r,l,d),l===!1)return!1;if(l===Cu){this.debug("GLOBSTAR",[r,l,d]);var p=s,f=a+1;if(f===u){for(this.debug("** at the end");s<c;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;p<c;){var m=e[p];if(this.debug(`
globstar while`,e,p,r,f,m),this.matchOne(e.slice(p),r.slice(f),n))return this.debug("globstar found match!",p,c,m),!0;if(m==="."||m===".."||!i.dot&&m.charAt(0)==="."){this.debug("dot detected!",e,p,r,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,r,f),p===c))}let h;if(typeof l=="string"?(h=d===l,this.debug("string match",l,d,h)):(h=l.test(d),this.debug("pattern match",l,d,h)),!h)return!1}if(s===c&&a===u)return!0;if(s===c)return n;if(a===u)return s===c-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return dwe(this.pattern,this.options)}parse(e){KR(e);let r=this.options;if(e==="**")return Cu;if(e==="")return"";let n,i=null;(n=e.match(Uet))?i=r.dot?qet:Bet:(n=e.match(Ret))?i=(r.nocase?r.dot?Det:ket:r.dot?Pet:Aet)(n[1]):(n=e.match(Het))?i=(r.nocase?r.dot?jet:Get:r.dot?zet:Vet)(n):(n=e.match(Net))?i=r.dot?Oet:Let:(n=e.match(Met))&&(i=Fet);let o=SE.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?Ket:r.dot?Yet:Qet,i=new Set(r.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(l=>{if(l instanceof RegExp)for(let d of l.flags.split(""))i.add(d);return typeof l=="string"?ttt(l):l===Cu?Cu:l._src});return u.forEach((l,d)=>{let p=u[d+1],f=u[d-1];l!==Cu||f===Cu||(f===void 0?p!==void 0&&p!==Cu?u[d+1]="(?:\\/|"+n+"\\/)?"+p:u[d]=n:p===void 0?u[d-1]=f+"(?:\\/|"+n+")?":p!==Cu&&(u[d-1]=f+"(?:\\/|\\/"+n+"\\/)"+p,u[d+1]=Cu))}),u.filter(l=>l!==Cu).join("/")}).join("|"),[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let a=i.length-2;!s&&a>=0;a--)s=i[a];for(let a=0;a<o.length;a++){let c=o[a],u=i;if(n.matchBase&&c.length===1&&(u=[s]),this.matchOne(u,c,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ps.defaults(e).Minimatch}};ps.AST=SE;ps.Minimatch=EE;ps.escape=OX;ps.unescape=p0;var e8=class t{constructor(e){this.accessor=e;this._contentExclusionCache=new Map;this._contentExclusionFetchPromise=void 0;this._repositoryDiscoveryComplete=!1;this._disposables=[];let r=new FA;this._disposables.push(r),r.cancelAndSet(async()=>{await this.makeContentExclusionRequest()},30*60*1e3),this.accessor.get(ei).repositories.map(n=>this.shouldFetchContentExclusionRules(n)),this.makeContentExclusionRequest(),this._disposables.push(this.accessor.get(ei).onDidOpenRepository(async n=>{this.shouldFetchContentExclusionRules(n)&&await this.makeContentExclusionRequest()})),this._disposables.push(this.accessor.get(ei).onDidCloseRepository(async n=>{let i=this.getRepositoryInfo(n);if(i)for(let o of i.fetchUrls)this._contentExclusionCache.delete(o)})),this.accessor.get(oc).extensionAvaiable||(this._repositoryDiscoveryComplete=!0),this.accessor.get(ei).isInitialized?this._repositoryDiscoveryComplete=!0:this._disposables.push(this.accessor.get(ei).onDidFinishInitialization(()=>{this._repositoryDiscoveryComplete=!0}))}static{this.CONTENT_EXCLUSION_ENDPOINT="https://api.github.com/copilot_internal/content_exclusion"}async isIgnored(e){await this._contentExclusionFetchPromise,this.shouldFetchContentExclusionRules(e)&&await this.makeContentExclusionRequest();for(let{patterns:r}of this._contentExclusionCache.values())for(let n of r)if(ps(e.path,n,{nocase:!0,matchBase:!0,nonegate:!0}))return this.accessor.get(ue).defaultLogger.debug(`File ${e.path} is ignored by content exclusion rule ${n}`),!0;return this._repositoryDiscoveryComplete?!1:(this.accessor.get(ue).defaultLogger.debug(`File ${e.path} is automatically ignored by content exclusion rules as repository discovery is not complete`),!0)}async asMinimatchPatterns(){return await this._contentExclusionFetchPromise,Array.from(this._contentExclusionCache.values()).flatMap(({patterns:r})=>r)}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[],this._contentExclusionCache.clear()}shouldFetchContentExclusionRules(e){let r=this.getRepositoryInfo(e);if(!r)return!1;let n=!1;for(let i of r?.fetchUrls??[])this._contentExclusionCache.has(i)||(n=!0,this._contentExclusionCache.set(i,{patterns:[],repoRoot:r.repoRoot}));return n}async makeContentExclusionRequest(){try{this._contentExclusionFetchPromise=this._contentExclusionRequest(),await this._contentExclusionFetchPromise}catch{this._contentExclusionFetchPromise=void 0}}async _contentExclusionRequest(){let e=this.accessor.get(Mr),r=await this.accessor.get(Et).getAnyGitHubToken(),n=Array.from(this._contentExclusionCache.keys());for(let i=0;i<n.length;i+=10){let o=n.slice(i,i+10),s=o.join(","),a=new URL(t.CONTENT_EXCLUSION_ENDPOINT);a.searchParams.set("repos",s);let c=await e.fetch(a.toString(),{headers:{Authorization:`token ${r}`}});if(!c.ok)continue;let u=await c.json();for(let l=0;l<u.length;l++){let d=u[l].rules.map(m=>m.paths).flat(),p=o[l],f=this._contentExclusionCache.get(p)?.repoRoot;f&&this._contentExclusionCache.set(p,{patterns:rtt(d,f),repoRoot:f})}this._contentExclusionFetchPromise=void 0}}getRepositoryInfo(e){let r=ut.isUri(e)?this.accessor.get(ei).getRepository(e):e;if(!r||!r.remoteFetchUrls)return;let n=Xt(r.remoteFetchUrls.map(i=>{if(i)try{return wie(i)}catch{return}}));return{repoRoot:r.rootUri,fetchUrls:n}}};function rtt(t,e){return t.map(r=>r.startsWith("/")?`${e.path}${r}`:r)}var t8=".copilotignore";var r8=class{constructor(e,r,n){this.accessor=e;this.searchService=r;this.fs=n;this._copilotIgnoreFiles=new J6;this._copilotIgnoreEnabled=!1;this._onDidChangeCopilotIgnoreEnablement=new gr;this._disposables=[];this.onDidChangeCopilotIgnoreEnablement=this._onDidChangeCopilotIgnoreEnablement.event;this._filesIgnoredThisSession={"Remote Content Exclusions":new Set,"Copilot Ignore File":new Set},this._disposables.push(this._onDidChangeCopilotIgnoreEnablement),this._disposables.push(e.get(Co).onCopilotToken(async i=>{let o=i.envelope.copilotignore_enabled??!1;this._copilotIgnoreEnabled!==o&&this._onDidChangeCopilotIgnoreEnablement.fire(o),this._copilotIgnoreEnabled=o,this._copilotIgnoreEnabled===!1&&this._remoteContentExclusions&&(this._remoteContentExclusions.dispose(),this._remoteContentExclusions=void 0),this._copilotIgnoreEnabled===!0&&!this._remoteContentExclusions&&(this._remoteContentExclusions=new e8(e))}))}dispose(){this._disposables.forEach(e=>e.dispose()),this._remoteContentExclusions&&(this._remoteContentExclusions.dispose(),this._remoteContentExclusions=void 0),this._disposables=[]}async isCopilotIgnored(e){let r=!1;if(this._copilotIgnoreEnabled){let n=this._copilotIgnoreFiles.isIgnored(e);r=n||await(this._remoteContentExclusions?.isIgnored(e)??!1),r&&(n?this._filesIgnoredThisSession["Copilot Ignore File"].add(e.toString()):this._filesIgnoredThisSession["Remote Content Exclusions"].add(e.toString()))}return r}async asMinimatchPattern(){let e=[];e.push(await this._remoteContentExclusions?.asMinimatchPatterns()??[]),e.push(this._copilotIgnoreFiles.asMinimatchPatterns());let r=e.flat();if(r.length!==0)return r.length===1?r[0]:`{${r.join(",")}}`}init(){return this._init??=(async()=>{for(let e of this.accessor.get(Ze).getWorkspaceFolders())await this.addWorkspace(e)})(),this._init}async sessionInfo(){let e=`# Content Exclusion Session Info

`;for(let n in this._filesIgnoredThisSession){let i=this._filesIgnoredThisSession[n];i.size>0&&(e+=`## Files ignored this session from ${n}:

${Array.from(i).join(`
`)}`,e+=`

`)}let r=await this.asMinimatchPattern();return r&&(e+=`## Exclude glob used during search:
`+r),e}trackIgnoreFile(e,r,n){r.path.endsWith(t8)&&this._copilotIgnoreFiles.setIgnoreFile(e,r,n)}removeIgnoreFile(e){e.path.endsWith(t8)&&this._copilotIgnoreFiles.removeIgnoreFile(e)}removeWorkspace(e){this._copilotIgnoreFiles.removeWorkspace(e)}isIgnoreFile(e){return!!e.path.endsWith(t8)}async addWorkspace(e){if(e.scheme!=="file")return;let r=await this.searchService.findFilesWithDefaultExcludes(new PS(e,`${t8}`),void 0,Vr.None);for(let n of r){let i=(await this.fs.readFile(n)).toString();this.trackIgnoreFile(e,n,i)}}};var n8=class{constructor(e){this.contentProvider=e}async provideTextDocumentContent(e,r){return this.contentProvider()}};var pwe="copilot-ignore",QR=class extends r8{constructor(e,r,n){super(e,r,n),this.installListeners(),this._disposables.push(Fo.workspace.registerTextDocumentContentProvider(pwe,new n8(this.sessionInfo.bind(this))))}installListeners(){this._disposables.push(Fo.workspace.onDidChangeWorkspaceFolders(e=>{for(let r of e.removed)this.removeWorkspace(r.uri);for(let r of e.added)this.addWorkspace(r.uri)})),this._disposables.push(Fo.workspace.onDidSaveTextDocument(async e=>{if(this.isIgnoreFile(e.uri)){let r=(await Fo.workspace.fs.readFile(e.uri)).toString(),n=Fo.workspace.getWorkspaceFolder(e.uri);this.trackIgnoreFile(n?.uri,e.uri,r)}}),Fo.workspace.onDidDeleteFiles(e=>{for(let r of e.files)this.removeIgnoreFile(r)}),Fo.workspace.onDidRenameFiles(async e=>{for(let r of e.files)if(this.isIgnoreFile(r.newUri)){let n=(await Fo.workspace.fs.readFile(r.newUri)).toString();this.removeIgnoreFile(r.oldUri);let i=Fo.workspace.getWorkspaceFolder(r.newUri);this.trackIgnoreFile(i?.uri,r.newUri,n)}})),this._disposables.push(this.onDidChangeCopilotIgnoreEnablement(e=>{Fo.commands.executeCommand("setContext","github.copilot.copilotIgnoreEnabled",e)}))}async dispalyContentExclusionSessionInfo(){let e=ut.from({scheme:pwe,authority:bn(),path:"/Content Exclusion Session Info"}),r=await Fo.workspace.openTextDocument(e);await Fo.languages.setTextDocumentLanguage(r,"markdown"),await Fo.window.showTextDocument(r)}};function fwe(t){let e=t.get(De);return e instanceof QR?Fo.commands.registerCommand("github.copilot.debug.contentExclusions",e.dispalyContentExclusionSessionInfo.bind(e)):{dispose:()=>{}}}var _8=W(require("path")),kt=W(require("vscode"));var mwe=W(require("path"));var TE=class{constructor(){this.kind="current-selection";this.variableInfo=In.variableInfo;this.metaContextResolverInfo={description:"Active selection."}}async resolveContext(e,r){let{messages:n,references:i,usedContext:o}=await ca(e,r.endpoint,In,{},e.get(ge));if(n.length>0&&i.length>0)return{kind:this.kind,userMessages:n.map(s=>s.content),usedContext:o,references:i}}static formatSelection(e){let r=e.fileName?`From the file: ${mwe.basename(e.fileName)}
`:"",{trimmedLines:n}=cC(e.selectedText.split(/\r?\n/g));return`

${r}${Ii(e.languageId,Xt(n).join(`
`))}

`}},ecr=un.register(new TE);var Tc=W(require("vscode")),xwe=W(require("path"));var bwe=W(st());var di=class extends K{render(){return vscpp(vscppf,null,"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.")}};var hwe=W(st());var f0=class t extends K{static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){let e={implementations:[],activeDocument:void 0,isIgnored:!1},{document:r,range:n}=this.props;if(!r){let a=this.accessor.get(Tt).activeTextEditor;if(!a)return e;r??=a.document,n??=a.selection}if(!n||n.isEmpty)return e;if(await this.accessor.get(De).isCopilotIgnored(r.uri))return{...e,isIgnored:!0};let i=this.accessor.get(xr).extensionMode===Sa.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,o=[{header:"Relevant function implementations",findImpls:jCe},{header:"Relevant class declarations",findImpls:zCe},{header:"Relevant type declarations",findImpls:VCe}],s=[];for(let{header:a,findImpls:c}of o){let u=await c(this.accessor,r,n,i);s.push([a,u])}return{implementations:s,activeDocument:r,isIgnored:!1}}render(e,r){if(!e.implementations.length||!e.activeDocument)return;let n=e.activeDocument.uri;if(e.isIgnored)return vscpp("ignoredFiles",{value:[n]});let i=[],o=[],s=[];for(let[a,c]of e.implementations){let{references:u,usedContext:l,text:d,uris:p}=MX(e.activeDocument,c);if(d.length===0)continue;let f=vscpp(hwe.UserMessage,{priority:this.props.priority},a,":",vscpp("br",null),vscpp("br",null),d.map((m,h)=>vscpp(vscppf,null,vscpp(Be,{code:m,languageId:e.activeDocument?.languageId,uri:p[h]}),vscpp("br",null))));i.push(f),o.push(...u),s.push(...l)}return vscpp(vscppf,null,vscpp("usedContext",{value:s}),vscpp("references",{value:o}),...i)}};function MX(t,e){let r=[],n=new Map,i=new Set,o=[],s=[];for(let a of e){let c=a.uri??t.uri,u=a.range??_s(t,a),l=`${c.toString()}-${u.start.line}-${u.start.character}-${u.end.line}-${u.end.character}`;if(i.has(l))continue;i.add(l),r.push(new xo.PromptReference(new Ea(c,u))),o.push(a.text),s.push(c);let[d,p]=n.get(c)??[a.version??t.version,[]];p.push(u),n.set(c,[d,p])}return{references:r,usedContext:[...n.entries()].map(([a,[c,u]])=>({uri:a,version:c,ranges:u})),text:o,uris:s}}var vwe=W(_r()),ywe=W(st());var i8=W(_r()),gwe=W(st());var m0=class t extends K{static getSymbolAtCursor(e,r){let{selection:n,document:i}=r;if(!n||!i){let a=e.get(Tt).activeTextEditor;if(!a)return;({selection:n,document:i}=a)}if(!n.isEmpty)return;let o=i.getWordRangeAtPosition(n.active)??n;return{selectedText:i.getText(o),document:i,range:o}}static async getDefinitionAtRange(e,r,n,i){if(await e.get(De).isCopilotIgnored(r.uri))return;let s=e.get(xt).getTreeSitterAST(r);if(s===void 0)return;let a=Ki(n,r),c;i&&(c=await s.getNodeToExplain(a)),c??=await s.getNodeToDocument(a);let{startIndex:u,endIndex:l}="nodeToDocument"in c?c.nodeToDocument:c.nodeToExplain,d=_s(r,{startIndex:u,endIndex:l});return{identifier:c.nodeIdentifier,text:r.getText(d),range:d,uri:r.uri,startIndex:u,endIndex:l}}static async getSelectedScope(e,r){let n=e.get(De);if(!r.document||await n.isCopilotIgnored(r.document.uri))return;let i=t.getSymbolAtCursor(e,r),o,s=i?await t.getDefinitionAtRange(e,i.document,i.range,!1):void 0;if(e.get(ke).getConfig(Ae.ExplainScopeSelection)||i&&(s?.identifier!==i.selectedText||!i.selectedText)){let c=e.get(Tt).activeTextEditor;if(!c)return;let u=await e.get(Wm).selectEnclosingScope(c,{reason:i8.t("Select an enclosing range to explain"),includeBlocks:!0});if(u){let l=c.document,d=l.getText(u);if(!d)return;o={codeAtCursor:d,document:l,range:u,definitions:[],references:[]}}}return{symbolAtCursorState:o,definition:s,symbolAtCursor:i}}async prepare(e,r,n){let i=await t.getSelectedScope(this.accessor,this.props).catch(()=>{});if(!i)return;let{symbolAtCursorState:o,definition:s,symbolAtCursor:a}=i;if(a){s?.identifier===a?.selectedText?o??={codeAtCursor:s.text,document:a.document,range:s.range,definitions:[],references:[]}:o??={codeAtCursor:a.document.lineAt(a.range.start).text,document:a.document,range:a.document.lineAt(a.range.start).range,definitions:[],references:[]},r.report(new Io(i8.t("Searching for relevant definitions...")));try{for(let c of await this.accessor.get(hi).getDefinitions(a.document.uri,a.range.start)){let{uri:u,range:l}=Op(c)?{uri:c.targetUri,range:c.targetRange}:c;if(l.isEqual(a.range))continue;let d=await this.accessor.get(Ze).openTextDocument(u),p=await t.getDefinitionAtRange(this.accessor,d,l,!0);p&&o.definitions.push(p)}}catch{}r.report(new Io(i8.t("Searching for relevant references...")));try{let c=new Set;for(let u of await this.accessor.get(hi).getReferences(a.document.uri,a.range.start)){let{uri:l,range:d}=Op(u)?{uri:u.targetUri,range:u.targetRange}:u;if(d.isEqual(a.range))continue;let p=`${l.toString()}-${d.start.line}-${d.start.character}-${d.end.line}-${d.end.character}`;if(c.has(p))continue;c.add(p);let f=await this.accessor.get(Ze).openTextDocument(l),m=await t.getDefinitionAtRange(this.accessor,f,d,!1);m&&o.references.push(m)}}catch{}return o}}render(e,r){if(!e)return;let n=[...e.definitions,...e.references];if(e.codeAtCursor){let{startIndex:s,endIndex:a}=Ki(e.range,e.document);n.push({version:e.document.version,uri:e.document.uri,range:e.range,text:e.codeAtCursor,startIndex:s,endIndex:a})}let{usedContext:i,references:o}=MX(e.document,n);return vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp("references",{value:o}),vscpp(gwe.UserMessage,null,"I have the following  code in the active editor:",vscpp("br",null),vscpp(Be,{uri:e.document.uri,languageId:e.document.languageId,code:e.codeAtCursor}),vscpp("br",null),!!e.definitions.length&&vscpp(vscppf,null,"Here are some relevant definitions for the symbols in my code:",vscpp("br",null)),!!e.definitions.length&&vscpp(QS.PrioritizedList,{priority:this.props.priority,descending:!0},e.definitions.map(s=>vscpp(Be,{uri:e.document.uri,languageId:e.document.languageId,code:s.text}))),!!e.references.length&&vscpp(vscppf,null,vscpp("br",null),"Here are some places where the the symbols in my code are referenced:",vscpp("br",null)),!!e.references.length&&vscpp(QS.PrioritizedList,{priority:this.props.priority-e.definitions.length,descending:!0},e.references.map(s=>vscpp(vscppf,null,!!s.uri&&vscpp(vscppf,null,"From the file ",TA(s.uri.toString()),":",vscpp("br",null)),vscpp(Be,{uri:e.document.uri,languageId:e.document.languageId,code:s.text}),vscpp("br",null))))))}};var op=class t extends K{async prepare(e){let{editor:r,document:n}=this.props.input,i=this.props.input.change,{selection:o}=this.props.input;if(await this.accessor.get(De).isCopilotIgnored(n.uri))return{input:void 0};if(r&&!i&&(!o||o.isEmpty)){let g=await this.accessor.get(Wm).selectEnclosingScope(r,{reason:vwe.t("Select an enclosing range to review"),includeBlocks:!0});if(!g)return{input:void 0};o=g}let a,c=o?o.end.line+(o.end.character>0?1:0):void 0;if(i?.hunks.length){let g=i.hunks[0];a=[g.range.start.line>0?t.enumeratedLines(n,0,g.range.start.line):"",...i.hunks.map((v,y,b)=>{let x=y+1<b.length?b[y+1].range.start.line:n.lineCount;return[t.enumeratedChangeLines(v.text,v.range.start.line),`
`,v.range.end.line<x?t.enumeratedLines(n,v.range.end.line,x):""]}).flat()].join("")}else o?a=t.enumeratedSelectedLines(n,0,n.lineCount,o.start.line,c):a=t.enumeratedLines(n,0,n.lineCount);let u=this.accessor.get(ge),l=u.tokenLength(a),d=this.props.logService.getLogger("CurrentChange");if(d.info(`Full document: ${l} tokens, ${e.tokenBudget} budget`),i||l<=e.tokenBudget)return{input:{uri:n.uri,hunks:[{range:new Xe(0,0,n.lineCount,0),text:a}]}};let p=(i||o)&&await m0.getDefinitionAtRange(this.accessor,n,o,!1);if(!p)return{input:void 0};let f=p.range.end.line+(p.range.end.character>0?1:0),m=t.enumeratedSelectedLines(n,p.range.start.line,f,o.start.line,c),h=u.tokenLength(m);return d.info(`Definition: ${h} tokens, ${e.tokenBudget} budget`),{input:{uri:n.uri,hunks:[{range:p.range,text:m}]}}}render(e,r){if(!e.input)return;let n=this.props.input.document,i=[{uri:n.uri,version:n.version,ranges:e.input.hunks.map(o=>o.range)}];return vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp(ywe.UserMessage,{priority:this.props.priority},this.props.input.change?vscpp(vscppf,null,"Change at cursor:",vscpp("br",null),vscpp("br",null),"Changes are indicated by lines starting with + and -. Each line is annotated with the line number in the file.",vscpp("br",null)):vscpp(vscppf,null,"Current selection with the selected lines labeled as such:",vscpp("br",null)),vscpp("br",null),"From the file: ",this.props.input.relativeDocumentPath,vscpp("br",null),e.input.hunks.map(o=>vscpp(l6,{uri:n.uri,range:o.range,code:o.text,languageId:`${n.languageId}/${this.props.input.relativeDocumentPath}: FROM_LINE: ${o.range.start.line+1} - TO_LINE: ${o.range.end.line}`})),vscpp("br",null),vscpp("br",null)))}static async getCurrentChanges(e,r){let i=e.get(oc).getExtensionApi();return i?(await Promise.all(i.repositories.map(async s=>{let a=await(r==="index"?s.diffIndexWithHEAD():s.diffWithHEAD());return await Promise.all(a.map(async u=>{let l=await(r==="index"?s.diffIndexWithHEAD(u.uri.fsPath):s.diffWithHEAD(u.uri.fsPath));return{repository:s,uri:u.uri,hunks:t.parseDiff(l).map(d=>t.gitHunkToHunk(d))}}))}))).flat():[]}static async getCurrentChange(e,r,n){let o=e.get(oc).getExtensionApi();if(!o)return;let s=o.getRepository(r.uri);if(!s)return;let a=await s.diffWithHEAD(r.uri.fsPath);if(!a)return;let u=t.parseDiff(a).find(l=>l.additions.some(d=>{let p=d.start-1,f=p+d.length-1;return n.line>=p&&n.line<=f}));if(u)return{repository:s,uri:r.uri,hunks:[t.gitHunkToHunk(u)]}}static gitHunkToHunk(e){return{range:new Xe(e.startAddedLine-1,0,e.startAddedLine-1+e.addedLines,0),text:e.diffText}}static parseDiff(e){let r=e.split(`
@@`);return r.length&&r[r.length-1].endsWith(`
`)&&(r[r.length-1]=r[r.length-1].slice(0,-1)),r.map(i=>{let o=i.match(/-(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))?/);if(o){let s=parseInt(o[1]),a=o[2]?parseInt(o[2]):1,c=parseInt(o[3]),u=o[4]?parseInt(o[4]):1,l=[],d=i.split(`
`).slice(1),p=0,f;for(let m of d){let h=m.charAt(0);h==="+"?(f===void 0&&(f=c+p),p++):(f!==void 0&&(l.push({start:f,length:c+p-f}),f=void 0),h===" "&&p++)}return f!==void 0&&(l.push({start:f,length:c+p-f}),f=void 0),{startDeletedLine:s,deletedLines:a,startAddedLine:c,addedLines:u,additions:l,diffText:d.join(`
`)}}return null}).filter(Boolean)}static enumeratedLines(e,r,n){return e.getText(new Xe(r,0,n,0)).split(`
`).map((s,a)=>`/* Line ${r+a+1} */${s}`).join(`
`)}static enumeratedSelectedLines(e,r,n,i,o){return e.getText(new Xe(r,0,n,0)).split(`
`).map((c,u)=>{let l=r+u;return`/* ${i<=l&&l<o?"Selected ":""}Line ${l+1} */${c}`}).join(`
`)}static enumeratedChangeLines(e,r){let n=0;return e.split(`
`).filter(o=>o[0]!=="-").map((o,s)=>{let a=o.substring(0,1),c=a==="-";return c&&n++,`${a}/* ${c?"Removed Line":`Line ${r+s-n+1}`} */${o.substring(1)}`}).join(`
`)}};var CE=class extends K{render(e,r){return vscpp(vscppf,null,vscpp(bwe.SystemMessage,{priority:1001},"You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",vscpp("br",null),vscpp(qr,null),vscpp(Br,null),vscpp(di,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.",vscpp("br",null),"2. Provide feedback on the current ",this.props.input[0]?.change?vscpp(vscppf,null,"change"):vscpp(vscppf,null,"selection")," on where it can be improved or introduces a problem.",vscpp("br",null),"2a. Avoid commenting on correct code.",vscpp("br",null),"2b. Avoid commenting on commented out code.",vscpp("br",null),"2c. Keep scoping rules in mind.",vscpp("br",null),"3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, other), severity (low, medium, high), and feedback text.",vscpp("br",null),"3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.",vscpp("br",null),"3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.",vscpp("br",null),"3c. E.g.: 3. Line 376 in src/binary-search.js, documentation, medium severity: Function `binarySearch` assumes that the input array `arr` is sorted. This assumption should be documented or checked.",vscpp("br",null),"3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.",vscpp("br",null),"3e. E.g.: 5. Line 220 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.",vscpp("br",null),'4. When there is no feedback to provide, reply with "No feedback to provide."',vscpp("br",null),vscpp("br",null),"Focus on being clear, helpful, and thorough.",vscpp("br",null),"Use developer-friendly terms and analogies in your explanations.",vscpp("br",null),"Provide clear and relevant examples when helpful."),vscpp(_u,{priority:700}),this.props.input.map(n=>vscpp(op,{input:n,logService:this.props.logService,priority:1e3})),this.props.input.map(n=>vscpp(f0,{document:n.document,range:n.selection,priority:800})),this.props.chatVariables&&this.props.query&&vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var IE=class{constructor(e,r){this.accessor=e;this.telemetryService=e.get(Ee),this.options=e.get(Vi),this.tokenizer=e.get(ge),this.endpointProvider=this.accessor.get(Ue),this.fetcher=this.accessor.get(Jt),this.logService=this.accessor.get(ue),this.chatLogger=r&&new vE(e,()=>r())}async generateComments(e,r,n){let i=Date.now(),o=this.accessor.get(ue).getLogger("FeedbackGenerator"),s=this.accessor.get(De),a=await Promise.all(e.map(v=>s.isCopilotIgnored(v.document.uri))),c=e.filter((v,y)=>!a[y]);if(c.length===0)return o.info("Feedback generation is ignored for all changed documents."),[];let u=await this.endpointProvider.getUserRequestEndpoint(3,void 0,"gpt-4"),d=await new Je(u,CE,{input:c,logService:this.logService},this.tokenizer,this.accessor).render();this.chatLogger?.logMessages(d.messages);let p=[],f=n?async v=>{let y=XR(c,v,!0);y.length>p.length&&(n.report(y.slice(p.length)),p=y)}:void 0,m=Date.now(),h=await this.fetcher.fetchOne(d.messages,f,r,3,u,void 0,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:"command.generateFeedbackPrompt"});h.type==="success"?this.chatLogger?.logProgress({value:new Wo(h.value)},!0):this.chatLogger?.logResponse({errorDetails:{message:h.reason}});let g=h.type==="success"?XR(c,h.value,!1):void 0;return this.telemetryService.sendMSFTTelemetryEvent("feedback.generateDiagnostics",{model:u.model,requestId:h.requestId,responseType:h.type},{numberOfDiagnostics:g?.length??-1,timeToRequest:m-i,timeToComplete:Date.now()-i}),n&&g&&g.length>p.length&&(n.report(g.slice(p.length)),p=g),g||[]}};function XR(t,e,r=!1){let n=[],i=t[0].document;for(let o of FX(e,r)){let{relativeDocumentPath:s,from:a,to:c,kind:u,severity:l,content:d}=o,p;if(s){let y=t.find(b=>b.relativeDocumentPath===s);i=y?.document||i,p=y?.selection}let f=i.lineAt(a),m=i.lineAt(c-1),h=m.text.trimEnd().length,g=new Xe(f.lineNumber,f.firstNonWhitespaceCharacterIndex,m.lineNumber,h);if(p&&!g.intersection(p))continue;let v={uri:i.uri,range:g,body:new Wo(d),kind:u,severity:l};n.push(v)}return n}function FX(t,e=!1){let r=/(?<num>\d+)\. Line (?<from>\d+)(-(?<to>\d+))?([^:]*)( in `?(?<relativeDocumentPath>[^,:`]+))`?(, (?<kind>\w+))?(, (?<severity>\w+) severity)?: (?<content>.+?)((?=\n\d+\.|\n\n)|(?<earlyEnd>$))/gs;return Xt(Array.from(t.matchAll(r),n=>{let i=n.groups;if(e&&typeof i.earlyEnd=="string")return;let o=parseInt(i.from)-1,s=i.to?parseInt(i.to):o+1,a=i.relativeDocumentPath,c=i.kind||"other",u=i.severity||"unknown",l=i.content.trim();return{relativeDocumentPath:a,from:o,to:s,linkOffset:n.index+i.num.length+2,linkLength:5+i.from.length+(i.to?i.to.length+1:0),kind:c,severity:u,content:l}}))}var ntt=10,itt=5*60*1e3,ott=10*1e3,o8=[],_we;function UX(){return _we||(_we=Tc.window.createOutputChannel("GitHub Copilot Chat Conversation","log"))}function Swe(t){let e=new qt;if(!t.get(ke).getConfig(Ae.FeedbackOnChange))return e;let n=t.get(sc).getDiagnosticCollection(),i=new IE(t,UX);return e.add(Tc.workspace.onDidChangeTextDocument(async o=>{if(o.document.uri.scheme==="file"&&o.contentChanges.length&&o.document===Tc.window.activeTextEditor?.document){let s=t.get(ue).getLogger("FeedbackCollection");try{s.info("Document changed, delaying diagnostics request");let a=o.document.version;if(await new Promise(m=>setTimeout(m,ott)),a!==o.document.version){s.info("Skipping diagnostics request because the document has changed");return}let c=Date.now(),u=c-itt;if(o8=o8.filter(m=>m>u),o8.length>=ntt){s.info("Max requests reached, skipping diagnostics request");return}o8.push(c),s.info("Requesting diagnostics");let l=Tc.window.activeTextEditor?.selection,d=await op.getCurrentChange(t,o.document,l.start);if(!d)return s.info("No change found in the current document at the current position."),[];let f=(await i.generateComments([{document:o.document,relativeDocumentPath:xwe.basename(o.document.uri.fsPath),change:d,selection:l}],new Tc.CancellationTokenSource().token)).map(m=>new Tc.Diagnostic(m.range,typeof m.body=="string"?m.body:m.body.value,Tc.DiagnosticSeverity.Information));n.set(o.document.uri,f)}catch(a){s.info("Error generating diagnostics",a?.stack||a?.message||String(a))}}})),e.add(Tc.workspace.onDidCloseTextDocument(o=>{n.set(o.uri,void 0)})),e}var s8=W(_r()),ZR=W(st());var Ewe=W(st());var wE=class extends K{async prepare(e,r,n){if(await this.accessor.get(De).isCopilotIgnored(this.props.documentContext.document.uri))return{k:"ignored"};let i=this.props.nodeToDocument??await h0(this.accessor,this.props.documentContext),o=stt(this.props.endpointInfo,this.props.documentContext,i.range);return{k:"found",nodeToDocument:i,codeExcerptToDocument:o.range,metadata:new us(this.props.documentContext.wholeRange,o)}}render(e,r){if(e.k==="ignored")return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let n=e.codeExcerptToDocument.generatePrompt(!1).join(`
`);return vscpp(Ewe.UserMessage,null,vscpp("meta",{value:e.metadata}),"I have the following code in the selection:",n!==""?vscpp("br",null):"",e.codeExcerptToDocument.generatePrompt(!1).join(`
`))}};async function h0(t,e){let r=t.get(xt),n=Ki(e.selection,e.document),i=r.getTreeSitterAST(e.document);if(i===void 0)return{range:e.wholeRange};let o=Date.now(),s=await i.getNodeToDocument(n),a=Date.now()-o,c=Ki(e.wholeRange,e.document);att(t,n,c,s,e.document.languageId,a);let u=_s(e.document,s.nodeToDocument);return{identifier:s.nodeIdentifier,range:u}}function stt(t,e,r){let n=new np(t.modelMaxPromptTokens*4/3),i=new Bs(n,e.document,e.language,"ed8c6549bwf9"),o=new Bs(new np(0),e.document,e.language,"abpxx6d04wxr"),s=new Bs(new np(0),e.document,e.language,"be15d9bcejpp");for(let a=r.start.line,c=r.end.line;a<=c&&!(a===c&&r.end.character===0||!i.appendLine(a));++a);return i.trim(e.selection),{language:e.language,above:o,range:i,below:s,outlineAbove:"",outlineBelow:""}}function att(t,e,r,n,i,o){t.get(Ee).sendMSFTTelemetryEvent("getNodeToDocument",{languageId:i,typeOfNodeToDocument:n.nodeToDocument.type,nodeToDocumentStart:n.nodeToDocument.startIndex.toString(),nodeToDocumentEnd:n.nodeToDocument.endIndex.toString(),selectionOffsetRangeStart:e.startIndex.toString(),selectionOffsetRangeEnd:e.endIndex.toString(),wholeRangeOffsetRangeStart:r.startIndex.toString(),wholeRangeOffsetRangeEnd:r.endIndex.toString()},{timeSpentMs:o})}var ctt=6e4,utt=1500,db=class t{constructor(){this.id=t.ID;this.description=s8.t("Add documentation comment for this symbol");this.intentDetectionInput={sampleQuestion:"Add jsdoc to this method"};this.locations=[1];this.commandInfo={executeImmediately:!0}}static{this.ID="doc"}async asSlashCommand(e,r){if(r.document.lineCount>utt||r.document.getText().length>ctt)return new JR("Add documentation comment for this symbol");let n=await h0(e,r),i=n.identifier?s8.t("Add documentation comment for '{0}'",n.identifier):s8.t("Add documentation comment for this symbol");return new JR(i,n)}async invoke(e,r,n){let i=r.documentContext;if(!i)throw new Error("Open a file to add documentation.");let o;n instanceof JR?o=n.nodeToDocument:e.get(ue).getLogger("InlineDocIntent#invoke").warn("Unexpected: SlashCommand given to intent invocation is not a DocSlashCommand");let s=await e.get(Ue).getUserRequestEndpoint(r.location,this.id);return new BX(e,s,i,this,o)}},JR=class{constructor(e,r=void 0){this.description=e;this.nodeToDocument=r;this.name=db.ID}},BX=class t{constructor(e,r,n,i,o=void 0){this.accessor=e;this.endpoint=r;this.context=n;this.intent=i;this.nodeToDocument=o;this.location=1;this.createReplyInterpreter=YS.createFactory(async e=>{if(!this.contextInfo||!this.wholeRange)throw new Error("doc intent NEEDS a selection context");let r=ab(this.contextInfo,e,this.context.language);if(!r)return{type:"conversational",content:e};let n=Np(this.context.document.languageId),i=r.code;if(n){let s=Date.now(),a=await this.accessor.get(xt).extractDoc(n,i),c=Date.now()-s;t._sendExtractDocTelemetry(this.accessor.get(Ee),this.context.document.languageId,i.length,a,c),a&&(i=a)}let o=Xf(this.accessor,this.contextInfo,i,1,this.context.fileIndentInfo);return Jg(o,this.wholeRange)});let s=this;this.promptCrafter=new class{constructor(){}async buildPrompt(a,c,u,l,d,p){let f=s.nodeToDocument??await h0(s.accessor,s.context),m=new Je(s.endpoint,qX,{userQuery:a.getLatestTurn()?.request?.message??"",documentContext:s.context,nodeToDocument:f,endpointInfo:c,history:a.turns.at(-2)?.request.message},s.accessor.get(ge),s.accessor),h=await m.render(l,p),g=m.getMeta(us);return DA(g!==void 0,"not undefined"),s.contextInfo=g.contextInfo,s.wholeRange=g.wholeRange,h}}}static _sendExtractDocTelemetry(e,r,n,i,o){e.sendMSFTTelemetryEvent("extractDoc",{languageId:r,couldExtractDoc:i===void 0?"false":"true"},{codeBlockLen:n,timeSpentMs:o})}},qX=class extends K{render(e,r){let n=R5(this.props.documentContext.language.languageId);return vscpp(vscppf,null,vscpp(ZR.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You must follow user's requirements carefully.",vscpp("br",null),"You must follow Microsoft content policies.",vscpp("br",null),"You must avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, you should give a reminder that you are an AI programming assistant.",vscpp("br",null),"Each code block starts with ``` and ",this.props.documentContext.language.lineComment.start," FILEPATH.",vscpp("br",null),"When user asks you to document something, you must answer in the form of a ",n," markdown code block.",vscpp("br",null)),vscpp(wE,{documentContext:this.props.documentContext,nodeToDocument:this.props.nodeToDocument,endpointInfo:this.props.endpointInfo}),this.props.history&&this.props.history.length>0&&vscpp(ZR.UserMessage,null,this.props.history),vscpp(ZR.UserMessage,null,`${this.getQueryPrefix()} ${this.props.userQuery}`.trim()))}getQueryPrefix(){let e=this.props.nodeToDocument?.identifier,r=e!==void 0&&e!=="",n=r?e:"the selection",i;switch(this.props.documentContext.language.languageId){case"typescript":case"typescriptreact":i=r?"a TSDoc comment":"TSDoc comment";break;case"javascript":case"javascriptreact":i=r?"a JSDoc comment":"JSDoc comment";break;case"python":i="docstring";break;default:i="documentation comment"}return`Please add ${i} for ${n}.`}};var Cwe=W(_r());var Twe=W(st());var a8=class extends K{async prepare(){let e=!1,{document:r,selection:n}=this.props;return r?.uri&&n&&(e=this.accessor.get(hi).getDiagnostics(r.uri).filter(a=>!!a.range.intersection(n)).filter(a=>a.severity<=kc.Warning).length>0),{explainingDiagnostic:e}}render(e,r){let n=this.props.chatVariables.find(i=>i.name===In.variableInfo.name);return vscpp(vscppf,null,vscpp(Twe.SystemMessage,{priority:1e3},"You are a world-class coding tutor. Your code explanations perfectly balance high-level concepts and granular details. Your approach ensures that students not only understand how to write code, but also grasp the underlying principles that guide effective programming.",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(di,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Examine the provided code selection and any other context like user question, related errors, project details, class definitions, etc.",vscpp("br",null),"2. If you are unsure about the code, concepts, or the user's question, ask clarifying questions.",vscpp("br",null),"3. If the user provided a specific question or error, answer it based on the selected code and additional provided context. Otherwise focus on explaining the selected code.",vscpp("br",null),"4. Provide suggestions if you see opportunities to improve code readability, performance, etc.",vscpp("br",null),vscpp("br",null),"Focus on being clear, helpful, and thorough without assuming extensive prior knowledge.",vscpp("br",null),"Use developer-friendly terms and analogies in your explanations.",vscpp("br",null),"Identify 'gotchas' or less obvious parts of the code that might trip up someone new.",vscpp("br",null),"Provide clear and relevant examples aligned with any provided context."),this.props.history&&vscpp(vscppf,null,vscpp(Ht,{priority:600,history:this.props.history})),vscpp(_u,{priority:700}),!n&&vscpp(In,{document:this.props.document,range:this.props.selection,priority:900}),vscpp(f0,{document:this.props.document,range:this.props.selection,priority:800}),!e.explainingDiagnostic&&vscpp(m0,{document:this.props.document,selection:this.props.selection,priority:800}),vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var l8="Write an explanation for the active selection as paragraphs of text.",c8=class extends Mo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(Tt).activeTextEditor;return new Je(n,a8,{query:u,history:l,chatVariables:i,document:d?.document,selection:d?.selection},this.accessor.get(ge),this.accessor)}},u8=class{constructor(){this.id="explain";this.locations=[2,1];this.description=Cwe.t("Explain how the code in your active editor works");this.intentDetectionInput={sampleQuestion:"Write an explanation for the code above as paragraphs of text."}}static{this.ID="explain"}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);if(n===1){let o=r.documentContext,s=new class extends c8{async buildPrompt(c,u,l,d,p,f){let m=c.getLatestTurn();return m?.request.message===""&&(m.request={message:l8,type:"user"}),super.buildPrompt(c,u,l,d,p,f)}}(e),a=o&&s6.createFactory();return{intent:this,location:n,endpoint:i,promptCrafter:s,createReplyInterpreter:a}}return{intent:this,location:n,endpoint:i,promptCrafter:new c8(e)}}async asSlashCommand(e,r){return{name:this.id,description:this.description}}};var Pwe=W(_r());var v8=W(st());var p8=W(_r()),h8=W(st());var d8=W(st());var HX=class extends K{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(Ht,{priority:500,history:this.props.history}),vscpp(d8.SystemMessage,{priority:1e3},"You are a coding assistant who help the user answer questions about code in their workspace by providing a list of relevant keywords they can search for to answer the question.",vscpp("br",null),"The user will provide you with potentially relevant information from the workspace. This information may be incomplete.",vscpp("br",null),"Respond in Markdown. First under a `# Question` header, output a rephrased version of the user's question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for.",vscpp("br",null),"Then under a `# Keywords` header, output a short markdown list of up to 8 relevant keywords that the user can search for to answer the question. You may include variations after each keyword.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are asking about their workspace.",vscpp("br",null),"2. If the question contains pronouns such as 'it' or 'that', try to understand what the pronoun refers to by looking at the rest of the question and the conversation history.",vscpp("br",null),"3. If the question contains an ambiguous word such as 'this', try to understand what is refers to by looking at the rest of the question, the user's active selection, and the conversation history.",vscpp("br",null),"4. After a `# Question` header, output a precise version of question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns and words like 'this'.",vscpp("br",null),"5. Then after a `# Keywords` header, output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.",vscpp("br",null),"6. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.",vscpp("br",null),vscpp("br",null),"Examples",vscpp("br",null),vscpp("br",null),"User: Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"Assistant:",vscpp("br",null),"# Question",vscpp("br",null),"Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"# Keywords",vscpp("br",null),"- base64 encoding, base64 encoder, base64 encode",vscpp("br",null),"- base64, base 64",vscpp("br",null),"- encode, encoded, encoder, encoders"),vscpp(In,{priority:600,document:this.props.document,range:this.props.selection}),this.props.fileTree&&vscpp(d8.UserMessage,{priority:700},this.props.fileTree),vscpp(wi,{priority:1e3,chatVariables:this.props.chatVariables,query:this.props.query}))}};async function Iwe(t,e,r,n,i,o){let s=e.turns.length>1?e.turns.slice(0,-1):[],a=t.get(Tt).activeTextEditor;return new Je(r,HX,{chatVariables:n,query:i,history:s,fileTree:o,document:a?.document,selection:a?.selection},t.get(ge),t).render()}var ltt=/^[\*\-]\s*(.+)/m;function RE(t,e){let r=e.match(/#+\s*Question\n(?<question>.+?)#+\s*Keywords\n(?<keywords>.+)/si);if(!r?.groups)return{rephrasedQuestion:t.trim(),keywords:[]};let n=[];for(let i of r.groups.keywords.trim().split(`
`)){let o=i.match(ltt);if(o){let s=o[1].split(/,/g).map(a=>a.trim());s.length&&n.unshift({keyword:s[0],variations:s.slice(1)})}}return{rephrasedQuestion:r.groups.question.trim(),keywords:n}}function wwe(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}async function ptt(t,e=1/0,r){let n=Rwe(0,t,e),i=e-wwe(n);for(;;){let o=!1,s=[];for(let a of n)if(a.type==="text")s.push(a);else if(a.type==="dir"){s.push({type:"text",value:a.value});let c=await a.getChildren();if(r?.isCancellationRequested)return"";let u=Rwe(a.level+1,c,i-1);u.length&&(o=!0,i-=wwe(u)+1,s.push(...u))}if(n=s,!o)break}return n.map(o=>o.value).join(`
`)}function Rwe(t,e,r){let n="	".repeat(t),i=[],o=r;for(let s=0;s<e.length;++s){let a=e[s],c=n+a.name+(a.type===2?"/":"");if(c.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",value:u});break}a.type===2?i.push({type:"dir",level:t,value:c,getChildren:a.getChildren}):i.push({type:"text",value:c}),o-=c.length,s!==e.length-1&&(o-=1)}return i}async function GX(t,e,r,n){let i=t.get(fn),o=t.get(De);async function s(c){let u;try{u=await i.readDirectory(c)}catch(l){return console.error(l),[]}return n.isCancellationRequested?[]:(u.sort((l,d)=>l[0].localeCompare(d[0])),Promise.all(u.map(async l=>{let d=ut.joinPath(c,l[0]);return tb(d)&&!await o.isCopilotIgnored(d)?l:null})).then(l=>l.filter(d=>d!==null).map(d=>d[1]===2?{type:2,name:d[0],getChildren:()=>s(ut.joinPath(c,d[0]))}:{type:1,name:d[0]})))}if(await o.init(),n.isCancellationRequested)return"";let a=await s(e);return n.isCancellationRequested?"":ptt(a,r,n)}async function e2(t,e=500,r){let n=t.get(Ze).getWorkspaceFolders().at(0);if(!n)return;let i=await GX(t,n,e,r);return ftt("I am working in a workspace that has the following structure:","",Ii("",i))}var f8=class extends K{constructor(r,n){super(r,n);this.timeout=15e3;this.logger=n.get(ue).getLogger("<WorkspaceSymbols>")}async prepare(r,n,i){let o=this.accessor.get(Ze),s=await Y0(this.accessor,{valueFor4096:8,maxMultiplier:4});if(i.isCancellationRequested)return[];let a=await this.getSymbols(i);return!a.length||i.isCancellationRequested?[]:Awe(a.map(c=>`- ${c.name} \u2014 ${Og(o,c.location.uri)}`)).slice(0,s)}render(r,n){if(r.length)return vscpp(h8.TextChunk,{priority:this.props.priority},"Here are some potentially relevant symbols from the current workspace:",vscpp("br",null),r.join(`
`))}async getSymbols(r){let n=this.accessor.get(De),i=await this.props.query.resolve(r);if(!i||r.isCancellationRequested)return[];let o=await Promise.all(i.keywords.flatMap(a=>[a.keyword,...a.variations]).map(a=>V0(this.accessor.get(hi).getWorkspaceSymbols(a),this.timeout)));if(r.isCancellationRequested)return[];let s=await Promise.all(o.flat().map(async a=>(a?await n.isCopilotIgnored(a.location.uri):!1)?null:a));return Xt(s).filter(Boolean)}};fe([gi(r=>r.logger)],f8.prototype,"prepare",1);var m8=class extends K{constructor(r,n){super(r,n);this.timeout=15e3;this.logger=n.get(ue).getLogger("<WorkspaceFiles>")}async prepare(r,n,i){let o=this.accessor.get(Ze),s=await Y0(this.accessor,{valueFor4096:8,maxMultiplier:4});if(i.isCancellationRequested)return[];let a=await this.findFiles(s,i);return!a.length||i.isCancellationRequested?[]:Awe(a.map(c=>`- ${Og(o,c)}`)).slice(0,s)}render(r,n){if(r.length)return vscpp(h8.TextChunk,{priority:this.props.priority},"Here are some potentially relevant file names from the workspace:",vscpp("br",null),r.join(`
`))}async findFiles(r,n){let i=this.accessor.get(Ta),o=await this.props.query.resolve(n);if(!o||n.isCancellationRequested)return[];let s=await V0(i.findFilesWithDefaultExcludes(`{${o.keywords.flatMap(a=>[a.keyword,...a.variations]).map(a=>`**/*${a}*`).join(",")}}`,r,n),this.timeout);return s?s.sort((a,c)=>a.toString().localeCompare(c.toString())):[]}};fe([gi(r=>r.logger)],m8.prototype,"prepare",1);var pb=class extends K{constructor(e,r){super(e,r),this.logger=r.get(ue).getLogger("<WorkspaceChunks>"),this.telemetryService=r.get(Ee)}async prepare(e,r,n=Vr.None){let i=this.accessor.get($g),o=await Y0(this.accessor,{valueFor4096:4,maxMultiplier:4});if(n.isCancellationRequested)return;let s=(await i.searchFileChunks(e.endpoint,this.props.query,this.props.maxResults??o,{include:this.props.include},n,u=>r?.report(new Io(u)))).slice(0,o);if(n.isCancellationRequested||!s.length)return;let a=new kn;for(let u of s){let l=a.get(u.file)??[];u.isFullFile?l=[u]:l.some(d=>d.isFullFile||d.range.containsRange(u.range))||(l=[...l.filter(d=>!u.range.containsRange(d.range)),u]),a.set(u.file,l)}let c=Array.from(a.values()).flatMap(u=>u.sort((l,d)=>ht.compareRangesUsingStarts(l.range,d.range)).map(l=>new xo.PromptReference(l.isFullFile?l.file:new Ea(l.file,Fm(l.range)))));return{chunks:s,references:c}}render(e,r){if(!e)return;let n=this.accessor.get(Ze);return vscpp(vscppf,null,vscpp("references",{value:e.references}),e.chunks.map((i,o)=>{let s=typeof this.props.priority<"u"?this.props.priority+(1-(o+1)/e.chunks.length):void 0;return{chunk:i,priority:s}}).reverse().map(({chunk:i,priority:o})=>{let s=Og(n,i.file);return vscpp(h8.TextChunk,{priority:o},"Here is a potentially relevant code excerpt ",i.isFullFile?`starting at line ${i.range.startLineNumber} `:"","in `",s,"`:",vscpp("br",null),Ii(A5(i.file),i.text))}))}};fe([gi(e=>e.logger),Z0(function(e,r){this.telemetryService.sendMSFTTelemetryEvent("workspaceContext.perf.prepareWorkspaceChunks",{status:r},{execTime:e})})],pb.prototype,"prepare",1);function Awe(t){return[...new Set(t)]}function ftt(...t){return t.join(`
`)}var jX=class extends K{async prepare(e,r,n){let i=this.accessor.get(Ze).getWorkspaceFolders().at(0);return i?GX(this.accessor,i,500,n):void 0}render(e,r){if(e)return vscpp(vscppf,null,"I am working in a workspace that has the following structure:",vscpp("br",null),vscpp("br",null),Ii("",e))}},fb=class extends K{constructor(e,r){super(e,r),this.telemetryService=r.get(Ee)}async prepare(e,r,n){r?.report(new Io(p8.t("Deciding which workspace information to collect")));let i=this.accessor.get(Ee),o=this.props.query;if(!o)return;let s=(async()=>{let a=this.accessor.get(Jt),c=this.accessor.get(ue).getLogger("workspaceResolver");c.debug("Determining workspace structure...");let u=await e2(this.accessor,1e3,n);if(n.isCancellationRequested)return;c.debug("Asking the model to update the user question and provide queries...");let{messages:l}=await Iwe(this.accessor,this.props.conversation,e.endpoint,this.props.chatVariables,o,u);if(n.isCancellationRequested)return;let d=this.accessor.get(ge).tokenLength(o),f=await a.fetchOne(l,async g=>{},n,2,e.endpoint,{agent:Dp},{temperature:0,top_p:1,stop:["dontStopBelieving"],max_tokens:d+200},{messageSource:"workspaceIntent"});if(n.isCancellationRequested)return;let m;if(f.type!=="success")if(i.sendMSFTTelemetryEvent("workspaceResolver.error",{type:f.type,reason:f.reason,requestId:f.requestId}),f.type==="length")m=f.truncatedValue;else throw new Error(p8.t("Encountered an error while deciding what workspace information to collect: ({0}) {1}",f.type,f.reason));else m=f.value;let h=RE(o,m);return i.sendMSFTTelemetryEvent("workspaceResolver.success",{type:f.type,requestId:f.requestId},{totalKeywordCount:h.keywords.flatMap(g=>[g.keyword,g.variations]).length}),c.debug("Running all tools..."),r?.report(new Io(p8.t("Collecting workspace information"))),{rephrasedQuery:h.rephrasedQuestion,keywords:h.keywords}})();return{rawQuery:o,resolve:()=>s,maySkipResolve:()=>!/\b(it|that|this)\b/i.test(o)}}render(e,r){if(!e)return;let n=this.props.include??{workspaceStructure:!0,workspaceSymbols:!0,workspaceFiles:!0,workspaceChunks:!0};return vscpp(vscppf,null,n.workspaceStructure&&vscpp(jX,{...this.props}),n.workspaceSymbols&&vscpp(f8,{priority:this.props.priority,query:e}),n.workspaceFiles&&vscpp(m8,{priority:this.props.priority,query:e}),n.workspaceChunks&&vscpp(pb,{priority:this.props.priority,query:e}))}};fe([Z0(function(e,r){this.telemetryService.sendMSFTTelemetryEvent("workspaceContext.perf.prepare",{status:r},{execTime:e})})],fb.prototype,"prepare",1);var g8=class extends K{render(e,r){return vscpp(vscppf,null,vscpp(v8.SystemMessage,{priority:1e3},"You are a software engineer with expert knowledge of the codebase the user has open in their workspace.",vscpp("br",null),vscpp("br",null),vscpp(qr,null),vscpp(Br,null),vscpp(di,null),vscpp(Tr,null),"# Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the provided relevant workspace information (code excerpts, file names, and symbols) to understand the user's workspace.",vscpp("br",null),"2. Consider how to answer the user's prompt based on the provided information and your specialized coding knowledge. Always assume that the user is asking about the code in their workspace instead of asking a general programming question. Prefer using variables, functions, types, and classes from the workspace over those from the standard library.",vscpp("br",null),"3. Generate a response that clearly and accurately answers the user's question. In your response, add fully qualified links for referenced symbols (example: [`namespace.VariableName`](path/to/file.ts)) and links for files (example: [path/to/file](path/to/file.ts)) so that the user can open them. If you do not have enough information to answer the question, respond with \"I'm sorry, I can't answer that question with what I currently know about your workspace\".",vscpp("br",null),vscpp("br",null),"DO NOT mention that you cannot read files in the workspace.",vscpp("br",null),"DO NOT ask the user to provide additional information about files in the workspace.",vscpp("br",null),"Remember that you MUST add links for all referenced symbols from the workspace and fully qualify the symbol name in the link, for example: [`namespace.functionName`](path/to/util.ts).",vscpp("br",null),"Remember that you MUST add links for all workspace files, for example: [path/to/file.js](path/to/file.js)",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),"Question:",vscpp("br",null),"What file implements base64 encoding?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Base64 encoding is implemented in [src/base64.ts](src/base64.ts) as [`encode`](src/base64.ts) function.",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How can I join strings with newlines?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the [`joinLines`](src/utils/string.ts) function from [src/utils/string.ts](src/utils/string.ts) to join multiple strings with newlines.",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How do I build this project?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"To build this TypeScript project, run the `build` script in the [package.json](package.json) file:",vscpp("br",null),vscpp("br",null),"```sh",vscpp("br",null),"npm run build",vscpp("br",null),"```",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How do I read a file?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"To read a file, you can use a [`FileReader`](src/fs/fileReader.ts) class from [src/fs/fileReader.ts](src/fs/fileReader.ts).",vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(Ht,{priority:400,history:this.props.history})),vscpp(In,{document:this.props.document,range:this.props.selection,priority:600}),vscpp(v8.UserMessage,null,vscpp(fb,{priority:800,...this.props})),vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var t2="workspace",zX=class extends Mo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(Tt).activeTextEditor;return new Je(n,g8,{chatVariables:i,conversation:r,query:u,history:l,document:d?.document,selection:d?.selection},this.accessor.get(ge),this.accessor)}},y8=class t{constructor(){this.id=t.ID;this.description=Pwe.t("Ask a question about the files in your current workspace");this.intentDetectionInput={sampleQuestion:"How do I build this project?"};this.locations=[2];this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:!0}}static{this.ID=t2}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return{intent:this,location:n,endpoint:i,promptCrafter:new zX(e)}}};var gn=W(require("vscode"));var mb=class extends gn.CodeAction{constructor(){super(...arguments);this.isAI=!0}},hb=class t{constructor(e){this.accessor=e}static{this.providedCodeActionKinds=[gn.CodeActionKind.QuickFix]}static getSevereDiagnostics(e){let r=e.filter(n=>n.severity<=gn.DiagnosticSeverity.Warning);return r.length===0?[]:r}static getDiagnosticsAsText(e){return e.map(r=>r.message).join(", ")}async provideCodeActions(e,r,n){if(!gn.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||await this.accessor.get(De).isCopilotIgnored(e.uri))return;let o=[];if(!gn.window.activeTextEditor)return o;let a=t.getSevereDiagnostics(n.diagnostics);if(a.length===0)return o;let c=a.map(m=>m.range).reduce((m,h)=>m.union(h)),u=new gn.Selection(c.start,c.end),l=t.getDiagnosticsAsText(a),d=new mb(gn.l10n.t("Fix using Copilot"),gn.CodeActionKind.QuickFix);d.diagnostics=a,d.command={title:d.title,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${l}`,position:c.start,initialSelection:u,initialRange:c}]};let p=new mb(gn.l10n.t("Explain using Copilot"),gn.CodeActionKind.QuickFix);p.diagnostics=a;let f=`/explain ${l}`;return this.accessor.get(ke).getConfig(Ae.ExplainIntentRefer)&&(f=`@${t2} ${f}`),p.command={title:p.title,command:"github.copilot.interactiveEditor.explain",arguments:[f]},o.push(d,p),o}},r2=class{static{this.providedCodeActionKinds=[gn.CodeActionKind.RefactorRewrite]}constructor(e){this.logger=e.get(ue).getLogger("RefactorsProvider"),this.telemetryService=e.get(Ee),this.parserService=e.get(xt),this.ignoreService=e.get(De)}async provideCodeActions(e,r,n){if(!gn.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||await this.ignoreService.isCopilotIgnored(e.uri))return;let o=this.provideGenerateUsingCopilotCodeAction(e,r),s=await this.provideDocumentUsingCopilotCodeAction(e,r),a=await this.provideTestUsingCopilotCodeAction(e,r);return Xt([s,o,a])}provideGenerateUsingCopilotCodeAction(e,r){let n;if(r.isEmpty){let o=e.lineAt(r.start.line).text;r.end.character===o.length&&/^\s*$/g.test(o)&&(n=gn.l10n.t("Generate using Copilot"))}else{let o=e.getText(r);/^\s*$/g.test(o)||(n=gn.l10n.t("Modify using Copilot"))}if(n===void 0)return;let i=new mb(n,gn.CodeActionKind.RefactorRewrite);return i.command={title:i.title,command:"vscode.editorChat.start",arguments:[{position:r.start,initialSelection:new gn.Selection(r.start,r.end),initialRange:r}]},i}async provideDocumentUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s,a=this.parserService.getTreeSitterAST(e);if(a)try{s=await a.getDocumentableNodeIfOnIdentifier(o)}catch(d){this.logger.exception(d,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed"),this.telemetryService.sendGHTelemetryException(d,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed")}if(s===void 0)return;let c=gn.l10n.t("Document using Copilot: {0}",s.identifier),u=new mb(c,gn.CodeActionKind.RefactorRewrite),l=s.nodeRange===void 0?void 0:new Xe(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return u.command={title:c,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/doc",initialRange:l}]},u}async provideTestUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s,a=this.parserService.getTreeSitterAST(e);if(a)try{s=await a.getTestableNode(o)}catch(d){this.logger.exception(d,"RefactorsProvider: getTestableNode failed"),this.telemetryService.sendGHTelemetryException(d,"RefactorsProvider: getTestableNode failed")}if(s===void 0)return;let c=gn.l10n.t("Test using Copilot: {0}",s.identifier),u=new mb(c,gn.CodeActionKind.RefactorRewrite),l=s.nodeRange===void 0?void 0:new Xe(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return u.command={title:c,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/tests",initialRange:l}]},u}};var kwe=require("util"),g0=W(require("vscode"));var mtt="application/vnd.code.notebook.error",b8=class{constructor(e){this.accessor=e}async provideCellStatusBarItems(e,r){if(g0.workspace.getConfiguration("notebook").get("cellFailureDiagnostics"))return[];if(e.kind===g0.NotebookCellKind.Markup){let s=g0.workspace.getConfiguration("notebook.experimental").get("cellChat");if(!s)return[];let a=e.document.getText().trim();if(!s||a.length===0)return[];let c="Generate code from markdown content",u=a;return[{text:"$(sparkle)",alignment:g0.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:c,command:{title:c,command:"notebook.cell.chat.start",arguments:[{index:e.index+1,input:u,autoSend:!0}]}}]}let i=e.outputs.flatMap(s=>s.items).find(s=>s.mime===mtt);if(!i)return[];let o;try{let s=new kwe.TextDecoder;if(o=JSON.parse(s.decode(i.data)),!o.name&&!o.message)return[];let a="Fix using Copilot",c=[o.name,o.message].filter(Boolean).join(": ").replace(/\s*\(\S+,\s*line\s*\d+\)/,"");return[{text:"$(sparkle)",alignment:g0.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:a,command:{title:a,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${c}`}]}}]}catch(s){this.accessor.get(ue).defaultLogger.error(`Failed to parse error output ${s}`)}return[]}};function Dwe(t){let e=new qt,r=async(h,g)=>{let v=`@${t2} /explain `,y,b,x=!1;if(typeof h=="string"&&h)v=h;else{let S=t.get(Tt),T=In.getCurrentSelection(S,!0);if(T){let M=kt.languages.getDiagnostics(T.activeDocument.uri),j=M.filter(J=>!!J.range.intersection(T.range));hb.getSevereDiagnostics(j).length&&(v+=hb.getDiagnosticsAsText(M),x=!0)}let L=In.getCurrentSelection(S);if(!x&&L&&(v+=l8,y=TE.formatSelection({languageId:L.languageId,selectedText:L.selectedText}),b=L.activeDocument.uri),!x&&T&&g)try{let M=await m0.getSelectedScope(t,{document:T.activeDocument,selection:T.range});if(M&&M.symbolAtCursorState&&M.symbolAtCursorState.codeAtCursor){v+=l8;let j=M.symbolAtCursorState.document.languageId??"";y=TE.formatSelection({languageId:j,selectedText:M.symbolAtCursorState.codeAtCursor}),b=T.activeDocument.uri}}catch(M){if(M instanceof ys)return}}b&&y&&!await t.get(De).isCopilotIgnored(b)&&(v+=y),kt.commands.executeCommand("workbench.action.chat.open",{query:v})},n=async h=>{let g=kt.window.activeTextEditor;h==="selection"&&!g||await kt.window.withProgress({location:kt.ProgressLocation.Notification,title:"Reviewing your code...",cancellable:!0},async(v,y)=>{let b=t.get(sc),x=new IE(t,UX);b.removeReviewComments(b.getReviewComments());let S=[];if(h!=="selection"){let T=await op.getCurrentChanges(t,h);(await Promise.all(T.map(async M=>({document:await kt.workspace.openTextDocument(M.uri),relativeDocumentPath:_8.default.relative(M.repository.rootUri.fsPath,M.uri.fsPath),change:M})))).map(M=>S.push(M))}else S.push({editor:g,document:g.document,relativeDocumentPath:_8.default.basename(g.document.uri.fsPath),selection:g.selection});await x.generateComments(S,y,{report:T=>b.addReviewComments(T)})})},i=async h=>{let g=t.get(sc),v=g.findReviewComment(h);if(!v)return;let y=v.body instanceof kt.MarkdownString?v.body.value:v.body;g.collapseReviewComment(v),await kt.commands.executeCommand("vscode.editorChat.start",{initialRange:h.range,message:y,autoSend:!0})},o=async h=>{let v=t.get(sc).findReviewComment(h);if(!v)return;let y=v.body instanceof kt.MarkdownString?v.body.value:v.body;await kt.commands.executeCommand("workbench.action.chat.open",{query:"Explain your comment.",isPartialQuery:!0,previousRequests:[{request:"Review my code.",response:`In file \`${_8.default.basename(v.uri.fsPath)}\` at line ${v.range.start.line+1}:

${y}`}]})},s=async h=>{let g=t.get(sc),v=g.findReviewComment(h);v&&g.removeReviewComments([v])},a=async()=>{let h=t.get(sc);h.removeReviewComments(h.getReviewComments())},c=t.get(xr).extensionMode;typeof c=="number"&&c!==kt.ExtensionMode.Test&&t.get(sc).updateContextValues();let u=h=>kt.commands.executeCommand("editor.action.previousCommentThreadAction",h),l=h=>kt.commands.executeCommand("editor.action.nextCommentThreadAction",h),d=()=>kt.commands.executeCommand("vscode.editorChat.start",{message:"/generate "}),p=()=>kt.commands.executeCommand("vscode.editorChat.start",{message:`/${db.ID} `,autoSend:!0,initialRange:kt.window.activeTextEditor?.selection}),f=()=>kt.commands.executeCommand("vscode.editorChat.start",{message:"/tests ",autoSend:!0,initialRange:kt.window.activeTextEditor?.selection}),m=()=>{let h=kt.window.activeTextEditor;if(!h)return;let g=h.selection,v=kt.languages.getDiagnostics(h.document.uri).filter(y=>!!g.intersection(y.range)).map(y=>y.message).join(", ");return kt.commands.executeCommand("vscode.editorChat.start",{message:`/fix ${v}`,autoSend:!0,initialRange:kt.window.activeTextEditor?.selection})};return e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.explain",r)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.explain.palette",()=>r(void 0,!0))),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review",()=>n("selection"))),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.palette",()=>n("selection"))),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.stagedChanges",()=>n("index"))),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.changes",()=>n("workingTree"))),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.apply",i)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.continueInChat",o)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.discard",s)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.discardAll",a)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.previous",u)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.review.next",l)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.generate",d)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.generateDocs",p)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.generateTests",f)),e.add(kt.commands.registerCommand("github.copilot.interactiveEditor.fix",m)),e.add(kt.languages.registerCodeActionsProvider("*",new hb(t),{providedCodeActionKinds:hb.providedCodeActionKinds})),e.add(kt.languages.registerCodeActionsProvider("*",new r2(t),{providedCodeActionKinds:r2.providedCodeActionKinds})),e.add(kt.notebooks.registerNotebookCellStatusBarItemProvider("jupyter-notebook",new b8(t))),e}var Iu=W(st());var x8=class extends K{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,vscpp(Iu.SystemMessage,{priority:1e3},"You are an AI that creates a detailed content outline for a Jupyter notebook on a given topic.",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(di,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"DO NOT include Introduction or Conclusion section in the outline!",vscpp("br",null),"Focus only on sections that will need code!",vscpp("br",null),["","Generate the outline as two parts:","- First part is markdown bullet list of section titles","- Second part is the JSON data that will validate against this JSON schema, wrap the response in code block. We assume that a code block begins with ```[optionally the language] and ends with ```","","The JSON schema is:","{",'  "$schema": "http://json-schema.org/draft-07/schema#",','  "type": "object",','  "properties": {','	"description": {','	  "type": "string"',"	},",'	"sections": {','	  "type": "array",','	  "items": {','		"type": "object",','		"properties": {','		  "title": {','			"type": "string"',"		  },",'		  "content": {','			"type": "string"',"		  }","		},",'		"required": ["title", "content"]',"	  }","	}","  },",'  "required": ["sections"]',"}"].join(`
`),["","Examples:","","Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.","","## Valid notebook creation question","","user: Creating Random Arrays with Numpy","","assistant: Here's an outline for a Jupyter notebook that creates Random Arrays with Numpy:","","* **Import Required Libraries**","* **Create Random Arrays**","* **Seed the Random Number Generator**","* **Generate Random Integers**","","```json","{",'  "description": "A Jupyter notebook that creates Random Arrays with Numpy.",','  "sections": [',"    {",'      "title": "Import Required Libraries",','      "content": "Import the necessary libraries, including NumPy."',"    },","    {",'      "title": "Create Random Arrays",','      "content": "Use NumPy to create random arrays of various shapes and sizes, including 1D, 2D, and 3D arrays."',"    },","    {",'      "title": "Seed the Random Number Generator",','      "content": "Use the seed() function to seed the random number generator for reproducibility."',"    },","	{",'	  "title": "Generate Random Integers",','	  "content": "Use the randint() function to generate random integers within a specified range."',"	}","  ]","}","```"].join(`
`))),this.props.chatVariables&&Object.keys(this.props.chatVariables).length>0?vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:`Create notebook: ${this.props.query}`}):vscpp(Iu.UserMessage,{priority:900},"Create notebook: ",this.props.query))}},S8=class extends K{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,this.props.history&&vscpp(VX,{messages:this.props.history.chatMessages??[]}),vscpp(Iu.SystemMessage,{priority:1e3},"You are an AI that writes Python code for a single section of a Jupyter notebook.",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(Tr,null),"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If the Jupyter Notebook already contains variables, you should respect the name and value of the variables, and use them in your code when necessary.",vscpp("br",null),"Your output should be valid Python code with inline comments.",vscpp("br",null),"You should return the code directly without any explantion.",vscpp("br",null),"You should not print message to explain the code or purpose of the code.",vscpp("br",null),"You should return the code directly, without wrapping it inside \\`\\`\\`.",vscpp("br",null),"Please make sure that the new code is syntactically valid Python code. It can be validated by running it in a Python interpreter.",vscpp("br",null),"For example, it should pass the validation through builtin module codeop \\`codeop.compile_command(statement)\\`.",vscpp("br",null)),vscpp(Iu.UserMessage,{priority:900},"Overall topic of the notebook: ",this.props.description,vscpp("br",null),"Title of the notebook section: ",this.props.section.title,vscpp("br",null),"Description of the notebok section: ",this.props.section.content,vscpp("br",null),"Given this information, write all the code for this section and this section only.",vscpp("br",null),"The request to generate the outline of the notebook is already completed.",vscpp("br",null),"Here is the request details for the outline generation:",vscpp("br",null),vscpp("br",null),"Code in the notebook so far:",vscpp("br",null),vscpp("br",null),this.props.existingCode,vscpp("br",null),vscpp("br",null),"Please make sure the new code you generate works fine with the code above.",vscpp("br",null))))}},VX=class extends K{render(e,r){let n=[];for(let i of this.props.messages)switch(i.role){case"user":n.push(vscpp(Iu.UserMessage,{priority:800},i.content));break;case"assistant":n.push(vscpp(Iu.AssistantMessage,{priority:800},i.content));break;case"system":n.push(vscpp(Iu.SystemMessage,{priority:100},i.content));break;default:break}return vscpp(vscppf,null,n)}},E8=class extends K{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,vscpp(Iu.SystemMessage,{priority:1e3},"You are an AI that improves Python code with respect to readability and performance for a single section of a Jupyter notebook.",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(Tr,null),"You MUST return Python code as your answer.",vscpp("br",null),"DO NOT explain in inline comments for your the improvements.",vscpp("br",null),"You should not print messages to explain the code or purpose of the code.",vscpp("br",null),"Make sure the new code you generate works fine with the code above.",vscpp("br",null),"Make sure if a module is already imported in the code above, it can be used in the new code directly without importing it again. For the same reason, if a variable is defined above, it can be used in new code as well. ",vscpp("br",null),"Make sure to return the code only - don't give an explanation of the improvements.",vscpp("br",null)),vscpp(Iu.UserMessage,{priority:900},"Overall topic of the notebook: ",this.props.description,vscpp("br",null),"Title of the notebook section: ",this.props.section.title,vscpp("br",null),"Description of the notebook section: ",this.props.section.content,vscpp("br",null),"Code in the notebook so far:",vscpp("br",null),vscpp("br",null),this.props.existingCode,vscpp("br",null),vscpp("br",null),"Given this information, suggest improvements for the following code:",vscpp("br",null),vscpp("br",null),this.props.code,vscpp("br",null),vscpp("br",null))))}};var T8=class{constructor(){this.stagedTextToApply="";this.reporting=!0;this._appliedText="";this._resolvedContentDeferredPromise=new Rp;this._incodeblock=!1}async processResponse(e,r,n,i,o){for await(let{delta:s}of n){if(o.isCancellationRequested)return this._appliedText;this.applyDelta(s.text,e,i)}return this._appliedText}applyDeltaToTurn(e,r){r.response||(r.response={message:e,type:"model"}),this._appliedText+=e,r.response.message+=e}applyDeltaToProgress(e,r){r.markdown(e)}applyDelta(e,r,n){if(!this.reporting){this.applyDeltaToTurn(e,r);return}if(e=this.stagedTextToApply+e,this._incodeblock){let o=e.indexOf("```");if(o===-1){this.stagedTextToApply=e,this.applyDeltaToProgress("",n),this.applyDeltaToTurn("",r),n.progress("Thinking ...");return}else{this._incodeblock=!1,e=e.substring(0,o)+"```";try{this.applyDeltaToTurn(e,r)}catch{}finally{this.reporting=!1,this.stagedTextToApply="",this._resolvedContentDeferredPromise.complete(new pn(""))}return}}let i=e.indexOf("```");if(i!==-1){this._incodeblock=!0;let o=e.indexOf("```",i+3);if(o!==-1){this._incodeblock=!1,this.applyDeltaToProgress(e.substring(0,i),n),this.applyDeltaToProgress(e.substring(o+3),n),this.applyDeltaToTurn(e,r),this.reporting=!1,this.stagedTextToApply="";return}else{let s=e.substring(0,i);this.applyDeltaToProgress(s,n),this.applyDeltaToTurn(e,r),this.stagedTextToApply="",n.progress("Thinking ..."),this._resolvedContentDeferredPromise.p.then(a=>n.push(a));return}}this.applyDeltaToProgress(e,n),this.applyDeltaToTurn(e,r),this.stagedTextToApply=""}};async function Nwe(t,e,r,n,i,o,s,a){let c={messageSource:"slash.newNotebook"},{messages:u}=await ca(t,e,S8,{history:n,description:i,section:o,existingCode:s},t.get(ge)),d=await t.get(Jt).fetchOne(u,void 0,a,2,e,void 0,{temperature:r.temperature,top_p:r.topP},c);if(d.type!=="success")return;let p=Ya(d.value);return p.length>0?p[0].code:d.value}async function Lwe(t,e,r,n,i,o,s,a){let c={messageSource:"slash.newNotebook"},{messages:u}=await ca(t,e,E8,{description:n,section:i,existingCode:o,code:s},t.get(ge)),d=await t.get(Jt).fetchOne(u,void 0,a,2,e,void 0,{temperature:r.temperature,top_p:r.topP},c);if(d.type==="success")return d.value}var WX=W(_r());var n2=W(st());var Owe=W(st());var C8=class extends K{static{this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0}}async prepare(){return this.accessor.get(ao).terminalLastCommand}render(e,r){if(!e)return;let n=[];e.commandLine&&(n.push("The following is the last command run in the terminal:"),n.push(e.commandLine)),e.cwd&&(n.push("It was run in the directory:"),n.push(typeof e.cwd=="object"?e.cwd.toString():e.cwd)),e.output&&(n.push("It has the following output:"),n.push(e.output));let i=n.join(`
`);return vscpp(vscppf,null,vscpp(Owe.UserMessage,{priority:this.props.priority},"The active terminal's last run command:",vscpp("br",null),i))}};var $X=W(st());var I8=class extends K{static{this.variableInfo={name:"terminalSelection",description:"The active terminal's selection",defaultEnablement:!0}}async prepare(){return this.accessor.get(ao).terminalSelection}render(e,r){return e.trim().length===0?vscpp(vscppf,null,vscpp($X.UserMessage,{priority:this.props.priority},"The active terminal has no selection.")):vscpp(vscppf,null,vscpp($X.UserMessage,{priority:this.props.priority},"The active terminal's selection:",vscpp("br",null),e))}};var w8=class extends K{render(e){return vscpp(vscppf,null,vscpp(n2.SystemMessage,{priority:1e3},"You are a programmer who specializes in using the command line. Your task is to help the Developer by giving a detailed answer to their query.",vscpp("br",null),vscpp(qr,null),vscpp(Br,null),vscpp(di,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),`Generate a response that clearly and accurately answers the user's question. In your response, follow the following:
- Provide any command suggestions using the active shell and operating system.
- Say "I'm not quite sure how to do that." when you aren't confident in your explanation`,vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(Ht,{priority:600,history:this.props.history})),vscpp(n2.UserMessage,{priority:800},"The active terminal's shell type is:",vscpp("br",null),this.props.shellType),vscpp(n2.UserMessage,{priority:800},"The active operating system is:",vscpp("br",null),this.props.osName),vscpp(I8,{priority:800}),vscpp(C8,{priority:800}),vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var gb=class{constructor(){this.id="terminalExplain";this.locations=[2];this.description=WX.t("Explain what just happened in the terminal");this.intentDetectionInput={sampleQuestion:"What did the last command do?"};this.commandInfo={allowsEmptyArgs:!0,defaultEnablement:!0,sampleRequest:WX.t("What did the last command do?")}}static{this.intentName="explain"}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return new KX(e,this,i,n)}},KX=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;let o=this,s=e.get(St).OS,a=e.get(ao).terminalShellType;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=u.turns.length>1?u.turns.slice(0,-1):[];return await new Je(l,w8,{query:g,chatVariables:d,history:v,osName:s,shellType:a},e.get(ge),o.accessor).render(p,m)}}}};var YX=W(_r()),Hs=W(require("vscode"));function Mwe(t){let e=new qt,r=t.get(gl);return r.setEnablement(t.get(Mt)),htt(e,t.get(Ee)),gtt(r,e),e}function htt(t,e){t.add(Hs.commands.registerCommand("github.copilot.tests.fixTestFailure",async r=>{if(!r.test.uri)return;e.sendMSFTTelemetryEvent("intent.fixTestFailure.actioned",{source:r.source??"testResultsPanel"});let n=await Hs.workspace.openTextDocument(r.test.uri);await Hs.window.showTextDocument(n,{preserveFocus:!1,preview:!0,selection:r.test.range?new Hs.Range(r.test.range.start,r.test.range.start):void 0}),await Hs.commands.executeCommand("vscode.editorChat.start",{message:"/fixTestFailure",autoSend:!0})}))}function gtt(t,e){e.add(Hs.languages.registerCodeActionsProvider("*",{provideCodeActions(r,n,i,o){if(!Hs.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||!t.isEnabled.get())return;let a=t.getFailureAtPosition(r.uri,n.start);if(!a)return;let c=new Hs.CodeAction(YX.t("Fix test failure"),Hs.CodeActionKind.QuickFix);return c.isAI=!0,c.command={title:YX.t("Fix test failure"),command:"github.copilot.tests.fixTestFailure",arguments:[{message:a.task.messages[0],test:a.snapshot,source:"sparkles"}]},[c]}}))}var Un=W(require("vscode"));function R8(t,e){if(!e.length)return;let r;for(let n of t)if(n.children){let i=n.name===e[0]?{symbol:n,matchCount:1}:void 0;if(i){let a=R8(n.children,e.slice(1));a&&(i={symbol:a.symbol,matchCount:i.matchCount+a.matchCount})}let o=R8(n.children,e),s;i&&o?s=i.matchCount>=o.matchCount?i:o:s=i??o,s&&(!r||s.matchCount>r?.matchCount)&&(r=s)}else n.name===e[0]&&(r??={symbol:n,matchCount:1});return r}function Fwe(t,e){return(R8(t,[e])??R8(t,vtt(e)))?.symbol}function vtt(t){return Array.from(t.matchAll(/[#\w$][\w\d$]*/g),e=>e[0])}var A8="_github.copilot.openSymbolFromReferences";function Uwe(t){return gA(Un.commands.registerCommand(uE,async e=>{t.sendMSFTTelemetryEvent("panel.action.filelink");let r=Un.workspace.workspaceFolders?.[0].uri;if(!r)return;let n=typeof e=="string"?Un.Uri.joinPath(r,e):Un.Uri.from(e);if(await i(n))await Un.commands.executeCommand("revealInExplorer",n);else return Un.commands.executeCommand("vscode.open",n);async function i(o){if(o.path.endsWith("/"))return!0;try{return(await Un.workspace.fs.stat(o)).type===Un.FileType.Directory}catch{return!1}}}),Un.commands.registerCommand(N6,async(e,r,n)=>{if(n??=Un.workspace.workspaceFolders?.[0].uri,!n)return;let i=Un.Uri.joinPath(n,e),o=await Un.commands.executeCommand("vscode.executeDocumentSymbolProvider",i);if(o){let s=Fwe(o,r);if(t.sendMSFTTelemetryEvent("panel.action.symbollink",{},{hadMatch:s?1:0}),s){let a=s instanceof Un.SymbolInformation?s.location.range:s.selectionRange;return Un.commands.executeCommand("vscode.open",i,{selection:new Un.Range(a.start,a.start)})}}return Un.commands.executeCommand("vscode.open",i)}),Un.commands.registerCommand(A8,(e,r)=>(t.sendMSFTTelemetryEvent("panel.action.openSymbolFromReferencesLink"),Un.commands.executeCommand("vscode.open",e,{selection:new Un.Range(r,r)}))))}var Cc=W(require("vscode"));var Bwe=/(?<!\[)`([^`]+)`(?!\])/g,AE=class{constructor(e,r){this.references=e;this.parserService=r;this.symbolCache=new Map}async linkify(e,r){if(!this.references.length)return;let n=new Map;for(let[a,c]of e.matchAll(Bwe)){if(n.has(c))continue;let u=this.symbolCache.get(c);if(u)n.set(c,u);else{let l=this.tryResolve(c,r);this.symbolCache.set(c,l),n.set(c,l)}}let i=new Map(await Promise.all(Array.from(n.entries(),async([a,c])=>[a,await c]))),o=!1,s=e.replace(Bwe,(a,c)=>{let u=i.get(c);if(u){o=!0;let l=(Cc.workspace.workspaceFolders?.length?dne(Cc.workspace.workspaceFolders[0].uri,u.uri):void 0)??u.uri.fsPath,d=L6(A8,[u.uri,u.range.start]);return`[${a}](${d} "${l?.replaceAll(/"/g,'\\"')}")`}return a});if(o)return{text:s,trustedCommands:[A8]}}async tryResolve(e,r){let n=await this.findWordInReferences(e,r);if(!r?.isCancellationRequested){if(!n.length){let i=e.split(/([#\w$][\w\d$]*)/g).map(s=>s.trim()).filter(s=>s.length),o;for(let s of i){if(!/[#\w$][\w\d$]*/.test(s))break;o=s}if(o&&o!==e&&(n=await this.findWordInReferences(o,r),r?.isCancellationRequested))return}for(let i of n){let o=await this.executeDefinitionProvider(i.uri,i.range.start);if(o)return o;if(r?.isCancellationRequested)return}}}async executeDefinitionProvider(e,r){let n=(await Cc.commands.executeCommand("vscode.executeDefinitionProvider",e,r)).at(0);return n&&btt(n)}async findWordInReferences(e,r){return Xt(await Promise.all(this.references.map(n=>{if(j0(n.anchor))return this.findWordInDoc(e,n.anchor,new Cc.Range(0,0,Number.MAX_SAFE_INTEGER,0),r);if("range"in n.anchor)return this.findWordInDoc(e,n.anchor.uri,n.anchor.range,r);if("value"in n.anchor&&ut.isUri(n.anchor.value))return this.findWordInDoc(e,n.anchor.value,new Cc.Range(0,0,Number.MAX_SAFE_INTEGER,0),r)})))}async findWordInDoc(e,r,n,i){let o=await Cc.workspace.openTextDocument(r);if(i?.isCancellationRequested)return;let s=await this.getSymbolsInRange(o,n);if(i?.isCancellationRequested)return;for(let u of s)if(u.identifier===e){let l=o.positionAt(u.startIndex);return new Cc.Location(r,l)}let a=o.getText(n),c=o.offsetAt(n.start);for(let u of a.matchAll(new RegExp(ytt(e),"g")))if(u.index){let l=o.positionAt(c+u.index),d=o.getText(o.getWordRangeAtPosition(l));if(e===d)return new Cc.Location(r,l)}}async getSymbolsInRange(e,r){let n=this.parserService.getTreeSitterAST(e);return n?n.getSymbols({startIndex:e.offsetAt(r.start),endIndex:e.offsetAt(r.end)}):[]}};AE=fe([ie(1,xt)],AE);function ytt(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function btt(t){return"uri"in t?t:new Cc.Location(t.targetUri,t.targetRange)}var D8=W(st());var P8=class t extends K{constructor(){super(...arguments);this._logger=this.accessor.get(ue).getLogger("DefinitionAtPosition")}static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){if(await this.accessor.get(De).isCopilotIgnored(this.props.document.uri))return{k:"ignored"};let r=this.accessor.get(xr).extensionMode===Sa.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,n=await this.findDefinition(r);return this._logger.debug(`Found ${n.length} implementation(s)/definition(s)`),n.length>0&&this._logger.debug("Implementation(s)/definition(s) found:",JSON.stringify(n,null,"	")),{k:"found",definitions:n}}render(r,n){if(r.k==="ignored")return vscpp("ignoredFiles",{value:[this.props.document.uri]});let{document:i,position:o}=this.props,{definitions:s}=r;if(s.length===0){let a=i.lineAt(o.line);s.push({languageId:i.languageId,uri:i.uri,code:a.text,excerptRange:a.range})}return vscpp(vscppf,null,"Relevant definition",s.length>1?"s":"",": ",vscpp("br",null),vscpp("br",null),s.map(a=>{let l=`${`${$o(a.languageId).lineComment.start} FILEPATH: ${a.uri.path}`}
${a.code}`;return vscpp(Be,{uri:a.uri,languageId:a.languageId,code:l})}))}async findDefinition(r){let{document:n,position:i}=this.props,o=this.accessor.get(hi),s=async u=>{try{let l=await o.getImplementations(n.uri,u);if(this._logger.debug(`Found ${l.length} implementations`,JSON.stringify(l,null,"	")),l.length>0)return l}catch{}try{let l=await o.getDefinitions(n.uri,u);if(this._logger.debug(`Found ${l.length} definitions`,JSON.stringify(l,null,"	")),l.length>0)return l}catch{}return this._logger.debug("No definitions or implementations found"),[]},a=await ua(this.accessor,n,r*3,()=>s(i),[]),c=Xt(await Promise.all(a.map(async u=>{let l=Op(u)?u.targetUri:n.uri;return await this.accessor.get(De).isCopilotIgnored(l)?void 0:u})));return Promise.all(c.map(async u=>{let{uri:l,range:d}=Op(u)?{uri:u.targetUri,range:u.targetRange}:u,p=await this.accessor.get(Ze).openTextDocument(l),f=Np(p.languageId),m,h;if(f===void 0){let g=p.lineAt(d.start.line);m=g.text,h=g.range}else h=(await h0(this.accessor,{document:p,language:$o(n.languageId),wholeRange:d,selection:new Lm(d.start,d.end),fileIndentInfo:void 0})).range,m=p.getText(h);return{languageId:p.languageId,uri:p.uri,code:m,excerptRange:h}}))}};var k8=class extends K{constructor(e,r){super(e,r);let{document:n,range:i}=this.props;this._defAtPos=new P8({document:n,position:i.start},this.accessor)}async prepare(e,r,n){let{document:i,range:o}=this.props,s=await this._defAtPos.prepare();if(!(s.k==="found"&&s.definitions.some(u=>u.excerptRange.contains(this.props.range)))){let u=await this.accessor.get(Ue).getUserRequestEndpoint(3),l={document:i,fileIndentInfo:void 0,language:$o(i.languageId),wholeRange:o,selection:new Lm(o.start,o.end)};this._defAroundCursor=new wE({documentContext:l,endpointInfo:u},this.accessor)}return{defAtPositionState:s,defAroundCursorState:this._defAroundCursor?await this._defAroundCursor.prepare(e):void 0}}render(e,r){let{document:n,range:i}=this.props,o=n.getText(i),s=_tt(o),a=s?` keeping prefix '${s}'`:"",c=this._defAtPos.render(e.defAtPositionState,r),u=e.defAroundCursorState!==void 0&&this._defAroundCursor?.render(e.defAroundCursorState,r);return vscpp(vscppf,null,vscpp(D8.SystemMessage,null,"You are a distinguished software engineer.",vscpp("br",null),vscpp(Br,null),vscpp("br",null),'You must reply with a JSON array of strings of at least four new names, e.g., `["newName1", "newName2", "newName3"]`.',vscpp("br",null),"You must respect existing naming conventions",a,"."),u,vscpp(D8.UserMessage,null,c!==void 0&&vscpp(vscppf,null,c,vscpp("br",null)),"Think of the purpose of `",o,"` in the given code. Think of several names that reflect what `",o,"` is and what it does",a,". Follow existing naming conventions. Reply with a a JSON array of strings of at least four new names for `",o,"`."))}};function _tt(t){return t.match(/^([\\.\\$\\_]+)/)?.[0]}var sp=class{constructor(e){this._accessor=e;this.supportsAutomaticTriggerKind=Promise.resolve(this.isEnabled(aC.Automatic)),this._promptLogger=this._accessor.get(ue).getPromptResponseLogger("RenameSuggestionsProvider")}isEnabled(e){return e===aC.Invoke?!0:this._accessor.get(ke).getConfig(Ae.AutomaticRenameSuggestions)}async provideNewSymbolNames(e,r,n,i){let o="",s=new Ml;if(!this.isEnabled(n))throw new Error("CopilotFeatureUnavailableOrDisabled");if(await this._accessor.get(De).isCopilotIgnored(e.uri))throw new Error("CopilotIgnoredDocument");let a=e.languageId,c,u;if(i.isCancellationRequested)o="afterEnablementCheck";else{let l=await this._accessor.get(Ue).getChatEndpoint("gpt-3.5-turbo");if(c=await this._accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.renameSuggestionsDelayBeforeFetch",!0),i.isCancellationRequested)o="afterRunParametersFetch";else{let d=new Ml(!1);d.reset();let p=await this._computePrompt(e,r,l,i),f=d.elapsed();if(i.isCancellationRequested)o="afterPromptCompute";else{u=s.elapsed();let m;if(n===aC.Automatic&&(m=c?Math.max(0,c-u):void 0,m!==void 0&&m>0&&await new Promise(h=>setTimeout(h,m))),i.isCancellationRequested)o="afterDelay";else{this._promptLogger.logPrompt(p.messages);let h=this._accessor.get(Jt);d.reset();let g=await h.fetchOne(p.messages,void 0,i,3,l,{agent:"symbol-names"},void 0,{messageSource:"symbolNamesProvider"}),v=d.elapsed();switch(i.isCancellationRequested&&(o="afterFetchStarted"),this._promptLogger.logResponse(g),g.type){case"success":{let y=g.value,{replyFormat:b,symbolNames:x,redundantCharCount:S}=sp.processReply(y);return b==="unknown"&&this._sendInternalTelemetry({languageId:a,reply:y}),this._sendPublicTelemetry({triggerKind:n,languageId:a,cancellationReason:o,fetchResultType:g.type,promptConstructionTime:f,promptTokenCount:p.tokenCount,expectedDelayBeforeFetch:c,actualDelayBeforeFetch:m,timeElapsedBeforeDelay:u,successResponseCharCount:y.length,responseUnusedCharCount:S,fetchTime:v,replyFormat:b,symbolNamesCount:x.length}),x.map(T=>new iie(T,[oie.AIGenerated]))}default:return this._sendPublicTelemetry({triggerKind:n,languageId:a,cancellationReason:o,fetchResultType:g.type,promptConstructionTime:f,promptTokenCount:p.tokenCount,expectedDelayBeforeFetch:c,actualDelayBeforeFetch:m,timeElapsedBeforeDelay:u,fetchTime:v}),null}}}}}return this._sendPublicTelemetry({triggerKind:n,languageId:a,cancellationReason:o,expectedDelayBeforeFetch:c,timeElapsedBeforeDelay:u}),null}_computePrompt(e,r,n,i){return new Je(n,k8,{document:e,range:r},this._accessor.get(ge),this._accessor).render(void 0,i)}static processReply(e){let r=sp._parseReplyAsJSONStringArray(e);if(r!==void 0)return r;let n=sp._parseReplyAsList(e);return n!==void 0?n:{replyFormat:"unknown",symbolNames:[],redundantCharCount:e.length}}static _parseReplyAsJSONStringArray(e){let r=/\[.*?\]/gs,n=[...e.matchAll(r)];for(let i=0;i<n.length;i++){let o=n[i];try{let s=JSON.parse(o[0]);if(Array.isArray(s)){let a=s.filter(c=>typeof c=="string");if(a.length>0){let c=i===0?"jsonStringArray":"multiJsonStringArray",u=e.length-o[0].length;return{replyFormat:c,redundantCharCount:u,symbolNames:a.map(l=>l.trim())}}}}catch{}}}static _parseReplyAsList(e){let r=/(?:\d+[\.|\)]|[\*\-])\s*(.*)/g,n=e.matchAll(r),i=[];for(let s of n){let a=s[1].trim(),c=["'",'"',"`"];c.includes(a[0])&&(a=a.slice(1)),c.includes(a[a.length-1])&&(a=a.slice(0,-1)),a&&i.push(a)}return i.length===0?void 0:{replyFormat:"list",redundantCharCount:e.length-i.reduce((s,a)=>s+a.length,0),symbolNames:i}}_sendPublicTelemetry({triggerKind:e,languageId:r,cancellationReason:n,fetchResultType:i,timeElapsedBeforeDelay:o,promptConstructionTime:s,promptTokenCount:a,expectedDelayBeforeFetch:c,actualDelayBeforeFetch:u,successResponseCharCount:l,responseUnusedCharCount:d,fetchTime:p,replyFormat:f,symbolNamesCount:m}){this._accessor.safeGet(Ee)?.sendMSFTTelemetryEvent("provideRenameSuggestions",{languageId:r,cancellationReason:n,fetchResultType:i,replyFormat:f,triggerKind:e===aC.Automatic?"automatic":"manual"},{promptConstructionTime:s,promptTokenCount:a,expectedDelayBeforeFetch:c,actualDelayBeforeFetch:u,timeElapsedBeforeFetch:o,fetchTime:p,successResponseCharCount:l,responseUnusedCharCount:d,symbolNamesCount:m})}_sendInternalTelemetry({languageId:e,reply:r}){this._accessor.safeGet(Ee)?.sendInternalMSFTTelemetryEvent("provideRenameSuggestionsIncorrectFormatResponse",{languageId:e,reply:r})}static _determinePrefix(e){return e.match(/^([\\.\\$\\_]+)/)?.[0]}};sp=fe([ie(0,ct)],sp);var Gwe=W(_r());var qwe=W(_r()),Hwe=W(require("fs"));var i2=W(st());var PE=class extends K{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(Ht,{priority:600,history:this.props.history}),vscpp(i2.SystemMessage,{priority:1e3},"You are a coding assistant who helps the user find relevant code in their workspace by providing a list of relevant keywords they can search for.",vscpp("br",null),"The user will provide you with potentially relevant information from the workspace. This information may be incomplete.",vscpp("br",null),"Respond in Markdown. First under a `# Question` header, output a rephrased version of the user's question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for.",vscpp("br",null),"Then under a `# Keywords` header, output a short markdown list of up to 8 relevant keywords that the user can search for to answer the question. You may include variations after each keyword.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are asking about their workspace.",vscpp("br",null),"2. If the question contains pronouns such as 'it' or 'that', try to understand what the pronoun refers to by looking at the rest of the question and the conversation history.",vscpp("br",null),"3. If the question contains an ambiguous word such as 'this', try to understand what is refers to by looking at the rest of the question, the user's active selection, and the conversation history.",vscpp("br",null),"4. After a `# Question` header, output a precise version of question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns and words like 'this'.",vscpp("br",null),"5. Then after a `# Keywords` header, output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.",vscpp("br",null),"6. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.",vscpp("br",null),vscpp("br",null),"Examples",vscpp("br",null),vscpp("br",null),"User: base64 encoding",vscpp("br",null),vscpp("br",null),"Assistant:",vscpp("br",null),"# Question",vscpp("br",null),"Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"# Keywords",vscpp("br",null),"- base64 encoding, base64 encoder, base64 encode",vscpp("br",null),"- base64, base 64",vscpp("br",null),"- encode, encoded, encoder, encoders"),this.props.fileTree&&vscpp(i2.UserMessage,{priority:700},this.props.fileTree),vscpp(i2.UserMessage,{priority:1e3},this.props.query))}};var N8=oe("IWorkspaceSemanticChunkService"),kE=class{constructor(e){this._accessor=e;this._workspaceChunkSearch=this._accessor.get($g),this._chatFetcher=this._accessor.get(Jt)}async searchFileChunks(e,r,n,i){let{messages:o}=await this.buildMetaPrompt(r,e,i);if(i.isCancellationRequested)return[];let s=await this._chatFetcher.fetchOne(o,async c=>{},i,2,r,{agent:Dp},{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"semanticSearchIntent"});if(s.type!=="success")throw new Error(qwe.t("Encountered an error while deciding what workspace information to collect: ({0}) {1}",s.type,s.reason));if(i.isCancellationRequested)return[];let a=RE(e,s.value);return QX(this._workspaceChunkSearch,r,e,a,n,i,!1)}dispose(){}async buildMetaPrompt(e,r,n){let i=await e2(this._accessor,1e3,n);return new Je(e,PE,{query:r,fileTree:i},this._accessor.get(ge),this._accessor).render()}};kE=fe([ie(0,ct)],kE);async function QX(t,e,r,n,i,o,s){let a={rawQuery:r,resolve:async()=>({rephrasedQuery:n.rephrasedQuestion,keywords:n.keywords})},c=(await t.searchFileChunks(e,a,i,{},o)).slice(0,i);return o.isCancellationRequested||!c.length?[]:await xtt(c,s)}async function xtt(t,e){let r=[],n=new kn;for(let[i,o]of t.entries()){let s=n.get(o.file),a=s?s.rank:i,c=s?[...s.ranges,o.range]:[o.range];n.set(o.file,{ranges:c,rank:a})}for(let[i,o]of n.entries()){let s=o.ranges.filter((p,f)=>{for(let[m,h]of o.ranges.entries())if(f!==m&&p.containsRange(h))if(p.equalsRange(h)){if(f<m)return!1}else return!1;return!0}),a=[],c;s.sort((p,f)=>p.startLineNumber-f.startLineNumber);for(let p of s)c&&c.endLineNumber>=p.startLineNumber-1?c=new ht(c.startLineNumber,c.startColumn,p.endLineNumber,p.endColumn):(c&&a.push(c),c=p);c&&a.push(c);let l=(await Hwe.promises.readFile(i.fsPath,"utf8")).split(`
`),d=[];for(let p of a){let f=p.startLineNumber,m=p.endLineNumber,h=l.slice(f,m);if(!Ett(h,5))continue;let{trimmedLines:g}=cC(Stt(h,1e3,15)),v;e?(g.length<h.length&&g.push("..."),v=Ii(nc(i).replace(/\./g,""),g.join(`
`).replace(/^\n*|\n*$/g,""),!1)):v=g.join(`
`),d.push({range:p,code:v})}d.length>0&&r.push({result:{file:i,locations:d},rank:o.rank})}return r.sort((i,o)=>i.rank-o.rank).map(i=>i.result)}function Stt(t,e,r){let n=[],i=0;for(;i<t.length&&n.join(`
`).length<e&&n.length<r;)n.push(t[i]),i++;return n}function Ett(t,e){let r=0;for(let n of t)if(r+=n.trim().length,r>=e)return!0;return!1}var DE=class{constructor(e,r){this._endpointProvider=e;this._workspaceSemanticChunkService=r}provideAITextSearchResults(e,r,n,i){return(async()=>(this._endpoint=this._endpoint??await this._endpointProvider.getUserRequestEndpoint(2),(await this._workspaceSemanticChunkService.searchFileChunks(e,this._endpoint,10,i)).forEach(a=>{a.locations.forEach(c=>{n.report({uri:a.file,ranges:Fm(c.range),preview:{text:c.code,matches:new Xe(new jn(0,c.range.startColumn),new jn(c.range.endLineNumber-c.range.startLineNumber,c.range.endColumn))}})})}),{limitHit:!1,message:{text:Gwe.t("Results are from Copilot"),trusted:!0,type:1}}))()}};DE=fe([ie(0,Ue),ie(1,N8)],DE);var o2=W(require("vscode"));var O8=W(st());var XX=class extends K{render(){let e=this.props.issues?.map(r=>vscpp(vscppf,null,"------- Issue ",r.reference,":",vscpp("br",null),r.content,vscpp("br",null)));return e&&e.length>0?vscpp(vscppf,null,"You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository to fix the following issues: ",vscpp("br",null),e):vscpp(vscppf,null,"You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository.")}},JX=class extends K{render(){return vscpp(vscppf,null,"Here are two good examples:",vscpp("br",null)," ",this.props.issues&&this.props.issues.length>0?vscpp(vscppf,null,"Example One:",vscpp("br",null),"+++Batch mark/unmark files as viewed",vscpp("br",null),"+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.",vscpp("br",null),"Fixes #4520+++",vscpp("br",null),"Example two:",vscpp("br",null),"+++Fallback to hybrid after 20 process ports",vscpp("br",null),"+++Additionally the \\`remote.autoForwardPortsSource\\` setting has been updated to remove the \\`markdownDescription\\` reference to a reload being required for changes to take effect.",vscpp("br",null),"Fixes microsoft/vscode-internalbacklog#4533+++",vscpp("br",null)):vscpp(vscppf,null,"Example One:",vscpp("br",null),"+++Batch mark/unmark files as viewed",vscpp("br",null),"+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.+++",vscpp("br",null),"Example two:",vscpp("br",null),"+++Fallback to hybrid after 20 process ports",vscpp("br",null),"+++Additionally the \\`remote.autoForwardPortsSource\\` setting has been updated to remove the \\`markdownDescription\\` reference to a reload being required for changes to take effect.+++",vscpp("br",null)),";")}},ZX=class extends K{render(){return vscpp(vscppf,null,vscpp(XX,{issues:this.props.issues}),"Pull requests have a short and concise title that describes the changes in the code and a slightly longer description.",vscpp("br",null),"The description can be more detailed but should still be concise. Do not list commits, files or patches. Do not make up an issue reference if the pull request isn't fixing an issue.",vscpp("br",null),"The title and description of a pull request should be markdown and start with +++ and end with +++.",vscpp("br",null),vscpp(JX,{issues:this.props.issues}))}},eJ=class extends K{render(){let e=this.props.commitMessages.map(n=>vscpp(vscppf,null,"* ",n,vscpp("br",null))),r=this.props.patches.map(n=>vscpp(vscppf,null,"```diff",vscpp("br",null),n,vscpp("br",null),"```",vscpp("br",null)));return vscpp(vscppf,null,"These are the commits that will be included in the pull request you are about to make:",vscpp("br",null),e,vscpp("br",null),"Below is a list of git patches that contain the file changes for all the files that will be included in the pull request:",vscpp("br",null),r,vscpp("br",null),"Based on the git patches and on the git commit messages above, the title and description of the pull request should be:",vscpp("br",null))}},L8=class extends K{render(){return vscpp(vscppf,null,vscpp(O8.SystemMessage,null,vscpp(ZX,{issues:this.props.issues}),vscpp(sn,null)),vscpp(O8.UserMessage,null,vscpp(eJ,{commitMessages:this.props.commitMessages,patches:this.props.patches})))}};var M8=class t{constructor(e){this.accessor=e;this.disposables=new qt;this.lastContext={commitMessages:[],patches:[]};this.internalLogger=e.get(ue).getPromptResponseLogger("GitHub pull request title and description generator"),this.logger=e.get(ue).getLogger("githubTitleAndDescriptionProvider"),this.logger.info("Initializing GitHub PR title and description provider provider."),this.options=e.get(Vi)}dispose(){this.disposables.dispose()}isRegenerate(e,r){if(e.length!==this.lastContext.commitMessages.length||r.length!==this.lastContext.patches.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==this.lastContext.commitMessages[n])return!1;for(let n=0;n<r.length;n++)if(r[n]!==this.lastContext.patches[n])return!1;return!0}async excludePatches(e){let r=this.accessor.get(De),n=[];for(let i of e)i.fileUri&&await r.isCopilotIgnored(ut.parse(i.fileUri))||i.previousFileUri&&i.previousFileUri!==i.fileUri&&await r.isCopilotIgnored(ut.parse(i.previousFileUri))||n.push(i.patch);return n}async provideTitleAndDescription(e,r){let n=e.commitMessages,i=kA(e.patches)?e.patches.map(d=>({patch:d})):e.patches,o=await this.excludePatches(i),s=e.issues,a=await this.accessor.get(Ue).getUserRequestEndpoint(3),c=Math.floor(a.modelMaxPromptTokens*4/3),u=await this.createPRTitleAndDescriptionPrompt(n,o,s,c);this.internalLogger.logPrompt(u.messages);let l=await this.accessor.get(Jt).fetchOne(u.messages,void 0,r,3,a,void 0,{temperature:this.isRegenerate(n,o)?this.options.temperature+.1:this.options.temperature,top_p:this.options.topP},{messageSource:"extension.providePullRequestTitleAndDescription"});if(this.internalLogger.logResponse(l),this.lastContext={commitMessages:n,patches:o},l.type==="success")return t.parseFetchResult(l.value)}static parseFetchResult(e,r=!0){e=e.trim();let n=e,i=n.indexOf("+++");if(i===-1)return;let o=n.lastIndexOf("+++");n=n.substring(i+3,o>i+3?o:void 0).trim().replace(/\+\+\+?(\n)\+\+\+/,"+++");let s=n.split("+++").filter(l=>l.trim().length>0),a;if(s.length===1)a=s[0].split(`
`);else if(s.length>1){let l=s.slice(1).map(d=>d.split(`
`)).flat().filter(d=>d.trim().length>0);a=[s[0],...l]}else return;let c,u;if(a.length===1){if(c=a[0].trim(),r&&e.includes(`
`)&&e.split("+++").length===3)return this.parseFetchResult(e+"+++",!1)}else if(a.length>1){c=a[0].trim(),u="";let l=a.slice(1);for(let d of l)d.includes("commit message")||(u+=`${d.trim()}

`)}if(c)return c=c.replace(/Title\:\s/,"").trim(),u&&(u=u.replace(/Description\:\s/,"").trim()),{title:c,description:u}}async createPRTitleAndDescriptionPrompt(e,r,n,i){let o=i-Math.floor(i*.2),s=r.join(`

`).length;if(s>o)for(r.sort((u,l)=>u.length-l.length);s>o&&r.length>0;){let u=r.pop();s-=u.length}let a=await this.accessor.get(Ue).getUserRequestEndpoint(3);return new Je(a,L8,{commitMessages:e,issues:n,patches:r},this.accessor.get(ge),this.accessor).render(void 0,void 0)}};var F8=class extends M8{constructor(e){super(e),this.initializeGitHubPRExtensionApi()}getExtension(){return o2.extensions.getExtension("github.vscode-pull-request-github")}initializeGitHubPRExtensionApi(){let e=this.getExtension(),r=async()=>{if(e){let n=await e.activate();this.logger.info("Successfully activated the GitHub.vscode-pull-request-github extension."),this.gitHubExtensionApi=n,this.registerTitleAndDescriptionProvider()}};if(e)r();else{this.logger.info("GitHub.vscode-pull-request-github extension is not yet activated.");let n=o2.extensions.onDidChange(()=>{e=this.getExtension(),e&&(r(),n.dispose())});this.disposables.add(n)}}async registerTitleAndDescriptionProvider(){if(this.gitHubExtensionApi)try{this.disposables.add(this.gitHubExtensionApi.registerTitleAndDescriptionProvider(o2.l10n.t("Generate with Copilot"),this)),this.logger.info("Successfully registered GitHub PR title and description provider.")}catch{}}};var Tl=W(require("vscode"));var U8=class{provideMappedEdits(e,r,n,i){if(n.documents.length===0)return null;let o=n.documents[0],s=e.uri.toString(),a=o.find(y=>y.uri.toString()===s);if(!a)return null;let c=a.ranges;if(c.length!==1||r.length!==1)return null;let u=c[0],l=r[0];if(!e.getText(new Tl.Range(new Tl.Position(u.start.line,0),new Tl.Position(u.start.line,u.start.character))).match(/^\s*$/))return null;let p=Tl.window.activeTextEditor,f;if(p&&p.options&&e.languageId===p.document.languageId){let y=p.options,b=typeof y.tabSize=="number"?y.tabSize:4,x=typeof y.insertSpaces=="boolean"?y.insertSpaces:!0;f={tabSize:b,insertSpaces:x}}let m=new Tl.Range(new Tl.Position(u.start.line,0),u.end),h=e.getText(m),g=Xg(l.split(`
`),{whichLine:"topMost",lines:h.split(`
`)},f).join(`
`),v=new Tl.WorkspaceEdit;return v.replace(e.uri,m,g),v}};var aRe=W(require("path")),cRe=require("util"),Dt=require("vscode");var Ttt=["dockerfile","license","makefile","readme","procfile","gemfile","rakefile","jenkinsfile","vagrantfile"];function jwe(t){return/\.[^/.]+$/.test(t)&&Ttt.indexOf(t.toLowerCase())===-1}var yb=W(_r()),rRe=W(require("path"));var ngr=new Uint32Array(10);var igr=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),ogr=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),sgr=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),agr=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function Vwe(...t){return function(e,r){for(let n=0,i=t.length;n<i;n++){let o=t[n](e,r);if(o)return o}return null}}var hgr=Wwe.bind(void 0,!1),$we=Wwe.bind(void 0,!0);function Wwe(t,e,r){if(!r||r.length<e.length)return null;let n;return t?n=HT(r,e):n=r.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function Ctt(t,e){let r=e.toLowerCase().indexOf(t.toLowerCase());return r===-1?null:[{start:r,end:r+t.length}]}function Itt(t,e){return tJ(t.toLowerCase(),e.toLowerCase(),0,0)}function tJ(t,e,r,n){if(r===t.length)return[];if(n===e.length)return null;if(t[r]===e[n]){let i=null;return(i=tJ(t,e,r+1,n+1))?Ywe({start:n,end:n+1},i):null}return tJ(t,e,r,n+1)}function nJ(t){return 97<=t&&t<=122}function q8(t){return 65<=t&&t<=90}function iJ(t){return 48<=t&&t<=57}function wtt(t){return t===32||t===9||t===10||t===13}var Rtt=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(t=>Rtt.add(t.charCodeAt(0)));function Kwe(t){return nJ(t)||q8(t)||iJ(t)}function Ywe(t,e){return e.length===0?e=[t]:t.end===e[0].start?e[0].start=t.start:e.unshift(t),e}function Qwe(t,e){for(let r=e;r<t.length;r++){let n=t.charCodeAt(r);if(q8(n)||iJ(n)||r>0&&!Kwe(t.charCodeAt(r-1)))return r}return t.length}function rJ(t,e,r,n){if(r===t.length)return[];if(n===e.length)return null;if(t[r]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=rJ(t,e,r+1,n+1);!i&&(o=Qwe(e,o))<e.length;)i=rJ(t,e,r+1,o),o++;return i===null?null:Ywe({start:n,end:n+1},i)}}function Att(t){let e=0,r=0,n=0,i=0,o=0;for(let l=0;l<t.length;l++)o=t.charCodeAt(l),q8(o)&&e++,nJ(o)&&r++,Kwe(o)&&n++,iJ(o)&&i++;let s=e/t.length,a=r/t.length,c=n/t.length,u=i/t.length;return{upperPercent:s,lowerPercent:a,alphaPercent:c,numericPercent:u}}function Ptt(t){let{upperPercent:e,lowerPercent:r}=t;return r===0&&e>.6}function ktt(t){let{upperPercent:e,lowerPercent:r,alphaPercent:n,numericPercent:i}=t;return r>.2&&e<.8&&n>.6&&i<.2}function Dtt(t){let e=0,r=0,n=0,i=0;for(let o=0;o<t.length;o++)n=t.charCodeAt(o),q8(n)&&e++,nJ(n)&&r++,wtt(n)&&i++;return(e===0||r===0)&&i===0?t.length<=30:e<=5}function Xwe(t,e){if(!e||(e=e.trim(),e.length===0)||!Dtt(t))return null;e.length>60&&(e=e.substring(0,60));let r=Att(e);if(!ktt(r)){if(!Ptt(r))return null;e=e.toLowerCase()}let n=null,i=0;for(t=t.toLowerCase();i<e.length&&(n=rJ(t,e,0,i))===null;)i=Qwe(e,i+1);return n}var ggr=Vwe($we,Xwe,Ctt),vgr=Vwe($we,Xwe,Itt),ygr=new Ol(1e4);var B8=128;function oJ(){let t=[],e=[];for(let r=0;r<=B8;r++)e[r]=0;for(let r=0;r<=B8;r++)t.push(e.slice(0));return t}function Jwe(t){let e=[];for(let r=0;r<=t;r++)e[r]=0;return e}var bgr=Jwe(2*B8),_gr=Jwe(2*B8),xgr=oJ(),Sgr=oJ(),Egr=oJ();var Ntt;(r=>{r.Default=[-100,0];function e(n){return!n||n.length===2&&n[0]===-100&&n[1]===0}r.isDefault=e})(Ntt||={});var zwe=class{constructor(e,r){this.firstMatchCanBeWeak=e;this.boostFullMatch=r}static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}};var Zwe;(e=>{function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(Zwe||={});var s2;(h=>{h.iconNameSegment="[A-Za-z0-9]+",h.iconNameExpression="[A-Za-z0-9-]+",h.iconModifierExpression="~[A-Za-z]+",h.iconNameCharacter="[A-Za-z0-9~-]";let i=new RegExp(`^(${h.iconNameExpression})(${h.iconModifierExpression})?$`);function o(g){let v=i.exec(g.id);if(!v)return o(Kr.error);let[,y,b]=v,x=["codicon","codicon-"+y];return b&&x.push("codicon-modifier-"+b.substring(1)),x}h.asClassNameArray=o;function s(g){return o(g).join(" ")}h.asClassName=s;function a(g){return"."+o(g).join(".")}h.asCSSSelector=a;function c(g){return g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||Zwe.isThemeColor(g.color))}h.isThemeIcon=c;let u=new RegExp(`^\\$\\((${h.iconNameExpression}(?:${h.iconModifierExpression})?)\\)$`);function l(g){let v=u.exec(g);if(!v)return;let[,y]=v;return{id:y}}h.fromString=l;function d(g){return{id:g}}h.fromId=d;function p(g,v){let y=g.id,b=y.lastIndexOf("~");return b!==-1&&(y=y.substring(0,b)),v&&(y=`${y}~${v}`),{id:y}}h.modify=p;function f(g){let v=g.id.lastIndexOf("~");if(v!==-1)return g.id.substring(v+1)}h.getModifier=f;function m(g,v){return g.id===v.id&&g.color?.id===v.color?.id}h.isEqual=m})(s2||={});var sJ=new RegExp(`\\$\\(${s2.iconNameExpression}(?:${s2.iconModifierExpression})?\\)`,"g"),Ltt=new RegExp(`(\\\\)?${sJ.source}`,"g");function eRe(t){return t.replace(Ltt,(e,r)=>r?e:`\\${e}`)}var Ngr=new RegExp(`\\\\${sJ.source}`,"g");var Lgr=new RegExp(`(\\s)?(\\\\)?${sJ.source}(\\s)?`,"g");var Ogr=new RegExp(`\\$\\(${s2.iconNameCharacter}+\\)`,"g");var v0=class{constructor(e="",r=!1){if(this.value=e,typeof this.value!="string")throw wr("value");typeof r=="boolean"?(this.isTrusted=r,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=r.isTrusted??void 0,this.supportThemeIcons=r.supportThemeIcons??!1,this.supportHtml=r.supportHtml??!1)}appendText(e,r=0){return this.value+=Ott(this.supportThemeIcons?eRe(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,r===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,r){return this.value+=`
${Mtt(r,e)}
`,this}appendLink(e,r,n){return this.value+="[",this.value+=this._escape(r,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,r){let n=new RegExp(G0(r),"g");return e.replace(n,(i,o)=>e.charAt(o-1)!=="\\"?`\\${i}`:i)}};function Ott(t){return t.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function Mtt(t,e){let r=t.match(/^`+/gm)?.reduce((i,o)=>i.length>o.length?i:o).length??0,n=r>=3?r+1:3;return[`${"`".repeat(n)}${e}`,t,`${"`".repeat(n)}`].join(`
`)}var aJ=W(_r()),c2=W(st()),tRe=W(require("path"));async function a2(t,e,r,n){let i=null,o=!1;i=setTimeout(()=>{o||t.report(e)},n);try{let s=await r;return o=!0,s}finally{i&&clearTimeout(i)}}var H8=class extends K{async prepare(e,r,n){if(!this.props.useTemplates)return{};if(!r)throw new Error("Progress is required");this._embeddingCompute??=this.accessor.get(Ws),this._embeddingEndpoint??=await this.accessor.get(Ue).getEmbeddingsEndpoint();let i=await this._embeddingCompute?.computeEmbeddings(this._embeddingEndpoint,[this.props.query],{},void 0);if(!i)return{};let o=this.accessor.get(VP);r.report(new Io(aJ.t("Searching project template index...")));let s=await o.nClosestValues(i[0],1,.8);if(s.length===0)return{};{let a=s[0]?.split(":"),c=a[0].trim(),u=a[1].trim(),l=a[2].trim()===""?".":a[2].trim();if(!c||!u||!l)return{};let d=this.accessor.get(Oc),p=await a2(r,new Io(aJ.t("Fetching project contents...")),d.getRepositoryItems(c,u,l),500);if(p.length===0)return{};let f;return l==="."?f=`httpx://github.com/${c}/${u}`:f=tRe.default.dirname(p[0].html_url),this._metadata=new vb(c,u,l,p),{url:f}}}render(e){return vscpp(vscppf,null,this.props.history&&vscpp(vscppf,null,vscpp(Ht,{priority:600,history:this.props.history.filter(r=>r.response?.name===cJ&&r.request.type==="user")})),!this._metadata&&vscpp(vscppf,null,vscpp(c2.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to suggest a filetree directory structure for a project that a user wants to create. If a step does not relate to filetree directory structures, do not respond. Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(di,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),`You should always start your response to the user with "Sure, here's a proposed directory structure for a [project type] app:"`,vscpp("br",null),"You should generate a markdown file tree structure for the same project and include it in your response.",vscpp("br",null),"You should only list common files for the user's desired project type.",vscpp("br",null),"You should always include a README.md file which describes the project.",vscpp("br",null),"Do not include folders and files generated after compiling, building or running the project such as node_modules, dist, build, out",vscpp("br",null),"Do not include image files such as png, jpg, ico, etc",vscpp("br",null),"Do not include any descriptions or explanations in your response.",vscpp("br",null),"If the user asks for a file content to be modified, respond with the same file tree structure and ask them to open the file to view the modifications.",vscpp("br",null),"Do not attempt to modify the file content your self and simply respond with the same file tree structure.",vscpp("br",null),["","Examples:","","Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.","","## Valid setup question","","User: Create a TypeScript express app","Assistant:","","Sure, here's a proposed directory structure for a TypeScript Express app:","","```filetree","my-express-app","\u251C\u2500\u2500 src","\u2502   \u251C\u2500\u2500 app.ts","\u2502   \u251C\u2500\u2500 controllers","\u2502   \u2502   \u2514\u2500\u2500 index.ts","\u2502   \u251C\u2500\u2500 routes","\u2502   \u2502   \u2514\u2500\u2500 index.ts","\u2502   \u2514\u2500\u2500 types","\u2502       \u2514\u2500\u2500 index.ts","\u251C\u2500\u2500 package.json","\u251C\u2500\u2500 tsconfig.json","\u2514\u2500\u2500 README.md","```","","## Invalid setup question","","User: Create a horse project","Assistant: Sorry, I don't know how to set up a horse project."].join(`
`))),this._metadata&&vscpp(vscppf,null,vscpp(c2.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to format the given information as shown in the example below.",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(di,null),vscpp(Tr,null),"The current question is related to sample GitHub repositories.",vscpp("br",null),"The user cannot see the context you are given, so you must not mention it.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the given context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"Use the URL provided to create the markdown link in your response",vscpp("br",null),"Please respond as shown below only if URL is provided in the context.",vscpp("br",null),"[Valid Example]:",vscpp("br",null),"User: Create a vscode extension with a walkthrough contribution.",vscpp("br",null),"URL: https://github.com/microsoft/vscode-extension-samples/tree/main/getting-started-sample",vscpp("br",null),"[Output]",vscpp("br",null),"Sure, here's a GitHub sample project to help you get started on creating a VSCode extension with a walkthrough contribution: [Walkthrough Sample](https://github.com/microsoft/vscode-extension-samples/tree/main/getting-started-sample)",vscpp("br",null),vscpp("br",null),"Please respond with NA as shown below if no URL is provided in the context.",vscpp("br",null),"[Invalid Example Input]: ",vscpp("br",null),"User: Create a vscode extension with a walkthrough contribution.",vscpp("br",null),"URL: ",vscpp("br",null),"[Output] NA ",vscpp("br",null),vscpp("br",null),e.url&&vscpp(vscppf,null,"Below is the URL you should use as input",vscpp("br",null),"URL: ",e.url,vscpp("br",null)))),vscpp(c2.UserMessage,{priority:900},this.props.query),this._metadata&&vscpp(vscppf,null,vscpp("meta",{value:this._metadata})))}},vb=class extends bu{constructor(r,n,i,o){super();this.org=r;this.repo=n;this.path=i;this.githubRepoItems=o}};(e=>{function t(r){return r instanceof e}e.is=t})(vb||={});var ap=W(st());var G8=class extends K{render(){return vscpp(vscppf,null,this.props.history&&vscpp(z8,{messages:this.props.history}),vscpp(ap.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to generate the contents of a file in a project when given the user description, specification and tree structure of the project that a user wants to create. ",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step and give me contents for just the file ",this.props.filePath," within this project. The code should not contain bugs.",vscpp("br",null),"If the user has asked for modifications to an existing file, please use the File path and File contents provided below if applicable.",vscpp("br",null),"If the file is supposed to be empty, please respond with a code comment saying that this file is intentionally left blank.",vscpp("br",null),"Do not include comments in json files.",vscpp("br",null),"Do not use code blocks or backticks.",vscpp("br",null),"Do not include product names such as Visual Studio in the comments.",vscpp("br",null)),this.props.relavantFiles&&this.props.relavantFiles.size>0&&vscpp(vscppf,null,vscpp(ap.UserMessage,{priority:500},"Below, you will find a list of file paths and their contents previously used",vscpp("br",null),Array.from(this.props.relavantFiles).map(([e,r])=>`File path: ${e}
File contents: ${r}
`).join(`
`))),vscpp(ap.UserMessage,{priority:900},"Generate the contents of the file: ",this.props.filePath," ",vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`filetree' ",vscpp("br",null),this.props.fileTreeStr,vscpp("br",null),"\\`\\`\\`",vscpp("br",null),"The project should adhere to the following specification:",vscpp("br",null),this.props.projectSpecification,vscpp("br",null)))}},j8=class extends K{render(){return vscpp(vscppf,null,this.props.history&&vscpp(z8,{messages:this.props.history}),vscpp(ap.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to generate the project specification when given the user description and file tree structure of the project that a user wants to create. ",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step and respond with a text description that lists and summarizes each file inside this project.",vscpp("br",null),"List the classes, types, interfaces, functions, and constants it exports and imports if it is a code file.",vscpp("br",null),"Consider filenames and file extensions when determining the programming languages used in the project. List any special configurations or settings required for configuration files such as package.json or tsconfig.json to help compile the project successfully",vscpp("br",null),"You should be as specific as possible when listing the public properties and methods for each exported class.",vscpp("br",null),"Do not use code blocks or backticks. Do not include any text before or after the file contents.",vscpp("br",null),"Do not include comments in json files.",vscpp("br",null),"Do not use code blocks or backticks.",vscpp("br",null),"Do not include product names such as Visual Studio in the comments.",vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.",vscpp("br",null),vscpp("br",null),"## Valid question",vscpp("br",null),"User: I want to set up the following project: Create a TypeScript Express app",vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown ",vscpp("br",null),"my-express-app",vscpp("br",null),"\u251C\u2500\u2500 src",vscpp("br",null),"\u2502   \u251C\u2500\u2500 app.ts",vscpp("br",null),"\u2502   \u251C\u2500\u2500 controllers",vscpp("br",null),"\u2502   \u2502   \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u2502   \u251C\u2500\u2500 routes",vscpp("br",null),"\u2502   \u2502   \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u2502   \u2514\u2500\u2500 types",vscpp("br",null),"\u2502       \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u251C\u2500\u2500 package.json",vscpp("br",null),"\u251C\u2500\u2500 tsconfig.json",vscpp("br",null),"\u2514\u2500\u2500 README.md",vscpp("br",null),"\\`\\`\\`",vscpp("br",null),"## Valid response",vscpp("br",null),"Assistant: The project has the following files:",vscpp("br",null),"\\`src/app.ts\\`: This file is the entry point of the application. It creates an instance of the express app and sets up middleware and routes.",vscpp("br",null),"\\`src/controllers/index.ts\\`: This file exports a class \\`IndexController\\` which has a method \\`getIndex\\` that handles the root route of the application.",vscpp("br",null),"\\`src/routes/index.ts\\`: This file exports a function \\`setRoutes\\` which sets up the routes for the application. It uses the \\`IndexController\\` to handle the root route.",vscpp("br",null),"\\`src/types/index.ts\\`: This file exports interfaces \\`Request\\` and \\`Response\\` which extend the interfaces from the \\`express\\` library.",vscpp("br",null),"\\`tsconfig.json\\`: This file is the configuration file for TypeScript. It specifies the compiler options and the files to include in the compilation.",vscpp("br",null),"\\`package.json\\`: This file is the configuration file for npm. It lists the dependencies and scripts for the project.",vscpp("br",null),"\\`README.md\\`: This file contains the documentation for the project.",vscpp("br",null)),vscpp(ap.UserMessage,{priority:900},"I want to set up the following project: ",this.props.query,vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown' ",vscpp("br",null),this.props.fileTreeStr,vscpp("br",null),"\\`\\`\\`",vscpp("br",null)))}},z8=class extends K{render(e,r){let n=[];for(let i of this.props.messages)switch(i.role){case"user":n.push(vscpp(ap.UserMessage,{priority:600},i.content));break;case"assistant":n.push(vscpp(ap.AssistantMessage,{priority:800},i.content));break;default:break}return vscpp(vscppf,null,n)}};var V8=class{constructor(e,r){this.accessor=e;this.promptType=r;this.logger=e.get(ue).getPromptResponseLogger(this.constructor.name),this.options=e.get(Vi)}async generate(e,r){let n=await this.accessor.get(Ue).getUserRequestEndpoint(3),o=await new Je(n,this.promptType,e,this.accessor.get(ge),this.accessor).render(),s=await this.accessor.get(Jt).fetchOne(o.messages,void 0,r,3,n,void 0,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:typeof this.promptType});return this.logger.logResponse(s),s.type==="success"?e.filePath?this.parseContents(e.filePath,s.value):s.value:""}},$8=class extends V8{constructor(e){super(e,j8)}parseContents(e,r){throw new Error("Method not implemented.")}},W8=class extends V8{constructor(e){super(e,G8)}parseContents(e,r){function n(i,o){try{let s=o.exec(i.trim());if(s&&s.length>2)return s[2]}catch(s){console.error(s)}return i}if(e.endsWith(".md")){let i=n(r,/^```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/),[o,...s]=i.split("#");return o.length?["",...s].join("#"):i}else return n(r,/```([^\n]+)?\s*\n([\s\S]+?)\s*```/g)}};var cp=oe("INewWorkspacePreviewContentManager"),NE=class{constructor(e){this.responseScopedData=new Map;this.prevFileContents=new Map;this.copilotContentManager=new uJ(e),this.githubContentManager=new lJ(e)}set(e,r,n,i){this.responseScopedData.set(e,n),fJ(n.baseUri)?this.githubContentManager.set(e,r,n,i):this.copilotContentManager.set(e,r,n,i)}get(e){this.prevResponseId!==e.authority&&(this.prevFileContents.clear(),this.prevResponseId=e.authority);let r;return fJ(e)?r=this.githubContentManager.get(e.authority,e.path):r=this.copilotContentManager.get(e.authority,e.path),r?.content?.then(n=>{if(this.prevFileContents.has(e.path))return;let o=new TextDecoder().decode(n);this.prevFileContents.set(e.path,o)}),r}getFileTree(e){return this.responseScopedData.get(e)}getFileContentsFromPrevHistory(){return this.prevFileContents}};NE=fe([ie(0,ct)],NE);var uJ=class{constructor(e){this.accessor=e;this.promises=[];this.responseScopedData=new Map;this.generatePlanPrompt=new $8(this.accessor);this.generateFilePrompt=new W8(this.accessor)}set(e,r,n,i){let{userPrompt:o,projectStructure:s,chatMessages:a}=i,c={query:o,fileTreeStr:s,history:a},u=this.generatePlanPrompt.generate(c,Vr.None);this.promises.push(u);let l=this._getResponseScopedData(e),d={userPrompt:o,projectSpecification:u,projectStructure:s,fileTree:n,chatMessages:a};l.set(r,d)}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTree.value,c=nRe(a,i);if(c&&!c?.content){let u=c;u.content=this._getFileContent(s.userPrompt,s.projectStructure,s.projectSpecification,r,s.chatMessages).catch(()=>u.content=void 0)}return c}_prefetch(e,r,n,i,o){let s=Date.now();return i.children?{...i,type:2,children:i.children.map(a=>this._prefetch(e,r,n,a,o)),ctime:s}:{...i,type:1,content:void 0,ctime:s}}async _getFileContent(e,r,n,i,o){let s=this.accessor.get(cp).getFileContentsFromPrevHistory(),a={query:e,fileTreeStr:r,filePath:i,projectSpecification:await n,history:o,relavantFiles:s.has(i)?new Map([[i,s.get(i)]]):void 0};return this.generateFilePrompt.generate(a,Vr.None).then(c=>Buffer.from(c))}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}},lJ=class{constructor(e){this.responseScopedData=new Map;this.repositoryService=e.get(Oc)}set(e,r,n,i){let o=i,s=this._getResponseScopedData(e),a={...o,fileTree:n};s.set(r,a)}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTree.value,c=nRe(a,i);if(c&&!c?.content&&!c?.children){let u=c,l=s.path==="."?rRe.relative(s.repo,r):r.slice(1);u.content=this.repositoryService.getRepositoryItemContent(s.org,s.repo,l).catch(()=>u.content=void 0)}return c}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}};function nRe(t,e){let r;for(let n of e)r?r.children&&(r=r.children.find(i=>i.name===n)??r):r=t.find(i=>i.name===n);return r}var cJ="new",K8=class{constructor(){this.id="new";this.locations=[2];this.description=yb.t("Scaffold code for a new workspace");this.intentDetectionInput={modelDescription:"Scaffolds a new project from scratch based on requirements from the user.",sampleQuestion:"Create a RESTful API server using typescript"};this.commandInfo={followupPlaceholder:"Provide additional instructions to refine the proposed workspace",shouldRepopulate:!0,allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0}}static{this.ID="new"}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return new dJ(e,this,i,n)}};function iRe(t){return{command:"github.copilot.createProject",arguments:[t],title:yb.t("Create Workspace")}}var dJ=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.linkification={disable:!0};this.commands=async(e,r)=>{let n=e.get(ue).getPromptResponseLogger("new");if(!r.response?.message||!r.requestId)return[];let i=e.get(cp).getFileTree(r.requestId);return i?fJ(i.baseUri)?[]:[iRe(i)]:(n.info("[workspaceIntent] Failed to fetch project items."),[])};let o=this;this.promptCrafter=new class{async getShouldUseProjectTemplate(a){let c=a.get(ke).getConfig(Ae.UseProjectTemplates);return c!==void 0?c:await a.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.useProjectTemplates",!0)?(await a.get(Et).getCopilotToken(a)).public_suggestions!=="enabled":!1}async buildPrompt(a,c,u,l,d,p){let f=a.getLatestTurn(),m=f.request.message,h=a.turns.length>1?a.turns.slice(0,-1):[],g=h[h.length-1]?.request?.message!==f.request.message&&await this.getShouldUseProjectTemplate(e),v=new Je(c,H8,{useTemplates:g,query:m,history:h},e.get(ge),e),y=await v.render(l,p),b=v.getMeta(vb);return b&&(o.githubContentMetadata=b),y}}}get responseProcessor(){return new pJ(this.accessor,this.githubContentMetadata)}};function Ftt(t){let e=(t.match(/│   /g)||[]).length;return e+=(t.match(/\|   /g)||[]).length,e+=(t.match(/    /g)||[]).length,e+=(t.match(/├── /g)||[]).length,e+=(t.match(/└── /g)||[]).length,e}var Utt=["node_modules","out","bin","debug","obj","lib",".dll",".pdb",".lib",".jpg",".png",".ico",".gif",".svg",".jpeg",".tiff",".bmp",".webp",".jpeg",".gitignore","LICENSE.txt","yarn.lock","package-lock.json"];function oRe(t){let e=[];for(let r of t)Btt(r)||(r.children&&(r.children=oRe(r.children)),e.push(r));return e}function Btt(t){return!!Utt.includes(t.name)}function qtt(t,e){let r=e.trim().split(`
`),n=[],i,o={name:"",children:[]};n[0]=o;for(let a of r){let c=Ftt(a),u=a.lastIndexOf("\u2500\u2500 "),l=u>=0?a.substring(u+3):a,d={name:l};if(c===0){i=sRe(t,l),o.name=l;continue}else{for(;c>0&&n[c-1]===void 0;)c--;n[c-1].children===void 0?n[c-1].children=[d]:n[c-1].children?.push(d),n[c]=d}}if(i===void 0)throw new Error("Base URI is undefined");let s=oRe(o.children);return s=s.sort((a,c)=>a.children&&!c.children?-1:1),{chatResponseTree:new sC(s,i),projectName:o.name}}function Htt(t,e,r){let n;r?n=t.map(u=>[e.path,u.path].join("/")):n=t.map(u=>u.path);let i=n[0].split("/")[0],o={name:i,children:[]},s={rootName:o};for(let u of n){let l=u.split("/"),d=i,p=o;for(let f=1;f<l.length;f++){let m=l[f];if(d+=`/${m}`,!s[d]){let h={name:m};p.children===void 0&&(p.children=[]),p.children.push(h),s[d]=h}p=s[d]}}let a;r?a=o.children?.[0].children??[]:a=o.children??[];let c=a?.sort((u,l)=>u.children&&!l.children?-1:1)??[];return new sC(c,e)}var mJ="vscode-copilot-workspace",hJ="vscode-copilot-github-workspace";function sRe(t,e,r=!1){return Zn.from({scheme:r?hJ:mJ,authority:t??"",path:e?`/${e}`:void 0})}var pJ=class{constructor(e,r){this.accessor=e;this.githubContentMetadata=r;this._appliedText="";this._p=Promise.resolve("")}async processResponse(e,r,n,i,o){let s=!1,a="",c=/```filetree\n/,u=r.filter(d=>d.role!=="system"),l=!1;for await(let{delta:d}of n){if(o.isCancellationRequested)break;let p=d.text;this._p=this._p.then(async()=>{let f=e.requestId??"";if(e.response||(e.response={message:this._appliedText,type:"model"}),!p)return this._appliedText;if(e.response.message+=p,this._appliedText+=p,this.githubContentMetadata)this._appliedText.split(`
`).length<3&&i.markdown(p);else{let m=e.request.message,h=this._appliedText.match(/```filetree\n([\s\S]+?)\n```/);if(h&&(s||!l)){s=!1;let[g,v]=this._appliedText.split(h[0]);l||i.markdown(g),a=h[1];let{chatResponseTree:y,projectName:b}=qtt(f,a);i.progress(yb.t("Generating workspace preview...")),i.push(y),i.markdown(v),this.accessor.get(cp).set(f,b,y,{userPrompt:m,projectStructure:a,chatMessages:u})}else if(this._appliedText.match(c)&&!s&&!h){s=!0;let[g,v]=this._appliedText.split(c);a+=v,i.progress(yb.t("Generating workspace preview..."))}else s?a+=p:!s&&!this._appliedText.match(/```/)&&(l=!0,i.markdown(p))}return this._appliedText})}if(await this._p,e.requestId&&this.githubContentMetadata&&this.githubContentMetadata.org&&this.githubContentMetadata.repo&&this.githubContentMetadata.path&&this.githubContentMetadata.githubRepoItems&&!this.accessor.get(cp).getFileTree(e.requestId)){i.progress(yb.t("Generating workspace preview..."));let d=this.githubContentMetadata.path===".",p=d?this.githubContentMetadata.repo:this.githubContentMetadata.path.split("/")[0],f=Htt(this.githubContentMetadata.githubRepoItems,sRe(e.requestId,p,!0),d);i.push(f),i.button(iRe(f)),this.accessor.get(cp).set(e.requestId,p,f,this.githubContentMetadata);let m=encodeURIComponent(`["@workspace /${cJ} ${e.request.message}"]`),h=new v0(yb.t("Hint: You can [regenerate this project without using this sample](command:workbench.action.chat.open?{0}) or use this [setting](command:workbench.action.openSettings?%5B%22github.copilot.chat.useProjectTemplates%22%5D) to configure the behavior.",m));h.isTrusted={enabledCommands:["workbench.action.openSettings","workbench.action.chat.open"]},i.markdown(h)}return this._appliedText}};function fJ(t){return t.scheme==="vscode-copilot-github-workspace"}var Gs=require("vscode"),u2=class{constructor(e){this.contentManager=e;this._onDidChangeFile=new Gs.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event}async stat(e){let r=this.contentManager.get(e);if(!r)throw Gs.FileSystemError.FileNotFound(e);let n=await r.content?.then(i=>i?.length)??0;return{ctime:r.ctime??0,mtime:r.ctime??0,size:n,type:r.children?Gs.FileType.Directory:Gs.FileType.File}}readDirectory(e){let r=this.contentManager.get(e);if(!r)throw Gs.FileSystemError.FileNotFound(e);return r.children?.map(n=>[n.name,n.children?Gs.FileType.Directory:Gs.FileType.File])??[]}async readFile(e){let r=this.contentManager.get(e);if(!r)throw Gs.FileSystemError.FileNotFound(e);let n;try{n=await r.content}catch{}return n??new Uint8Array}watch(e,r){return{dispose(){}}}createDirectory(e){throw Gs.FileSystemError.NoPermissions(e)}writeFile(e,r,n){throw Gs.FileSystemError.NoPermissions(e)}delete(e,r){throw Gs.FileSystemError.NoPermissions(e)}rename(e,r,n){throw Gs.FileSystemError.NoPermissions(r)}copy(e,r,n){throw Gs.FileSystemError.NoPermissions(r)}};function uRe(t,e){return Dt.Disposable.from(Dt.workspace.registerFileSystemProvider(mJ,new u2(t.get(cp)),{isReadonly:new Dt.MarkdownString(Dt.l10n.t(`This file preview was generated by Copilot and may contain surprises or mistakes.

Ask followup questions to refine it, then press Create Workspace.`))}),Dt.workspace.registerFileSystemProvider(hJ,new u2(t.get(cp)),{isReadonly:!0}),Dt.commands.registerCommand("github.copilot.createProject",async r=>{let n=(await Dt.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,openLabel:"Select as Parent Folder"}))?.[0];if(!n)return;let i=r.baseUri.path,o=await Gtt(n,i),s=[];Dt.window.tabGroups.all.forEach(c=>{c.tabs.forEach(u=>{u.input instanceof Dt.TabInputText&&u.input.uri.scheme==="vscode-copilot-workspace"&&s.push(u)})}),Dt.window.tabGroups.close(s,!0);let a=Dt.Uri.joinPath(n,o);try{await Dt.window.withProgress({location:Dt.ProgressLocation.Notification,cancellable:!0},async(c,u)=>{await Dt.workspace.fs.createDirectory(a);async function l(d,p,f){let m=Dt.Uri.joinPath(a,d,p.name);if(p.children?.length||!jwe(p.name)){c.report({message:Dt.l10n.t("Creating folder {0}...",m.path)}),await Dt.workspace.fs.createDirectory(m);for(let h of p.children??[])await l(aRe.posix.join(d,p.name),h,f)}else{c.report({message:Dt.l10n.t("Creating file {0}...",m.path)});let h=await Dt.workspace.fs.readFile(Dt.Uri.joinPath(f,d,p.name));await Dt.workspace.fs.writeFile(m,Buffer.from(h))}}for(let d of r.value)await l("",d,r.baseUri);Dt.interactive.transferActiveChat(a),t.get(ue).getLogger("newIntent").info("Opening folder: "+a.fsPath),await ztt(a),await Dt.commands.executeCommand("vscode.openFolder",a)})}catch(c){let u=`Failed to create workspace: ${o}`;t.get(ue).getLogger("newIntent").error(`${u}
${c.message}`),Dt.window.showErrorMessage(u),await Dt.workspace.fs.delete(a,{recursive:!0})}}))}async function Gtt(t,e){let r=0,n=!0,i=e;for(;n;)try{await Dt.workspace.fs.stat(Dt.Uri.joinPath(t,i)),i=e+"-"+ ++r}catch{n=!1}return i}async function jtt(t){try{return await Dt.workspace.fs.stat(t),!0}catch{return!1}}async function ztt(t){let e=Vtt();if(e)if(await jtt(e)){let r=await Dt.workspace.fs.readFile(e).then(i=>new cRe.TextDecoder().decode(i)),n=JSON.parse(r);n.push(t.toString()),await Dt.workspace.fs.writeFile(e,Buffer.from(JSON.stringify(n,null,2)))}else await Dt.workspace.fs.writeFile(e,Buffer.from(JSON.stringify([t.toString()],null,2)))}function Vtt(){let t=Dt.env.appName.indexOf("Insider")>0||Dt.env.appName.indexOf("Code - OSS Dev")>=0?"Code - Insiders":"Code",e=Dt.Uri.file(process.env.HOME||(process.env.USERPROFILE?process.env.USERPROFILE:""));switch(process.platform){case"darwin":return Dt.Uri.joinPath(e,"Library","Application Support",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"linux":return Dt.Uri.joinPath(e,".config",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"win32":return process.env.APPDATA?Dt.Uri.joinPath(Dt.Uri.file(process.env.APPDATA),t,"User","workspaceStorage","aiGeneratedWorkspaces.json"):void 0;default:return}}async function lRe(t,e){let r=t.get(Tt),n=t.get(Ko),i=t.get(hi),o=t.get(Ze),s=t.get(ao),a=t.get(h_),c=t.get(ei),u=o.getWorkspaceFolders().map(v=>v.fsPath+"/"),l=o.notebookDocuments.map(v=>v.uri.fsPath),p=(await Promise.all(e.map(v=>i.getWorkspaceSymbols(v)))).flat().map(v=>({name:v.name,kind:v.kind,containerName:v.containerName,filePath:v.location.uri.fsPath,start:v.location.range.start,end:v.location.range.end})),f=r.activeTextEditor?n.getDiagnostics(r.activeTextEditor.document.uri).map(v=>({start:v.range.start,end:v.range.end,message:v.message,severity:v.severity,relatedInformation:v.relatedInformation?.map($tt)})):[],m=r.activeTextEditor?{selections:r.activeTextEditor?.selections.map(v=>({anchor:v.anchor,active:v.active,isReversed:v.isReversed}))??[],documentFilePath:r.activeTextEditor?.document.uri.fsPath??"",visibleRanges:r.activeTextEditor?.visibleRanges.map(v=>({start:v.start,end:v.end}))??[],languageId:r.activeTextEditor?.document.languageId??"javascript"}:void 0,h=s.terminalLastCommand?{commandLine:s.terminalLastCommand.commandLine,cwd:typeof s.terminalLastCommand.cwd=="object"?s.terminalLastCommand.cwd.toString():s.terminalLastCommand.cwd,exitCode:s.terminalLastCommand.exitCode,output:s.terminalLastCommand.output}:void 0;return{workspaceFoldersFilePaths:u,symbols:p,activeFileDiagnostics:f,activeTextEditor:m,debugConsoleOutput:a.consoleOutput,terminalBuffer:s.terminalBuffer,terminalLastCommand:h,terminalSelection:s.terminalSelection,terminalShellType:s.terminalShellType,repoContexts:c.repositories,notebookDocumentFilePaths:l,activeNotebookEditor:void 0}}function $tt(t){return{filePath:t.location.uri.fsPath,start:t.location.range.start,end:t.location.range.end,message:t.message}}var gJ=oe("IConversationFeature"),LE=class{constructor(e,r,n,i,o,s,a,c,u,l,d,p){this.accessor=e;this.instantionService=r;this.configurationService=i;this.conversationOptions=o;this.chatAgentService=s;this.telemetryService=a;this.copilotTokenNotifier=u;this.embeddingIndex=l;this.devContainerConfigurationService=d;this.gitCommitMessageService=p;this._disposables=new qt;this._activatedDisposables=new qt;this.logger=n.getLogger("chat"),this._enabled=!1,this._activated=!1,this.registerCopilotTokenListener(),this._disposables.add(c.onDidGitHubTokenChanged(async()=>{await c.getAnyGitHubToken()?(this.logger.debug("onDidChangeSessionsHandler",await c.getCopilotToken(e)),this.activated=!0):(this.logger.debug("onDidChangeSessionsHandler",void 0),this.activated=!1)}))}get enabled(){return this._enabled}set enabled(e){e&&!this.activated&&(this.activated=!0),this._enabled=e,Le.commands.executeCommand("setContext","github.copilot.interactiveSession.disabled",!e)}get activated(){return this._activated}set activated(e){if(this._activated!==e)if(this._activated=e,Le.commands.executeCommand("setContext","github.copilot-chat.activated",e),!e)this._activatedDisposables.clear();else{let r=this.conversationOptions;this._activatedDisposables.add(this.registerProviders()),this._activatedDisposables.add(this.registerCommands(r)),this._activatedDisposables.add(this.registerRelatedInformationProviders()),this._activatedDisposables.add(this.registerParticipants(r))}}dispose(){this._activated=!1,this._activatedDisposables.dispose(),this._disposables?.dispose()}[Symbol.dispose](){this.dispose()}registerParticipants(e){return this.chatAgentService.register(e)}registerProviders(){let e=new qt;try{"registerMappedEditsProvider"in Le.chat&&e.add(Le.chat.registerMappedEditsProvider("*",new U8)),"registerNewSymbolNamesProvider"in Le.languages&&e.add(Le.languages.registerNewSymbolNamesProvider({language:"*"},this.instantionService.createInstance(sp))),e.add(Le.workspace.registerAITextSearchProvider("file",this.instantionService.createInstance(DE)))}catch(r){this.logger.error("Registration of interactive providers failed:",r.toString())}return e}registerCommands(e){let r=new qt;return[Le.commands.registerCommand("github.copilot.interactiveSession.feedback",async()=>Le.env.openExternal(Le.Uri.parse(Q6()))),Le.commands.registerCommand("github.copilot.debug.workbenchState",async()=>{let n=await Le.window.showInputBox({prompt:"Enter a comma-separated list of symbol queries. Can be left blank if not using WorkspaceSymbols"}),i=await Le.window.showInputBox({prompt:"Enter a file name - .state.json will be appended as the extension",value:"workspaceState"});if(!i)return;let o=await lRe(this.accessor,n?.split(",")??[]),s=Le.workspace.workspaceFolders?.[0].uri;if(!s)return;let a=Le.Uri.joinPath(s,`${i}.state.json`),c=JSON.stringify(o,null,2);c=c.replace(new RegExp(`${s.fsPath}/`,"g"),"./"),Le.workspace.fs.writeFile(a,Buffer.from(c))}),Le.commands.registerCommand("github.copilot.terminal.explainTerminalSelection",async()=>this.triggerTerminalChat({query:`/${gb.intentName} #terminalSelection`})),Le.commands.registerCommand("github.copilot.terminal.explainTerminalSelectionContextMenu",()=>Le.commands.executeCommand("github.copilot.terminal.explainTerminalSelection")),Le.commands.registerCommand("github.copilot.terminal.explainTerminalLastCommand",async()=>this.triggerTerminalChat({query:`/${gb.intentName} #terminalLastCommand`})),Le.commands.registerCommand("github.copilot.terminal.generateCommitMessage",async()=>{let n=Le.workspace.workspaceFolders;if(!n?.length)return;let i=n.length===1?n[0].uri:await Le.window.showWorkspaceFolderPick().then(a=>a?.uri);if(!i)return;let o=this.gitCommitMessageService.getRepository(i);if(!o)return;let s=await this.gitCommitMessageService.generateCommitMessage(o,Vr.None);if(s){let c=`git commit -m "${s.replace(/"/g,'\\"').replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}"`;Le.window.activeTerminal?.sendText(c,!1)}}),Le.commands.registerCommand("github.copilot.git.generateCommitMessage",async(n,i,o)=>{let s=this.gitCommitMessageService.getRepository(n);if(!s)return;let a=await this.gitCommitMessageService.generateCommitMessage(s,o);a&&(s.inputBox.value=a)}),Le.commands.registerCommand("github.copilot.devcontainer.generateDevContainerConfig",async(n,i=new Le.CancellationTokenSource().token)=>this.devContainerConfigurationService.generateConfiguration(n,i)),Swe(this.accessor),Uwe(this.telemetryService),bIe(n=>this.instantionService.createInstance(AE,n)),Dwe(this.accessor),this.registerTerminalQuickFixProviders(),Wtt(this.accessor,e),uRe(this.accessor,e),Qtt(this.accessor),fwe(this.accessor),Mwe(this.accessor),Ktt(),Ytt()].forEach(n=>r.add(n)),r}async triggerTerminalChat(e){let r=this.configurationService.getConfig(Ae.TerminalChatLocation),n;switch(r){case"quickChat":n="workbench.action.quickchat.toggle",e.query=`@${u_} `+e.query;break;case"terminal":n="workbench.action.terminal.chat.start";break;case"chatView":default:n="workbench.action.chat.open",e.query=`@${u_} `+e.query;break}await Le.commands.executeCommand(n,e)}registerRelatedInformationProviders(){let e=new qt;return[Le.ai.registerRelatedInformationProvider(Le.RelatedInformationType.CommandInformation,this.embeddingIndex.commandIdIndex),Le.ai.registerRelatedInformationProvider(Le.RelatedInformationType.SettingInformation,this.embeddingIndex.settingsIndex)].forEach(r=>e.add(r)),e}registerCopilotTokenListener(){this._disposables.add(this.copilotTokenNotifier.onCopilotToken(e=>{this.logger.info(`copilot token chat_enabled: ${e.envelope.chat_enabled}`),this.enabled=e.envelope.chat_enabled??!1}))}registerTerminalQuickFixProviders(){let e=new qt;return e.add(Le.window.registerTerminalQuickFixProvider("copilot-chat.fixWithCopilot",{provideTerminalQuickFixes:(r,n)=>this.enabled?[{command:"github.copilot.terminal.explainTerminalLastCommand",title:Le.l10n.t("Explain using Copilot")}]:[]})),e.add(Le.window.registerTerminalQuickFixProvider("copilot-chat.generateCommitMessage",{provideTerminalQuickFixes:(r,n)=>this.enabled?[{command:"github.copilot.terminal.generateCommitMessage",title:Le.l10n.t("Generate Commit Message")}]:[]})),e}};LE=fe([ie(0,ct),ie(1,zi),ie(2,ue),ie(3,ke),ie(4,Vi),ie(5,lP),ie(6,Ee),ie(7,Et),ie(8,Co),ie(9,qm),ie(10,qP),ie(11,ek)],LE);function Wtt(t,e){let r=t.get(ke);return Le.commands.registerCommand("github.copilot.newNotebook",async n=>{let i=r.getConfig(Ae.NotebookIterativeImproving);await Le.window.withProgress({location:Le.ProgressLocation.Notification},async o=>{let s=new Le.NotebookData([]);s.metadata={custom:{cells:[],metadata:{orig_nbformat:4},nbformat:4,nbformat_minor:2}};let a=await Le.workspace.openNotebookDocument("jupyter-notebook",s),c=await Le.window.showNotebookDocument(a);o.report({message:Le.l10n.t("Generating notebook...")});let u=n.outline.description,l=n.outline.sections,d=await t.get(Ue).getUserRequestEndpoint(2);for(let p of l){let f=c.notebook.getCells().filter(S=>S.kind===Le.NotebookCellKind.Code).map(S=>S.document.getText()).join(`
`),m=new Le.CancellationTokenSource;o.report({message:Le.l10n.t('Generating section "{0}"...',p.title)});let h=await Nwe(t,d,e,n.turn,u,p,f,m.token);if(!h)return;h=h.trim();let g=/```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/.exec(h);if(g&&g.length>2&&(h=g[2]),i){o.report({message:Le.l10n.t('Improving code for section "{0}"...',p.title)});let S=await Lwe(t,d,e,u,p,f,h,m.token);if(!S)return;h=S}let v=new Le.NotebookCellData(Le.NotebookCellKind.Markup,`# ${p.title}
${p.content}`,"markdown"),y=new Le.NotebookCellData(Le.NotebookCellKind.Code,h,"python"),b=Le.NotebookEdit.insertCells(a.cellCount,[v,y]),x=new Le.WorkspaceEdit;x.set(a.uri,[b]),await Le.workspace.applyEdit(x),c.revealRange(new Le.NotebookRange(a.cellCount-1,a.cellCount),Le.NotebookEditorRevealType.Default),c.selection=new Le.NotebookRange(a.cellCount-1,a.cellCount)}o.report({increment:100})})})}function Ktt(){return Le.commands.registerCommand("github.copilot.executeSearch",async t=>{let e=t.filesToExclude.length>0||t.filesToInclude.length>0;Le.commands.executeCommand("workbench.view.search.focus").then(()=>Le.commands.executeCommand("workbench.action.search.toggleQueryDetails",{show:e})),Le.commands.executeCommand("workbench.action.findInFiles",t)})}function Ytt(){return Le.commands.registerCommand("github.copilot.ghpr.applySuggestion",async(t,e)=>{let r=o=>!!(o&&"body"in o&&(o.body instanceof Le.MarkdownString||typeof o.body=="string")),n=o=>"range"in o&&o.range instanceof Le.Range;if(!r(t)||!n(e))return;let i=t.body instanceof Le.MarkdownString?t.body.value:t.body;await Le.commands.executeCommand("vscode.editorChat.start",{initialRange:e.range,message:i,autoSend:!0})})}function Qtt(t){return new F8(t)}var Y8=W(require("vscode"));var vJ="---------------------------------",OE=class{constructor(e){this.accessor=e}async _canReport(){return!(!this.accessor.get(ke).getConfig(Ae.DebugReportFeedback)||!(await this.accessor.get(Et).getCopilotToken(this.accessor))?.isInternal)}async reportInline(e,r,n){if(!await this._canReport())return;let i=e.getLatestTurn();if(!i)return;let o=r.intent?this._embedCodeblock("INTENT",JSON.stringify(r.intent,null,"	")):"",s=this._embedCodeblock("CONTEXT",JSON.stringify({document:r.document.uri.toString(),fileIndentInfo:r.fileIndentInfo,language:r.language,wholeRange:r.wholeRange,selection:r.selection},null,"	")),a="",c=i.chatMessages;if(c&&c.length>0){let f=c.map(m=>this._embedCodeblock(m.role.toUpperCase(),m.content)).join(`
`);a=`	${vJ}
${this._headerSeparator()}PROMPT MESSAGES:
${f}`}else a=this._embedCodeblock(i.request.type.toUpperCase(),i.request.message);let u=this._embedCodeblock("ASSISTANT",i.response?.message||""),l=this._embedCodeblock("Parsed response",JSON.stringify(n,null,"	")),p=`
<details><summary>Prompt Details</summary>
<p>

${`${o}
${s}
${a}
${u}
${l}
`}

</p>
</details>
`;await this._reportIssue("Feedback for inline chat",p)}async reportChat(e){if(!await this._canReport())return;let r="",n=e.chatMessages;if(n&&n.length>0){let c=n.map(u=>this._embedCodeblock(u.role.toUpperCase(),u.content)).join(`
`);r=`	${vJ}
${this._headerSeparator()}PROMPT MESSAGES:
${c}`}else r=this._embedCodeblock(e.request.type.toUpperCase(),e.request.message);let i=e.intentInvocation?.intent?this._embedCodeblock("INTENT",`[${e.intentInvocation.intent.id}] ${e.intentInvocation.intent.description}`):"",o=this._embedCodeblock("ASSISTANT",e.response?.message||""),a=`
<details><summary>Prompt Details</summary>
<p>

${`${i}
${r}
${o}
`}

</p>
</details>`;await this._reportIssue("Feedback for sidebar chat",a)}_embedCodeblock(e,r){let n=this._bodySeparator()+r.split(`
`).join(`
${this._bodySeparator()}`);return`	${vJ}
${this._headerSeparator()}${e}:
${n}`}_headerSeparator(){return"	"}_bodySeparator(){return"		"}async _reportIssue(e,r){await Y8.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:nb,issueTitle:e,data:r,issueBody:"",uri:Y8.Uri.parse("https://github.com/microsoft/vscode-copilot")})}};OE=fe([ie(0,ct)],OE);var Bn=W(require("vscode"));var ME=W(st()),Q8=W(require("vscode"));var l2=class extends K{render(){let e=[],r=[];for(let n of this.props.messages)switch(n.role){case Q8.LanguageModelChatMessageRole.System:e.push(n.content);continue;case Q8.LanguageModelChatMessageRole.Assistant:r.push(vscpp(ME.AssistantMessage,null,n.content));continue;case Q8.LanguageModelChatMessageRole.User:r.push(vscpp(ME.UserMessage,{name:n.name},n.content));continue}return vscpp(vscppf,null,vscpp(ME.SystemMessage,null,this.props.noSafety?e:vscpp(vscppf,null,vscpp(Br,null),vscpp(di,null),vscpp("br",null),e.join(`
`))),r)}};async function dRe(t){let e=t.get(zi),r=t.get(ge),n=t.get(ke),i=t.get(Ue),o=t.get(ue).getLogger("registerChatResponseProvider"),{extensionMode:s,subscriptions:a}=t.get(xr),c=new qt;if(a.push(c),s===Sa.Test){o.warn("Chat response providers are not available in test mode");return}let u=await Bu(n);if(!u){o.error("Auth token not present when we expected it to be");return}let l=new Map,d=async()=>{let h=new Map,g=await i.getAllChatEndpoints(),v=new Set;o.debug("UPDATING language models");for(let y of g){if(c.isDisposed)break;if(v.has(y.family))continue;v.add(y.family);let b=l.get(y.model);if(b){h.set(y.model,b);continue}let x=await new Je(y,l2,{noSafety:!1,messages:[]},r,t).countTokens(),S={vendor:"copilot",name:y.name,family:y.family,version:y.version,tokens:0,maxInputTokens:4096-x,maxOutputTokens:4096/2,auth:{label:u.account.label}},T=e.createInstance(d2,y,S),L=Bn.chat.registerChatResponseProvider(y.model,T,S);h.set(y.model,{endpoint:y,dispo:L}),o.debug("ADDED language model",y.model)}for(let[y,b]of l)h.has(y)||(b.dispo.dispose(),o.debug("REMOVED language model",y));l=h,c.isDisposed||(p=setTimeout(d,1e3*60*15))},p;await d(),c.add(Ac(()=>{clearInterval(p);for(let h of l.values())h.dispo.dispose()}));let f=t.get(Ws),m=await t.get(Ue).getEmbeddingsEndpoint();c.add(Bn.lm.registerEmbeddingsProvider(`copilot.${m.model}`,new class{async provideEmbeddings(h,g){let v=await f.computeEmbeddings(m,h,{parallelism:2},g);if(!v)throw new Error("Failed to compute embeddings");return v.map(y=>({values:y.slice(0)}))}})),o.debug("Registered language models and embeddings")}var d2=class extends hr{constructor(r,n,i,o,s,a,c,u){super();this._endpoint=r;this._metadata=n;this._accessor=i;this._expService=o;this._telemetryService=s;this._chatMLFetcher=a;this._tokenizer=c;this._blockedExtensionService=u;this._onDidReceiveLanguageModelResponse2=this._register(new gr);this.onDidReceiveLanguageModelResponse2=this._onDidReceiveLanguageModelResponse2.event;this._register(this._chatMLFetcher.onDidMakeChatMLRequest(({model:l,source:d,tokenCount:p})=>{l===this._endpoint.model&&this._onDidReceiveLanguageModelResponse2.fire({extensionId:d?.extensionId??nb,participant:d?.agent,tokenCount:p})}))}async provideLanguageModelResponse(r,n,i,o,s){let a=Bn.extensions.getExtension(i,!0);if(!a||typeof a.packageJSON.version!="string")throw new Error("Invalid extension information");let c=a.packageJSON.version,u=Bn.l10n.t("The extension has been temporarily blocked due to making too many requests. Please try again later.");if(this._blockedExtensionService.isExtensionBlocked(i))throw Bn.LanguageModelError.Blocked(u);let l=await this._expService.getTreatmentVariableAsync("vscode","copilotchat.languageModelControlList"),d=pRe.extractCustomTokenLimit(l??"",i)??this._metadata.maxInputTokens,{messages:p,tokenCount:f}=await new Je(this._endpoint,l2,{noSafety:!1,messages:r},this._tokenizer,this._accessor).render();if(this._telemetryService.sendMSFTTelemetryEvent("languagemodelrequest",{extensionId:i,extensionVersion:c,model:this._endpoint.model},{tokenCount:f,tokenLimit:d}),f>d)throw new Error("Message exceeds token limit.");let m=new Proxy(this._endpoint,{get:function(b,x,S){return x==="getExtraHeaders"?function(){return{...b.getExtraHeaders?.()??{},"x-onbehalf-extension-id":`${i}/${c}`}}:Reflect.get(b,x,S)}}),h=async(b,x,S)=>{o.report({part:S.text,index:x})},g=yJ.options[this._endpoint.model].convert(n),v={messageSource:`api.${i}`},y=await this._chatMLFetcher.fetchMany(p,h,s,3,m,{extensionId:i},g,v,{intent:!0});if(y.type!=="success")throw y.type==="extensionBlocked"?(this._blockedExtensionService.reportBlockedExtension(i,y.retryAfter),Bn.LanguageModelError.Blocked(u)):new Error(y.reason)}async provideLanguageModelResponse2(r,n,i,o,s){let a=r.map(c=>c instanceof Bn.LanguageModelChatUserMessage?new Bn.LanguageModelChatMessage2(Bn.LanguageModelChatMessageRole.User,c.content,c.name):c instanceof Bn.LanguageModelChatAssistantMessage?new Bn.LanguageModelChatMessage2(Bn.LanguageModelChatMessageRole.Assistant,c.content,c.name):new Bn.LanguageModelChatMessage2(Bn.LanguageModelChatMessageRole.System,c.content));return this.provideLanguageModelResponse(a,n,i,o,s)}async provideTokenCount(r){if(typeof r=="string")return this._tokenizer.tokenLength(r);{let n;return r instanceof Bn.LanguageModelChatUserMessage?n={role:"user",content:r.content,name:r.name}:r instanceof Bn.LanguageModelChatAssistantMessage?n={role:"assistant",content:r.content,name:r.name}:n={role:"system",content:r.content},this._tokenizer.countMessageTokens(n)}}};d2=fe([ie(2,ct),ie(3,Mt),ie(4,Ee),ie(5,Jt),ie(6,ge),ie(7,uP)],d2);var pRe;(e=>{function t(r,n){let i=r.indexOf(n);if(i<0)return;let o=i+n.length,s=r.indexOf(",",o);s<0&&(s=r.length);let a=Number(r.substring(o,s));if(!isNaN(a))return a*1e3}e.extractCustomTokenLimit=t})(pRe||={});function Xtt(...t){return e=>t.some(r=>r(e))}var yJ=class t{constructor(e){this._description=e}static{this._defaultDesc={stop:Xtt(kA,GT),temperature:r_,max_tokens:r_,frequency_penalty:r_,presence_penalty:r_}}static{this.options={"gpt-3.5-turbo":new t({...this._defaultDesc}),"gpt-4":new t({...this._defaultDesc}),"copilot-preview-gpt35-centralus":new t({...this._defaultDesc}),"copilot-preview-gpt4-centralus":new t({...this._defaultDesc}),"gpt-4-0125-adaf089e":new t({...this._defaultDesc}),"code-llama":new t({}),"gpt4o-offline":new t({...this._defaultDesc})}}convert(e){let r={};for(let n in this._description){let i=this._description[n],o=e[n];o!=null&&i(o)&&(r[n]=o)}return r}};var SRe=require("crypto"),SJ=W(require("path")),rM=W(require("util")),pt=require("vscode");var fRe=require("crypto");function mRe(t){if(!t)throw new Error("HMAC secret is not defined");let e=Math.floor(Date.now()/1e3).toString(),r=(0,fRe.createHmac)("sha256",t).update(e).digest("hex");return`${e}.${r}`}var X8=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.newText=[];this.tokens=[];this.text_offset=[]}append(e){e.text&&(this.text.push(e.text),this.newText.push(e.text)),e.delta?.content&&(this.text.push(e.delta.content),this.newText.push(e.delta.content)),e.delta?.function_call&&(this.text.push(e.delta.function_call.arguments),this.newText.push(e.delta.function_call.arguments)),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[]))}flush(){let e=this.newText.join("");return this.newText=[],e}};function Ztt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!==""),r]}var J8=class t{constructor(e,r,n,i,o,s){this.telemetryService=r;this.expectedNumChoices=n;this.response=i;this.body=o;this.cancellationToken=s;this.requestId=MR(this.response);this.stats=new bJ(this.expectedNumChoices);this.solutions={};this.functionCalls={};this.functionCallName=void 0;this.logger=e.getLogger("streamChoices")}static async create(e,r,n,i,o){let s=await i.body();return s.setEncoding("utf8"),new t(e,r,n,i,s,o)}async*processSSE(e=async()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),this.logger.info(`request done: requestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),this.logger.debug(`request stats: ${this.stats}`)}}async*processSSEInner(e){let r="",n=!1;e:for await(let i of this.body){if(this.maybeCancel("after awaiting body chunk"))return;this.logger.debug("chunk",i.toString());let[o,s]=Ztt(r+i.toString());r=s;let a=!1;for(let c of o){let u=c.slice(5).trim();if(u==="[DONE]"){yield*this.finishSolutions();return}let l;try{l=JSON.parse(u)}catch{this.logger.error(`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,c),tm(this.telemetryService,`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,c);continue}if(l.copilot_confirmation&&ert(l.copilot_confirmation)&&await e("",0,{text:"",copilotConfirmation:l.copilot_confirmation}),!l.choices){!l.copilot_references&&!l.copilot_confirmation&&(l.error!==void 0?(this.logger.error(`Error in response for request id ${this.requestId.headerRequestId}:`,l.error.message),tm(this.telemetryService,`Error in response for request id ${this.requestId.headerRequestId}:`,l.error.message)):(this.logger.error(`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`),tm(this.telemetryService,`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`))),l.copilot_errors&&await e("",0,{text:"",copilotErrors:l.copilot_errors});continue}if(this.requestId.created===0&&(this.requestId=MR(this.response,l),this.requestId.created===0&&l.choices?.length&&(this.logger.error(`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId),tm(this.telemetryService,`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId))),this.allSolutionsDone())break e;for(let d=0;d<l.choices.length;d++){let p=l.choices[d];this.logger.debug("choice",p),this.stats.add(p.index),p.index in this.solutions||(this.solutions[p.index]=new X8);let f=this.solutions[p.index];if(f===null)continue;let m,h=async(v,y,b,x)=>(v&&(!Array.isArray(v)||!v.every(S=>OCe(S)))&&(v=void 0),m=await e(f.text.join(""),p.index,{text:f.flush(),codeVulnAnnotations:v,copilotReferences:y,copilotFunctionCalls:b,copilotErrors:x}),m!==void 0&&(n=!0),this.maybeCancel("after awaiting finishedCb"));if(p.delta?.annotations?.CodeVulnerability){if(await h()||!n&&(f.append(p),await h(p.delta.annotations.CodeVulnerability)))continue}else if(p.delta?.role==="function"){if(p.delta.content)try{let v=JSON.parse(p.delta.content);if(Array.isArray(v)&&await h(void 0,v))continue}catch(v){this.logger.error(`Error parsing function references: ${JSON.stringify(v)}`)}}else if(p.delta?.function_call)a=!0,this.functionCallName??=p.delta.function_call.name,this.functionCalls[this.functionCallName]??=new X8,this.functionCalls[this.functionCallName].append(p);else if((p.finish_reason==="function_call"||p.finish_reason==="stop")&&this.functionCallName){let v=this.functionCalls[this.functionCallName];try{if(await h(void 0,void 0,[{name:this.functionCallName,arguments:v.flush()}]))continue}catch{}this.functionCalls[this.functionCallName]=null,this.functionCallName=void 0;continue}else if(f.append(p),await h())continue;if(p.finish_reason||m!==void 0){if(this.stats.markYielded(p.index),yield{solution:f,finishOffset:m,reason:p.finish_reason??"client-trimmed",filterReason:trt(p),requestId:this.requestId,index:p.index},this.maybeCancel("after yielding finished choice"))return;a||(this.solutions[p.index]=null)}}}}for(let[i,o]of Object.entries(this.solutions)){let s=Number(i);if(o!==null&&(this.stats.markYielded(s),yield{solution:o,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0&&!n)try{let i=JSON.parse(r);i.error!==void 0&&(this.logger.error(`Error in response: ${i.error.message}`,i.error),tm(this.telemetryService,`Error in response: ${i.error.message}`,i.error))}catch{this.logger.error(`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`),tm(this.telemetryService,`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`)}}async*finishSolutions(){for(let[e,r]of Object.entries(this.solutions)){let n=Number(e);if(r!==null&&(this.stats.markYielded(n),yield{solution:r,finishOffset:void 0,reason:"DONE",requestId:this.requestId,index:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(this.logger.debug("Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body.destroy()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length===this.expectedNumChoices&&e.every(r=>r===null)}};function ert(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}function hRe(t){let r={text:t.text.join(""),tokens:t.text};if(t.logprobs.length===0)return r;let n=t.logprobs.reduce((a,c)=>a.concat(c),[]),i=t.top_logprobs.reduce((a,c)=>a.concat(c),[]),o=t.text_offset.reduce((a,c)=>a.concat(c),[]),s=t.tokens.reduce((a,c)=>a.concat(c),[]);return{...r,logprobs:{token_logprobs:n,top_logprobs:i,text_offset:o,tokens:s}}}function trt(t){if(t.finish_reason!=="content_filter")return;if(!!t.delta?.annotations?.TextCopyright)return"snippy";if(t.content_filter_results){for(let r of Object.keys(t.content_filter_results))if(t.content_filter_results[r]?.filtered)return r}}var bJ=class{constructor(e){this.choices=new Map;for(let r=0;r<e;r++)this.choices.set(r,new p2)}add(e){let r=this.choices.get(e)??new p2;r.increment(),this.choices.set(e,r)}markYielded(e){let r=this.choices.get(e)??new p2;r.markYielded(),this.choices.set(e,r)}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},p2=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};function tm(t,e,r){let n=[e,r],i=n.length>0?JSON.stringify(n):"no msg",o=Ar.createAndMarkAsIssued({context:"fetch",level:KT[3],message:i});t.sendRestrictedGHTelemetryErrorEvent("log",o.properties,o.measurements);let s=Ar.createAndMarkAsIssued({context:"fetch",level:KT[3],message:"[redacted]"});t.sendGHTelemetryErrorEvent("log",s.properties,s.measurements)}function _J(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});t.sendRestrictedGHTelemetryEvent("engine.messages",n.properties,n.measurements)}function rrt(t,e,r,n,i,o,s,a,c){return _J(t,[e],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:s,filterReason:a,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:c}}function gRe(t,e,r,n){let i=e.getLogger("streamMessages"),o=r.solution.text.join(""),s=!1;r.finishOffset!==void 0&&(i.debug(`message ${r.index}: early finish at offset ${r.finishOffset}`),o=o.substring(0,r.finishOffset),s=!0),i.info(`message ${r.index} returned. finish reason: [${r.reason}]`),i.debug(`message ${r.index} details: finishOffset: [${r.finishOffset}] completionId: [{${r.requestId.completionId}}] created: [{${r.requestId.created}}]`);let a=hRe(r.solution),c={role:"assistant",content:o};return rrt(t,c,a,r.index,r.requestId,s,r.reason,r.filterReason,n)}async function vRe(t,e){let n=(await t.get(Et).getCopilotToken(t)).isInternal?t.get(ke).getConfig(Ae.DebugOverrideChatMaxTokenNum):0;if(n>0)return n;switch(e){case"gpt-3.5-turbo":return 7168;case"gpt-4":return 3072;default:return 3072}}async function nrt(t,e,r,n,i,o,s){let c=(await J8.create(e,t,n,r,s)).processSSE(i);return Uu.map(c,l=>{let d=l.reason??"client-trimmed",p=o.extendedBy({completionChoiceFinishReason:d});return t.sendGHTelemetryEvent("completion.finishReason",p.properties,p.measurements),gRe(t,e,l,o)})}var FE=class{constructor(e,r,n,i){this.url=e;this.disableSnippy=i;this._maxTokens=n,this.model=r.id,this.name=r.name,this.version=r.version,this.family=r.capabilities.family}get modelMaxPromptTokens(){return this._maxTokens}interceptBody(e){e&&this.disableSnippy&&(e.snippy={enabled:!1},Object.keys(e).forEach(r=>{r.startsWith("intent")&&delete e[r]}))}getExtraHeaders(){let e={};return this.disableSnippy&&(e["Editor-Plugin-Version"]="simulation-tests-plugin/2",e["Editor-Version"]="simulation-tests-editor/1.85",e["Request-Hmac"]=mRe(process.env.HMAC_SECRET)),e}async processResponseFromChatEndpoint(e,r,n,i,o,s,a){return nrt(e,r,n,i,o,s,a)}};var Z8=oe("IPromptVariablesService");var f2=new Map,tM=class{constructor(e){this.label=e;this.iconPath=new pt.ThemeIcon("lock")}};async function ERe(t){let e=t.get(xr);e.subscriptions.push(new pt.Disposable(()=>f2.forEach(r=>r.dispose()))),e.subscriptions.push(pt.commands.registerCommand(TRe,async()=>{let r=pt.window.createQuickPick();r.placeholder=pt.l10n.t("Select a knowledge base"),r.busy=!0,r.show(),r.items=await xRe(t),r.busy=!1;let n=await new Promise((i,o)=>{r.canSelectMany=!1;let s=!1;r.onDidAccept(async()=>{r.selectedItems[0]instanceof tM?(r.busy=!0,await t.get(Et).getPermissiveGitHubToken({forceNewSession:!0}),s=!0,m2=!1,bb?.clear(),r.items=await xRe(t),r.busy=!1,r.show()):(i(r.selectedItems[0]),r.hide())}),r.onDidHide(()=>{s||i(void 0)})});return r.dispose(),n?.insertText})),yRe(t),e.subscriptions.push(t.get(Et).onDidGitHubTokenChanged(()=>{yRe(t)}))}var TRe="github.copilot.chat.selectKnowledgeBase",EJ="github",eM;async function yRe(t){return eM||(eM=irt(t)),eM.finally(()=>eM=void 0)}async function irt(t){let e=t.get(ue).getLogger("RemoteAgents"),r=t.get(ke).getConfig(Ae.AgentsEndpointUrl),n=new Set(f2.keys());try{let i=t.get(Et),o=await i.getAnyGitHubToken();if(!o){e.warn("Unable to fetch remote agents because user is not signed in.");return}let a=await(await t.get(Mr).fetch(`${r}/agents`,{method:"GET",headers:{Authorization:rM.format("Bearer %s",o),...t.get(St).getEditorVersionHeaders()}})).text(),c;try{if(c=JSON.parse(a).agents,!Array.isArray(c))throw new Error("Expected 'agents' to be an array")}catch(l){a.includes("access denied")||e.warn(`Invalid remote agent response: ${a} (${l})`);return}for(let l of c)n.delete(l.slug)||f2.set(l.slug,bRe(t,e,l,r));(await i.getCopilotToken(t)).sku?.startsWith("copilot_enterprise")&&bRe(t,e,null,r)}catch(i){e.warn(`Failed to load remote slash commands: ${i}`)}for(let i of n)f2.get(i).dispose(),f2.delete(i)}function ort(t){return[...t.acceptedConfirmationData?.map(r=>({state:"accepted",confirmation:r}))??[],...t.rejectedConfirmationData?.map(r=>({state:"dismissed",confirmation:r}))??[]]}function srt(t,e){let r=[];for(let n of e.history)if(n.participant===t&&(n instanceof pt.ChatRequestTurn&&r.push({role:"user",content:n.prompt}),n instanceof pt.ChatResponseTurn)){let i=n.result.metadata?.copilot_references,o=n.response.map(s=>s instanceof pt.ChatResponseMarkdownPart?s.value.value:"content"in s?s.content:null).filter(s=>!!s).join("");r.push({role:"assistant",content:o,...i?{copilot_references:i}:void 0})}return r}async function art(t,e,r,n,i,o){let s=[],a=[],c=!1;for(let l of o)if(l.value instanceof Zn){if(await r.isCopilotIgnored(l.value)){c=!0;continue}let d=await t.openTextDocument(l.value);s.push({type:"client.file",data:{language:d.languageId,content:d.getText()},id:SJ.basename(l.value.path)}),a.push({variableName:l.name,value:l.value})}else if(l.name==="selection"){let{activeTextEditor:d}=e;if(!d)throw new Error(pt.l10n.t({message:"Please open a text editor to use the `#selection` variable.",comment:"{Locked='`#selection`'}"}));if(await r.isCopilotIgnored(d.document.uri)){c=!0;continue}let p=d.selection.start.line,f=d.selection.isEmpty?new pt.Range(new pt.Position(p,0),new pt.Position(p+1,0)):d.selection;s.push({type:"client.selection",data:{start:{line:f.start.line,col:f.start.character},end:{line:f.end.line,col:f.end.character},content:d.document.getText(f)},id:SJ.basename(d.document.uri.path)}),a.push({variableName:l.name,value:new pt.Location(d.document.uri,f)})}n.isInitialized||await n.initialize();let u=n.repositories;for(let l of u){let d=b_(l);if(!d)continue;let[p,f]=d?.split("/");s.push({type:"github.repository",id:d,data:{type:"repository",name:f,ownerLogin:p,id:(await i.getRepositoryInfo(p,f)).id}})}return{clientReferences:s,vscodeReferences:a,hasIgnoredFiles:c}}function crt(t){let e;for(let r of t.history)if(r instanceof pt.ChatResponseTurn){let n=r.result.metadata?.sessionId;if(typeof n=="string"){e=n;break}}return e??bn()}function bRe(t,e,r,n){let i=new qt,o=`github.copilot-dynamic.${r?.slug??"platform"}`,s=r?.slug??EJ,a=r?.description??"Get answers grounded in web search, code search, and your enterprise's knowledge bases",c={name:s,description:a,publisherName:r?.owner_login??"GitHub",fullName:r?.name??"GitHub"},u=i.add(pt.chat.createDynamicChatParticipant(o,c,async(l,d,p,f)=>{let m=crt(d),h=bn(),g={sessionId:m,responseId:h,agentId:o,command:l.command};try{let v=new FE(r?`${n}/agents/${r.slug}?chat`:`${n}/agents/chat`,{capabilities:{type:"chat",family:"remote"},id:"gpt-3.5-turbo",name:"Remote Agents",version:"1.0"},4096),b=await t.get(Z8).resolveVariablesInPrompt(l.prompt,l.references),x=[],{copilot_skills:S,copilot_references:T}=await drt(t,s,l);T&&x.push(...T);let L=!1;try{let E=await art(t.get(Ze),t.get(Tt),t.get(De),t.get(ei),t.get(Oc),[...l.references]);L=E.hasIgnoredFiles,E.clientReferences&&x.push(...E.clientReferences);for(let A of E.vscodeReferences)p.reference(A)}catch(E){return E instanceof Error&&E.message.includes("File seems to be binary and cannot be opened as text")?(p.markdown(pt.l10n.t("Sorry, binary files are not currently supported.")),{metadata:g}):{errorDetails:{message:E.message},metadata:g}}let M=new Map,j=ort(l),N,J,X=!1,D=await t.get(Jt).fetchMany([...srt(o,d),{role:"user",content:l.acceptedConfirmationData?.length||l.rejectedConfirmationData?.length?"":b.message,...x.length?{copilot_references:x}:void 0,copilot_confirmations:j?.length?j:void 0}],async(E,A,F)=>{if(F.copilotReferences){let Z=($,z)=>{let se="url"in $?$.url:"url"in $.data?$.data.url:void 0;if(se&&typeof se=="string"&&!M.has(se)){let He;if(MCe($)){let ee=Zn.joinPath(t.get(xr).extensionUri,"assets","bing.svg");He={light:ee,dark:ee}}else new URL(se).hostname==="github.com"&&(He=new pt.ThemeIcon("github"));N?N?.report(new pt.ChatResponseReferencePart(Zn.parse(se),He)):p.reference(Zn.parse(se),He),M.set(se,z??$)}};for(let $ of F.copilotReferences)Array.isArray($.data.results)?$.data.results.forEach(z=>{Z(z,$)}):"url"in $.data&&typeof $.data.url=="string"&&Z($)}let O=(Z,$)=>{J?.deferred.complete(J.resolvedMessage),N=Z;let z=new Rp;return J={deferred:z,resolvedMessage:$},z.p};if(F.copilotFunctionCalls)for(let Z of F.copilotFunctionCalls)switch(Z.name){case"bing-search":{try{let $=JSON.parse(Z.arguments);p.progress(pt.l10n.t('Searching Bing for "{0}"...',$.query),async z=>O(z,pt.l10n.t('Bing search results for "{0}"',$.query)))}catch{}break}case"kb-search":{try{let $=JSON.parse(Z.arguments);p.progress(pt.l10n.t('Searching knowledge base for "{0}"...',$.query),async z=>O(z,pt.l10n.t('Knowledge base results for "{0}"',$.query)))}catch{}break}case"codesearch":{try{let $=JSON.parse(Z.arguments);p.progress(pt.l10n.t('Searching {0} for "{1}"...',$.scopingQuery,$.query),async z=>O(z,pt.l10n.t('Code search results for "{0}" in {1}',$.query,$.scopingQuery)))}catch{}break}}if(F.copilotErrors&&typeof p.warning=="function"){X=!0;for(let Z of F.copilotErrors)N?N?.report(new pt.ChatResponseWarningPart(Z.message)):p.warning(Z.message)}if(F.copilotConfirmation){X=!0;let Z=F.copilotConfirmation;p.confirmation(Z.title,Z.message,Z.confirmation)}if(F.text){J?.deferred.complete(J.resolvedMessage);let Z=new pt.MarkdownString(F.text);Z.supportHtml=!0,p.markdown(Z)}},f,2,v,void 0,{secretKey:await t.get(Et).getAnyGitHubToken(),copilot_thread_id:m,...S?{copilot_skills:S}:void 0},{messageSource:`serverAgent.${r?r.slug:"platform"}`});if(g.copilot_references=[...new Set(M.values()).values()],D.type==="success"&&L&&p.markdown(pt.l10n.t(rk)),D.type!=="success"){if(e.warn(`Bad response from /agents/${s}: ${D.type} ${D.reason}`),D.reason.includes("400 no docs found"))return{errorDetails:{message:"No docs found"},metadata:g};if(D.type==="agent_unauthorized"){p.markdown(pt.l10n.t("Please authorize usage of this agent and resend your question."));let E=Zn.parse(D.authorizationUrl),A=new URL(D.authorizationUrl);p.button({command:"vscode.open",title:pt.l10n.t("Authorize on {0}",A.hostname),arguments:[E]})}else{if(D.type==="agent_failed_dependency")return{errorDetails:{message:pt.l10n.t("Sorry, an error occurred: {0}",D.reason)},metadata:g};if(D.type!=="unknown"||!X)return{errorDetails:{message:D.reason},metadata:g}}}return{metadata:g}}catch(v){return e.warn(`/agents/${s} failed: ${v}`),{metadata:g}}}));return u.iconPath=r?Zn.parse(r.avatar_url):new pt.ThemeIcon("github"),s===EJ&&(u.participantVariableProvider={triggerCharacters:["#"],provider:{async provideCompletionItems(l,d){return(await prt(t)).map(f=>{let m=new pt.ChatCompletionItem(`copilot.${f.name}`,"#"+f.name,[{value:f.insertText,level:pt.ChatVariableLevel.Full,description:f.description}]);return m.command=f.command,m.detail=f.description,m.fullName=f.fullName,m.icon=f.icon,m})}}}),i.add(u.onDidReceiveFeedback(l=>Y6(t,l,o))),i}var xJ;async function urt(t,e,r){if(!xJ){let n=`${e}/skills`;xJ=(await t.get(Mr).fetch(n,{method:"GET",headers:{Authorization:rM.format("Bearer %s",r),...t.get(St).getEditorVersionHeaders()}})).json().then(o=>o?.skills.reduce((s,a)=>s.add(a.slug),new Set))}return xJ}async function lrt(t,e){return t.get(Mr).fetch("https://api.github.com/user/knowledge-bases",{method:"GET",headers:{Authorization:rM.format("Bearer %s",e),...t.get(St).getEditorVersionHeaders()}})}var bb=null,m2=!1;async function CRe(t){if(bb?.size)return{knowledgeBases:[...bb.values()],organizationsMissingSSO:m2};let e=await t.get(Et).getPermissiveGitHubToken({silent:!0});if(!e)return{knowledgeBases:[],organizationsMissingSSO:!0};let r=await lrt(t,e),n=await r.text();r.headers.get("X-GitHub-SSO")&&r.headers.get("X-GitHub-SSO")?.split("partial-results; organizations=")[1]&&(m2=!0);try{let i=JSON.parse(n);bb=new Map;let o=i.map(s=>({label:s.name,organization:s.owner.login,iconPath:new pt.ThemeIcon("github"),insertText:s.name,name:s.name,description:s.description,type:"github.knowledge-base",id:(0,SRe.randomUUID)(),data:{type:"knowledge-base",id:s.id}}));for(let s of o)bb.set(s.name,s);return{knowledgeBases:[...bb.values()],organizationsMissingSSO:m2}}catch(i){return console.error(i),{knowledgeBases:[],organizationsMissingSSO:m2}}}var _Re={web:"bing-search",kb:"kb-search"},TJ="kb:";async function drt(t,e,r){if(e===EJ){let n=new Set,i=new Set;for(let o of r.references)if(_Re[o.name])n.add(_Re[o.name]);else if(o.name.startsWith(TJ)){n.add("kb-search"),await CRe(t);let s=bb?.get(o.name.slice(TJ.length));s&&i.add(s)}return{copilot_skills:[...n],copilot_references:[...i]}}return{copilot_skills:[]}}async function xRe(t){let{knowledgeBases:e,organizationsMissingSSO:r}=await CRe(t),n=[];if(r){let o=pt.l10n.t("Single-sign on to see knowledge bases from additional organizations");n.push(new tM(o)),n.push({kind:pt.QuickPickItemKind.Separator,label:""})}let i=new Map;for(let o of e){let s=o.organization;i.has(s)||i.set(s,[]),i.get(s)?.push(o)}for(let o of[...i.keys()].sort()){let s=i.get(o);s?.length&&(n.push({kind:pt.QuickPickItemKind.Separator,label:o}),n.push(...s.sort((a,c)=>a.label.localeCompare(c.label))))}return n}async function prt(t){let e=t.get(ke).getConfig(Ae.AgentsEndpointUrl),n=await t.get(Et).getAnyGitHubToken();if(!n)return[];let i=await urt(t,e,n);return[{name:"web",insertText:"#web",description:"Search Bing for real-time context",kind:"bing-search",command:void 0},{name:"kb",insertText:`#${TJ}`,icon:new pt.ThemeIcon("book"),fullName:"Knowledge Bases",description:"Search your enterprises' knowledge bases",kind:"kb-search",command:{title:"",command:TRe}}].filter(o=>i.has(o.kind))}var iM=W(_r());var h2=W(st());var nM=class extends K{render(e,r){let n=this.props.chatVariables.find(i=>i.name===In.variableInfo.name);return vscpp(vscppf,null,vscpp(h2.SystemMessage,{priority:1e3},"You are an expert in VS Code extension development. You know how to use the VS Code API to extend the editor. Your task is to help the Developer with their VS Code extension development.",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(di,null),vscpp(Tr,null),vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Assume the question is about VS Code extension development.",vscpp("br",null),"Politely decline to answer if the question is not about VS Code extension development.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the API related context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"The user cannot see the API context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.",vscpp("br",null),"Do not talk about initial setup of creating an extension unless the user asks about it.",vscpp("br",null),"Only provide information to related VS Code extension development."),this.props.history&&vscpp(vscppf,null,vscpp(Ht,{priority:600,history:this.props.history})),vscpp(_u,{priority:700}),!n&&vscpp(In,{priority:900}),vscpp(In,{priority:800}),vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}),vscpp(CJ,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}},CJ=class extends K{async prepare(e,r,n){let i=this.accessor.get(Ws),o=this.accessor.get(G5),s=await this.accessor.get(Ue).getEmbeddingsEndpoint();if(await o.updateIndex(),n.isCancellationRequested)return;let a=await i.computeEmbeddings(s,[this.props.query],{},n);if(!n.isCancellationRequested&&a&&a.length>0){let c=o.nClosestValues(a[0],5,.7);if(c.length)return{snippets:c}}}render(e,r){return vscpp(vscppf,null,e&&e.snippets.length>0&&vscpp(h2.UserMessage,{priority:900},"Below are some potentially relevant code samples related to VS Code extension development. You may use information from these samples to help you answer the question if you believe it is relevant."),e&&e.snippets.map(n=>vscpp(h2.UserMessage,{priority:900},n,vscpp("br",null))))}};var frt=iM.t("How do I add text to the status bar?"),IJ=class extends Mo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(Tt).activeTextEditor;return new Je(n,nM,{chatVariables:i,query:u,history:l,document:d?.document,selection:d?.selection},this.accessor.get(ge),this.accessor)}},oM=class{constructor(){this.id="api";this.locations=[2];this.description=iM.t("Ask about VS Code extension development");this.intentDetectionInput={sampleQuestion:frt,modelDescription:iM.t("Ask about VS Code extension development")};this.commandInfo={defaultEnablement:!0,allowsEmptyArgs:!1}}static{this.ID="api"}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return{intent:this,location:n,endpoint:i,promptCrafter:new IJ(e)}}};var e2e=W(_r());var sM=class t{constructor(e,r,n){this.accessor=e;this.prompt=r;this.documentContext=n}static async createIntentInvocation(e,r,n,i,o){let{location:s,documentContext:a}=n;if(!a)throw new Error("Open a file to add code.");let c=new t(r,i,a);return{intent:e,location:s,endpoint:o,promptCrafter:c,createReplyInterpreter:c.createReplyInterpreter.bind(c)}}async buildPrompt(e,r,n,i,o,s){let c=e.getLatestTurn().request.message,u=e.turns.length>1?e.turns.slice(0,-1):[],l=new Je(r,this.prompt,{documentContext:this.documentContext,query:c,history:u},this.accessor.get(ge),this.accessor),d=await l.render();return this.replyInterpreterFactory=l.getMeta(Qn),d}createReplyInterpreter(e,r){if(!this.replyInterpreterFactory)throw new Error("No reply interpreter factory available.");return this.replyInterpreterFactory.create(e,r)}};var rm=W(st());function IRe(t,e,r,n){let i=t.modelMaxPromptTokens*4/3,o=new np(i),s=e.document,a=e.language,c=new Bs(o,s,a,"ed8c6549bwf9"),u=new Bs(o,s,a,"abpxx6d04wxr"),l=new Bs(o,s,a,"be15d9bcejpp"),d=()=>(u.trim(),c.trim(),l.trim(),{contextInfo:{language:a,above:u,range:c,below:l,outlineAbove:"",outlineBelow:""},tracker:o});if(!mrt(c,r,n))return d();let f={aboveLineIndex:n.start.line-1,belowLineIndex:n.end.line+1,minimumLineIndex:0,maximumLineIndex:s.lineCount-1};return lX(f,u,l),d()}function mrt(t,e,r){let n=Math.floor((e.start.line+e.end.line)/2),i=Math.max(n-r.start.line,r.end.line-n);t.appendLine(n);for(let o=1;o<=i;o++){let s=n-o,a=n+o;if(s>=r.start.line&&!t.prependLine(s)||a<=r.end.line&&!t.appendLine(a))return!1}return!0}function y0(t,e,r,n){let i=t.getDiagnostics(e).filter(o=>!!o.range.intersection(r));if(n){let o=i.filter(s=>n.includes(s.message));if(o.length>0)return o}return i}async function wRe(t,e,r){let n=kP(e),i=Math.max(r,e.end.line-e.start.line+r),o=await t.getFixSelectionOfInterest(n,i);return DP(o)}var aM=class t extends K{constructor(){super(...arguments);this._logger=this.accessor.get(ue).getLogger("ReferencesAtPosition")}static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){if(await this.accessor.get(De).isCopilotIgnored(this.props.document.uri))return{k:"ignored"};let r=this.accessor.get(xr).extensionMode===Sa.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,[n,i]=await this.findReferences(r);return this._logger.debug(`Found ${n.length} implementation(s)/definition(s), ${i.length} usages`),n.length>0&&this._logger.debug("Implementation(s)/definition(s) found:",JSON.stringify(n,null,"	")),i.length>0&&this._logger.debug("Usages found:",JSON.stringify(i,null,"	")),{k:"found",definitions:n,usages:i}}render(r,n){if(r.k==="ignored")return vscpp("ignoredFiles",{value:[this.props.document.uri]});let{document:i,position:o}=this.props,{definitions:s,usages:a}=r;if(s.length===0){let c=i.lineAt(o.line);s.push({languageId:i.languageId,uri:i.uri,code:c.text,excerptRange:c.range})}return vscpp(vscppf,null,"Relevant definition",s.length>1?"s":"",": ",vscpp("br",null),vscpp("br",null),s.map(c=>{let d=`${`${$o(c.languageId).lineComment.start} FILEPATH: ${c.uri.path}`}
${c.code}`;return vscpp(Be,{uri:c.uri,languageId:c.languageId,code:d})}),vscpp("br",null),"Other uses: ",vscpp("br",null),vscpp(Be,{uri:null,code:a.map(c=>c.code).join(`
`)}))}async findReferences(r){let{document:n,position:i}=this.props,o=this.accessor.get(hi),s=async()=>{try{let l=await o.getReferences(n.uri,i);return this._logger.debug(`Found ${l.length} references`,JSON.stringify(l,null,"	")),l}catch{return[]}},a=await ua(this.accessor,n,r*3,s,[]),c=[],u=[];for(let l of a){if(await this.accessor.get(De).isCopilotIgnored(l.uri))continue;let d=await this.accessor.get(Ze).openTextDocument(l.uri),p=this.accessor.get(xt).getTreeSitterAST(d);if(!p)continue;let f=Ki(l.range,d),m=await p.getCallExpressions(f),h=await p.getFunctionDefinitions();if(m.length>0)u.push({languageId:d.languageId,uri:d.uri,code:m[0].text,excerptRange:_s(d,m[0])});else if(h.some(g=>Yi.doIntersect(g,f))){let v=(await h0(this.accessor,{document:d,language:$o(n.languageId),wholeRange:l.range,selection:new Lm(l.range.start,l.range.end),fileIndentInfo:void 0})).range;c.push({languageId:d.languageId,uri:d.uri,code:d.getText(v),excerptRange:v})}}return[c,u]}};function RRe(t,e){let r=typeof e.code=="object"?e.code.value:e.code,n=vrt(t,e.source,r);return{fixes:n,messageReplacement(){for(let i of n)if(typeof i=="object"&&i.replaceMessage!==void 0)return i.replaceMessage},additionalContext(){let i=[];for(let o of n)typeof o=="object"&&o.additionalContext!==void 0&&i.push(o.additionalContext);return i}}}var hrt=["typescript"],grt=["eslint","ts"];function vrt(t,e,r){if(!hrt.includes(t)||!grt.includes(e))return[];let n=`${t}:${e}`;if(!wJ[n]||!r||!wJ[n][r])return[];let i=wJ[n][r];return Array.isArray(i)?i:[i]}var wJ={"typescript:ts":{2345:{title:"Use this declaration and other usages as examples.",message:"",additionalContext:0}},"typescript:eslint":{"class-methods-use-this":["Make the method static.","Move the method outside of the class.","Rewrite the method to use properties of the class."],"consistent-this":["Use the alias for this required by eslint consistent-this rule.","Use this directly instead of an alias."],"constructor-super":{title:"Add missing super call and pass through new arguments.",message:"The code is missing a super call in the constructor. Copy base class parameters to this constructor and pass them to super.",replaceMessage:"Missing super call in constructor"},"func-names":["Give the function expression the same name as the variable it is assigned to.","Convert the function to an arrow function."],"func-style":[{title:"Convert the function declaration to an expression.",message:"The function expression should be assigned to a variable with the name of the original function declaration."}],"max-lines-per-function":["Split into multiple functions."],"max-nested-callbacks":["Rewrite to avoid at least one callback."],"max-params":[{title:"Rewrite the signature to use an object parameter.",message:"Preserve all the parameters of the original signature."}],"max-statements":["Split into multiple functions."],"no-case-declarations":["Surround the case block with braces.","Move the declaration outside the case block."],"no-dupe-else-if":["Fix the duplicate condition to be different from the first.","Remove the duplicate condition"],"no-duplicate-case":[{title:"Change the duplicate condition to be different.",message:"Do not delete the duplicate case, just fix it.",replaceMessage:"Duplicated condition."},"Remove the duplicate condition"],"no-duplicate-imports":"Merge the duplicated import lines.","no-fallthrough":[{title:"Rewrite to avoid fallthrough.",message:"Use the return value of the following cases and copy it to the preceding fallthrough case.",replaceMessage:"Fallthrough case in switch statement."},"Add a // fallthrough comment.","Add a break statement."],"no-inner-declarations":["Move the inner declaration to the top of its containing function.","Move the inner declaration to the bottom of its containing function.","Change the inner function declaration to an expression."],"no-multi-assign":"Assign each variable in separate statements.","no-negated-condition":"Invert the branches of the conditional.","no-new":["Convert the class to functions.","Assign the resulting object to a variable."],"no-sequences":[{title:"Wrap the whole comma sequence in parentheses.",message:"",replaceMessage:"Unnecessary comma sequence"},{title:"Rewrite, preserving the original behavior.",message:"The last element of the comma sequence is the one returned."},{title:"Delete the non-final elements of the sequence.",message:"They are unused unless it is for side effects."}],"no-sparse-arrays":["Remove duplicated commas.","Add default values for the missing elements."],"require-await":["Removed the unused async keyword.",{title:"Rewrite the function to use await.",message:"The code should change to call asynchronous functions where appropriate."}],"sort-keys":{title:"Sort the properties of the entire object literal.",message:"",replaceMessage:"Unsorted keys in object literal."}}};var yrt=200,ARe=300,up=class extends K{async prepare(e,r,n){return{isIgnored:await this.accessor.get(De).isCopilotIgnored(this.props.documentContext.document.uri)}}render(e,r){let{diagnostics:n,documentContext:i}=this.props;return e.isIgnored?vscpp("ignoredFiles",{value:[i.document.uri]}):n.length>0&&vscpp(vscppf,null,n.map((o,s)=>{let a=RRe(i.language.languageId,o);return vscpp(vscppf,null,vscpp(RJ,{diagnostic:o,cookbook:a,showLineNumbers:this.props.showLineNumbers??!1,maxLength:yrt,documentContext:i}),vscpp(AJ,{diagnostic:o,cookbook:a,document:i.document}),vscpp(PJ,{cookbook:a}))}))}},RJ=class extends K{render(e,r){let n=this.props.diagnostic,i=this.props.cookbook?.messageReplacement()??n.message;if(this.props.showLineNumbers)return n.message?vscpp(vscppf,null,"At line ",n.range.start.line+1," column ",n.range.start.character+1,": ",vscpp("br",null),i," ",vscpp("br",null)):vscpp(vscppf,null);let o=this.props.documentContext.document,s=n.range,a=o.getText(new Xe(s.start.line,0,s.end.line+1,0)).trim(),c=a.length>0&&a.length<this.props.maxLength?a:"";return c?vscpp(vscppf,null,"This code",vscpp("br",null),vscpp(Be,{code:c,uri:o.uri}),vscpp("br",null),vscpp(vscppf,null,"has the problem reported:",vscpp("br",null),i," ",vscpp("br",null))):vscpp(vscppf,null)}},AJ=class extends K{constructor(e,r){super(e,r),this.workspaceService=r.get(Ze),this.parserService=r.get(xt),this.ignoreService=r.get(De)}async prepare(){return this.getRelatedInfos()}render(e,r){return!e.infos.length&&!e.definitionRanges.length?vscpp("ignoredFiles",{value:e.ignoredFiles}):vscpp(vscppf,null,"This diagnostic has some related code:",vscpp("br",null),e.infos.map(n=>vscpp(Be,{code:n.content,uri:n.uri})),e.definitionRanges.map(n=>vscpp(aM,{document:this.props.document,position:n.start})),vscpp("ignoredFiles",{value:e.ignoredFiles}),";")}async getRelatedInfos(){let e=[],r=[],n=[],i=this.props.diagnostic;if(i.relatedInformation)for(let s of i.relatedInformation)try{let a=s.location;if(await this.ignoreService.isCopilotIgnored(a.uri)){n.push(a.uri);continue}let c=await this.workspaceService.openTextDocument(a.uri),u=a.range,l=this.parserService.getTreeSitterAST(c),d;if(l){let p=kP(u),f=await l.getCoarseParentScope(p);d=c.getText(DP(f))}(!d||d.length>ARe)&&(d=c.getText(u)),d.length<=ARe&&e.push({content:d,uri:a.uri})}catch{}let o=this.props.cookbook.additionalContext();for(let s of o)switch(s){case 0:{let a=this.parserService.getTreeSitterAST(this.props.document);if(a){let c=Ki(this.props.diagnostic.range,this.props.document),u=await ua(this.accessor,this.props.document,500,()=>a.getCallExpressions(c),[]);for(let l of u){let d=_s(this.props.document,l);r.push(d)}}break}case 1:{r.push(this.props.diagnostic.range);break}}return{infos:e,definitionRanges:r,ignoredFiles:n}}},PJ=class extends K{render(e,r){let n=this.props.cookbook.fixes;if(n.length){let i=n[0];return vscpp(vscppf,null,"Suggested fix:",vscpp("br",null),typeof i=="string"?i:i.title+i.message)}return null}};var cM=class extends K{async prepare(){let e=this.accessor.get(Mt),r=this.accessor.get(ke),n=async(i,o)=>r.getConfig(i)||!!await e.getTreatmentVariableAsync("vscode",o,!0);return{useWorkspaceChunksFromSelection:await n(Ae.FixUseWorkspaceChunksFromSelection,"copilotchat.useWorkspaceChunksFromSelection"),useWorkspaceChunksFromDiagnostics:await n(Ae.FixUseWorkspaceChunksFromDiagnostics,"copilotchat.useWorkspaceChunksFromDiagnostics")}}render(e,r){if(!e.useWorkspaceChunksFromSelection&&!e.useWorkspaceChunksFromDiagnostics)return null;let n=r.tokenBudget;return e.useWorkspaceChunksFromSelection&&e.useWorkspaceChunksFromDiagnostics&&(n=n/2),vscpp(vscppf,null,e.useWorkspaceChunksFromSelection&&vscpp(pb,{...this.getChunkSearchPropsForSelection(n)}),e.useWorkspaceChunksFromDiagnostics&&vscpp(pb,{...this.getChunkSearchPropsForDiagnostics(n)}))}getChunkSearchPropsForSelection(e){let{document:r,wholeRange:n}=this.props.documentContext,i=r.validateRange(n);this.props.diagnostics.forEach(a=>{i=i.union(a.range)});let o=r.getText(i),s=[`Please find code that is similar to the following code block:
`,"```",o,"```"].join(`
`);return{query:{rawQuery:s,resolve:async()=>({rephrasedQuery:s,keywords:PRe(o)})},include:{exclude:[r.uri.fsPath]},maxResults:3}}getChunkSearchPropsForDiagnostics(e){let r=this.props.documentContext.document,n=this.props.diagnostics.map(o=>o.message).join(" "),i=`Please find code that can help me fix the following problems: ${n}`;return{query:{rawQuery:i,resolve:async()=>({rephrasedQuery:i,keywords:PRe(n)})},include:{exclude:[r.uri.fsPath]},maxResults:3}}};function PRe(t){let e=new Set;for(let r of t.matchAll(/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g))e.add(r[0]);return Array.from(e.values(),r=>({keyword:r,variations:[]}))}var _b="---",Qr=(o=>(o.FILEPATH=_b+"FILEPATH",o.ORIGINAL=_b+"ORIGINAL",o.PATCHED=_b+"PATCHED",o.COMPLETE=_b+"COMPLETE",o.TERMINAL=_b+"TERMINAL",o))(Qr||{}),uM=class extends K{render(){return vscpp(vscppf,null,"When proposing to fix the problem by running a terminal command, write `",Qr.TERMINAL,"` and provide a code block that starts with ```bash that terminal script inside.",vscpp("br",null),"When proposing code change, return a patch by providing file path, original and patched code. Each modification consist of three sections headed by `",Qr.FILEPATH,"`, `",Qr.ORIGINAL,"` and `",Qr.PATCHED,"`.",vscpp("br",null),"After ",Qr.FILEPATH," add the path to the file that needs to be changed.",vscpp("br",null),"After ",Qr.ORIGINAL," add a code block that contains the original code snippet from the program. Do not make any changes to the original code, do not omit comments or shorten the code with ...",vscpp("br",null),"After ",Qr.PATCHED," add a code block that contains the updated version of the original code.",vscpp("br",null),"When adding original code and updated code, pay attention to indentation. Keep the original identation.",vscpp("br",null),"You can write multiple modifications if needed.",vscpp("br",null),"After all modifications, add ",Qr.COMPLETE,".",vscpp("br",null))}},lM=class extends K{render(){return vscpp(vscppf,null,"```csharp",vscpp("br",null),"// This is my class",vscpp("br",null),"class C { }",vscpp("br",null),vscpp("br",null),"new C().Field = 9;",vscpp("br",null),"```")}},dM=class extends K{render(){return vscpp(vscppf,null,"The problem is that the class 'C' does not have a field or property named 'Field'. To fix this, you need to add a 'Field' property to the 'C' class.",vscpp("br",null),vscpp("br",null),UE("someFolder/myFile.cs"),vscpp("br",null),Qr.ORIGINAL,vscpp("br",null),"```",vscpp("br",null),"// This is my class",vscpp("br",null),"class C { }",vscpp("br",null),"```",vscpp("br",null),Qr.PATCHED,vscpp("br",null),"```",vscpp("br",null),"// This is my class",vscpp("br",null),"class C {",vscpp("br",null),"public int Field { get; set; }",vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),UE("someFolder/myFile.cs"),vscpp("br",null),Qr.ORIGINAL,vscpp("br",null),"```",vscpp("br",null),"new C().Field = 9;",vscpp("br",null),Qr.PATCHED,vscpp("br",null),"```",vscpp("br",null),"// set the field to 9",vscpp("br",null),"new C().Field = 9;",vscpp("br",null),"```",vscpp("br",null),Qr.COMPLETE,vscpp("br",null))}};function UE(t){return`${Qr.FILEPATH} ${t}`}function pM(t){return!t.match(/\S/)}function _rt(t,e,r,n){let i=0;for(;i<e.length&&pM(e[i]);)i++;let o=e[i],s=kJ(o),a,c=0,u=i;e:for(;c<t.length;){for(;c<t.length&&!kRe(t[c],o,s);)c++;if(c===t.length){n.push({message:a??"Snippet first line not found",label:"invalid patch",severity:"error"});return}let l=c,d=-1;for(;c<t.length&&u<e.length;){let p=t[c];if(kJ(p)===p.length){c++;continue}let m=e[u],h=kJ(m);if(h===m.length){u++;continue}if(kRe(p,m,h))d=c,c++,u++;else{a=`Line ${c} does not match snippet line ${u}`,c=l+1,u=i,m.indexOf("...")!==-1&&n.push({message:"Original contains ellipses",label:"lazy patch",severity:"error"});continue e}}for(;u<e.length&&pM(e[u]);)u++;if(u===e.length&&l!==-1&&d!==-1){let p=sb(t,4,!1),f=DJ(t[l],p.tabSize).level,m=xrt(r,f,p);return Jn.replace(new Xe(l,0,d,t[d].length),m)}}n.push({message:a??"Not all lines of snippet found",label:"invalid patch",severity:"error"})}function LRe(t){return t===32||t===9}function xrt(t,e,r){let n,i=0;for(n=0;n<t.length&&pM(t[n]);n++);if(n===t.length)return"";for(i=t.length;i>n&&pM(t[i-1]);i--);let o=DJ(t[n],r.tabSize).level,s=[];for(let a=n;a<i;a++){let c=t[a],{level:u,length:l}=DJ(c,r.tabSize),d=Math.max(0,e+u-o),p=r.insertSpaces?" ".repeat(r.tabSize*d):"	".repeat(d);s.push(p+c.substring(l))}return s.join(`
`)}function kJ(t){let e=0;for(;e<t.length&&LRe(t.charCodeAt(e));)e++;return e}function DJ(t,e){let r=0,n=0,i=0,o=0,s=t.length;for(;i<s;){let a=t.charCodeAt(i);if(a===32)r++,r===e&&(n++,r=0,o=i+1);else if(a===9)n++,r=0,o=i+1;else break;i++}return{level:n,length:o}}function kRe(t,e,r){let n=t.length-1,i=e.length-1;for(;n>=0&&i>=r&&t.charCodeAt(n)===e.charCodeAt(i);)n--,i--;if(i>=r)return!1;for(;n>=0&&LRe(t.charCodeAt(n));)n--;return n<0}function ORe(){return{getFirstSentence(t){let e=[];for(let r of NRe(t)){if(r.length===0||r.startsWith(_b))break;e.push(r)}return e.join(`
`)},process(t,e,r){let n,i,o=[],s=[],a=new Set;e:for(let l of Ert(NRe(t)))switch(l.marker){case void 0:break;case Qr.FILEPATH:i=l.content.join(`
`).trim();break;case Qr.TERMINAL:return{content:l.content.join(`
`),annotations:o};case Qr.ORIGINAL:n=l.content;break;case Qr.PATCHED:{l.content&&n&&i&&(s.push({fileName:i,find:n,replace:l.content}),a.add(i));break}case Qr.COMPLETE:break e}if(s.length===0)return o.push({message:"No patch sections found",label:"invalid patch",severity:"error"}),{annotations:o};if(r){let l=Ip(r.fsPath);if(!a.has(l))return o.push({message:`No patch for input document: ${l}, patches for ${[...a.keys()].join(", ")}`,label:"other file",severity:"warning"}),{content:s.map(d=>`${d.fileName}:

${d.replace.join(`
`)}
`).join(`

`),annotations:o};a.size>1&&(o.push({message:`Multiple files modified: ${[...a.keys()].join(", ")}`,label:"multi file",severity:"warning"}),s=s.filter(d=>d.fileName===l))}let c=[],u=GS.fromString(e);for(let l of s){let d=_rt(u,DRe(l.find),DRe(l.replace),o);d&&(Srt(c,d)?c.push(d):o.push({message:"Conflicting edit",label:"overlapping edit",severity:"warning"}))}return{edits:c,annotations:o}}}}function Srt(t,e){if(t.length===0)return!0;let r=t[t.length-1].range.end;return e.range.start.isAfterOrEqual(r)}function DRe(t){let e=[],r=!1;for(let n of t)if(n.startsWith("```")){if(r)return e;r=!0}else r&&e.push(n);return[]}function*Ert(t){let e,r=[];for(let n of t){let i;if(n.startsWith(_b)&&(n.startsWith(Qr.FILEPATH)?i=Qr.FILEPATH:n.startsWith(Qr.ORIGINAL)?i=Qr.ORIGINAL:n.startsWith(Qr.PATCHED)?i=Qr.PATCHED:n.startsWith(Qr.TERMINAL)?i=Qr.TERMINAL:n.startsWith(Qr.COMPLETE)&&(i=Qr.COMPLETE),i)){yield{marker:e,content:r},r=[n.substring(i.length)],e=i;continue}r.push(n)}e&&(yield{marker:e,content:r})}function*NRe(t){let e=0,r=t.indexOf(`
`);for(;r!==-1;)yield t.substring(e,r),e=r+1,r=t.indexOf(`
`,e);e<t.length&&(yield t.substring(e))}var g2=class extends K{async prepare(e){let{document:r,wholeRange:n,fileIndentInfo:i}=this.props.documentContext,o=await this.accessor.get(De).isCopilotIgnored(r.uri),s=r.validateRange(n),a=e.endpoint.modelMaxPromptTokens/3,c=a*4,u;return!o&&r.getText().length>c&&(u=await n0(this.accessor.get(xt),this.accessor.get(Mt),r,i,s,a)),{wholeRange:s,summarizedDoc:u,isIgnored:o}}render(e,r){let{document:n,language:i,selection:o}=this.props.documentContext;if(Yt(n.uri))throw wr("InlineFix3PlusPrompt should not be used with a notebook!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[n.uri]});let s,a,c,u,l;e.summarizedDoc?(s=e.summarizedDoc.document.transformer.fromOffsetRange(e.summarizedDoc.selection),c=e.summarizedDoc.document,u=c.text,l=c.lineCount,a=e.summarizedDoc.selection.substring(u)):(s=e.wholeRange,u=n.getText(),c=n,l=n.lineCount,a=n.getText(s));let d=u.length>0,p=[{uri:n.uri,version:n.version,ranges:[]}],f=y0(this.accessor.get(Ko),n.uri,o,this.props.query);return vscpp(vscppf,null,vscpp("usedContext",{value:p}),vscpp("meta",{value:new Qn(m=>new NJ(s,c,n.uri,m))}),vscpp(rm.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"The user has a ",i.languageId," file opened in a code editor.",vscpp("br",null),"The user expects you to propose a fix for one or more problems in that file.",vscpp("br",null),"For the response always follow these instructions:",vscpp("br",null),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then provide code changes or a terminal command to run.",vscpp("br",null),vscpp(uM,null),vscpp(Br,null)),this.props.history&&vscpp(Ht,{priority:700,history:this.props.history}),vscpp(rm.UserMessage,{priority:100},"I have the following code open in the editor.",vscpp("br",null),UE(Ip("someFolder/myFile.cs")),vscpp("br",null),vscpp(lM,null)),vscpp(rm.AssistantMessage,{priority:100},vscpp(dM,null)),vscpp(rm.UserMessage,{priority:700},vscpp(c6,null,d&&vscpp(vscppf,null,"I have the following code open in the editor, starting from line 1 to line ",l,".",vscpp("br",null),UE(Ip(n.fileName)),vscpp("br",null),vscpp(Be,{uri:n.uri,languageId:i.languageId,code:u,shouldTrim:!1}),vscpp("br",null),"The user has currently selected from line ",s.start.line+1,", column ",s.start.character+1," to line ",s.end.line+1," column ",s.end.character+1,".",vscpp("br",null),!s.isEmpty&&!f.some(m=>m.range.contains(s))&&vscpp(vscppf,null,"The selected content is:",vscpp("br",null),vscpp(Be,{uri:n.uri,languageId:i.languageId,code:a,shouldTrim:!1}),vscpp("br",null))),!d&&vscpp(vscppf,null,"I am in an empty file:",UE(Ip(n.fileName)),vscpp("br",null),vscpp(Be,{uri:n.uri,languageId:i.languageId,code:"",shouldTrim:!1}),vscpp("br",null))),vscpp(up,{documentContext:this.props.documentContext,diagnostics:f,showLineNumbers:!0}),vscpp(cM,{diagnostics:f,documentContext:this.props.documentContext}),vscpp(rm.TextChunk,null,"Please find a fix for my code so that the result is without any errors.",vscpp("br",null),this.props.query,vscpp("br",null))))}},NJ=class{constructor(e,r,n,i){this.wholeRange=e;this.targetDocument=r;this.documentUri=n;this.progress=i;this._lastText=void 0;this._lastLength=0;this._replyProcessor=ORe()}update(e){if(this._lastText=e,this._firstSentence===void 0){let r=this._replyProcessor.getFirstSentence(e);this.progress.report(new pn(r.substring(this._lastLength))),this._lastLength=r.length,r.length<e.length&&(this._firstSentence=r,this.progress.report(new pn(`

`)),this.progress.report(new Io("Generating edits...")))}return{shouldFinish:!1}}async finish(){if(!this._lastText)throw new Error("No text");let e=this.targetDocument instanceof r0?this.targetDocument.text:this.targetDocument.getText(),r=this._replyProcessor.process(this._lastText,e,this.documentUri);if(!r.edits)return{type:"conversational",content:r.content??"",annotations:r.annotations};let n=r.edits;return this.targetDocument instanceof r0&&(n=new ZS(this.targetDocument).rebaseEdits(n),r.edits.length!==n.length&&r.annotations.push({message:"Some edits were not applied because they were out of bounds.",label:"summarize conflict",severity:"error"})),{type:"inlineEdit",edits:n,newWholeRange:this.wholeRange,annotations:r.annotations}}};var mM=W(st());function MRe(t,e){let r=t;for(let n of e){let i=n.range.start,o=n.range.end,s=r.start,a=r.end,c=n.newText.split(`
`).length,u=c-(o.line-i.line)-1,l=s.line,d=s.line;o.isBefore(s)?(l=s.line+u,d=a.line+u):i.isBefore(s)&&o.isAfterOrEqual(s)&&o.isBeforeOrEqual(a)?(l=i.line,d=a.line+u):i.isAfterOrEqual(s)&&i.isBeforeOrEqual(a)&&o.isAfter(a)?(l=s.line,d=o.line+u):i.isAfter(a)?(l=s.line,d=a.line):r.contains(n.range)?(l=s.line,d=a.line+u):n.range.contains(r)&&(l=i.line,d=i.line+c-1),r=new Xe(l,0,d,0)}return r}var Trt=15,fM=class extends K{async prepare(){let{document:e,selection:r}=this.props.documentContext,n=y0(this.accessor.get(Ko),e.uri,r,this.props.query),i=n.length>0?Aie(n):r,o=this.accessor.get(xt).getTreeSitterAST(e),s=o?await wRe(o,i,Trt):i;return{range:i,rangeOfInterest:s,diagnostics:n}}render({range:e,rangeOfInterest:r,diagnostics:n},i){let o=this.props.documentContext;if(!Yt(this.props.documentContext.document.uri))throw wr("InlineFix4Prompt should not be used with a non-notebook!");let s=IRe(i.endpoint,o,e,r),a=_6(this.accessor.get(Tt),this.accessor.get(Ze),o,s.contextInfo,s.tracker),c=o.document,u=[{uri:c.uri,version:c.version,ranges:Xt([a.range.toRange(),a.above.toRange(),a.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:u}),vscpp("meta",{value:new Qn(l=>new LJ(this.accessor,e,a,o,l))}),vscpp(mM.SystemMessage,null,vscpp(ub,{language:o.language}),vscpp("br",null),"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If you suggest to run a terminal command, use a code block that starts with ```bash.",vscpp("br",null),'When fixing "ModuleNotFoundError" or "Import could not be resolved" errors, always use magic command "%pip install" to add the missing packages. The imports MUST be inserted at the top of the code block and it should not replace existing code.',vscpp("br",null),"You should not import the same module twice.",vscpp("br",null),vscpp(sn,null)),this.props.history&&vscpp(Ht,{priority:700,history:this.props.history}),vscpp(jR,{documentContext:o,above:a.above,range:a.range,below:a.below,aboveCells:a.aboveCells,belowCells:a.belowCells,includeDelimeters:!0}),vscpp(mM.UserMessage,null,vscpp(up,{documentContext:o,diagnostics:n}),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),this.props.query,vscpp("br",null)))}},LJ=class{constructor(e,r,n,i,o){this.accessor=e;this.wholeRange=r;this.contextInfo=n;this.documentContext=i;this.progress=o;this._lastText=void 0;this._lastLength=0}update(e){if(this._lastText=e,this._firstSentence===void 0){let r=KCe(e);r.length<e.length&&(this._firstSentence=r),this.progress.report(new pn(r.substring(this._lastLength))),this._lastLength=r.length}return{shouldFinish:ob(e)}}async finish(){if(!this._lastText)throw new Error("No text");let e=ab(this.contextInfo,this._lastText,this.documentContext.language);if(!e||e.language==="bash"||e.language==="ps1")return{type:"conversational",content:this._lastText.substring(this._lastLength)};let r=this.generateEdits(e.code),n=this.documentContext.document.version,i=o=>this.generateFollowUps(r,this.wholeRange,n,o);return Jg(r,this.wholeRange,void 0,i)}generateEdits(e){let r=e.split(`
`),n=[],i=[];for(let a of r)a.match(/^[%\!]pip/)?n.push(a):i.push(a);if(!n.length)return Xf(this.accessor,this.contextInfo,e,2,this.documentContext.fileIndentInfo,Qg.fromDocumentContext(this.documentContext));let o=[],s=Xg(n,{whichLine:"topMost",lines:this.contextInfo.range.lines},this.documentContext.fileIndentInfo).join(`
`)+`
`;return o.push(new Jn(new Xe(this.wholeRange.start,this.wholeRange.start),s)),i.length&&o.push(...Xf(this.accessor,this.contextInfo,i.join(`
`),2,this.documentContext.fileIndentInfo,Qg.fromDocumentContext(this.documentContext))),o}async generateFollowUps(e,r,n,i){let s=await this.accessor.get(Ko).waitForNewDiagnostics(this.documentContext.document.uri,i);if(!i.isCancellationRequested&&s.length&&this.documentContext.document.version!==n){let a=MRe(r,e),c=s.filter(u=>Pie(u)&&u.range.intersection(a));if(c.length)return c.length===1?[{label:dU.t("An error remains after applying the change, click here to iterate."),prompt:`/fix ${c[0].message}`}]:[{label:dU.t("{0} errors remain after applying the change, click here to iterate.",c.length),prompt:"/fix Fix the remaining errors"}]}}};var gM=W(st());var hM=class extends K{render(e,r){let n=this.props.documentContext,i=({document:o,selection:s})=>y0(this.accessor.get(Ko),o.uri,s,this.props.query);return vscpp(vscppf,null,vscpp(gM.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),vscpp(sn,null),vscpp("br",null),vscpp("br",null),vscpp(u0,{location:2,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You specialize in being a highly skilled code generator. Your task is to help the Developer fix an issue.",vscpp("br",null),"If context is provided, try to match the style of the provided code as best as possible.",vscpp("br",null),"Generated code is readable and properly indented.",vscpp("br",null),"Markdown blocks are used to denote code.",vscpp("br",null),"Preserve user's code comment blocks, do not exclude them when refactoring code.",vscpp("br",null),"Pay especially close attention to the selection or exception context.",vscpp("br",null),"Given a description of what to do you can refactor, fix or enhance the existing code.",vscpp(Tr,null)),this.props.history&&vscpp(Ht,{priority:700,history:this.props.history}),vscpp(In,{priority:800,document:this.props.documentContext?.document,range:this.props.documentContext?.selection}),n&&vscpp(gM.UserMessage,{priority:800},vscpp(up,{documentContext:n,diagnostics:i(n)})),vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var xb=W(_r());var EM=W(_r());var BRe=W(st());var FRe=W(st());var vM=class extends K{render(){let{chunk:e,failure:r,priority:n}=this.props,i=r.task.messages.filter(o=>o.location?.uri.toString()===e.file.toString()&&Fm(e.range).contains(o.location.range.start));return vscpp(FRe.UserMessage,{priority:n},i.length?vscpp(vscppf,null,'This is the source code of the test that failed. The error message is shown after the text "FAILURE_MESSAGE" on the line where it occurred:'):vscpp(vscppf,null,"The test failed with the message: ",r.task.messages.map(o=>typeof o.message=="object"?o.message.value:o.message).join(`
`),". The source code of the test is:"),vscpp("br",null),vscpp(Be,{languageId:e.file.toString(),uri:e.file,code:e.text.split(`
`).map((o,s)=>{let a=i.find(c=>c.location?.range.start.line===s+e.range.startLineNumber-1);return a?`${o} FAILURE_MESSAGE: ${a.message.toString().replaceAll(`
`," ")}`:o}).join(`
`)}),vscpp("br",null))}};var yM=class extends K{render(){let{chunk:e,testFailure:r,hasChunks:n,turnsLeft:i}=this.props;return vscpp(vscppf,null,vscpp(BRe.SystemMessage,{priority:1e3},"You are an assistant who specializes in diagnosing and fixing failing tests. The user will provide you with the source code of the test that failed, and the location where the failure happened. They will also provide you with relevant related code. This information may be incomplete.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),`- Read the test's source code and the line containing "FAILURE_MESSAGE". The text after "FAILURE_MESSAGE" is the error returned from running tests.`,vscpp("br",null),"- Assume that the test code and test fixtures are correct. It's more likely the problem is code called by the test.",vscpp("br",null),n&&vscpp(vscppf,null,"- The provided code is incomplete. DO NOT assume that something isn't implemented if it doesn't appear here.",vscpp("br",null)),i===0?vscpp(vscppf,null,'- If you believe you have found a bug in one of the code snippets the user provided, respond with "SOLUTION" followed by the file URI, "RANGE" followed by the line range, and then the corrected code for that line range and a brief explanation of the change.',vscpp("br",null)):vscpp(vscppf,null,n?vscpp(vscppf,null,'- If you have found a bug the code provided, respond with "SOLUTION" followed by the file URI, "RANGE" followed by the line range, and then the corrected code for that line range and a brief explanation of the change. Do this only if you have found the underlying bug!',vscpp("br",null),"- Otherwise, print a list of up to five keywords, classes, or function calls from one of the files that you need more information about to diagnose the failure. Make sure the most relevant keywords are written first. ",i===0&&"You won't get another chance to ask for more info.",vscpp("br",null),URe):vscpp(vscppf,null,"- Don't try to fix the failure yet. Instead, print a list of keywords, classes, or function calls that you need more information about to diagnose the failure!",vscpp("br",null),URe,vscpp("br",null)),"- NEVER ask the user for additional information or clarification, or give them suggestions to review code themselves. Instead, print keywords that should be investigated.",vscpp("br",null)),vscpp("br",null),i>0&&vscpp(vscppf,null,"# Example",vscpp("br",null),Crt,vscpp("br",null),vscpp("br",null)),n&&vscpp(vscppf,null,"# Example",vscpp("br",null),Irt,vscpp("br",null))),vscpp(vM,{chunk:e,failure:r,priority:800}))}},Crt=vscpp(vscppf,null,"User:",vscpp("br",null),`\`\`\`file:///project/my.test.ts
test('reverseString test', () => {'{'}
	const value = 'hello';
	const value2 = doReverseString(value);
	assert.deepStrictEquals(value2, 'olleh'); FAILURE_MESSAGE: Expected undefinedolleh to equal olleh
{'}'});
\`\`\`

Implementation of \`doReverseString\` in file:///project/my.test.ts:

\`\`\`file:///project/strings.ts
20: function doReverseString(str: string): number {
21:	return stringUtils.reverseString(str);
22: }
\`\`\`
`,vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"I need more information about:",vscpp("br",null),"- stringUtils.reverseString",vscpp("br",null)),Irt=vscpp(vscppf,null,"User:",vscpp("br",null),`\`\`\`file:///project/my.test.ts
test('reverseString test', () => {'{'}
	const value = 'hello';
	const value2 = doReverseString(value);
	assert.deepStrictEquals(value2, 'olleh'); FAILURE_MESSAGE: Expected undefinedolleh to equal olleh
{'}'});
\`\`\`

Implementation of \`doReverseString\`:

\`\`\`file:///project/my.test.ts
20: function doReverseString(str: string): number {
21:	return stringUtils.reverseString(str);
22: }

Implementation of \`stringUtils.reverseString\`:

\`\`\`file:///project/strings.ts
32: function reverseString(str) {
33:	let out = '';
34:	for (let i = str.length; i >= 0; i--) {
35:		out += str[i];
36:	}
37:	return out;
38: }
\`\`\`
`,vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"SOLUTION: file:///project/stringUtils.ts",vscpp("br",null),"RANGE: 32-38",vscpp("br",null),`\`\`\`typescript
function reverseString(str) {
	let out = '';
	for (let i = str.length - 1; i >= 0; i--) {
		out += str[i];
	}
	return out;
}
\`\`\`
`,vscpp("br",null),"`reverseString` had an off-by-one error which started past the end of the string. I fixed your code by making `i` begin at `str.length - 1` instead of `str.length`.",vscpp("br",null)),URe=vscpp(vscppf,null,'- Write your response in a list in the form "- [keyword] in [file where keyword is used]". Do not include any extra text. Keywords should be EXACT substrings from the code the user provides, do not modify them.',vscpp("br",null));var SM=W(st());var wrt=/^[\*\-]\s*[`"']?([^<([`"'\s]+).*? +in +(.+)/gm,qRe=": ",jRe=(t,e)=>[...t.matchAll(wrt)].flatMap(([,r,n])=>r.split(",").map(i=>({keyword:i,fileUri:n,interest:"IMPLEMENTATION"}))).map(({keyword:r,fileUri:n,interest:i})=>{let o=bM(e,r,n)||bM(e,r);if(o||/^.+?(\b[^\b]+)/.exec(r)&&(bM(e,r[1],n)||bM(e,r[1])),!o)return;let{index:s,chunk:a}=o;if(a.sources.length){let l=a.sources.find(f=>f.start<=s&&f.end>s)||{start:0,end:0,range:a.range},d=a.text.lastIndexOf(`
`,s),p=t_(a.text.slice(l.start,s),`
`);return{keyword:r,interest:i,location:{uri:a.file,position:new jn(l.range.startLineNumber+p-1,p===0?l.range.startColumn+s-l.start:s-(d+1))}}}let c=a.text.lastIndexOf(`
`,s)+1,u=a.text.indexOf(qRe,c);return{keyword:r,interest:i,location:{uri:a.file,position:new jn(Number(a.text.slice(c,u))-1,s-(u+qRe.length))}}}).filter(n_);function bM(t,e,r){let n=r?t.filter(o=>o.file.toString().toLowerCase()===r.toLowerCase()):t,i=new RegExp(`^(?!~:).*\\b(${G0(e)})\\b`,"m");for(let o=n.length-1;o>=0;o--){let s=n[o],a=i.exec(s.text);if(a)return{chunk:s,index:a.index+a[0].length-a[1].length}}}var zRe=async(t,e,r,n)=>{let i=await r.readFile(t.uri),o=new TextDecoder().decode(i);return Rrt(t,e,o,n)},Rrt=async(t,e,r,n)=>{let i=new xl(r),o=new ht(t.range.start.line+1,1,t.range.end.line+1,1);return o.endLineNumber-o.startLineNumber<=1&&(o=await Prt(t,e,r,i,n)||o.setEndPosition(o.startLineNumber+50,1)),Art(o,r,t.uri,i)},Art=(t,e,r,n)=>{let i=n.positionToOffset(t.getStartPosition()),o=n.positionToOffset(t.getEndPosition());return{text:e.substring(i,o),range:t,file:r,sources:[{start:0,end:o-i,range:t}]}},Prt=async(t,e,r,n,i)=>{let o=Np(Dm(t.uri).languageId);if(!o)return;let a=await i.getTreeSitterASTForWASMLanguage(o,r).getFunctionDefinitions(),c=a.find(p=>p.identifier===e);if(c)return OJ(n,c);let u=n.positionToOffset(new $r(t.range.start.line+1,1));a.sort((p,f)=>p.startIndex-f.startIndex);let l,d;for(let p of a){if(p.startIndex>u){d=p;break}p.startIndex<=u&&p.endIndex>=u&&(l=p)}return d&&(!l||d.startIndex>=l.startIndex&&d.endIndex<=l.endIndex)?OJ(n,d):l&&OJ(n,l)},OJ=(t,e)=>{let r=t.offsetToPosition(e.startIndex),n=t.offsetToPosition(e.endIndex);return new ht(r.lineNumber-1,1,n.lineNumber+1,1)},VRe=async(t,e,r,n)=>{let i=Np(Dm(n).languageId);if(!i)return s=>"";let o=await t.getSemanticChunkTree(i,e);return s=>{let a=r.positionToOffset(s.getStartPosition()),c=r.positionToOffset(s.getEndPosition()),u=Drt(o.roots,f=>f.info.mainBlock.startIndex<=a&&f.info.mainBlock.endIndex>=a),l="",d=(f,m)=>a<=f&&m<=c?!1:(l&&!l.endsWith(`
`)&&(l+=`
`),l+=e.slice(f,m),!0),p=f=>{for(let v of f.info.detailBlocks.comments)d(v.startIndex,v.endIndex);let m=/\s*\{\s/.exec(e.slice(f.info.detailBlocks.body.startIndex,f.info.detailBlocks.body.endIndex))?.[0].length||0,h=r.startOffsetOfLineContaining(f.info.mainBlock.startIndex),g=f.info.detailBlocks.body.startIndex+m;d(h,g)&&(l+=" ... "),f.children.forEach(p)};return u.forEach(p),l}},krt=/@@ -\d+,\d+ \+(\d+),(\d+) @@/g,$Re=async(t,{source:e,convert:r},n,i)=>{let o=[];for(let s of i.matchAll(krt)){let[,a,c]=s.map(Number),u=new $r(a,1),l=new $r(a+c,1);o.push({uri:n,start:u,end:l,convert:r,source:e,interest:"CHANGED",tokensWithoutExpansion:t.tokenLength(e.slice(r.positionToOffset(new $r(a,1)),r.positionToOffset(new $r(a+c,1))))})}return o},Drt=(t,e)=>{let r=n=>{let i=n.children.map(r).filter(n_);return i.length||e(n)?{children:i,info:n.info}:void 0};return t.map(r).filter(n_)},WRe=(t,e)=>new Proxy(t,{get(r,n){return n==="modelMaxPromptTokens"?e:r[n]}}),MJ=3,_M=2,HRe=/^\s*/,KRe=/\S/,YRe=(t,e,r)=>{let n=r.split(`
`),i=t.split(`
`),o=i.map(f=>f.trim()),s=e.start.line,a=o[0];if(a.length>=MJ)for(let f=0;f<=_M*2;f++){let m=f%2===0?1:-1,h=e.start.line+m*Math.floor(f/2);if(n[h].trim()===a){s=h;break}}let c=e.end.line,u=HRe.exec(n[s])[0],l=HRe.exec(i[0])[0];if(GRe(l,i[i.length-1])&&!i.slice(1,-1).some(f=>GRe(l,f)))for(let f=0;f<=_M*2;f++){let m=f%2===0?1:-1,h=c+m*Math.floor(f/2);if(n[h].startsWith(u)&&KRe.test(n[h][u.length]))return new Xe(s,0,h,Number.MAX_SAFE_INTEGER)}let d=0,p=0;for(;d<o.length-1&&p<(d+1)*MJ;)p+=o[o.length-1-d].length,d++;if(p>d*MJ)e:for(let f=e.end.line-_M;f<=e.end.line+_M;f++){for(let m=0;m<d;m++)if(n[f+m].trim()!==o[o.length-1-m])continue e;c=f;break}return new Xe(s,0,c,Number.MAX_SAFE_INTEGER)};function GRe(t,e){return e.length>t.length&&e.startsWith(t)&&e[t.length].match(KRe)}function Nrt(t,e,r){let n=lC(t,(u,l)=>u.start.lineNumber-l.start.lineNumber).start,i=lC(t,(u,l)=>l.end.lineNumber-u.end.lineNumber).end,o=e?new $r(Math.max(1,n.lineNumber-Math.ceil(e*2/3)),1):n,s=e-(n.lineNumber-o.lineNumber),a=s>0?new $r(i.lineNumber+s,1):i,c=r(new ht(o.lineNumber,1,a.lineNumber,1));return{start:o,end:a,context:c?c.split(`
`).map((u,l)=>`~: ${u}`).join(`
`)+`
`:"",snippet:t[0].source.slice(t[0].convert.positionToOffset(o),t[0].convert.positionToOffset(a)).split(`
`).map((u,l)=>`${o.lineNumber+l}: ${u}`).join(`
`),original:t}}function Lrt(t){return QRe(t)+"```"+t.original[0].uri.toString()+`
`+t.context+t.snippet+"\n```\n"}function Ort({start:t,end:e,snippet:r,context:n,original:i}){let o=new ht(t.lineNumber,t.column,e.lineNumber,e.column);return{file:i[0].uri,text:n+r,range:o,sources:[]}}function QRe(t){let e=t.original.flatMap(r=>r.keywords||[]);return e.length?`Definition of \`${e.join("` and `")}\`:
`:`Here's code I've been working on that might be related to the failure:
`}function Mrt(t){return t.start.lineNumber>1||t.end.lineNumber<t.original[0].convert.lines}var xM=class extends K{async prepare(e){let{chunks:r,parser:n,tokenizer:i}=this.props,o=0,s,a=new kn;for(let c of r)a.has(c.uri)||a.set(c.uri,await VRe(n,c.source,c.convert,c.uri));for(;;){let c=(s?s.chunks.map(d=>d.original):r.map(d=>[d])).map(d=>Nrt(d,o,a.get(d[0].uri))),u=c.map(Lrt).join(""),l=i.tokenLength(u);if(s&&(l*1.1>e.tokenBudget||!c.some(Mrt)))return Promise.resolve({chunks:c});for(let d=0;d<c.length;d++){let p=c[d],f=p.original[0].uri.toString(),m={startLineNumber:p.start.lineNumber,startColumn:1,endLineNumber:p.end.lineNumber,endColumn:1};for(let h=d+1;h<c.length;h++){let g=c[h];if(g.original[0].uri.toString()!==f)continue;let v={startLineNumber:g.start.lineNumber,startColumn:1,endLineNumber:g.end.lineNumber,endColumn:1};ht.areIntersectingOrTouching(m,v)&&(p.original.push(...g.original),c.splice(h,1),h--)}}o++,s={tokens:l,chunks:c}}}render({chunks:e}){return vscpp(vscppf,null,vscpp("meta",{value:new v2(e.map(Ort))}),e.map((r,n)=>vscpp(SM.UserMessage,{priority:100-(e.length-n)},QRe(r),vscpp(Be,{languageId:r.original[0].uri.toString(),uri:r.original[0].uri,code:r.context+r.snippet}),vscpp("br",null))))}},v2=class extends SM.PromptMetadata{constructor(r){super();this.chunks=r}};var Frt=1e3,XRe="SOLUTION:",Urt=/RANGE:.*?([0-9]+).*?([0-9]+)/i;async function Brt(t,e,r){let n=t.indexOf(XRe);if(n===-1)return;n!==0&&(t=t.slice(n)+`
`+t.slice(0,n)),t=t.trim();let i=t.split(`
`),o;try{o=ut.parse(i[0].slice(XRe.length).trim())}catch{}let s,a=Urt.exec(i[1]);a&&(s={start:+a[1],end:+a[2]});let c=Ya(t);if(!c.length)return;let[u]=c,l=i.slice(u.startLine).join(`
`),d;if(o&&s){let p="";for(let g of e)if(g.file.toString().toLowerCase()===o.toString().toLowerCase()){let v=new RegExp(`^${s.start}: (\\s*)`,"m").exec(g.text);if(v){p=v[1];break}}let f=u.code;u.code.startsWith(p)||(f=u.code.split(`
`).map(g=>p+g).join(`
`));let m=new Xe(s.start-1,0,s.end-1,Number.MAX_SAFE_INTEGER),h=YRe(f,m,(await r(o)).source);d=[new Jn(h,f)]}return{text:l,uri:o,code:u.code,explaination:i.slice(u.endLine).join(`
`).trim(),edits:d}}var qrt=new Set(["rust"]),FJ=class{constructor(e,r){this.testLocation=r;this.fileCache=new kn;this.globallySeen=new Set;this._promise=new Rp;this.turnsUsed=0;this.tokensUsed=0;this.endpoint=e.endpoint,this.progress=e.progress,this.token=e.token,this.accessor=e.accessor,this.turnsBudget=e.turnsBudget,this.timeBudget=e.timeBudget,this.tokenBudget=e.tokenBudget,this.deadline=Date.now()+this.timeBudget;let n=e.accessor.get(ue);this.logger=n.getPromptResponseLogger("FailingTest"),this.genericLogger=n.getLogger("FailingTest"),this.gitRepo=e.accessor.safeGet(oc)?.getExtensionApi()?.getRepository(this.testLocation.uri)||void 0}get promise(){return this._promise.p}get hasFoundSolution(){return this._promise.isResolved}get possibleExplanation(){return this._possibleExplanation}foundSolution(e){this._promise.complete(e)}gotPossibleExplanation(e){(!this._possibleExplanation||e.length>this._possibleExplanation.length)&&(this._possibleExplanation=e)}takeTurn(){return this.turnsUsed++,Date.now()+Frt>=this.deadline?0:Math.max(0,this.turnsBudget-this.turnsUsed)}throwIfCancelled(){if(this.token.isCancellationRequested||this.hasFoundSolution)throw new ys}async getSymbols(e){let r=this.accessor.get(De),n=this.accessor.get(ge),i=new Map,o=await this.getDefinitionLocations(e);this.throwIfCancelled();let s=new Set(o.flatMap(({links:c})=>c.map(u=>u.link.uri.fsPath))),a=new Set;if(this.gitRepo)try{a=await this.gitRepo.checkIgnore([...s])}catch{}for(let{keyword:c,links:u}of o)for(let{interest:l,link:d}of u){if(a.has(d.uri.fsPath)||await r.isCopilotIgnored(d.uri)||d.uri.toString()===this.testLocation.uri.toString()&&!qrt.has(Dm(d.uri).languageId))continue;d.range.isEmpty&&(d.range=new Xe(d.range.start,d.range.end.with(d.range.start.line+5)));let p=new $r(d.range.start.line+1,1),f=d.range.isEmpty?new $r(p.lineNumber+10,1):new $r(d.range.end.line+1,d.range.end.character+1),m=[l,d.uri.toString(),d.range.start.line].join("\0");if(this.globallySeen.has(m))continue;let h=i.get(m);if(h){h.keywords.push(c);continue}try{let g=await this.readFile(d.uri);i.set(m,{keywords:[c],interest:l,uri:d.uri,start:p,end:f,tokensWithoutExpansion:n.tokenLength(g.source.slice(g.convert.positionToOffset(p),g.convert.positionToOffset(f))),...g}),this.progress.report(new AP(d))}catch{}}for(let c of i.keys())this.globallySeen.add(c);return[...i.values()]}async readFile(e){let r=this.fileCache.get(e);return r||(r=this.accessor.get(fn).readFile(e).then(n=>new TextDecoder().decode(n)).then(n=>({source:n,convert:new xl(n)})),this.fileCache.set(e,r)),r}async getDefinitionLocations(e){let r=this.accessor.get(hi);return Promise.all(e.map(async({keyword:n,interest:i,location:o})=>{let s=o.position.translate(0,n.length-1),a=o.uri,c=()=>r.getDefinitions(a,s).then(p=>p.length?p:r.getImplementations(a,s)).then(p=>p.length?{interest:"DEFINITION",link:p[0]}:void 0),u=()=>r.getImplementations(a,s).then(p=>p.length?p:r.getDefinitions(a,s)).then(p=>p.length?{interest:"IMPLEMENTATION",link:p[0]}:void 0),l=[];(i==="DEFINITION"||i==="BOTH")&&l.push(c()),(i==="IMPLEMENTATION"||i==="BOTH")&&l.push(u());let d=(await Promise.all(l)).filter(n_);return{keyword:n,links:d.map(p=>"targetUri"in p.link?{interest:p.interest,link:new Ea(p.link.targetUri,p.link.targetRange)}:p)}}))}};var TM=class t{constructor(e,r,n){this.context=e;this.testFailure=r;this.testLocation=n}static create(e,r,n){let i=_re(r.task.messages,o=>o.location);return(!i||n.uri.toString()!==i.uri.toString())&&(i=n),new t(new FJ(e,n),r,n)}async tryGetInitialGitContext(){let e=this.context.accessor.get(ge),r=this.context.gitRepo;if(!r)return[];let n=[],i=await r.diffWithHEAD();return await Promise.all(i.map(async o=>{if(o.status===2||o.status===6)return;let[s,a]=await Promise.all([r.diffWithHEAD(o.uri.fsPath),this.context.readFile(o.uri)]);n.push(...await $Re(e,a,o.uri,s))})),n}async climb(){let e=await zRe(this.testLocation,this.testFailure.snapshot.label,this.context.accessor.get(fn),this.context.accessor.get(xt));if(!e)throw new Error("Could not find semantic information for the test location");let r=[];try{r=await this.tryGetInitialGitContext()}catch(o){this.context.genericLogger.warn("Could not get git context for test failure",o)}let n=await Promise.race([this.context.promise.then(o=>({type:0,solution:o})),this.climbInner(this.context,e,{symbols:[],activity:r,name:`"${this.testFailure.snapshot.label}"`,prefixTokens:0,tokens:0}).then(()=>({type:2,possibleSolution:this.context.possibleExplanation}),o=>{if(Ep(o))return{type:1,possibleSolution:this.context.possibleExplanation};throw o})]);return this.context.accessor.get(Ee).sendMSFTTelemetryEvent("intent.fixTestFailure.outcome",{outcome:n.type===0?"solution":n.type===1?"cancelled":"nosolution",languageId:Dm(this.testLocation.uri).languageId},{requestsMade:this.context.turnsUsed,tokenCount:this.context.tokensUsed}),n}async climbInner(e,r,n,i=!1){let{endpoint:o,progress:s,token:a,accessor:c}=this.context,u=c.get(Ee),l=c.get(Jt),d=n.name,p=e.takeTurn();i&&(p=0);let f=c.get(ge),m=await new Je(o,yM,{testFailure:this.testFailure,chunk:r,hasChunks:!!(n.activity.length||n.symbols.length),turnsLeft:i?0:p},f,c).render();n.prefixTokens=m.tokenCount;let h=new Je(WRe(o,o.modelMaxPromptTokens-m.tokenCount),xM,{tokenizer:f,parser:c.get(xt),chunks:[...n.activity,...n.symbols]},f,c),g=await h.render();n.tokens=n.prefixTokens+g.tokenCount;let v=m.messages.concat(g.messages);e.tokensUsed+=n.tokens,e.throwIfCancelled(),s.report(new Io(EM.t("Investigating the code around {0}",d))),e.logger.logPrompt(v);let y=await l.fetchOne(v,async T=>{},a,2,o,void 0,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"failingTestMeta"});if(e.throwIfCancelled(),e.logger.logResponse(y),y.type!=="success")throw u.sendMSFTTelemetryEvent("failingTestResolver.error",{type:y.type,reason:y.reason,requestId:y.requestId}),new Error(EM.t("Encountered an error while deciding what test information to collect: ({0}) {1}",y.type,y.reason));let b=[r,...h.getMeta(v2).chunks],x=await Brt(y.value,b,T=>this.context.readFile(T));if(x){e.foundSolution(x);return}let S=jRe(y.value,b);if(p>0){let T=await e.getSymbols(S);await this.chunkAndSendFollowups(e,r,T,n)}S.length||e.gotPossibleExplanation(y.value)}async chunkAndSendFollowups(e,r,n,i){let o=[],s=e.accessor.get(ge);for(let a of n){let c=o[o.length-1],u=a.tokensWithoutExpansion+s.tokenLength("```${tokenizer.tokenLength(symbol.chunk.file.toString())}");!c||u+c.tokens>e.tokenBudget?o.push({activity:i.activity,symbols:[...i.symbols,a],tokens:i.tokens+u,name:i.name,prefixTokens:i.prefixTokens}):(c.symbols.push(a),c.tokens+=u)}for(let a of o){let c=a.symbols.slice(i.symbols.length).flatMap(u=>u.keywords||[]);a.name=c.length>1?EM.t('"{0}" + {1} more symbols...',c[0],c.length-1):`"${c[0]}"`,await this.climbInner(e,r,a)}if(o.length===0)return this.climbInner(e,r,i,!0)}};var BE=class{constructor(){this.id="fixTestFailure";this.locations=[1,2];this.description=xb.t("Propose a fix for the a test failure");this.intentDetectionInput={sampleQuestion:"This test failed, suggest how to fix it."};this.commandInfo={defaultEnablement:!0,allowsEmptyArgs:!0,shouldRepopulate:!0}}static{this.ID="fixTestFailure"}async asSlashCommand(e){if(e.get(gl).isEnabled.get())return{name:this.id,description:this.description}}async invoke(e,r){let n=e.get(gl),i;(g=>(g[g.Any=0]="Any",g[g.SameDocument=1]="SameDocument",g[g.InViewRange=2]="InViewRange",g[g.InSelection=3]="InSelection"))(i||={});let o,s=0,a=r.documentContext?.document.uri.toString();for(let p of n.getAllFailures())if(!o||!o.snapshot.uri||!o.snapshot.range)o=p;else if(p.snapshot.range&&p.snapshot.uri?.toString()===a&&(s<1&&(o=p,s=1),p.snapshot.range.intersection(r.documentContext.wholeRange)&&(o=p,s=2),p.snapshot.range.intersection(r.documentContext.selection))){o=p,s=3;break}if(!o)throw new BR(xb.t("No test failures found."));let{range:c,uri:u}=o.snapshot;if(!u||!c)throw new BR(xb.t("Tests have no associated editor location."));let l=r.location,d=await e.get(Ue).getUserRequestEndpoint(l,this.id,"gpt-4");return new UJ(e,this,d,l,o,{uri:u,range:c})}},UJ=class{constructor(e,r,n,i,o,s){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.createReplyInterpreter=e=>new qJ(this.lastSolutionForInterpreter);let a=this;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=new Je(l,BJ,{testFailure:o,chatVariables:d,query:g,endpoint:l,progress:p,chatLocation:i,location:s,history:u.turns},e.get(ge),e),y=await v.render(p,m);return i===1&&(a.lastSolutionForInterpreter=v.getMeta(CM)?.value),y}}}},BJ=class extends K{async prepare(e,r,n=Vr.None){let{progress:i}=this.props,s=await TM.create({accessor:this.accessor,endpoint:this.props.endpoint,progress:i,token:n,tokenBudget:e.tokenBudget,timeBudget:1/0,turnsBudget:6},this.props.testFailure,this.props.location).climb();if(this.props.chatLocation===1)return{outcome:s};s.type===0?s.solution.edits?(i.report(new pn(new v0(s.solution.explaination))),i.report(new $s(s.solution.uri,s.solution.edits))):i.report(new pn(new v0(s.solution.text))):s.possibleSolution?i.report(new pn(new v0(s.possibleSolution))):s.type===1?(i.report(new pn(JRe())),i.report(new tie({command:"workbench.action.openSettings",title:xb.t("Go to Settings"),arguments:[{query:"github.copilot.config.testFixLimits"}]}))):i.report(new pn(ZRe()))}render(e,r){return vscpp(vscppf,null,vscpp("meta",{value:new CM(e?.outcome)}))}},JRe=()=>xb.t("Unfortunately I was unable to find a solution to this test failure in the time alloted. My time limit can be configured in your settings."),ZRe=()=>xb.t("Unfortunately I was unable to find a solution to this test failure. Please try providing more context."),CM=class extends bu{constructor(r){super();this.value=r}},qJ=class{constructor(e){this.solution=e}update(e){return{shouldFinish:!0}}async finish(){let e=this.solution||{type:1};if(e.type!==0){if(e.possibleSolution)return{type:"conversational",content:e.possibleSolution};if(e.type===1)return{type:"conversational",content:JRe()};if(e.type===2)return{type:"conversational",content:ZRe()}}let r=e.solution;if(!r.uri||!r.edits)return{type:"conversational",content:r.text};let n=new oC;return n.set(r.uri,r.edits),{type:"workspaceEdit",workspaceEdit:n,content:r.explaination}}};var Hrt={3:"gpt-3.5-turbo",4:"gpt-4",cl:"code-llama"},qE=class{constructor(){this.id="fix";this.locations=[1,2];this.description=e2e.t("Propose a fix for the problems in the selected code");this.intentDetectionInput={sampleQuestion:"There is a problem in this code. Rewrite the code to show it with the bug fixed."};this.commandInfo=void 0}static{this.ID="fix"}async invoke(e,r){if(this.shouldDelegateToTestFixer(e,r))return new BE().invoke(e,r);let n=r.documentContext;if(!n)throw new Error("Open a file to fix an issue");let i=r.location;if(i===2)return aE.createIntentInvocation(this,e,r,hM);let o=r.intentArgument?Hrt[r.intentArgument]:void 0,s=await e.get(Ue).getUserRequestEndpoint(i,this.id,o),a=g2;return Yt(n.document.uri)&&n.document.languageId==="python"?a=fM:(s.model==="gpt-4"||s.model==="copilot-preview-gpt4-centralus"||s.model==="gpt-4-0125-adaf089e")&&(a=g2),sM.createIntentInvocation(this,e,r,a,s)}shouldDelegateToTestFixer(e,r){let n=e.safeGet(gl);return!n?.isEnabled||r.documentContext?.selection.isEmpty===!1?!1:!!(r.location===1&&r.documentContext&&n.getFailureAtPosition(r.documentContext.document.uri,r.documentContext.selection.end)||n.lastResultsFrom&&Date.now()-n.lastResultsFrom<1e4&&!Mu.isEmpty(n.getAllFailures()))}};var HJ=W(_r());var IM=class{constructor(){this.id="newNotebook";this.description=HJ.t("Create a new Jupyter Notebook");this.locations=[2];this.intentDetectionInput={modelDescription:"Creates a new Jupyter Notebook for tasks such as data analysis, scientific computing, and machine learning.",sampleQuestion:"How do I create a notebook to load data from a csv file?"};this.commandInfo={allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:HJ.t("How do I create a notebook to load data from a csv file?")}}static{this.ID="newNotebook"}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return new GJ(e,this,i,n)}},GJ=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.commands=async(e,r)=>{let n=(r.response?.message??"").replace(/\n/g,""),o=/```(?:json)?(.+)/g.exec(n);if(o)try{let s=o[1],a=s.indexOf("```"),c=a===-1?s:s.substring(0,a),u=JSON.parse(c);return Promise.resolve([{command:"github.copilot.newNotebook",arguments:[{turn:r,outline:u}],title:"Create Notebook"}])}catch{}return[]};this.responseProcessor=new T8;this.linkification={disable:!0};this.promptCrafter=new class{async buildPrompt(s,a,c,u,l,d){let f=s.getLatestTurn().request.message,m=s.turns.length>1?s.turns.slice(0,-1):[];return await new Je(a,x8,{query:f,history:m,chatVariables:c},e.get(ge),e).render(u,d)}}}};var y2=W(_r()),b2=W(require("path"));var t2e="Review the currently selected code.",Grt=y2.t("local changes"),wM=class extends Mo{constructor(r){super();this.accessor=r}async createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=[];if(u===Grt){let p=this.accessor.get(Ze),f=await op.getCurrentChanges(this.accessor,"workingTree");(await Promise.all(f.map(async h=>({document:await p.openTextDocument(h.uri),relativeDocumentPath:b2.default.relative(h.repository.rootUri.fsPath,h.uri.fsPath),change:h})))).map(h=>d.push(h))}else{let p=this.accessor.get(Tt).activeTextEditor;p&&d.push({editor:p,document:p.document,relativeDocumentPath:b2.default.basename(p.document.uri.fsPath),selection:p.selection})}return new Je(n,CE,{query:u,history:l,chatVariables:i,input:d,logService:this.accessor.get(ue)},this.accessor.get(ge),this.accessor)}},RM=class{constructor(){this.id="review";this.locations=[2,1];this.description=y2.t("Review the selected code in your active editor");this.intentDetectionInput={sampleQuestion:t2e}}static{this.ID="review"}async invoke(e,r){let n=r.documentContext,i=r.location,o=await e.get(Ue).getUserRequestEndpoint(i,this.id,"gpt-4");if(i===1){let s=new class extends wM{async buildPrompt(a,c,u,l,d,p){let f=a.getLatestTurn();return f?.request.message===""&&(f.request={message:t2e,type:"user"}),super.buildPrompt(a,c,u,l,d,p)}}(e);return{intent:this,location:i,endpoint:o,promptCrafter:s,createReplyInterpreter:n?a=>new jJ(e,n,a):void 0,linkification:{additionaLinkifiers:[new AM(n.document.uri)]}}}return{intent:this,location:i,endpoint:o,promptCrafter:new wM(e),linkification:{additionaLinkifiers:[new AM(n.document.uri)]}}}},AM=class{constructor(e){this.file=e}async linkify(e,r){let n=FX(e);if(!n.length)return;let i=0,o=[];for(let s of n)o.push(e.substring(i,s.linkOffset)),o.push(D6(e.substring(s.linkOffset,s.linkOffset+s.linkLength),this.file.with({fragment:String(s.from+1)}))),i=s.linkOffset+s.linkLength;return o.push(e.substring(i)),{text:o.join(""),trustedCommands:[uE]}}},jJ=class{constructor(e,r,n){this.accessor=e;this.documentContext=r;this.progress=n;this.updating=!1;this.text="";this.comments=[];this.reviewService=this.accessor.get(sc)}update(e){if(this.text=e,!this.updating){this.updating=!0;let n=new Wo(y2.t({message:`Reviewing your code...
`,comment:"{Locked='](command:workbench.panel.markers.view.focus)'}"}));n.isTrusted={enabledCommands:["workbench.panel.markers.view.focus"]},this.progress.report(new pn(n))}let r=XR([{document:this.documentContext.document,relativeDocumentPath:b2.default.basename(this.documentContext.document.uri.fsPath),selection:this.documentContext.selection}],this.text,!0);return r.length>this.comments.length&&(this.reviewService.addReviewComments(r.slice(this.comments.length)),this.comments=r),{shouldFinish:!1}}async finish(){let e=XR([{document:this.documentContext.document,relativeDocumentPath:b2.default.basename(this.documentContext.document.uri.fsPath),selection:this.documentContext.selection}],this.text,!1);return e.length>this.comments.length&&(this.reviewService.addReviewComments(e.slice(this.comments.length)),this.comments=e),{type:"conversational",content:y2.t("Reviewed your code and generated {0} suggestions.",e.length)}}};var u2e=W(_r());function PM(t,e=!1){let r=t.length,n=0,i="",o=0,s=16,a=0,c=0,u=0,l=0,d=0;function p(b,x){let S=0,T=0;for(;S<b||!x;){let L=t.charCodeAt(n);if(L>=48&&L<=57)T=T*16+L-48;else if(L>=65&&L<=70)T=T*16+L-65+10;else if(L>=97&&L<=102)T=T*16+L-97+10;else break;n++,S++}return S<b&&(T=-1),T}function f(b){n=b,i="",o=0,s=16,d=0}function m(){let b=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&HE(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&HE(t.charCodeAt(n)))for(n++;n<t.length&&HE(t.charCodeAt(n));)n++;else return d=3,t.substring(b,n);let x=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&HE(t.charCodeAt(n))){for(n++;n<t.length&&HE(t.charCodeAt(n));)n++;x=n}else d=3;return t.substring(b,x)}function h(){let b="",x=n;for(;;){if(n>=r){b+=t.substring(x,n),d=2;break}let S=t.charCodeAt(n);if(S===34){b+=t.substring(x,n),n++;break}if(S===92){if(b+=t.substring(x,n),n++,n>=r){d=2;break}switch(t.charCodeAt(n++)){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:let L=p(4,!0);L>=0?b+=String.fromCharCode(L):d=4;break;default:d=5}x=n;continue}if(S>=0&&S<=31)if(_2(S)){b+=t.substring(x,n),d=2;break}else d=6;n++}return b}function g(){if(i="",d=0,o=n,c=a,l=u,n>=r)return o=r,s=17;let b=t.charCodeAt(n);if(zJ(b)){do n++,i+=String.fromCharCode(b),b=t.charCodeAt(n);while(zJ(b));return s=15}if(_2(b))return n++,i+=String.fromCharCode(b),b===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,u=n,s=14;switch(b){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=h(),s=10;case 47:let x=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!_2(t.charCodeAt(n));)n++;return i=t.substring(x,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;let S=r-1,T=!1;for(;n<S;){let L=t.charCodeAt(n);if(L===42&&t.charCodeAt(n+1)===47){n+=2,T=!0;break}n++,_2(L)&&(L===13&&t.charCodeAt(n)===10&&n++,a++,u=n)}return T||(n++,d=1),i=t.substring(x,n),s=13}return i+=String.fromCharCode(b),n++,s=16;case 45:if(i+=String.fromCharCode(b),n++,n===r||!HE(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),s=11;default:for(;n<r&&v(b);)n++,b=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(b),n++,s=16}}function v(b){if(zJ(b)||_2(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){let b;do b=g();while(b>=12&&b<=15);return b}return{setPosition:f,getPosition:()=>n,scan:e?y:g,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>n-o,getTokenStartLine:()=>c,getTokenStartCharacter:()=>o-l,getTokenError:()=>d}}function zJ(t){return t===32||t===9}function _2(t){return t===10||t===13}function HE(t){return t>=48&&t<=57}var r2e;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(r2e||(r2e={}));var kM;(function(t){t.DEFAULT={allowTrailingComma:!1}})(kM||(kM={}));function n2e(t,e=[],r=kM.DEFAULT){let n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}return i2e(t,{onObjectBegin:()=>{let c={};s(c),o.push(i),i=c,n=null},onObjectProperty:c=>{n=c},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(c,u,l)=>{e.push({error:c,offset:u,length:l})}},r),i[0]}function i2e(t,e,r=kM.DEFAULT){let n=PM(t,!1),i=[];function o(X){return X?()=>X(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function s(X){return X?()=>X(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(X){return X?D=>X(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function c(X){return X?D=>X(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let u=s(e.onObjectBegin),l=c(e.onObjectProperty),d=o(e.onObjectEnd),p=s(e.onArrayBegin),f=o(e.onArrayEnd),m=c(e.onLiteralValue),h=a(e.onSeparator),g=o(e.onComment),v=a(e.onError),y=r&&r.disallowComments,b=r&&r.allowTrailingComma;function x(){for(;;){let X=n.scan();switch(n.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:y||S(11);break;case 2:S(12);break;case 6:S(16);break}switch(X){case 12:case 13:y?S(10):g();break;case 16:S(1);break;case 15:case 14:break;default:return X}}}function S(X,D=[],E=[]){if(v(X),D.length+E.length>0){let A=n.getToken();for(;A!==17;){if(D.indexOf(A)!==-1){x();break}else if(E.indexOf(A)!==-1)break;A=x()}}}function T(X){let D=n.getTokenValue();return X?m(D):(l(D),i.push(D)),x(),!0}function L(){switch(n.getToken()){case 11:let X=n.getTokenValue(),D=Number(X);isNaN(D)&&(S(2),D=0),m(D);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return x(),!0}function M(){return n.getToken()!==10?(S(3,[],[2,5]),!1):(T(!1),n.getToken()===6?(h(":"),x(),J()||S(4,[],[2,5])):S(5,[],[2,5]),i.pop(),!0)}function j(){u(),x();let X=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(X||S(4,[],[]),h(","),x(),n.getToken()===2&&b)break}else X&&S(6,[],[]);M()||S(4,[],[2,5]),X=!0}return d(),n.getToken()!==2?S(7,[2],[]):x(),!0}function N(){p(),x();let X=!0,D=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(D||S(4,[],[]),h(","),x(),n.getToken()===4&&b)break}else D&&S(6,[],[]);X?(i.push(0),X=!1):i[i.length-1]++,J()||S(4,[],[4,5]),D=!0}return f(),X||i.pop(),n.getToken()!==4?S(8,[4],[]):x(),!0}function J(){switch(n.getToken()){case 3:return N();case 1:return j();case 10:return T(!0);default:return L()}}return x(),n.getToken()===17?r.allowEmptyContent?!0:(S(4,[],[]),!1):J()?(n.getToken()!==17&&S(9,[],[]),!0):(S(4,[],[]),!1)}var o2e;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(o2e||(o2e={}));var s2e;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(s2e||(s2e={}));var DM=n2e;var a2e;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(a2e||(a2e={}));var LM=W(st());var NM=class extends K{render(e,r){return vscpp(vscppf,null,vscpp(LM.SystemMessage,{priority:1e3},"You are a VS Code search expert who helps to write search queries for text in a workspace. Users want to search across a whole workspace. Your response will contain parameters to use in the search that targets what the user wants.",vscpp("br",null),vscpp(qr,null),vscpp(sn,null),vscpp(di,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"The user's question is ALWAYS related to search or replace. When the user's question does not seem to be related to searching or replacing, you MUST assume that they're searching for or replacing what they are describing.",vscpp("br",null),`For example, if the user says "emojis", try appending "I'm looking for _____" to the beginning (e.g. I'm looking for emojis) to make more sense of it.`,vscpp("br",null),vscpp("br",null),"For all valid questions, you MUST respond with a JSON object with search parameters to use.",vscpp("br",null),'- Your answer MUST wrap the JSON object in "[ARGS START]" and "[ARGS END]". "[ARGS START]" must be on a new line.',vscpp("br",null),'- Your answer MUST have an explanation in full, human-readable sentences. This goes before the "[ARGS START]" line.',vscpp("br",null),vscpp("br",null),'If you put a regex in the "query" parameter, make sure to set "isRegex" to true.',vscpp("br",null),'If you put a regex in the "query" parameter, do not start and/or end with forward slashes to denote a regex literal.',vscpp("br",null),"You MUST NOT give an answer with an empty-string query parameter.",vscpp("br",null),vscpp("br",null),'The "replace" string will be used to replace the query-matched search results.',vscpp("br",null),vscpp("br",null),'If you want to target certain files, set "filesToInclude" to a glob pattern. DO NOT assume the "filesToInclude" and "filesToExclude" without being very sure that the user wants to target these files!',vscpp("br",null),vscpp("br",null),'If the query is case sensitive, set "isCaseSensitive" to true.',vscpp("br",null),vscpp("br",null),"By default, all string fields are the empty string, and all boolean fields are false. Only list the fields you want to change.",vscpp("br",null),vscpp("br",null),"You should write the JSON object of the search parameters in the following format:",vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": ...,',vscpp("br",null),'	"replace": ...,',vscpp("br",null),'	"filesToInclude": ...,',vscpp("br",null),'	"filesToExclude": ...,',vscpp("br",null),'	"isRegex": ...,',vscpp("br",null),'	"isCaseSensitive": ...,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"Examples:",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Search for 'foo' in all files under my 'src' directory.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Populate the query field with 'foo' and specify the files to include as 'src/'.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "foo",',vscpp("br",null),'	"filesToInclude": "src" ,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all CamelCase words in all files under the 'src/extensions' directory.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Perform a regex search for camelCase variables by checking for any word that has a lowercase letter followed by an uppercase letter, followed by any number of lowercase letters. You can use `\\b[a-z]+[A-Z][a-z]+\\b` to acheive this.",vscpp("br",null),"This must be case-sensitive since the capitalization of the letters in our regex matters.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "\\\\b[a-z]+[A-Z][a-z]+\\\\b",',vscpp("br",null),'	"filesToInclude": "src/extensions" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all hex color codes in css files",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Perform a search for 6-digit or 3-digit hex color codes using the regex `#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\b`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\\\b",',vscpp("br",null),'	"filesToInclude": "*.css" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all HTTPS links in markdown.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Search all URLs that have the HTTPS protocol in a markdown file. Make sure to include all valid URL characters in their respective places. This regex should achieve this: `https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#()?&//=]*)`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "https?:\\\\/\\\\/(www\\\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{2,256}\\\\.[a-z]{2,6}\\\\b([-a-zA-Z0-9@:%_\\\\+.~#()?&//=]*)",',vscpp("br",null),'	"filesToInclude": "*.md" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Replace all YYYY-MM-DD dates with MM/DD/YYYY dates. Don't do this in typescript files.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"You will need to use the regex `(\\d{4})-(\\d{2})-(\\d{2})` to match the YYYY-MM-DD date format. Then, you will need to use the replace string `$2/$3/$1` to replace the date with the MM/DD/YYYY format.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "(\\\\d{4})-(\\\\d{2})-(\\\\d{2})",',vscpp("br",null),'	"replace: "$2/$3/$1",',vscpp("br",null),'	"filesToExclude": "*.ts",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Replace all camel case variable names with snake case variable names.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To replace all camel case variables with snake case, we will need to:",vscpp("br",null),"1. Find all sequences of lowercase letters succeeded by uppercase letters. Use `([a-z]+)([A-Z])` to capture these sequences.",vscpp("br",null),"2. Separate them with an underscore character. `$1_$2` does this.",vscpp("br",null),"3. Convert both characters to lowercase. Adjust the previous replace text to be `\\l$1_\\l$2`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "([a-z]+)([A-Z])",',vscpp("br",null),'	"replace: "\\\\l$1_\\\\l$2",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"alphanumeric",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To find all alphanumeric characters, you can use the regex `[a-zA-Z0-9]`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "[a-zA-Z0-9]",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"link",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To find all web links, use the regex `https?:\\/\\/\\S+`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "https?:\\\\/\\\\/\\\\S+",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),'Search for actionbar files outside of my "extensions" directoy',vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To do this, use the query `actionbar` in all files except the ones in `extensions`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "actionbar",',vscpp("br",null),'	"filesToExclude": "extensions",',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"typescript for loop",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),'To look for "for" loops in most languages, use the query `for\\s*\\(`.',vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "for\\s*\\(",',vscpp("br",null),'	"isRegex: true,',vscpp("br",null),'	"filesToInclude: "*.ts"',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(Ht,{priority:600,history:this.props.history})),vscpp(_u,{priority:700}),vscpp(In,{priority:800,document:this.props.document,range:this.props.selection}),vscpp(LM.UserMessage,{priority:900},this.props.query))}};function Qrt(t){if(!t)return[];let e=[],r={query:t.query??"",replace:t.replace??"",filesToInclude:t.filesToInclude??"",filesToExclude:t.filesToExclude??"",isRegex:t.isRegex??!1,isCaseSensitive:t.isRegex??!1};return e.push({command:"github.copilot.executeSearch",arguments:[r],title:"Search"}),e}function c2e(t){let e=Ya(t).at(0),r;if(e){let n;try{n=DM(e.code)}catch{}n&&(r=n)}return r}function Xrt(t){if(!t)return[];let e=[`| Parameter  | Value |
`,`| ------ | ----- |
`];for(let[r,n]of Object.entries(t)){if(n==="")continue;let i=n;(typeof n=="string"||n instanceof String)&&(i=n.replace(/\|/g,"\\|")),e.push(`| ${r} | \`${i}\` |
`)}return e.push(`
`),e}var Jrt="Search for 'foo' in all files under my 'src' directory",VJ=class extends Mo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new Je(n,NM,{query:u,history:l},this.accessor.get(ge),this.accessor)}},OM=class{constructor(){this.id="search";this.locations=[2];this.description=u2e.t("Generate query parameters for workspace search");this.intentDetectionInput={sampleQuestion:Jrt};this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:Ap}}static{this.ID="search"}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return{intent:this,location:n,endpoint:i,promptCrafter:new VJ(e),responseProcessor:new bE([{start:"[ARGS END]",stop:"[ARGS START]"}],o=>Xrt(c2e(o.join("")))),commands:async(o,s)=>{let a=c2e(s.response?.message??"");return Qrt(a)}}}};var x2=W(_r());var $J=class extends Mo{constructor(r){super();this.accessor=r}async createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=await e2(this.accessor,1e3,a);return new Je(n,PE,{query:u,history:l,fileTree:d},this.accessor.get(ge),this.accessor)}},MM=class{constructor(){this.id="semanticSearch";this.locations=[2];this.description=x2.t("Find relevant code to your query");this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:!1};this.intentDetectionInput={sampleQuestion:"Where is the toolbar code?"}}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return{intent:this,location:n,endpoint:i,promptCrafter:new $J(e),responseProcessor:new WJ(e,i)}}},WJ=class{constructor(e,r){this.accessor=e;this.endpoint=r}async processResponse(e,r,n,i,o){let s=r[r.length-1].content,a=0,c="";for await(let{delta:l}of n)a+=l.text.length,c+=l.text;i.progress(x2.t("Looking for relevant code"));let u=RE(s,c);return Zrt(this.accessor,this.endpoint,s,u,o).then(l=>ent(this.accessor,l,i))}};async function Zrt(t,e,r,n,i){let o=t.get($g),s=await Y0(t,{valueFor4096:8,maxMultiplier:4});return QX(o,e,r,n,s,i,!0)}function ent(t,e,r){if(e.length===0){let o=x2.t(`No relevant code found. Please be more specific.
`);return r.markdown(o),o}r.markdown(x2.t(`Here is some relevant code:

`));let n=t.get(Ze),i="";for(let o of e)i+=tnt(o,r,n);return i}function tnt(t,e,r){let n=[],o=`## ${Og(r,t.file)}

`;return e.markdown(o),n.push(o),t.locations.forEach(s=>{let a={uri:t.file,range:Fm(s.range)},c=s.range.startLineNumber,u=s.range.endLineNumber,l=c+1===u?`Line ${c+1}`:`Lines ${c+1}-${u}`;e.markdown("- "),e.anchor(a,l),e.markdown(`

`),n.push(l+`

`),e.markdown(s.code+`
`),n.push(s.code+`
`)}),n.join("")}var d2e=W(_r());var GE=W(st());var FM=class extends K{render(e){return vscpp(vscppf,null,vscpp(GE.SystemMessage,{priority:1e3},"You are a programmer who specializes in using the command line. Your task is to help the Developer craft a command to run on the command line.",vscpp("br",null),vscpp(qr,null),vscpp(Br,null),vscpp(di,null),vscpp(Tr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",`
1. Read the provided relevant workspace information (file names, project files in the project root) to understand the user's workspace.`,`
2. Generate a response that clearly and accurately answers the user's question. In your response, follow the following:
    - Prefer single line commands.
    - Omit an explanation unless the suggestion is complex, if an explanation is included then be concise.
    - Provide the command suggestions using the active shell and operating system.
    - When there is text that needs to be replaced in the suggestion, prefix the text with '{', suffix the text with '}' and use underscores instead of whitespace. Only do this when the replacement text is NOT provided.
    - Say "I'm not quite sure how to do that." when you aren't confident in your explanation`,l2e(this.props.shellType)?"\n    - Prefer idiomatic PowerShell over aliases for other shells or system utilities. For example use `Stop-Process` or `Get-NetTCPConnection` instead of `kill` or `lsof` respectively.\n	- Only use unix utilities when there is no PowerShell equivalent.\n    - Prefer cross-platform PowerShell scripting that works on any operating system.":`
    - Only use a tool like python or perl when it is not possible with the shell.`,`
3. At the end of the response, list all text that needs to be replaced with associated descriptions in the form of a markdown list
`.trim(),vscpp("br",null)),vscpp(GE.SystemMessage,{priority:700},"Examples:",vscpp("br",null),rnt(this.props.shellType)),this.props.history&&vscpp(vscppf,null,vscpp(Ht,{priority:600,history:this.props.history})),vscpp(GE.UserMessage,{priority:800},"The active terminal's shell type is:",vscpp("br",null),this.props.shellType),vscpp(GE.UserMessage,{priority:800},"The active operating system is:",vscpp("br",null),this.props.osName),vscpp(wi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};function rnt(t){let e=['User: How do I revert a specific commit?\nAssistant:\n```sh\ngit revert {commit_id}\n```\n\nUser: How do I commit in git?\nAssistant:\n```sh\ngit commit -m "{message}"\n```'];switch(l2e(t)||e.push("User: go to the foo dir\nAssistant:\n```sh\ncd foo\n```"),t){case"ps1":case"pwsh":case"powershell":{e.push("User: go to the foo dir\nAssistant:\n```pwsh\ncd .\\foo\\\n```\n\nUser: How do I delete a directory?\nAssistant:\n```pwsh\nRemove-Item {dir_name}\n```\n\nUser: create a file called foo\nAssistant:\n```pwsh\nNew-Item -ItemType File -Name foo\n```");break}case"bash":{e.push("User: Print all files starting with \"pre\"\n```bash\nfind . -type f -name 'pre*'\n```");break}default:{e.push("\nUser: How do I print all files recursively within a directory?\nAssistant:\n```sh\nls -lR\n```");break}}return e.join(`

`)}function l2e(t){return t==="ps1"||t==="pwsh"||t==="powershell"}var UM=class{constructor(){this.locations=[2];this.id="terminal";this.description=d2e.t("Ask how to do something in the terminal");this.intentDetectionInput={sampleQuestion:"How do I list files in the terminal"};this.commandInfo=void 0}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return new KJ(e,this,i,n)}},KJ=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;let o=this,s=e.get(St).OS,a=e.get(ao).terminalShellType;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=u.turns.length>1?u.turns.slice(0,-1):[];return await new Je(l,FM,{query:g,chatVariables:d,history:v,osName:s,shellType:a},e.get(ge),o.accessor).render(p,m)}}}async followUps(e,r){let n="Explain the suggested command",i=!1,o=r.response?.message;if(o){let a=Ya(o);if(a.length===0)return[];a.length===1?n=`Explain this command:

${s(a[0])}`:(i=!0,n=`Explain these commands:${a.map(c=>`

${s(c)}`).join("")}`)}return[{prompt:n,label:i?"Explain the suggested commands":"Explain the suggested command"}];function s(a){return`${a.startMarkup}${a.language}
${a.code.trim()}
${a.startMarkup}`}}};var v2e=W(_r());var jE={location:"sameFolder",prefix:"test_",suffixes:[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"]},zE={csharp:{suffixes:["Test"],location:"testFolder"},dart:{suffixes:["_test"],location:"testFolder"},go:{suffixes:["_test"],location:"sameFolder"},java:{suffixes:["Test"],location:"testFolder"},javascript:{suffixes:[".test",".spec"],location:"sameFolder"},javascriptreact:{suffixes:[".test",".spec"],location:"sameFolder"},kotlin:{suffixes:["Test"],location:"testFolder"},php:{suffixes:["Test"],location:"testFolder"},powershell:{suffixes:[".Tests"],location:"testFolder"},python:{prefix:"test_",location:"testFolder"},ruby:{suffixes:["_test","_spec"],location:"testFolder"},rust:{suffixes:[""],location:"testFolder"},swift:{suffixes:["Tests"],location:"testFolder"},typescript:{suffixes:[".test",".spec"],location:"sameFolder"},typescriptreact:{suffixes:[".test",".spec"],location:"sameFolder"}},nnt={cs:"csharp",dart:"dart",go:"go",java:"java",js:"javascriptreact",kt:"kotlin",php:"php",ps1:"powershell",py:"python",rb:"ruby",rs:"rust",swift:"swift",ts:"typescript",tsx:"typescriptreact"},int=function(){let t={};for(let[e,r]of Object.entries(nnt))t[e]=zE[r];return t}(),VE=class{constructor(e,r){this._search=e;this._tabs=r}_findTabMatchingPattern(e){return this._tabs.tabs.find(n=>n.uri&&n.uri.scheme!==Zr.untitled&&F5(n.uri,e))?.uri}async findTestFileForSourceFile(e,r){if(e.isUntitled)return;let n=Pc(e.uri),i=nc(e.uri),o=zE[e.languageId]??jE,s=[];if(o.prefix&&s.push(o.prefix+n),o.suffixes)for(let u of o.suffixes??[]){let l=n.replace(`${i}`,`${u}${i}`);s.push(l)}let a=s.length===1?`**/${s[0]}`:`**/{${s.join(",")}}`,c=this._findTabMatchingPattern(a);return c||(c=await this._search.findFilesWithDefaultExcludes(a,1,r)),c}async findAnyTestFileForSourceFile(e,r){let n=zE[e.languageId]??jE,i=[];if(n.prefix&&i.push(`${n.prefix}*`),n.suffixes){let a=nc(e.uri);for(let c of n.suffixes??[])i.push(`*${c}${a}`)}let o=i.length===1?`**/${i[0]}`:`**/{${i.join(",")}}`,s=this._findTabMatchingPattern(o);return s||(s=await this._search.findFilesWithDefaultExcludes(o,1,r)),s}async findFileForTestFile(e,r){let n=zE[e.languageId]??jE,i=Pc(e.uri),o=[];n.suffixes&&o.splice(0,0,...n.suffixes),n.prefix&&o.splice(0,0,n.prefix);for(let s of o){let a=i.replace(s,"");if(a!==i){let c=`**/${a}`,u=this._findTabMatchingPattern(c);if(u||(u=await this._search.findFilesWithDefaultExcludes(c,1,r)),u)return u}}}};function $E(t){let e;ut.isUri(t)||(e=zE[t.languageId],t=t.uri);let r=Pc(t),n=nc(t);return e??=int[n.replace(".","")],e?!(e.suffixes&&!e.suffixes.some(o=>r.endsWith(o+n))||e.prefix&&!r.startsWith(e.prefix)):!!(jE.suffixes.some(o=>r.endsWith(o+n))||r.startsWith(jE.prefix))}function p2e(t){let e=zE[t.languageId]??jE,r=Pc(t.uri);if(e.prefix)return e.prefix+r;let n=nc(t.uri),i=e.suffixes&&e.suffixes.length>0?e.suffixes[0]:".test";return r.replace(`${n}`,`${i}${n}`)}var E2=W(st());var YJ=W(st()),f2e=W(require("assert"));var S2=class extends bu{constructor(r){super();this.uri=r}},BM=class extends K{async prepare(e,r,n){let{documentContext:i}=this.props,o=this.accessor.get(De);if($E(i.document)||await o.isCopilotIgnored(i.document.uri))return;let s=new VE(this.accessor.get(Ta),this.accessor.get(Tt)),a,c=await s.findTestFileForSourceFile(i.document,n??Vr.None);if(c!==void 0)a="candidateTestFile";else{let d=await s.findAnyTestFileForSourceFile(i.document,n??Vr.None);a="anyTestFile",c=d}if(c===void 0||await o.isCopilotIgnored(c))return;let u;try{u=await this.accessor.get(Ze).openTextDocument(c)}catch{return}let l=await n0(this.accessor.get(xt),this.accessor.get(Mt),u,void 0,new Xe(0,0,0,0),e.tokenBudget);if(a==="anyTestFile")return{kind:a,doc:c,codeExcerpt:l.document,promptReferences:[new xo.PromptReference(c)]};if(a==="candidateTestFile")return{kind:a,doc:c,codeExcerpt:l.document,promptReferences:[new xo.PromptReference(c)],candidateTestFile:c};(0,f2e.default)(!1,"impossible: unexpected kind")}render(e,r){if(e!==void 0)switch(e.kind){case"candidateTestFile":return vscpp(YJ.UserMessage,null,vscpp("meta",{value:new S2(e.candidateTestFile)}),vscpp("references",{value:e.promptReferences}),"Excerpt of the existing test file:",vscpp("br",null),vscpp(Be,{uri:e.doc,code:e.codeExcerpt.text,languageId:e.codeExcerpt.languageId}),vscpp("br",null),"Because a test file exists: ",vscpp("br",null),"- Do not generate preambles, like imports, copyright headers etc.",vscpp("br",null),"- Do generate code that can be appended to the existing test file.");case"anyTestFile":return vscpp(YJ.UserMessage,null,"This is a sample test file:",vscpp("br",null),vscpp(Be,{uri:e.doc,code:e.codeExcerpt.text,languageId:e.codeExcerpt.languageId}))}}};var m2e=require("util");var qM=oe("ITestDepsResolver"),WE=class{constructor(e,r){this._searchService=e;this._fileSystemService=r;this._perLanguageTestDepsFinder=new Map;this._cachedResults=new Map,this._textDecoder=new m2e.TextDecoder}async getTestDeps(e){let r=this._cachedResults.get(e);if(r!==void 0)return r;let n=this.getTestDepsFinder(e);if(n===void 0)return[];let i=await n.findTestDeps();return this._cachedResults.set(e,i),i}getTestDepsFinder(e){let r=this._perLanguageTestDepsFinder.get(e);if(r===void 0)switch(e){case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":{r=new QJ(this._searchService,this._fileSystemService,this._textDecoder);break}case"python":{r=new XJ(this._searchService,this._fileSystemService,this._textDecoder);break}case"java":{r=new JJ(this._searchService,this._fileSystemService,this._textDecoder);break}}return r!==void 0&&this._perLanguageTestDepsFinder.set(e,r),r}};WE=fe([ie(0,Ta),ie(1,fn)],WE);var QJ=class{constructor(e,r,n){this._searchService=e;this._fileSystemService=r;this._textDecoder=n;this._jsTsTestDeps=new Set(["mocha","jest","chai","ava","jasmine","qunit","tape","cypress","puppeteer","enzyme","testing-library","sinon","supertest","happy-dom"])}async findTestDeps(){let e=await this._searchService.findFiles("**/package.json",{exclude:"**/node_modules/**",useDefaultExcludes:!0});return(await Promise.allSettled(e.map(async n=>{let i=await this._fileSystemService.readFile(n),o=JSON.parse(this._textDecoder.decode(i)),s=o.dependencies||{},a=o.devDependencies||{};return[s,a].flatMap(u=>Object.keys(u).filter(l=>this._jsTsTestDeps.has(l)))}))).flatMap(n=>n.status==="fulfilled"?n.value:[])}},XJ=class{constructor(e,r,n){this._searchService=e;this._fileSystemService=r;this._textDecoder=n;this._pyTestDeps=["pytest","nose","unittest","tox","doctest","hypothesis","mock","coverage","behave","robotframework"]}async findTestDeps(){let e=new Set,r=["pyproject.toml","setup.py","requirements.txt","tox.ini"],n=await this._searchService.findFiles(`**/{${r.join(",")}}`);return await Promise.all(n.map(async i=>{let o=await this._fileSystemService.readFile(i),s=this._textDecoder.decode(o);i.path.endsWith("pyproject.toml")?this._getPyProjectTomlDeps(s).forEach(c=>e.add(c)):i.path.endsWith("setup.py")?this._getSetupPyDeps(s).forEach(c=>e.add(c)):i.path.endsWith("requirements.txt")?this._getRequirementsTxtDeps(s).forEach(c=>e.add(c)):i.path.endsWith("tox.ini")&&e.add("tox")})),Array.from(e)}_getPyProjectTomlDeps(e){return this._pyTestDeps.filter(r=>e.includes(r))}_getSetupPyDeps(e){return this._pyTestDeps.filter(r=>e.includes(r))}_getRequirementsTxtDeps(e){return this._pyTestDeps.filter(r=>e.includes(r))}},JJ=class{constructor(e,r,n){this._searchService=e;this._fileSystemService=r;this._textDecoder=n;this._javaTestDeps=["junit","testng","mockito","assertj","hamcrest","powermock","spock","cucumber","arquillian","selenium","rest-assured","wiremock","pitest"]}async findTestDeps(){let e=new Set,r=["pom.xml","build.gradle","build.gradle.kts"],n=await this._searchService.findFiles(`**/{${r.join(",")}}`);return await Promise.all(n.map(async i=>{let o=await this._fileSystemService.readFile(i),s=this._textDecoder.decode(o);this._javaTestDeps.filter(a=>s.includes(a)).forEach(a=>e.add(a))})),Array.from(e)}};var HM=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.documentContext=o;this.createReplyInterpreter=YS.createFactory(async(e,r)=>{let n=Ya(e);if(n.length===0)return{type:"conversational",content:e};let i=n[0],s=e.split(`
`).slice(0,i.startLine).join(`
`).trimEnd();r.report(new pn(s));let a=i.code,c=this.documentContext.document,u=this.promptCrafter.existingTestFile;if(u){let f=await this.accessor.get(Ze).openTextDocument(u),m=new oC;return m.set(u,[Jn.insert(new jn(f.lineCount,0),a)]),{type:"workspaceEdit",workspaceEdit:m}}let l=p2e(c),d=Zn.joinPath(c.uri,`../${l}`).with({scheme:Zr.untitled}),p=new oC;return p.createFile(d,{ignoreIfExists:!0}),p.replace(d,new Xe(0,0,0,0),a),{type:"workspaceEdit",workspaceEdit:p}});this.promptCrafter=new ZJ(i,r,o,n)}},ZJ=class{constructor(e,r,n,i){this._accessor=e;this._endpoint=r;this._documentContext=n;this._location=i}get selectionContextMetadata(){return DA(this._selectionContextMetadata!==void 0,"not undefined"),this._selectionContextMetadata}get existingTestFile(){return this._existingTestFile}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn()?.request.message,c=e.turns.at(-2)?.request.message,u=new Je(this._endpoint,eZ,{history:c,context:this._documentContext,endpoint:this._endpoint,userQuery:a??"",location:this._location},this._accessor.get(ge),this._accessor),l=await u.render(i,s),d=u.getMeta(S2);return d&&(this._existingTestFile=d.uri),this._selectionContextMetadata=u.getMeta(us),l}},eZ=class extends K{async prepare(e,r,n){let{context:i}=this.props,o=this.accessor.get(xt).getTreeSitterAST(i.document),s=i.selection,a,c;if(o!==void 0){let f=await o.getNodeToDocument(Ki(i.selection,i.document));s=_s(i.document,f.nodeToDocument),a=f.nodeIdentifier,c=f.nodeToDocument.type}let u=["typescript","typescriptreact"].includes(i.document.languageId)&&c!==void 0&&["class_declaration","method_definition"].includes(c)?{useScoreFunction:!0,scoreOverride:(f,m)=>f.kind==="constructor"||f.kind==="method_definition"?0:m}:void 0,l=await n0(this.accessor.get(xt),this.accessor.get(Mt),i.document,i.fileIndentInfo,s,e.tokenBudget/2,u);return{testFrameworks:await this.accessor.get(qM).getTestDeps(this.props.context.document.languageId),identifier:a,summarization:l}}render(e,r){let{history:n,context:i,endpoint:o,userQuery:s,location:a}=this.props,c=e.summarization,u=i.language.languageId,l=e.identifier?`\`${e.identifier}\``:"my code";return vscpp(vscppf,null,vscpp(E2.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),vscpp(qr,null),vscpp("br",null),vscpp(Br,null),vscpp("br",null),a===1?vscpp(vscppf,null,"The user has a ",u," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Answer with a single ",u," code block."):a===2?vscpp(vscppf,null,"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn."):void 0,e.testFrameworks.length>0&&vscpp(vscppf,null,vscpp("br",null),"The project has following testing dependencies: ",e.testFrameworks.join(", "),".")),n!==void 0&&n.length>0&&vscpp(E2.UserMessage,null,n),vscpp(BM,{documentContext:i,endpointInfo:o}),vscpp(E2.UserMessage,null,"Here is the current file at `",i.document.uri.path,"`:",vscpp("br",null),vscpp("br",null),vscpp(Be,{uri:i.document.uri,languageId:i.document.languageId,code:c.document.text}),vscpp("br",null),vscpp("br",null),`Please, generate tests for ${l}. ${s}`.trim()))}};var KE=W(st());var h2e=W(st()),g2e=require("util");var GM=class extends K{async prepare(e,r,n){let{documentContext:i,endpointInfo:o}=this.props;if(!$E(i.document))return;let a=await new VE(this.accessor.get(Ta),this.accessor.get(Tt)).findFileForTestFile(i.document,n??Vr.None);if(a===void 0||await this.accessor.get(De).isCopilotIgnored(a))return;let c=o.modelMaxPromptTokens*4/3;function u(d,p,f=c){return`${Fs.forUri(i.language,d)}

${p.substring(0,f)}`}let l;try{let d=await this.accessor.get(Ze).openTextDocument(a),p=d.getText(),f=await $Ce(this.accessor,d,100),{outlineAbove:m,outlineBelow:h}=cIe(p,f,{startOffset:p.length,endOffset:p.length},""),g=`${m}
${h}`;l=new Wo(`
This is an excerpt of the file that this test is covering:

`),l.appendCodeblock(u(a,g),i.document.languageId)}catch{}if(!l){l=new Wo(`
This is an excerpt of the file that this test is covering:

`);let p=await this.accessor.get(fn).readFile(a),f=new g2e.TextDecoder().decode(p),m=u(a,f);l.appendCodeblock(m,i.document.languageId)}return{message:l,references:[new xo.PromptReference(a)]}}render(e,r){if(e!==void 0)return vscpp(h2e.UserMessage,null,vscpp("references",{value:e.references}),e.message.value)}};var jM=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.context=o;this.responseProcessor={processResponse:async(e,r,n,i,o)=>{let s="";try{let a=[cs.begin(this.context.language),cs.end(this.context.language),Fs.forLanguage(this.context.language)];for await(let c of eIe(Uu.map(n,u=>u.delta.text))){if(o.isCancellationRequested)break;c.kind===1&&a.some(u=>c.value.startsWith(u))||(i.markdown(c.value),s+=c.value)}return s}catch(a){console.error(a)}return""}};this.createReplyInterpreter=(e,r)=>this.promptCrafter.createReplyInterpreter(e,r);this.promptCrafter=new tZ(i,r,o)}},tZ=class{constructor(e,r,n){this._accessor=e;this._endpoint=r;this._docCtx=n;this.replyInterpreterFactory=null}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn()?.request.message,c=e.turns.at(-2)?.request.message,u=this._docCtx,l=new Je(this._endpoint,rZ,{history:c,context:u,endpoint:this._endpoint,userQuery:a??""},this._accessor.get(ge),this._accessor),d=await l.render(i,s);return this.replyInterpreterFactory=l.getMeta(Qn)?.factory??null,this.selectionContextMetadata=l.getMeta(us),d}createReplyInterpreter(e,r){if(this.replyInterpreterFactory)return this.replyInterpreterFactory(e,r);if(!this.selectionContextMetadata)throw new Error("Could not create reply interpreter without selection context metadata");return r?new a6(this._accessor,this.selectionContextMetadata,this._docCtx,4,!1,e):new o6(this._accessor,this.selectionContextMetadata,this._docCtx,4,e)}},rZ=class extends K{render(e,r){let{history:n,context:i,endpoint:o,userQuery:s}=this.props;return vscpp(vscppf,null,vscpp(KE.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),vscpp(qr,null),vscpp("br",null),"The user has a ",i.language.languageId," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Answer with a single ",i.language.languageId," code block.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),vscpp(Br,null)),n!==void 0&&n.length>0&&vscpp(KE.UserMessage,null,n),vscpp(GM,{documentContext:i,endpointInfo:o}),Yt(i.document.uri)?vscpp(x6,{documentContext:i}):vscpp(nZ,{documentContext:i}),vscpp(KE.UserMessage,null,`Please, generate more tests, taking into account existing tests. ${s}`.trim()))}},nZ=class extends K{async prepare(e,r,n){let{documentContext:i}=this.props,o=await this.accessor.get(De).isCopilotIgnored(i.document.uri),s=i.document.validateRange(i.wholeRange);return{summarizedDocument:await Eu(this.accessor.get(xt),this.accessor.get(Mt),i.document,i.fileIndentInfo,i.language,s,e.endpoint.modelMaxPromptTokens/3),isIgnored:o}}render(e,r){if(Yt(this.props.documentContext.document.uri))throw wr("InlineChatEditCodePrompt should not be used with a notebook!");if(e.isIgnored)return;let{uri:n,languageId:i}=e.summarizedDocument,o=e.summarizedDocument.splitAroundAdjustedSelection(),{codeAbove:s,codeSelected:a,codeBelow:c,hasCodeWithoutSelection:u}=o,l=`${s}$SELECTION_PLACEHOLDER$${c}`,d=o.createReplyInterpreterFactory(1,o.replaceSelectionStreaming(on.combine(on.createCodeBlockFilter(),p=>p.trim()!=="$SELECTION_PLACEHOLDER$")));return vscpp(KE.UserMessage,null,vscpp("meta",{value:new Qn(d)}),"I have the following code in a file called `",vscpp(la,{value:n,mode:1}),"`:",u&&vscpp(vscppf,null,vscpp(Be,{uri:n,languageId:i,code:l,shouldTrim:!1}),vscpp("br",null)),u&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(Be,{uri:n,languageId:i,code:a,shouldTrim:!1}))}};var zM=class{constructor(){this.id="tests";this.locations=[2,1];this.description=v2e.t("Generate unit tests for the selected code");this.intentDetectionInput={sampleQuestion:"Write a set of detailed unit test functions for the code above."};this.commandInfo=void 0}static{this.ID="tests"}async invoke(e,r){let n=r.documentContext;if(!n)throw new Error("Open a file to generate tests.");if(await e.get(De).isCopilotIgnored(n.document.uri))throw new Error("Copilot is disabled for this file.");let o=r.location,s=await e.get(Ue).getUserRequestEndpoint(o,this.id);return $E(n.document)?new jM(this,s,o,e,n):new HM(this,s,o,e,n)}};var $M=W(_r());function y2e(t,e){let r=Ya(e);for(let n of r){if(n.language!=="json"&&n.language!=="")return[{command:void 0,showCodeBlock:!0,failedValidation:!1}];let i;try{i=DM(n.code)}catch{}if(!i)return[];if(!i.hasOwnProperty("command")){let s=[],a="",c=!1;for(let u of Object.keys(i))s.some(l=>l.command?.arguments&&l.command.arguments[0].includes(`@id:${u}`))||(a+=`@id:${u} `,t.hasSetting(u)||(c=!0));return a=a.trimEnd(),a&&s.push({command:{command:"workbench.action.openSettings",arguments:[a],title:"Show in Settings Editor"},showCodeBlock:!0,failedValidation:c}),s}else{let s=[];if(i.command==="workbench.extensions.search"||i.command==="workbench.extensions.installExtension"){let a=(Array.isArray(i.args)?i.args:[i.args]).filter(c=>typeof c=="string");if(a.length===1){let c=["featured","popular","recentlyPublished","recommended","updates","builtin","enabled","disabled","installed","workspaceUnsupported"];a[0].includes(":")&&!a[0].startsWith("@")?a[0]=`@${a[0]}`:c.includes(a[0])&&(a[0]=`@${a[0]}`)}s.push({command:{command:"workbench.extensions.search",arguments:a,title:"Search Extension Marketplace"},showCodeBlock:!1,failedValidation:!1})}else{let a=!1,c=t.getCommand(i.command);c||(a=!0),s.push({command:{command:"workbench.action.quickOpen",arguments:[`>${c?.originalLabel??""}`],title:s.length>1?`Show "${c?.originalLabel??""}"`:"Show in Command Palette"},showCodeBlock:!1,failedValidation:a})}return s}}return[]}var iZ=W(_r()),Cl=W(st());var VM=class extends K{async prepare(e,r,n){r?.report(new Io(iZ.t("Refining question to improve search accuracy.")));let i=this.props.query,o=this.accessor.get(Jt),s=await this.accessor.get(Ue).getUserRequestEndpoint(2,"vscode","gpt-3.5-turbo"),{messages:a}=await ont(this.accessor,this.props.history,s,this.props.query);if(n.isCancellationRequested)return{docSearchResults:[],settings:[],commands:[],query:i};let c=this.accessor.get(ue).getLogger("vscodePrompt");c.debug("Asking the model to update the user question.");let u=await o.fetchOne(a,async h=>{},n,2,s,{agent:eC},{temperature:0,top_p:1,stop:["dontStopBelieving"]},{messageSource:"vscodeIntent"});if(n.isCancellationRequested)return{docSearchResults:[],settings:[],commands:[],query:i};u.type==="success"?i=snt(this.props.query,u.value):c.error("Failed to refine the question",u);let l=r?await a2(r,new Io(iZ.t("Searching doc index....")),this.searchDocsSearchForContext(i,10,n,c),1e3):await this.searchDocsSearchForContext(i,10,n,c);if(n.isCancellationRequested)return{docSearchResults:[],settings:[],commands:[],query:i};let d=this.accessor.get(qm);this._embeddingCompute??=this.accessor.get(Ws),this._embeddingEndpoint??=await this.accessor.get(Ue).getEmbeddingsEndpoint();let p=await this._embeddingCompute?.computeEmbeddings(this._embeddingEndpoint,[i],{},void 0);if(n.isCancellationRequested)return{docSearchResults:[],settings:[],commands:[],query:i};if(!p)return{docSearchResults:l,settings:[],commands:[],query:i};let{commands:f,settings:m}=r?await a2(r,new Io("Searching command and setting index...."),d.nClosestValues(p[0],5),500):await d.nClosestValues(p[0],5);return{docSearchResults:l,settings:m,commands:f,query:i}}async searchDocsSearchForContext(e,r,n,i){this._docsSearchClient||(this._docsSearchClient=this.accessor.get(B5));try{return this._docsSearchClient.search(e,{repo:"microsoft/vscode-docs"},{limit:r,similarity:.75},n)}catch(o){return i.error(`Failed to search docs search for query: ${e}.
`,o),[]}}render(e){let r=this.accessor.get(St).OS;return vscpp(vscppf,null,vscpp(Cl.SystemMessage,{priority:1e3},"You are a Visual Studio Code assistant. Your job is to assist users in using Visual Studio Code by providing knowledge to accomplish their task. This knowledge should focus on settings and commands, but also includes documentation. Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The user is working on a ",r," machine. Please respond with system specific commands if applicable.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),"If you are referencing multiple commands and settings, please respond step by step in a numbered list format.",vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You must respond with either a setting to set or a command to execute when applicable.",vscpp("br",null),"When referring to a command, you must use the command name in markdown bold syntax.",vscpp("br",null),"When referring to any commands, you must include the referenced commands in a properly formatted JSON markdown code block at the end of the sentence that references that command.",vscpp("br",null),"Similarly, all referenced settings must be properly formatted in a JSON markdown code block to allow copying them into the user's settings.json file.",vscpp("br",null),"If you are referencing multiple settings, combine all settings into the same JSON markdown code block at the beginning of your response, and then describe each setting in a numbered list after the JSON markdown code block, as shown in the template below:",vscpp("br",null),"## Multiple settings response template",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"setting1": settingValue1,
	"setting2": settingValue2,
	"setting3": settingValue3,
	...
}`,languageId:"json"}),'1. `"setting1": settingValue1` - Description of setting1',vscpp("br",null),'2. `"setting2": settingValue2` - Description of setting2',vscpp("br",null),'3. `"setting3": settingValue3` - Description of setting3',vscpp("br",null),"4. ...",vscpp("br",null),vscpp("br",null),"If you are referencing multiple commands, do not combine all the commands into the same JSON markdown code block. Instead, describe each command and include the JSON markdown code block in a numbered list, as shown in the template below:",vscpp("br",null),"## Multiple commands response template",vscpp("br",null),"1. **Command1** - Description of Command1",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "command1"
}`,languageId:"json"}),"2. **Command2** - Description of Command2",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "command2"
}`,languageId:"json"}),"3. ...",vscpp("br",null),'If you are referencing multiple commands and setting, respond with numbered steps for the user to follow. First mention all the commands as per the "Multiple commands response template" and then all the settings as per the "Multiple settings response template" shown above.',vscpp("br",null),"## Multiple command and settings response template",vscpp("br",null),"1. **Command1** - Description of Command1",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "command1"
}`,languageId:"json"}),"2. **Command2** - Description of Command2",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "command2"
}`,languageId:"json"}),"3. A short summary of the combined settings.",vscpp(Be,{uri:null,code:`{
	"setting1": settingValue1,
	"setting2": settingValue2,
	"setting3": settingValue3,
	...
}`,languageId:"json"}),'1. `"setting1": settingValue1` - Description of setting1',vscpp("br",null),'2. `"setting2": settingValue2` - Description of setting2',vscpp("br",null),'3. `"setting3": settingValue3` - Description of setting3',vscpp("br",null),"4. ...",vscpp("br",null),vscpp("br",null),vscpp("br",null),"If a command or setting references another command or setting, you must respond with both the original and the referenced commands or settings.",vscpp("br",null),"The JSON markdown code block containing the command or setting should be included immediately after the sentence referencing it.",vscpp("br",null),"Do not respond with a command or setting that is not in a properly formatted JSON markdown code block.",vscpp("br",null),"If a setting and command will accomplish the same thing, you must suggest the command instead.",vscpp("br",null),"Do not suggest opening the settings editor.",vscpp("br",null),"If answering with a keybinding, please still include the command bound to the keybinding.",vscpp("br",null),"If a keybinding contains a backtick you must escape it. For example the keybinding Ctrl + backtick would be written as ``ctrl + ` ``",vscpp("br",null),"Do not suggest opening the command palette to execute commands.",vscpp("br",null),"Do not suggest commands or settings identifiers that do not exist.",vscpp("br",null),"Do not suggest installing Visual Studio Code because the user has already installed it.",vscpp("br",null),"If you believe the context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"Always respond with a numbered list of steps to be taken to achieve the desired outcome if multiple steps are necessary.",vscpp("br",null),'If an extension might help the user, you may suggest a search query for the extension marketplace. You must also include the command **Search marketplace** (`workbench.extensions.search`) with args set to the suggested query in the commands section at the end of your response. The query can also contain the tags "@popular", "@recommended", or "@featured" to filter the results.',vscpp("br",null),vscpp("br",null),"Examples:",vscpp("br",null),vscpp("br",null),"[EXAMPLES START]",vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.",vscpp("br",null),vscpp("br",null),"## Single setting response",vscpp("br",null),"Question: How do I disable telemetry?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"telemetry.telemetryLevel": "off"
}`,languageId:"json"}),"is a setting which can be used to disable telemetry.",vscpp("br",null),vscpp("br",null),"## Multiple settings response",vscpp("br",null),"Question: How can I change the font size in all areas of Visual Studio Code, including the editor, terminal?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"editor.fontSize": 18,
	"terminal.integrated.fontSize": 14,
	"window.zoomLevel": 1
}`,languageId:"json"}),'1. `"editor.fontSize": 18` - This setting adjusts the font size within the editor. The default size is overridden by the value `18`, making the text larger and more readable according to user preference.',vscpp("br",null),'2. `"terminal.integrated.fontSize": 14` - Similarly, this setting changes the font size in the integrated terminal. By setting it to `14`, it increases the font size in the terminal independently from the editor.',vscpp("br",null),'3. `"window.zoomLevel": 1` - This setting controls the zoom level of the entire Visual Studio Code interface. A value of `1` means that the interface will be zoomed in to 120% of the original size, making everything appear bigger. A value of `0` would indicate no zoom (100% - default size), positive values zoom in, and negative values zoom out.',vscpp("br",null),vscpp("br",null),"## Multiple commands response",vscpp("br",null),"Question: What is the command to report an issue for other extensions in Visual Studio Code?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Here are some possible commands:",vscpp("br",null),"1. **Report Issue** - This command can be used to report an issue for other extensions.",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "workbench.extensions.reportExtensionIssue"
}`,languageId:"json"}),"2. **Docker: Report Issue** - This command can be used to report an issue for the Docker extension.",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "vscode-docker.help.reportIssue"
}`,languageId:"json"}),"3. **Codespaces: Report Issue** - This command can be used to report an issue for the Codespaces extension.",vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "github.codespaces.reportIssue"
}`,languageId:"json"}),vscpp("br",null),"## Single command response",vscpp("br",null),"Question: How do I close all editors?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the **Close All Editors** command to close all editors.",vscpp("br",null),vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "workbench.action.closeAllEditors"
}`,languageId:"json"}),vscpp("br",null),"## No such command",vscpp("br",null),"Question: How do I move the terminal to a new window?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"There is no such command.",vscpp("br",null),vscpp("br",null),"## Invalid Question",vscpp("br",null),"Question: How do I bake a potato?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Sorry this question isn't related to Visual Studio Code.",vscpp("br",null),vscpp("br",null),"## Marketplace search",vscpp("br",null),"Question: How do I add PHP support?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the **Search marketplace** command to search for extensions that add PHP support.",vscpp("br",null),vscpp("br",null),vscpp(Be,{uri:null,code:`{
	"command": "workbench.extensions.search",
	"args": "php"
}`,languageId:"json"})),vscpp(Ht,{priority:700,history:this.props.history}),vscpp(Cl.UserMessage,{priority:800},"Relevant information about Visual Studio Code:",vscpp("br",null),"The current question is related to Visual Studio Code. ",vscpp("br",null),"If a command or setting is not a valid answer, but it still relates to Visual Studio Code, please still respond.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the given context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.",vscpp("br",null),'Below is a list of commands and settings we found which might be relevant to the question. For view related commands "Toggle" often means Show or Hide. A setting may reference another setting, that will appear as \\`#setting.id#\\`, you must return the referenced setting as well. You may use this context to help you formulate your response, but are not required to.',vscpp("br",null),e.commands.length>0&&vscpp(vscppf,null,"Here are some possible commands:",vscpp("br",null)),e.commands.length>0&&e.commands.map(n=>vscpp(Cl.TextChunk,null,"- ",n.label,' ("',n.key,'") (Keybinding: "',n.keybinding,'")')),e.settings.length>0&&vscpp(vscppf,null,"Here are some possible settings:",vscpp("br",null)),e.settings.length>0&&e.settings.map(n=>vscpp(Cl.TextChunk,null,bU(n))),e.docSearchResults.length>0&&vscpp(vscppf,null,"Below is a list of information from the Visual Studio Code documentation which might be relevant to the question. ",vscpp("br",null)),e.docSearchResults.map(n=>vscpp(Cl.TextChunk,null,"##",n?.title?.trim()," - ",n.path,vscpp("br",null),n.contents))),vscpp(Cl.UserMessage,{priority:900},e.query))}},oZ=class extends K{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(Ht,{priority:500,history:this.props.history}),vscpp(Cl.SystemMessage,{priority:1e3},"You are a Visual Studio Code assistant who helps the user create well-formed and unambiguous questions about their Visual Studio Code development environment.",vscpp("br",null),"Specifically, you help users rewrite questions about how to use Visual Studio Code's Commands and Settings.",vscpp("br",null),"Evaluate the question to determine the user's intent. ",vscpp("br",null),"Determine if the user's question is about the editor, terminal, activity bar, side bar, status bar or other parts of Visual Studio Code's workbench and include those keyword in the rewrite.",vscpp("br",null),"Determine if the user is asking about Visual Studio Code's Commands and/or Settings and explicitly include those keywords during the rewrite. ",vscpp("br",null),"Respond in Markdown. Under a `# Question` header, output a rephrased version of the user's question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for.",vscpp("br",null),"If it is not clear what the user is asking for or if the question appears to be unrelated to Visual Studio Code, do not try to rephrase the question and simply return the original question. ",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are trying to do in the Visual Studio Code environment.",vscpp("br",null),"2. If the question contains pronouns such as 'it' or 'that', try to understand what the pronoun refers to by looking at the rest of the question and the conversation history.",vscpp("br",null),"3. If the question contains an ambiguous word such as 'this', try to understand what 'this' refers to by looking at the rest of the question and the conversation history.",vscpp("br",null),"4. After a `# Question` header, output a precise version of the question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for. Be sure to preserve the exact meaning of the question.",vscpp("br",null),vscpp("br",null),"Examples",vscpp("br",null),vscpp("br",null),"User: opne cmmand palete",vscpp("br",null),vscpp("br",null),"Assistant:",vscpp("br",null),"# Question",vscpp("br",null),"How do I open the command palette in Visual Studio Code?",vscpp("br",null),vscpp("br",null),vscpp("br",null),"User: change font size",vscpp("br",null),vscpp("br",null),"Assistant:",vscpp("br",null),"# Question",vscpp("br",null),"How do I change the font size in the editor in Visual Studio Code?",vscpp("br",null),vscpp("br",null),"User: Move editor and pin",vscpp("br",null),"Assistant: ",vscpp("br",null),"# Question",vscpp("br",null),"How do I move the editor to another group and then pin the editor in Visual Studio Code",vscpp("br",null)),vscpp(Cl.UserMessage,{priority:700},this.props.query))}};async function ont(t,e,r,n){return new Je(r,oZ,{query:n,history:e},t.get(ge),t).render()}function snt(t,e){let r=e.match(/#+\s*Question\n(?<question>.+)/si);return r?.groups?r.groups.question.trim():t.trim()}var sZ=class extends Mo{constructor(r){super();this.accessor=r}async createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new Je(n,VM,{query:u,history:l},this.accessor.get(ge),this.accessor)}},aZ=class{constructor(e){this.combinedIndex=e;this.stagedTextToApply="";this._appliedText="";this._incodeblock=!1}async processResponse(e,r,n,i,o){for await(let{delta:s}of n){if(o.isCancellationRequested)break;this.applyDelta(s.text,i)}return this._appliedText}processNonReporting(e,r){let n=y2e(this.combinedIndex,e);for(let i of n)if(i.showCodeBlock&&r.markdown(e),i.command&&r.button(i.command),i.failedValidation){let o=i.showCodeBlock?$M.t("To apply this setting, an additional extension installation is needed."):$M.t("To execute this command, an additional extension installation is needed.");r.warning(o)}}applyDelta(e,r){this._appliedText+=e,e=this.stagedTextToApply+e;let n=e.indexOf("```");if(this._incodeblock){let i=e.indexOf("```");i===-1?this.stagedTextToApply=e:(this._incodeblock=!1,e="\n```"+e.substring(0,i)+"```\n",this.processNonReporting(e,r),this.stagedTextToApply="")}else if(n!==-1){this._incodeblock=!0;let i=e.indexOf("```",n+3);if(i!==-1)this._incodeblock=!1,r.markdown(e.substring(0,n)),this.processNonReporting(e,r),r.markdown(e.substring(i+3));else{let o=e.substring(0,n);r.markdown(o)}}else r.markdown(e)}},cZ=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.linkification={disable:!0};this.promptCrafter=new sZ(e),this.responseProcessor=new aZ(e.get(qm))}},WM=class{constructor(){this.id="vscode";this.locations=[2];this.description=$M.t("Ask questions about VS Code");this.intentDetectionInput={sampleQuestion:"What is the command to open the integrated terminal?",modelDescription:"Looks up information about VS Code via commands, settings, and documentation to accomplish the given editor-specific task."};this.commandInfo={allowsEmptyArgs:!1}}async invoke(e,r){let n=r.location,i=await e.get(Ue).getUserRequestEndpoint(n,this.id);return new cZ(e,this,i,n)}};Ri.registerIntent(new c0);Ri.registerIntent(new db);Ri.registerIntent(new a0);Ri.registerIntent(new zM);Ri.registerIntent(new qE);Ri.registerIntent(new u8);Ri.registerIntent(new RM);Ri.registerIntent(new OM);Ri.registerIntent(new MM);Ri.registerIntent(new UM);Ri.registerIntent(new gb);Ri.registerIntent(qs.Instance);Ri.registerIntent(new oM);Ri.registerIntent(new K8);Ri.registerIntent(new WM);Ri.registerIntent(new y8);Ri.registerIntent(new IM);Ri.registerIntent(new BE);var ant=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function _2e(t,e="client"){if(e==="proxy")return!1;let r=t.slice();return r.reverse(),b2e(r)||b2e(r.filter(n=>n.trim().length>0))}function b2e(t){let e=cnt(t);for(let r of ant){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}function cnt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}var b0=class{},unt=30*1e3;function x2e(t,e,r,n,i,o,s,a,c,u){let l=typeof i=="string"?{modelMaxPromptTokens:0,url:i,name:"",version:""}:i,d={Authorization:`Bearer ${o}`,"X-Request-Id":a,"X-GitHub-Api-Version":"2023-07-07","Openai-Organization":"github-copilot","Copilot-Integration-Id":e.isProduction()?"vscode-chat":"vscode-chat-dev","VScode-SessionId":e.sessionId,"VScode-MachineId":e.machineId,...e.getEditorVersionHeaders(),...l.getExtraHeaders?l.getExtraHeaders():{}};l.interceptBody&&l.interceptBody(c),s&&(d["OpenAI-Intent"]=s);let p={method:n,headers:d,json:c,timeout:unt},f=t;if(u){let h=f.makeAbortController();u.onCancellationRequested(()=>{r.sendGHTelemetryEvent("networking.cancelRequest",{headerRequestId:a}),h.abort()}),p.signal=h.signal}return f.fetch(l.url,p).catch(h=>{if(h.code==="ECONNRESET"||h.code==="ETIMEDOUT"||h.code==="ERR_HTTP2_INVALID_SESSION"||h.message==="ERR_HTTP2_GOAWAY_SESSION")return r.sendGHTelemetryEvent("networking.disconnectAll"),f.disconnectAll().then(()=>f.fetch(l.url,p));throw f.isAbortError(h)?new ys:h})}function YE(t,e,r,n,i,o,s,a,c){return x2e(t,e,r,"POST",n,i,o,s,a,c)}function S2e(t,e,r,n,i,o,s,a,c){return x2e(t,e,r,"GET",n,i,o,s,a,c)}var E2e=oe("headerContributors"),KM=class{constructor(){this.contributors=[]}add(e){this.contributors.push(e)}remove(e){let r=this.contributors.indexOf(e);r!==-1&&this.contributors.splice(r,1)}contributeHeaders(e){for(let r of this.contributors)r.contributeHeaderValues(e)}size(){return this.contributors.length}};function T2e(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}async function C2e(t,e,r,n,i,o,s){let a=t.get(ue).getLogger("chat fetch"),c=t.get(ue).getPromptResponseLogger("chat fetch"),u=dnt(t,r);if(o?.isCancellationRequested)return{type:"canceled",reason:"before fetch request"};c.info(`url ${e.url}`),c.info(`modelMaxPromptTokens ${e.modelMaxPromptTokens}`),c.info(`modelMaxResponseTokens ${u.max_tokens??2048}`),c.info(`chat model ${r.model}`);let l=r.secretKey??(await t.get(Et).getCopilotToken(t)).token;if(!l)return a.error(`Failed to send request to ${e.url} due to missing key`),tm(t.get(Ee),`Failed to send request to ${e.url} due to missing key`),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:"key is missing"};let d=await fnt(t,e,r.ourRequestId,u,l,r.location,o,s);if(o?.isCancellationRequested){let g=await d.body();try{g.destroy()}catch(v){a.exception(v,"Error destroying stream"),t.get(Ee).sendGHTelemetryException(v,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=lnt(e,t,r.location,r.ourRequestId);return a.info("Request ID for failed request: ",r.ourRequestId),pnt(t,g,d)}let p=t.get(Ee),f=t.get(ue),m=r.postOptions?.n??1;return{type:"success",chatCompletions:await e.processResponseFromChatEndpoint(p,f,d,m,i,n,o),getProcessingTime:()=>LCe(d)}}function lnt(t,e,r,n){return Ar.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:mt.toString(r),headerRequestId:n})}function dnt(t,e){let r={messages:e.messages,model:e.model};e.postOptions&&Object.assign(r,e.postOptions);let n=T2e(e.repoInfo);return n!==void 0&&(r.nwo=n),e.intent&&(r.intent=e.intent,e.intent_model&&(r.intent_model=e.intent_model),e.intent_tokenizer&&(r.intent_tokenizer=e.intent_tokenizer),e.intent_threshold&&(r.intent_threshold=e.intent_threshold)),r}async function pnt(t,e,r){let n=t.get(ue).getLogger("chat fetch"),i=t.get(Ee);e.properties.error=`Response status was ${r.status}`,e.properties.status=String(r.status),i.sendGHTelemetryEvent("request.shownWarning",e.properties,e.measurements);let o=await r.text();if(r.status===401&&o.includes("authorize_url"))try{let s=JSON.parse(o);return{type:"failed",failKind:"unauthorized",reason:r.statusText||r.statusText,data:s}}catch{}if(r.status===401||r.status===403)return t.get(Et).resetCopilotToken(t,r.status),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:`token expired or invalid: ${r.status}`};if(r.status===499)return n.info("Cancelled by server"),{type:"failed",failKind:"serverCanceled",reason:"canceled by server"};if(r.status===466)return n.info(o),{type:"failed",failKind:"clientNotSupported",reason:`client not supported: ${o}`};if(r.status===400&&o.includes("off_topic"))return{type:"failed",failKind:"offTopic",reason:"filtered as off_topic by intent classifier: message was not programming related"};if(r.status===424)return{type:"failed",failKind:"failedDependency",reason:o};if(r.status===429){if(o.includes("extension_blocked"))try{let s=JSON.parse(o);if(s.error&&(s=s.error),s.code==="extension_blocked"&&s.type==="rate_limit_error")return{type:"failed",failKind:"extensionBlocked",reason:s.reason??s.code,data:{...s.message,retryAfter:r.headers.get("retry-after")}}}catch{}return{type:"failed",failKind:"rateLimited",reason:o}}return r.status>=500&&r.status<600?{type:"failed",failKind:"serverError",reason:`${r.status} ${o}`}:r.status===422?{type:"failed",failKind:"contentFilter",reason:"Filtered by Responsible AI Service"}:(n.error("Unhandled status from server:",r.status,o),tm(t.get(Ee),"Unhandled status from server: "+r.status,o),{type:"failed",failKind:"unknown",reason:`unhandled status from server: ${r.status} ${o}`})}function fnt(t,e,r,n,i,o,s,a){let c=t.get(ue).getLogger("chat fetch"),u=t.get(Ee),l=Ar.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:mt.toString(o),...a},{maxTokenWindow:e.modelMaxPromptTokens});for(let[f,m]of Object.entries(n))f!=="messages"&&(l.properties[`request.option.${f}`]=JSON.stringify(m)??"undefined");l.properties.headerRequestId=r,u.sendGHTelemetryEvent("request.sent",l.properties,l.measurements);let d=Date.now(),p=mnt(o);return YE(t.get(Mr),t.get(St),t.get(Ee),e,i,p,r,n,s).then(f=>{let m=MR(f,void 0);l.extendWithRequestId(m);let h=Date.now()-d;return l.measurements.totalTimeMs=h,c.info(`request.response: [${e.url}], took ${h} ms`),c.debug("request.response properties",l.properties),c.debug("request.response measurements",l.measurements),c.debug(`messages: ${JSON.stringify(n.messages)}`),u.sendGHTelemetryEvent("request.response",l.properties,l.measurements),f}).catch(f=>{if(t.get(Mr).isAbortError(f))throw f;let h=l.extendedBy({error:"Network exception"});u.sendGHTelemetryEvent("request.shownWarning",h.properties,h.measurements),l.properties.code=String(f.code??""),l.properties.errno=String(f.errno??""),l.properties.message=String(f.message??""),l.properties.type=String(f.type??"");let g=Date.now()-d;throw l.measurements.totalTimeMs=g,c.debug(`request.response: [${e.url}] took ${g} ms`),c.debug("request.error properties",l.properties),c.debug("request.error measurements",l.measurements),u.sendGHTelemetryEvent("request.error",l.properties,l.measurements),f}).finally(()=>{_J(u,n.messages,l)})}function mnt(t){switch(t){case 2:return"conversation-panel";case 1:return"conversation-inline"}}var uZ=class{constructor(){this._onDidMakeChatMLRequest=new gr;this.onDidMakeChatMLRequest=this._onDidMakeChatMLRequest.event}async fetchOne(e,r,n,i,o,s,a,c,u){let l=await this.fetchMany(e,r,n,i,o,s,{...a,n:1},c,u);return l.type==="success"?{...l,value:l.value[0]}:l}},_0=class extends uZ{constructor(r){super();this.accessor=r;this.logger=r.get(ue).getPromptResponseLogger("ChatMLFetcher")}async fetchMany(r,n,i,o,s,a,c,u,l){let d=u?.requestId??u?.messageId??bn(),p=lE(this.accessor.get(ge),r.map(y=>({role:y.role,content:y.content,...y.name?{name:y.name}:void 0}))),f=Math.min(s.modelMaxPromptTokens-p+2048,4096);c={max_tokens:f,...c};let m=_0.preparePostOptions(c),h=s.model;l&&(l.intent_model=await this.getOffTopicModelName(),l.intent_tokenizer=await this.getOffTopicModelTokenizer(),l.intent_threshold=await this.getOffTopicModelThreshold());let g={messages:r,model:h,repoInfo:void 0,ourRequestId:d,location:o,postOptions:m,secretKey:c.secretKey,...l},v=Ar.createAndMarkAsIssued({...u,uiKind:mt.toString(o)});try{let y,b=hnt(g);if(!b.isValid)y={type:"failed",failKind:"validationFailed",reason:`Prompt failed validation with the reason: ${b.reason}. Please file an issue.`};else{y=await C2e(this.accessor,s,g,v,n||(async()=>{}),i,u);let T=a?.extensionId??nb,L=a?.agent&&T===nb&&Tne.includes(a.agent)?l_(a.agent):a?.agent;this._onDidMakeChatMLRequest.fire({model:s.model,source:{extensionId:T,agent:L},tokenCount:p})}let x=Date.now()-v.issuedTime,S;switch(y.type){case"success":return await this.processSuccessfulResponse(y,g.ourRequestId,f,p,x,v,s);case"canceled":return this.accessor.get(Ee).sendMSFTTelemetryEvent("response.cancelled",{source:u?.messageSource??"unknown",requestId:g.ourRequestId,model:s.model},{totalTokenMax:s.modelMaxPromptTokens??-1,promptTokenCount:p,tokenCountMax:f,timeToFirstToken:x,timeToCancelled:v?Date.now()-v.issuedTime:-1}),this.processCanceledResponse(y,g.ourRequestId);case"failed":return S=this.processFailedResponse(y,g.ourRequestId),this._sendResponseErrorTelemetry(S,u,g,s,p,f,x),S}}catch(y){let b=Date.now()-v.issuedTime,x=this.processError(y,g.ourRequestId);return this._sendResponseErrorTelemetry(x,u,g,s,p,f,b),x}}_sendResponseErrorTelemetry(r,n,i,o,s,a,c){this.accessor.get(Ee).sendMSFTTelemetryEvent("response.error",{type:r.type,reason:r.reason,source:n?.messageSource??"unknown",requestId:i.ourRequestId,model:o.model},{totalTokenMax:o.modelMaxPromptTokens??-1,promptTokenCount:s,tokenCountMax:a,timeToFirstToken:c})}static preparePostOptions(r){return{...r,stream:!0}}async processSuccessfulResponse(r,n,i,o,s,a,c){let u=[];for await(let p of r.chatCompletions)this.accessor.get(Ee).sendMSFTTelemetryEvent("response.success",{reason:p.finishReason,filterReason:p.filterReason,source:a?.properties.messageSource??"unknown",model:c?.model,requestId:n},{totalTokenMax:c?.modelMaxPromptTokens??-1,tokenCountMax:i,promptTokenCount:o,tokenCount:p.numTokens,timeToFirstToken:s,timeToComplete:a?Date.now()-a.issuedTime:-1}),this.isRepetitive(p,a?.properties)||u.push(p);this.logger.debug(`Received choices: ${JSON.stringify(u,null,2)}`);let l=u.filter(p=>p.finishReason==="stop"||p.finishReason==="client-trimmed");if(l.length>=1)return{type:"success",value:l.map(p=>p.message.content),requestId:n};let d=u[0];switch(d?.finishReason){case"content_filter":return{type:"filtered",category:d.filterReason??"snippy",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:d.message.content}}return{type:"unknown",reason:"Response contained no choices.",requestId:n}}async getOffTopicModelName(){let r=this.accessor.get(ke).getConfig(Ae.DebugOverrideChatOffTopicModel);if(r)return r;let n=await this.accessor.get(Hm).chatOffTopicModel();return n||""}async getOffTopicModelTokenizer(){let r=this.accessor.get(ke).getConfig(Ae.DebugOverrideChatOffTopicModelTokenizer);if(r)return r;let n=await this.accessor.get(Hm).chatOffTopicModelTokenizer();return n||""}async getOffTopicModelThreshold(){let r=this.accessor.get(ke).getConfig(Ae.DebugOverrideChatOffTopicModelThreshold);if(r!==0)return r;let n=await this.accessor.get(Hm).chatOffTopicModelThreshold();return n!==0?n:0}isRepetitive(r,n){let i=_2e(r.tokens);if(i){let o=Ar.createAndMarkAsIssued();o.extendWithRequestId(r.requestId);let s=o.extendedBy(n);this.accessor.get(Ee).sendRestrictedGHTelemetryEvent("conversation.repetition.detected",s.properties,s.measurements),this.logger.info("Filtered out repetitive conversation result")}return i}processCanceledResponse(r,n){return this.logger.debug("Cancelled after awaiting fetchConversation"),{type:"canceled",reason:r.reason,requestId:n}}processFailedResponse(r,n){if(r.failKind==="rateLimited")return{type:"rateLimited",reason:r.reason,requestId:n};if(r.failKind==="offTopic")return{type:"offTopic",reason:r.reason,requestId:n};if(r.failKind==="tokenExpiredOrInvalid"||r.failKind==="clientNotSupported"||r.reason.includes("Bad request: "))return{type:"badRequest",reason:r.reason,requestId:n};if(r.failKind==="serverError")return{type:"failed",reason:r.reason,requestId:n};if(r.failKind==="contentFilter")return{type:"filtered",reason:r.reason,category:"prompt",requestId:n};if(r.failKind==="unauthorized")return{type:"agent_unauthorized",reason:r.reason,authorizationUrl:r.data.authorize_url,requestId:n};if(r.failKind==="failedDependency")return{type:"agent_failed_dependency",reason:r.reason,requestId:n};if(r.failKind==="extensionBlocked"){let i=typeof r.data?.retryAfter=="number"?r.data.retryAfter:300;return{type:"extensionBlocked",reason:r.reason,requestId:n,retryAfter:i,learnMoreLink:r.data?.learnMoreLink??""}}return{type:"failed",reason:r.reason,requestId:n}}processError(r,n){let i=this.accessor.get(Mr);return i.isAbortError(r)?{type:"canceled",reason:"network request aborted",requestId:n}:Ep(r)?{type:"canceled",reason:"Got a cancellation error",requestId:n}:(this.accessor.get(ue).defaultLogger.exception(r,"Error on conversation request"),this.accessor.get(Ee).sendGHTelemetryException(r,"Error on conversation request"),i.isDNSLookupFailedError(r)?{type:"failed",reason:"It appears you're not connected to the internet, please check your network connection and try again.",requestId:n}:i.isFetcherError(r)?{type:"failed",reason:i.getUserMessageForFetcherError(r),requestId:n}:{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};_0=fe([ie(0,ct)],_0);function hnt(t){return t.messages.length===0?{isValid:!1,reason:"No messages provided"}:t?.postOptions?.max_tokens&&t?.postOptions?.max_tokens<1?{isValid:!1,reason:"Invalid response token parameter"}:t.messages[t.messages.length-1].role!=="user"?{isValid:!1,reason:"Last message must be from user"}:{isValid:!0,reason:""}}var I2e=W(require("path")),w2e=W(require("vscode"));var QM=W(st());var YM=class extends K{render(){return vscpp(vscppf,null,vscpp(QM.SystemMessage,null,vscpp(lZ,null),vscpp(sn,null)),vscpp(QM.UserMessage,null,vscpp(dZ,{templates:this.props.templates,features:this.props.features,filenames:this.props.filenames})))}},lZ=class extends K{render(){return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),"You are helping a software developer to configure a Dev Container by picking a configuration template and features.")}},dZ=class extends K{render(){return vscpp(vscppf,null,"This is a partial list of workspace files:",vscpp("br",null),this.props.filenames.map(e=>`- ${e}
`).join(""),vscpp("br",null),"Based on the workspace files, please suggest the best template from the list of templates below.",vscpp("br",null),"First identify the relevant files ignoring common files, then pick the best template and reply with the best template's id.",vscpp("br",null),"This is the list of available templates:",vscpp("br",null),this.props.templates.map(e=>`- ${e.id}: ${e.name||e.id}: ${e.description||e.name||e.id}
`).join(""),vscpp("br",null),"Also based on the workspace files, please suggest all relevant features from the list of features below.",vscpp("br",null),"First identify the relevant files ignoring common files, then pick all relevant features and reply with the relevant features' ids.",vscpp("br",null),"This is the list of available features:",vscpp("br",null),this.props.features.map(e=>`- ${e.id}: ${e.name||e.id}: ${e.description||e.name||e.id}
`).join(""),vscpp("br",null))}};var gnt=["alpine","debian","docker-existing-docker-compose","docker-existing-dockerfile","docker-in-docker","docker-outside-of-docker","docker-outside-of-docker-compose","ubuntu","universal"].map(t=>`ghcr.io/devcontainers/templates/${t}`),vnt=["common-utils","git"].map(t=>`ghcr.io/devcontainers/features/${t}`),XM=class{constructor(e){this.accessor=e;this.telemetryService=e.get(Ee),this.logger=e.get(ue).getPromptResponseLogger("Dev Container Configuration Generator"),this.options=e.get(Vi)}async generate(e,r,n){if(!r.length)return{type:"success",template:void 0,features:[]};let i=Date.now(),o=await this.accessor.get(Ue).getUserRequestEndpoint(3),s=Math.floor(o.modelMaxPromptTokens*4/3),a=this.processFilenames(r,s),c=e.templates.filter(h=>!gnt.includes(h.id)),u=(e.features||[]).filter(h=>!vnt.includes(h.id)),d=await new Je(o,YM,{filenames:a,templates:c,features:u},this.accessor.get(ge),this.accessor).render(),p=Date.now(),f=await this.accessor.get(Jt).fetchOne(d.messages,void 0,n,3,o,void 0,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:"command.generateDevContainerConfigPrompt"});this.logger.logResponse(f);let m=f.type==="success"?this.processGeneratedConfig(f.value,c,u):void 0;return this.telemetryService.sendMSFTTelemetryEvent("devcontainer.generateConfig",{model:o.model,requestId:f.requestId,responseType:f.type,templateId:m?.template,featureIds:m?.features.join(",")},{originalFilenameCount:r.length,originalFilenameLength:r.join("").length,processedFilenameCount:a.length,processedFilenameLength:a.join("").length,timeToRequest:p-i,timeToComplete:Date.now()-i}),{type:"success",template:m?.template,features:m?.features||[]}}processFilenames(e,r){let n=[...e],i=Math.floor(r*.9),o=n.join(`
`).length;if(o>i)for(;o>i&&n.length>0;){let s=n.pop();o-=s.length}return n}processGeneratedConfig(e,r,n){let i=r.find(o=>new RegExp(`\\b${G0(o.id)}\\b`).test(e))?.id;return i==="ghcr.io/devcontainers/templates/javascript-node"&&(i="ghcr.io/devcontainers/templates/typescript-node"),{template:i,features:n.filter(o=>new RegExp(`\\b${G0(o.id)}\\b`).test(e)).map(o=>o.id)}}};var QE=class{constructor(e){this.accessor=e}async generateConfiguration(e,r){if(r.isCancellationRequested)return{type:"cancelled"};let n=this.accessor.get(Ta),i=(await Promise.all(["*","*/*","*/*/*"].map(s=>n.findFilesWithDefaultExcludes(new w2e.RelativePattern(e.rootUri,s),1e3,r)))).flat().map(s=>I2e.posix.relative(e.rootUri.path,s.path));return new XM(this.accessor).generate(e.index,i,r)}};QE=fe([ie(0,ct)],QE);var fZ=W(require("path")),Il=require("vscode");var Sb=W(st());var JM=class extends K{render(){return vscpp(vscppf,null,vscpp(Sb.SystemMessage,null,vscpp(pZ,null),vscpp(Br,null),vscpp(Tr,null)),vscpp(Sb.UserMessage,{priority:700,name:"changes"},"# CODE CHANGES:",vscpp("br",null),this.props.diff.map(e=>vscpp(Be,{uri:null,code:e}))),this.props.recentCommitMessages.user.length>0&&vscpp(Sb.UserMessage,{priority:600,name:"user-commits"},"# RECENT USER COMMITS:",vscpp("br",null),this.props.recentCommitMessages.user.map(e=>vscpp(Be,{uri:null,languageId:"text",code:e}))),this.props.recentCommitMessages.repository.length>0&&vscpp(Sb.UserMessage,{priority:500,name:"recent-commits"},"# RECENT REPOSITORY COMMITS:",vscpp("br",null),this.props.recentCommitMessages.repository.map(e=>vscpp(Be,{uri:null,languageId:"text",code:e}))),vscpp(Sb.UserMessage,null,"Remember to ONLY return a single markdown ```text code block with the suggested commit message. NO OTHER PROSE! If you write more than the commit message, your commit message gets lost.",vscpp("br",null),"Example:",vscpp("br",null),vscpp(Be,{uri:null,languageId:"text",code:"commit message goes here"})))}},pZ=class extends K{render(){return vscpp(vscppf,null,"You are an AI programming assistant, helping a software developer to come with the best git commit message for their code changes.",vscpp("br",null),"You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.",vscpp("br",null),"# Examples of commit messages:",vscpp("br",null),vscpp(Be,{uri:null,languageId:"text",code:"feat: improve page load with lazy loading for images"}),vscpp(Be,{uri:null,languageId:"text",code:"Fix bug preventing submitting the signup form"}),vscpp(Be,{uri:null,languageId:"text",code:"chore: update npm dependency to latest stable version"}),vscpp(Be,{uri:null,languageId:"text",code:"Update landing page banner color per client request"}),vscpp("br",null),vscpp("br",null),"# First, think step-by-step:",vscpp("br",null),"1. Analyze the CODE CHANGES thoroughly to understand what's been modified.",vscpp("br",null),"2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.",vscpp("br",null),"3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.",vscpp("br",null),"4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the the established writing conventions. 5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.",vscpp("br",null),"6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details",vscpp("br",null))}};var ZM=class{constructor(e){this.accessor=e;this.telemetryService=e.get(Ee),this.logger=e.get(ue).getPromptResponseLogger("git commit message generator"),this.options=e.get(Vi)}async generateGitCommitMessage(e,r,n,i){let o=Date.now(),s=await this.accessor.get(Ue).getUserRequestEndpoint(3),a=Math.floor(s.modelMaxPromptTokens*4/3),c=this.processDiff(e,a),l=await new Je(s,JM,{diff:c,recentCommitMessages:r},this.accessor.get(ge),this.accessor).render(void 0,void 0),d=Math.min(this.options.temperature*(1+n),2),p=Date.now(),f=await this.accessor.get(Jt).fetchOne(l.messages,void 0,i,3,s,{agent:"git-commit"},{temperature:d,top_p:this.options.topP},{messageSource:"command.generateGitCommitMessagePrompt"});if(this.logger.logResponse(f),this.telemetryService.sendMSFTTelemetryEvent("git.generateCommitMessage",{model:s.model,requestId:f.requestId,responseType:f.type},{attemptCount:n+1,originalDiffFileCount:e.length,originalDiffLength:e.join("").length,processedDiffFileCount:c.length,processedDiffLength:c.join("").length,timeToRequest:p-o,timeToComplete:Date.now()-o}),f.type!=="success")return;let[m,h]=this.processGeneratedCommitMessage(f.value);return m!=="oneTextCodeBlock"&&this.telemetryService.sendMSFTTelemetryEvent("git.generateCommitMessageIncorrectResponseFormat",{requestId:f.requestId,responseFormat:m}),h}processDiff(e,r){let n=[...e],i=r-Math.floor(r*.2),o=n.join(`

`).length;if(o>i)for(n.sort((s,a)=>s.length-a.length);o>i&&n.length>0;){let s=n.pop();o-=s.length}return n}processGeneratedCommitMessage(e){let n=/^```text\s*([\s\S]+?)\s*```$/m.exec(e);return n===null?["noTextCodeBlock",e]:n.length!==2?["multipleTextCodeBlocks",e]:["oneTextCodeBlock",n[1]]}};var XE=class{constructor(e){this.accessor=e;this._commitMessages=new Map;this._disposables=new qt;this._repositoryDisposables=new Wb;let r=()=>{this._disposables.add(this._gitExtensionApi.onDidOpenRepository(this._onDidOpenRepository,this)),this._disposables.add(this._gitExtensionApi.onDidCloseRepository(this._onDidCloseRepository,this));for(let i of this._gitExtensionApi.repositories)this._onDidOpenRepository(i)},n=this.accessor.get(oc);this._gitExtensionApi=n.getExtensionApi(),this._gitExtensionApi?r():this._disposables.add(n.onDidChange(i=>{i.enabled&&(this._gitExtensionApi=n.getExtensionApi(),r())}))}async generateCommitMessage(e,r=Vr.None){if(!r.isCancellationRequested)return Il.window.withProgress({location:Il.ProgressLocation.SourceControl},async()=>{let n=await this._getChanges(e),i=await this._applyContentExclusion(n);if(i.length===0){Il.window.showInformationMessage(Il.l10n.t("Cannot generate a commit message because the changes were excluded from the context due to content exclusion rules."));return}let o=this._getAttemptCount(e,i),s=await this._getRecentCommitMessages(e),c=await new ZM(this.accessor).generateGitCommitMessage(i,s,o,r);if(c&&e.state.HEAD&&e.state.HEAD.commit){let u=this._commitMessages.get(e.rootUri.toString())??new Map;u.set(e.state.HEAD.commit,{attemptCount:o,changes:i,message:c}),this._commitMessages.set(e.rootUri.toString(),u)}return c})}getRepository(e){return this._gitExtensionApi?this._gitExtensionApi.repositories.length===1?this._gitExtensionApi.repositories[0]:(e=e??Il.window.activeTextEditor?.document.uri,e?this._gitExtensionApi.getRepository(e):null):null}async _applyContentExclusion(e){let r=[],n=this.accessor.get(De);for(let i of e)i.originalUri===void 0&&i.modifiedUri===void 0||i.originalUri&&await n.isCopilotIgnored(i.originalUri)||i.modifiedUri&&i.modifiedUri!==i.originalUri&&await n.isCopilotIgnored(i.modifiedUri)||r.push(i.diff);return r}_getAttemptCount(e,r){let i=this._commitMessages.get(e.rootUri.toString())?.get(e.state.HEAD?.commit??"");if(!i||i.changes.length!==r.length)return 0;for(let o=0;o<r.length;o++)if(i.changes[o]!==r[o])return 0;return i.attemptCount+1}async _getChanges(e){let r=await e.diff(!0);if(r!=="")return this._parseGitDiff(e,r);let n=await e.diff();return this._parseGitDiff(e,n)}async _getRecentCommitMessages(e){let r=[],n=[];try{let i=await e.log({maxEntries:10});r.push(...i.map(a=>a.message));let o=await e.getConfig("user.name")??await e.getGlobalConfig("user.name"),s=await e.log({maxEntries:10,author:o});n.push(...s.map(a=>a.message))}catch{}return{repository:r,user:n}}_parseGitDiff(e,r){let n=[],i=c=>{let u=/^---\s(.*)\n\+\+\+\s(.*)$/m.exec(c);if(!u||u.length!==3)return{originalUri:void 0,modifiedUri:void 0};let l=u[1]==="/dev/null"?void 0:Il.Uri.file(fZ.join(e.rootUri.fsPath,u[1].substring(2))),d=u[2]==="/dev/null"?void 0:Il.Uri.file(fZ.join(e.rootUri.fsPath,u[2].substring(2)));return{originalUri:l,modifiedUri:d}},o=0,s,a=/^diff --git a\/(.+?) b\/(.+?)$/gm;do{if(s=a.exec(r),s===null)break;if(o<s.index){let c=r.substring(o,s.index),{originalUri:u,modifiedUri:l}=i(c);n.push({diff:c,originalUri:u,modifiedUri:l})}o=s.index}while(!0);if(o<r.length){let c=r.substring(o),{originalUri:u,modifiedUri:l}=i(c);n.push({diff:c,originalUri:u,modifiedUri:l})}return n}_onDidOpenRepository(e){typeof e.onDidCommit!==void 0&&this._repositoryDisposables.set(e,e.onDidCommit(()=>this._onDidCommit(e),this))}_onDidCloseRepository(e){this._repositoryDisposables.deleteAndDispose(e),this._commitMessages.delete(e.rootUri.toString())}async _onDidCommit(e){let r=e.state.HEAD;if(!r?.commit)return;let n=this._commitMessages.get(e.rootUri.toString());if(!n)return;let i=await e.getCommit(r.commit),o=i.parents.length>0?i.parents[0]:"",s=n.get(o);if(!s)return;let a=zR(i.message,s.message);this.accessor.get(Ee).sendMSFTTelemetryEvent("git.generateCommitMessageSurvival",void 0,{attemptCount:s.attemptCount,survivalRateFourGram:a}),n.delete(o),this._commitMessages.set(e.rootUri.toString(),n)}dispose(){this._repositoryDisposables.dispose(),this._disposables.dispose()}};XE=fe([ie(0,ct)],XE);var R2e=require("vscode");var JE=oe("ChatVariableService"),eF=class{constructor(e){this._variableEnablements=e.get(ke).getConfigMixedWithDefaults(Ae.ConversationVariablesEnablements)}isVariableEnabled(e){return typeof this._variableEnablements[e.name]=="boolean"?this._variableEnablements[e.name]:typeof e.defaultEnablement=="boolean"?e.defaultEnablement:!!this._variableEnablements["*"]}getVariables(){let e=[];for(let r of un.contextResolvers)r.variableInfo&&this.isVariableEnabled(r.variableInfo)&&e.push({name:r.variableInfo.name,fullName:r.variableInfo.fullName,icon:r.variableInfo.icon,kind:r.kind,description:r.variableInfo.description,resolve:r.resolveContext.bind(r)});return e}getVariable(e){return this.getVariables().find(r=>r.name===e)}};var ZE=class{constructor(e,r){this._chatVariableService=e,this._fsService=r}async resolveVariablesInPrompt(e,r){let n=[];for(let i of r){let o=i.value;if(o instanceof R2e.Uri){let a=(await this._fsService.readFile(o)).toString().replace(/\r/g,"");o=Ii("",a)}let s=this._chatVariableService.getVariable(i.name);n.push({kind:s?.kind??"variable",userMessages:[ynt(i.name)+o]}),i.range&&(e=e.slice(0,i.range[0])+`[#${i.name}](#${i.name}-context)`+e.slice(i.range[1]))}return{parts:n,message:e}}};ZE=fe([ie(0,JE),ie(1,fn)],ZE);function ynt(t){return`# ${t.toUpperCase()} CONTEXT
`}var bnt=[],A2e=bnt;var TZ={};an(TZ,{create:()=>xnt});var mZ=W(_r());var T2=class{constructor(e){this.kind="workspace";let r,n,i,o;e.getConfig(Ae.WorkspaceUseFilesVariable)?(r="files",n=mZ.t("Searches through the files in the workspace and pulls out relevant information for the query.")):(r="codebase",i="Codebase",o="folder",n=mZ.t("Searches through the codebase and pulls out relevant information for the query.")),this.variableInfo={name:r,fullName:i,icon:o,description:n,defaultEnablement:Ap||void 0}}async resolveContext(e,r,n,i){if(!r.message)return;let{messages:o,references:s,usedContext:a}=await ca(e,r.endpoint,fb,{chatVariables:[],conversation:r.conversation??new _l,query:this.turnQueryIntoWorkspaceQuery(r.message),include:{workspaceChunks:!0}},e.get(ge),i,n);if(o.length>0)return{kind:this.kind,userMessages:o.map(c=>c.content),usedContext:a,references:s}}turnQueryIntoWorkspaceQuery(e){let r=e;return r.startsWith("@")&&(r=r.replace(/@\w+\s*/,"")),r=r.replaceAll(/\#files/gi,"files"),r}};T2=fe([ie(0,ke)],T2);un.register(T2);var _nt=require("path"),hZ=class{constructor(){this.kind="current-editor";this.variableInfo={name:"editor",description:"The visible source code in the active editor",defaultEnablement:!0};this.metaContextResolverInfo={description:"Source code in the active document."}}async resolveContext(e,r){let n=e.get(Tt).activeTextEditor,i=n?.visibleRanges[0];if(i){let o="";n.selection.isSingleLine&&(o=`The cursor is on line: ${n.selection.start.line}`);let s=[`Excerpt from active file ${_nt.basename(n.document.uri.path)}, lines ${i.start.line+1} to ${i.end.line+1}:`,Ii(n.document.languageId,n.document.getText(i),!1),"",o].join(`
`),a=[{uri:n.document.uri,version:n.document.version,ranges:[i]}];return{kind:this.kind,userMessages:[s],usedContext:a,references:[new xo.PromptReference({uri:n.document.uri,range:i})]}}}},kPr=un.register(new hZ);var gZ=class{constructor(){this.kind="current-selection-implementations";this.metaContextResolverInfo={description:"Relevant implementations referenced in active selection."}}async resolveContext(e,r,n,i){let{references:o,messages:s,usedContext:a}=await ca(e,r.endpoint,f0,{},e.get(ge));return{kind:this.kind,references:o,userMessages:s.map(c=>c.content),usedContext:a}}},UPr=un.register(new gZ);var vZ=class{constructor(){this.kind="debug-console-output";this.variableInfo={name:"debugConsole",description:"The output in the debug console",defaultEnablement:!1};this.metaContextResolverInfo={description:"Debug console output."}}async resolveContext(e){return{kind:this.kind,userMessages:[`Debug console output:
`+e.get(h_).consoleOutput]}}},jPr=un.register(new vZ);var yZ=class{constructor(){this.kind="diagnostics";this.metaContextResolverInfo={description:"Diagnostics in the active editor."}}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=y0(e.get(Ko),i.document.uri,i.selection,r.message),{messages:s,usedContext:a}=await ca(e,r.endpoint,up,{documentContext:i,diagnostics:o},e.get(ge));return{kind:this.kind,userMessages:s.map(c=>c.content),usedContext:a}}},JPr=un.register(new yZ);var P2e=W(require("path"));var bZ=class{constructor(){this.kind="git-metadata";this.variableInfo={name:"git",description:"Information about the current git repository",defaultEnablement:!1};this.metaContextResolverInfo={description:"Metadata about the current git repository."}}async resolveContext(e,r,n){let i=e.get(Ze),s=e.get(ei).repositories,a=i.getWorkspaceFolders();if(s.length===0||!a)return;if(a.length>1){let u=r.documentContext?.document.uri??e.get(Tt).activeTextEditor?.document.uri;if(u){let l=i.getWorkspaceFolder(u);if(l){let d=a.findIndex(p=>p.toString()===l.toString());d!==-1&&(s=[s[d]],a=[a[d]])}}}let c=[];for(let u=0;u<s.length;u++){if(n.isCancellationRequested)return;let l=s[u],d=a[u];if(!l)continue;let p=[];p.push(`Workspace Folder: ${P2e.basename(d.path)}`),p.push("```"),l.headBranchName?(p.push(`Current Branch name: ${l.headBranchName}`),p.push(`Upstream: ${l.upstreamBranchName?l.upstreamBranchName:"none"}`)):p.push("Detached HEAD?: yes"),p.push(`Is currently rebasing?: ${l.isRebasing?"yes":"no"}`),p.push(`Remotes: ${(l.remotes??[]).join(", ")}`),p.push("```"),c.push(p.join(`
`))}return{kind:this.kind,userMessages:[`Metadata about the current git repository:
`+c.join(`
`)]}}},okr=un.register(new bZ);var _Z=class{constructor(){this.kind="terminal-buffer";this.variableInfo={name:"terminalBuffer",description:"The active terminal's buffer",defaultEnablement:!1};this.metaContextResolverInfo={description:"The active terminal's buffer."}}async resolveContext(e){let r=e.get(ao).terminalBuffer;return{kind:this.kind,userMessages:[`The active terminal's buffer:
`+r]}}},lkr=un.register(new _Z);var xZ=class{constructor(){this.kind="terminal-last-command";this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's last run command."}}async resolveContext(e){let r=e.get(ao).terminalLastCommand;if(!r)return;let n=[];r.commandLine&&(n.push("The following is the last command run in the terminal:"),n.push(r.commandLine)),r.cwd&&(n.push("It was run in the directory:"),n.push(typeof r.cwd=="object"?r.cwd.toString():r.cwd)),r.output&&(n.push("It has the following output:"),n.push(r.output));let i=n.join(`
`);return{kind:this.kind,userMessages:[`The active terminal's last run command:
`+i]}}},hkr=un.register(new xZ);var SZ=class{constructor(){this.kind="terminal-selection";this.variableInfo={name:"terminalSelection",icon:"terminal",fullName:"Terminal Selection",description:"The active terminal's selection",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's selection."}}async resolveContext(e){let r=e.get(ao).terminalSelection;return{kind:this.kind,userMessages:[`The active terminal's selection:
`+r]}}},_kr=un.register(new SZ);var EZ=class{constructor(){this.kind="terminal-shell-type"}async resolveContext(e){let r=e.get(ao).terminalShellType;return{kind:this.kind,userMessages:[`The active terminal's shell type:
`+r]}}},Ckr=un.register(new EZ);function xnt(){}var CZ={};an(CZ,{create:()=>Snt});function Snt(t){let e=new qt;return e.add(un.initialize(t.get(zi))),e}var IZ={};an(IZ,{create:()=>Ent});async function Ent(t){await t.get(Ze).ensureWorkspaceIsFullyLoaded()}var Tnt=[...A2e,IZ,TZ,CZ],k2e=Tnt;var RZ={};an(RZ,{create:()=>Cnt});var nF=require("vscode");async function tF(t,e,r){let n=t?.repositories;if(!n)return r.debug("No git repositories found"),!1;let i=n.map(b_).filter(s=>s);return(await Promise.all(i.map(s=>{let[a,c]=s.split("/");return e.isAvailable(a,c)}))).every(s=>s)}var D2e="github.copilotChat.signIn";async function N2e(t,e){let r=t.get(ei),n=t.get(Oc),i=t.get(Et),o=t.get(ue).getLogger("authSignInCommand");if(await tF(r,n,o)){await i.getAnyGitHubToken(e?{forceNewSession:!0}:{createIfNone:!0});return}await i.getPermissiveGitHubToken({forceNewSession:{learnMore:ut.parse("https://aka.ms/copilotRepoScope")}})}var rF=require("vscode");async function L2e(t){let e=new wZ(t);return await e.run(),e}var wZ=class{constructor(e){this.accessor=e;this.tokenManager=this.accessor.get(Et);this.logger=this.accessor.get(ue).getLogger("auth");this.ghRepoService=this.accessor.get(Oc);this.gitService=this.accessor.safeGet(ei);this.vscodeExtensionContext=this.accessor.get(xr);this.disposables=new qt}async run(){await this.waitForChatEnabled(),!(!this.gitService||await tF(this.gitService,this.ghRepoService,this.logger)||(this.registerListeners(),await this.tokenManager.getPermissiveGitHubToken({silent:!0})))&&await this.showPrompt()}async waitForChatEnabled(){try{if((await this.tokenManager.getCopilotToken(this.accessor)).getTokenValue("chat")==="1")return}catch(e){this.logger.debug("Failed to get copilot token",e)}await new Promise(e=>{let r=this.accessor.get(Co).onCopilotToken(async n=>{n.envelope.chat_enabled!==!1&&(r.dispose(),e())})})}registerListeners(){this.disposables.add(this.tokenManager.onDidGitHubTokenChanged(async()=>{if(await this.tokenManager.getPermissiveGitHubToken({silent:!0}))return;if(await this.tokenManager.getAnyGitHubToken())await this.showPrompt();else{this.vscodeExtensionContext.globalState.update("copilot.shownPermissiveTokenModal",!1);return}}))}async showPrompt(){try{let e=this.vscodeExtensionContext.globalState.get("copilot.shownPermissiveTokenModal",!1),r={};e||(r.forceNewSession={detail:rF.l10n.t("To show you more relevant Copilot Chat results, we need permission to read the contents of your repository on GitHub."),learnMore:rF.Uri.parse("https://aka.ms/copilotRepoScope")},this.vscodeExtensionContext.globalState.update("copilot.shownPermissiveTokenModal",!0)),await this.tokenManager.getPermissiveGitHubToken(r)&&this.logger.debug("Got permissive GitHub token")}catch(e){this.logger.debug("Failed to get permissive GitHub token",e),await this.tokenManager.getPermissiveGitHubToken({})}}dispose(){this.disposables.dispose()}};async function Cnt(t){let e=t.get(ct);return nF.Disposable.from(nF.commands.registerCommand(D2e,r=>N2e(e,r)),await L2e(e))}var NZ={};an(NZ,{create:()=>Ant});var vn=W(require("vscode"));var kZ="vscode-chat-code-block",DZ="vscode-copilot-chat-code-block",Int=[/^\n```(typescript|javascript)\S*\nany\n```\n$/i],C2=class{constructor(e,r){this.parserService=e;this.telemetryService=r}async provideDefinition(e,r,n){return this.goTo("vscode.executeDefinitionProvider",e,r,n)}async provideImplementation(e,r,n){return this.goTo("vscode.executeImplementationProvider",e,r,n)}async provideTypeDefinition(e,r,n){return this.goTo("vscode.executeTypeDefinitionProvider",e,r,n)}async provideHover(e,r,n){let i=I2(e.uri);if(!i)return;let o=await this.execHover(i,r),s=this.filterOutGenericHovers(o);if(s?.length)return this.convertHover(s);if(n.isCancellationRequested)return;let a=await this.getReferencesContext(e,r,n);if(!(!a||n.isCancellationRequested)){for(let c of a.wordMatches){let u=await this.execHover(c.uri,c.range.start);if(n.isCancellationRequested)return;if(u?.length)return this.convertHover(u)}return this.convertHover(o)}}async execHover(e,r){return vn.commands.executeCommand("vscode.executeHoverProvider",e,r)}convertHover(e){return e.length?new vn.Hover(e.flatMap(r=>r.contents),e[0].range):void 0}filterOutGenericHovers(e){return e.filter(r=>r.contents.some(n=>{if(typeof n=="string")return n.length;if(!n.value.length)return!1;for(let i of Int)if(i.test(n.value))return!1;return!0}))}async goTo(e,r,n,i){this.telemetryService.sendMSFTTelemetryEvent("codeBlock.action.goTo",{languageId:r.languageId,command:e});let o=await this.executeGoToInChatBlocks(e,r,n);if(o?.length)return o;if(!i.isCancellationRequested)return this.executeGoToInChatReferences(e,r,n,i)}async executeGoToInChatBlocks(e,r,n){let i=I2(r.uri);return i?(await this.executeGoTo(e,i,n))?.map(s=>"uri"in s?{targetRange:s.range,targetUri:AZ(s.uri)??s.uri}:{...s,targetUri:AZ(s.targetUri)??s.targetUri}):void 0}async executeGoTo(e,r,n){return vn.commands.executeCommand(e,r,n)}async executeGoToInChatReferences(e,r,n,i){let o=await this.getReferencesContext(r,n,i);if(!(!o||i.isCancellationRequested))for(let s of o.wordMatches){let a=await this.executeGoTo(e,s.uri,s.range.start);if(i.isCancellationRequested)return;if(a)return a.map(c=>"uri"in c?{targetRange:c.range,targetUri:c.uri,originSelectionRange:o.wordRange}:{targetSelectionRange:c.targetSelectionRange,targetRange:c.targetRange,targetUri:c.targetUri,originSelectionRange:o.wordRange})}}async getReferencesContext(e,r,n){let i=this.getReferences(e);if(!i?.length)return;let o=e.getWordRangeAtPosition(r);if(!o)return;let s=e.getText(o),a=await this.findWordInReferences(s,i,n);return{wordRange:o,wordMatches:a}}getReferences(e){try{let r=decodeURIComponent(e.uri.fragment);return JSON.parse(r).references.map(i=>"range"in i?new xo.PromptReference(new Ea(Zn.from(i.uri),new Xe(i.range.startLineNumber-1,i.range.startColumn-1,i.range.endLineNumber-1,i.range.endColumn-1))):new xo.PromptReference(Zn.from(i.uri)))}catch{return[]}}async findWordInReferences(e,r,n){return Xt(await Promise.all(r.map(i=>{if(j0(i.anchor))return this.findWordInDoc(e,i.anchor,new vn.Range(0,0,Number.MAX_SAFE_INTEGER,0),n);if("uri"in i.anchor)return this.findWordInDoc(e,i.anchor.uri,i.anchor.range,n)})))}async findWordInDoc(e,r,n,i){let o=await vn.workspace.openTextDocument(r);if(i.isCancellationRequested)return;let s=await this.getSymbolsInRange(o,n,i);if(i.isCancellationRequested)return;for(let u of s)if(u.identifier===e){let l=o.positionAt(u.startIndex);return new vn.Location(r,l)}let a=o.getText(n),c=o.offsetAt(n.start);for(let u of a.matchAll(new RegExp(wnt(e),"g")))if(u.index){let l=o.positionAt(c+u.index),d=o.getText(o.getWordRangeAtPosition(l));if(e===d)return new vn.Location(r,l)}}async getSymbolsInRange(e,r,n){let i=this.parserService.getTreeSitterAST(e);return i?i.getSymbols({startIndex:e.offsetAt(r.start),endIndex:e.offsetAt(r.end)}):[]}};C2=fe([ie(0,xt),ie(1,Ee)],C2);function wnt(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function I2(t){return t.scheme===kZ?t.with({scheme:DZ}):void 0}function AZ(t){return t.scheme===DZ?t.with({scheme:kZ}):void 0}var PZ=class extends hr{constructor(){super();this._onDidChange=this._register(new Zne);this.onDidChange=this._onDidChange.event;this._register(vn.workspace.registerTextDocumentContentProvider(DZ,this)),vn.workspace.textDocuments.forEach(r),this._register(vn.workspace.onDidOpenTextDocument(r)),this._register(vn.workspace.onDidChangeTextDocument(n=>{let i=I2(n.document.uri);i&&this._onDidChange.fire(i)})),this._register(vn.workspace.onDidCloseTextDocument(n=>{let i=I2(n.uri);i&&this._onDidChange.fire(i)}));async function r(n){let i=I2(n.uri);if(!i)return;let o=await vn.workspace.openTextDocument(i);await vn.languages.setTextDocumentLanguage(o,n.languageId)}}provideTextDocumentContent(r,n){let i=AZ(r);return i?vn.workspace.textDocuments.find(s=>s.uri.toString()===i.toString())?.getText():void 0}};function O2e(t){let e=t.get(zi).createInstance(C2),r={scheme:kZ,exclusive:!0};return vn.Disposable.from(new PZ,vn.languages.registerDefinitionProvider(r,e),vn.languages.registerTypeDefinitionProvider(r,e),vn.languages.registerImplementationProvider(r,e),vn.languages.registerHoverProvider(r,e))}async function Ant(t){return O2e(t)}var LZ={};an(LZ,{create:()=>Pnt});var Ai=require("vscode");function Pnt(t){let e=t.get(Ue),r=t.get(JE),n=t.get(ct),i=new qt;for(let o of r.getVariables())i.add(Ai.chat.registerChatVariableResolver(`copilot.${o.name}`,o.name,o.description??"",void 0,o.name==="codebase",{async resolve(s,a,c){return[]},resolve2:async(s,a,c,u)=>{let l={endpoint:await e.getUserRequestEndpoint(3),message:a.prompt},d={report(f){c.push(f)}},p=await o.resolve(n,l,u,d);return p?(p.references?.forEach(f=>{"variableName"in f.anchor||c.reference(f.anchor)}),[{level:Ai.ChatVariableLevel.Full,value:p.userMessages.join(`

`),description:""}]):[]}},o.fullName,o.icon?new Ai.ThemeIcon(o.icon):void 0));return i.add(knt(t)),i}function knt(t){return Ai.Disposable.from(Ai.commands.registerCommand("github.copilot.chat.attachSelection",e=>{e&&Ai.window.activeTextEditor?.document.uri.toString()===e.toString()&&!Ai.window.activeTextEditor.selection.isEmpty&&Ai.chat.attachContext?.("file",new Ai.Location(e,Ai.window.activeTextEditor.selection),Ai.ChatLocation.Panel)}),Ai.commands.registerCommand("github.copilot.chat.attachFile",e=>{e&&Ai.chat.attachContext?.("file",e,Ai.ChatLocation.Panel)}))}var Dnt=[...k2e,RZ,NZ,LZ],M2e=Dnt;var F2e=W(require("path"));var So=class t{static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new iF(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new iF(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new ln("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new ln(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new ht(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new ht(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Nr(this.startLineNumber-1,this.endLineNumberExclusive-1)}},iF=class t{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=dA(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=vm(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=r7(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=r7(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[n],c=e._normalizedRanges[i];a.startLineNumber<c.startLineNumber?(s=a,n++):(s=c,i++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[i],i++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new So(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(r.push(o),o=s)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=dA(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=vm(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let s=r;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>o&&i.push(new So(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new So(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],s=e._normalizedRanges[i],a=o.intersect(s);a&&!a.isEmpty&&r.push(a),o.endLineNumberExclusive<s.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var oF=class t{constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};var sF=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new ht(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new ht(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new ht(1,1,this.lineCount+1,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new $r(e.lineNumber,e.column+this.columnCount):new $r(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};var aF=class{constructor(e,r){this.range=e;this.text=r}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}};var w2=class t{static inverse(e,r,n){let i=[],o=1,s=1;for(let c of e){let u=new t(new So(o,c.original.startLineNumber),new So(s,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,s=c.modified.endLineNumberExclusive}let a=new t(new So(o,r+1),new So(s,n+1));return a.modified.isEmpty||i.push(a),i}static clip(e,r,n){let i=[];for(let o of e){let s=o.original.intersect(r),a=o.modified.intersect(n);s&&!s.isEmpty&&a&&!a.isEmpty&&i.push(new t(s,a))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new Eb(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new ln("not a valid diff");return new Eb(new ht(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ht(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Eb(new ht(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new ht(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}},cF=class t extends w2{static fromRangeMappings(e){let r=So.join(e.map(i=>So.fromRangeInclusive(i.originalRange))),n=So.join(e.map(i=>So.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Eb=class t{constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new aF(this.originalRange,r)}};var Nnt=F2e.join(__dirname,"diffWorker.js"),uF=class{constructor(e=Nnt){this._worker=new zo(()=>new zm(e,{name:"Diff worker"}))}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:s(i.changes),moves:i.moves.map(a=>new oF(new w2(new So(a[0],a[1]),new So(a[2],a[3])),s(a[4])))};function s(a){return a.map(c=>new cF(new So(c[0],c[1]),new So(c[2],c[3]),c[4]?.map(u=>new Eb(new ht(u[0],u[1],u[2],u[3]),new ht(u[4],u[5],u[6],u[7])))))}}};var eT=class{constructor(e,r,n,i,o,s){this._accessor=e;this._tokenManager=r;this._tokenizer=n;this._telemetryService=i;this._envService=o;this._fetcherService=s}async computeEmbeddings(e,r,n,i){let o=e.maxBatchSize,s=e.modelMaxPromptTokens-1;return this.fetchResponseWithBatches(e,r,i,s,o,n?.parallelism)}async fetchResponseWithBatches(e,r,n,i,o,s=1){for(let l of r)if(this._tokenizer.tokenLength(l)>i)return;let a=[],c=[],u=new i_(s);try{for(let l=0;l<r.length;l+=o){let d=r.slice(l,l+o);c.push(u.queue(async()=>{if(n?.isCancellationRequested)return;let p=await this.rawEmbeddingsFetchWithTelemetry(e,bn(),d,n);if(p.type==="failed")throw new Error("Embeddings request failed "+p.reason);return p}))}a=(await Promise.all(c)).flatMap(l=>l?.embeddings??[])}catch{return[]}finally{u.dispose()}if(!n?.isCancellationRequested)return a.length===0?void 0:a}async rawEmbeddingsFetchWithTelemetry(e,r,n,i){let o=Date.now(),s=await this.rawEmbeddingsFetch(e,r,n,i);return s.type==="failed"?(this._telemetryService.sendMSFTTelemetryErrorEvent("embedding.error",{type:s.type,reason:s.reason}),s):(this._telemetryService.sendMSFTTelemetryEvent("embedding.success",{},{batchSize:n.length,inputTokenCount:n.reduce((a,c)=>a+this._tokenizer.tokenLength(c),0),timeToComplete:Date.now()-o}),s)}async rawEmbeddingsFetch(e,r,n,i){try{let o=this._tokenManager instanceof YT?await this._tokenManager.getEmbeddingsToken(this._accessor):await this._tokenManager.getCopilotToken(this._accessor),s={input:n,model:e.model};e.interceptBody?.(s);let a=await YE(this._fetcherService,this._envService,this._telemetryService,e,o.token,"copilot-panel",r,s,i),c=a.status===200?await a.json():await a.text();return a.status===200&&c.data?{type:"success",embeddings:c.data.map(u=>u.embedding)}:{type:"failed",reason:c.error}}catch(o){let s=o?.message??"Unknown error";return s.match(/Unexpected.*JSON/i)&&(s="timeout"),{type:"failed",reason:s}}}};eT=fe([ie(0,ct),ie(1,Et),ie(2,ge),ie(3,Ee),ie(4,St),ie(5,Mr)],eT);var Tb=oe("IDomainService");var tT=class{constructor(e){this._configurationService=e;let r=this._configurationService.getConfig(Ae.DebugOverrideCAPIUrl)||"https://api.githubcopilot.com";r.endsWith("/")&&(r=r.slice(0,-1)),this._capiBaseUrl=r}get capiChatURL(){return`${this._capiBaseUrl}/chat/completions`}get capiEmbeddingsURL(){return`${this._capiBaseUrl}/embeddings`}get capiModelsURL(){return`${this._capiBaseUrl}/models`}};tT=fe([ie(0,ke)],tT);var rT=W(require("vscode"));var lF=class{get sessionId(){return rT.env.sessionId}get machineId(){return rT.env.machineId}get OS(){switch(qre){case 3:return"Windows";case 1:return"Mac";case 2:return"Linux";default:return"Linux"}}get language(){return rT.env.language}isProduction(){return GA}isPreRelease(){return Ap}getBuildType(){return xa.buildType}getVersion(){return xa.version}getBuild(){return xa.build}getName(){return xa.name}getEditorInfo(){return new WT("vscode",rT.version)}getEditorPluginInfo(){return new WT("copilot-chat",xa.version)}getEditorVersionHeaders(){return{"Editor-Version":this.getEditorInfo().format(),"Editor-Plugin-Version":this.getEditorPluginInfo().format()}}};var wl=W(require("vscode")),nT=class{async stat(e){return wl.workspace.fs.stat(e)}async readDirectory(e){return wl.workspace.fs.readDirectory(e)}async createDirectory(e){return wl.workspace.fs.createDirectory(e)}async readFile(e){return wl.workspace.fs.readFile(e)}async writeFile(e,r){return wl.workspace.fs.writeFile(e,r)}async delete(e,r){return wl.workspace.fs.delete(e,r)}async rename(e,r,n){return wl.workspace.fs.rename(e,r,n)}async copy(e,r,n){return wl.workspace.fs.copy(e,r,n)}isWritableFileSystem(e){return!!wl.workspace.fs.isWritableFileSystem(e)}createFileSystemWatcher(e){return wl.workspace.createFileSystemWatcher(e)}};var dF=class extends nT{constructor(){super()}async readFile(e){return super.readFile(e)}};var R2=oe("ICertificateReaderCache"),pF=class{constructor(){this.cache=new Map}get(e){return this.cache.get(e)}set(e,r){this.cache.set(e,r)}};var oke=W(require("fs"));var WF=oe("IRootCertificateReader"),ske=(t,e=process.platform)=>new Hee(t.get(Co),bat(e,t),new Yee),Hee=class{constructor(e,r,n){this.realReader=r;this.noopReader=n;this.delegate=r,e.onCopilotToken(i=>{this.delegate=i.token.getTokenValue("ssc")==="1"?this.realReader:this.noopReader})}getAllRootCAs(){return this.delegate.getAllRootCAs()}},bat=(t,e)=>{let r=e.get(R2).get(t);if(r)return r;let n=_at(t,e),i=new zee(n),o=new jee(i),s=new Gee(e,o);return e.get(R2).set(t,s),s},_at=(t,e)=>{switch(t){case"linux":return new Vee;case"darwin":return new $ee;case"win32":return new Wee(e);default:return new Kee}},Gee=class{constructor(e,r){this.accessor=e;this.delegate=r}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(e){return this.accessor.get(ue).getLogger("certificates").warn(`Failed to read root certificates: ${e}`),[]}}},jee=class{constructor(e){this.delegate=e}async getAllRootCAs(){return this.certificates||(this.certificates=await this.delegate.getAllRootCAs()),this.certificates}},zee=class{constructor(e){this.delegate=e}async getAllRootCAs(){let e=await this.delegate.getAllRootCAs(),r=process.env.NODE_EXTRA_CA_CERTS;if(!r)return e;let n=await ake(r);return e.concat(n)}},Vee=class{async getAllRootCAs(){let e=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let n=await ake(r);e=e.concat(n)}return e}},$ee=class{async getAllRootCAs(){let e=ike();return e.all(e.der2.pem).filter(r=>r!==void 0)}},Wee=class{constructor(e){this.accessor=e}async getAllRootCAs(){return await this.accessor.get(sk).loadCaCerts()||[]}},Kee=class{async getAllRootCAs(){throw new Error("No certificate reader available for unsupported platform")}},Yee=class{async getAllRootCAs(){return[]}};async function ake(t){try{let n=(await oke.promises.readFile(t,{encoding:"utf8"})).split(/(?=-----BEGIN CERTIFICATE-----)/g).filter(o=>o.length>0),i=new Set(n);return Array.from(i)}catch(e){if(e?.code!=="ENOENT")throw e}return[]}var cke=W(require("http"));var xat=407,KF=oe("IProxySocketFactory"),am=class extends Error{constructor(r,n,i){super(r);this.cause=n;this.responseStatus=i}};function uke(t){return new Qee(t,new Xee(t))}var Qee=class{constructor(e,r,n=process.platform){this.accessor=e;this.delegate=r;this.platform=n;this.successfullyAuthorized=new Ol(20);this.logger=e.get(ue).getLogger("proxy-socket-factory")}async createSocket(e,r){this.successfullyAuthorized.get(this.getProxyCacheKey(r))&&(this.logger.debug("Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(e,r));try{return await this.delegate.createSocket(e,r)}catch(n){if(n instanceof am&&n.responseStatus===xat){this.logger.debug("Proxy authorization required, trying to authorize first time");let i=await this.authorizeAndCreateSocket(e,r);if(i)return this.logger.debug("Proxy authorization successful, caching result"),this.successfullyAuthorized.set(this.getProxyCacheKey(r),!0),i}throw n}}async reauthorize(e,r){let n=await this.authorize(r);n&&(this.logger.debug("Proxy re-authorization successful, received token"),e.headers["Proxy-Authorization"]="Negotiate "+n)}async authorizeAndCreateSocket(e,r){let n=await this.authorize(r);if(this.logger.debug("Proxy authorization successful, received token"),n)return this.logger.debug("Trying to create socket with proxy authorization"),e.headers["Proxy-Authorization"]="Negotiate "+n,await this.delegate.createSocket(e,r)}async authorize(e){this.logger.debug("Loading kerberos module");let r=await Sat(this.accessor);if(!r){this.logger.debug("Could not load kerberos module");return}let n=this.computeSpn(e);this.logger.debug("Initializing kerberos client using spn",n);let i=await r.initializeClient(n);this.logger.debug("Perform client side kerberos step");let o=await i.step("");return this.logger.debug("Received kerberos server response"),o}computeSpn(e){let i=this.accessor.get(ke).getConfig(Ae.KerberosServicePrincipal)??e.kerberosServicePrincipal;if(i)return this.logger.debug("Using configured kerberos spn",i),i;let o=this.platform==="win32"?`HTTP/${e.host}`:`HTTP@${e.host}`;return this.logger.debug("Using default kerberos spn",o),o}getProxyCacheKey(e){return e.host+":"+e.port}},Xee=class{constructor(e){this.logger=e.get(ue).getLogger("proxy-socket-factory")}async createSocket(e,r){let n=this.createConnectRequestOptions(e,r);return new Promise((i,o)=>{this.logger.debug("Attempting to establish connection to proxy");let s=cke.request(n);s.useChunkedEncodingByDefault=!1,s.once("connect",(a,c,u)=>{this.logger.debug("Socket Connect returned status code",a.statusCode),s.removeAllListeners(),c.removeAllListeners(),a.statusCode!==200?(c.destroy(),o(new am("tunneling socket could not be established",void 0,a.statusCode))):u.length>0?(c.destroy(),o(new am("got illegal response body from proxy"))):(this.logger.debug("Successfully established tunneling connection to proxy"),i(c))}),s.once("error",a=>{this.logger.debug("Proxy socket connection error",a.message),s.removeAllListeners(),o(new am("tunneling socket could not be established",a))}),s.on("timeout",()=>{this.logger.debug("Proxy socket connection timeout"),o(new am(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${n.host}:${n.port}`))}),s.end()})}createConnectRequestOptions(e,r){let n={...r,method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port,"Proxy-Connection":"keep-alive"},timeout:e.timeout};return e.localAddress&&(n.localAddress=e.localAddress),this.configureProxyAuthorization(n,e),n}configureProxyAuthorization(e,r){e.headers["Proxy-Authorization"]=[],e.proxyAuth&&e.headers["Proxy-Authorization"].push("Basic "+Buffer.from(e.proxyAuth).toString("base64")),r.headers&&r.headers["Proxy-Authorization"]&&e.headers["Proxy-Authorization"].push(r.headers["Proxy-Authorization"])}};async function Sat(t){try{return t.get(ok).loadKerberos()}catch{return}}var Eat=W(require("http")),Tat=W(require("https"));var YF=class extends b0{constructor(r){super();this._envService=r}fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._envService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}_fetch(r,n,i,o,s){return new Promise((a,c)=>{let l=(r.startsWith("https:")?Tat:Eat).request(r,{method:n,headers:i},d=>{if(s.aborted){d.destroy(),l.destroy(),c(Jee(s));return}let p=new Zee(l,d,s);a(new Rm(d.statusCode||0,d.statusMessage||"",p.headers,async()=>p.text(),async()=>p.json(),async()=>p.body()))});l.setTimeout(60*1e3),l.on("error",c),o&&l.write(o),l.end()})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return Cat(r)}isDNSLookupFailedError(r){return r&&r.code==="ENOTFOUND"}isFetcherError(r){return r&&["EADDRINUSE","ECONNREFUSED","ECONNRESET","ENOTFOUND","EPIPE","ETIMEDOUT"].includes(r.code)}getUserMessageForFetcherError(r){return`Please check your firewall rules and network connection then try again. Error Code: ${r.code}.`}};function Jee(t){return t.reason}function Cat(t){return t&&t.name==="AbortError"}var Zee=class{constructor(e,r,n){this.req=e;this.res=r;this.signal=n;this.headers=new class{get(i){let o=r.headers[i];return Array.isArray(o)?o[0]:o??null}[Symbol.iterator](){let i=Object.keys(r.headers),o=0;return{next:()=>{if(o>=i.length)return{done:!0,value:void 0};let s=i[o++];return{done:!1,value:[s,this.get(s)]}}}}}}text(){return new Promise((e,r)=>{let n=[];this.res.on("data",i=>n.push(i)),this.res.on("end",()=>e(Buffer.concat(n).toString())),this.res.on("error",r),this.signal.addEventListener("abort",()=>{this.res.destroy(),this.req.destroy(),r(Jee(this.signal))})})}async json(){let e=await this.text();return JSON.parse(e)}async body(){return this.signal.addEventListener("abort",()=>{this.res.emit("error",Jee(this.signal)),this.res.destroy(),this.req.destroy()}),this.res}};var ete=require("stream");var QF=class t extends b0{constructor(r,n){super();this._net=r;this._envService=n}static create(r){let n=Iat();return n?new t(n,r):null}async fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._envService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}async _fetch(r,n,i,o,s){let a=await this._net.fetch(r,{method:n,headers:i,body:o,signal:s});return new Rm(a.status,a.statusText,a.headers,()=>a.text(),()=>a.json(),async()=>{if(!a.body)return ete.Readable.from([]);let c=a.body[Symbol.asyncIterator]();return ete.Readable.from(c)})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return r&&r.name==="AbortError"}isDNSLookupFailedError(r){return r?.message==="net::ERR_INTERNET_DISCONNECTED"}isFetcherError(r){return r&&r.message&&r.message.startsWith("net::")}getUserMessageForFetcherError(r){return`Please check your firewall rules and network connection then try again. Error Code: ${r.message}.`}};function Iat(){try{return require("electron").net}catch{}}var TT=W(fDe(),1),z4r={ALPN_HTTP2:TT.default.ALPN_HTTP2,ALPN_HTTP2C:TT.default.ALPN_HTTP2C,ALPN_HTTP1_1:TT.default.ALPN_HTTP1_1,ALPN_HTTP1_0:TT.default.ALPN_HTTP1_0},{fetch:V4r,context:mDe,reset:$4r,noCache:W4r,h1:K4r,keepAlive:Y4r,h1NoCache:Q4r,keepAliveNoCache:X4r,cacheStats:J4r,clearCache:Z4r,offPush:e3r,onPush:t3r,createUrl:r3r,timeoutSignal:n3r,Body:i3r,Headers:o3r,Request:s3r,Response:a3r,AbortController:hDe,AbortError:gDe,AbortSignal:c3r,FetchBaseError:u3r,FetchError:Ate,ALPN_HTTP2:l3r,ALPN_HTTP2C:d3r,ALPN_HTTP1_1:p3r,ALPN_HTTP1_0:f3r}=TT.default;var vDe=W(require("tls"));var f9=class{constructor(e){this._certificateReader=e.get(WF)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async applyToRequestOptions(e){let r=await this._certificateReader.getAllRootCAs(),n={_vscodeAdditionalCaCerts:r};e.secureContext=vDe.createSecureContext(n),e.ca=r,e.cert=r,r.map(i=>{e.secureContext.context.addCACert(i)})}};var m9=class extends b0{constructor(r){super();this.accessor=r;this.createSocketFactory=(r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);try{return await this.proxySocketFactory.createSocket(i,o)}catch(s){throw s instanceof am&&s.cause?new Error(`${s.message}, cause=${s.cause.message}`):new Error(s.message)}};this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new f9(r),this.proxySocketFactory=r.get(KF)}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.accessor)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){this._rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.accessor)}get rejectUnauthorized(){return this._rejectUnauthorized}createFetchApi(r){let n=r.get(St);return mDe({userAgent:`GitHubCopilotChat/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,this.rejectUnauthorized):void 0,rejectUnauthorized:this.rejectUnauthorized})}async fetch(r,n){let i={...n,body:n.body?n.body:n.json,signal:n.signal};await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(o);let s=await this.fetchApi.fetch(r,i);return new Rm(s.status,s.statusText,s.headers,()=>s.text(),()=>s.json(),async()=>s.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new hDe}isAbortError(r){return r instanceof gDe}isDNSLookupFailedError(r){return r instanceof Ate&&r.code==="ENOTFOUND"}isFetcherError(r){return r instanceof Ate}getUserMessageForFetcherError(r){return`Please check your firewall rules and network connection then try again. Error Code: ${r.code}.`}};var bDe=require("net"),_De=require("url"),CT=require("vscode");function Xut(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy||null}function xDe(t,e){let r=CT.workspace.onDidChangeConfiguration(n=>{let i=n.affectsConfiguration("http.proxy");(n.affectsConfiguration("http.proxyStrictSSL")||n.affectsConfiguration("http.proxyAuthorization")||n.affectsConfiguration("http.proxyKerberosServicePrincipal")||i)&&yDe(t,e,i)});return yDe(t,e),r}var yDe=(t,e,r)=>{let i=CT.workspace.getConfiguration("http").get("proxy")||Xut(e);if(i){let o={},s=CT.workspace.getConfiguration("http").get("proxyAuthorization"),a=CT.workspace.getConfiguration("http").get("proxyStrictSSL",!0);s&&(o["Proxy-Authorization"]=s);let c=i,u=i.split(":");if(u.length>2){if(i.includes("[")){let v=i.indexOf("["),y=i.indexOf("]");c=i.substring(v+1,y)}}else c=u[0];let l=(0,bDe.isIP)(c);l===4?i=`https://${i}`:l===6&&(i.includes("[")?i.startsWith("https://")||(i=`https://${i}`):i=`https://[${i}]`);let{hostname:d,port:p,username:f,password:m}=Jut(i),h=f&&m&&`${decodeURIComponent(f)}:${decodeURIComponent(m)}`;t.proxySettings={host:d,port:parseInt(p),proxyAuth:h,headers:o};let g=CT.workspace.getConfiguration("http").get("proxyKerberosServicePrincipal");g&&(t.proxySettings.kerberosServicePrincipal=g),t.rejectUnauthorized=a}else r&&!i&&(t.proxySettings=void 0)};function Jut(t){try{return new _De.URL(t)}catch{throw new Error(`Invalid proxy URL: '${t}'`)}}var h9=class extends m9{constructor(r){super(r);this._store=new qt;this._store.add(xDe(this,process.env))}dispose(){this._store.dispose()}};var g9=class{constructor(e){let r=e.get(ue),n=e.get(St),i=e.get(ke);this._logger=r.getLogger("FetcherService"),this._fetcher=this._getFetcher(e,i,n)}_getFetcher(e,r,n){if(r.getConfig(Ae.DebugUseElectronFetcher)){let s=QF.create(n);if(s)return this._logger.info("Using the Electron fetcher."),s;this._logger.info("Can't use the Electron fetcher in this environment.")}return r.getConfig(Ae.DebugUseNodeFetcher)?(this._logger.info("Using the Node fetcher."),new YF(n)):(this._logger.info("Using the Helix fetcher."),new h9(e))}fetch(e,r){return this._fetcher.fetch(e,r)}disconnectAll(){return this._fetcher.disconnectAll()}makeAbortController(){return this._fetcher.makeAbortController()}isAbortError(e){return this._fetcher.isAbortError(e)}isDNSLookupFailedError(e){return this._fetcher.isDNSLookupFailedError(e)}isFetcherError(e){return this._fetcher.isFetcherError(e)}getUserMessageForFetcherError(e){return this._fetcher.getUserMessageForFetcherError(e)}};var y9=W(require("vscode")),v9=class{async open(e){await y9.commands.executeCommand("vscode.open",y9.Uri.parse(e))}};function SDe(t){let r=[`(repo:${(Array.isArray(t.repo)?t.repo:[t.repo]).join(" OR repo:")})`];return t.lang&&r.push(`(lang:${t.lang.join(" OR lang:")})`),t.notLang&&r.push(`NOT (lang:${t.notLang.join(" OR lang:")})`),t.path&&r.push(`(path:${t.path.join(" OR path:")})`),t.notPath&&r.push(`NOT (path:${t.notPath.join(" OR path:")})`),r.join(" ")}var b9=class extends Error{constructor(r,n){super(n);this.status=r}},Zut=6,elt=.766,X2=class{constructor(e){this._accessor=e;this._logger=this._accessor.get(ue).getLogger("CodeOrDocsSearchClient");this._configurationService=this._accessor.get(ke)}async search(e,r,n={},i){let o;if(Array.isArray(r.repo)&&!r.repo.length)throw new Error("No repos specified");try{o=await this.postCodeOrDocsSearchRequestWithRetry(e,r,n,i)}catch(a){throw this._accessor.get(Ee).sendGHTelemetryException(a,`${this.slug} search failed`),a}let s=o.errors?.map(rCe)??[];if(!Array.isArray(r.repo)){if(s.length)throw s.length>1?new AggregateError(s):s[0];return o.results}return{results:o.results,errors:s}}async postCodeOrDocsSearchRequestWithRetry(e,r,n,i){let o=this._accessor.get(Et),s=await o.getPermissiveGitHubToken({silent:!0})??await o.getAnyGitHubToken();if(i?.isCancellationRequested)return{results:[]};let a=`${this._configurationService.getConfig(Ae.AgentsEndpointUrl)}/search/${this.slug}`,c=5,u=0,l=new Set,d;for(;u<c;){if(i?.isCancellationRequested)return{results:[]};try{try{return await this.postCodeOrDocsSearchRequest(a,s,e,r,n,i)}catch(p){if(p instanceof b9)throw p;d=p;break}}catch(p){u++;let f=u*1e3;l.add(`Error fetching ${this.slug} search. ${p.message??p}`),this._logger.warn(`[repo:${r.repo}] Error fetching ${this.slug} search. Retrying in ${u} seconds. Query: ${e}`),await new Promise(m=>setTimeout(m,f))}}if(i?.isCancellationRequested)return{results:[]};throw u>=c&&(this._logger.warn(`[repo:${r.repo}] Max Retry Error thrown while querying '${e}'`),d=RQ({error:"ERROR_TYPE_MAX_RETRIES_EXCEEDED",message:`${this.slug} search timed out after ${c} retries. ${Array.from(l).join(`
`)}`})),d}async postCodeOrDocsSearchRequest(e,r,n,i,o,s){let a=o.limit??Zut,c=o.similarity??elt,u=o.rawChunks??!1,l={url:e,name:"Code Or Doc Search",version:"2023-12-12-preview",modelMaxPromptTokens:0,getExtraHeaders(){let m={Accept:"application/json","X-GitHub-Api-Version":"2023-12-12-preview"};return u&&(m["X-Experiment-blackbird_snippet_mode"]="raw"),m}},d=await YE(this._accessor.get(Mr),this._accessor.get(St),this._accessor.get(Ee),l,r??"",void 0,bn(),{query:n,scopingQuery:SDe(i),similarity:c,limit:a},s),p=await d.text();if(d.status===404||d.status===400&&p.includes("unknown integration"))throw this._logger.debug(`${this.slug} search endpoint not available for this user.`),RQ({error:"ERROR_TYPE_NO_ACCESS_TO_ENDPOINT",message:`${this.slug}: ${p}`});let f;try{f=JSON.parse(p)}catch{throw new b9(d.status,p)}return f}};fe([gi(e=>e._logger)],X2.prototype,"search",1);var _9=class extends X2{constructor(){super(...arguments);this.slug="code"}},x9=class extends X2{constructor(){super(...arguments);this.slug="docs"}};var S9=class{sendEventData(e,r){throw new Error("Telemetry disabled")}sendErrorData(e,r){throw new Error("Telemetry disabled")}flush(){return Promise.resolve()}};var Pte=class{getReporter(e,r){if(!r)return this.reporter;if(E9(e))return this.reporterSecure;if(e.get(xr).extensionMode===Sa.Test)return new S9}setReporter(e){this.reporter=e}setSecureReporter(e){this.reporterSecure=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.flush?this.reporter.flush():void 0,this.reporter=void 0);let r=Promise.resolve();this.reporterSecure&&(r=this.reporterSecure.flush?this.reporterSecure.flush():void 0,this.reporterSecure=void 0),await Promise.all([e,r])}},T9=class{constructor(e){this.accessor=e;this.reporters=new Pte;this.openPromises=void 0}withPromise(e){return this.openPromises?(this.openPromises.add(e),e.then(r=>{this.openPromises?.delete(e)})):e}async enablePromiseTracking(e){e?this.openPromises||(this.openPromises=new Set):await this.awaitOpenPromises(void 0)}setSecureReporter(e){this.reporters.setSecureReporter(e)}setReporter(e){this.reporters.setReporter(e)}async sendTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!1))}async sendRestrictedTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!0))}async sendErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!1))}async sendRestrictedErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!0))}async sendExpProblemTelemetry(e){await this.withPromise(this._sendExpProblemTelemetry(e))}async sendExceptionTelemetry(e,r){await this.withPromise(this._sendExceptionTelemetry(e,r))}async deactivate(){await this.awaitOpenPromises(new Set),await this.reporters.deactivate()}async awaitOpenPromises(e){if(this.openPromises){let r=[...this.openPromises.values()];this.openPromises=e,await Promise.all(r)}}async _sendTelemetry(e,r,n){if(n&&!E9(this.accessor))return;let i=r||Ar.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor),this.sendTelemetryEvent(n??!1,e,i)}async _sendExpProblemTelemetry(e){let r="expProblem",n=Ar.createAndMarkAsIssued(e,{});await n.makeReadyForSending(this.accessor),this.sendTelemetryEvent(!1,r,n)}async _sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=E9(this.accessor),o=Ar.createAndMarkAsIssued({origin:zL(r),reason:i?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await o.makeReadyForSending(this.accessor),this.sendTelemetryEvent(!1,"exception",o),!i)return;let s=Ar.createAndMarkAsIssued({origin:r});await s.makeReadyForSending(this.accessor),this.sendTelemetryException(!0,n,s)}async _sendErrorTelemetry(e,r,n){if(n&&!E9(this.accessor))return;let i=r||Ar.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor),this.sendTelemetryErrorEvent(n??!1,e,i)}sendTelemetryEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Ar.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}sendTelemetryException(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Ar.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendErrorData(r,{...o,...n.measurements})}}sendTelemetryErrorEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Ar.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}};function E9(t){return t.get(a_).optedIn}var J2=W(require("vscode")),C9=class{getAllExtensions(){return J2.extensions.all}async getAllCommands(){return J2.commands.executeCommand("_getAllCommands")}async getAllSettings(){return J2.commands.executeCommand("_getAllSettings")}};function tlt(t){switch(t){case"text-embedding-ada-002":case"copilot-preview-ada-centralus":case"copilot-preview-babbage-centralus":return{maxBatchSize:16,maxTokens:8192};default:throw new Error(`Unknown model ${t}`)}}var I9=class{constructor(e,r){this.model=e;this.url=r;this.name="Embedding Endpoint";this.version="Embedding Endpoint";let n=tlt(e);this.maxBatchSize=n.maxBatchSize,this.modelMaxPromptTokens=n.maxTokens}};var Z2=class{constructor(e,r,n,i,o,s){this._accessor=e;this._fetcher=r;this._domainService=n;this._envService=i;this._copilotTokenManager=o;this._telemetryService=s;this._familyMap=new Map;this._lastFetchTime=0}async getAllChatModels(){return await this._fetchModels(),Array.from(this._familyMap.values()).reduce((e,r)=>e.concat(r),[])}async getChatModel(e){await this._fetchModels();let r;if(e==="gpt-4"?r=this._familyMap.get("gpt-4-turbo")?.[0]??this._familyMap.get("gpt-4")?.[0]:r=this._familyMap.get(e)?.[0],!r)throw new Error(`Unable to resolve model with family selection: ${e}`);return r}_shouldRefreshModels(){if(this._familyMap.size===0)return!0;let e=10*60*1e3,r=Date.now();return this._lastFetchTime?r-this._lastFetchTime>e:!0}async _fetchModels(e){if(!e&&!this._shouldRefreshModels())return;let r=(await this._copilotTokenManager.getCopilotToken(this._accessor)).token;if(r)try{let n=await S2e(this._fetcher,this._envService,this._telemetryService,this._domainService.capiModelsURL,r,"model-access",bn());this._lastFetchTime=Date.now(),this._familyMap.clear();let o=(await n.json()).data.filter(s=>s.capabilities.type==="chat");for(let s of o){let a=s.capabilities.family;this._familyMap.has(a)||this._familyMap.set(a,[]),this._familyMap.get(a)?.push({id:s.id,name:s.name,version:s.version,capabilities:{family:a,type:"chat"}})}}catch{this._lastFetchTime=0}}};Z2=fe([ie(0,ct),ie(1,Mr),ie(2,Tb),ie(3,St),ie(4,Et),ie(5,Ee)],Z2);var IT=class{constructor(e){this.accessor=e;this._chatEndpoints=new Map;this.accessor.get(Co).onCopilotToken(r=>{let n=this.accessor.get(ke).getConfig(Ae.DebugOverrideChatEngine);r.token.isInternal&&n&&(this._overridenChatModel=n)}),this._modelFetcher=new Z2(e,e.get(Mr),e.get(Tb),e.get(St),e.get(Et),e.get(Ee))}async shouldDisableSnippy(){let e=await this.accessor.get(Et).getCopilotToken(this.accessor),r=this.accessor.get(xr).extensionMode===Sa.Development;return e.isInternal&&r}async getOrCreateChatEndpointInstance(e){let r=e.id,n=this._chatEndpoints.get(r);if(!n){let i=this.accessor.get(Tb).capiChatURL,o=await vRe(this.accessor,r),s=await this.shouldDisableSnippy()&&!!process.env.HMAC_SECRET;n=new FE(i,e,o,s),this._chatEndpoints.set(r,n)}return n}async getChatEndpoint(e){let r=await this._modelFetcher.getChatModel(e);return this.getOrCreateChatEndpointInstance(r)}async getEmbeddingsEndpoint(){if(this._embeddingsEndpoint)return this._embeddingsEndpoint;let e=await this.accessor.get(Et).getCopilotToken(this.accessor),r;return e.isInternal&&(r=this.accessor.get(ke).getConfig(Ae.DebugOverrideEmbeddingsModel)),this._embeddingsEndpoint=new I9(r??"text-embedding-ada-002",this.accessor.get(Tb).capiEmbeddingsURL),this._embeddingsEndpoint}async getAllChatEndpoints(){let e=await this._modelFetcher.getAllChatModels(),r=[];for(let n of e){let i=await this.getOrCreateChatEndpointInstance(n);r.push(i)}return r}async getUserRequestEndpoint(e,r,n){if(n=n??this._overridenChatModel,n)return this.getOrCreateChatEndpointInstance({id:n,name:"Custom Overriden Chat Model",version:"1.0.0",capabilities:{family:"custom",type:"chat"}});let i=this.accessor.get(Mt),o=this.accessor.get(ke),s="gpt-3.5-turbo";if(e===2)s="gpt-4";else if(e===1)switch(r){case qE.ID:{let a=o.getConfig(Ae.FixUseGPT4InInlineChat);(await i.getTreatmentVariableAsync("vscode","copilotchat.fixInlineGpt4",!0)||a)&&(s="gpt-4");break}case c0.ID:case a0.ID:case qs.ID:{await this.accessor.get(Mt).getTreatmentVariableAsync("vscode","copilotchat.inlineChatGpt4",!0)&&(s="gpt-4");break}}return this.getChatEndpoint(s)}};IT=fe([ie(0,ct)],IT);function EDe(t){t.define(Co,new ZA),t.define(St,new lF),t.define(US,new uF),t.define(Am,new T9(t)),t.define(R2,new pF),t.define(WF,ske(t)),t.define(KF,uke(t)),t.define(Mr,new g9(t)),t.define(Ue,new Ot(IT)),t.define(Tb,new Ot(tT));let e=new QR(t,new w_,new nT);t.define(De,e),t.define(a_,new eP(t)),t.define(rP,new tP),t.define(E2e,new KM),t.define(JA,new XA(t)),t.define(s_,new v9),t.define(y_,new KP),t.define(fn,new dF),t.define(Ws,new Ot(eT)),t.define(Lc,new Mm(t)),t.define(yl,new Ot(kS)),t.define(z6,new j6(t)),t.define(JE,new eF(t)),t.define(U5,new _9(t)),t.define(B5,new x9(t)),t.define(Q0,new C9)}var rlt=Hr.window.createOutputChannel("GitHub Copilot Chat",{log:!0});async function nlt(t,e){if(t.extensionMode===Hr.ExtensionMode.Test&&!e)return t;if(Hr.l10n.bundle&&wT.config({contents:Hr.l10n.bundle}),Hr.chat._version!==1){await Hr.window.showErrorMessage(wT.t("{0} is not compatible with this version of {1}. Please make sure that you have the latest versions of the extension and {1} installed.","GitHub Copilot Chat","VS Code"),wT.t("Show Extension"))&&await Hr.commands.executeCommand("workbench.extensions.action.showExtensionsWithIds",["GitHub.copilot-chat"]);return}let r=await IDe(t);t.subscriptions.push(wDe(r));let n=r.get(Am),i=r.get(Ee);return r.get(St).isProduction||CDe.install(),await(async()=>{let a=c=>{let u=c.message||c,l=Ar.createAndMarkAsIssued({reason:u});i.sendGHTelemetryErrorEvent("activationFailed",l.properties,l.measurements),n.deactivate();let d=u==="GitHubLoginFailed"?_ne:`GitHub Copilot could not connect to server. Extension activation failed: "${u}"`;r.get(ue).defaultLogger.error(d),Hr.commands.executeCommand("setContext","github.copilot-chat.activated",!1);let p=r.get(Et).onDidGitHubTokenChanged(async()=>{try{await r.get(Et).getCopilotToken(r)&&(Hr.commands.executeCommand("setContext","github.copilot-chat.activated",!0),tA(r),p.dispose())}catch(f){tA(r,f),a(f)}})};try{await r.get(Et).getCopilotToken(r),Hr.commands.executeCommand("setContext","github.copilot-chat.activated",!0),await dRe(r)}catch(c){r.get(Mr).isDNSLookupFailedError(c)&&t.subscriptions.push(olt(r,a)),tA(r,c),a(c)}t.subscriptions.push(Hr.workspace.onDidChangeConfiguration(c=>Oie(c,r))),ERe(r),slt(r,t),i.sendGHTelemetryEvent("extension.activate")})(),Hr.ExtensionMode.Test===t.extensionMode?r:{getAPI(a){if(a>LR.version)throw new Error("Invalid Copilot Chat extension API version. Please upgrade Copilot Chat.");return new LR(r)}}}async function IDe(t){let e=new HA;t.subscriptions.push(e),e.define(ke,new Ot(UP)),e.define(ue,new Ot(Pp,[[new VA,new $A(rlt)]])),e.define(yk,new Ot(vk)),e.define(xt,new Ot(T_,[!0])),e.define(ge,new lU.Cl100KBaseTokenizer),EDe(e),e.define(xr,t),e.define(Lc,new Ot(Mm)),e.define(zg,new Ot($f)),e.define(Ta,new Ot(ev)),e.define(qM,new Ot(WE)),e.define(Tt,new _k),e.define(Wm,new Ot(I_)),e.define(oc,new tk(e)),e.define(ek,new Ot(XE)),e.define(ei,new Ot(Hu)),e.define(Oc,new Ot(__)),e.define(qP,new Ot(QE)),e.define(sc,new Ot(C_)),e.define(Ko,new Ot(nk)),e.define(hi,new Ot(ik)),e.define(HP,new GP),e.define(ok,new ak),e.define(sk,new ck),e.define(ao,new n5),e.define(h_,new BP),e.define(gl,new a5),e.define(Hm,new Ot(qu)),e.define(lP,new Ot(xE)),e.define(Wg,new W5);let r=t.extension.packageJSON.internalAIKey??"",n=t.extension.packageJSON.ariaKey??"";if(t.extensionMode===Hr.ExtensionMode.Test)e.define(Et,yne()),e.define(s_,new YA),await TDe(e,t,r,n,"copilot-test",!0);else{let i=new aP(e.get(ke),e);t.subscriptions.push(i),e.define(Et,i),e.define(y_,new WP),await TDe(e,t,r,n,t.extension.packageJSON.name,Hr.env.isTelemetryEnabled)}return e.define(Jt,new Ot(_0)),e.define(pE,new Ot(OE)),e.define(QA,new dk),e.define(TU,new ZP),e.define(o_,new Ot(S_)),e.define(Vi,{_serviceBrand:void 0,maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:e.get(ke).getConfig(Ae.ConversationAdditionalPromptContext),rejectionMessage:wT.t("Sorry, but I can only assist with programming related questions.")}),e.define(J0,new lk),Iie(e),e.define(Ze,new Ot(xS)),e.define(qm,new Ot(v_)),e.define(G5,new Ot(OS)),e.define($g,new Ot(Yf,[void 0])),e.define(N8,new Ot(kE)),e.define(cp,new Ot(NE)),e.define(gJ,new Ot(LE)),e.define(Z8,new Ot(ZE)),e.define($5,new V5),e.define(VP,new Ot(g_)),e.define(uP,new Ot(cP)),t.subscriptions.push(e.get(De)),e.get(De).init(),e.get(gJ),e.seal(),e}async function ilt(t,e){if(Hr.ExtensionMode.Production===e.extensionMode){let r=t.get(Ee),n=await qye(e,r,t.get(St).isPreRelease());t.define(Mt,n)}else t.define(Mt,new xk)}async function TDe(t,e,r,n,i,o){let s=await Yz(t,i,o),a=Hr.env.onDidChangeTelemetryEnabled(async c=>{s?.dispose(),s=await Yz(t,e.extension.packageJSON.name,c&&Hr.env.isTelemetryEnabled)});if(e.subscriptions.push(a),e.subscriptions.push(new Hr.Disposable(()=>s?.dispose())),Hr.ExtensionMode.Production===e.extensionMode){let c=new t5(e.extension.packageJSON.name,t,r,n,Wz,Kz);t.define(Ee,c),e.subscriptions.push(c)}else t.define(Ee,new Sk);ilt(t,e)}function wDe(t){return{dispose:async()=>{t.get(Ee).sendGHTelemetryEvent("extension.deactivate")}}}var eA={Offline:"github.copilot.offline",IndividualDisabled:"github.copilot.interactiveSession.individual.disabled",IndividualExpired:"github.copilot.interactiveSession.individual.expired",EnterpriseDisabled:"github.copilot.interactiveSession.enterprise.disabled"};function tA(t,e){let r=Object.values(eA),n;t.get(Mr).isDNSLookupFailedError(e)?n=eA.Offline:e instanceof QT?n=eA.IndividualDisabled:e instanceof XT?n=eA.IndividualExpired:e instanceof JT&&(n=eA.EnterpriseDisabled),n&&Hr.commands.executeCommand("setContext",n,!0);for(let o of r)o!==n&&Hr.commands.executeCommand("setContext",o,!1)}function olt(t,e){return Hr.commands.registerCommand("github.copilot.offline",async()=>{try{await t.get(Et).getCopilotToken(t),Hr.commands.executeCommand("setContext","github.copilot-chat.activated",!0),tA(t)}catch(r){if(t.get(Mr).isDNSLookupFailedError(r))return;tA(t,r),e(r)}})}async function slt(t,e){let r=t.get(ue).getLogger("contributions"),n=o=>{r.error(`Error while loading contribution: ${o} ${o.stack}`)},i=o=>{o instanceof Hr.Disposable&&e.subscriptions.push(o)};for(let o of M2e){let s;try{s=o.create(t)}catch(a){n(a)}i(s),s instanceof Promise&&s.then(i).catch(n)}}0&&(module.exports={activate,createExtensionContext,onDeactivate});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

@vscode/prompt-tsx/dist/base/util/arrays.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js:
  (*!
   * Application Insights JavaScript SDK - Web Snippet, 1.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
